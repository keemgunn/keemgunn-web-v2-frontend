{"remainingRequest":"/Users/gunn/codespaces/keemgunn-web-v2-frontend/node_modules/babel-loader/lib/index.js!/Users/gunn/codespaces/keemgunn-web-v2-frontend/node_modules/eslint-loader/index.js??ref--13-0!/Users/gunn/codespaces/keemgunn-web-v2-frontend/src/packages/blotter.js","dependencies":[{"path":"/Users/gunn/codespaces/keemgunn-web-v2-frontend/src/packages/blotter.js","mtime":1634222192641},{"path":"/Users/gunn/codespaces/keemgunn-web-v2-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1633314931844},{"path":"/Users/gunn/codespaces/keemgunn-web-v2-frontend/node_modules/babel-loader/lib/index.js","mtime":1633314931691},{"path":"/Users/gunn/codespaces/keemgunn-web-v2-frontend/node_modules/eslint-loader/index.js","mtime":1633314933310}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF90eXBlb2Y9cmVxdWlyZSgiL1VzZXJzL2d1bm4vY29kZXNwYWNlcy9rZWVtZ3Vubi13ZWItdjItZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvdHlwZW9mIikuZGVmYXVsdDtyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIik7cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5kZXNjcmlwdGlvbi5qcyIpO3JlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIik7cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIik7cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiKTtyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiKTtyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyIpO3JlcXVpcmUoImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIik7cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyIpO3JlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIik7cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQtaW5kZXguanMiKTtyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIik7cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIik7cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyIpO3JlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zb3J0LmpzIik7cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIik7cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5tYXRjaC5qcyIpO3JlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiKTtyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuaW50OC1hcnJheS5qcyIpO3JlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5jb3B5LXdpdGhpbi5qcyIpO3JlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5ldmVyeS5qcyIpO3JlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maWxsLmpzIik7cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbHRlci5qcyIpO3JlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maW5kLmpzIik7cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbmQtaW5kZXguanMiKTtyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZm9yLWVhY2guanMiKTtyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuaW5jbHVkZXMuanMiKTtyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuaW5kZXgtb2YuanMiKTtyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuaXRlcmF0b3IuanMiKTtyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuam9pbi5qcyIpO3JlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5sYXN0LWluZGV4LW9mLmpzIik7cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5Lm1hcC5qcyIpO3JlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5yZWR1Y2UuanMiKTtyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkucmVkdWNlLXJpZ2h0LmpzIik7cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnJldmVyc2UuanMiKTtyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc2V0LmpzIik7cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnNsaWNlLmpzIik7cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnNvbWUuanMiKTtyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc29ydC5qcyIpO3JlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zdWJhcnJheS5qcyIpO3JlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS50by1sb2NhbGUtc3RyaW5nLmpzIik7cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnRvLXN0cmluZy5qcyIpO3JlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luLmpzIik7cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5jb25zdHJ1Y3Rvci5qcyIpO3JlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyIpO3JlcXVpcmUoImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLnRvLWpzb24uanMiKTtyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmVwc2lsb24uanMiKTtyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIik7cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5pcy1pbnRlZ2VyLmpzIik7cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm1hdGguc2lnbi5qcyIpO3JlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIik7cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyIpO3JlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3ViLmpzIik7cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBlYXQuanMiKTtyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmxvYXQzMi1hcnJheS5qcyIpO3JlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5pbnQzMi1hcnJheS5qcyIpO3JlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS51aW50MTYtYXJyYXkuanMiKTtyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmxvYXQ2NC1hcnJheS5qcyIpO3JlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5pbnQxNi1hcnJheS5qcyIpO3JlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS51aW50MzItYXJyYXkuanMiKTtyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkudWludDgtYXJyYXkuanMiKTtyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkudWludDgtY2xhbXBlZC1hcnJheS5qcyIpO3JlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lc25leHQuYXJyYXkuYXQuanMiKTtyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXNuZXh0LnR5cGVkLWFycmF5LmF0LmpzIik7cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdC5qcyIpO3JlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc2VhcmNoLmpzIik7cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL3dlYi5pbW1lZGlhdGUuanMiKTtyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1wcm90b3R5cGUtb2YuanMiKTtyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvci5qcyIpO3JlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWxsLmpzIik7cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm1hdGgudHJ1bmMuanMiKTtyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXktYnVmZmVyLmNvbnN0cnVjdG9yLmpzIik7cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci50by1maXhlZC5qcyIpOy8qIQovLyDilojilojiloggICDiloggICAg4paI4paI4paI4paI4paEICAgIOKWhOKWhOKWhOKWhOKWgCDiloTiloTiloTiloTiloAg4paE4paI4paI4paI4paEICAg4paI4paE4paE4paE4paECi8vIOKWiCAg4paIICDiloggICAg4paIICAg4paIIOKWgOKWgOKWgCDilogg4paA4paA4paAIOKWiCAgICDilojiloAgICDiloAgIOKWiCAg4paE4paACi8vIOKWiCDiloAg4paEIOKWiCAgICDiloggICDiloggICAgIOKWiCAgICAg4paIICAgIOKWiOKWiOKWhOKWhCAgICDilojiloDiloDilowKLy8g4paIICDiloTiloAg4paI4paI4paI4paEIOKWgOKWiOKWiOKWiOKWiCAgICDiloggICAgIOKWiCAgICAg4paI4paEICAg4paE4paAIOKWiCAg4paICi8vIOKWiOKWiOKWiCAgICAgICDiloAgICAgICAgIOKWgCAgICAg4paAICAgICAg4paA4paI4paI4paI4paAICAgICDilogKLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDiloAKLy8gVGhlIE1JVCBMaWNlbnNlCi8vCi8vIENvcHlyaWdodCDCqSAxOTg2IC0g4oieLCBCbG90dGVyIC8gQnJhZGxleSBHcmlmZml0aCAvIGh0dHA6Ly9icmFkbGV5LmNvbXB1dGVyCi8vCi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkKLy8gb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgIlNvZnR3YXJlIiksIHRvIGRlYWwKLy8gaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cwovLyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsCi8vIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcwovLyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOgovLwovLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbgovLyBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KLy8KLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1IKLy8gSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksCi8vIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRQovLyBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSCi8vIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sCi8vIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4KLy8gVEhFIFNPRlRXQVJFLgoqLyAvLyAgICAgVW5kZXJzY29yZS5qcyAxLjguMwovLyAgICAgaHR0cDovL3VuZGVyc2NvcmVqcy5vcmcKLy8gICAgIChjKSAyMDA5LTIwMTYgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnMKLy8gICAgIFVuZGVyc2NvcmUgbWF5IGJlIGZyZWVseSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuCihmdW5jdGlvbigpey8vIEJhc2VsaW5lIHNldHVwCi8vIC0tLS0tLS0tLS0tLS0tCi8vIEVzdGFibGlzaCB0aGUgcm9vdCBvYmplY3QsIGB3aW5kb3dgIChgc2VsZmApIGluIHRoZSBicm93c2VyLCBgZ2xvYmFsYAovLyBvbiB0aGUgc2VydmVyLCBvciBgdGhpc2AgaW4gc29tZSB2aXJ0dWFsIG1hY2hpbmVzLiBXZSB1c2UgYHNlbGZgCi8vIGluc3RlYWQgb2YgYHdpbmRvd2AgZm9yIGBXZWJXb3JrZXJgIHN1cHBvcnQuCnZhciByb290PSh0eXBlb2Ygc2VsZj09PSJ1bmRlZmluZWQiPyJ1bmRlZmluZWQiOl90eXBlb2Yoc2VsZikpPT0nb2JqZWN0JyYmc2VsZi5zZWxmPT09c2VsZiYmc2VsZnx8KHR5cGVvZiBnbG9iYWw9PT0idW5kZWZpbmVkIj8idW5kZWZpbmVkIjpfdHlwZW9mKGdsb2JhbCkpPT0nb2JqZWN0JyYmZ2xvYmFsLmdsb2JhbD09PWdsb2JhbCYmZ2xvYmFsfHx0aGlzOy8vIFNhdmUgdGhlIHByZXZpb3VzIHZhbHVlIG9mIHRoZSBgX2AgdmFyaWFibGUuCnZhciBwcmV2aW91c1VuZGVyc2NvcmU9cm9vdC5fOy8vIFNhdmUgYnl0ZXMgaW4gdGhlIG1pbmlmaWVkIChidXQgbm90IGd6aXBwZWQpIHZlcnNpb246CnZhciBBcnJheVByb3RvPUFycmF5LnByb3RvdHlwZSxPYmpQcm90bz1PYmplY3QucHJvdG90eXBlO3ZhciBTeW1ib2xQcm90bz10eXBlb2YgU3ltYm9sIT09J3VuZGVmaW5lZCc/U3ltYm9sLnByb3RvdHlwZTpudWxsOy8vIENyZWF0ZSBxdWljayByZWZlcmVuY2UgdmFyaWFibGVzIGZvciBzcGVlZCBhY2Nlc3MgdG8gY29yZSBwcm90b3R5cGVzLgp2YXIgcHVzaD1BcnJheVByb3RvLnB1c2gsc2xpY2U9QXJyYXlQcm90by5zbGljZSx0b1N0cmluZz1PYmpQcm90by50b1N0cmluZyxoYXNPd25Qcm9wZXJ0eT1PYmpQcm90by5oYXNPd25Qcm9wZXJ0eTsvLyBBbGwgKipFQ01BU2NyaXB0IDUqKiBuYXRpdmUgZnVuY3Rpb24gaW1wbGVtZW50YXRpb25zIHRoYXQgd2UgaG9wZSB0byB1c2UKLy8gYXJlIGRlY2xhcmVkIGhlcmUuCnZhciBuYXRpdmVJc0FycmF5PUFycmF5LmlzQXJyYXksbmF0aXZlS2V5cz1PYmplY3Qua2V5cyxuYXRpdmVDcmVhdGU9T2JqZWN0LmNyZWF0ZTsvLyBOYWtlZCBmdW5jdGlvbiByZWZlcmVuY2UgZm9yIHN1cnJvZ2F0ZS1wcm90b3R5cGUtc3dhcHBpbmcuCnZhciBDdG9yPWZ1bmN0aW9uIEN0b3IoKXt9Oy8vIENyZWF0ZSBhIHNhZmUgcmVmZXJlbmNlIHRvIHRoZSBVbmRlcnNjb3JlIG9iamVjdCBmb3IgdXNlIGJlbG93Lgp2YXIgXz1mdW5jdGlvbiBfKG9iail7aWYob2JqIGluc3RhbmNlb2YgXylyZXR1cm4gb2JqO2lmKCEodGhpcyBpbnN0YW5jZW9mIF8pKXJldHVybiBuZXcgXyhvYmopO3RoaXMuX3dyYXBwZWQ9b2JqO307Ly8gRXhwb3J0IHRoZSBVbmRlcnNjb3JlIG9iamVjdCBmb3IgKipOb2RlLmpzKiosIHdpdGgKLy8gYmFja3dhcmRzLWNvbXBhdGliaWxpdHkgZm9yIHRoZWlyIG9sZCBtb2R1bGUgQVBJLiBJZiB3ZSdyZSBpbgovLyB0aGUgYnJvd3NlciwgYWRkIGBfYCBhcyBhIGdsb2JhbCBvYmplY3QuCi8vIChgbm9kZVR5cGVgIGlzIGNoZWNrZWQgdG8gZW5zdXJlIHRoYXQgYG1vZHVsZWAKLy8gYW5kIGBleHBvcnRzYCBhcmUgbm90IEhUTUwgZWxlbWVudHMuKQppZih0eXBlb2YgZXhwb3J0cyE9J3VuZGVmaW5lZCcmJiFleHBvcnRzLm5vZGVUeXBlKXtpZih0eXBlb2YgbW9kdWxlIT0ndW5kZWZpbmVkJyYmIW1vZHVsZS5ub2RlVHlwZSYmbW9kdWxlLmV4cG9ydHMpe2V4cG9ydHM9bW9kdWxlLmV4cG9ydHM9Xzt9ZXhwb3J0cy5fPV87fWVsc2V7cm9vdC5fPV87fS8vIEN1cnJlbnQgdmVyc2lvbi4KXy5WRVJTSU9OPScxLjguMyc7Ly8gSW50ZXJuYWwgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGFuIGVmZmljaWVudCAoZm9yIGN1cnJlbnQgZW5naW5lcykgdmVyc2lvbgovLyBvZiB0aGUgcGFzc2VkLWluIGNhbGxiYWNrLCB0byBiZSByZXBlYXRlZGx5IGFwcGxpZWQgaW4gb3RoZXIgVW5kZXJzY29yZQovLyBmdW5jdGlvbnMuCnZhciBvcHRpbWl6ZUNiPWZ1bmN0aW9uIG9wdGltaXplQ2IoZnVuYyxjb250ZXh0LGFyZ0NvdW50KXtpZihjb250ZXh0PT09dm9pZCAwKXJldHVybiBmdW5jO3N3aXRjaChhcmdDb3VudD09bnVsbD8zOmFyZ0NvdW50KXtjYXNlIDE6cmV0dXJuIGZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gZnVuYy5jYWxsKGNvbnRleHQsdmFsdWUpO307Ly8gVGhlIDItcGFyYW1ldGVyIGNhc2UgaGFzIGJlZW4gb21pdHRlZCBvbmx5IGJlY2F1c2Ugbm8gY3VycmVudCBjb25zdW1lcnMKLy8gbWFkZSB1c2Ugb2YgaXQuCmNhc2UgMzpyZXR1cm4gZnVuY3Rpb24odmFsdWUsaW5kZXgsY29sbGVjdGlvbil7cmV0dXJuIGZ1bmMuY2FsbChjb250ZXh0LHZhbHVlLGluZGV4LGNvbGxlY3Rpb24pO307Y2FzZSA0OnJldHVybiBmdW5jdGlvbihhY2N1bXVsYXRvcix2YWx1ZSxpbmRleCxjb2xsZWN0aW9uKXtyZXR1cm4gZnVuYy5jYWxsKGNvbnRleHQsYWNjdW11bGF0b3IsdmFsdWUsaW5kZXgsY29sbGVjdGlvbik7fTt9cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmMuYXBwbHkoY29udGV4dCxhcmd1bWVudHMpO307fTt2YXIgYnVpbHRpbkl0ZXJhdGVlOy8vIEFuIGludGVybmFsIGZ1bmN0aW9uIHRvIGdlbmVyYXRlIGNhbGxiYWNrcyB0aGF0IGNhbiBiZSBhcHBsaWVkIHRvIGVhY2gKLy8gZWxlbWVudCBpbiBhIGNvbGxlY3Rpb24sIHJldHVybmluZyB0aGUgZGVzaXJlZCByZXN1bHQg4oCUIGVpdGhlciBgaWRlbnRpdHlgLAovLyBhbiBhcmJpdHJhcnkgY2FsbGJhY2ssIGEgcHJvcGVydHkgbWF0Y2hlciwgb3IgYSBwcm9wZXJ0eSBhY2Nlc3Nvci4KdmFyIGNiPWZ1bmN0aW9uIGNiKHZhbHVlLGNvbnRleHQsYXJnQ291bnQpe2lmKF8uaXRlcmF0ZWUhPT1idWlsdGluSXRlcmF0ZWUpcmV0dXJuIF8uaXRlcmF0ZWUodmFsdWUsY29udGV4dCk7aWYodmFsdWU9PW51bGwpcmV0dXJuIF8uaWRlbnRpdHk7aWYoXy5pc0Z1bmN0aW9uKHZhbHVlKSlyZXR1cm4gb3B0aW1pemVDYih2YWx1ZSxjb250ZXh0LGFyZ0NvdW50KTtpZihfLmlzT2JqZWN0KHZhbHVlKSlyZXR1cm4gXy5tYXRjaGVyKHZhbHVlKTtyZXR1cm4gXy5wcm9wZXJ0eSh2YWx1ZSk7fTsvLyBFeHRlcm5hbCB3cmFwcGVyIGZvciBvdXIgY2FsbGJhY2sgZ2VuZXJhdG9yLiBVc2VycyBtYXkgY3VzdG9taXplCi8vIGBfLml0ZXJhdGVlYCBpZiB0aGV5IHdhbnQgYWRkaXRpb25hbCBwcmVkaWNhdGUvaXRlcmF0ZWUgc2hvcnRoYW5kIHN0eWxlcy4KLy8gVGhpcyBhYnN0cmFjdGlvbiBoaWRlcyB0aGUgaW50ZXJuYWwtb25seSBhcmdDb3VudCBhcmd1bWVudC4KXy5pdGVyYXRlZT1idWlsdGluSXRlcmF0ZWU9ZnVuY3Rpb24gYnVpbHRpbkl0ZXJhdGVlKHZhbHVlLGNvbnRleHQpe3JldHVybiBjYih2YWx1ZSxjb250ZXh0LEluZmluaXR5KTt9Oy8vIFNpbWlsYXIgdG8gRVM2J3MgcmVzdCBwYXJhbSAoaHR0cDovL2FyaXlhLm9maWxhYnMuY29tLzIwMTMvMDMvZXM2LWFuZC1yZXN0LXBhcmFtZXRlci5odG1sKQovLyBUaGlzIGFjY3VtdWxhdGVzIHRoZSBhcmd1bWVudHMgcGFzc2VkIGludG8gYW4gYXJyYXksIGFmdGVyIGEgZ2l2ZW4gaW5kZXguCnZhciByZXN0QXJncz1mdW5jdGlvbiByZXN0QXJncyhmdW5jLHN0YXJ0SW5kZXgpe3N0YXJ0SW5kZXg9c3RhcnRJbmRleD09bnVsbD9mdW5jLmxlbmd0aC0xOitzdGFydEluZGV4O3JldHVybiBmdW5jdGlvbigpe3ZhciBsZW5ndGg9TWF0aC5tYXgoYXJndW1lbnRzLmxlbmd0aC1zdGFydEluZGV4LDApO3ZhciByZXN0PUFycmF5KGxlbmd0aCk7Zm9yKHZhciBpbmRleD0wO2luZGV4PGxlbmd0aDtpbmRleCsrKXtyZXN0W2luZGV4XT1hcmd1bWVudHNbaW5kZXgrc3RhcnRJbmRleF07fXN3aXRjaChzdGFydEluZGV4KXtjYXNlIDA6cmV0dXJuIGZ1bmMuY2FsbCh0aGlzLHJlc3QpO2Nhc2UgMTpyZXR1cm4gZnVuYy5jYWxsKHRoaXMsYXJndW1lbnRzWzBdLHJlc3QpO2Nhc2UgMjpyZXR1cm4gZnVuYy5jYWxsKHRoaXMsYXJndW1lbnRzWzBdLGFyZ3VtZW50c1sxXSxyZXN0KTt9dmFyIGFyZ3M9QXJyYXkoc3RhcnRJbmRleCsxKTtmb3IoaW5kZXg9MDtpbmRleDxzdGFydEluZGV4O2luZGV4Kyspe2FyZ3NbaW5kZXhdPWFyZ3VtZW50c1tpbmRleF07fWFyZ3Nbc3RhcnRJbmRleF09cmVzdDtyZXR1cm4gZnVuYy5hcHBseSh0aGlzLGFyZ3MpO307fTsvLyBBbiBpbnRlcm5hbCBmdW5jdGlvbiBmb3IgY3JlYXRpbmcgYSBuZXcgb2JqZWN0IHRoYXQgaW5oZXJpdHMgZnJvbSBhbm90aGVyLgp2YXIgYmFzZUNyZWF0ZT1mdW5jdGlvbiBiYXNlQ3JlYXRlKHByb3RvdHlwZSl7aWYoIV8uaXNPYmplY3QocHJvdG90eXBlKSlyZXR1cm57fTtpZihuYXRpdmVDcmVhdGUpcmV0dXJuIG5hdGl2ZUNyZWF0ZShwcm90b3R5cGUpO0N0b3IucHJvdG90eXBlPXByb3RvdHlwZTt2YXIgcmVzdWx0PW5ldyBDdG9yKCk7Q3Rvci5wcm90b3R5cGU9bnVsbDtyZXR1cm4gcmVzdWx0O307dmFyIHByb3BlcnR5PWZ1bmN0aW9uIHByb3BlcnR5KGtleSl7cmV0dXJuIGZ1bmN0aW9uKG9iail7cmV0dXJuIG9iaj09bnVsbD92b2lkIDA6b2JqW2tleV07fTt9Oy8vIEhlbHBlciBmb3IgY29sbGVjdGlvbiBtZXRob2RzIHRvIGRldGVybWluZSB3aGV0aGVyIGEgY29sbGVjdGlvbgovLyBzaG91bGQgYmUgaXRlcmF0ZWQgYXMgYW4gYXJyYXkgb3IgYXMgYW4gb2JqZWN0LgovLyBSZWxhdGVkOiBodHRwOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy10b2xlbmd0aAovLyBBdm9pZHMgYSB2ZXJ5IG5hc3R5IGlPUyA4IEpJVCBidWcgb24gQVJNLTY0LiAjMjA5NAp2YXIgTUFYX0FSUkFZX0lOREVYPU1hdGgucG93KDIsNTMpLTE7dmFyIGdldExlbmd0aD1wcm9wZXJ0eSgnbGVuZ3RoJyk7dmFyIGlzQXJyYXlMaWtlPWZ1bmN0aW9uIGlzQXJyYXlMaWtlKGNvbGxlY3Rpb24pe3ZhciBsZW5ndGg9Z2V0TGVuZ3RoKGNvbGxlY3Rpb24pO3JldHVybiB0eXBlb2YgbGVuZ3RoPT0nbnVtYmVyJyYmbGVuZ3RoPj0wJiZsZW5ndGg8PU1BWF9BUlJBWV9JTkRFWDt9Oy8vIENvbGxlY3Rpb24gRnVuY3Rpb25zCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vIFRoZSBjb3JuZXJzdG9uZSwgYW4gYGVhY2hgIGltcGxlbWVudGF0aW9uLCBha2EgYGZvckVhY2hgLgovLyBIYW5kbGVzIHJhdyBvYmplY3RzIGluIGFkZGl0aW9uIHRvIGFycmF5LWxpa2VzLiBUcmVhdHMgYWxsCi8vIHNwYXJzZSBhcnJheS1saWtlcyBhcyBpZiB0aGV5IHdlcmUgZGVuc2UuCl8uZWFjaD1fLmZvckVhY2g9ZnVuY3Rpb24ob2JqLGl0ZXJhdGVlLGNvbnRleHQpe2l0ZXJhdGVlPW9wdGltaXplQ2IoaXRlcmF0ZWUsY29udGV4dCk7dmFyIGksbGVuZ3RoO2lmKGlzQXJyYXlMaWtlKG9iaikpe2ZvcihpPTAsbGVuZ3RoPW9iai5sZW5ndGg7aTxsZW5ndGg7aSsrKXtpdGVyYXRlZShvYmpbaV0saSxvYmopO319ZWxzZXt2YXIga2V5cz1fLmtleXMob2JqKTtmb3IoaT0wLGxlbmd0aD1rZXlzLmxlbmd0aDtpPGxlbmd0aDtpKyspe2l0ZXJhdGVlKG9ialtrZXlzW2ldXSxrZXlzW2ldLG9iaik7fX1yZXR1cm4gb2JqO307Ly8gUmV0dXJuIHRoZSByZXN1bHRzIG9mIGFwcGx5aW5nIHRoZSBpdGVyYXRlZSB0byBlYWNoIGVsZW1lbnQuCl8ubWFwPV8uY29sbGVjdD1mdW5jdGlvbihvYmosaXRlcmF0ZWUsY29udGV4dCl7aXRlcmF0ZWU9Y2IoaXRlcmF0ZWUsY29udGV4dCk7dmFyIGtleXM9IWlzQXJyYXlMaWtlKG9iaikmJl8ua2V5cyhvYmopLGxlbmd0aD0oa2V5c3x8b2JqKS5sZW5ndGgscmVzdWx0cz1BcnJheShsZW5ndGgpO2Zvcih2YXIgaW5kZXg9MDtpbmRleDxsZW5ndGg7aW5kZXgrKyl7dmFyIGN1cnJlbnRLZXk9a2V5cz9rZXlzW2luZGV4XTppbmRleDtyZXN1bHRzW2luZGV4XT1pdGVyYXRlZShvYmpbY3VycmVudEtleV0sY3VycmVudEtleSxvYmopO31yZXR1cm4gcmVzdWx0czt9Oy8vIENyZWF0ZSBhIHJlZHVjaW5nIGZ1bmN0aW9uIGl0ZXJhdGluZyBsZWZ0IG9yIHJpZ2h0Lgp2YXIgY3JlYXRlUmVkdWNlPWZ1bmN0aW9uIGNyZWF0ZVJlZHVjZShkaXIpey8vIFdyYXAgY29kZSB0aGF0IHJlYXNzaWducyBhcmd1bWVudCB2YXJpYWJsZXMgaW4gYSBzZXBhcmF0ZSBmdW5jdGlvbiB0aGFuCi8vIHRoZSBvbmUgdGhhdCBhY2Nlc3NlcyBgYXJndW1lbnRzLmxlbmd0aGAgdG8gYXZvaWQgYSBwZXJmIGhpdC4gKCMxOTkxKQp2YXIgcmVkdWNlcj1mdW5jdGlvbiByZWR1Y2VyKG9iaixpdGVyYXRlZSxtZW1vLGluaXRpYWwpe3ZhciBrZXlzPSFpc0FycmF5TGlrZShvYmopJiZfLmtleXMob2JqKSxsZW5ndGg9KGtleXN8fG9iaikubGVuZ3RoLGluZGV4PWRpcj4wPzA6bGVuZ3RoLTE7aWYoIWluaXRpYWwpe21lbW89b2JqW2tleXM/a2V5c1tpbmRleF06aW5kZXhdO2luZGV4Kz1kaXI7fWZvcig7aW5kZXg+PTAmJmluZGV4PGxlbmd0aDtpbmRleCs9ZGlyKXt2YXIgY3VycmVudEtleT1rZXlzP2tleXNbaW5kZXhdOmluZGV4O21lbW89aXRlcmF0ZWUobWVtbyxvYmpbY3VycmVudEtleV0sY3VycmVudEtleSxvYmopO31yZXR1cm4gbWVtbzt9O3JldHVybiBmdW5jdGlvbihvYmosaXRlcmF0ZWUsbWVtbyxjb250ZXh0KXt2YXIgaW5pdGlhbD1hcmd1bWVudHMubGVuZ3RoPj0zO3JldHVybiByZWR1Y2VyKG9iaixvcHRpbWl6ZUNiKGl0ZXJhdGVlLGNvbnRleHQsNCksbWVtbyxpbml0aWFsKTt9O307Ly8gKipSZWR1Y2UqKiBidWlsZHMgdXAgYSBzaW5nbGUgcmVzdWx0IGZyb20gYSBsaXN0IG9mIHZhbHVlcywgYWthIGBpbmplY3RgLAovLyBvciBgZm9sZGxgLgpfLnJlZHVjZT1fLmZvbGRsPV8uaW5qZWN0PWNyZWF0ZVJlZHVjZSgxKTsvLyBUaGUgcmlnaHQtYXNzb2NpYXRpdmUgdmVyc2lvbiBvZiByZWR1Y2UsIGFsc28ga25vd24gYXMgYGZvbGRyYC4KXy5yZWR1Y2VSaWdodD1fLmZvbGRyPWNyZWF0ZVJlZHVjZSgtMSk7Ly8gUmV0dXJuIHRoZSBmaXJzdCB2YWx1ZSB3aGljaCBwYXNzZXMgYSB0cnV0aCB0ZXN0LiBBbGlhc2VkIGFzIGBkZXRlY3RgLgpfLmZpbmQ9Xy5kZXRlY3Q9ZnVuY3Rpb24ob2JqLHByZWRpY2F0ZSxjb250ZXh0KXt2YXIga2V5RmluZGVyPWlzQXJyYXlMaWtlKG9iaik/Xy5maW5kSW5kZXg6Xy5maW5kS2V5O3ZhciBrZXk9a2V5RmluZGVyKG9iaixwcmVkaWNhdGUsY29udGV4dCk7aWYoa2V5IT09dm9pZCAwJiZrZXkhPT0tMSlyZXR1cm4gb2JqW2tleV07fTsvLyBSZXR1cm4gYWxsIHRoZSBlbGVtZW50cyB0aGF0IHBhc3MgYSB0cnV0aCB0ZXN0LgovLyBBbGlhc2VkIGFzIGBzZWxlY3RgLgpfLmZpbHRlcj1fLnNlbGVjdD1mdW5jdGlvbihvYmoscHJlZGljYXRlLGNvbnRleHQpe3ZhciByZXN1bHRzPVtdO3ByZWRpY2F0ZT1jYihwcmVkaWNhdGUsY29udGV4dCk7Xy5lYWNoKG9iaixmdW5jdGlvbih2YWx1ZSxpbmRleCxsaXN0KXtpZihwcmVkaWNhdGUodmFsdWUsaW5kZXgsbGlzdCkpcmVzdWx0cy5wdXNoKHZhbHVlKTt9KTtyZXR1cm4gcmVzdWx0czt9Oy8vIFJldHVybiBhbGwgdGhlIGVsZW1lbnRzIGZvciB3aGljaCBhIHRydXRoIHRlc3QgZmFpbHMuCl8ucmVqZWN0PWZ1bmN0aW9uKG9iaixwcmVkaWNhdGUsY29udGV4dCl7cmV0dXJuIF8uZmlsdGVyKG9iaixfLm5lZ2F0ZShjYihwcmVkaWNhdGUpKSxjb250ZXh0KTt9Oy8vIERldGVybWluZSB3aGV0aGVyIGFsbCBvZiB0aGUgZWxlbWVudHMgbWF0Y2ggYSB0cnV0aCB0ZXN0LgovLyBBbGlhc2VkIGFzIGBhbGxgLgpfLmV2ZXJ5PV8uYWxsPWZ1bmN0aW9uKG9iaixwcmVkaWNhdGUsY29udGV4dCl7cHJlZGljYXRlPWNiKHByZWRpY2F0ZSxjb250ZXh0KTt2YXIga2V5cz0haXNBcnJheUxpa2Uob2JqKSYmXy5rZXlzKG9iaiksbGVuZ3RoPShrZXlzfHxvYmopLmxlbmd0aDtmb3IodmFyIGluZGV4PTA7aW5kZXg8bGVuZ3RoO2luZGV4Kyspe3ZhciBjdXJyZW50S2V5PWtleXM/a2V5c1tpbmRleF06aW5kZXg7aWYoIXByZWRpY2F0ZShvYmpbY3VycmVudEtleV0sY3VycmVudEtleSxvYmopKXJldHVybiBmYWxzZTt9cmV0dXJuIHRydWU7fTsvLyBEZXRlcm1pbmUgaWYgYXQgbGVhc3Qgb25lIGVsZW1lbnQgaW4gdGhlIG9iamVjdCBtYXRjaGVzIGEgdHJ1dGggdGVzdC4KLy8gQWxpYXNlZCBhcyBgYW55YC4KXy5zb21lPV8uYW55PWZ1bmN0aW9uKG9iaixwcmVkaWNhdGUsY29udGV4dCl7cHJlZGljYXRlPWNiKHByZWRpY2F0ZSxjb250ZXh0KTt2YXIga2V5cz0haXNBcnJheUxpa2Uob2JqKSYmXy5rZXlzKG9iaiksbGVuZ3RoPShrZXlzfHxvYmopLmxlbmd0aDtmb3IodmFyIGluZGV4PTA7aW5kZXg8bGVuZ3RoO2luZGV4Kyspe3ZhciBjdXJyZW50S2V5PWtleXM/a2V5c1tpbmRleF06aW5kZXg7aWYocHJlZGljYXRlKG9ialtjdXJyZW50S2V5XSxjdXJyZW50S2V5LG9iaikpcmV0dXJuIHRydWU7fXJldHVybiBmYWxzZTt9Oy8vIERldGVybWluZSBpZiB0aGUgYXJyYXkgb3Igb2JqZWN0IGNvbnRhaW5zIGEgZ2l2ZW4gaXRlbSAodXNpbmcgYD09PWApLgovLyBBbGlhc2VkIGFzIGBpbmNsdWRlc2AgYW5kIGBpbmNsdWRlYC4KXy5jb250YWlucz1fLmluY2x1ZGVzPV8uaW5jbHVkZT1mdW5jdGlvbihvYmosaXRlbSxmcm9tSW5kZXgsZ3VhcmQpe2lmKCFpc0FycmF5TGlrZShvYmopKW9iaj1fLnZhbHVlcyhvYmopO2lmKHR5cGVvZiBmcm9tSW5kZXghPSdudW1iZXInfHxndWFyZClmcm9tSW5kZXg9MDtyZXR1cm4gXy5pbmRleE9mKG9iaixpdGVtLGZyb21JbmRleCk+PTA7fTsvLyBJbnZva2UgYSBtZXRob2QgKHdpdGggYXJndW1lbnRzKSBvbiBldmVyeSBpdGVtIGluIGEgY29sbGVjdGlvbi4KXy5pbnZva2U9cmVzdEFyZ3MoZnVuY3Rpb24ob2JqLG1ldGhvZCxhcmdzKXt2YXIgaXNGdW5jPV8uaXNGdW5jdGlvbihtZXRob2QpO3JldHVybiBfLm1hcChvYmosZnVuY3Rpb24odmFsdWUpe3ZhciBmdW5jPWlzRnVuYz9tZXRob2Q6dmFsdWVbbWV0aG9kXTtyZXR1cm4gZnVuYz09bnVsbD9mdW5jOmZ1bmMuYXBwbHkodmFsdWUsYXJncyk7fSk7fSk7Ly8gQ29udmVuaWVuY2UgdmVyc2lvbiBvZiBhIGNvbW1vbiB1c2UgY2FzZSBvZiBgbWFwYDogZmV0Y2hpbmcgYSBwcm9wZXJ0eS4KXy5wbHVjaz1mdW5jdGlvbihvYmosa2V5KXtyZXR1cm4gXy5tYXAob2JqLF8ucHJvcGVydHkoa2V5KSk7fTsvLyBDb252ZW5pZW5jZSB2ZXJzaW9uIG9mIGEgY29tbW9uIHVzZSBjYXNlIG9mIGBmaWx0ZXJgOiBzZWxlY3Rpbmcgb25seSBvYmplY3RzCi8vIGNvbnRhaW5pbmcgc3BlY2lmaWMgYGtleTp2YWx1ZWAgcGFpcnMuCl8ud2hlcmU9ZnVuY3Rpb24ob2JqLGF0dHJzKXtyZXR1cm4gXy5maWx0ZXIob2JqLF8ubWF0Y2hlcihhdHRycykpO307Ly8gQ29udmVuaWVuY2UgdmVyc2lvbiBvZiBhIGNvbW1vbiB1c2UgY2FzZSBvZiBgZmluZGA6IGdldHRpbmcgdGhlIGZpcnN0IG9iamVjdAovLyBjb250YWluaW5nIHNwZWNpZmljIGBrZXk6dmFsdWVgIHBhaXJzLgpfLmZpbmRXaGVyZT1mdW5jdGlvbihvYmosYXR0cnMpe3JldHVybiBfLmZpbmQob2JqLF8ubWF0Y2hlcihhdHRycykpO307Ly8gUmV0dXJuIHRoZSBtYXhpbXVtIGVsZW1lbnQgKG9yIGVsZW1lbnQtYmFzZWQgY29tcHV0YXRpb24pLgpfLm1heD1mdW5jdGlvbihvYmosaXRlcmF0ZWUsY29udGV4dCl7dmFyIHJlc3VsdD0tSW5maW5pdHksbGFzdENvbXB1dGVkPS1JbmZpbml0eSx2YWx1ZSxjb21wdXRlZDtpZihpdGVyYXRlZT09bnVsbHx8dHlwZW9mIGl0ZXJhdGVlPT0nbnVtYmVyJyYmX3R5cGVvZihvYmpbMF0pIT0nb2JqZWN0JyYmb2JqIT1udWxsKXtvYmo9aXNBcnJheUxpa2Uob2JqKT9vYmo6Xy52YWx1ZXMob2JqKTtmb3IodmFyIGk9MCxsZW5ndGg9b2JqLmxlbmd0aDtpPGxlbmd0aDtpKyspe3ZhbHVlPW9ialtpXTtpZih2YWx1ZSE9bnVsbCYmdmFsdWU+cmVzdWx0KXtyZXN1bHQ9dmFsdWU7fX19ZWxzZXtpdGVyYXRlZT1jYihpdGVyYXRlZSxjb250ZXh0KTtfLmVhY2gob2JqLGZ1bmN0aW9uKHYsaW5kZXgsbGlzdCl7Y29tcHV0ZWQ9aXRlcmF0ZWUodixpbmRleCxsaXN0KTtpZihjb21wdXRlZD5sYXN0Q29tcHV0ZWR8fGNvbXB1dGVkPT09LUluZmluaXR5JiZyZXN1bHQ9PT0tSW5maW5pdHkpe3Jlc3VsdD12O2xhc3RDb21wdXRlZD1jb21wdXRlZDt9fSk7fXJldHVybiByZXN1bHQ7fTsvLyBSZXR1cm4gdGhlIG1pbmltdW0gZWxlbWVudCAob3IgZWxlbWVudC1iYXNlZCBjb21wdXRhdGlvbikuCl8ubWluPWZ1bmN0aW9uKG9iaixpdGVyYXRlZSxjb250ZXh0KXt2YXIgcmVzdWx0PUluZmluaXR5LGxhc3RDb21wdXRlZD1JbmZpbml0eSx2YWx1ZSxjb21wdXRlZDtpZihpdGVyYXRlZT09bnVsbHx8dHlwZW9mIGl0ZXJhdGVlPT0nbnVtYmVyJyYmX3R5cGVvZihvYmpbMF0pIT0nb2JqZWN0JyYmb2JqIT1udWxsKXtvYmo9aXNBcnJheUxpa2Uob2JqKT9vYmo6Xy52YWx1ZXMob2JqKTtmb3IodmFyIGk9MCxsZW5ndGg9b2JqLmxlbmd0aDtpPGxlbmd0aDtpKyspe3ZhbHVlPW9ialtpXTtpZih2YWx1ZSE9bnVsbCYmdmFsdWU8cmVzdWx0KXtyZXN1bHQ9dmFsdWU7fX19ZWxzZXtpdGVyYXRlZT1jYihpdGVyYXRlZSxjb250ZXh0KTtfLmVhY2gob2JqLGZ1bmN0aW9uKHYsaW5kZXgsbGlzdCl7Y29tcHV0ZWQ9aXRlcmF0ZWUodixpbmRleCxsaXN0KTtpZihjb21wdXRlZDxsYXN0Q29tcHV0ZWR8fGNvbXB1dGVkPT09SW5maW5pdHkmJnJlc3VsdD09PUluZmluaXR5KXtyZXN1bHQ9djtsYXN0Q29tcHV0ZWQ9Y29tcHV0ZWQ7fX0pO31yZXR1cm4gcmVzdWx0O307Ly8gU2h1ZmZsZSBhIGNvbGxlY3Rpb24uCl8uc2h1ZmZsZT1mdW5jdGlvbihvYmope3JldHVybiBfLnNhbXBsZShvYmosSW5maW5pdHkpO307Ly8gU2FtcGxlICoqbioqIHJhbmRvbSB2YWx1ZXMgZnJvbSBhIGNvbGxlY3Rpb24gdXNpbmcgdGhlIG1vZGVybiB2ZXJzaW9uIG9mIHRoZQovLyBbRmlzaGVyLVlhdGVzIHNodWZmbGVdKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRmlzaGVy4oCTWWF0ZXNfc2h1ZmZsZSkuCi8vIElmICoqbioqIGlzIG5vdCBzcGVjaWZpZWQsIHJldHVybnMgYSBzaW5nbGUgcmFuZG9tIGVsZW1lbnQuCi8vIFRoZSBpbnRlcm5hbCBgZ3VhcmRgIGFyZ3VtZW50IGFsbG93cyBpdCB0byB3b3JrIHdpdGggYG1hcGAuCl8uc2FtcGxlPWZ1bmN0aW9uKG9iaixuLGd1YXJkKXtpZihuPT1udWxsfHxndWFyZCl7aWYoIWlzQXJyYXlMaWtlKG9iaikpb2JqPV8udmFsdWVzKG9iaik7cmV0dXJuIG9ialtfLnJhbmRvbShvYmoubGVuZ3RoLTEpXTt9dmFyIHNhbXBsZT1pc0FycmF5TGlrZShvYmopP18uY2xvbmUob2JqKTpfLnZhbHVlcyhvYmopO3ZhciBsZW5ndGg9Z2V0TGVuZ3RoKHNhbXBsZSk7bj1NYXRoLm1heChNYXRoLm1pbihuLGxlbmd0aCksMCk7dmFyIGxhc3Q9bGVuZ3RoLTE7Zm9yKHZhciBpbmRleD0wO2luZGV4PG47aW5kZXgrKyl7dmFyIHJhbmQ9Xy5yYW5kb20oaW5kZXgsbGFzdCk7dmFyIHRlbXA9c2FtcGxlW2luZGV4XTtzYW1wbGVbaW5kZXhdPXNhbXBsZVtyYW5kXTtzYW1wbGVbcmFuZF09dGVtcDt9cmV0dXJuIHNhbXBsZS5zbGljZSgwLG4pO307Ly8gU29ydCB0aGUgb2JqZWN0J3MgdmFsdWVzIGJ5IGEgY3JpdGVyaW9uIHByb2R1Y2VkIGJ5IGFuIGl0ZXJhdGVlLgpfLnNvcnRCeT1mdW5jdGlvbihvYmosaXRlcmF0ZWUsY29udGV4dCl7dmFyIGluZGV4PTA7aXRlcmF0ZWU9Y2IoaXRlcmF0ZWUsY29udGV4dCk7cmV0dXJuIF8ucGx1Y2soXy5tYXAob2JqLGZ1bmN0aW9uKHZhbHVlLGtleSxsaXN0KXtyZXR1cm57dmFsdWU6dmFsdWUsaW5kZXg6aW5kZXgrKyxjcml0ZXJpYTppdGVyYXRlZSh2YWx1ZSxrZXksbGlzdCl9O30pLnNvcnQoZnVuY3Rpb24obGVmdCxyaWdodCl7dmFyIGE9bGVmdC5jcml0ZXJpYTt2YXIgYj1yaWdodC5jcml0ZXJpYTtpZihhIT09Yil7aWYoYT5ifHxhPT09dm9pZCAwKXJldHVybiAxO2lmKGE8Ynx8Yj09PXZvaWQgMClyZXR1cm4tMTt9cmV0dXJuIGxlZnQuaW5kZXgtcmlnaHQuaW5kZXg7fSksJ3ZhbHVlJyk7fTsvLyBBbiBpbnRlcm5hbCBmdW5jdGlvbiB1c2VkIGZvciBhZ2dyZWdhdGUgImdyb3VwIGJ5IiBvcGVyYXRpb25zLgp2YXIgZ3JvdXA9ZnVuY3Rpb24gZ3JvdXAoYmVoYXZpb3IscGFydGl0aW9uKXtyZXR1cm4gZnVuY3Rpb24ob2JqLGl0ZXJhdGVlLGNvbnRleHQpe3ZhciByZXN1bHQ9cGFydGl0aW9uP1tbXSxbXV06e307aXRlcmF0ZWU9Y2IoaXRlcmF0ZWUsY29udGV4dCk7Xy5lYWNoKG9iaixmdW5jdGlvbih2YWx1ZSxpbmRleCl7dmFyIGtleT1pdGVyYXRlZSh2YWx1ZSxpbmRleCxvYmopO2JlaGF2aW9yKHJlc3VsdCx2YWx1ZSxrZXkpO30pO3JldHVybiByZXN1bHQ7fTt9Oy8vIEdyb3VwcyB0aGUgb2JqZWN0J3MgdmFsdWVzIGJ5IGEgY3JpdGVyaW9uLiBQYXNzIGVpdGhlciBhIHN0cmluZyBhdHRyaWJ1dGUKLy8gdG8gZ3JvdXAgYnksIG9yIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBjcml0ZXJpb24uCl8uZ3JvdXBCeT1ncm91cChmdW5jdGlvbihyZXN1bHQsdmFsdWUsa2V5KXtpZihfLmhhcyhyZXN1bHQsa2V5KSlyZXN1bHRba2V5XS5wdXNoKHZhbHVlKTtlbHNlIHJlc3VsdFtrZXldPVt2YWx1ZV07fSk7Ly8gSW5kZXhlcyB0aGUgb2JqZWN0J3MgdmFsdWVzIGJ5IGEgY3JpdGVyaW9uLCBzaW1pbGFyIHRvIGBncm91cEJ5YCwgYnV0IGZvcgovLyB3aGVuIHlvdSBrbm93IHRoYXQgeW91ciBpbmRleCB2YWx1ZXMgd2lsbCBiZSB1bmlxdWUuCl8uaW5kZXhCeT1ncm91cChmdW5jdGlvbihyZXN1bHQsdmFsdWUsa2V5KXtyZXN1bHRba2V5XT12YWx1ZTt9KTsvLyBDb3VudHMgaW5zdGFuY2VzIG9mIGFuIG9iamVjdCB0aGF0IGdyb3VwIGJ5IGEgY2VydGFpbiBjcml0ZXJpb24uIFBhc3MKLy8gZWl0aGVyIGEgc3RyaW5nIGF0dHJpYnV0ZSB0byBjb3VudCBieSwgb3IgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlCi8vIGNyaXRlcmlvbi4KXy5jb3VudEJ5PWdyb3VwKGZ1bmN0aW9uKHJlc3VsdCx2YWx1ZSxrZXkpe2lmKF8uaGFzKHJlc3VsdCxrZXkpKXJlc3VsdFtrZXldKys7ZWxzZSByZXN1bHRba2V5XT0xO30pO3ZhciByZVN0clN5bWJvbD0vW15cdWQ4MDAtXHVkZmZmXXxbXHVkODAwLVx1ZGJmZl1bXHVkYzAwLVx1ZGZmZl18W1x1ZDgwMC1cdWRmZmZdL2c7Ly8gU2FmZWx5IGNyZWF0ZSBhIHJlYWwsIGxpdmUgYXJyYXkgZnJvbSBhbnl0aGluZyBpdGVyYWJsZS4KXy50b0FycmF5PWZ1bmN0aW9uKG9iail7aWYoIW9iailyZXR1cm5bXTtpZihfLmlzQXJyYXkob2JqKSlyZXR1cm4gc2xpY2UuY2FsbChvYmopO2lmKF8uaXNTdHJpbmcob2JqKSl7Ly8gS2VlcCBzdXJyb2dhdGUgcGFpciBjaGFyYWN0ZXJzIHRvZ2V0aGVyCnJldHVybiBvYmoubWF0Y2gocmVTdHJTeW1ib2wpO31pZihpc0FycmF5TGlrZShvYmopKXJldHVybiBfLm1hcChvYmosXy5pZGVudGl0eSk7cmV0dXJuIF8udmFsdWVzKG9iaik7fTsvLyBSZXR1cm4gdGhlIG51bWJlciBvZiBlbGVtZW50cyBpbiBhbiBvYmplY3QuCl8uc2l6ZT1mdW5jdGlvbihvYmope2lmKG9iaj09bnVsbClyZXR1cm4gMDtyZXR1cm4gaXNBcnJheUxpa2Uob2JqKT9vYmoubGVuZ3RoOl8ua2V5cyhvYmopLmxlbmd0aDt9Oy8vIFNwbGl0IGEgY29sbGVjdGlvbiBpbnRvIHR3byBhcnJheXM6IG9uZSB3aG9zZSBlbGVtZW50cyBhbGwgc2F0aXNmeSB0aGUgZ2l2ZW4KLy8gcHJlZGljYXRlLCBhbmQgb25lIHdob3NlIGVsZW1lbnRzIGFsbCBkbyBub3Qgc2F0aXNmeSB0aGUgcHJlZGljYXRlLgpfLnBhcnRpdGlvbj1ncm91cChmdW5jdGlvbihyZXN1bHQsdmFsdWUscGFzcyl7cmVzdWx0W3Bhc3M/MDoxXS5wdXNoKHZhbHVlKTt9LHRydWUpOy8vIEFycmF5IEZ1bmN0aW9ucwovLyAtLS0tLS0tLS0tLS0tLS0KLy8gR2V0IHRoZSBmaXJzdCBlbGVtZW50IG9mIGFuIGFycmF5LiBQYXNzaW5nICoqbioqIHdpbGwgcmV0dXJuIHRoZSBmaXJzdCBOCi8vIHZhbHVlcyBpbiB0aGUgYXJyYXkuIEFsaWFzZWQgYXMgYGhlYWRgIGFuZCBgdGFrZWAuIFRoZSAqKmd1YXJkKiogY2hlY2sKLy8gYWxsb3dzIGl0IHRvIHdvcmsgd2l0aCBgXy5tYXBgLgpfLmZpcnN0PV8uaGVhZD1fLnRha2U9ZnVuY3Rpb24oYXJyYXksbixndWFyZCl7aWYoYXJyYXk9PW51bGwpcmV0dXJuIHZvaWQgMDtpZihuPT1udWxsfHxndWFyZClyZXR1cm4gYXJyYXlbMF07cmV0dXJuIF8uaW5pdGlhbChhcnJheSxhcnJheS5sZW5ndGgtbik7fTsvLyBSZXR1cm5zIGV2ZXJ5dGhpbmcgYnV0IHRoZSBsYXN0IGVudHJ5IG9mIHRoZSBhcnJheS4gRXNwZWNpYWxseSB1c2VmdWwgb24KLy8gdGhlIGFyZ3VtZW50cyBvYmplY3QuIFBhc3NpbmcgKipuKiogd2lsbCByZXR1cm4gYWxsIHRoZSB2YWx1ZXMgaW4KLy8gdGhlIGFycmF5LCBleGNsdWRpbmcgdGhlIGxhc3QgTi4KXy5pbml0aWFsPWZ1bmN0aW9uKGFycmF5LG4sZ3VhcmQpe3JldHVybiBzbGljZS5jYWxsKGFycmF5LDAsTWF0aC5tYXgoMCxhcnJheS5sZW5ndGgtKG49PW51bGx8fGd1YXJkPzE6bikpKTt9Oy8vIEdldCB0aGUgbGFzdCBlbGVtZW50IG9mIGFuIGFycmF5LiBQYXNzaW5nICoqbioqIHdpbGwgcmV0dXJuIHRoZSBsYXN0IE4KLy8gdmFsdWVzIGluIHRoZSBhcnJheS4KXy5sYXN0PWZ1bmN0aW9uKGFycmF5LG4sZ3VhcmQpe2lmKGFycmF5PT1udWxsKXJldHVybiB2b2lkIDA7aWYobj09bnVsbHx8Z3VhcmQpcmV0dXJuIGFycmF5W2FycmF5Lmxlbmd0aC0xXTtyZXR1cm4gXy5yZXN0KGFycmF5LE1hdGgubWF4KDAsYXJyYXkubGVuZ3RoLW4pKTt9Oy8vIFJldHVybnMgZXZlcnl0aGluZyBidXQgdGhlIGZpcnN0IGVudHJ5IG9mIHRoZSBhcnJheS4gQWxpYXNlZCBhcyBgdGFpbGAgYW5kIGBkcm9wYC4KLy8gRXNwZWNpYWxseSB1c2VmdWwgb24gdGhlIGFyZ3VtZW50cyBvYmplY3QuIFBhc3NpbmcgYW4gKipuKiogd2lsbCByZXR1cm4KLy8gdGhlIHJlc3QgTiB2YWx1ZXMgaW4gdGhlIGFycmF5LgpfLnJlc3Q9Xy50YWlsPV8uZHJvcD1mdW5jdGlvbihhcnJheSxuLGd1YXJkKXtyZXR1cm4gc2xpY2UuY2FsbChhcnJheSxuPT1udWxsfHxndWFyZD8xOm4pO307Ly8gVHJpbSBvdXQgYWxsIGZhbHN5IHZhbHVlcyBmcm9tIGFuIGFycmF5LgpfLmNvbXBhY3Q9ZnVuY3Rpb24oYXJyYXkpe3JldHVybiBfLmZpbHRlcihhcnJheSxCb29sZWFuKTt9Oy8vIEludGVybmFsIGltcGxlbWVudGF0aW9uIG9mIGEgcmVjdXJzaXZlIGBmbGF0dGVuYCBmdW5jdGlvbi4KdmFyIGZsYXR0ZW49ZnVuY3Rpb24gZmxhdHRlbihpbnB1dCxzaGFsbG93LHN0cmljdCxvdXRwdXQpe291dHB1dD1vdXRwdXR8fFtdO3ZhciBpZHg9b3V0cHV0Lmxlbmd0aDtmb3IodmFyIGk9MCxsZW5ndGg9Z2V0TGVuZ3RoKGlucHV0KTtpPGxlbmd0aDtpKyspe3ZhciB2YWx1ZT1pbnB1dFtpXTtpZihpc0FycmF5TGlrZSh2YWx1ZSkmJihfLmlzQXJyYXkodmFsdWUpfHxfLmlzQXJndW1lbnRzKHZhbHVlKSkpey8vIEZsYXR0ZW4gY3VycmVudCBsZXZlbCBvZiBhcnJheSBvciBhcmd1bWVudHMgb2JqZWN0LgppZihzaGFsbG93KXt2YXIgaj0wLGxlbj12YWx1ZS5sZW5ndGg7d2hpbGUoajxsZW4pe291dHB1dFtpZHgrK109dmFsdWVbaisrXTt9fWVsc2V7ZmxhdHRlbih2YWx1ZSxzaGFsbG93LHN0cmljdCxvdXRwdXQpO2lkeD1vdXRwdXQubGVuZ3RoO319ZWxzZSBpZighc3RyaWN0KXtvdXRwdXRbaWR4KytdPXZhbHVlO319cmV0dXJuIG91dHB1dDt9Oy8vIEZsYXR0ZW4gb3V0IGFuIGFycmF5LCBlaXRoZXIgcmVjdXJzaXZlbHkgKGJ5IGRlZmF1bHQpLCBvciBqdXN0IG9uZSBsZXZlbC4KXy5mbGF0dGVuPWZ1bmN0aW9uKGFycmF5LHNoYWxsb3cpe3JldHVybiBmbGF0dGVuKGFycmF5LHNoYWxsb3csZmFsc2UpO307Ly8gUmV0dXJuIGEgdmVyc2lvbiBvZiB0aGUgYXJyYXkgdGhhdCBkb2VzIG5vdCBjb250YWluIHRoZSBzcGVjaWZpZWQgdmFsdWUocykuCl8ud2l0aG91dD1yZXN0QXJncyhmdW5jdGlvbihhcnJheSxvdGhlckFycmF5cyl7cmV0dXJuIF8uZGlmZmVyZW5jZShhcnJheSxvdGhlckFycmF5cyk7fSk7Ly8gUHJvZHVjZSBhIGR1cGxpY2F0ZS1mcmVlIHZlcnNpb24gb2YgdGhlIGFycmF5LiBJZiB0aGUgYXJyYXkgaGFzIGFscmVhZHkKLy8gYmVlbiBzb3J0ZWQsIHlvdSBoYXZlIHRoZSBvcHRpb24gb2YgdXNpbmcgYSBmYXN0ZXIgYWxnb3JpdGhtLgovLyBBbGlhc2VkIGFzIGB1bmlxdWVgLgpfLnVuaXE9Xy51bmlxdWU9ZnVuY3Rpb24oYXJyYXksaXNTb3J0ZWQsaXRlcmF0ZWUsY29udGV4dCl7aWYoIV8uaXNCb29sZWFuKGlzU29ydGVkKSl7Y29udGV4dD1pdGVyYXRlZTtpdGVyYXRlZT1pc1NvcnRlZDtpc1NvcnRlZD1mYWxzZTt9aWYoaXRlcmF0ZWUhPW51bGwpaXRlcmF0ZWU9Y2IoaXRlcmF0ZWUsY29udGV4dCk7dmFyIHJlc3VsdD1bXTt2YXIgc2Vlbj1bXTtmb3IodmFyIGk9MCxsZW5ndGg9Z2V0TGVuZ3RoKGFycmF5KTtpPGxlbmd0aDtpKyspe3ZhciB2YWx1ZT1hcnJheVtpXSxjb21wdXRlZD1pdGVyYXRlZT9pdGVyYXRlZSh2YWx1ZSxpLGFycmF5KTp2YWx1ZTtpZihpc1NvcnRlZCl7aWYoIWl8fHNlZW4hPT1jb21wdXRlZClyZXN1bHQucHVzaCh2YWx1ZSk7c2Vlbj1jb21wdXRlZDt9ZWxzZSBpZihpdGVyYXRlZSl7aWYoIV8uY29udGFpbnMoc2Vlbixjb21wdXRlZCkpe3NlZW4ucHVzaChjb21wdXRlZCk7cmVzdWx0LnB1c2godmFsdWUpO319ZWxzZSBpZighXy5jb250YWlucyhyZXN1bHQsdmFsdWUpKXtyZXN1bHQucHVzaCh2YWx1ZSk7fX1yZXR1cm4gcmVzdWx0O307Ly8gUHJvZHVjZSBhbiBhcnJheSB0aGF0IGNvbnRhaW5zIHRoZSB1bmlvbjogZWFjaCBkaXN0aW5jdCBlbGVtZW50IGZyb20gYWxsIG9mCi8vIHRoZSBwYXNzZWQtaW4gYXJyYXlzLgpfLnVuaW9uPXJlc3RBcmdzKGZ1bmN0aW9uKGFycmF5cyl7cmV0dXJuIF8udW5pcShmbGF0dGVuKGFycmF5cyx0cnVlLHRydWUpKTt9KTsvLyBQcm9kdWNlIGFuIGFycmF5IHRoYXQgY29udGFpbnMgZXZlcnkgaXRlbSBzaGFyZWQgYmV0d2VlbiBhbGwgdGhlCi8vIHBhc3NlZC1pbiBhcnJheXMuCl8uaW50ZXJzZWN0aW9uPWZ1bmN0aW9uKGFycmF5KXt2YXIgcmVzdWx0PVtdO3ZhciBhcmdzTGVuZ3RoPWFyZ3VtZW50cy5sZW5ndGg7Zm9yKHZhciBpPTAsbGVuZ3RoPWdldExlbmd0aChhcnJheSk7aTxsZW5ndGg7aSsrKXt2YXIgaXRlbT1hcnJheVtpXTtpZihfLmNvbnRhaW5zKHJlc3VsdCxpdGVtKSljb250aW51ZTt2YXIgajtmb3Ioaj0xO2o8YXJnc0xlbmd0aDtqKyspe2lmKCFfLmNvbnRhaW5zKGFyZ3VtZW50c1tqXSxpdGVtKSlicmVhazt9aWYoaj09PWFyZ3NMZW5ndGgpcmVzdWx0LnB1c2goaXRlbSk7fXJldHVybiByZXN1bHQ7fTsvLyBUYWtlIHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gb25lIGFycmF5IGFuZCBhIG51bWJlciBvZiBvdGhlciBhcnJheXMuCi8vIE9ubHkgdGhlIGVsZW1lbnRzIHByZXNlbnQgaW4ganVzdCB0aGUgZmlyc3QgYXJyYXkgd2lsbCByZW1haW4uCl8uZGlmZmVyZW5jZT1yZXN0QXJncyhmdW5jdGlvbihhcnJheSxyZXN0KXtyZXN0PWZsYXR0ZW4ocmVzdCx0cnVlLHRydWUpO3JldHVybiBfLmZpbHRlcihhcnJheSxmdW5jdGlvbih2YWx1ZSl7cmV0dXJuIV8uY29udGFpbnMocmVzdCx2YWx1ZSk7fSk7fSk7Ly8gQ29tcGxlbWVudCBvZiBfLnppcC4gVW56aXAgYWNjZXB0cyBhbiBhcnJheSBvZiBhcnJheXMgYW5kIGdyb3VwcwovLyBlYWNoIGFycmF5J3MgZWxlbWVudHMgb24gc2hhcmVkIGluZGljZXMuCl8udW56aXA9ZnVuY3Rpb24oYXJyYXkpe3ZhciBsZW5ndGg9YXJyYXkmJl8ubWF4KGFycmF5LGdldExlbmd0aCkubGVuZ3RofHwwO3ZhciByZXN1bHQ9QXJyYXkobGVuZ3RoKTtmb3IodmFyIGluZGV4PTA7aW5kZXg8bGVuZ3RoO2luZGV4Kyspe3Jlc3VsdFtpbmRleF09Xy5wbHVjayhhcnJheSxpbmRleCk7fXJldHVybiByZXN1bHQ7fTsvLyBaaXAgdG9nZXRoZXIgbXVsdGlwbGUgbGlzdHMgaW50byBhIHNpbmdsZSBhcnJheSAtLSBlbGVtZW50cyB0aGF0IHNoYXJlCi8vIGFuIGluZGV4IGdvIHRvZ2V0aGVyLgpfLnppcD1yZXN0QXJncyhfLnVuemlwKTsvLyBDb252ZXJ0cyBsaXN0cyBpbnRvIG9iamVjdHMuIFBhc3MgZWl0aGVyIGEgc2luZ2xlIGFycmF5IG9mIGBba2V5LCB2YWx1ZV1gCi8vIHBhaXJzLCBvciB0d28gcGFyYWxsZWwgYXJyYXlzIG9mIHRoZSBzYW1lIGxlbmd0aCAtLSBvbmUgb2Yga2V5cywgYW5kIG9uZSBvZgovLyB0aGUgY29ycmVzcG9uZGluZyB2YWx1ZXMuCl8ub2JqZWN0PWZ1bmN0aW9uKGxpc3QsdmFsdWVzKXt2YXIgcmVzdWx0PXt9O2Zvcih2YXIgaT0wLGxlbmd0aD1nZXRMZW5ndGgobGlzdCk7aTxsZW5ndGg7aSsrKXtpZih2YWx1ZXMpe3Jlc3VsdFtsaXN0W2ldXT12YWx1ZXNbaV07fWVsc2V7cmVzdWx0W2xpc3RbaV1bMF1dPWxpc3RbaV1bMV07fX1yZXR1cm4gcmVzdWx0O307Ly8gR2VuZXJhdG9yIGZ1bmN0aW9uIHRvIGNyZWF0ZSB0aGUgZmluZEluZGV4IGFuZCBmaW5kTGFzdEluZGV4IGZ1bmN0aW9ucy4KdmFyIGNyZWF0ZVByZWRpY2F0ZUluZGV4RmluZGVyPWZ1bmN0aW9uIGNyZWF0ZVByZWRpY2F0ZUluZGV4RmluZGVyKGRpcil7cmV0dXJuIGZ1bmN0aW9uKGFycmF5LHByZWRpY2F0ZSxjb250ZXh0KXtwcmVkaWNhdGU9Y2IocHJlZGljYXRlLGNvbnRleHQpO3ZhciBsZW5ndGg9Z2V0TGVuZ3RoKGFycmF5KTt2YXIgaW5kZXg9ZGlyPjA/MDpsZW5ndGgtMTtmb3IoO2luZGV4Pj0wJiZpbmRleDxsZW5ndGg7aW5kZXgrPWRpcil7aWYocHJlZGljYXRlKGFycmF5W2luZGV4XSxpbmRleCxhcnJheSkpcmV0dXJuIGluZGV4O31yZXR1cm4tMTt9O307Ly8gUmV0dXJucyB0aGUgZmlyc3QgaW5kZXggb24gYW4gYXJyYXktbGlrZSB0aGF0IHBhc3NlcyBhIHByZWRpY2F0ZSB0ZXN0LgpfLmZpbmRJbmRleD1jcmVhdGVQcmVkaWNhdGVJbmRleEZpbmRlcigxKTtfLmZpbmRMYXN0SW5kZXg9Y3JlYXRlUHJlZGljYXRlSW5kZXhGaW5kZXIoLTEpOy8vIFVzZSBhIGNvbXBhcmF0b3IgZnVuY3Rpb24gdG8gZmlndXJlIG91dCB0aGUgc21hbGxlc3QgaW5kZXggYXQgd2hpY2gKLy8gYW4gb2JqZWN0IHNob3VsZCBiZSBpbnNlcnRlZCBzbyBhcyB0byBtYWludGFpbiBvcmRlci4gVXNlcyBiaW5hcnkgc2VhcmNoLgpfLnNvcnRlZEluZGV4PWZ1bmN0aW9uKGFycmF5LG9iaixpdGVyYXRlZSxjb250ZXh0KXtpdGVyYXRlZT1jYihpdGVyYXRlZSxjb250ZXh0LDEpO3ZhciB2YWx1ZT1pdGVyYXRlZShvYmopO3ZhciBsb3c9MCxoaWdoPWdldExlbmd0aChhcnJheSk7d2hpbGUobG93PGhpZ2gpe3ZhciBtaWQ9TWF0aC5mbG9vcigobG93K2hpZ2gpLzIpO2lmKGl0ZXJhdGVlKGFycmF5W21pZF0pPHZhbHVlKWxvdz1taWQrMTtlbHNlIGhpZ2g9bWlkO31yZXR1cm4gbG93O307Ly8gR2VuZXJhdG9yIGZ1bmN0aW9uIHRvIGNyZWF0ZSB0aGUgaW5kZXhPZiBhbmQgbGFzdEluZGV4T2YgZnVuY3Rpb25zLgp2YXIgY3JlYXRlSW5kZXhGaW5kZXI9ZnVuY3Rpb24gY3JlYXRlSW5kZXhGaW5kZXIoZGlyLHByZWRpY2F0ZUZpbmQsc29ydGVkSW5kZXgpe3JldHVybiBmdW5jdGlvbihhcnJheSxpdGVtLGlkeCl7dmFyIGk9MCxsZW5ndGg9Z2V0TGVuZ3RoKGFycmF5KTtpZih0eXBlb2YgaWR4PT0nbnVtYmVyJyl7aWYoZGlyPjApe2k9aWR4Pj0wP2lkeDpNYXRoLm1heChpZHgrbGVuZ3RoLGkpO31lbHNle2xlbmd0aD1pZHg+PTA/TWF0aC5taW4oaWR4KzEsbGVuZ3RoKTppZHgrbGVuZ3RoKzE7fX1lbHNlIGlmKHNvcnRlZEluZGV4JiZpZHgmJmxlbmd0aCl7aWR4PXNvcnRlZEluZGV4KGFycmF5LGl0ZW0pO3JldHVybiBhcnJheVtpZHhdPT09aXRlbT9pZHg6LTE7fWlmKGl0ZW0hPT1pdGVtKXtpZHg9cHJlZGljYXRlRmluZChzbGljZS5jYWxsKGFycmF5LGksbGVuZ3RoKSxfLmlzTmFOKTtyZXR1cm4gaWR4Pj0wP2lkeCtpOi0xO31mb3IoaWR4PWRpcj4wP2k6bGVuZ3RoLTE7aWR4Pj0wJiZpZHg8bGVuZ3RoO2lkeCs9ZGlyKXtpZihhcnJheVtpZHhdPT09aXRlbSlyZXR1cm4gaWR4O31yZXR1cm4tMTt9O307Ly8gUmV0dXJuIHRoZSBwb3NpdGlvbiBvZiB0aGUgZmlyc3Qgb2NjdXJyZW5jZSBvZiBhbiBpdGVtIGluIGFuIGFycmF5LAovLyBvciAtMSBpZiB0aGUgaXRlbSBpcyBub3QgaW5jbHVkZWQgaW4gdGhlIGFycmF5LgovLyBJZiB0aGUgYXJyYXkgaXMgbGFyZ2UgYW5kIGFscmVhZHkgaW4gc29ydCBvcmRlciwgcGFzcyBgdHJ1ZWAKLy8gZm9yICoqaXNTb3J0ZWQqKiB0byB1c2UgYmluYXJ5IHNlYXJjaC4KXy5pbmRleE9mPWNyZWF0ZUluZGV4RmluZGVyKDEsXy5maW5kSW5kZXgsXy5zb3J0ZWRJbmRleCk7Xy5sYXN0SW5kZXhPZj1jcmVhdGVJbmRleEZpbmRlcigtMSxfLmZpbmRMYXN0SW5kZXgpOy8vIEdlbmVyYXRlIGFuIGludGVnZXIgQXJyYXkgY29udGFpbmluZyBhbiBhcml0aG1ldGljIHByb2dyZXNzaW9uLiBBIHBvcnQgb2YKLy8gdGhlIG5hdGl2ZSBQeXRob24gYHJhbmdlKClgIGZ1bmN0aW9uLiBTZWUKLy8gW3RoZSBQeXRob24gZG9jdW1lbnRhdGlvbl0oaHR0cDovL2RvY3MucHl0aG9uLm9yZy9saWJyYXJ5L2Z1bmN0aW9ucy5odG1sI3JhbmdlKS4KXy5yYW5nZT1mdW5jdGlvbihzdGFydCxzdG9wLHN0ZXApe2lmKHN0b3A9PW51bGwpe3N0b3A9c3RhcnR8fDA7c3RhcnQ9MDt9aWYoIXN0ZXApe3N0ZXA9c3RvcDxzdGFydD8tMToxO312YXIgbGVuZ3RoPU1hdGgubWF4KE1hdGguY2VpbCgoc3RvcC1zdGFydCkvc3RlcCksMCk7dmFyIHJhbmdlPUFycmF5KGxlbmd0aCk7Zm9yKHZhciBpZHg9MDtpZHg8bGVuZ3RoO2lkeCsrLHN0YXJ0Kz1zdGVwKXtyYW5nZVtpZHhdPXN0YXJ0O31yZXR1cm4gcmFuZ2U7fTsvLyBTcGxpdCBhbiAqKmFycmF5KiogaW50byBzZXZlcmFsIGFycmF5cyBjb250YWluaW5nICoqY291bnQqKiBvciBsZXNzIGVsZW1lbnRzCi8vIG9mIGluaXRpYWwgYXJyYXkuCl8uY2h1bms9ZnVuY3Rpb24oYXJyYXksY291bnQpe2lmKGNvdW50PT1udWxsfHxjb3VudDwxKXJldHVybltdO3ZhciByZXN1bHQ9W107dmFyIGk9MCxsZW5ndGg9YXJyYXkubGVuZ3RoO3doaWxlKGk8bGVuZ3RoKXtyZXN1bHQucHVzaChzbGljZS5jYWxsKGFycmF5LGksaSs9Y291bnQpKTt9cmV0dXJuIHJlc3VsdDt9Oy8vIEZ1bmN0aW9uIChhaGVtKSBGdW5jdGlvbnMKLy8gLS0tLS0tLS0tLS0tLS0tLS0tCi8vIERldGVybWluZXMgd2hldGhlciB0byBleGVjdXRlIGEgZnVuY3Rpb24gYXMgYSBjb25zdHJ1Y3RvcgovLyBvciBhIG5vcm1hbCBmdW5jdGlvbiB3aXRoIHRoZSBwcm92aWRlZCBhcmd1bWVudHMuCnZhciBleGVjdXRlQm91bmQ9ZnVuY3Rpb24gZXhlY3V0ZUJvdW5kKHNvdXJjZUZ1bmMsYm91bmRGdW5jLGNvbnRleHQsY2FsbGluZ0NvbnRleHQsYXJncyl7aWYoIShjYWxsaW5nQ29udGV4dCBpbnN0YW5jZW9mIGJvdW5kRnVuYykpcmV0dXJuIHNvdXJjZUZ1bmMuYXBwbHkoY29udGV4dCxhcmdzKTt2YXIgc2VsZj1iYXNlQ3JlYXRlKHNvdXJjZUZ1bmMucHJvdG90eXBlKTt2YXIgcmVzdWx0PXNvdXJjZUZ1bmMuYXBwbHkoc2VsZixhcmdzKTtpZihfLmlzT2JqZWN0KHJlc3VsdCkpcmV0dXJuIHJlc3VsdDtyZXR1cm4gc2VsZjt9Oy8vIENyZWF0ZSBhIGZ1bmN0aW9uIGJvdW5kIHRvIGEgZ2l2ZW4gb2JqZWN0IChhc3NpZ25pbmcgYHRoaXNgLCBhbmQgYXJndW1lbnRzLAovLyBvcHRpb25hbGx5KS4gRGVsZWdhdGVzIHRvICoqRUNNQVNjcmlwdCA1KioncyBuYXRpdmUgYEZ1bmN0aW9uLmJpbmRgIGlmCi8vIGF2YWlsYWJsZS4KXy5iaW5kPXJlc3RBcmdzKGZ1bmN0aW9uKGZ1bmMsY29udGV4dCxhcmdzKXtpZighXy5pc0Z1bmN0aW9uKGZ1bmMpKXRocm93IG5ldyBUeXBlRXJyb3IoJ0JpbmQgbXVzdCBiZSBjYWxsZWQgb24gYSBmdW5jdGlvbicpO3ZhciBib3VuZD1yZXN0QXJncyhmdW5jdGlvbihjYWxsQXJncyl7cmV0dXJuIGV4ZWN1dGVCb3VuZChmdW5jLGJvdW5kLGNvbnRleHQsdGhpcyxhcmdzLmNvbmNhdChjYWxsQXJncykpO30pO3JldHVybiBib3VuZDt9KTsvLyBQYXJ0aWFsbHkgYXBwbHkgYSBmdW5jdGlvbiBieSBjcmVhdGluZyBhIHZlcnNpb24gdGhhdCBoYXMgaGFkIHNvbWUgb2YgaXRzCi8vIGFyZ3VtZW50cyBwcmUtZmlsbGVkLCB3aXRob3V0IGNoYW5naW5nIGl0cyBkeW5hbWljIGB0aGlzYCBjb250ZXh0LiBfIGFjdHMKLy8gYXMgYSBwbGFjZWhvbGRlciBieSBkZWZhdWx0LCBhbGxvd2luZyBhbnkgY29tYmluYXRpb24gb2YgYXJndW1lbnRzIHRvIGJlCi8vIHByZS1maWxsZWQuIFNldCBgXy5wYXJ0aWFsLnBsYWNlaG9sZGVyYCBmb3IgYSBjdXN0b20gcGxhY2Vob2xkZXIgYXJndW1lbnQuCl8ucGFydGlhbD1yZXN0QXJncyhmdW5jdGlvbihmdW5jLGJvdW5kQXJncyl7dmFyIHBsYWNlaG9sZGVyPV8ucGFydGlhbC5wbGFjZWhvbGRlcjt2YXIgYm91bmQ9ZnVuY3Rpb24gYm91bmQoKXt2YXIgcG9zaXRpb249MCxsZW5ndGg9Ym91bmRBcmdzLmxlbmd0aDt2YXIgYXJncz1BcnJheShsZW5ndGgpO2Zvcih2YXIgaT0wO2k8bGVuZ3RoO2krKyl7YXJnc1tpXT1ib3VuZEFyZ3NbaV09PT1wbGFjZWhvbGRlcj9hcmd1bWVudHNbcG9zaXRpb24rK106Ym91bmRBcmdzW2ldO313aGlsZShwb3NpdGlvbjxhcmd1bWVudHMubGVuZ3RoKXthcmdzLnB1c2goYXJndW1lbnRzW3Bvc2l0aW9uKytdKTt9cmV0dXJuIGV4ZWN1dGVCb3VuZChmdW5jLGJvdW5kLHRoaXMsdGhpcyxhcmdzKTt9O3JldHVybiBib3VuZDt9KTtfLnBhcnRpYWwucGxhY2Vob2xkZXI9XzsvLyBCaW5kIGEgbnVtYmVyIG9mIGFuIG9iamVjdCdzIG1ldGhvZHMgdG8gdGhhdCBvYmplY3QuIFJlbWFpbmluZyBhcmd1bWVudHMKLy8gYXJlIHRoZSBtZXRob2QgbmFtZXMgdG8gYmUgYm91bmQuIFVzZWZ1bCBmb3IgZW5zdXJpbmcgdGhhdCBhbGwgY2FsbGJhY2tzCi8vIGRlZmluZWQgb24gYW4gb2JqZWN0IGJlbG9uZyB0byBpdC4KXy5iaW5kQWxsPXJlc3RBcmdzKGZ1bmN0aW9uKG9iaixrZXlzKXtrZXlzPWZsYXR0ZW4oa2V5cyxmYWxzZSxmYWxzZSk7dmFyIGluZGV4PWtleXMubGVuZ3RoO2lmKGluZGV4PDEpdGhyb3cgbmV3IEVycm9yKCdiaW5kQWxsIG11c3QgYmUgcGFzc2VkIGZ1bmN0aW9uIG5hbWVzJyk7d2hpbGUoaW5kZXgtLSl7dmFyIGtleT1rZXlzW2luZGV4XTtvYmpba2V5XT1fLmJpbmQob2JqW2tleV0sb2JqKTt9fSk7Ly8gTWVtb2l6ZSBhbiBleHBlbnNpdmUgZnVuY3Rpb24gYnkgc3RvcmluZyBpdHMgcmVzdWx0cy4KXy5tZW1vaXplPWZ1bmN0aW9uKGZ1bmMsaGFzaGVyKXt2YXIgbWVtb2l6ZT1mdW5jdGlvbiBtZW1vaXplKGtleSl7dmFyIGNhY2hlPW1lbW9pemUuY2FjaGU7dmFyIGFkZHJlc3M9JycrKGhhc2hlcj9oYXNoZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpOmtleSk7aWYoIV8uaGFzKGNhY2hlLGFkZHJlc3MpKWNhY2hlW2FkZHJlc3NdPWZ1bmMuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBjYWNoZVthZGRyZXNzXTt9O21lbW9pemUuY2FjaGU9e307cmV0dXJuIG1lbW9pemU7fTsvLyBEZWxheXMgYSBmdW5jdGlvbiBmb3IgdGhlIGdpdmVuIG51bWJlciBvZiBtaWxsaXNlY29uZHMsIGFuZCB0aGVuIGNhbGxzCi8vIGl0IHdpdGggdGhlIGFyZ3VtZW50cyBzdXBwbGllZC4KXy5kZWxheT1yZXN0QXJncyhmdW5jdGlvbihmdW5jLHdhaXQsYXJncyl7cmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtyZXR1cm4gZnVuYy5hcHBseShudWxsLGFyZ3MpO30sd2FpdCk7fSk7Ly8gRGVmZXJzIGEgZnVuY3Rpb24sIHNjaGVkdWxpbmcgaXQgdG8gcnVuIGFmdGVyIHRoZSBjdXJyZW50IGNhbGwgc3RhY2sgaGFzCi8vIGNsZWFyZWQuCl8uZGVmZXI9Xy5wYXJ0aWFsKF8uZGVsYXksXywxKTsvLyBSZXR1cm5zIGEgZnVuY3Rpb24sIHRoYXQsIHdoZW4gaW52b2tlZCwgd2lsbCBvbmx5IGJlIHRyaWdnZXJlZCBhdCBtb3N0IG9uY2UKLy8gZHVyaW5nIGEgZ2l2ZW4gd2luZG93IG9mIHRpbWUuIE5vcm1hbGx5LCB0aGUgdGhyb3R0bGVkIGZ1bmN0aW9uIHdpbGwgcnVuCi8vIGFzIG11Y2ggYXMgaXQgY2FuLCB3aXRob3V0IGV2ZXIgZ29pbmcgbW9yZSB0aGFuIG9uY2UgcGVyIGB3YWl0YCBkdXJhdGlvbjsKLy8gYnV0IGlmIHlvdSdkIGxpa2UgdG8gZGlzYWJsZSB0aGUgZXhlY3V0aW9uIG9uIHRoZSBsZWFkaW5nIGVkZ2UsIHBhc3MKLy8gYHtsZWFkaW5nOiBmYWxzZX1gLiBUbyBkaXNhYmxlIGV4ZWN1dGlvbiBvbiB0aGUgdHJhaWxpbmcgZWRnZSwgZGl0dG8uCl8udGhyb3R0bGU9ZnVuY3Rpb24oZnVuYyx3YWl0LG9wdGlvbnMpe3ZhciB0aW1lb3V0LGNvbnRleHQsYXJncyxyZXN1bHQ7dmFyIHByZXZpb3VzPTA7aWYoIW9wdGlvbnMpb3B0aW9ucz17fTt2YXIgbGF0ZXI9ZnVuY3Rpb24gbGF0ZXIoKXtwcmV2aW91cz1vcHRpb25zLmxlYWRpbmc9PT1mYWxzZT8wOl8ubm93KCk7dGltZW91dD1udWxsO3Jlc3VsdD1mdW5jLmFwcGx5KGNvbnRleHQsYXJncyk7aWYoIXRpbWVvdXQpY29udGV4dD1hcmdzPW51bGw7fTt2YXIgdGhyb3R0bGVkPWZ1bmN0aW9uIHRocm90dGxlZCgpe3ZhciBub3c9Xy5ub3coKTtpZighcHJldmlvdXMmJm9wdGlvbnMubGVhZGluZz09PWZhbHNlKXByZXZpb3VzPW5vdzt2YXIgcmVtYWluaW5nPXdhaXQtKG5vdy1wcmV2aW91cyk7Y29udGV4dD10aGlzO2FyZ3M9YXJndW1lbnRzO2lmKHJlbWFpbmluZzw9MHx8cmVtYWluaW5nPndhaXQpe2lmKHRpbWVvdXQpe2NsZWFyVGltZW91dCh0aW1lb3V0KTt0aW1lb3V0PW51bGw7fXByZXZpb3VzPW5vdztyZXN1bHQ9ZnVuYy5hcHBseShjb250ZXh0LGFyZ3MpO2lmKCF0aW1lb3V0KWNvbnRleHQ9YXJncz1udWxsO31lbHNlIGlmKCF0aW1lb3V0JiZvcHRpb25zLnRyYWlsaW5nIT09ZmFsc2Upe3RpbWVvdXQ9c2V0VGltZW91dChsYXRlcixyZW1haW5pbmcpO31yZXR1cm4gcmVzdWx0O307dGhyb3R0bGVkLmNhbmNlbD1mdW5jdGlvbigpe2NsZWFyVGltZW91dCh0aW1lb3V0KTtwcmV2aW91cz0wO3RpbWVvdXQ9Y29udGV4dD1hcmdzPW51bGw7fTtyZXR1cm4gdGhyb3R0bGVkO307Ly8gUmV0dXJucyBhIGZ1bmN0aW9uLCB0aGF0LCBhcyBsb25nIGFzIGl0IGNvbnRpbnVlcyB0byBiZSBpbnZva2VkLCB3aWxsIG5vdAovLyBiZSB0cmlnZ2VyZWQuIFRoZSBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBhZnRlciBpdCBzdG9wcyBiZWluZyBjYWxsZWQgZm9yCi8vIE4gbWlsbGlzZWNvbmRzLiBJZiBgaW1tZWRpYXRlYCBpcyBwYXNzZWQsIHRyaWdnZXIgdGhlIGZ1bmN0aW9uIG9uIHRoZQovLyBsZWFkaW5nIGVkZ2UsIGluc3RlYWQgb2YgdGhlIHRyYWlsaW5nLgpfLmRlYm91bmNlPWZ1bmN0aW9uKGZ1bmMsd2FpdCxpbW1lZGlhdGUpe3ZhciB0aW1lb3V0LHJlc3VsdDt2YXIgbGF0ZXI9ZnVuY3Rpb24gbGF0ZXIoY29udGV4dCxhcmdzKXt0aW1lb3V0PW51bGw7aWYoYXJncylyZXN1bHQ9ZnVuYy5hcHBseShjb250ZXh0LGFyZ3MpO307dmFyIGRlYm91bmNlZD1yZXN0QXJncyhmdW5jdGlvbihhcmdzKXtpZih0aW1lb3V0KWNsZWFyVGltZW91dCh0aW1lb3V0KTtpZihpbW1lZGlhdGUpe3ZhciBjYWxsTm93PSF0aW1lb3V0O3RpbWVvdXQ9c2V0VGltZW91dChsYXRlcix3YWl0KTtpZihjYWxsTm93KXJlc3VsdD1mdW5jLmFwcGx5KHRoaXMsYXJncyk7fWVsc2V7dGltZW91dD1fLmRlbGF5KGxhdGVyLHdhaXQsdGhpcyxhcmdzKTt9cmV0dXJuIHJlc3VsdDt9KTtkZWJvdW5jZWQuY2FuY2VsPWZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHRpbWVvdXQpO3RpbWVvdXQ9bnVsbDt9O3JldHVybiBkZWJvdW5jZWQ7fTsvLyBSZXR1cm5zIHRoZSBmaXJzdCBmdW5jdGlvbiBwYXNzZWQgYXMgYW4gYXJndW1lbnQgdG8gdGhlIHNlY29uZCwKLy8gYWxsb3dpbmcgeW91IHRvIGFkanVzdCBhcmd1bWVudHMsIHJ1biBjb2RlIGJlZm9yZSBhbmQgYWZ0ZXIsIGFuZAovLyBjb25kaXRpb25hbGx5IGV4ZWN1dGUgdGhlIG9yaWdpbmFsIGZ1bmN0aW9uLgpfLndyYXA9ZnVuY3Rpb24oZnVuYyx3cmFwcGVyKXtyZXR1cm4gXy5wYXJ0aWFsKHdyYXBwZXIsZnVuYyk7fTsvLyBSZXR1cm5zIGEgbmVnYXRlZCB2ZXJzaW9uIG9mIHRoZSBwYXNzZWQtaW4gcHJlZGljYXRlLgpfLm5lZ2F0ZT1mdW5jdGlvbihwcmVkaWNhdGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiFwcmVkaWNhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpO307fTsvLyBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCBpcyB0aGUgY29tcG9zaXRpb24gb2YgYSBsaXN0IG9mIGZ1bmN0aW9ucywgZWFjaAovLyBjb25zdW1pbmcgdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgZnVuY3Rpb24gdGhhdCBmb2xsb3dzLgpfLmNvbXBvc2U9ZnVuY3Rpb24oKXt2YXIgYXJncz1hcmd1bWVudHM7dmFyIHN0YXJ0PWFyZ3MubGVuZ3RoLTE7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGk9c3RhcnQ7dmFyIHJlc3VsdD1hcmdzW3N0YXJ0XS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7d2hpbGUoaS0tKXtyZXN1bHQ9YXJnc1tpXS5jYWxsKHRoaXMscmVzdWx0KTt9cmV0dXJuIHJlc3VsdDt9O307Ly8gUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBvbmx5IGJlIGV4ZWN1dGVkIG9uIGFuZCBhZnRlciB0aGUgTnRoIGNhbGwuCl8uYWZ0ZXI9ZnVuY3Rpb24odGltZXMsZnVuYyl7cmV0dXJuIGZ1bmN0aW9uKCl7aWYoLS10aW1lczwxKXtyZXR1cm4gZnVuYy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fX07fTsvLyBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCB3aWxsIG9ubHkgYmUgZXhlY3V0ZWQgdXAgdG8gKGJ1dCBub3QgaW5jbHVkaW5nKSB0aGUgTnRoIGNhbGwuCl8uYmVmb3JlPWZ1bmN0aW9uKHRpbWVzLGZ1bmMpe3ZhciBtZW1vO3JldHVybiBmdW5jdGlvbigpe2lmKC0tdGltZXM+MCl7bWVtbz1mdW5jLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9aWYodGltZXM8PTEpZnVuYz1udWxsO3JldHVybiBtZW1vO307fTsvLyBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGV4ZWN1dGVkIGF0IG1vc3Qgb25lIHRpbWUsIG5vIG1hdHRlciBob3cKLy8gb2Z0ZW4geW91IGNhbGwgaXQuIFVzZWZ1bCBmb3IgbGF6eSBpbml0aWFsaXphdGlvbi4KXy5vbmNlPV8ucGFydGlhbChfLmJlZm9yZSwyKTtfLnJlc3RBcmdzPXJlc3RBcmdzOy8vIE9iamVjdCBGdW5jdGlvbnMKLy8gLS0tLS0tLS0tLS0tLS0tLQovLyBLZXlzIGluIElFIDwgOSB0aGF0IHdvbid0IGJlIGl0ZXJhdGVkIGJ5IGBmb3Iga2V5IGluIC4uLmAgYW5kIHRodXMgbWlzc2VkLgp2YXIgaGFzRW51bUJ1Zz0he3RvU3RyaW5nOm51bGx9LnByb3BlcnR5SXNFbnVtZXJhYmxlKCd0b1N0cmluZycpO3ZhciBub25FbnVtZXJhYmxlUHJvcHM9Wyd2YWx1ZU9mJywnaXNQcm90b3R5cGVPZicsJ3RvU3RyaW5nJywncHJvcGVydHlJc0VudW1lcmFibGUnLCdoYXNPd25Qcm9wZXJ0eScsJ3RvTG9jYWxlU3RyaW5nJ107dmFyIGNvbGxlY3ROb25FbnVtUHJvcHM9ZnVuY3Rpb24gY29sbGVjdE5vbkVudW1Qcm9wcyhvYmosa2V5cyl7dmFyIG5vbkVudW1JZHg9bm9uRW51bWVyYWJsZVByb3BzLmxlbmd0aDt2YXIgY29uc3RydWN0b3I9b2JqLmNvbnN0cnVjdG9yO3ZhciBwcm90bz1fLmlzRnVuY3Rpb24oY29uc3RydWN0b3IpJiZjb25zdHJ1Y3Rvci5wcm90b3R5cGV8fE9ialByb3RvOy8vIENvbnN0cnVjdG9yIGlzIGEgc3BlY2lhbCBjYXNlLgp2YXIgcHJvcD0nY29uc3RydWN0b3InO2lmKF8uaGFzKG9iaixwcm9wKSYmIV8uY29udGFpbnMoa2V5cyxwcm9wKSlrZXlzLnB1c2gocHJvcCk7d2hpbGUobm9uRW51bUlkeC0tKXtwcm9wPW5vbkVudW1lcmFibGVQcm9wc1tub25FbnVtSWR4XTtpZihwcm9wIGluIG9iaiYmb2JqW3Byb3BdIT09cHJvdG9bcHJvcF0mJiFfLmNvbnRhaW5zKGtleXMscHJvcCkpe2tleXMucHVzaChwcm9wKTt9fX07Ly8gUmV0cmlldmUgdGhlIG5hbWVzIG9mIGFuIG9iamVjdCdzIG93biBwcm9wZXJ0aWVzLgovLyBEZWxlZ2F0ZXMgdG8gKipFQ01BU2NyaXB0IDUqKidzIG5hdGl2ZSBgT2JqZWN0LmtleXNgLgpfLmtleXM9ZnVuY3Rpb24ob2JqKXtpZighXy5pc09iamVjdChvYmopKXJldHVybltdO2lmKG5hdGl2ZUtleXMpcmV0dXJuIG5hdGl2ZUtleXMob2JqKTt2YXIga2V5cz1bXTtmb3IodmFyIGtleSBpbiBvYmope2lmKF8uaGFzKG9iaixrZXkpKWtleXMucHVzaChrZXkpO30vLyBBaGVtLCBJRSA8IDkuCmlmKGhhc0VudW1CdWcpY29sbGVjdE5vbkVudW1Qcm9wcyhvYmosa2V5cyk7cmV0dXJuIGtleXM7fTsvLyBSZXRyaWV2ZSBhbGwgdGhlIHByb3BlcnR5IG5hbWVzIG9mIGFuIG9iamVjdC4KXy5hbGxLZXlzPWZ1bmN0aW9uKG9iail7aWYoIV8uaXNPYmplY3Qob2JqKSlyZXR1cm5bXTt2YXIga2V5cz1bXTtmb3IodmFyIGtleSBpbiBvYmope2tleXMucHVzaChrZXkpO30vLyBBaGVtLCBJRSA8IDkuCmlmKGhhc0VudW1CdWcpY29sbGVjdE5vbkVudW1Qcm9wcyhvYmosa2V5cyk7cmV0dXJuIGtleXM7fTsvLyBSZXRyaWV2ZSB0aGUgdmFsdWVzIG9mIGFuIG9iamVjdCdzIHByb3BlcnRpZXMuCl8udmFsdWVzPWZ1bmN0aW9uKG9iail7dmFyIGtleXM9Xy5rZXlzKG9iaik7dmFyIGxlbmd0aD1rZXlzLmxlbmd0aDt2YXIgdmFsdWVzPUFycmF5KGxlbmd0aCk7Zm9yKHZhciBpPTA7aTxsZW5ndGg7aSsrKXt2YWx1ZXNbaV09b2JqW2tleXNbaV1dO31yZXR1cm4gdmFsdWVzO307Ly8gUmV0dXJucyB0aGUgcmVzdWx0cyBvZiBhcHBseWluZyB0aGUgaXRlcmF0ZWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBvYmplY3QuCi8vIEluIGNvbnRyYXN0IHRvIF8ubWFwIGl0IHJldHVybnMgYW4gb2JqZWN0LgpfLm1hcE9iamVjdD1mdW5jdGlvbihvYmosaXRlcmF0ZWUsY29udGV4dCl7aXRlcmF0ZWU9Y2IoaXRlcmF0ZWUsY29udGV4dCk7dmFyIGtleXM9Xy5rZXlzKG9iaiksbGVuZ3RoPWtleXMubGVuZ3RoLHJlc3VsdHM9e307Zm9yKHZhciBpbmRleD0wO2luZGV4PGxlbmd0aDtpbmRleCsrKXt2YXIgY3VycmVudEtleT1rZXlzW2luZGV4XTtyZXN1bHRzW2N1cnJlbnRLZXldPWl0ZXJhdGVlKG9ialtjdXJyZW50S2V5XSxjdXJyZW50S2V5LG9iaik7fXJldHVybiByZXN1bHRzO307Ly8gQ29udmVydCBhbiBvYmplY3QgaW50byBhIGxpc3Qgb2YgYFtrZXksIHZhbHVlXWAgcGFpcnMuCl8ucGFpcnM9ZnVuY3Rpb24ob2JqKXt2YXIga2V5cz1fLmtleXMob2JqKTt2YXIgbGVuZ3RoPWtleXMubGVuZ3RoO3ZhciBwYWlycz1BcnJheShsZW5ndGgpO2Zvcih2YXIgaT0wO2k8bGVuZ3RoO2krKyl7cGFpcnNbaV09W2tleXNbaV0sb2JqW2tleXNbaV1dXTt9cmV0dXJuIHBhaXJzO307Ly8gSW52ZXJ0IHRoZSBrZXlzIGFuZCB2YWx1ZXMgb2YgYW4gb2JqZWN0LiBUaGUgdmFsdWVzIG11c3QgYmUgc2VyaWFsaXphYmxlLgpfLmludmVydD1mdW5jdGlvbihvYmope3ZhciByZXN1bHQ9e307dmFyIGtleXM9Xy5rZXlzKG9iaik7Zm9yKHZhciBpPTAsbGVuZ3RoPWtleXMubGVuZ3RoO2k8bGVuZ3RoO2krKyl7cmVzdWx0W29ialtrZXlzW2ldXV09a2V5c1tpXTt9cmV0dXJuIHJlc3VsdDt9Oy8vIFJldHVybiBhIHNvcnRlZCBsaXN0IG9mIHRoZSBmdW5jdGlvbiBuYW1lcyBhdmFpbGFibGUgb24gdGhlIG9iamVjdC4KLy8gQWxpYXNlZCBhcyBgbWV0aG9kc2AuCl8uZnVuY3Rpb25zPV8ubWV0aG9kcz1mdW5jdGlvbihvYmope3ZhciBuYW1lcz1bXTtmb3IodmFyIGtleSBpbiBvYmope2lmKF8uaXNGdW5jdGlvbihvYmpba2V5XSkpbmFtZXMucHVzaChrZXkpO31yZXR1cm4gbmFtZXMuc29ydCgpO307Ly8gQW4gaW50ZXJuYWwgZnVuY3Rpb24gZm9yIGNyZWF0aW5nIGFzc2lnbmVyIGZ1bmN0aW9ucy4KdmFyIGNyZWF0ZUFzc2lnbmVyPWZ1bmN0aW9uIGNyZWF0ZUFzc2lnbmVyKGtleXNGdW5jLGRlZmF1bHRzKXtyZXR1cm4gZnVuY3Rpb24ob2JqKXt2YXIgbGVuZ3RoPWFyZ3VtZW50cy5sZW5ndGg7aWYoZGVmYXVsdHMpb2JqPU9iamVjdChvYmopO2lmKGxlbmd0aDwyfHxvYmo9PW51bGwpcmV0dXJuIG9iajtmb3IodmFyIGluZGV4PTE7aW5kZXg8bGVuZ3RoO2luZGV4Kyspe3ZhciBzb3VyY2U9YXJndW1lbnRzW2luZGV4XSxrZXlzPWtleXNGdW5jKHNvdXJjZSksbD1rZXlzLmxlbmd0aDtmb3IodmFyIGk9MDtpPGw7aSsrKXt2YXIga2V5PWtleXNbaV07aWYoIWRlZmF1bHRzfHxvYmpba2V5XT09PXZvaWQgMClvYmpba2V5XT1zb3VyY2Vba2V5XTt9fXJldHVybiBvYmo7fTt9Oy8vIEV4dGVuZCBhIGdpdmVuIG9iamVjdCB3aXRoIGFsbCB0aGUgcHJvcGVydGllcyBpbiBwYXNzZWQtaW4gb2JqZWN0KHMpLgpfLmV4dGVuZD1jcmVhdGVBc3NpZ25lcihfLmFsbEtleXMpOy8vIEFzc2lnbnMgYSBnaXZlbiBvYmplY3Qgd2l0aCBhbGwgdGhlIG93biBwcm9wZXJ0aWVzIGluIHRoZSBwYXNzZWQtaW4gb2JqZWN0KHMpLgovLyAoaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2Fzc2lnbikKXy5leHRlbmRPd249Xy5hc3NpZ249Y3JlYXRlQXNzaWduZXIoXy5rZXlzKTsvLyBSZXR1cm5zIHRoZSBmaXJzdCBrZXkgb24gYW4gb2JqZWN0IHRoYXQgcGFzc2VzIGEgcHJlZGljYXRlIHRlc3QuCl8uZmluZEtleT1mdW5jdGlvbihvYmoscHJlZGljYXRlLGNvbnRleHQpe3ByZWRpY2F0ZT1jYihwcmVkaWNhdGUsY29udGV4dCk7dmFyIGtleXM9Xy5rZXlzKG9iaiksa2V5O2Zvcih2YXIgaT0wLGxlbmd0aD1rZXlzLmxlbmd0aDtpPGxlbmd0aDtpKyspe2tleT1rZXlzW2ldO2lmKHByZWRpY2F0ZShvYmpba2V5XSxrZXksb2JqKSlyZXR1cm4ga2V5O319Oy8vIEludGVybmFsIHBpY2sgaGVscGVyIGZ1bmN0aW9uIHRvIGRldGVybWluZSBpZiBgb2JqYCBoYXMga2V5IGBrZXlgLgp2YXIga2V5SW5PYmo9ZnVuY3Rpb24ga2V5SW5PYmoodmFsdWUsa2V5LG9iail7cmV0dXJuIGtleSBpbiBvYmo7fTsvLyBSZXR1cm4gYSBjb3B5IG9mIHRoZSBvYmplY3Qgb25seSBjb250YWluaW5nIHRoZSB3aGl0ZWxpc3RlZCBwcm9wZXJ0aWVzLgpfLnBpY2s9cmVzdEFyZ3MoZnVuY3Rpb24ob2JqLGtleXMpe3ZhciByZXN1bHQ9e30saXRlcmF0ZWU9a2V5c1swXTtpZihvYmo9PW51bGwpcmV0dXJuIHJlc3VsdDtpZihfLmlzRnVuY3Rpb24oaXRlcmF0ZWUpKXtpZihrZXlzLmxlbmd0aD4xKWl0ZXJhdGVlPW9wdGltaXplQ2IoaXRlcmF0ZWUsa2V5c1sxXSk7a2V5cz1fLmFsbEtleXMob2JqKTt9ZWxzZXtpdGVyYXRlZT1rZXlJbk9iajtrZXlzPWZsYXR0ZW4oa2V5cyxmYWxzZSxmYWxzZSk7b2JqPU9iamVjdChvYmopO31mb3IodmFyIGk9MCxsZW5ndGg9a2V5cy5sZW5ndGg7aTxsZW5ndGg7aSsrKXt2YXIga2V5PWtleXNbaV07dmFyIHZhbHVlPW9ialtrZXldO2lmKGl0ZXJhdGVlKHZhbHVlLGtleSxvYmopKXJlc3VsdFtrZXldPXZhbHVlO31yZXR1cm4gcmVzdWx0O30pOy8vIFJldHVybiBhIGNvcHkgb2YgdGhlIG9iamVjdCB3aXRob3V0IHRoZSBibGFja2xpc3RlZCBwcm9wZXJ0aWVzLgpfLm9taXQ9cmVzdEFyZ3MoZnVuY3Rpb24ob2JqLGtleXMpe3ZhciBpdGVyYXRlZT1rZXlzWzBdLGNvbnRleHQ7aWYoXy5pc0Z1bmN0aW9uKGl0ZXJhdGVlKSl7aXRlcmF0ZWU9Xy5uZWdhdGUoaXRlcmF0ZWUpO2lmKGtleXMubGVuZ3RoPjEpY29udGV4dD1rZXlzWzFdO31lbHNle2tleXM9Xy5tYXAoZmxhdHRlbihrZXlzLGZhbHNlLGZhbHNlKSxTdHJpbmcpO2l0ZXJhdGVlPWZ1bmN0aW9uIGl0ZXJhdGVlKHZhbHVlLGtleSl7cmV0dXJuIV8uY29udGFpbnMoa2V5cyxrZXkpO307fXJldHVybiBfLnBpY2sob2JqLGl0ZXJhdGVlLGNvbnRleHQpO30pOy8vIEZpbGwgaW4gYSBnaXZlbiBvYmplY3Qgd2l0aCBkZWZhdWx0IHByb3BlcnRpZXMuCl8uZGVmYXVsdHM9Y3JlYXRlQXNzaWduZXIoXy5hbGxLZXlzLHRydWUpOy8vIENyZWF0ZXMgYW4gb2JqZWN0IHRoYXQgaW5oZXJpdHMgZnJvbSB0aGUgZ2l2ZW4gcHJvdG90eXBlIG9iamVjdC4KLy8gSWYgYWRkaXRpb25hbCBwcm9wZXJ0aWVzIGFyZSBwcm92aWRlZCB0aGVuIHRoZXkgd2lsbCBiZSBhZGRlZCB0byB0aGUKLy8gY3JlYXRlZCBvYmplY3QuCl8uY3JlYXRlPWZ1bmN0aW9uKHByb3RvdHlwZSxwcm9wcyl7dmFyIHJlc3VsdD1iYXNlQ3JlYXRlKHByb3RvdHlwZSk7aWYocHJvcHMpXy5leHRlbmRPd24ocmVzdWx0LHByb3BzKTtyZXR1cm4gcmVzdWx0O307Ly8gQ3JlYXRlIGEgKHNoYWxsb3ctY2xvbmVkKSBkdXBsaWNhdGUgb2YgYW4gb2JqZWN0LgpfLmNsb25lPWZ1bmN0aW9uKG9iail7aWYoIV8uaXNPYmplY3Qob2JqKSlyZXR1cm4gb2JqO3JldHVybiBfLmlzQXJyYXkob2JqKT9vYmouc2xpY2UoKTpfLmV4dGVuZCh7fSxvYmopO307Ly8gSW52b2tlcyBpbnRlcmNlcHRvciB3aXRoIHRoZSBvYmosIGFuZCB0aGVuIHJldHVybnMgb2JqLgovLyBUaGUgcHJpbWFyeSBwdXJwb3NlIG9mIHRoaXMgbWV0aG9kIGlzIHRvICJ0YXAgaW50byIgYSBtZXRob2QgY2hhaW4sIGluCi8vIG9yZGVyIHRvIHBlcmZvcm0gb3BlcmF0aW9ucyBvbiBpbnRlcm1lZGlhdGUgcmVzdWx0cyB3aXRoaW4gdGhlIGNoYWluLgpfLnRhcD1mdW5jdGlvbihvYmosaW50ZXJjZXB0b3Ipe2ludGVyY2VwdG9yKG9iaik7cmV0dXJuIG9iajt9Oy8vIFJldHVybnMgd2hldGhlciBhbiBvYmplY3QgaGFzIGEgZ2l2ZW4gc2V0IG9mIGBrZXk6dmFsdWVgIHBhaXJzLgpfLmlzTWF0Y2g9ZnVuY3Rpb24ob2JqZWN0LGF0dHJzKXt2YXIga2V5cz1fLmtleXMoYXR0cnMpLGxlbmd0aD1rZXlzLmxlbmd0aDtpZihvYmplY3Q9PW51bGwpcmV0dXJuIWxlbmd0aDt2YXIgb2JqPU9iamVjdChvYmplY3QpO2Zvcih2YXIgaT0wO2k8bGVuZ3RoO2krKyl7dmFyIGtleT1rZXlzW2ldO2lmKGF0dHJzW2tleV0hPT1vYmpba2V5XXx8IShrZXkgaW4gb2JqKSlyZXR1cm4gZmFsc2U7fXJldHVybiB0cnVlO307Ly8gSW50ZXJuYWwgcmVjdXJzaXZlIGNvbXBhcmlzb24gZnVuY3Rpb24gZm9yIGBpc0VxdWFsYC4KdmFyIGVxLGRlZXBFcTtlcT1mdW5jdGlvbiBlcShhLGIsYVN0YWNrLGJTdGFjayl7Ly8gSWRlbnRpY2FsIG9iamVjdHMgYXJlIGVxdWFsLiBgMCA9PT0gLTBgLCBidXQgdGhleSBhcmVuJ3QgaWRlbnRpY2FsLgovLyBTZWUgdGhlIFtIYXJtb255IGBlZ2FsYCBwcm9wb3NhbF0oaHR0cDovL3dpa2kuZWNtYXNjcmlwdC5vcmcvZG9rdS5waHA/aWQ9aGFybW9ueTplZ2FsKS4KaWYoYT09PWIpcmV0dXJuIGEhPT0wfHwxL2E9PT0xL2I7Ly8gQSBzdHJpY3QgY29tcGFyaXNvbiBpcyBuZWNlc3NhcnkgYmVjYXVzZSBgbnVsbCA9PSB1bmRlZmluZWRgLgppZihhPT1udWxsfHxiPT1udWxsKXJldHVybiBhPT09YjsvLyBgTmFOYHMgYXJlIGVxdWl2YWxlbnQsIGJ1dCBub24tcmVmbGV4aXZlLgppZihhIT09YSlyZXR1cm4gYiE9PWI7Ly8gRXhoYXVzdCBwcmltaXRpdmUgY2hlY2tzCnZhciB0eXBlPV90eXBlb2YoYSk7aWYodHlwZSE9PSdmdW5jdGlvbicmJnR5cGUhPT0nb2JqZWN0JyYmX3R5cGVvZihiKSE9J29iamVjdCcpcmV0dXJuIGZhbHNlO3JldHVybiBkZWVwRXEoYSxiLGFTdGFjayxiU3RhY2spO307Ly8gSW50ZXJuYWwgcmVjdXJzaXZlIGNvbXBhcmlzb24gZnVuY3Rpb24gZm9yIGBpc0VxdWFsYC4KZGVlcEVxPWZ1bmN0aW9uIGRlZXBFcShhLGIsYVN0YWNrLGJTdGFjayl7Ly8gVW53cmFwIGFueSB3cmFwcGVkIG9iamVjdHMuCmlmKGEgaW5zdGFuY2VvZiBfKWE9YS5fd3JhcHBlZDtpZihiIGluc3RhbmNlb2YgXyliPWIuX3dyYXBwZWQ7Ly8gQ29tcGFyZSBgW1tDbGFzc11dYCBuYW1lcy4KdmFyIGNsYXNzTmFtZT10b1N0cmluZy5jYWxsKGEpO2lmKGNsYXNzTmFtZSE9PXRvU3RyaW5nLmNhbGwoYikpcmV0dXJuIGZhbHNlO3N3aXRjaChjbGFzc05hbWUpey8vIFN0cmluZ3MsIG51bWJlcnMsIHJlZ3VsYXIgZXhwcmVzc2lvbnMsIGRhdGVzLCBhbmQgYm9vbGVhbnMgYXJlIGNvbXBhcmVkIGJ5IHZhbHVlLgpjYXNlJ1tvYmplY3QgUmVnRXhwXSc6Ly8gUmVnRXhwcyBhcmUgY29lcmNlZCB0byBzdHJpbmdzIGZvciBjb21wYXJpc29uIChOb3RlOiAnJyArIC9hL2kgPT09ICcvYS9pJykKY2FzZSdbb2JqZWN0IFN0cmluZ10nOi8vIFByaW1pdGl2ZXMgYW5kIHRoZWlyIGNvcnJlc3BvbmRpbmcgb2JqZWN0IHdyYXBwZXJzIGFyZSBlcXVpdmFsZW50OyB0aHVzLCBgIjUiYCBpcwovLyBlcXVpdmFsZW50IHRvIGBuZXcgU3RyaW5nKCI1IilgLgpyZXR1cm4nJythPT09JycrYjtjYXNlJ1tvYmplY3QgTnVtYmVyXSc6Ly8gYE5hTmBzIGFyZSBlcXVpdmFsZW50LCBidXQgbm9uLXJlZmxleGl2ZS4KLy8gT2JqZWN0KE5hTikgaXMgZXF1aXZhbGVudCB0byBOYU4uCmlmKCthIT09K2EpcmV0dXJuK2IhPT0rYjsvLyBBbiBgZWdhbGAgY29tcGFyaXNvbiBpcyBwZXJmb3JtZWQgZm9yIG90aGVyIG51bWVyaWMgdmFsdWVzLgpyZXR1cm4rYT09PTA/MS8rYT09PTEvYjorYT09PStiO2Nhc2UnW29iamVjdCBEYXRlXSc6Y2FzZSdbb2JqZWN0IEJvb2xlYW5dJzovLyBDb2VyY2UgZGF0ZXMgYW5kIGJvb2xlYW5zIHRvIG51bWVyaWMgcHJpbWl0aXZlIHZhbHVlcy4gRGF0ZXMgYXJlIGNvbXBhcmVkIGJ5IHRoZWlyCi8vIG1pbGxpc2Vjb25kIHJlcHJlc2VudGF0aW9ucy4gTm90ZSB0aGF0IGludmFsaWQgZGF0ZXMgd2l0aCBtaWxsaXNlY29uZCByZXByZXNlbnRhdGlvbnMKLy8gb2YgYE5hTmAgYXJlIG5vdCBlcXVpdmFsZW50LgpyZXR1cm4rYT09PStiO2Nhc2UnW29iamVjdCBTeW1ib2xdJzpyZXR1cm4gU3ltYm9sUHJvdG8udmFsdWVPZi5jYWxsKGEpPT09U3ltYm9sUHJvdG8udmFsdWVPZi5jYWxsKGIpO312YXIgYXJlQXJyYXlzPWNsYXNzTmFtZT09PSdbb2JqZWN0IEFycmF5XSc7aWYoIWFyZUFycmF5cyl7aWYoX3R5cGVvZihhKSE9J29iamVjdCd8fF90eXBlb2YoYikhPSdvYmplY3QnKXJldHVybiBmYWxzZTsvLyBPYmplY3RzIHdpdGggZGlmZmVyZW50IGNvbnN0cnVjdG9ycyBhcmUgbm90IGVxdWl2YWxlbnQsIGJ1dCBgT2JqZWN0YHMgb3IgYEFycmF5YHMKLy8gZnJvbSBkaWZmZXJlbnQgZnJhbWVzIGFyZS4KdmFyIGFDdG9yPWEuY29uc3RydWN0b3IsYkN0b3I9Yi5jb25zdHJ1Y3RvcjtpZihhQ3RvciE9PWJDdG9yJiYhKF8uaXNGdW5jdGlvbihhQ3RvcikmJmFDdG9yIGluc3RhbmNlb2YgYUN0b3ImJl8uaXNGdW5jdGlvbihiQ3RvcikmJmJDdG9yIGluc3RhbmNlb2YgYkN0b3IpJiYnY29uc3RydWN0b3InaW4gYSYmJ2NvbnN0cnVjdG9yJ2luIGIpe3JldHVybiBmYWxzZTt9fS8vIEFzc3VtZSBlcXVhbGl0eSBmb3IgY3ljbGljIHN0cnVjdHVyZXMuIFRoZSBhbGdvcml0aG0gZm9yIGRldGVjdGluZyBjeWNsaWMKLy8gc3RydWN0dXJlcyBpcyBhZGFwdGVkIGZyb20gRVMgNS4xIHNlY3Rpb24gMTUuMTIuMywgYWJzdHJhY3Qgb3BlcmF0aW9uIGBKT2AuCi8vIEluaXRpYWxpemluZyBzdGFjayBvZiB0cmF2ZXJzZWQgb2JqZWN0cy4KLy8gSXQncyBkb25lIGhlcmUgc2luY2Ugd2Ugb25seSBuZWVkIHRoZW0gZm9yIG9iamVjdHMgYW5kIGFycmF5cyBjb21wYXJpc29uLgphU3RhY2s9YVN0YWNrfHxbXTtiU3RhY2s9YlN0YWNrfHxbXTt2YXIgbGVuZ3RoPWFTdGFjay5sZW5ndGg7d2hpbGUobGVuZ3RoLS0pey8vIExpbmVhciBzZWFyY2guIFBlcmZvcm1hbmNlIGlzIGludmVyc2VseSBwcm9wb3J0aW9uYWwgdG8gdGhlIG51bWJlciBvZgovLyB1bmlxdWUgbmVzdGVkIHN0cnVjdHVyZXMuCmlmKGFTdGFja1tsZW5ndGhdPT09YSlyZXR1cm4gYlN0YWNrW2xlbmd0aF09PT1iO30vLyBBZGQgdGhlIGZpcnN0IG9iamVjdCB0byB0aGUgc3RhY2sgb2YgdHJhdmVyc2VkIG9iamVjdHMuCmFTdGFjay5wdXNoKGEpO2JTdGFjay5wdXNoKGIpOy8vIFJlY3Vyc2l2ZWx5IGNvbXBhcmUgb2JqZWN0cyBhbmQgYXJyYXlzLgppZihhcmVBcnJheXMpey8vIENvbXBhcmUgYXJyYXkgbGVuZ3RocyB0byBkZXRlcm1pbmUgaWYgYSBkZWVwIGNvbXBhcmlzb24gaXMgbmVjZXNzYXJ5LgpsZW5ndGg9YS5sZW5ndGg7aWYobGVuZ3RoIT09Yi5sZW5ndGgpcmV0dXJuIGZhbHNlOy8vIERlZXAgY29tcGFyZSB0aGUgY29udGVudHMsIGlnbm9yaW5nIG5vbi1udW1lcmljIHByb3BlcnRpZXMuCndoaWxlKGxlbmd0aC0tKXtpZighZXEoYVtsZW5ndGhdLGJbbGVuZ3RoXSxhU3RhY2ssYlN0YWNrKSlyZXR1cm4gZmFsc2U7fX1lbHNley8vIERlZXAgY29tcGFyZSBvYmplY3RzLgp2YXIga2V5cz1fLmtleXMoYSksa2V5O2xlbmd0aD1rZXlzLmxlbmd0aDsvLyBFbnN1cmUgdGhhdCBib3RoIG9iamVjdHMgY29udGFpbiB0aGUgc2FtZSBudW1iZXIgb2YgcHJvcGVydGllcyBiZWZvcmUgY29tcGFyaW5nIGRlZXAgZXF1YWxpdHkuCmlmKF8ua2V5cyhiKS5sZW5ndGghPT1sZW5ndGgpcmV0dXJuIGZhbHNlO3doaWxlKGxlbmd0aC0tKXsvLyBEZWVwIGNvbXBhcmUgZWFjaCBtZW1iZXIKa2V5PWtleXNbbGVuZ3RoXTtpZighKF8uaGFzKGIsa2V5KSYmZXEoYVtrZXldLGJba2V5XSxhU3RhY2ssYlN0YWNrKSkpcmV0dXJuIGZhbHNlO319Ly8gUmVtb3ZlIHRoZSBmaXJzdCBvYmplY3QgZnJvbSB0aGUgc3RhY2sgb2YgdHJhdmVyc2VkIG9iamVjdHMuCmFTdGFjay5wb3AoKTtiU3RhY2sucG9wKCk7cmV0dXJuIHRydWU7fTsvLyBQZXJmb3JtIGEgZGVlcCBjb21wYXJpc29uIHRvIGNoZWNrIGlmIHR3byBvYmplY3RzIGFyZSBlcXVhbC4KXy5pc0VxdWFsPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGVxKGEsYik7fTsvLyBJcyBhIGdpdmVuIGFycmF5LCBzdHJpbmcsIG9yIG9iamVjdCBlbXB0eT8KLy8gQW4gImVtcHR5IiBvYmplY3QgaGFzIG5vIGVudW1lcmFibGUgb3duLXByb3BlcnRpZXMuCl8uaXNFbXB0eT1mdW5jdGlvbihvYmope2lmKG9iaj09bnVsbClyZXR1cm4gdHJ1ZTtpZihpc0FycmF5TGlrZShvYmopJiYoXy5pc0FycmF5KG9iail8fF8uaXNTdHJpbmcob2JqKXx8Xy5pc0FyZ3VtZW50cyhvYmopKSlyZXR1cm4gb2JqLmxlbmd0aD09PTA7cmV0dXJuIF8ua2V5cyhvYmopLmxlbmd0aD09PTA7fTsvLyBJcyBhIGdpdmVuIHZhbHVlIGEgRE9NIGVsZW1lbnQ/Cl8uaXNFbGVtZW50PWZ1bmN0aW9uKG9iail7cmV0dXJuISEob2JqJiZvYmoubm9kZVR5cGU9PT0xKTt9Oy8vIElzIGEgZ2l2ZW4gdmFsdWUgYW4gYXJyYXk/Ci8vIERlbGVnYXRlcyB0byBFQ01BNSdzIG5hdGl2ZSBBcnJheS5pc0FycmF5Cl8uaXNBcnJheT1uYXRpdmVJc0FycmF5fHxmdW5jdGlvbihvYmope3JldHVybiB0b1N0cmluZy5jYWxsKG9iaik9PT0nW29iamVjdCBBcnJheV0nO307Ly8gSXMgYSBnaXZlbiB2YXJpYWJsZSBhbiBvYmplY3Q/Cl8uaXNPYmplY3Q9ZnVuY3Rpb24ob2JqKXt2YXIgdHlwZT1fdHlwZW9mKG9iaik7cmV0dXJuIHR5cGU9PT0nZnVuY3Rpb24nfHx0eXBlPT09J29iamVjdCcmJiEhb2JqO307Ly8gQWRkIHNvbWUgaXNUeXBlIG1ldGhvZHM6IGlzQXJndW1lbnRzLCBpc0Z1bmN0aW9uLCBpc1N0cmluZywgaXNOdW1iZXIsIGlzRGF0ZSwgaXNSZWdFeHAsIGlzRXJyb3IsIGlzTWFwLCBpc1dlYWtNYXAsIGlzU2V0LCBpc1dlYWtTZXQuCl8uZWFjaChbJ0FyZ3VtZW50cycsJ0Z1bmN0aW9uJywnU3RyaW5nJywnTnVtYmVyJywnRGF0ZScsJ1JlZ0V4cCcsJ0Vycm9yJywnU3ltYm9sJywnTWFwJywnV2Vha01hcCcsJ1NldCcsJ1dlYWtTZXQnXSxmdW5jdGlvbihuYW1lKXtfWydpcycrbmFtZV09ZnVuY3Rpb24ob2JqKXtyZXR1cm4gdG9TdHJpbmcuY2FsbChvYmopPT09J1tvYmplY3QgJytuYW1lKyddJzt9O30pOy8vIERlZmluZSBhIGZhbGxiYWNrIHZlcnNpb24gb2YgdGhlIG1ldGhvZCBpbiBicm93c2VycyAoYWhlbSwgSUUgPCA5KSwgd2hlcmUKLy8gdGhlcmUgaXNuJ3QgYW55IGluc3BlY3RhYmxlICJBcmd1bWVudHMiIHR5cGUuCmlmKCFfLmlzQXJndW1lbnRzKGFyZ3VtZW50cykpe18uaXNBcmd1bWVudHM9ZnVuY3Rpb24ob2JqKXtyZXR1cm4gXy5oYXMob2JqLCdjYWxsZWUnKTt9O30vLyBPcHRpbWl6ZSBgaXNGdW5jdGlvbmAgaWYgYXBwcm9wcmlhdGUuIFdvcmsgYXJvdW5kIHNvbWUgdHlwZW9mIGJ1Z3MgaW4gb2xkIHY4LAovLyBJRSAxMSAoIzE2MjEpLCBTYWZhcmkgOCAoIzE5MjkpLCBhbmQgUGhhbnRvbUpTICgjMjIzNikuCnZhciBub2RlbGlzdD1yb290LmRvY3VtZW50JiZyb290LmRvY3VtZW50LmNoaWxkTm9kZXM7aWYodHlwZW9mIC8uLyE9J2Z1bmN0aW9uJyYmKHR5cGVvZiBJbnQ4QXJyYXk9PT0idW5kZWZpbmVkIj8idW5kZWZpbmVkIjpfdHlwZW9mKEludDhBcnJheSkpIT0nb2JqZWN0JyYmdHlwZW9mIG5vZGVsaXN0IT0nZnVuY3Rpb24nKXtfLmlzRnVuY3Rpb249ZnVuY3Rpb24ob2JqKXtyZXR1cm4gdHlwZW9mIG9iaj09J2Z1bmN0aW9uJ3x8ZmFsc2U7fTt9Ly8gSXMgYSBnaXZlbiBvYmplY3QgYSBmaW5pdGUgbnVtYmVyPwpfLmlzRmluaXRlPWZ1bmN0aW9uKG9iail7cmV0dXJuIV8uaXNTeW1ib2wob2JqKSYmaXNGaW5pdGUob2JqKSYmIWlzTmFOKHBhcnNlRmxvYXQob2JqKSk7fTsvLyBJcyB0aGUgZ2l2ZW4gdmFsdWUgYE5hTmA/Cl8uaXNOYU49ZnVuY3Rpb24ob2JqKXtyZXR1cm4gaXNOYU4ob2JqKSYmXy5pc051bWJlcihvYmopO307Ly8gSXMgYSBnaXZlbiB2YWx1ZSBhIGJvb2xlYW4/Cl8uaXNCb29sZWFuPWZ1bmN0aW9uKG9iail7cmV0dXJuIG9iaj09PXRydWV8fG9iaj09PWZhbHNlfHx0b1N0cmluZy5jYWxsKG9iaik9PT0nW29iamVjdCBCb29sZWFuXSc7fTsvLyBJcyBhIGdpdmVuIHZhbHVlIGVxdWFsIHRvIG51bGw/Cl8uaXNOdWxsPWZ1bmN0aW9uKG9iail7cmV0dXJuIG9iaj09PW51bGw7fTsvLyBJcyBhIGdpdmVuIHZhcmlhYmxlIHVuZGVmaW5lZD8KXy5pc1VuZGVmaW5lZD1mdW5jdGlvbihvYmope3JldHVybiBvYmo9PT12b2lkIDA7fTsvLyBTaG9ydGN1dCBmdW5jdGlvbiBmb3IgY2hlY2tpbmcgaWYgYW4gb2JqZWN0IGhhcyBhIGdpdmVuIHByb3BlcnR5IGRpcmVjdGx5Ci8vIG9uIGl0c2VsZiAoaW4gb3RoZXIgd29yZHMsIG5vdCBvbiBhIHByb3RvdHlwZSkuCl8uaGFzPWZ1bmN0aW9uKG9iaixrZXkpe3JldHVybiBvYmohPW51bGwmJmhhc093blByb3BlcnR5LmNhbGwob2JqLGtleSk7fTsvLyBVdGlsaXR5IEZ1bmN0aW9ucwovLyAtLS0tLS0tLS0tLS0tLS0tLQovLyBSdW4gVW5kZXJzY29yZS5qcyBpbiAqbm9Db25mbGljdCogbW9kZSwgcmV0dXJuaW5nIHRoZSBgX2AgdmFyaWFibGUgdG8gaXRzCi8vIHByZXZpb3VzIG93bmVyLiBSZXR1cm5zIGEgcmVmZXJlbmNlIHRvIHRoZSBVbmRlcnNjb3JlIG9iamVjdC4KXy5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cm9vdC5fPXByZXZpb3VzVW5kZXJzY29yZTtyZXR1cm4gdGhpczt9Oy8vIEtlZXAgdGhlIGlkZW50aXR5IGZ1bmN0aW9uIGFyb3VuZCBmb3IgZGVmYXVsdCBpdGVyYXRlZXMuCl8uaWRlbnRpdHk9ZnVuY3Rpb24odmFsdWUpe3JldHVybiB2YWx1ZTt9Oy8vIFByZWRpY2F0ZS1nZW5lcmF0aW5nIGZ1bmN0aW9ucy4gT2Z0ZW4gdXNlZnVsIG91dHNpZGUgb2YgVW5kZXJzY29yZS4KXy5jb25zdGFudD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHZhbHVlO307fTtfLm5vb3A9ZnVuY3Rpb24oKXt9O18ucHJvcGVydHk9cHJvcGVydHk7Ly8gR2VuZXJhdGVzIGEgZnVuY3Rpb24gZm9yIGEgZ2l2ZW4gb2JqZWN0IHRoYXQgcmV0dXJucyBhIGdpdmVuIHByb3BlcnR5LgpfLnByb3BlcnR5T2Y9ZnVuY3Rpb24ob2JqKXtyZXR1cm4gb2JqPT1udWxsP2Z1bmN0aW9uKCl7fTpmdW5jdGlvbihrZXkpe3JldHVybiBvYmpba2V5XTt9O307Ly8gUmV0dXJucyBhIHByZWRpY2F0ZSBmb3IgY2hlY2tpbmcgd2hldGhlciBhbiBvYmplY3QgaGFzIGEgZ2l2ZW4gc2V0IG9mCi8vIGBrZXk6dmFsdWVgIHBhaXJzLgpfLm1hdGNoZXI9Xy5tYXRjaGVzPWZ1bmN0aW9uKGF0dHJzKXthdHRycz1fLmV4dGVuZE93bih7fSxhdHRycyk7cmV0dXJuIGZ1bmN0aW9uKG9iail7cmV0dXJuIF8uaXNNYXRjaChvYmosYXR0cnMpO307fTsvLyBSdW4gYSBmdW5jdGlvbiAqKm4qKiB0aW1lcy4KXy50aW1lcz1mdW5jdGlvbihuLGl0ZXJhdGVlLGNvbnRleHQpe3ZhciBhY2N1bT1BcnJheShNYXRoLm1heCgwLG4pKTtpdGVyYXRlZT1vcHRpbWl6ZUNiKGl0ZXJhdGVlLGNvbnRleHQsMSk7Zm9yKHZhciBpPTA7aTxuO2krKyl7YWNjdW1baV09aXRlcmF0ZWUoaSk7fXJldHVybiBhY2N1bTt9Oy8vIFJldHVybiBhIHJhbmRvbSBpbnRlZ2VyIGJldHdlZW4gbWluIGFuZCBtYXggKGluY2x1c2l2ZSkuCl8ucmFuZG9tPWZ1bmN0aW9uKG1pbixtYXgpe2lmKG1heD09bnVsbCl7bWF4PW1pbjttaW49MDt9cmV0dXJuIG1pbitNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqKG1heC1taW4rMSkpO307Ly8gQSAocG9zc2libHkgZmFzdGVyKSB3YXkgdG8gZ2V0IHRoZSBjdXJyZW50IHRpbWVzdGFtcCBhcyBhbiBpbnRlZ2VyLgpfLm5vdz1EYXRlLm5vd3x8ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCk7fTsvLyBMaXN0IG9mIEhUTUwgZW50aXRpZXMgZm9yIGVzY2FwaW5nLgp2YXIgZXNjYXBlTWFwPXsnJic6JyZhbXA7JywnPCc6JyZsdDsnLCc+JzonJmd0OycsJyInOicmcXVvdDsnLCInIjonJiN4Mjc7JywnYCc6JyYjeDYwOyd9O3ZhciB1bmVzY2FwZU1hcD1fLmludmVydChlc2NhcGVNYXApOy8vIEZ1bmN0aW9ucyBmb3IgZXNjYXBpbmcgYW5kIHVuZXNjYXBpbmcgc3RyaW5ncyB0by9mcm9tIEhUTUwgaW50ZXJwb2xhdGlvbi4KdmFyIGNyZWF0ZUVzY2FwZXI9ZnVuY3Rpb24gY3JlYXRlRXNjYXBlcihtYXApe3ZhciBlc2NhcGVyPWZ1bmN0aW9uIGVzY2FwZXIobWF0Y2gpe3JldHVybiBtYXBbbWF0Y2hdO307Ly8gUmVnZXhlcyBmb3IgaWRlbnRpZnlpbmcgYSBrZXkgdGhhdCBuZWVkcyB0byBiZSBlc2NhcGVkLgp2YXIgc291cmNlPScoPzonK18ua2V5cyhtYXApLmpvaW4oJ3wnKSsnKSc7dmFyIHRlc3RSZWdleHA9UmVnRXhwKHNvdXJjZSk7dmFyIHJlcGxhY2VSZWdleHA9UmVnRXhwKHNvdXJjZSwnZycpO3JldHVybiBmdW5jdGlvbihzdHJpbmcpe3N0cmluZz1zdHJpbmc9PW51bGw/Jyc6Jycrc3RyaW5nO3JldHVybiB0ZXN0UmVnZXhwLnRlc3Qoc3RyaW5nKT9zdHJpbmcucmVwbGFjZShyZXBsYWNlUmVnZXhwLGVzY2FwZXIpOnN0cmluZzt9O307Xy5lc2NhcGU9Y3JlYXRlRXNjYXBlcihlc2NhcGVNYXApO18udW5lc2NhcGU9Y3JlYXRlRXNjYXBlcih1bmVzY2FwZU1hcCk7Ly8gSWYgdGhlIHZhbHVlIG9mIHRoZSBuYW1lZCBgcHJvcGVydHlgIGlzIGEgZnVuY3Rpb24gdGhlbiBpbnZva2UgaXQgd2l0aCB0aGUKLy8gYG9iamVjdGAgYXMgY29udGV4dDsgb3RoZXJ3aXNlLCByZXR1cm4gaXQuCl8ucmVzdWx0PWZ1bmN0aW9uKG9iamVjdCxwcm9wLGZhbGxiYWNrKXt2YXIgdmFsdWU9b2JqZWN0PT1udWxsP3ZvaWQgMDpvYmplY3RbcHJvcF07aWYodmFsdWU9PT12b2lkIDApe3ZhbHVlPWZhbGxiYWNrO31yZXR1cm4gXy5pc0Z1bmN0aW9uKHZhbHVlKT92YWx1ZS5jYWxsKG9iamVjdCk6dmFsdWU7fTsvLyBHZW5lcmF0ZSBhIHVuaXF1ZSBpbnRlZ2VyIGlkICh1bmlxdWUgd2l0aGluIHRoZSBlbnRpcmUgY2xpZW50IHNlc3Npb24pLgovLyBVc2VmdWwgZm9yIHRlbXBvcmFyeSBET00gaWRzLgp2YXIgaWRDb3VudGVyPTA7Xy51bmlxdWVJZD1mdW5jdGlvbihwcmVmaXgpe3ZhciBpZD0rK2lkQ291bnRlcisnJztyZXR1cm4gcHJlZml4P3ByZWZpeCtpZDppZDt9Oy8vIEJ5IGRlZmF1bHQsIFVuZGVyc2NvcmUgdXNlcyBFUkItc3R5bGUgdGVtcGxhdGUgZGVsaW1pdGVycywgY2hhbmdlIHRoZQovLyBmb2xsb3dpbmcgdGVtcGxhdGUgc2V0dGluZ3MgdG8gdXNlIGFsdGVybmF0aXZlIGRlbGltaXRlcnMuCl8udGVtcGxhdGVTZXR0aW5ncz17ZXZhbHVhdGU6LzwlKFtcc1xTXSs/KSU+L2csaW50ZXJwb2xhdGU6LzwlPShbXHNcU10rPyklPi9nLGVzY2FwZTovPCUtKFtcc1xTXSs/KSU+L2d9Oy8vIFdoZW4gY3VzdG9taXppbmcgYHRlbXBsYXRlU2V0dGluZ3NgLCBpZiB5b3UgZG9uJ3Qgd2FudCB0byBkZWZpbmUgYW4KLy8gaW50ZXJwb2xhdGlvbiwgZXZhbHVhdGlvbiBvciBlc2NhcGluZyByZWdleCwgd2UgbmVlZCBvbmUgdGhhdCBpcwovLyBndWFyYW50ZWVkIG5vdCB0byBtYXRjaC4KdmFyIG5vTWF0Y2g9LyguKV4vOy8vIENlcnRhaW4gY2hhcmFjdGVycyBuZWVkIHRvIGJlIGVzY2FwZWQgc28gdGhhdCB0aGV5IGNhbiBiZSBwdXQgaW50byBhCi8vIHN0cmluZyBsaXRlcmFsLgp2YXIgZXNjYXBlcz17IiciOiInIiwnXFwnOidcXCcsJ1xyJzoncicsJ1xuJzonbicsIlx1MjAyOCI6J3UyMDI4JywiXHUyMDI5IjondTIwMjknfTt2YXIgZXNjYXBlUmVnRXhwPS9cXHwnfFxyfFxufFx1MjAyOHxcdTIwMjkvZzt2YXIgZXNjYXBlQ2hhcj1mdW5jdGlvbiBlc2NhcGVDaGFyKG1hdGNoKXtyZXR1cm4nXFwnK2VzY2FwZXNbbWF0Y2hdO307Ly8gSmF2YVNjcmlwdCBtaWNyby10ZW1wbGF0aW5nLCBzaW1pbGFyIHRvIEpvaG4gUmVzaWcncyBpbXBsZW1lbnRhdGlvbi4KLy8gVW5kZXJzY29yZSB0ZW1wbGF0aW5nIGhhbmRsZXMgYXJiaXRyYXJ5IGRlbGltaXRlcnMsIHByZXNlcnZlcyB3aGl0ZXNwYWNlLAovLyBhbmQgY29ycmVjdGx5IGVzY2FwZXMgcXVvdGVzIHdpdGhpbiBpbnRlcnBvbGF0ZWQgY29kZS4KLy8gTkI6IGBvbGRTZXR0aW5nc2Agb25seSBleGlzdHMgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LgpfLnRlbXBsYXRlPWZ1bmN0aW9uKHRleHQsc2V0dGluZ3Msb2xkU2V0dGluZ3Mpe2lmKCFzZXR0aW5ncyYmb2xkU2V0dGluZ3Mpc2V0dGluZ3M9b2xkU2V0dGluZ3M7c2V0dGluZ3M9Xy5kZWZhdWx0cyh7fSxzZXR0aW5ncyxfLnRlbXBsYXRlU2V0dGluZ3MpOy8vIENvbWJpbmUgZGVsaW1pdGVycyBpbnRvIG9uZSByZWd1bGFyIGV4cHJlc3Npb24gdmlhIGFsdGVybmF0aW9uLgp2YXIgbWF0Y2hlcj1SZWdFeHAoWyhzZXR0aW5ncy5lc2NhcGV8fG5vTWF0Y2gpLnNvdXJjZSwoc2V0dGluZ3MuaW50ZXJwb2xhdGV8fG5vTWF0Y2gpLnNvdXJjZSwoc2V0dGluZ3MuZXZhbHVhdGV8fG5vTWF0Y2gpLnNvdXJjZV0uam9pbignfCcpKyd8JCcsJ2cnKTsvLyBDb21waWxlIHRoZSB0ZW1wbGF0ZSBzb3VyY2UsIGVzY2FwaW5nIHN0cmluZyBsaXRlcmFscyBhcHByb3ByaWF0ZWx5Lgp2YXIgaW5kZXg9MDt2YXIgc291cmNlPSJfX3ArPSciO3RleHQucmVwbGFjZShtYXRjaGVyLGZ1bmN0aW9uKG1hdGNoLGVzY2FwZSxpbnRlcnBvbGF0ZSxldmFsdWF0ZSxvZmZzZXQpe3NvdXJjZSs9dGV4dC5zbGljZShpbmRleCxvZmZzZXQpLnJlcGxhY2UoZXNjYXBlUmVnRXhwLGVzY2FwZUNoYXIpO2luZGV4PW9mZnNldCttYXRjaC5sZW5ndGg7aWYoZXNjYXBlKXtzb3VyY2UrPSInK1xuKChfX3Q9KCIrZXNjYXBlKyIpKT09bnVsbD8nJzpfLmVzY2FwZShfX3QpKStcbiciO31lbHNlIGlmKGludGVycG9sYXRlKXtzb3VyY2UrPSInK1xuKChfX3Q9KCIraW50ZXJwb2xhdGUrIikpPT1udWxsPycnOl9fdCkrXG4nIjt9ZWxzZSBpZihldmFsdWF0ZSl7c291cmNlKz0iJztcbiIrZXZhbHVhdGUrIlxuX19wKz0nIjt9Ly8gQWRvYmUgVk1zIG5lZWQgdGhlIG1hdGNoIHJldHVybmVkIHRvIHByb2R1Y2UgdGhlIGNvcnJlY3Qgb2Zmc2V0LgpyZXR1cm4gbWF0Y2g7fSk7c291cmNlKz0iJztcbiI7Ly8gSWYgYSB2YXJpYWJsZSBpcyBub3Qgc3BlY2lmaWVkLCBwbGFjZSBkYXRhIHZhbHVlcyBpbiBsb2NhbCBzY29wZS4KaWYoIXNldHRpbmdzLnZhcmlhYmxlKXNvdXJjZT0nd2l0aChvYmp8fHt9KXtcbicrc291cmNlKyd9XG4nO3NvdXJjZT0idmFyIF9fdCxfX3A9JycsX19qPUFycmF5LnByb3RvdHlwZS5qb2luLCIrInByaW50PWZ1bmN0aW9uKCl7X19wKz1fX2ouY2FsbChhcmd1bWVudHMsJycpO307XG4iK3NvdXJjZSsncmV0dXJuIF9fcDtcbic7dmFyIHJlbmRlcjt0cnl7cmVuZGVyPW5ldyBGdW5jdGlvbihzZXR0aW5ncy52YXJpYWJsZXx8J29iaicsJ18nLHNvdXJjZSk7fWNhdGNoKGUpe2Uuc291cmNlPXNvdXJjZTt0aHJvdyBlO312YXIgdGVtcGxhdGU9ZnVuY3Rpb24gdGVtcGxhdGUoZGF0YSl7cmV0dXJuIHJlbmRlci5jYWxsKHRoaXMsZGF0YSxfKTt9Oy8vIFByb3ZpZGUgdGhlIGNvbXBpbGVkIHNvdXJjZSBhcyBhIGNvbnZlbmllbmNlIGZvciBwcmVjb21waWxhdGlvbi4KdmFyIGFyZ3VtZW50PXNldHRpbmdzLnZhcmlhYmxlfHwnb2JqJzt0ZW1wbGF0ZS5zb3VyY2U9J2Z1bmN0aW9uKCcrYXJndW1lbnQrJyl7XG4nK3NvdXJjZSsnfSc7cmV0dXJuIHRlbXBsYXRlO307Ly8gQWRkIGEgImNoYWluIiBmdW5jdGlvbi4gU3RhcnQgY2hhaW5pbmcgYSB3cmFwcGVkIFVuZGVyc2NvcmUgb2JqZWN0LgpfLmNoYWluPWZ1bmN0aW9uKG9iail7dmFyIGluc3RhbmNlPV8ob2JqKTtpbnN0YW5jZS5fY2hhaW49dHJ1ZTtyZXR1cm4gaW5zdGFuY2U7fTsvLyBPT1AKLy8gLS0tLS0tLS0tLS0tLS0tCi8vIElmIFVuZGVyc2NvcmUgaXMgY2FsbGVkIGFzIGEgZnVuY3Rpb24sIGl0IHJldHVybnMgYSB3cmFwcGVkIG9iamVjdCB0aGF0Ci8vIGNhbiBiZSB1c2VkIE9PLXN0eWxlLiBUaGlzIHdyYXBwZXIgaG9sZHMgYWx0ZXJlZCB2ZXJzaW9ucyBvZiBhbGwgdGhlCi8vIHVuZGVyc2NvcmUgZnVuY3Rpb25zLiBXcmFwcGVkIG9iamVjdHMgbWF5IGJlIGNoYWluZWQuCi8vIEhlbHBlciBmdW5jdGlvbiB0byBjb250aW51ZSBjaGFpbmluZyBpbnRlcm1lZGlhdGUgcmVzdWx0cy4KdmFyIGNoYWluUmVzdWx0PWZ1bmN0aW9uIGNoYWluUmVzdWx0KGluc3RhbmNlLG9iail7cmV0dXJuIGluc3RhbmNlLl9jaGFpbj9fKG9iaikuY2hhaW4oKTpvYmo7fTsvLyBBZGQgeW91ciBvd24gY3VzdG9tIGZ1bmN0aW9ucyB0byB0aGUgVW5kZXJzY29yZSBvYmplY3QuCl8ubWl4aW49ZnVuY3Rpb24ob2JqKXtfLmVhY2goXy5mdW5jdGlvbnMob2JqKSxmdW5jdGlvbihuYW1lKXt2YXIgZnVuYz1fW25hbWVdPW9ialtuYW1lXTtfLnByb3RvdHlwZVtuYW1lXT1mdW5jdGlvbigpe3ZhciBhcmdzPVt0aGlzLl93cmFwcGVkXTtwdXNoLmFwcGx5KGFyZ3MsYXJndW1lbnRzKTtyZXR1cm4gY2hhaW5SZXN1bHQodGhpcyxmdW5jLmFwcGx5KF8sYXJncykpO307fSk7cmV0dXJuIF87fTsvLyBBZGQgYWxsIG9mIHRoZSBVbmRlcnNjb3JlIGZ1bmN0aW9ucyB0byB0aGUgd3JhcHBlciBvYmplY3QuCl8ubWl4aW4oXyk7Ly8gQWRkIGFsbCBtdXRhdG9yIEFycmF5IGZ1bmN0aW9ucyB0byB0aGUgd3JhcHBlci4KXy5lYWNoKFsncG9wJywncHVzaCcsJ3JldmVyc2UnLCdzaGlmdCcsJ3NvcnQnLCdzcGxpY2UnLCd1bnNoaWZ0J10sZnVuY3Rpb24obmFtZSl7dmFyIG1ldGhvZD1BcnJheVByb3RvW25hbWVdO18ucHJvdG90eXBlW25hbWVdPWZ1bmN0aW9uKCl7dmFyIG9iaj10aGlzLl93cmFwcGVkO21ldGhvZC5hcHBseShvYmosYXJndW1lbnRzKTtpZigobmFtZT09PSdzaGlmdCd8fG5hbWU9PT0nc3BsaWNlJykmJm9iai5sZW5ndGg9PT0wKWRlbGV0ZSBvYmpbMF07cmV0dXJuIGNoYWluUmVzdWx0KHRoaXMsb2JqKTt9O30pOy8vIEFkZCBhbGwgYWNjZXNzb3IgQXJyYXkgZnVuY3Rpb25zIHRvIHRoZSB3cmFwcGVyLgpfLmVhY2goWydjb25jYXQnLCdqb2luJywnc2xpY2UnXSxmdW5jdGlvbihuYW1lKXt2YXIgbWV0aG9kPUFycmF5UHJvdG9bbmFtZV07Xy5wcm90b3R5cGVbbmFtZV09ZnVuY3Rpb24oKXtyZXR1cm4gY2hhaW5SZXN1bHQodGhpcyxtZXRob2QuYXBwbHkodGhpcy5fd3JhcHBlZCxhcmd1bWVudHMpKTt9O30pOy8vIEV4dHJhY3RzIHRoZSByZXN1bHQgZnJvbSBhIHdyYXBwZWQgYW5kIGNoYWluZWQgb2JqZWN0LgpfLnByb3RvdHlwZS52YWx1ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl93cmFwcGVkO307Ly8gUHJvdmlkZSB1bndyYXBwaW5nIHByb3h5IGZvciBzb21lIG1ldGhvZHMgdXNlZCBpbiBlbmdpbmUgb3BlcmF0aW9ucwovLyBzdWNoIGFzIGFyaXRobWV0aWMgYW5kIEpTT04gc3RyaW5naWZpY2F0aW9uLgpfLnByb3RvdHlwZS52YWx1ZU9mPV8ucHJvdG90eXBlLnRvSlNPTj1fLnByb3RvdHlwZS52YWx1ZTtfLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybicnK3RoaXMuX3dyYXBwZWQ7fTsvLyBBTUQgcmVnaXN0cmF0aW9uIGhhcHBlbnMgYXQgdGhlIGVuZCBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIEFNRCBsb2FkZXJzCi8vIHRoYXQgbWF5IG5vdCBlbmZvcmNlIG5leHQtdHVybiBzZW1hbnRpY3Mgb24gbW9kdWxlcy4gRXZlbiB0aG91Z2ggZ2VuZXJhbAovLyBwcmFjdGljZSBmb3IgQU1EIHJlZ2lzdHJhdGlvbiBpcyB0byBiZSBhbm9ueW1vdXMsIHVuZGVyc2NvcmUgcmVnaXN0ZXJzCi8vIGFzIGEgbmFtZWQgbW9kdWxlIGJlY2F1c2UsIGxpa2UgalF1ZXJ5LCBpdCBpcyBhIGJhc2UgbGlicmFyeSB0aGF0IGlzCi8vIHBvcHVsYXIgZW5vdWdoIHRvIGJlIGJ1bmRsZWQgaW4gYSB0aGlyZCBwYXJ0eSBsaWIsIGJ1dCBub3QgYmUgcGFydCBvZgovLyBhbiBBTUQgbG9hZCByZXF1ZXN0LiBUaG9zZSBjYXNlcyBjb3VsZCBnZW5lcmF0ZSBhbiBlcnJvciB3aGVuIGFuCi8vIGFub255bW91cyBkZWZpbmUoKSBpcyBjYWxsZWQgb3V0c2lkZSBvZiBhIGxvYWRlciByZXF1ZXN0LgppZih0eXBlb2YgZGVmaW5lPT0nZnVuY3Rpb24nJiZkZWZpbmUuYW1kKXtkZWZpbmUoJ3VuZGVyc2NvcmUnLFtdLGZ1bmN0aW9uKCl7cmV0dXJuIF87fSk7fX0pKCk7KGZ1bmN0aW9uKGdsb2JhbCxmYWN0b3J5KXsodHlwZW9mIGV4cG9ydHM9PT0idW5kZWZpbmVkIj8idW5kZWZpbmVkIjpfdHlwZW9mKGV4cG9ydHMpKT09PSdvYmplY3QnJiZ0eXBlb2YgbW9kdWxlIT09J3VuZGVmaW5lZCc/ZmFjdG9yeShleHBvcnRzKTp0eXBlb2YgZGVmaW5lPT09J2Z1bmN0aW9uJyYmZGVmaW5lLmFtZD9kZWZpbmUoWydleHBvcnRzJ10sZmFjdG9yeSk6ZmFjdG9yeShnbG9iYWwuVEhSRUU9e30pO30pKHRoaXMsZnVuY3Rpb24oZXhwb3J0cyl7J3VzZSBzdHJpY3QnOy8vIFBvbHlmaWxscwppZihOdW1iZXIuRVBTSUxPTj09PXVuZGVmaW5lZCl7TnVtYmVyLkVQU0lMT049TWF0aC5wb3coMiwtNTIpO31pZihOdW1iZXIuaXNJbnRlZ2VyPT09dW5kZWZpbmVkKXsvLyBNaXNzaW5nIGluIElFCi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL051bWJlci9pc0ludGVnZXIKTnVtYmVyLmlzSW50ZWdlcj1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIHR5cGVvZiB2YWx1ZT09PSdudW1iZXInJiZpc0Zpbml0ZSh2YWx1ZSkmJk1hdGguZmxvb3IodmFsdWUpPT09dmFsdWU7fTt9Ly8KaWYoTWF0aC5zaWduPT09dW5kZWZpbmVkKXsvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9NYXRoL3NpZ24KTWF0aC5zaWduPWZ1bmN0aW9uKHgpe3JldHVybiB4PDA/LTE6eD4wPzE6K3g7fTt9aWYoJ25hbWUnaW4gRnVuY3Rpb24ucHJvdG90eXBlPT09ZmFsc2Upey8vIE1pc3NpbmcgaW4gSUUKLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRnVuY3Rpb24vbmFtZQpPYmplY3QuZGVmaW5lUHJvcGVydHkoRnVuY3Rpb24ucHJvdG90eXBlLCduYW1lJyx7Z2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiB0aGlzLnRvU3RyaW5nKCkubWF0Y2goL15ccypmdW5jdGlvblxzKihbXlwoXHNdKikvKVsxXTt9fSk7fWlmKE9iamVjdC5hc3NpZ249PT11bmRlZmluZWQpey8vIE1pc3NpbmcgaW4gSUUKLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2Fzc2lnbgooZnVuY3Rpb24oKXtPYmplY3QuYXNzaWduPWZ1bmN0aW9uKHRhcmdldCl7aWYodGFyZ2V0PT09dW5kZWZpbmVkfHx0YXJnZXQ9PT1udWxsKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY29udmVydCB1bmRlZmluZWQgb3IgbnVsbCB0byBvYmplY3QnKTt9dmFyIG91dHB1dD1PYmplY3QodGFyZ2V0KTtmb3IodmFyIGluZGV4PTE7aW5kZXg8YXJndW1lbnRzLmxlbmd0aDtpbmRleCsrKXt2YXIgc291cmNlPWFyZ3VtZW50c1tpbmRleF07aWYoc291cmNlIT09dW5kZWZpbmVkJiZzb3VyY2UhPT1udWxsKXtmb3IodmFyIG5leHRLZXkgaW4gc291cmNlKXtpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLG5leHRLZXkpKXtvdXRwdXRbbmV4dEtleV09c291cmNlW25leHRLZXldO319fX1yZXR1cm4gb3V0cHV0O307fSkoKTt9LyoqCiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9tcmRvb2IvZXZlbnRkaXNwYXRjaGVyLmpzLwogKi9mdW5jdGlvbiBFdmVudERpc3BhdGNoZXIoKXt9T2JqZWN0LmFzc2lnbihFdmVudERpc3BhdGNoZXIucHJvdG90eXBlLHthZGRFdmVudExpc3RlbmVyOmZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXIodHlwZSxsaXN0ZW5lcil7aWYodGhpcy5fbGlzdGVuZXJzPT09dW5kZWZpbmVkKXRoaXMuX2xpc3RlbmVycz17fTt2YXIgbGlzdGVuZXJzPXRoaXMuX2xpc3RlbmVycztpZihsaXN0ZW5lcnNbdHlwZV09PT11bmRlZmluZWQpe2xpc3RlbmVyc1t0eXBlXT1bXTt9aWYobGlzdGVuZXJzW3R5cGVdLmluZGV4T2YobGlzdGVuZXIpPT09LTEpe2xpc3RlbmVyc1t0eXBlXS5wdXNoKGxpc3RlbmVyKTt9fSxoYXNFdmVudExpc3RlbmVyOmZ1bmN0aW9uIGhhc0V2ZW50TGlzdGVuZXIodHlwZSxsaXN0ZW5lcil7aWYodGhpcy5fbGlzdGVuZXJzPT09dW5kZWZpbmVkKXJldHVybiBmYWxzZTt2YXIgbGlzdGVuZXJzPXRoaXMuX2xpc3RlbmVycztyZXR1cm4gbGlzdGVuZXJzW3R5cGVdIT09dW5kZWZpbmVkJiZsaXN0ZW5lcnNbdHlwZV0uaW5kZXhPZihsaXN0ZW5lcikhPT0tMTt9LHJlbW92ZUV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24gcmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLGxpc3RlbmVyKXtpZih0aGlzLl9saXN0ZW5lcnM9PT11bmRlZmluZWQpcmV0dXJuO3ZhciBsaXN0ZW5lcnM9dGhpcy5fbGlzdGVuZXJzO3ZhciBsaXN0ZW5lckFycmF5PWxpc3RlbmVyc1t0eXBlXTtpZihsaXN0ZW5lckFycmF5IT09dW5kZWZpbmVkKXt2YXIgaW5kZXg9bGlzdGVuZXJBcnJheS5pbmRleE9mKGxpc3RlbmVyKTtpZihpbmRleCE9PS0xKXtsaXN0ZW5lckFycmF5LnNwbGljZShpbmRleCwxKTt9fX0sZGlzcGF0Y2hFdmVudDpmdW5jdGlvbiBkaXNwYXRjaEV2ZW50KGV2ZW50KXtpZih0aGlzLl9saXN0ZW5lcnM9PT11bmRlZmluZWQpcmV0dXJuO3ZhciBsaXN0ZW5lcnM9dGhpcy5fbGlzdGVuZXJzO3ZhciBsaXN0ZW5lckFycmF5PWxpc3RlbmVyc1tldmVudC50eXBlXTtpZihsaXN0ZW5lckFycmF5IT09dW5kZWZpbmVkKXtldmVudC50YXJnZXQ9dGhpczt2YXIgYXJyYXk9bGlzdGVuZXJBcnJheS5zbGljZSgwKTtmb3IodmFyIGk9MCxsPWFycmF5Lmxlbmd0aDtpPGw7aSsrKXthcnJheVtpXS5jYWxsKHRoaXMsZXZlbnQpO319fX0pO3ZhciBSRVZJU0lPTj0nODknO3ZhciBDdWxsRmFjZU5vbmU9MDt2YXIgQ3VsbEZhY2VCYWNrPTE7dmFyIEN1bGxGYWNlRnJvbnQ9Mjt2YXIgRnJvbnRGYWNlRGlyZWN0aW9uQ1c9MDt2YXIgUENGU2hhZG93TWFwPTE7dmFyIFBDRlNvZnRTaGFkb3dNYXA9Mjt2YXIgRnJvbnRTaWRlPTA7dmFyIEJhY2tTaWRlPTE7dmFyIERvdWJsZVNpZGU9Mjt2YXIgRmxhdFNoYWRpbmc9MTt2YXIgTm9Db2xvcnM9MDt2YXIgTm9CbGVuZGluZz0wO3ZhciBOb3JtYWxCbGVuZGluZz0xO3ZhciBBZGRpdGl2ZUJsZW5kaW5nPTI7dmFyIFN1YnRyYWN0aXZlQmxlbmRpbmc9Mzt2YXIgTXVsdGlwbHlCbGVuZGluZz00O3ZhciBDdXN0b21CbGVuZGluZz01O3ZhciBBZGRFcXVhdGlvbj0xMDA7dmFyIFN1YnRyYWN0RXF1YXRpb249MTAxO3ZhciBSZXZlcnNlU3VidHJhY3RFcXVhdGlvbj0xMDI7dmFyIE1pbkVxdWF0aW9uPTEwMzt2YXIgTWF4RXF1YXRpb249MTA0O3ZhciBaZXJvRmFjdG9yPTIwMDt2YXIgT25lRmFjdG9yPTIwMTt2YXIgU3JjQ29sb3JGYWN0b3I9MjAyO3ZhciBPbmVNaW51c1NyY0NvbG9yRmFjdG9yPTIwMzt2YXIgU3JjQWxwaGFGYWN0b3I9MjA0O3ZhciBPbmVNaW51c1NyY0FscGhhRmFjdG9yPTIwNTt2YXIgRHN0QWxwaGFGYWN0b3I9MjA2O3ZhciBPbmVNaW51c0RzdEFscGhhRmFjdG9yPTIwNzt2YXIgRHN0Q29sb3JGYWN0b3I9MjA4O3ZhciBPbmVNaW51c0RzdENvbG9yRmFjdG9yPTIwOTt2YXIgU3JjQWxwaGFTYXR1cmF0ZUZhY3Rvcj0yMTA7dmFyIE5ldmVyRGVwdGg9MDt2YXIgQWx3YXlzRGVwdGg9MTt2YXIgTGVzc0RlcHRoPTI7dmFyIExlc3NFcXVhbERlcHRoPTM7dmFyIEVxdWFsRGVwdGg9NDt2YXIgR3JlYXRlckVxdWFsRGVwdGg9NTt2YXIgR3JlYXRlckRlcHRoPTY7dmFyIE5vdEVxdWFsRGVwdGg9Nzt2YXIgTXVsdGlwbHlPcGVyYXRpb249MDt2YXIgTWl4T3BlcmF0aW9uPTE7dmFyIEFkZE9wZXJhdGlvbj0yO3ZhciBOb1RvbmVNYXBwaW5nPTA7dmFyIExpbmVhclRvbmVNYXBwaW5nPTE7dmFyIFJlaW5oYXJkVG9uZU1hcHBpbmc9Mjt2YXIgVW5jaGFydGVkMlRvbmVNYXBwaW5nPTM7dmFyIENpbmVvblRvbmVNYXBwaW5nPTQ7dmFyIFVWTWFwcGluZz0zMDA7dmFyIEN1YmVSZWZsZWN0aW9uTWFwcGluZz0zMDE7dmFyIEN1YmVSZWZyYWN0aW9uTWFwcGluZz0zMDI7dmFyIEVxdWlyZWN0YW5ndWxhclJlZmxlY3Rpb25NYXBwaW5nPTMwMzt2YXIgRXF1aXJlY3Rhbmd1bGFyUmVmcmFjdGlvbk1hcHBpbmc9MzA0O3ZhciBTcGhlcmljYWxSZWZsZWN0aW9uTWFwcGluZz0zMDU7dmFyIEN1YmVVVlJlZmxlY3Rpb25NYXBwaW5nPTMwNjt2YXIgQ3ViZVVWUmVmcmFjdGlvbk1hcHBpbmc9MzA3O3ZhciBSZXBlYXRXcmFwcGluZz0xMDAwO3ZhciBDbGFtcFRvRWRnZVdyYXBwaW5nPTEwMDE7dmFyIE1pcnJvcmVkUmVwZWF0V3JhcHBpbmc9MTAwMjt2YXIgTmVhcmVzdEZpbHRlcj0xMDAzO3ZhciBOZWFyZXN0TWlwTWFwTmVhcmVzdEZpbHRlcj0xMDA0O3ZhciBOZWFyZXN0TWlwTWFwTGluZWFyRmlsdGVyPTEwMDU7dmFyIExpbmVhckZpbHRlcj0xMDA2O3ZhciBMaW5lYXJNaXBNYXBOZWFyZXN0RmlsdGVyPTEwMDc7dmFyIExpbmVhck1pcE1hcExpbmVhckZpbHRlcj0xMDA4O3ZhciBVbnNpZ25lZEJ5dGVUeXBlPTEwMDk7dmFyIEJ5dGVUeXBlPTEwMTA7dmFyIFNob3J0VHlwZT0xMDExO3ZhciBVbnNpZ25lZFNob3J0VHlwZT0xMDEyO3ZhciBJbnRUeXBlPTEwMTM7dmFyIFVuc2lnbmVkSW50VHlwZT0xMDE0O3ZhciBGbG9hdFR5cGU9MTAxNTt2YXIgSGFsZkZsb2F0VHlwZT0xMDE2O3ZhciBVbnNpZ25lZFNob3J0NDQ0NFR5cGU9MTAxNzt2YXIgVW5zaWduZWRTaG9ydDU1NTFUeXBlPTEwMTg7dmFyIFVuc2lnbmVkU2hvcnQ1NjVUeXBlPTEwMTk7dmFyIFVuc2lnbmVkSW50MjQ4VHlwZT0xMDIwO3ZhciBBbHBoYUZvcm1hdD0xMDIxO3ZhciBSR0JGb3JtYXQ9MTAyMjt2YXIgUkdCQUZvcm1hdD0xMDIzO3ZhciBMdW1pbmFuY2VGb3JtYXQ9MTAyNDt2YXIgTHVtaW5hbmNlQWxwaGFGb3JtYXQ9MTAyNTt2YXIgRGVwdGhGb3JtYXQ9MTAyNjt2YXIgRGVwdGhTdGVuY2lsRm9ybWF0PTEwMjc7dmFyIFJHQl9TM1RDX0RYVDFfRm9ybWF0PTIwMDE7dmFyIFJHQkFfUzNUQ19EWFQxX0Zvcm1hdD0yMDAyO3ZhciBSR0JBX1MzVENfRFhUM19Gb3JtYXQ9MjAwMzt2YXIgUkdCQV9TM1RDX0RYVDVfRm9ybWF0PTIwMDQ7dmFyIFJHQl9QVlJUQ180QlBQVjFfRm9ybWF0PTIxMDA7dmFyIFJHQl9QVlJUQ18yQlBQVjFfRm9ybWF0PTIxMDE7dmFyIFJHQkFfUFZSVENfNEJQUFYxX0Zvcm1hdD0yMTAyO3ZhciBSR0JBX1BWUlRDXzJCUFBWMV9Gb3JtYXQ9MjEwMzt2YXIgUkdCX0VUQzFfRm9ybWF0PTIxNTE7dmFyIFRyaWFuZ2xlc0RyYXdNb2RlPTA7dmFyIFRyaWFuZ2xlU3RyaXBEcmF3TW9kZT0xO3ZhciBUcmlhbmdsZUZhbkRyYXdNb2RlPTI7dmFyIExpbmVhckVuY29kaW5nPTMwMDA7dmFyIHNSR0JFbmNvZGluZz0zMDAxO3ZhciBHYW1tYUVuY29kaW5nPTMwMDc7dmFyIFJHQkVFbmNvZGluZz0zMDAyO3ZhciBSR0JNN0VuY29kaW5nPTMwMDQ7dmFyIFJHQk0xNkVuY29kaW5nPTMwMDU7dmFyIFJHQkRFbmNvZGluZz0zMDA2O3ZhciBCYXNpY0RlcHRoUGFja2luZz0zMjAwO3ZhciBSR0JBRGVwdGhQYWNraW5nPTMyMDE7LyoqCiAqIEBhdXRob3IgYWx0ZXJlZHEgLyBodHRwOi8vYWx0ZXJlZHF1YWxpYS5jb20vCiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vCiAqL3ZhciBfTWF0aD17REVHMlJBRDpNYXRoLlBJLzE4MCxSQUQyREVHOjE4MC9NYXRoLlBJLGdlbmVyYXRlVVVJRDpmdW5jdGlvbigpey8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTA1MDM0L2hvdy10by1jcmVhdGUtYS1ndWlkLXV1aWQtaW4tamF2YXNjcmlwdC8yMTk2MzEzNiMyMTk2MzEzNgp2YXIgbHV0PVtdO2Zvcih2YXIgaT0wO2k8MjU2O2krKyl7bHV0W2ldPShpPDE2PycwJzonJykraS50b1N0cmluZygxNikudG9VcHBlckNhc2UoKTt9cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGQwPU1hdGgucmFuZG9tKCkqMHhmZmZmZmZmZnwwO3ZhciBkMT1NYXRoLnJhbmRvbSgpKjB4ZmZmZmZmZmZ8MDt2YXIgZDI9TWF0aC5yYW5kb20oKSoweGZmZmZmZmZmfDA7dmFyIGQzPU1hdGgucmFuZG9tKCkqMHhmZmZmZmZmZnwwO3JldHVybiBsdXRbZDAmMHhmZl0rbHV0W2QwPj44JjB4ZmZdK2x1dFtkMD4+MTYmMHhmZl0rbHV0W2QwPj4yNCYweGZmXSsnLScrbHV0W2QxJjB4ZmZdK2x1dFtkMT4+OCYweGZmXSsnLScrbHV0W2QxPj4xNiYweDBmfDB4NDBdK2x1dFtkMT4+MjQmMHhmZl0rJy0nK2x1dFtkMiYweDNmfDB4ODBdK2x1dFtkMj4+OCYweGZmXSsnLScrbHV0W2QyPj4xNiYweGZmXStsdXRbZDI+PjI0JjB4ZmZdK2x1dFtkMyYweGZmXStsdXRbZDM+PjgmMHhmZl0rbHV0W2QzPj4xNiYweGZmXStsdXRbZDM+PjI0JjB4ZmZdO307fSgpLGNsYW1wOmZ1bmN0aW9uIGNsYW1wKHZhbHVlLG1pbixtYXgpe3JldHVybiBNYXRoLm1heChtaW4sTWF0aC5taW4obWF4LHZhbHVlKSk7fSwvLyBjb21wdXRlIGV1Y2xpZGlhbiBtb2R1bG8gb2YgbSAlIG4KLy8gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTW9kdWxvX29wZXJhdGlvbgpldWNsaWRlYW5Nb2R1bG86ZnVuY3Rpb24gZXVjbGlkZWFuTW9kdWxvKG4sbSl7cmV0dXJuKG4lbSttKSVtO30sLy8gTGluZWFyIG1hcHBpbmcgZnJvbSByYW5nZSA8YTEsIGEyPiB0byByYW5nZSA8YjEsIGIyPgptYXBMaW5lYXI6ZnVuY3Rpb24gbWFwTGluZWFyKHgsYTEsYTIsYjEsYjIpe3JldHVybiBiMSsoeC1hMSkqKGIyLWIxKS8oYTItYTEpO30sLy8gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTGluZWFyX2ludGVycG9sYXRpb24KbGVycDpmdW5jdGlvbiBsZXJwKHgseSx0KXtyZXR1cm4oMS10KSp4K3QqeTt9LC8vIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvU21vb3Roc3RlcApzbW9vdGhzdGVwOmZ1bmN0aW9uIHNtb290aHN0ZXAoeCxtaW4sbWF4KXtpZih4PD1taW4pcmV0dXJuIDA7aWYoeD49bWF4KXJldHVybiAxO3g9KHgtbWluKS8obWF4LW1pbik7cmV0dXJuIHgqeCooMy0yKngpO30sc21vb3RoZXJzdGVwOmZ1bmN0aW9uIHNtb290aGVyc3RlcCh4LG1pbixtYXgpe2lmKHg8PW1pbilyZXR1cm4gMDtpZih4Pj1tYXgpcmV0dXJuIDE7eD0oeC1taW4pLyhtYXgtbWluKTtyZXR1cm4geCp4KngqKHgqKHgqNi0xNSkrMTApO30sLy8gUmFuZG9tIGludGVnZXIgZnJvbSA8bG93LCBoaWdoPiBpbnRlcnZhbApyYW5kSW50OmZ1bmN0aW9uIHJhbmRJbnQobG93LGhpZ2gpe3JldHVybiBsb3crTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKihoaWdoLWxvdysxKSk7fSwvLyBSYW5kb20gZmxvYXQgZnJvbSA8bG93LCBoaWdoPiBpbnRlcnZhbApyYW5kRmxvYXQ6ZnVuY3Rpb24gcmFuZEZsb2F0KGxvdyxoaWdoKXtyZXR1cm4gbG93K01hdGgucmFuZG9tKCkqKGhpZ2gtbG93KTt9LC8vIFJhbmRvbSBmbG9hdCBmcm9tIDwtcmFuZ2UvMiwgcmFuZ2UvMj4gaW50ZXJ2YWwKcmFuZEZsb2F0U3ByZWFkOmZ1bmN0aW9uIHJhbmRGbG9hdFNwcmVhZChyYW5nZSl7cmV0dXJuIHJhbmdlKigwLjUtTWF0aC5yYW5kb20oKSk7fSxkZWdUb1JhZDpmdW5jdGlvbiBkZWdUb1JhZChkZWdyZWVzKXtyZXR1cm4gZGVncmVlcypfTWF0aC5ERUcyUkFEO30scmFkVG9EZWc6ZnVuY3Rpb24gcmFkVG9EZWcocmFkaWFucyl7cmV0dXJuIHJhZGlhbnMqX01hdGguUkFEMkRFRzt9LGlzUG93ZXJPZlR3bzpmdW5jdGlvbiBpc1Bvd2VyT2ZUd28odmFsdWUpe3JldHVybih2YWx1ZSZ2YWx1ZS0xKT09PTAmJnZhbHVlIT09MDt9LGNlaWxQb3dlck9mVHdvOmZ1bmN0aW9uIGNlaWxQb3dlck9mVHdvKHZhbHVlKXtyZXR1cm4gTWF0aC5wb3coMixNYXRoLmNlaWwoTWF0aC5sb2codmFsdWUpL01hdGguTE4yKSk7fSxmbG9vclBvd2VyT2ZUd286ZnVuY3Rpb24gZmxvb3JQb3dlck9mVHdvKHZhbHVlKXtyZXR1cm4gTWF0aC5wb3coMixNYXRoLmZsb29yKE1hdGgubG9nKHZhbHVlKS9NYXRoLkxOMikpO319Oy8qKgogKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tLwogKiBAYXV0aG9yIHBoaWxvZ2IgLyBodHRwOi8vYmxvZy50aGVqaXQub3JnLwogKiBAYXV0aG9yIGVncmFldGhlciAvIGh0dHA6Ly9lZ3JhZXRoZXIuY29tLwogKiBAYXV0aG9yIHp6ODUgLyBodHRwOi8vd3d3LmxhYjRnYW1lcy5uZXQveno4NS9ibG9nCiAqL2Z1bmN0aW9uIFZlY3RvcjIoeCx5KXt0aGlzLng9eHx8MDt0aGlzLnk9eXx8MDt9T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoVmVjdG9yMi5wcm90b3R5cGUseyJ3aWR0aCI6e2dldDpmdW5jdGlvbiBnZXQoKXtyZXR1cm4gdGhpcy54O30sc2V0OmZ1bmN0aW9uIHNldCh2YWx1ZSl7dGhpcy54PXZhbHVlO319LCJoZWlnaHQiOntnZXQ6ZnVuY3Rpb24gZ2V0KCl7cmV0dXJuIHRoaXMueTt9LHNldDpmdW5jdGlvbiBzZXQodmFsdWUpe3RoaXMueT12YWx1ZTt9fX0pO09iamVjdC5hc3NpZ24oVmVjdG9yMi5wcm90b3R5cGUse2lzVmVjdG9yMjp0cnVlLHNldDpmdW5jdGlvbiBzZXQoeCx5KXt0aGlzLng9eDt0aGlzLnk9eTtyZXR1cm4gdGhpczt9LHNldFNjYWxhcjpmdW5jdGlvbiBzZXRTY2FsYXIoc2NhbGFyKXt0aGlzLng9c2NhbGFyO3RoaXMueT1zY2FsYXI7cmV0dXJuIHRoaXM7fSxzZXRYOmZ1bmN0aW9uIHNldFgoeCl7dGhpcy54PXg7cmV0dXJuIHRoaXM7fSxzZXRZOmZ1bmN0aW9uIHNldFkoeSl7dGhpcy55PXk7cmV0dXJuIHRoaXM7fSxzZXRDb21wb25lbnQ6ZnVuY3Rpb24gc2V0Q29tcG9uZW50KGluZGV4LHZhbHVlKXtzd2l0Y2goaW5kZXgpe2Nhc2UgMDp0aGlzLng9dmFsdWU7YnJlYWs7Y2FzZSAxOnRoaXMueT12YWx1ZTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcignaW5kZXggaXMgb3V0IG9mIHJhbmdlOiAnK2luZGV4KTt9cmV0dXJuIHRoaXM7fSxnZXRDb21wb25lbnQ6ZnVuY3Rpb24gZ2V0Q29tcG9uZW50KGluZGV4KXtzd2l0Y2goaW5kZXgpe2Nhc2UgMDpyZXR1cm4gdGhpcy54O2Nhc2UgMTpyZXR1cm4gdGhpcy55O2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCdpbmRleCBpcyBvdXQgb2YgcmFuZ2U6ICcraW5kZXgpO319LGNsb25lOmZ1bmN0aW9uIGNsb25lKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMueCx0aGlzLnkpO30sY29weTpmdW5jdGlvbiBjb3B5KHYpe3RoaXMueD12Lng7dGhpcy55PXYueTtyZXR1cm4gdGhpczt9LGFkZDpmdW5jdGlvbiBhZGQodix3KXtpZih3IT09dW5kZWZpbmVkKXtjb25zb2xlLndhcm4oJ1RIUkVFLlZlY3RvcjI6IC5hZGQoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5hZGRWZWN0b3JzKCBhLCBiICkgaW5zdGVhZC4nKTtyZXR1cm4gdGhpcy5hZGRWZWN0b3JzKHYsdyk7fXRoaXMueCs9di54O3RoaXMueSs9di55O3JldHVybiB0aGlzO30sYWRkU2NhbGFyOmZ1bmN0aW9uIGFkZFNjYWxhcihzKXt0aGlzLngrPXM7dGhpcy55Kz1zO3JldHVybiB0aGlzO30sYWRkVmVjdG9yczpmdW5jdGlvbiBhZGRWZWN0b3JzKGEsYil7dGhpcy54PWEueCtiLng7dGhpcy55PWEueStiLnk7cmV0dXJuIHRoaXM7fSxhZGRTY2FsZWRWZWN0b3I6ZnVuY3Rpb24gYWRkU2NhbGVkVmVjdG9yKHYscyl7dGhpcy54Kz12Lngqczt0aGlzLnkrPXYueSpzO3JldHVybiB0aGlzO30sc3ViOmZ1bmN0aW9uIHN1Yih2LHcpe2lmKHchPT11bmRlZmluZWQpe2NvbnNvbGUud2FybignVEhSRUUuVmVjdG9yMjogLnN1YigpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLnN1YlZlY3RvcnMoIGEsIGIgKSBpbnN0ZWFkLicpO3JldHVybiB0aGlzLnN1YlZlY3RvcnModix3KTt9dGhpcy54LT12Lng7dGhpcy55LT12Lnk7cmV0dXJuIHRoaXM7fSxzdWJTY2FsYXI6ZnVuY3Rpb24gc3ViU2NhbGFyKHMpe3RoaXMueC09czt0aGlzLnktPXM7cmV0dXJuIHRoaXM7fSxzdWJWZWN0b3JzOmZ1bmN0aW9uIHN1YlZlY3RvcnMoYSxiKXt0aGlzLng9YS54LWIueDt0aGlzLnk9YS55LWIueTtyZXR1cm4gdGhpczt9LG11bHRpcGx5OmZ1bmN0aW9uIG11bHRpcGx5KHYpe3RoaXMueCo9di54O3RoaXMueSo9di55O3JldHVybiB0aGlzO30sbXVsdGlwbHlTY2FsYXI6ZnVuY3Rpb24gbXVsdGlwbHlTY2FsYXIoc2NhbGFyKXt0aGlzLngqPXNjYWxhcjt0aGlzLnkqPXNjYWxhcjtyZXR1cm4gdGhpczt9LGRpdmlkZTpmdW5jdGlvbiBkaXZpZGUodil7dGhpcy54Lz12Lng7dGhpcy55Lz12Lnk7cmV0dXJuIHRoaXM7fSxkaXZpZGVTY2FsYXI6ZnVuY3Rpb24gZGl2aWRlU2NhbGFyKHNjYWxhcil7cmV0dXJuIHRoaXMubXVsdGlwbHlTY2FsYXIoMS9zY2FsYXIpO30sYXBwbHlNYXRyaXgzOmZ1bmN0aW9uIGFwcGx5TWF0cml4MyhtKXt2YXIgeD10aGlzLngseT10aGlzLnk7dmFyIGU9bS5lbGVtZW50czt0aGlzLng9ZVswXSp4K2VbM10qeStlWzZdO3RoaXMueT1lWzFdKngrZVs0XSp5K2VbN107cmV0dXJuIHRoaXM7fSxtaW46ZnVuY3Rpb24gbWluKHYpe3RoaXMueD1NYXRoLm1pbih0aGlzLngsdi54KTt0aGlzLnk9TWF0aC5taW4odGhpcy55LHYueSk7cmV0dXJuIHRoaXM7fSxtYXg6ZnVuY3Rpb24gbWF4KHYpe3RoaXMueD1NYXRoLm1heCh0aGlzLngsdi54KTt0aGlzLnk9TWF0aC5tYXgodGhpcy55LHYueSk7cmV0dXJuIHRoaXM7fSxjbGFtcDpmdW5jdGlvbiBjbGFtcChtaW4sbWF4KXsvLyBhc3N1bWVzIG1pbiA8IG1heCwgY29tcG9uZW50d2lzZQp0aGlzLng9TWF0aC5tYXgobWluLngsTWF0aC5taW4obWF4LngsdGhpcy54KSk7dGhpcy55PU1hdGgubWF4KG1pbi55LE1hdGgubWluKG1heC55LHRoaXMueSkpO3JldHVybiB0aGlzO30sY2xhbXBTY2FsYXI6ZnVuY3Rpb24oKXt2YXIgbWluPW5ldyBWZWN0b3IyKCk7dmFyIG1heD1uZXcgVmVjdG9yMigpO3JldHVybiBmdW5jdGlvbiBjbGFtcFNjYWxhcihtaW5WYWwsbWF4VmFsKXttaW4uc2V0KG1pblZhbCxtaW5WYWwpO21heC5zZXQobWF4VmFsLG1heFZhbCk7cmV0dXJuIHRoaXMuY2xhbXAobWluLG1heCk7fTt9KCksY2xhbXBMZW5ndGg6ZnVuY3Rpb24gY2xhbXBMZW5ndGgobWluLG1heCl7dmFyIGxlbmd0aD10aGlzLmxlbmd0aCgpO3JldHVybiB0aGlzLmRpdmlkZVNjYWxhcihsZW5ndGh8fDEpLm11bHRpcGx5U2NhbGFyKE1hdGgubWF4KG1pbixNYXRoLm1pbihtYXgsbGVuZ3RoKSkpO30sZmxvb3I6ZnVuY3Rpb24gZmxvb3IoKXt0aGlzLng9TWF0aC5mbG9vcih0aGlzLngpO3RoaXMueT1NYXRoLmZsb29yKHRoaXMueSk7cmV0dXJuIHRoaXM7fSxjZWlsOmZ1bmN0aW9uIGNlaWwoKXt0aGlzLng9TWF0aC5jZWlsKHRoaXMueCk7dGhpcy55PU1hdGguY2VpbCh0aGlzLnkpO3JldHVybiB0aGlzO30scm91bmQ6ZnVuY3Rpb24gcm91bmQoKXt0aGlzLng9TWF0aC5yb3VuZCh0aGlzLngpO3RoaXMueT1NYXRoLnJvdW5kKHRoaXMueSk7cmV0dXJuIHRoaXM7fSxyb3VuZFRvWmVybzpmdW5jdGlvbiByb3VuZFRvWmVybygpe3RoaXMueD10aGlzLng8MD9NYXRoLmNlaWwodGhpcy54KTpNYXRoLmZsb29yKHRoaXMueCk7dGhpcy55PXRoaXMueTwwP01hdGguY2VpbCh0aGlzLnkpOk1hdGguZmxvb3IodGhpcy55KTtyZXR1cm4gdGhpczt9LG5lZ2F0ZTpmdW5jdGlvbiBuZWdhdGUoKXt0aGlzLng9LXRoaXMueDt0aGlzLnk9LXRoaXMueTtyZXR1cm4gdGhpczt9LGRvdDpmdW5jdGlvbiBkb3Qodil7cmV0dXJuIHRoaXMueCp2LngrdGhpcy55KnYueTt9LGxlbmd0aFNxOmZ1bmN0aW9uIGxlbmd0aFNxKCl7cmV0dXJuIHRoaXMueCp0aGlzLngrdGhpcy55KnRoaXMueTt9LGxlbmd0aDpmdW5jdGlvbiBsZW5ndGgoKXtyZXR1cm4gTWF0aC5zcXJ0KHRoaXMueCp0aGlzLngrdGhpcy55KnRoaXMueSk7fSxtYW5oYXR0YW5MZW5ndGg6ZnVuY3Rpb24gbWFuaGF0dGFuTGVuZ3RoKCl7cmV0dXJuIE1hdGguYWJzKHRoaXMueCkrTWF0aC5hYnModGhpcy55KTt9LG5vcm1hbGl6ZTpmdW5jdGlvbiBub3JtYWxpemUoKXtyZXR1cm4gdGhpcy5kaXZpZGVTY2FsYXIodGhpcy5sZW5ndGgoKXx8MSk7fSxhbmdsZTpmdW5jdGlvbiBhbmdsZSgpey8vIGNvbXB1dGVzIHRoZSBhbmdsZSBpbiByYWRpYW5zIHdpdGggcmVzcGVjdCB0byB0aGUgcG9zaXRpdmUgeC1heGlzCnZhciBhbmdsZT1NYXRoLmF0YW4yKHRoaXMueSx0aGlzLngpO2lmKGFuZ2xlPDApYW5nbGUrPTIqTWF0aC5QSTtyZXR1cm4gYW5nbGU7fSxkaXN0YW5jZVRvOmZ1bmN0aW9uIGRpc3RhbmNlVG8odil7cmV0dXJuIE1hdGguc3FydCh0aGlzLmRpc3RhbmNlVG9TcXVhcmVkKHYpKTt9LGRpc3RhbmNlVG9TcXVhcmVkOmZ1bmN0aW9uIGRpc3RhbmNlVG9TcXVhcmVkKHYpe3ZhciBkeD10aGlzLngtdi54LGR5PXRoaXMueS12Lnk7cmV0dXJuIGR4KmR4K2R5KmR5O30sbWFuaGF0dGFuRGlzdGFuY2VUbzpmdW5jdGlvbiBtYW5oYXR0YW5EaXN0YW5jZVRvKHYpe3JldHVybiBNYXRoLmFicyh0aGlzLngtdi54KStNYXRoLmFicyh0aGlzLnktdi55KTt9LHNldExlbmd0aDpmdW5jdGlvbiBzZXRMZW5ndGgobGVuZ3RoKXtyZXR1cm4gdGhpcy5ub3JtYWxpemUoKS5tdWx0aXBseVNjYWxhcihsZW5ndGgpO30sbGVycDpmdW5jdGlvbiBsZXJwKHYsYWxwaGEpe3RoaXMueCs9KHYueC10aGlzLngpKmFscGhhO3RoaXMueSs9KHYueS10aGlzLnkpKmFscGhhO3JldHVybiB0aGlzO30sbGVycFZlY3RvcnM6ZnVuY3Rpb24gbGVycFZlY3RvcnModjEsdjIsYWxwaGEpe3JldHVybiB0aGlzLnN1YlZlY3RvcnModjIsdjEpLm11bHRpcGx5U2NhbGFyKGFscGhhKS5hZGQodjEpO30sZXF1YWxzOmZ1bmN0aW9uIGVxdWFscyh2KXtyZXR1cm4gdi54PT09dGhpcy54JiZ2Lnk9PT10aGlzLnk7fSxmcm9tQXJyYXk6ZnVuY3Rpb24gZnJvbUFycmF5KGFycmF5LG9mZnNldCl7aWYob2Zmc2V0PT09dW5kZWZpbmVkKW9mZnNldD0wO3RoaXMueD1hcnJheVtvZmZzZXRdO3RoaXMueT1hcnJheVtvZmZzZXQrMV07cmV0dXJuIHRoaXM7fSx0b0FycmF5OmZ1bmN0aW9uIHRvQXJyYXkoYXJyYXksb2Zmc2V0KXtpZihhcnJheT09PXVuZGVmaW5lZClhcnJheT1bXTtpZihvZmZzZXQ9PT11bmRlZmluZWQpb2Zmc2V0PTA7YXJyYXlbb2Zmc2V0XT10aGlzLng7YXJyYXlbb2Zmc2V0KzFdPXRoaXMueTtyZXR1cm4gYXJyYXk7fSxmcm9tQnVmZmVyQXR0cmlidXRlOmZ1bmN0aW9uIGZyb21CdWZmZXJBdHRyaWJ1dGUoYXR0cmlidXRlLGluZGV4LG9mZnNldCl7aWYob2Zmc2V0IT09dW5kZWZpbmVkKXtjb25zb2xlLndhcm4oJ1RIUkVFLlZlY3RvcjI6IG9mZnNldCBoYXMgYmVlbiByZW1vdmVkIGZyb20gLmZyb21CdWZmZXJBdHRyaWJ1dGUoKS4nKTt9dGhpcy54PWF0dHJpYnV0ZS5nZXRYKGluZGV4KTt0aGlzLnk9YXR0cmlidXRlLmdldFkoaW5kZXgpO3JldHVybiB0aGlzO30scm90YXRlQXJvdW5kOmZ1bmN0aW9uIHJvdGF0ZUFyb3VuZChjZW50ZXIsYW5nbGUpe3ZhciBjPU1hdGguY29zKGFuZ2xlKSxzPU1hdGguc2luKGFuZ2xlKTt2YXIgeD10aGlzLngtY2VudGVyLng7dmFyIHk9dGhpcy55LWNlbnRlci55O3RoaXMueD14KmMteSpzK2NlbnRlci54O3RoaXMueT14KnMreSpjK2NlbnRlci55O3JldHVybiB0aGlzO319KTsvKioKICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS8KICogQGF1dGhvciBzdXBlcmVnZ2JlcnQgLyBodHRwOi8vd3d3LnBhdWxicnVudC5jby51ay8KICogQGF1dGhvciBwaGlsb2diIC8gaHR0cDovL2Jsb2cudGhlaml0Lm9yZy8KICogQGF1dGhvciBqb3JkaV9yb3MgLyBodHRwOi8vcGxhdHRzb2Z0LmNvbQogKiBAYXV0aG9yIEQxcGxvMWQgLyBodHRwOi8vZ2l0aHViLmNvbS9EMXBsbzFkCiAqIEBhdXRob3IgYWx0ZXJlZHEgLyBodHRwOi8vYWx0ZXJlZHF1YWxpYS5jb20vCiAqIEBhdXRob3IgbWlrYWVsIGVtdGluZ2VyIC8gaHR0cDovL2dvbW8uc2UvCiAqIEBhdXRob3IgdGlta25pcCAvIGh0dHA6Ly93d3cuZmxvb3JwbGFubmVyLmNvbS8KICogQGF1dGhvciBiaG91c3RvbiAvIGh0dHA6Ly9jbGFyYS5pbwogKiBAYXV0aG9yIFdlc3RMYW5nbGV5IC8gaHR0cDovL2dpdGh1Yi5jb20vV2VzdExhbmdsZXkKICovZnVuY3Rpb24gTWF0cml4NCgpe3RoaXMuZWxlbWVudHM9WzEsMCwwLDAsMCwxLDAsMCwwLDAsMSwwLDAsMCwwLDFdO2lmKGFyZ3VtZW50cy5sZW5ndGg+MCl7Y29uc29sZS5lcnJvcignVEhSRUUuTWF0cml4NDogdGhlIGNvbnN0cnVjdG9yIG5vIGxvbmdlciByZWFkcyBhcmd1bWVudHMuIHVzZSAuc2V0KCkgaW5zdGVhZC4nKTt9fU9iamVjdC5hc3NpZ24oTWF0cml4NC5wcm90b3R5cGUse2lzTWF0cml4NDp0cnVlLHNldDpmdW5jdGlvbiBzZXQobjExLG4xMixuMTMsbjE0LG4yMSxuMjIsbjIzLG4yNCxuMzEsbjMyLG4zMyxuMzQsbjQxLG40MixuNDMsbjQ0KXt2YXIgdGU9dGhpcy5lbGVtZW50czt0ZVswXT1uMTE7dGVbNF09bjEyO3RlWzhdPW4xMzt0ZVsxMl09bjE0O3RlWzFdPW4yMTt0ZVs1XT1uMjI7dGVbOV09bjIzO3RlWzEzXT1uMjQ7dGVbMl09bjMxO3RlWzZdPW4zMjt0ZVsxMF09bjMzO3RlWzE0XT1uMzQ7dGVbM109bjQxO3RlWzddPW40Mjt0ZVsxMV09bjQzO3RlWzE1XT1uNDQ7cmV0dXJuIHRoaXM7fSxpZGVudGl0eTpmdW5jdGlvbiBpZGVudGl0eSgpe3RoaXMuc2V0KDEsMCwwLDAsMCwxLDAsMCwwLDAsMSwwLDAsMCwwLDEpO3JldHVybiB0aGlzO30sY2xvbmU6ZnVuY3Rpb24gY2xvbmUoKXtyZXR1cm4gbmV3IE1hdHJpeDQoKS5mcm9tQXJyYXkodGhpcy5lbGVtZW50cyk7fSxjb3B5OmZ1bmN0aW9uIGNvcHkobSl7dmFyIHRlPXRoaXMuZWxlbWVudHM7dmFyIG1lPW0uZWxlbWVudHM7dGVbMF09bWVbMF07dGVbMV09bWVbMV07dGVbMl09bWVbMl07dGVbM109bWVbM107dGVbNF09bWVbNF07dGVbNV09bWVbNV07dGVbNl09bWVbNl07dGVbN109bWVbN107dGVbOF09bWVbOF07dGVbOV09bWVbOV07dGVbMTBdPW1lWzEwXTt0ZVsxMV09bWVbMTFdO3RlWzEyXT1tZVsxMl07dGVbMTNdPW1lWzEzXTt0ZVsxNF09bWVbMTRdO3RlWzE1XT1tZVsxNV07cmV0dXJuIHRoaXM7fSxjb3B5UG9zaXRpb246ZnVuY3Rpb24gY29weVBvc2l0aW9uKG0pe3ZhciB0ZT10aGlzLmVsZW1lbnRzLG1lPW0uZWxlbWVudHM7dGVbMTJdPW1lWzEyXTt0ZVsxM109bWVbMTNdO3RlWzE0XT1tZVsxNF07cmV0dXJuIHRoaXM7fSxleHRyYWN0QmFzaXM6ZnVuY3Rpb24gZXh0cmFjdEJhc2lzKHhBeGlzLHlBeGlzLHpBeGlzKXt4QXhpcy5zZXRGcm9tTWF0cml4Q29sdW1uKHRoaXMsMCk7eUF4aXMuc2V0RnJvbU1hdHJpeENvbHVtbih0aGlzLDEpO3pBeGlzLnNldEZyb21NYXRyaXhDb2x1bW4odGhpcywyKTtyZXR1cm4gdGhpczt9LG1ha2VCYXNpczpmdW5jdGlvbiBtYWtlQmFzaXMoeEF4aXMseUF4aXMsekF4aXMpe3RoaXMuc2V0KHhBeGlzLngseUF4aXMueCx6QXhpcy54LDAseEF4aXMueSx5QXhpcy55LHpBeGlzLnksMCx4QXhpcy56LHlBeGlzLnosekF4aXMueiwwLDAsMCwwLDEpO3JldHVybiB0aGlzO30sZXh0cmFjdFJvdGF0aW9uOmZ1bmN0aW9uKCl7dmFyIHYxPW5ldyBWZWN0b3IzKCk7cmV0dXJuIGZ1bmN0aW9uIGV4dHJhY3RSb3RhdGlvbihtKXt2YXIgdGU9dGhpcy5lbGVtZW50czt2YXIgbWU9bS5lbGVtZW50czt2YXIgc2NhbGVYPTEvdjEuc2V0RnJvbU1hdHJpeENvbHVtbihtLDApLmxlbmd0aCgpO3ZhciBzY2FsZVk9MS92MS5zZXRGcm9tTWF0cml4Q29sdW1uKG0sMSkubGVuZ3RoKCk7dmFyIHNjYWxlWj0xL3YxLnNldEZyb21NYXRyaXhDb2x1bW4obSwyKS5sZW5ndGgoKTt0ZVswXT1tZVswXSpzY2FsZVg7dGVbMV09bWVbMV0qc2NhbGVYO3RlWzJdPW1lWzJdKnNjYWxlWDt0ZVs0XT1tZVs0XSpzY2FsZVk7dGVbNV09bWVbNV0qc2NhbGVZO3RlWzZdPW1lWzZdKnNjYWxlWTt0ZVs4XT1tZVs4XSpzY2FsZVo7dGVbOV09bWVbOV0qc2NhbGVaO3RlWzEwXT1tZVsxMF0qc2NhbGVaO3JldHVybiB0aGlzO307fSgpLG1ha2VSb3RhdGlvbkZyb21FdWxlcjpmdW5jdGlvbiBtYWtlUm90YXRpb25Gcm9tRXVsZXIoZXVsZXIpe2lmKCEoZXVsZXImJmV1bGVyLmlzRXVsZXIpKXtjb25zb2xlLmVycm9yKCdUSFJFRS5NYXRyaXg0OiAubWFrZVJvdGF0aW9uRnJvbUV1bGVyKCkgbm93IGV4cGVjdHMgYSBFdWxlciByb3RhdGlvbiByYXRoZXIgdGhhbiBhIFZlY3RvcjMgYW5kIG9yZGVyLicpO312YXIgdGU9dGhpcy5lbGVtZW50czt2YXIgeD1ldWxlci54LHk9ZXVsZXIueSx6PWV1bGVyLno7dmFyIGE9TWF0aC5jb3MoeCksYj1NYXRoLnNpbih4KTt2YXIgYz1NYXRoLmNvcyh5KSxkPU1hdGguc2luKHkpO3ZhciBlPU1hdGguY29zKHopLGY9TWF0aC5zaW4oeik7aWYoZXVsZXIub3JkZXI9PT0nWFlaJyl7dmFyIGFlPWEqZSxhZj1hKmYsYmU9YiplLGJmPWIqZjt0ZVswXT1jKmU7dGVbNF09LWMqZjt0ZVs4XT1kO3RlWzFdPWFmK2JlKmQ7dGVbNV09YWUtYmYqZDt0ZVs5XT0tYipjO3RlWzJdPWJmLWFlKmQ7dGVbNl09YmUrYWYqZDt0ZVsxMF09YSpjO31lbHNlIGlmKGV1bGVyLm9yZGVyPT09J1lYWicpe3ZhciBjZT1jKmUsY2Y9YypmLGRlPWQqZSxkZj1kKmY7dGVbMF09Y2UrZGYqYjt0ZVs0XT1kZSpiLWNmO3RlWzhdPWEqZDt0ZVsxXT1hKmY7dGVbNV09YSplO3RlWzldPS1iO3RlWzJdPWNmKmItZGU7dGVbNl09ZGYrY2UqYjt0ZVsxMF09YSpjO31lbHNlIGlmKGV1bGVyLm9yZGVyPT09J1pYWScpe3ZhciBjZT1jKmUsY2Y9YypmLGRlPWQqZSxkZj1kKmY7dGVbMF09Y2UtZGYqYjt0ZVs0XT0tYSpmO3RlWzhdPWRlK2NmKmI7dGVbMV09Y2YrZGUqYjt0ZVs1XT1hKmU7dGVbOV09ZGYtY2UqYjt0ZVsyXT0tYSpkO3RlWzZdPWI7dGVbMTBdPWEqYzt9ZWxzZSBpZihldWxlci5vcmRlcj09PSdaWVgnKXt2YXIgYWU9YSplLGFmPWEqZixiZT1iKmUsYmY9YipmO3RlWzBdPWMqZTt0ZVs0XT1iZSpkLWFmO3RlWzhdPWFlKmQrYmY7dGVbMV09YypmO3RlWzVdPWJmKmQrYWU7dGVbOV09YWYqZC1iZTt0ZVsyXT0tZDt0ZVs2XT1iKmM7dGVbMTBdPWEqYzt9ZWxzZSBpZihldWxlci5vcmRlcj09PSdZWlgnKXt2YXIgYWM9YSpjLGFkPWEqZCxiYz1iKmMsYmQ9YipkO3RlWzBdPWMqZTt0ZVs0XT1iZC1hYypmO3RlWzhdPWJjKmYrYWQ7dGVbMV09Zjt0ZVs1XT1hKmU7dGVbOV09LWIqZTt0ZVsyXT0tZCplO3RlWzZdPWFkKmYrYmM7dGVbMTBdPWFjLWJkKmY7fWVsc2UgaWYoZXVsZXIub3JkZXI9PT0nWFpZJyl7dmFyIGFjPWEqYyxhZD1hKmQsYmM9YipjLGJkPWIqZDt0ZVswXT1jKmU7dGVbNF09LWY7dGVbOF09ZCplO3RlWzFdPWFjKmYrYmQ7dGVbNV09YSplO3RlWzldPWFkKmYtYmM7dGVbMl09YmMqZi1hZDt0ZVs2XT1iKmU7dGVbMTBdPWJkKmYrYWM7fS8vIGxhc3QgY29sdW1uCnRlWzNdPTA7dGVbN109MDt0ZVsxMV09MDsvLyBib3R0b20gcm93CnRlWzEyXT0wO3RlWzEzXT0wO3RlWzE0XT0wO3RlWzE1XT0xO3JldHVybiB0aGlzO30sbWFrZVJvdGF0aW9uRnJvbVF1YXRlcm5pb246ZnVuY3Rpb24gbWFrZVJvdGF0aW9uRnJvbVF1YXRlcm5pb24ocSl7dmFyIHRlPXRoaXMuZWxlbWVudHM7dmFyIHg9cS5feCx5PXEuX3ksej1xLl96LHc9cS5fdzt2YXIgeDI9eCt4LHkyPXkreSx6Mj16K3o7dmFyIHh4PXgqeDIseHk9eCp5Mix4ej14KnoyO3ZhciB5eT15KnkyLHl6PXkqejIseno9eip6Mjt2YXIgd3g9dyp4Mix3eT13KnkyLHd6PXcqejI7dGVbMF09MS0oeXkrenopO3RlWzRdPXh5LXd6O3RlWzhdPXh6K3d5O3RlWzFdPXh5K3d6O3RlWzVdPTEtKHh4K3p6KTt0ZVs5XT15ei13eDt0ZVsyXT14ei13eTt0ZVs2XT15eit3eDt0ZVsxMF09MS0oeHgreXkpOy8vIGxhc3QgY29sdW1uCnRlWzNdPTA7dGVbN109MDt0ZVsxMV09MDsvLyBib3R0b20gcm93CnRlWzEyXT0wO3RlWzEzXT0wO3RlWzE0XT0wO3RlWzE1XT0xO3JldHVybiB0aGlzO30sbG9va0F0OmZ1bmN0aW9uKCl7dmFyIHg9bmV3IFZlY3RvcjMoKTt2YXIgeT1uZXcgVmVjdG9yMygpO3ZhciB6PW5ldyBWZWN0b3IzKCk7cmV0dXJuIGZ1bmN0aW9uIGxvb2tBdChleWUsdGFyZ2V0LHVwKXt2YXIgdGU9dGhpcy5lbGVtZW50czt6LnN1YlZlY3RvcnMoZXllLHRhcmdldCk7aWYoei5sZW5ndGhTcSgpPT09MCl7Ly8gZXllIGFuZCB0YXJnZXQgYXJlIGluIHRoZSBzYW1lIHBvc2l0aW9uCnouej0xO316Lm5vcm1hbGl6ZSgpO3guY3Jvc3NWZWN0b3JzKHVwLHopO2lmKHgubGVuZ3RoU3EoKT09PTApey8vIHVwIGFuZCB6IGFyZSBwYXJhbGxlbAppZihNYXRoLmFicyh1cC56KT09PTEpe3oueCs9MC4wMDAxO31lbHNle3oueis9MC4wMDAxO316Lm5vcm1hbGl6ZSgpO3guY3Jvc3NWZWN0b3JzKHVwLHopO314Lm5vcm1hbGl6ZSgpO3kuY3Jvc3NWZWN0b3JzKHoseCk7dGVbMF09eC54O3RlWzRdPXkueDt0ZVs4XT16Lng7dGVbMV09eC55O3RlWzVdPXkueTt0ZVs5XT16Lnk7dGVbMl09eC56O3RlWzZdPXkuejt0ZVsxMF09ei56O3JldHVybiB0aGlzO307fSgpLG11bHRpcGx5OmZ1bmN0aW9uIG11bHRpcGx5KG0sbil7aWYobiE9PXVuZGVmaW5lZCl7Y29uc29sZS53YXJuKCdUSFJFRS5NYXRyaXg0OiAubXVsdGlwbHkoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5tdWx0aXBseU1hdHJpY2VzKCBhLCBiICkgaW5zdGVhZC4nKTtyZXR1cm4gdGhpcy5tdWx0aXBseU1hdHJpY2VzKG0sbik7fXJldHVybiB0aGlzLm11bHRpcGx5TWF0cmljZXModGhpcyxtKTt9LHByZW11bHRpcGx5OmZ1bmN0aW9uIHByZW11bHRpcGx5KG0pe3JldHVybiB0aGlzLm11bHRpcGx5TWF0cmljZXMobSx0aGlzKTt9LG11bHRpcGx5TWF0cmljZXM6ZnVuY3Rpb24gbXVsdGlwbHlNYXRyaWNlcyhhLGIpe3ZhciBhZT1hLmVsZW1lbnRzO3ZhciBiZT1iLmVsZW1lbnRzO3ZhciB0ZT10aGlzLmVsZW1lbnRzO3ZhciBhMTE9YWVbMF0sYTEyPWFlWzRdLGExMz1hZVs4XSxhMTQ9YWVbMTJdO3ZhciBhMjE9YWVbMV0sYTIyPWFlWzVdLGEyMz1hZVs5XSxhMjQ9YWVbMTNdO3ZhciBhMzE9YWVbMl0sYTMyPWFlWzZdLGEzMz1hZVsxMF0sYTM0PWFlWzE0XTt2YXIgYTQxPWFlWzNdLGE0Mj1hZVs3XSxhNDM9YWVbMTFdLGE0ND1hZVsxNV07dmFyIGIxMT1iZVswXSxiMTI9YmVbNF0sYjEzPWJlWzhdLGIxND1iZVsxMl07dmFyIGIyMT1iZVsxXSxiMjI9YmVbNV0sYjIzPWJlWzldLGIyND1iZVsxM107dmFyIGIzMT1iZVsyXSxiMzI9YmVbNl0sYjMzPWJlWzEwXSxiMzQ9YmVbMTRdO3ZhciBiNDE9YmVbM10sYjQyPWJlWzddLGI0Mz1iZVsxMV0sYjQ0PWJlWzE1XTt0ZVswXT1hMTEqYjExK2ExMipiMjErYTEzKmIzMSthMTQqYjQxO3RlWzRdPWExMSpiMTIrYTEyKmIyMithMTMqYjMyK2ExNCpiNDI7dGVbOF09YTExKmIxMythMTIqYjIzK2ExMypiMzMrYTE0KmI0Mzt0ZVsxMl09YTExKmIxNCthMTIqYjI0K2ExMypiMzQrYTE0KmI0NDt0ZVsxXT1hMjEqYjExK2EyMipiMjErYTIzKmIzMSthMjQqYjQxO3RlWzVdPWEyMSpiMTIrYTIyKmIyMithMjMqYjMyK2EyNCpiNDI7dGVbOV09YTIxKmIxMythMjIqYjIzK2EyMypiMzMrYTI0KmI0Mzt0ZVsxM109YTIxKmIxNCthMjIqYjI0K2EyMypiMzQrYTI0KmI0NDt0ZVsyXT1hMzEqYjExK2EzMipiMjErYTMzKmIzMSthMzQqYjQxO3RlWzZdPWEzMSpiMTIrYTMyKmIyMithMzMqYjMyK2EzNCpiNDI7dGVbMTBdPWEzMSpiMTMrYTMyKmIyMythMzMqYjMzK2EzNCpiNDM7dGVbMTRdPWEzMSpiMTQrYTMyKmIyNCthMzMqYjM0K2EzNCpiNDQ7dGVbM109YTQxKmIxMSthNDIqYjIxK2E0MypiMzErYTQ0KmI0MTt0ZVs3XT1hNDEqYjEyK2E0MipiMjIrYTQzKmIzMithNDQqYjQyO3RlWzExXT1hNDEqYjEzK2E0MipiMjMrYTQzKmIzMythNDQqYjQzO3RlWzE1XT1hNDEqYjE0K2E0MipiMjQrYTQzKmIzNCthNDQqYjQ0O3JldHVybiB0aGlzO30sbXVsdGlwbHlTY2FsYXI6ZnVuY3Rpb24gbXVsdGlwbHlTY2FsYXIocyl7dmFyIHRlPXRoaXMuZWxlbWVudHM7dGVbMF0qPXM7dGVbNF0qPXM7dGVbOF0qPXM7dGVbMTJdKj1zO3RlWzFdKj1zO3RlWzVdKj1zO3RlWzldKj1zO3RlWzEzXSo9czt0ZVsyXSo9czt0ZVs2XSo9czt0ZVsxMF0qPXM7dGVbMTRdKj1zO3RlWzNdKj1zO3RlWzddKj1zO3RlWzExXSo9czt0ZVsxNV0qPXM7cmV0dXJuIHRoaXM7fSxhcHBseVRvQnVmZmVyQXR0cmlidXRlOmZ1bmN0aW9uKCl7dmFyIHYxPW5ldyBWZWN0b3IzKCk7cmV0dXJuIGZ1bmN0aW9uIGFwcGx5VG9CdWZmZXJBdHRyaWJ1dGUoYXR0cmlidXRlKXtmb3IodmFyIGk9MCxsPWF0dHJpYnV0ZS5jb3VudDtpPGw7aSsrKXt2MS54PWF0dHJpYnV0ZS5nZXRYKGkpO3YxLnk9YXR0cmlidXRlLmdldFkoaSk7djEuej1hdHRyaWJ1dGUuZ2V0WihpKTt2MS5hcHBseU1hdHJpeDQodGhpcyk7YXR0cmlidXRlLnNldFhZWihpLHYxLngsdjEueSx2MS56KTt9cmV0dXJuIGF0dHJpYnV0ZTt9O30oKSxkZXRlcm1pbmFudDpmdW5jdGlvbiBkZXRlcm1pbmFudCgpe3ZhciB0ZT10aGlzLmVsZW1lbnRzO3ZhciBuMTE9dGVbMF0sbjEyPXRlWzRdLG4xMz10ZVs4XSxuMTQ9dGVbMTJdO3ZhciBuMjE9dGVbMV0sbjIyPXRlWzVdLG4yMz10ZVs5XSxuMjQ9dGVbMTNdO3ZhciBuMzE9dGVbMl0sbjMyPXRlWzZdLG4zMz10ZVsxMF0sbjM0PXRlWzE0XTt2YXIgbjQxPXRlWzNdLG40Mj10ZVs3XSxuNDM9dGVbMTFdLG40ND10ZVsxNV07Ly9UT0RPOiBtYWtlIHRoaXMgbW9yZSBlZmZpY2llbnQKLy8oIGJhc2VkIG9uIGh0dHA6Ly93d3cuZXVjbGlkZWFuc3BhY2UuY29tL21hdGhzL2FsZ2VicmEvbWF0cml4L2Z1bmN0aW9ucy9pbnZlcnNlL2ZvdXJEL2luZGV4Lmh0bSApCnJldHVybiBuNDEqKCtuMTQqbjIzKm4zMi1uMTMqbjI0Km4zMi1uMTQqbjIyKm4zMytuMTIqbjI0Km4zMytuMTMqbjIyKm4zNC1uMTIqbjIzKm4zNCkrbjQyKigrbjExKm4yMypuMzQtbjExKm4yNCpuMzMrbjE0Km4yMSpuMzMtbjEzKm4yMSpuMzQrbjEzKm4yNCpuMzEtbjE0Km4yMypuMzEpK240MyooK24xMSpuMjQqbjMyLW4xMSpuMjIqbjM0LW4xNCpuMjEqbjMyK24xMipuMjEqbjM0K24xNCpuMjIqbjMxLW4xMipuMjQqbjMxKStuNDQqKC1uMTMqbjIyKm4zMS1uMTEqbjIzKm4zMituMTEqbjIyKm4zMytuMTMqbjIxKm4zMi1uMTIqbjIxKm4zMytuMTIqbjIzKm4zMSk7fSx0cmFuc3Bvc2U6ZnVuY3Rpb24gdHJhbnNwb3NlKCl7dmFyIHRlPXRoaXMuZWxlbWVudHM7dmFyIHRtcDt0bXA9dGVbMV07dGVbMV09dGVbNF07dGVbNF09dG1wO3RtcD10ZVsyXTt0ZVsyXT10ZVs4XTt0ZVs4XT10bXA7dG1wPXRlWzZdO3RlWzZdPXRlWzldO3RlWzldPXRtcDt0bXA9dGVbM107dGVbM109dGVbMTJdO3RlWzEyXT10bXA7dG1wPXRlWzddO3RlWzddPXRlWzEzXTt0ZVsxM109dG1wO3RtcD10ZVsxMV07dGVbMTFdPXRlWzE0XTt0ZVsxNF09dG1wO3JldHVybiB0aGlzO30sc2V0UG9zaXRpb246ZnVuY3Rpb24gc2V0UG9zaXRpb24odil7dmFyIHRlPXRoaXMuZWxlbWVudHM7dGVbMTJdPXYueDt0ZVsxM109di55O3RlWzE0XT12Lno7cmV0dXJuIHRoaXM7fSxnZXRJbnZlcnNlOmZ1bmN0aW9uIGdldEludmVyc2UobSx0aHJvd09uRGVnZW5lcmF0ZSl7Ly8gYmFzZWQgb24gaHR0cDovL3d3dy5ldWNsaWRlYW5zcGFjZS5jb20vbWF0aHMvYWxnZWJyYS9tYXRyaXgvZnVuY3Rpb25zL2ludmVyc2UvZm91ckQvaW5kZXguaHRtCnZhciB0ZT10aGlzLmVsZW1lbnRzLG1lPW0uZWxlbWVudHMsbjExPW1lWzBdLG4yMT1tZVsxXSxuMzE9bWVbMl0sbjQxPW1lWzNdLG4xMj1tZVs0XSxuMjI9bWVbNV0sbjMyPW1lWzZdLG40Mj1tZVs3XSxuMTM9bWVbOF0sbjIzPW1lWzldLG4zMz1tZVsxMF0sbjQzPW1lWzExXSxuMTQ9bWVbMTJdLG4yND1tZVsxM10sbjM0PW1lWzE0XSxuNDQ9bWVbMTVdLHQxMT1uMjMqbjM0Km40Mi1uMjQqbjMzKm40MituMjQqbjMyKm40My1uMjIqbjM0Km40My1uMjMqbjMyKm40NCtuMjIqbjMzKm40NCx0MTI9bjE0Km4zMypuNDItbjEzKm4zNCpuNDItbjE0Km4zMipuNDMrbjEyKm4zNCpuNDMrbjEzKm4zMipuNDQtbjEyKm4zMypuNDQsdDEzPW4xMypuMjQqbjQyLW4xNCpuMjMqbjQyK24xNCpuMjIqbjQzLW4xMipuMjQqbjQzLW4xMypuMjIqbjQ0K24xMipuMjMqbjQ0LHQxND1uMTQqbjIzKm4zMi1uMTMqbjI0Km4zMi1uMTQqbjIyKm4zMytuMTIqbjI0Km4zMytuMTMqbjIyKm4zNC1uMTIqbjIzKm4zNDt2YXIgZGV0PW4xMSp0MTErbjIxKnQxMituMzEqdDEzK240MSp0MTQ7aWYoZGV0PT09MCl7dmFyIG1zZz0iVEhSRUUuTWF0cml4NDogLmdldEludmVyc2UoKSBjYW4ndCBpbnZlcnQgbWF0cml4LCBkZXRlcm1pbmFudCBpcyAwIjtpZih0aHJvd09uRGVnZW5lcmF0ZT09PXRydWUpe3Rocm93IG5ldyBFcnJvcihtc2cpO31lbHNle2NvbnNvbGUud2Fybihtc2cpO31yZXR1cm4gdGhpcy5pZGVudGl0eSgpO312YXIgZGV0SW52PTEvZGV0O3RlWzBdPXQxMSpkZXRJbnY7dGVbMV09KG4yNCpuMzMqbjQxLW4yMypuMzQqbjQxLW4yNCpuMzEqbjQzK24yMSpuMzQqbjQzK24yMypuMzEqbjQ0LW4yMSpuMzMqbjQ0KSpkZXRJbnY7dGVbMl09KG4yMipuMzQqbjQxLW4yNCpuMzIqbjQxK24yNCpuMzEqbjQyLW4yMSpuMzQqbjQyLW4yMipuMzEqbjQ0K24yMSpuMzIqbjQ0KSpkZXRJbnY7dGVbM109KG4yMypuMzIqbjQxLW4yMipuMzMqbjQxLW4yMypuMzEqbjQyK24yMSpuMzMqbjQyK24yMipuMzEqbjQzLW4yMSpuMzIqbjQzKSpkZXRJbnY7dGVbNF09dDEyKmRldEludjt0ZVs1XT0objEzKm4zNCpuNDEtbjE0Km4zMypuNDErbjE0Km4zMSpuNDMtbjExKm4zNCpuNDMtbjEzKm4zMSpuNDQrbjExKm4zMypuNDQpKmRldEludjt0ZVs2XT0objE0Km4zMipuNDEtbjEyKm4zNCpuNDEtbjE0Km4zMSpuNDIrbjExKm4zNCpuNDIrbjEyKm4zMSpuNDQtbjExKm4zMipuNDQpKmRldEludjt0ZVs3XT0objEyKm4zMypuNDEtbjEzKm4zMipuNDErbjEzKm4zMSpuNDItbjExKm4zMypuNDItbjEyKm4zMSpuNDMrbjExKm4zMipuNDMpKmRldEludjt0ZVs4XT10MTMqZGV0SW52O3RlWzldPShuMTQqbjIzKm40MS1uMTMqbjI0Km40MS1uMTQqbjIxKm40MytuMTEqbjI0Km40MytuMTMqbjIxKm40NC1uMTEqbjIzKm40NCkqZGV0SW52O3RlWzEwXT0objEyKm4yNCpuNDEtbjE0Km4yMipuNDErbjE0Km4yMSpuNDItbjExKm4yNCpuNDItbjEyKm4yMSpuNDQrbjExKm4yMipuNDQpKmRldEludjt0ZVsxMV09KG4xMypuMjIqbjQxLW4xMipuMjMqbjQxLW4xMypuMjEqbjQyK24xMSpuMjMqbjQyK24xMipuMjEqbjQzLW4xMSpuMjIqbjQzKSpkZXRJbnY7dGVbMTJdPXQxNCpkZXRJbnY7dGVbMTNdPShuMTMqbjI0Km4zMS1uMTQqbjIzKm4zMStuMTQqbjIxKm4zMy1uMTEqbjI0Km4zMy1uMTMqbjIxKm4zNCtuMTEqbjIzKm4zNCkqZGV0SW52O3RlWzE0XT0objE0Km4yMipuMzEtbjEyKm4yNCpuMzEtbjE0Km4yMSpuMzIrbjExKm4yNCpuMzIrbjEyKm4yMSpuMzQtbjExKm4yMipuMzQpKmRldEludjt0ZVsxNV09KG4xMipuMjMqbjMxLW4xMypuMjIqbjMxK24xMypuMjEqbjMyLW4xMSpuMjMqbjMyLW4xMipuMjEqbjMzK24xMSpuMjIqbjMzKSpkZXRJbnY7cmV0dXJuIHRoaXM7fSxzY2FsZTpmdW5jdGlvbiBzY2FsZSh2KXt2YXIgdGU9dGhpcy5lbGVtZW50czt2YXIgeD12LngseT12Lnksej12Lno7dGVbMF0qPXg7dGVbNF0qPXk7dGVbOF0qPXo7dGVbMV0qPXg7dGVbNV0qPXk7dGVbOV0qPXo7dGVbMl0qPXg7dGVbNl0qPXk7dGVbMTBdKj16O3RlWzNdKj14O3RlWzddKj15O3RlWzExXSo9ejtyZXR1cm4gdGhpczt9LGdldE1heFNjYWxlT25BeGlzOmZ1bmN0aW9uIGdldE1heFNjYWxlT25BeGlzKCl7dmFyIHRlPXRoaXMuZWxlbWVudHM7dmFyIHNjYWxlWFNxPXRlWzBdKnRlWzBdK3RlWzFdKnRlWzFdK3RlWzJdKnRlWzJdO3ZhciBzY2FsZVlTcT10ZVs0XSp0ZVs0XSt0ZVs1XSp0ZVs1XSt0ZVs2XSp0ZVs2XTt2YXIgc2NhbGVaU3E9dGVbOF0qdGVbOF0rdGVbOV0qdGVbOV0rdGVbMTBdKnRlWzEwXTtyZXR1cm4gTWF0aC5zcXJ0KE1hdGgubWF4KHNjYWxlWFNxLHNjYWxlWVNxLHNjYWxlWlNxKSk7fSxtYWtlVHJhbnNsYXRpb246ZnVuY3Rpb24gbWFrZVRyYW5zbGF0aW9uKHgseSx6KXt0aGlzLnNldCgxLDAsMCx4LDAsMSwwLHksMCwwLDEseiwwLDAsMCwxKTtyZXR1cm4gdGhpczt9LG1ha2VSb3RhdGlvblg6ZnVuY3Rpb24gbWFrZVJvdGF0aW9uWCh0aGV0YSl7dmFyIGM9TWF0aC5jb3ModGhldGEpLHM9TWF0aC5zaW4odGhldGEpO3RoaXMuc2V0KDEsMCwwLDAsMCxjLC1zLDAsMCxzLGMsMCwwLDAsMCwxKTtyZXR1cm4gdGhpczt9LG1ha2VSb3RhdGlvblk6ZnVuY3Rpb24gbWFrZVJvdGF0aW9uWSh0aGV0YSl7dmFyIGM9TWF0aC5jb3ModGhldGEpLHM9TWF0aC5zaW4odGhldGEpO3RoaXMuc2V0KGMsMCxzLDAsMCwxLDAsMCwtcywwLGMsMCwwLDAsMCwxKTtyZXR1cm4gdGhpczt9LG1ha2VSb3RhdGlvblo6ZnVuY3Rpb24gbWFrZVJvdGF0aW9uWih0aGV0YSl7dmFyIGM9TWF0aC5jb3ModGhldGEpLHM9TWF0aC5zaW4odGhldGEpO3RoaXMuc2V0KGMsLXMsMCwwLHMsYywwLDAsMCwwLDEsMCwwLDAsMCwxKTtyZXR1cm4gdGhpczt9LG1ha2VSb3RhdGlvbkF4aXM6ZnVuY3Rpb24gbWFrZVJvdGF0aW9uQXhpcyhheGlzLGFuZ2xlKXsvLyBCYXNlZCBvbiBodHRwOi8vd3d3LmdhbWVkZXYubmV0L3JlZmVyZW5jZS9hcnRpY2xlcy9hcnRpY2xlMTE5OS5hc3AKdmFyIGM9TWF0aC5jb3MoYW5nbGUpO3ZhciBzPU1hdGguc2luKGFuZ2xlKTt2YXIgdD0xLWM7dmFyIHg9YXhpcy54LHk9YXhpcy55LHo9YXhpcy56O3ZhciB0eD10KngsdHk9dCp5O3RoaXMuc2V0KHR4KngrYyx0eCp5LXMqeix0eCp6K3MqeSwwLHR4Knkrcyp6LHR5KnkrYyx0eSp6LXMqeCwwLHR4Knotcyp5LHR5Knorcyp4LHQqeip6K2MsMCwwLDAsMCwxKTtyZXR1cm4gdGhpczt9LG1ha2VTY2FsZTpmdW5jdGlvbiBtYWtlU2NhbGUoeCx5LHope3RoaXMuc2V0KHgsMCwwLDAsMCx5LDAsMCwwLDAseiwwLDAsMCwwLDEpO3JldHVybiB0aGlzO30sbWFrZVNoZWFyOmZ1bmN0aW9uIG1ha2VTaGVhcih4LHkseil7dGhpcy5zZXQoMSx5LHosMCx4LDEseiwwLHgseSwxLDAsMCwwLDAsMSk7cmV0dXJuIHRoaXM7fSxjb21wb3NlOmZ1bmN0aW9uIGNvbXBvc2UocG9zaXRpb24scXVhdGVybmlvbixzY2FsZSl7dGhpcy5tYWtlUm90YXRpb25Gcm9tUXVhdGVybmlvbihxdWF0ZXJuaW9uKTt0aGlzLnNjYWxlKHNjYWxlKTt0aGlzLnNldFBvc2l0aW9uKHBvc2l0aW9uKTtyZXR1cm4gdGhpczt9LGRlY29tcG9zZTpmdW5jdGlvbigpe3ZhciB2ZWN0b3I9bmV3IFZlY3RvcjMoKTt2YXIgbWF0cml4PW5ldyBNYXRyaXg0KCk7cmV0dXJuIGZ1bmN0aW9uIGRlY29tcG9zZShwb3NpdGlvbixxdWF0ZXJuaW9uLHNjYWxlKXt2YXIgdGU9dGhpcy5lbGVtZW50czt2YXIgc3g9dmVjdG9yLnNldCh0ZVswXSx0ZVsxXSx0ZVsyXSkubGVuZ3RoKCk7dmFyIHN5PXZlY3Rvci5zZXQodGVbNF0sdGVbNV0sdGVbNl0pLmxlbmd0aCgpO3ZhciBzej12ZWN0b3Iuc2V0KHRlWzhdLHRlWzldLHRlWzEwXSkubGVuZ3RoKCk7Ly8gaWYgZGV0ZXJtaW5lIGlzIG5lZ2F0aXZlLCB3ZSBuZWVkIHRvIGludmVydCBvbmUgc2NhbGUKdmFyIGRldD10aGlzLmRldGVybWluYW50KCk7aWYoZGV0PDApc3g9LXN4O3Bvc2l0aW9uLng9dGVbMTJdO3Bvc2l0aW9uLnk9dGVbMTNdO3Bvc2l0aW9uLno9dGVbMTRdOy8vIHNjYWxlIHRoZSByb3RhdGlvbiBwYXJ0Cm1hdHJpeC5jb3B5KHRoaXMpO3ZhciBpbnZTWD0xL3N4O3ZhciBpbnZTWT0xL3N5O3ZhciBpbnZTWj0xL3N6O21hdHJpeC5lbGVtZW50c1swXSo9aW52U1g7bWF0cml4LmVsZW1lbnRzWzFdKj1pbnZTWDttYXRyaXguZWxlbWVudHNbMl0qPWludlNYO21hdHJpeC5lbGVtZW50c1s0XSo9aW52U1k7bWF0cml4LmVsZW1lbnRzWzVdKj1pbnZTWTttYXRyaXguZWxlbWVudHNbNl0qPWludlNZO21hdHJpeC5lbGVtZW50c1s4XSo9aW52U1o7bWF0cml4LmVsZW1lbnRzWzldKj1pbnZTWjttYXRyaXguZWxlbWVudHNbMTBdKj1pbnZTWjtxdWF0ZXJuaW9uLnNldEZyb21Sb3RhdGlvbk1hdHJpeChtYXRyaXgpO3NjYWxlLng9c3g7c2NhbGUueT1zeTtzY2FsZS56PXN6O3JldHVybiB0aGlzO307fSgpLG1ha2VQZXJzcGVjdGl2ZTpmdW5jdGlvbiBtYWtlUGVyc3BlY3RpdmUobGVmdCxyaWdodCx0b3AsYm90dG9tLG5lYXIsZmFyKXtpZihmYXI9PT11bmRlZmluZWQpe2NvbnNvbGUud2FybignVEhSRUUuTWF0cml4NDogLm1ha2VQZXJzcGVjdGl2ZSgpIGhhcyBiZWVuIHJlZGVmaW5lZCBhbmQgaGFzIGEgbmV3IHNpZ25hdHVyZS4gUGxlYXNlIGNoZWNrIHRoZSBkb2NzLicpO312YXIgdGU9dGhpcy5lbGVtZW50czt2YXIgeD0yKm5lYXIvKHJpZ2h0LWxlZnQpO3ZhciB5PTIqbmVhci8odG9wLWJvdHRvbSk7dmFyIGE9KHJpZ2h0K2xlZnQpLyhyaWdodC1sZWZ0KTt2YXIgYj0odG9wK2JvdHRvbSkvKHRvcC1ib3R0b20pO3ZhciBjPS0oZmFyK25lYXIpLyhmYXItbmVhcik7dmFyIGQ9LTIqZmFyKm5lYXIvKGZhci1uZWFyKTt0ZVswXT14O3RlWzRdPTA7dGVbOF09YTt0ZVsxMl09MDt0ZVsxXT0wO3RlWzVdPXk7dGVbOV09Yjt0ZVsxM109MDt0ZVsyXT0wO3RlWzZdPTA7dGVbMTBdPWM7dGVbMTRdPWQ7dGVbM109MDt0ZVs3XT0wO3RlWzExXT0tMTt0ZVsxNV09MDtyZXR1cm4gdGhpczt9LG1ha2VPcnRob2dyYXBoaWM6ZnVuY3Rpb24gbWFrZU9ydGhvZ3JhcGhpYyhsZWZ0LHJpZ2h0LHRvcCxib3R0b20sbmVhcixmYXIpe3ZhciB0ZT10aGlzLmVsZW1lbnRzO3ZhciB3PTEuMC8ocmlnaHQtbGVmdCk7dmFyIGg9MS4wLyh0b3AtYm90dG9tKTt2YXIgcD0xLjAvKGZhci1uZWFyKTt2YXIgeD0ocmlnaHQrbGVmdCkqdzt2YXIgeT0odG9wK2JvdHRvbSkqaDt2YXIgej0oZmFyK25lYXIpKnA7dGVbMF09Mip3O3RlWzRdPTA7dGVbOF09MDt0ZVsxMl09LXg7dGVbMV09MDt0ZVs1XT0yKmg7dGVbOV09MDt0ZVsxM109LXk7dGVbMl09MDt0ZVs2XT0wO3RlWzEwXT0tMipwO3RlWzE0XT0tejt0ZVszXT0wO3RlWzddPTA7dGVbMTFdPTA7dGVbMTVdPTE7cmV0dXJuIHRoaXM7fSxlcXVhbHM6ZnVuY3Rpb24gZXF1YWxzKG1hdHJpeCl7dmFyIHRlPXRoaXMuZWxlbWVudHM7dmFyIG1lPW1hdHJpeC5lbGVtZW50cztmb3IodmFyIGk9MDtpPDE2O2krKyl7aWYodGVbaV0hPT1tZVtpXSlyZXR1cm4gZmFsc2U7fXJldHVybiB0cnVlO30sZnJvbUFycmF5OmZ1bmN0aW9uIGZyb21BcnJheShhcnJheSxvZmZzZXQpe2lmKG9mZnNldD09PXVuZGVmaW5lZClvZmZzZXQ9MDtmb3IodmFyIGk9MDtpPDE2O2krKyl7dGhpcy5lbGVtZW50c1tpXT1hcnJheVtpK29mZnNldF07fXJldHVybiB0aGlzO30sdG9BcnJheTpmdW5jdGlvbiB0b0FycmF5KGFycmF5LG9mZnNldCl7aWYoYXJyYXk9PT11bmRlZmluZWQpYXJyYXk9W107aWYob2Zmc2V0PT09dW5kZWZpbmVkKW9mZnNldD0wO3ZhciB0ZT10aGlzLmVsZW1lbnRzO2FycmF5W29mZnNldF09dGVbMF07YXJyYXlbb2Zmc2V0KzFdPXRlWzFdO2FycmF5W29mZnNldCsyXT10ZVsyXTthcnJheVtvZmZzZXQrM109dGVbM107YXJyYXlbb2Zmc2V0KzRdPXRlWzRdO2FycmF5W29mZnNldCs1XT10ZVs1XTthcnJheVtvZmZzZXQrNl09dGVbNl07YXJyYXlbb2Zmc2V0KzddPXRlWzddO2FycmF5W29mZnNldCs4XT10ZVs4XTthcnJheVtvZmZzZXQrOV09dGVbOV07YXJyYXlbb2Zmc2V0KzEwXT10ZVsxMF07YXJyYXlbb2Zmc2V0KzExXT10ZVsxMV07YXJyYXlbb2Zmc2V0KzEyXT10ZVsxMl07YXJyYXlbb2Zmc2V0KzEzXT10ZVsxM107YXJyYXlbb2Zmc2V0KzE0XT10ZVsxNF07YXJyYXlbb2Zmc2V0KzE1XT10ZVsxNV07cmV0dXJuIGFycmF5O319KTsvKioKICogQGF1dGhvciBtaWthZWwgZW10aW5nZXIgLyBodHRwOi8vZ29tby5zZS8KICogQGF1dGhvciBhbHRlcmVkcSAvIGh0dHA6Ly9hbHRlcmVkcXVhbGlhLmNvbS8KICogQGF1dGhvciBXZXN0TGFuZ2xleSAvIGh0dHA6Ly9naXRodWIuY29tL1dlc3RMYW5nbGV5CiAqIEBhdXRob3IgYmhvdXN0b24gLyBodHRwOi8vY2xhcmEuaW8KICovZnVuY3Rpb24gUXVhdGVybmlvbih4LHkseix3KXt0aGlzLl94PXh8fDA7dGhpcy5feT15fHwwO3RoaXMuX3o9enx8MDt0aGlzLl93PXchPT11bmRlZmluZWQ/dzoxO31PYmplY3QuYXNzaWduKFF1YXRlcm5pb24se3NsZXJwOmZ1bmN0aW9uIHNsZXJwKHFhLHFiLHFtLHQpe3JldHVybiBxbS5jb3B5KHFhKS5zbGVycChxYix0KTt9LHNsZXJwRmxhdDpmdW5jdGlvbiBzbGVycEZsYXQoZHN0LGRzdE9mZnNldCxzcmMwLHNyY09mZnNldDAsc3JjMSxzcmNPZmZzZXQxLHQpey8vIGZ1enotZnJlZSwgYXJyYXktYmFzZWQgUXVhdGVybmlvbiBTTEVSUCBvcGVyYXRpb24KdmFyIHgwPXNyYzBbc3JjT2Zmc2V0MCswXSx5MD1zcmMwW3NyY09mZnNldDArMV0sejA9c3JjMFtzcmNPZmZzZXQwKzJdLHcwPXNyYzBbc3JjT2Zmc2V0MCszXSx4MT1zcmMxW3NyY09mZnNldDErMF0seTE9c3JjMVtzcmNPZmZzZXQxKzFdLHoxPXNyYzFbc3JjT2Zmc2V0MSsyXSx3MT1zcmMxW3NyY09mZnNldDErM107aWYodzAhPT13MXx8eDAhPT14MXx8eTAhPT15MXx8ejAhPT16MSl7dmFyIHM9MS10LGNvcz14MCp4MSt5MCp5MSt6MCp6MSt3MCp3MSxkaXI9Y29zPj0wPzE6LTEsc3FyU2luPTEtY29zKmNvczsvLyBTa2lwIHRoZSBTbGVycCBmb3IgdGlueSBzdGVwcyB0byBhdm9pZCBudW1lcmljIHByb2JsZW1zOgppZihzcXJTaW4+TnVtYmVyLkVQU0lMT04pe3ZhciBzaW49TWF0aC5zcXJ0KHNxclNpbiksbGVuPU1hdGguYXRhbjIoc2luLGNvcypkaXIpO3M9TWF0aC5zaW4ocypsZW4pL3Npbjt0PU1hdGguc2luKHQqbGVuKS9zaW47fXZhciB0RGlyPXQqZGlyO3gwPXgwKnMreDEqdERpcjt5MD15MCpzK3kxKnREaXI7ejA9ejAqcyt6MSp0RGlyO3cwPXcwKnMrdzEqdERpcjsvLyBOb3JtYWxpemUgaW4gY2FzZSB3ZSBqdXN0IGRpZCBhIGxlcnA6CmlmKHM9PT0xLXQpe3ZhciBmPTEvTWF0aC5zcXJ0KHgwKngwK3kwKnkwK3owKnowK3cwKncwKTt4MCo9Zjt5MCo9Zjt6MCo9Zjt3MCo9Zjt9fWRzdFtkc3RPZmZzZXRdPXgwO2RzdFtkc3RPZmZzZXQrMV09eTA7ZHN0W2RzdE9mZnNldCsyXT16MDtkc3RbZHN0T2Zmc2V0KzNdPXcwO319KTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyhRdWF0ZXJuaW9uLnByb3RvdHlwZSx7eDp7Z2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiB0aGlzLl94O30sc2V0OmZ1bmN0aW9uIHNldCh2YWx1ZSl7dGhpcy5feD12YWx1ZTt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTt9fSx5OntnZXQ6ZnVuY3Rpb24gZ2V0KCl7cmV0dXJuIHRoaXMuX3k7fSxzZXQ6ZnVuY3Rpb24gc2V0KHZhbHVlKXt0aGlzLl95PXZhbHVlO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpO319LHo6e2dldDpmdW5jdGlvbiBnZXQoKXtyZXR1cm4gdGhpcy5fejt9LHNldDpmdW5jdGlvbiBzZXQodmFsdWUpe3RoaXMuX3o9dmFsdWU7dGhpcy5vbkNoYW5nZUNhbGxiYWNrKCk7fX0sdzp7Z2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiB0aGlzLl93O30sc2V0OmZ1bmN0aW9uIHNldCh2YWx1ZSl7dGhpcy5fdz12YWx1ZTt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTt9fX0pO09iamVjdC5hc3NpZ24oUXVhdGVybmlvbi5wcm90b3R5cGUse3NldDpmdW5jdGlvbiBzZXQoeCx5LHosdyl7dGhpcy5feD14O3RoaXMuX3k9eTt0aGlzLl96PXo7dGhpcy5fdz13O3RoaXMub25DaGFuZ2VDYWxsYmFjaygpO3JldHVybiB0aGlzO30sY2xvbmU6ZnVuY3Rpb24gY2xvbmUoKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5feCx0aGlzLl95LHRoaXMuX3osdGhpcy5fdyk7fSxjb3B5OmZ1bmN0aW9uIGNvcHkocXVhdGVybmlvbil7dGhpcy5feD1xdWF0ZXJuaW9uLng7dGhpcy5feT1xdWF0ZXJuaW9uLnk7dGhpcy5fej1xdWF0ZXJuaW9uLno7dGhpcy5fdz1xdWF0ZXJuaW9uLnc7dGhpcy5vbkNoYW5nZUNhbGxiYWNrKCk7cmV0dXJuIHRoaXM7fSxzZXRGcm9tRXVsZXI6ZnVuY3Rpb24gc2V0RnJvbUV1bGVyKGV1bGVyLHVwZGF0ZSl7aWYoIShldWxlciYmZXVsZXIuaXNFdWxlcikpe3Rocm93IG5ldyBFcnJvcignVEhSRUUuUXVhdGVybmlvbjogLnNldEZyb21FdWxlcigpIG5vdyBleHBlY3RzIGFuIEV1bGVyIHJvdGF0aW9uIHJhdGhlciB0aGFuIGEgVmVjdG9yMyBhbmQgb3JkZXIuJyk7fXZhciB4PWV1bGVyLl94LHk9ZXVsZXIuX3ksej1ldWxlci5feixvcmRlcj1ldWxlci5vcmRlcjsvLyBodHRwOi8vd3d3Lm1hdGh3b3Jrcy5jb20vbWF0bGFiY2VudHJhbC9maWxlZXhjaGFuZ2UvCi8vIAkyMDY5Ni1mdW5jdGlvbi10by1jb252ZXJ0LWJldHdlZW4tZGNtLWV1bGVyLWFuZ2xlcy1xdWF0ZXJuaW9ucy1hbmQtZXVsZXItdmVjdG9ycy8KLy8JY29udGVudC9TcGluQ2FsYy5tCnZhciBjb3M9TWF0aC5jb3M7dmFyIHNpbj1NYXRoLnNpbjt2YXIgYzE9Y29zKHgvMik7dmFyIGMyPWNvcyh5LzIpO3ZhciBjMz1jb3Moei8yKTt2YXIgczE9c2luKHgvMik7dmFyIHMyPXNpbih5LzIpO3ZhciBzMz1zaW4oei8yKTtpZihvcmRlcj09PSdYWVonKXt0aGlzLl94PXMxKmMyKmMzK2MxKnMyKnMzO3RoaXMuX3k9YzEqczIqYzMtczEqYzIqczM7dGhpcy5fej1jMSpjMipzMytzMSpzMipjMzt0aGlzLl93PWMxKmMyKmMzLXMxKnMyKnMzO31lbHNlIGlmKG9yZGVyPT09J1lYWicpe3RoaXMuX3g9czEqYzIqYzMrYzEqczIqczM7dGhpcy5feT1jMSpzMipjMy1zMSpjMipzMzt0aGlzLl96PWMxKmMyKnMzLXMxKnMyKmMzO3RoaXMuX3c9YzEqYzIqYzMrczEqczIqczM7fWVsc2UgaWYob3JkZXI9PT0nWlhZJyl7dGhpcy5feD1zMSpjMipjMy1jMSpzMipzMzt0aGlzLl95PWMxKnMyKmMzK3MxKmMyKnMzO3RoaXMuX3o9YzEqYzIqczMrczEqczIqYzM7dGhpcy5fdz1jMSpjMipjMy1zMSpzMipzMzt9ZWxzZSBpZihvcmRlcj09PSdaWVgnKXt0aGlzLl94PXMxKmMyKmMzLWMxKnMyKnMzO3RoaXMuX3k9YzEqczIqYzMrczEqYzIqczM7dGhpcy5fej1jMSpjMipzMy1zMSpzMipjMzt0aGlzLl93PWMxKmMyKmMzK3MxKnMyKnMzO31lbHNlIGlmKG9yZGVyPT09J1laWCcpe3RoaXMuX3g9czEqYzIqYzMrYzEqczIqczM7dGhpcy5feT1jMSpzMipjMytzMSpjMipzMzt0aGlzLl96PWMxKmMyKnMzLXMxKnMyKmMzO3RoaXMuX3c9YzEqYzIqYzMtczEqczIqczM7fWVsc2UgaWYob3JkZXI9PT0nWFpZJyl7dGhpcy5feD1zMSpjMipjMy1jMSpzMipzMzt0aGlzLl95PWMxKnMyKmMzLXMxKmMyKnMzO3RoaXMuX3o9YzEqYzIqczMrczEqczIqYzM7dGhpcy5fdz1jMSpjMipjMytzMSpzMipzMzt9aWYodXBkYXRlIT09ZmFsc2UpdGhpcy5vbkNoYW5nZUNhbGxiYWNrKCk7cmV0dXJuIHRoaXM7fSxzZXRGcm9tQXhpc0FuZ2xlOmZ1bmN0aW9uIHNldEZyb21BeGlzQW5nbGUoYXhpcyxhbmdsZSl7Ly8gaHR0cDovL3d3dy5ldWNsaWRlYW5zcGFjZS5jb20vbWF0aHMvZ2VvbWV0cnkvcm90YXRpb25zL2NvbnZlcnNpb25zL2FuZ2xlVG9RdWF0ZXJuaW9uL2luZGV4Lmh0bQovLyBhc3N1bWVzIGF4aXMgaXMgbm9ybWFsaXplZAp2YXIgaGFsZkFuZ2xlPWFuZ2xlLzIscz1NYXRoLnNpbihoYWxmQW5nbGUpO3RoaXMuX3g9YXhpcy54KnM7dGhpcy5feT1heGlzLnkqczt0aGlzLl96PWF4aXMueipzO3RoaXMuX3c9TWF0aC5jb3MoaGFsZkFuZ2xlKTt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtyZXR1cm4gdGhpczt9LHNldEZyb21Sb3RhdGlvbk1hdHJpeDpmdW5jdGlvbiBzZXRGcm9tUm90YXRpb25NYXRyaXgobSl7Ly8gaHR0cDovL3d3dy5ldWNsaWRlYW5zcGFjZS5jb20vbWF0aHMvZ2VvbWV0cnkvcm90YXRpb25zL2NvbnZlcnNpb25zL21hdHJpeFRvUXVhdGVybmlvbi9pbmRleC5odG0KLy8gYXNzdW1lcyB0aGUgdXBwZXIgM3gzIG9mIG0gaXMgYSBwdXJlIHJvdGF0aW9uIG1hdHJpeCAoaS5lLCB1bnNjYWxlZCkKdmFyIHRlPW0uZWxlbWVudHMsbTExPXRlWzBdLG0xMj10ZVs0XSxtMTM9dGVbOF0sbTIxPXRlWzFdLG0yMj10ZVs1XSxtMjM9dGVbOV0sbTMxPXRlWzJdLG0zMj10ZVs2XSxtMzM9dGVbMTBdLHRyYWNlPW0xMSttMjIrbTMzLHM7aWYodHJhY2U+MCl7cz0wLjUvTWF0aC5zcXJ0KHRyYWNlKzEuMCk7dGhpcy5fdz0wLjI1L3M7dGhpcy5feD0obTMyLW0yMykqczt0aGlzLl95PShtMTMtbTMxKSpzO3RoaXMuX3o9KG0yMS1tMTIpKnM7fWVsc2UgaWYobTExPm0yMiYmbTExPm0zMyl7cz0yLjAqTWF0aC5zcXJ0KDEuMCttMTEtbTIyLW0zMyk7dGhpcy5fdz0obTMyLW0yMykvczt0aGlzLl94PTAuMjUqczt0aGlzLl95PShtMTIrbTIxKS9zO3RoaXMuX3o9KG0xMyttMzEpL3M7fWVsc2UgaWYobTIyPm0zMyl7cz0yLjAqTWF0aC5zcXJ0KDEuMCttMjItbTExLW0zMyk7dGhpcy5fdz0obTEzLW0zMSkvczt0aGlzLl94PShtMTIrbTIxKS9zO3RoaXMuX3k9MC4yNSpzO3RoaXMuX3o9KG0yMyttMzIpL3M7fWVsc2V7cz0yLjAqTWF0aC5zcXJ0KDEuMCttMzMtbTExLW0yMik7dGhpcy5fdz0obTIxLW0xMikvczt0aGlzLl94PShtMTMrbTMxKS9zO3RoaXMuX3k9KG0yMyttMzIpL3M7dGhpcy5fej0wLjI1KnM7fXRoaXMub25DaGFuZ2VDYWxsYmFjaygpO3JldHVybiB0aGlzO30sc2V0RnJvbVVuaXRWZWN0b3JzOmZ1bmN0aW9uKCl7Ly8gYXNzdW1lcyBkaXJlY3Rpb24gdmVjdG9ycyB2RnJvbSBhbmQgdlRvIGFyZSBub3JtYWxpemVkCnZhciB2MT1uZXcgVmVjdG9yMygpO3ZhciByO3ZhciBFUFM9MC4wMDAwMDE7cmV0dXJuIGZ1bmN0aW9uIHNldEZyb21Vbml0VmVjdG9ycyh2RnJvbSx2VG8pe2lmKHYxPT09dW5kZWZpbmVkKXYxPW5ldyBWZWN0b3IzKCk7cj12RnJvbS5kb3QodlRvKSsxO2lmKHI8RVBTKXtyPTA7aWYoTWF0aC5hYnModkZyb20ueCk+TWF0aC5hYnModkZyb20ueikpe3YxLnNldCgtdkZyb20ueSx2RnJvbS54LDApO31lbHNle3YxLnNldCgwLC12RnJvbS56LHZGcm9tLnkpO319ZWxzZXt2MS5jcm9zc1ZlY3RvcnModkZyb20sdlRvKTt9dGhpcy5feD12MS54O3RoaXMuX3k9djEueTt0aGlzLl96PXYxLno7dGhpcy5fdz1yO3JldHVybiB0aGlzLm5vcm1hbGl6ZSgpO307fSgpLGludmVyc2U6ZnVuY3Rpb24gaW52ZXJzZSgpe3JldHVybiB0aGlzLmNvbmp1Z2F0ZSgpLm5vcm1hbGl6ZSgpO30sY29uanVnYXRlOmZ1bmN0aW9uIGNvbmp1Z2F0ZSgpe3RoaXMuX3gqPS0xO3RoaXMuX3kqPS0xO3RoaXMuX3oqPS0xO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpO3JldHVybiB0aGlzO30sZG90OmZ1bmN0aW9uIGRvdCh2KXtyZXR1cm4gdGhpcy5feCp2Ll94K3RoaXMuX3kqdi5feSt0aGlzLl96KnYuX3ordGhpcy5fdyp2Ll93O30sbGVuZ3RoU3E6ZnVuY3Rpb24gbGVuZ3RoU3EoKXtyZXR1cm4gdGhpcy5feCp0aGlzLl94K3RoaXMuX3kqdGhpcy5feSt0aGlzLl96KnRoaXMuX3ordGhpcy5fdyp0aGlzLl93O30sbGVuZ3RoOmZ1bmN0aW9uIGxlbmd0aCgpe3JldHVybiBNYXRoLnNxcnQodGhpcy5feCp0aGlzLl94K3RoaXMuX3kqdGhpcy5feSt0aGlzLl96KnRoaXMuX3ordGhpcy5fdyp0aGlzLl93KTt9LG5vcm1hbGl6ZTpmdW5jdGlvbiBub3JtYWxpemUoKXt2YXIgbD10aGlzLmxlbmd0aCgpO2lmKGw9PT0wKXt0aGlzLl94PTA7dGhpcy5feT0wO3RoaXMuX3o9MDt0aGlzLl93PTE7fWVsc2V7bD0xL2w7dGhpcy5feD10aGlzLl94Kmw7dGhpcy5feT10aGlzLl95Kmw7dGhpcy5fej10aGlzLl96Kmw7dGhpcy5fdz10aGlzLl93Kmw7fXRoaXMub25DaGFuZ2VDYWxsYmFjaygpO3JldHVybiB0aGlzO30sbXVsdGlwbHk6ZnVuY3Rpb24gbXVsdGlwbHkocSxwKXtpZihwIT09dW5kZWZpbmVkKXtjb25zb2xlLndhcm4oJ1RIUkVFLlF1YXRlcm5pb246IC5tdWx0aXBseSgpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLm11bHRpcGx5UXVhdGVybmlvbnMoIGEsIGIgKSBpbnN0ZWFkLicpO3JldHVybiB0aGlzLm11bHRpcGx5UXVhdGVybmlvbnMocSxwKTt9cmV0dXJuIHRoaXMubXVsdGlwbHlRdWF0ZXJuaW9ucyh0aGlzLHEpO30scHJlbXVsdGlwbHk6ZnVuY3Rpb24gcHJlbXVsdGlwbHkocSl7cmV0dXJuIHRoaXMubXVsdGlwbHlRdWF0ZXJuaW9ucyhxLHRoaXMpO30sbXVsdGlwbHlRdWF0ZXJuaW9uczpmdW5jdGlvbiBtdWx0aXBseVF1YXRlcm5pb25zKGEsYil7Ly8gZnJvbSBodHRwOi8vd3d3LmV1Y2xpZGVhbnNwYWNlLmNvbS9tYXRocy9hbGdlYnJhL3JlYWxOb3JtZWRBbGdlYnJhL3F1YXRlcm5pb25zL2NvZGUvaW5kZXguaHRtCnZhciBxYXg9YS5feCxxYXk9YS5feSxxYXo9YS5feixxYXc9YS5fdzt2YXIgcWJ4PWIuX3gscWJ5PWIuX3kscWJ6PWIuX3oscWJ3PWIuX3c7dGhpcy5feD1xYXgqcWJ3K3FhdypxYngrcWF5KnFiei1xYXoqcWJ5O3RoaXMuX3k9cWF5KnFidytxYXcqcWJ5K3FheipxYngtcWF4KnFiejt0aGlzLl96PXFheipxYncrcWF3KnFieitxYXgqcWJ5LXFheSpxYng7dGhpcy5fdz1xYXcqcWJ3LXFheCpxYngtcWF5KnFieS1xYXoqcWJ6O3RoaXMub25DaGFuZ2VDYWxsYmFjaygpO3JldHVybiB0aGlzO30sc2xlcnA6ZnVuY3Rpb24gc2xlcnAocWIsdCl7aWYodD09PTApcmV0dXJuIHRoaXM7aWYodD09PTEpcmV0dXJuIHRoaXMuY29weShxYik7dmFyIHg9dGhpcy5feCx5PXRoaXMuX3ksej10aGlzLl96LHc9dGhpcy5fdzsvLyBodHRwOi8vd3d3LmV1Y2xpZGVhbnNwYWNlLmNvbS9tYXRocy9hbGdlYnJhL3JlYWxOb3JtZWRBbGdlYnJhL3F1YXRlcm5pb25zL3NsZXJwLwp2YXIgY29zSGFsZlRoZXRhPXcqcWIuX3creCpxYi5feCt5KnFiLl95K3oqcWIuX3o7aWYoY29zSGFsZlRoZXRhPDApe3RoaXMuX3c9LXFiLl93O3RoaXMuX3g9LXFiLl94O3RoaXMuX3k9LXFiLl95O3RoaXMuX3o9LXFiLl96O2Nvc0hhbGZUaGV0YT0tY29zSGFsZlRoZXRhO31lbHNle3RoaXMuY29weShxYik7fWlmKGNvc0hhbGZUaGV0YT49MS4wKXt0aGlzLl93PXc7dGhpcy5feD14O3RoaXMuX3k9eTt0aGlzLl96PXo7cmV0dXJuIHRoaXM7fXZhciBzaW5IYWxmVGhldGE9TWF0aC5zcXJ0KDEuMC1jb3NIYWxmVGhldGEqY29zSGFsZlRoZXRhKTtpZihNYXRoLmFicyhzaW5IYWxmVGhldGEpPDAuMDAxKXt0aGlzLl93PTAuNSoodyt0aGlzLl93KTt0aGlzLl94PTAuNSooeCt0aGlzLl94KTt0aGlzLl95PTAuNSooeSt0aGlzLl95KTt0aGlzLl96PTAuNSooeit0aGlzLl96KTtyZXR1cm4gdGhpczt9dmFyIGhhbGZUaGV0YT1NYXRoLmF0YW4yKHNpbkhhbGZUaGV0YSxjb3NIYWxmVGhldGEpO3ZhciByYXRpb0E9TWF0aC5zaW4oKDEtdCkqaGFsZlRoZXRhKS9zaW5IYWxmVGhldGEscmF0aW9CPU1hdGguc2luKHQqaGFsZlRoZXRhKS9zaW5IYWxmVGhldGE7dGhpcy5fdz13KnJhdGlvQSt0aGlzLl93KnJhdGlvQjt0aGlzLl94PXgqcmF0aW9BK3RoaXMuX3gqcmF0aW9CO3RoaXMuX3k9eSpyYXRpb0ErdGhpcy5feSpyYXRpb0I7dGhpcy5fej16KnJhdGlvQSt0aGlzLl96KnJhdGlvQjt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtyZXR1cm4gdGhpczt9LGVxdWFsczpmdW5jdGlvbiBlcXVhbHMocXVhdGVybmlvbil7cmV0dXJuIHF1YXRlcm5pb24uX3g9PT10aGlzLl94JiZxdWF0ZXJuaW9uLl95PT09dGhpcy5feSYmcXVhdGVybmlvbi5fej09PXRoaXMuX3omJnF1YXRlcm5pb24uX3c9PT10aGlzLl93O30sZnJvbUFycmF5OmZ1bmN0aW9uIGZyb21BcnJheShhcnJheSxvZmZzZXQpe2lmKG9mZnNldD09PXVuZGVmaW5lZClvZmZzZXQ9MDt0aGlzLl94PWFycmF5W29mZnNldF07dGhpcy5feT1hcnJheVtvZmZzZXQrMV07dGhpcy5fej1hcnJheVtvZmZzZXQrMl07dGhpcy5fdz1hcnJheVtvZmZzZXQrM107dGhpcy5vbkNoYW5nZUNhbGxiYWNrKCk7cmV0dXJuIHRoaXM7fSx0b0FycmF5OmZ1bmN0aW9uIHRvQXJyYXkoYXJyYXksb2Zmc2V0KXtpZihhcnJheT09PXVuZGVmaW5lZClhcnJheT1bXTtpZihvZmZzZXQ9PT11bmRlZmluZWQpb2Zmc2V0PTA7YXJyYXlbb2Zmc2V0XT10aGlzLl94O2FycmF5W29mZnNldCsxXT10aGlzLl95O2FycmF5W29mZnNldCsyXT10aGlzLl96O2FycmF5W29mZnNldCszXT10aGlzLl93O3JldHVybiBhcnJheTt9LG9uQ2hhbmdlOmZ1bmN0aW9uIG9uQ2hhbmdlKGNhbGxiYWNrKXt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2s9Y2FsbGJhY2s7cmV0dXJuIHRoaXM7fSxvbkNoYW5nZUNhbGxiYWNrOmZ1bmN0aW9uIG9uQ2hhbmdlQ2FsbGJhY2soKXt9fSk7LyoqCiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vCiAqIEBhdXRob3Iga2lsZSAvIGh0dHA6Ly9raWxlLnN0cmF2YWdhbnphLm9yZy8KICogQGF1dGhvciBwaGlsb2diIC8gaHR0cDovL2Jsb2cudGhlaml0Lm9yZy8KICogQGF1dGhvciBtaWthZWwgZW10aW5nZXIgLyBodHRwOi8vZ29tby5zZS8KICogQGF1dGhvciBlZ3JhZXRoZXIgLyBodHRwOi8vZWdyYWV0aGVyLmNvbS8KICogQGF1dGhvciBXZXN0TGFuZ2xleSAvIGh0dHA6Ly9naXRodWIuY29tL1dlc3RMYW5nbGV5CiAqL2Z1bmN0aW9uIFZlY3RvcjMoeCx5LHope3RoaXMueD14fHwwO3RoaXMueT15fHwwO3RoaXMuej16fHwwO31PYmplY3QuYXNzaWduKFZlY3RvcjMucHJvdG90eXBlLHtpc1ZlY3RvcjM6dHJ1ZSxzZXQ6ZnVuY3Rpb24gc2V0KHgseSx6KXt0aGlzLng9eDt0aGlzLnk9eTt0aGlzLno9ejtyZXR1cm4gdGhpczt9LHNldFNjYWxhcjpmdW5jdGlvbiBzZXRTY2FsYXIoc2NhbGFyKXt0aGlzLng9c2NhbGFyO3RoaXMueT1zY2FsYXI7dGhpcy56PXNjYWxhcjtyZXR1cm4gdGhpczt9LHNldFg6ZnVuY3Rpb24gc2V0WCh4KXt0aGlzLng9eDtyZXR1cm4gdGhpczt9LHNldFk6ZnVuY3Rpb24gc2V0WSh5KXt0aGlzLnk9eTtyZXR1cm4gdGhpczt9LHNldFo6ZnVuY3Rpb24gc2V0Wih6KXt0aGlzLno9ejtyZXR1cm4gdGhpczt9LHNldENvbXBvbmVudDpmdW5jdGlvbiBzZXRDb21wb25lbnQoaW5kZXgsdmFsdWUpe3N3aXRjaChpbmRleCl7Y2FzZSAwOnRoaXMueD12YWx1ZTticmVhaztjYXNlIDE6dGhpcy55PXZhbHVlO2JyZWFrO2Nhc2UgMjp0aGlzLno9dmFsdWU7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoJ2luZGV4IGlzIG91dCBvZiByYW5nZTogJytpbmRleCk7fXJldHVybiB0aGlzO30sZ2V0Q29tcG9uZW50OmZ1bmN0aW9uIGdldENvbXBvbmVudChpbmRleCl7c3dpdGNoKGluZGV4KXtjYXNlIDA6cmV0dXJuIHRoaXMueDtjYXNlIDE6cmV0dXJuIHRoaXMueTtjYXNlIDI6cmV0dXJuIHRoaXMuejtkZWZhdWx0OnRocm93IG5ldyBFcnJvcignaW5kZXggaXMgb3V0IG9mIHJhbmdlOiAnK2luZGV4KTt9fSxjbG9uZTpmdW5jdGlvbiBjbG9uZSgpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLngsdGhpcy55LHRoaXMueik7fSxjb3B5OmZ1bmN0aW9uIGNvcHkodil7dGhpcy54PXYueDt0aGlzLnk9di55O3RoaXMuej12Lno7cmV0dXJuIHRoaXM7fSxhZGQ6ZnVuY3Rpb24gYWRkKHYsdyl7aWYodyE9PXVuZGVmaW5lZCl7Y29uc29sZS53YXJuKCdUSFJFRS5WZWN0b3IzOiAuYWRkKCkgbm93IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIFVzZSAuYWRkVmVjdG9ycyggYSwgYiApIGluc3RlYWQuJyk7cmV0dXJuIHRoaXMuYWRkVmVjdG9ycyh2LHcpO310aGlzLngrPXYueDt0aGlzLnkrPXYueTt0aGlzLnorPXYuejtyZXR1cm4gdGhpczt9LGFkZFNjYWxhcjpmdW5jdGlvbiBhZGRTY2FsYXIocyl7dGhpcy54Kz1zO3RoaXMueSs9czt0aGlzLnorPXM7cmV0dXJuIHRoaXM7fSxhZGRWZWN0b3JzOmZ1bmN0aW9uIGFkZFZlY3RvcnMoYSxiKXt0aGlzLng9YS54K2IueDt0aGlzLnk9YS55K2IueTt0aGlzLno9YS56K2IuejtyZXR1cm4gdGhpczt9LGFkZFNjYWxlZFZlY3RvcjpmdW5jdGlvbiBhZGRTY2FsZWRWZWN0b3IodixzKXt0aGlzLngrPXYueCpzO3RoaXMueSs9di55KnM7dGhpcy56Kz12LnoqcztyZXR1cm4gdGhpczt9LHN1YjpmdW5jdGlvbiBzdWIodix3KXtpZih3IT09dW5kZWZpbmVkKXtjb25zb2xlLndhcm4oJ1RIUkVFLlZlY3RvcjM6IC5zdWIoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5zdWJWZWN0b3JzKCBhLCBiICkgaW5zdGVhZC4nKTtyZXR1cm4gdGhpcy5zdWJWZWN0b3JzKHYsdyk7fXRoaXMueC09di54O3RoaXMueS09di55O3RoaXMuei09di56O3JldHVybiB0aGlzO30sc3ViU2NhbGFyOmZ1bmN0aW9uIHN1YlNjYWxhcihzKXt0aGlzLngtPXM7dGhpcy55LT1zO3RoaXMuei09cztyZXR1cm4gdGhpczt9LHN1YlZlY3RvcnM6ZnVuY3Rpb24gc3ViVmVjdG9ycyhhLGIpe3RoaXMueD1hLngtYi54O3RoaXMueT1hLnktYi55O3RoaXMuej1hLnotYi56O3JldHVybiB0aGlzO30sbXVsdGlwbHk6ZnVuY3Rpb24gbXVsdGlwbHkodix3KXtpZih3IT09dW5kZWZpbmVkKXtjb25zb2xlLndhcm4oJ1RIUkVFLlZlY3RvcjM6IC5tdWx0aXBseSgpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLm11bHRpcGx5VmVjdG9ycyggYSwgYiApIGluc3RlYWQuJyk7cmV0dXJuIHRoaXMubXVsdGlwbHlWZWN0b3JzKHYsdyk7fXRoaXMueCo9di54O3RoaXMueSo9di55O3RoaXMueio9di56O3JldHVybiB0aGlzO30sbXVsdGlwbHlTY2FsYXI6ZnVuY3Rpb24gbXVsdGlwbHlTY2FsYXIoc2NhbGFyKXt0aGlzLngqPXNjYWxhcjt0aGlzLnkqPXNjYWxhcjt0aGlzLnoqPXNjYWxhcjtyZXR1cm4gdGhpczt9LG11bHRpcGx5VmVjdG9yczpmdW5jdGlvbiBtdWx0aXBseVZlY3RvcnMoYSxiKXt0aGlzLng9YS54KmIueDt0aGlzLnk9YS55KmIueTt0aGlzLno9YS56KmIuejtyZXR1cm4gdGhpczt9LGFwcGx5RXVsZXI6ZnVuY3Rpb24oKXt2YXIgcXVhdGVybmlvbj1uZXcgUXVhdGVybmlvbigpO3JldHVybiBmdW5jdGlvbiBhcHBseUV1bGVyKGV1bGVyKXtpZighKGV1bGVyJiZldWxlci5pc0V1bGVyKSl7Y29uc29sZS5lcnJvcignVEhSRUUuVmVjdG9yMzogLmFwcGx5RXVsZXIoKSBub3cgZXhwZWN0cyBhbiBFdWxlciByb3RhdGlvbiByYXRoZXIgdGhhbiBhIFZlY3RvcjMgYW5kIG9yZGVyLicpO31yZXR1cm4gdGhpcy5hcHBseVF1YXRlcm5pb24ocXVhdGVybmlvbi5zZXRGcm9tRXVsZXIoZXVsZXIpKTt9O30oKSxhcHBseUF4aXNBbmdsZTpmdW5jdGlvbigpe3ZhciBxdWF0ZXJuaW9uPW5ldyBRdWF0ZXJuaW9uKCk7cmV0dXJuIGZ1bmN0aW9uIGFwcGx5QXhpc0FuZ2xlKGF4aXMsYW5nbGUpe3JldHVybiB0aGlzLmFwcGx5UXVhdGVybmlvbihxdWF0ZXJuaW9uLnNldEZyb21BeGlzQW5nbGUoYXhpcyxhbmdsZSkpO307fSgpLGFwcGx5TWF0cml4MzpmdW5jdGlvbiBhcHBseU1hdHJpeDMobSl7dmFyIHg9dGhpcy54LHk9dGhpcy55LHo9dGhpcy56O3ZhciBlPW0uZWxlbWVudHM7dGhpcy54PWVbMF0qeCtlWzNdKnkrZVs2XSp6O3RoaXMueT1lWzFdKngrZVs0XSp5K2VbN10qejt0aGlzLno9ZVsyXSp4K2VbNV0qeStlWzhdKno7cmV0dXJuIHRoaXM7fSxhcHBseU1hdHJpeDQ6ZnVuY3Rpb24gYXBwbHlNYXRyaXg0KG0pe3ZhciB4PXRoaXMueCx5PXRoaXMueSx6PXRoaXMuejt2YXIgZT1tLmVsZW1lbnRzO3ZhciB3PTEvKGVbM10qeCtlWzddKnkrZVsxMV0qeitlWzE1XSk7dGhpcy54PShlWzBdKngrZVs0XSp5K2VbOF0qeitlWzEyXSkqdzt0aGlzLnk9KGVbMV0qeCtlWzVdKnkrZVs5XSp6K2VbMTNdKSp3O3RoaXMuej0oZVsyXSp4K2VbNl0qeStlWzEwXSp6K2VbMTRdKSp3O3JldHVybiB0aGlzO30sYXBwbHlRdWF0ZXJuaW9uOmZ1bmN0aW9uIGFwcGx5UXVhdGVybmlvbihxKXt2YXIgeD10aGlzLngseT10aGlzLnksej10aGlzLno7dmFyIHF4PXEueCxxeT1xLnkscXo9cS56LHF3PXEudzsvLyBjYWxjdWxhdGUgcXVhdCAqIHZlY3Rvcgp2YXIgaXg9cXcqeCtxeSp6LXF6Knk7dmFyIGl5PXF3KnkrcXoqeC1xeCp6O3ZhciBpej1xdyp6K3F4KnktcXkqeDt2YXIgaXc9LXF4KngtcXkqeS1xeip6Oy8vIGNhbGN1bGF0ZSByZXN1bHQgKiBpbnZlcnNlIHF1YXQKdGhpcy54PWl4KnF3K2l3Ki1xeCtpeSotcXotaXoqLXF5O3RoaXMueT1peSpxdytpdyotcXkraXoqLXF4LWl4Ki1xejt0aGlzLno9aXoqcXcraXcqLXF6K2l4Ki1xeS1peSotcXg7cmV0dXJuIHRoaXM7fSxwcm9qZWN0OmZ1bmN0aW9uKCl7dmFyIG1hdHJpeD1uZXcgTWF0cml4NCgpO3JldHVybiBmdW5jdGlvbiBwcm9qZWN0KGNhbWVyYSl7bWF0cml4Lm11bHRpcGx5TWF0cmljZXMoY2FtZXJhLnByb2plY3Rpb25NYXRyaXgsbWF0cml4LmdldEludmVyc2UoY2FtZXJhLm1hdHJpeFdvcmxkKSk7cmV0dXJuIHRoaXMuYXBwbHlNYXRyaXg0KG1hdHJpeCk7fTt9KCksdW5wcm9qZWN0OmZ1bmN0aW9uKCl7dmFyIG1hdHJpeD1uZXcgTWF0cml4NCgpO3JldHVybiBmdW5jdGlvbiB1bnByb2plY3QoY2FtZXJhKXttYXRyaXgubXVsdGlwbHlNYXRyaWNlcyhjYW1lcmEubWF0cml4V29ybGQsbWF0cml4LmdldEludmVyc2UoY2FtZXJhLnByb2plY3Rpb25NYXRyaXgpKTtyZXR1cm4gdGhpcy5hcHBseU1hdHJpeDQobWF0cml4KTt9O30oKSx0cmFuc2Zvcm1EaXJlY3Rpb246ZnVuY3Rpb24gdHJhbnNmb3JtRGlyZWN0aW9uKG0pey8vIGlucHV0OiBUSFJFRS5NYXRyaXg0IGFmZmluZSBtYXRyaXgKLy8gdmVjdG9yIGludGVycHJldGVkIGFzIGEgZGlyZWN0aW9uCnZhciB4PXRoaXMueCx5PXRoaXMueSx6PXRoaXMuejt2YXIgZT1tLmVsZW1lbnRzO3RoaXMueD1lWzBdKngrZVs0XSp5K2VbOF0qejt0aGlzLnk9ZVsxXSp4K2VbNV0qeStlWzldKno7dGhpcy56PWVbMl0qeCtlWzZdKnkrZVsxMF0qejtyZXR1cm4gdGhpcy5ub3JtYWxpemUoKTt9LGRpdmlkZTpmdW5jdGlvbiBkaXZpZGUodil7dGhpcy54Lz12Lng7dGhpcy55Lz12Lnk7dGhpcy56Lz12Lno7cmV0dXJuIHRoaXM7fSxkaXZpZGVTY2FsYXI6ZnVuY3Rpb24gZGl2aWRlU2NhbGFyKHNjYWxhcil7cmV0dXJuIHRoaXMubXVsdGlwbHlTY2FsYXIoMS9zY2FsYXIpO30sbWluOmZ1bmN0aW9uIG1pbih2KXt0aGlzLng9TWF0aC5taW4odGhpcy54LHYueCk7dGhpcy55PU1hdGgubWluKHRoaXMueSx2LnkpO3RoaXMuej1NYXRoLm1pbih0aGlzLnosdi56KTtyZXR1cm4gdGhpczt9LG1heDpmdW5jdGlvbiBtYXgodil7dGhpcy54PU1hdGgubWF4KHRoaXMueCx2LngpO3RoaXMueT1NYXRoLm1heCh0aGlzLnksdi55KTt0aGlzLno9TWF0aC5tYXgodGhpcy56LHYueik7cmV0dXJuIHRoaXM7fSxjbGFtcDpmdW5jdGlvbiBjbGFtcChtaW4sbWF4KXsvLyBhc3N1bWVzIG1pbiA8IG1heCwgY29tcG9uZW50d2lzZQp0aGlzLng9TWF0aC5tYXgobWluLngsTWF0aC5taW4obWF4LngsdGhpcy54KSk7dGhpcy55PU1hdGgubWF4KG1pbi55LE1hdGgubWluKG1heC55LHRoaXMueSkpO3RoaXMuej1NYXRoLm1heChtaW4ueixNYXRoLm1pbihtYXgueix0aGlzLnopKTtyZXR1cm4gdGhpczt9LGNsYW1wU2NhbGFyOmZ1bmN0aW9uKCl7dmFyIG1pbj1uZXcgVmVjdG9yMygpO3ZhciBtYXg9bmV3IFZlY3RvcjMoKTtyZXR1cm4gZnVuY3Rpb24gY2xhbXBTY2FsYXIobWluVmFsLG1heFZhbCl7bWluLnNldChtaW5WYWwsbWluVmFsLG1pblZhbCk7bWF4LnNldChtYXhWYWwsbWF4VmFsLG1heFZhbCk7cmV0dXJuIHRoaXMuY2xhbXAobWluLG1heCk7fTt9KCksY2xhbXBMZW5ndGg6ZnVuY3Rpb24gY2xhbXBMZW5ndGgobWluLG1heCl7dmFyIGxlbmd0aD10aGlzLmxlbmd0aCgpO3JldHVybiB0aGlzLmRpdmlkZVNjYWxhcihsZW5ndGh8fDEpLm11bHRpcGx5U2NhbGFyKE1hdGgubWF4KG1pbixNYXRoLm1pbihtYXgsbGVuZ3RoKSkpO30sZmxvb3I6ZnVuY3Rpb24gZmxvb3IoKXt0aGlzLng9TWF0aC5mbG9vcih0aGlzLngpO3RoaXMueT1NYXRoLmZsb29yKHRoaXMueSk7dGhpcy56PU1hdGguZmxvb3IodGhpcy56KTtyZXR1cm4gdGhpczt9LGNlaWw6ZnVuY3Rpb24gY2VpbCgpe3RoaXMueD1NYXRoLmNlaWwodGhpcy54KTt0aGlzLnk9TWF0aC5jZWlsKHRoaXMueSk7dGhpcy56PU1hdGguY2VpbCh0aGlzLnopO3JldHVybiB0aGlzO30scm91bmQ6ZnVuY3Rpb24gcm91bmQoKXt0aGlzLng9TWF0aC5yb3VuZCh0aGlzLngpO3RoaXMueT1NYXRoLnJvdW5kKHRoaXMueSk7dGhpcy56PU1hdGgucm91bmQodGhpcy56KTtyZXR1cm4gdGhpczt9LHJvdW5kVG9aZXJvOmZ1bmN0aW9uIHJvdW5kVG9aZXJvKCl7dGhpcy54PXRoaXMueDwwP01hdGguY2VpbCh0aGlzLngpOk1hdGguZmxvb3IodGhpcy54KTt0aGlzLnk9dGhpcy55PDA/TWF0aC5jZWlsKHRoaXMueSk6TWF0aC5mbG9vcih0aGlzLnkpO3RoaXMuej10aGlzLno8MD9NYXRoLmNlaWwodGhpcy56KTpNYXRoLmZsb29yKHRoaXMueik7cmV0dXJuIHRoaXM7fSxuZWdhdGU6ZnVuY3Rpb24gbmVnYXRlKCl7dGhpcy54PS10aGlzLng7dGhpcy55PS10aGlzLnk7dGhpcy56PS10aGlzLno7cmV0dXJuIHRoaXM7fSxkb3Q6ZnVuY3Rpb24gZG90KHYpe3JldHVybiB0aGlzLngqdi54K3RoaXMueSp2LnkrdGhpcy56KnYuejt9LC8vIFRPRE8gbGVuZ3RoU3F1YXJlZD8KbGVuZ3RoU3E6ZnVuY3Rpb24gbGVuZ3RoU3EoKXtyZXR1cm4gdGhpcy54KnRoaXMueCt0aGlzLnkqdGhpcy55K3RoaXMueip0aGlzLno7fSxsZW5ndGg6ZnVuY3Rpb24gbGVuZ3RoKCl7cmV0dXJuIE1hdGguc3FydCh0aGlzLngqdGhpcy54K3RoaXMueSp0aGlzLnkrdGhpcy56KnRoaXMueik7fSxtYW5oYXR0YW5MZW5ndGg6ZnVuY3Rpb24gbWFuaGF0dGFuTGVuZ3RoKCl7cmV0dXJuIE1hdGguYWJzKHRoaXMueCkrTWF0aC5hYnModGhpcy55KStNYXRoLmFicyh0aGlzLnopO30sbm9ybWFsaXplOmZ1bmN0aW9uIG5vcm1hbGl6ZSgpe3JldHVybiB0aGlzLmRpdmlkZVNjYWxhcih0aGlzLmxlbmd0aCgpfHwxKTt9LHNldExlbmd0aDpmdW5jdGlvbiBzZXRMZW5ndGgobGVuZ3RoKXtyZXR1cm4gdGhpcy5ub3JtYWxpemUoKS5tdWx0aXBseVNjYWxhcihsZW5ndGgpO30sbGVycDpmdW5jdGlvbiBsZXJwKHYsYWxwaGEpe3RoaXMueCs9KHYueC10aGlzLngpKmFscGhhO3RoaXMueSs9KHYueS10aGlzLnkpKmFscGhhO3RoaXMueis9KHYuei10aGlzLnopKmFscGhhO3JldHVybiB0aGlzO30sbGVycFZlY3RvcnM6ZnVuY3Rpb24gbGVycFZlY3RvcnModjEsdjIsYWxwaGEpe3JldHVybiB0aGlzLnN1YlZlY3RvcnModjIsdjEpLm11bHRpcGx5U2NhbGFyKGFscGhhKS5hZGQodjEpO30sY3Jvc3M6ZnVuY3Rpb24gY3Jvc3Modix3KXtpZih3IT09dW5kZWZpbmVkKXtjb25zb2xlLndhcm4oJ1RIUkVFLlZlY3RvcjM6IC5jcm9zcygpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLmNyb3NzVmVjdG9ycyggYSwgYiApIGluc3RlYWQuJyk7cmV0dXJuIHRoaXMuY3Jvc3NWZWN0b3JzKHYsdyk7fXJldHVybiB0aGlzLmNyb3NzVmVjdG9ycyh0aGlzLHYpO30sY3Jvc3NWZWN0b3JzOmZ1bmN0aW9uIGNyb3NzVmVjdG9ycyhhLGIpe3ZhciBheD1hLngsYXk9YS55LGF6PWEuejt2YXIgYng9Yi54LGJ5PWIueSxiej1iLno7dGhpcy54PWF5KmJ6LWF6KmJ5O3RoaXMueT1heipieC1heCpiejt0aGlzLno9YXgqYnktYXkqYng7cmV0dXJuIHRoaXM7fSxwcm9qZWN0T25WZWN0b3I6ZnVuY3Rpb24gcHJvamVjdE9uVmVjdG9yKHZlY3Rvcil7dmFyIHNjYWxhcj12ZWN0b3IuZG90KHRoaXMpL3ZlY3Rvci5sZW5ndGhTcSgpO3JldHVybiB0aGlzLmNvcHkodmVjdG9yKS5tdWx0aXBseVNjYWxhcihzY2FsYXIpO30scHJvamVjdE9uUGxhbmU6ZnVuY3Rpb24oKXt2YXIgdjE9bmV3IFZlY3RvcjMoKTtyZXR1cm4gZnVuY3Rpb24gcHJvamVjdE9uUGxhbmUocGxhbmVOb3JtYWwpe3YxLmNvcHkodGhpcykucHJvamVjdE9uVmVjdG9yKHBsYW5lTm9ybWFsKTtyZXR1cm4gdGhpcy5zdWIodjEpO307fSgpLHJlZmxlY3Q6ZnVuY3Rpb24oKXsvLyByZWZsZWN0IGluY2lkZW50IHZlY3RvciBvZmYgcGxhbmUgb3J0aG9nb25hbCB0byBub3JtYWwKLy8gbm9ybWFsIGlzIGFzc3VtZWQgdG8gaGF2ZSB1bml0IGxlbmd0aAp2YXIgdjE9bmV3IFZlY3RvcjMoKTtyZXR1cm4gZnVuY3Rpb24gcmVmbGVjdChub3JtYWwpe3JldHVybiB0aGlzLnN1Yih2MS5jb3B5KG5vcm1hbCkubXVsdGlwbHlTY2FsYXIoMip0aGlzLmRvdChub3JtYWwpKSk7fTt9KCksYW5nbGVUbzpmdW5jdGlvbiBhbmdsZVRvKHYpe3ZhciB0aGV0YT10aGlzLmRvdCh2KS9NYXRoLnNxcnQodGhpcy5sZW5ndGhTcSgpKnYubGVuZ3RoU3EoKSk7Ly8gY2xhbXAsIHRvIGhhbmRsZSBudW1lcmljYWwgcHJvYmxlbXMKcmV0dXJuIE1hdGguYWNvcyhfTWF0aC5jbGFtcCh0aGV0YSwtMSwxKSk7fSxkaXN0YW5jZVRvOmZ1bmN0aW9uIGRpc3RhbmNlVG8odil7cmV0dXJuIE1hdGguc3FydCh0aGlzLmRpc3RhbmNlVG9TcXVhcmVkKHYpKTt9LGRpc3RhbmNlVG9TcXVhcmVkOmZ1bmN0aW9uIGRpc3RhbmNlVG9TcXVhcmVkKHYpe3ZhciBkeD10aGlzLngtdi54LGR5PXRoaXMueS12LnksZHo9dGhpcy56LXYuejtyZXR1cm4gZHgqZHgrZHkqZHkrZHoqZHo7fSxtYW5oYXR0YW5EaXN0YW5jZVRvOmZ1bmN0aW9uIG1hbmhhdHRhbkRpc3RhbmNlVG8odil7cmV0dXJuIE1hdGguYWJzKHRoaXMueC12LngpK01hdGguYWJzKHRoaXMueS12LnkpK01hdGguYWJzKHRoaXMuei12LnopO30sc2V0RnJvbVNwaGVyaWNhbDpmdW5jdGlvbiBzZXRGcm9tU3BoZXJpY2FsKHMpe3ZhciBzaW5QaGlSYWRpdXM9TWF0aC5zaW4ocy5waGkpKnMucmFkaXVzO3RoaXMueD1zaW5QaGlSYWRpdXMqTWF0aC5zaW4ocy50aGV0YSk7dGhpcy55PU1hdGguY29zKHMucGhpKSpzLnJhZGl1czt0aGlzLno9c2luUGhpUmFkaXVzKk1hdGguY29zKHMudGhldGEpO3JldHVybiB0aGlzO30sc2V0RnJvbUN5bGluZHJpY2FsOmZ1bmN0aW9uIHNldEZyb21DeWxpbmRyaWNhbChjKXt0aGlzLng9Yy5yYWRpdXMqTWF0aC5zaW4oYy50aGV0YSk7dGhpcy55PWMueTt0aGlzLno9Yy5yYWRpdXMqTWF0aC5jb3MoYy50aGV0YSk7cmV0dXJuIHRoaXM7fSxzZXRGcm9tTWF0cml4UG9zaXRpb246ZnVuY3Rpb24gc2V0RnJvbU1hdHJpeFBvc2l0aW9uKG0pe3ZhciBlPW0uZWxlbWVudHM7dGhpcy54PWVbMTJdO3RoaXMueT1lWzEzXTt0aGlzLno9ZVsxNF07cmV0dXJuIHRoaXM7fSxzZXRGcm9tTWF0cml4U2NhbGU6ZnVuY3Rpb24gc2V0RnJvbU1hdHJpeFNjYWxlKG0pe3ZhciBzeD10aGlzLnNldEZyb21NYXRyaXhDb2x1bW4obSwwKS5sZW5ndGgoKTt2YXIgc3k9dGhpcy5zZXRGcm9tTWF0cml4Q29sdW1uKG0sMSkubGVuZ3RoKCk7dmFyIHN6PXRoaXMuc2V0RnJvbU1hdHJpeENvbHVtbihtLDIpLmxlbmd0aCgpO3RoaXMueD1zeDt0aGlzLnk9c3k7dGhpcy56PXN6O3JldHVybiB0aGlzO30sc2V0RnJvbU1hdHJpeENvbHVtbjpmdW5jdGlvbiBzZXRGcm9tTWF0cml4Q29sdW1uKG0saW5kZXgpe3JldHVybiB0aGlzLmZyb21BcnJheShtLmVsZW1lbnRzLGluZGV4KjQpO30sZXF1YWxzOmZ1bmN0aW9uIGVxdWFscyh2KXtyZXR1cm4gdi54PT09dGhpcy54JiZ2Lnk9PT10aGlzLnkmJnYuej09PXRoaXMuejt9LGZyb21BcnJheTpmdW5jdGlvbiBmcm9tQXJyYXkoYXJyYXksb2Zmc2V0KXtpZihvZmZzZXQ9PT11bmRlZmluZWQpb2Zmc2V0PTA7dGhpcy54PWFycmF5W29mZnNldF07dGhpcy55PWFycmF5W29mZnNldCsxXTt0aGlzLno9YXJyYXlbb2Zmc2V0KzJdO3JldHVybiB0aGlzO30sdG9BcnJheTpmdW5jdGlvbiB0b0FycmF5KGFycmF5LG9mZnNldCl7aWYoYXJyYXk9PT11bmRlZmluZWQpYXJyYXk9W107aWYob2Zmc2V0PT09dW5kZWZpbmVkKW9mZnNldD0wO2FycmF5W29mZnNldF09dGhpcy54O2FycmF5W29mZnNldCsxXT10aGlzLnk7YXJyYXlbb2Zmc2V0KzJdPXRoaXMuejtyZXR1cm4gYXJyYXk7fSxmcm9tQnVmZmVyQXR0cmlidXRlOmZ1bmN0aW9uIGZyb21CdWZmZXJBdHRyaWJ1dGUoYXR0cmlidXRlLGluZGV4LG9mZnNldCl7aWYob2Zmc2V0IT09dW5kZWZpbmVkKXtjb25zb2xlLndhcm4oJ1RIUkVFLlZlY3RvcjM6IG9mZnNldCBoYXMgYmVlbiByZW1vdmVkIGZyb20gLmZyb21CdWZmZXJBdHRyaWJ1dGUoKS4nKTt9dGhpcy54PWF0dHJpYnV0ZS5nZXRYKGluZGV4KTt0aGlzLnk9YXR0cmlidXRlLmdldFkoaW5kZXgpO3RoaXMuej1hdHRyaWJ1dGUuZ2V0WihpbmRleCk7cmV0dXJuIHRoaXM7fX0pOy8qKgogKiBAYXV0aG9yIGFsdGVyZWRxIC8gaHR0cDovL2FsdGVyZWRxdWFsaWEuY29tLwogKiBAYXV0aG9yIFdlc3RMYW5nbGV5IC8gaHR0cDovL2dpdGh1Yi5jb20vV2VzdExhbmdsZXkKICogQGF1dGhvciBiaG91c3RvbiAvIGh0dHA6Ly9jbGFyYS5pbwogKiBAYXV0aG9yIHRzY2h3CiAqL2Z1bmN0aW9uIE1hdHJpeDMoKXt0aGlzLmVsZW1lbnRzPVsxLDAsMCwwLDEsMCwwLDAsMV07aWYoYXJndW1lbnRzLmxlbmd0aD4wKXtjb25zb2xlLmVycm9yKCdUSFJFRS5NYXRyaXgzOiB0aGUgY29uc3RydWN0b3Igbm8gbG9uZ2VyIHJlYWRzIGFyZ3VtZW50cy4gdXNlIC5zZXQoKSBpbnN0ZWFkLicpO319T2JqZWN0LmFzc2lnbihNYXRyaXgzLnByb3RvdHlwZSx7aXNNYXRyaXgzOnRydWUsc2V0OmZ1bmN0aW9uIHNldChuMTEsbjEyLG4xMyxuMjEsbjIyLG4yMyxuMzEsbjMyLG4zMyl7dmFyIHRlPXRoaXMuZWxlbWVudHM7dGVbMF09bjExO3RlWzFdPW4yMTt0ZVsyXT1uMzE7dGVbM109bjEyO3RlWzRdPW4yMjt0ZVs1XT1uMzI7dGVbNl09bjEzO3RlWzddPW4yMzt0ZVs4XT1uMzM7cmV0dXJuIHRoaXM7fSxpZGVudGl0eTpmdW5jdGlvbiBpZGVudGl0eSgpe3RoaXMuc2V0KDEsMCwwLDAsMSwwLDAsMCwxKTtyZXR1cm4gdGhpczt9LGNsb25lOmZ1bmN0aW9uIGNsb25lKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKCkuZnJvbUFycmF5KHRoaXMuZWxlbWVudHMpO30sY29weTpmdW5jdGlvbiBjb3B5KG0pe3ZhciB0ZT10aGlzLmVsZW1lbnRzO3ZhciBtZT1tLmVsZW1lbnRzO3RlWzBdPW1lWzBdO3RlWzFdPW1lWzFdO3RlWzJdPW1lWzJdO3RlWzNdPW1lWzNdO3RlWzRdPW1lWzRdO3RlWzVdPW1lWzVdO3RlWzZdPW1lWzZdO3RlWzddPW1lWzddO3RlWzhdPW1lWzhdO3JldHVybiB0aGlzO30sc2V0RnJvbU1hdHJpeDQ6ZnVuY3Rpb24gc2V0RnJvbU1hdHJpeDQobSl7dmFyIG1lPW0uZWxlbWVudHM7dGhpcy5zZXQobWVbMF0sbWVbNF0sbWVbOF0sbWVbMV0sbWVbNV0sbWVbOV0sbWVbMl0sbWVbNl0sbWVbMTBdKTtyZXR1cm4gdGhpczt9LGFwcGx5VG9CdWZmZXJBdHRyaWJ1dGU6ZnVuY3Rpb24oKXt2YXIgdjE9bmV3IFZlY3RvcjMoKTtyZXR1cm4gZnVuY3Rpb24gYXBwbHlUb0J1ZmZlckF0dHJpYnV0ZShhdHRyaWJ1dGUpe2Zvcih2YXIgaT0wLGw9YXR0cmlidXRlLmNvdW50O2k8bDtpKyspe3YxLng9YXR0cmlidXRlLmdldFgoaSk7djEueT1hdHRyaWJ1dGUuZ2V0WShpKTt2MS56PWF0dHJpYnV0ZS5nZXRaKGkpO3YxLmFwcGx5TWF0cml4Myh0aGlzKTthdHRyaWJ1dGUuc2V0WFlaKGksdjEueCx2MS55LHYxLnopO31yZXR1cm4gYXR0cmlidXRlO307fSgpLG11bHRpcGx5OmZ1bmN0aW9uIG11bHRpcGx5KG0pe3JldHVybiB0aGlzLm11bHRpcGx5TWF0cmljZXModGhpcyxtKTt9LHByZW11bHRpcGx5OmZ1bmN0aW9uIHByZW11bHRpcGx5KG0pe3JldHVybiB0aGlzLm11bHRpcGx5TWF0cmljZXMobSx0aGlzKTt9LG11bHRpcGx5TWF0cmljZXM6ZnVuY3Rpb24gbXVsdGlwbHlNYXRyaWNlcyhhLGIpe3ZhciBhZT1hLmVsZW1lbnRzO3ZhciBiZT1iLmVsZW1lbnRzO3ZhciB0ZT10aGlzLmVsZW1lbnRzO3ZhciBhMTE9YWVbMF0sYTEyPWFlWzNdLGExMz1hZVs2XTt2YXIgYTIxPWFlWzFdLGEyMj1hZVs0XSxhMjM9YWVbN107dmFyIGEzMT1hZVsyXSxhMzI9YWVbNV0sYTMzPWFlWzhdO3ZhciBiMTE9YmVbMF0sYjEyPWJlWzNdLGIxMz1iZVs2XTt2YXIgYjIxPWJlWzFdLGIyMj1iZVs0XSxiMjM9YmVbN107dmFyIGIzMT1iZVsyXSxiMzI9YmVbNV0sYjMzPWJlWzhdO3RlWzBdPWExMSpiMTErYTEyKmIyMSthMTMqYjMxO3RlWzNdPWExMSpiMTIrYTEyKmIyMithMTMqYjMyO3RlWzZdPWExMSpiMTMrYTEyKmIyMythMTMqYjMzO3RlWzFdPWEyMSpiMTErYTIyKmIyMSthMjMqYjMxO3RlWzRdPWEyMSpiMTIrYTIyKmIyMithMjMqYjMyO3RlWzddPWEyMSpiMTMrYTIyKmIyMythMjMqYjMzO3RlWzJdPWEzMSpiMTErYTMyKmIyMSthMzMqYjMxO3RlWzVdPWEzMSpiMTIrYTMyKmIyMithMzMqYjMyO3RlWzhdPWEzMSpiMTMrYTMyKmIyMythMzMqYjMzO3JldHVybiB0aGlzO30sbXVsdGlwbHlTY2FsYXI6ZnVuY3Rpb24gbXVsdGlwbHlTY2FsYXIocyl7dmFyIHRlPXRoaXMuZWxlbWVudHM7dGVbMF0qPXM7dGVbM10qPXM7dGVbNl0qPXM7dGVbMV0qPXM7dGVbNF0qPXM7dGVbN10qPXM7dGVbMl0qPXM7dGVbNV0qPXM7dGVbOF0qPXM7cmV0dXJuIHRoaXM7fSxkZXRlcm1pbmFudDpmdW5jdGlvbiBkZXRlcm1pbmFudCgpe3ZhciB0ZT10aGlzLmVsZW1lbnRzO3ZhciBhPXRlWzBdLGI9dGVbMV0sYz10ZVsyXSxkPXRlWzNdLGU9dGVbNF0sZj10ZVs1XSxnPXRlWzZdLGg9dGVbN10saT10ZVs4XTtyZXR1cm4gYSplKmktYSpmKmgtYipkKmkrYipmKmcrYypkKmgtYyplKmc7fSxnZXRJbnZlcnNlOmZ1bmN0aW9uIGdldEludmVyc2UobWF0cml4LHRocm93T25EZWdlbmVyYXRlKXtpZihtYXRyaXgmJm1hdHJpeC5pc01hdHJpeDQpe2NvbnNvbGUuZXJyb3IoIlRIUkVFLk1hdHJpeDM6IC5nZXRJbnZlcnNlKCkgbm8gbG9uZ2VyIHRha2VzIGEgTWF0cml4NCBhcmd1bWVudC4iKTt9dmFyIG1lPW1hdHJpeC5lbGVtZW50cyx0ZT10aGlzLmVsZW1lbnRzLG4xMT1tZVswXSxuMjE9bWVbMV0sbjMxPW1lWzJdLG4xMj1tZVszXSxuMjI9bWVbNF0sbjMyPW1lWzVdLG4xMz1tZVs2XSxuMjM9bWVbN10sbjMzPW1lWzhdLHQxMT1uMzMqbjIyLW4zMipuMjMsdDEyPW4zMipuMTMtbjMzKm4xMix0MTM9bjIzKm4xMi1uMjIqbjEzLGRldD1uMTEqdDExK24yMSp0MTIrbjMxKnQxMztpZihkZXQ9PT0wKXt2YXIgbXNnPSJUSFJFRS5NYXRyaXgzOiAuZ2V0SW52ZXJzZSgpIGNhbid0IGludmVydCBtYXRyaXgsIGRldGVybWluYW50IGlzIDAiO2lmKHRocm93T25EZWdlbmVyYXRlPT09dHJ1ZSl7dGhyb3cgbmV3IEVycm9yKG1zZyk7fWVsc2V7Y29uc29sZS53YXJuKG1zZyk7fXJldHVybiB0aGlzLmlkZW50aXR5KCk7fXZhciBkZXRJbnY9MS9kZXQ7dGVbMF09dDExKmRldEludjt0ZVsxXT0objMxKm4yMy1uMzMqbjIxKSpkZXRJbnY7dGVbMl09KG4zMipuMjEtbjMxKm4yMikqZGV0SW52O3RlWzNdPXQxMipkZXRJbnY7dGVbNF09KG4zMypuMTEtbjMxKm4xMykqZGV0SW52O3RlWzVdPShuMzEqbjEyLW4zMipuMTEpKmRldEludjt0ZVs2XT10MTMqZGV0SW52O3RlWzddPShuMjEqbjEzLW4yMypuMTEpKmRldEludjt0ZVs4XT0objIyKm4xMS1uMjEqbjEyKSpkZXRJbnY7cmV0dXJuIHRoaXM7fSx0cmFuc3Bvc2U6ZnVuY3Rpb24gdHJhbnNwb3NlKCl7dmFyIHRtcCxtPXRoaXMuZWxlbWVudHM7dG1wPW1bMV07bVsxXT1tWzNdO21bM109dG1wO3RtcD1tWzJdO21bMl09bVs2XTttWzZdPXRtcDt0bXA9bVs1XTttWzVdPW1bN107bVs3XT10bXA7cmV0dXJuIHRoaXM7fSxnZXROb3JtYWxNYXRyaXg6ZnVuY3Rpb24gZ2V0Tm9ybWFsTWF0cml4KG1hdHJpeDQpe3JldHVybiB0aGlzLnNldEZyb21NYXRyaXg0KG1hdHJpeDQpLmdldEludmVyc2UodGhpcykudHJhbnNwb3NlKCk7fSx0cmFuc3Bvc2VJbnRvQXJyYXk6ZnVuY3Rpb24gdHJhbnNwb3NlSW50b0FycmF5KHIpe3ZhciBtPXRoaXMuZWxlbWVudHM7clswXT1tWzBdO3JbMV09bVszXTtyWzJdPW1bNl07clszXT1tWzFdO3JbNF09bVs0XTtyWzVdPW1bN107cls2XT1tWzJdO3JbN109bVs1XTtyWzhdPW1bOF07cmV0dXJuIHRoaXM7fSxzZXRVdlRyYW5zZm9ybTpmdW5jdGlvbiBzZXRVdlRyYW5zZm9ybSh0eCx0eSxzeCxzeSxyb3RhdGlvbixjeCxjeSl7dmFyIGM9TWF0aC5jb3Mocm90YXRpb24pO3ZhciBzPU1hdGguc2luKHJvdGF0aW9uKTt0aGlzLnNldChzeCpjLHN4KnMsLXN4KihjKmN4K3MqY3kpK2N4K3R4LC1zeSpzLHN5KmMsLXN5KigtcypjeCtjKmN5KStjeSt0eSwwLDAsMSk7fSxzY2FsZTpmdW5jdGlvbiBzY2FsZShzeCxzeSl7dmFyIHRlPXRoaXMuZWxlbWVudHM7dGVbMF0qPXN4O3RlWzNdKj1zeDt0ZVs2XSo9c3g7dGVbMV0qPXN5O3RlWzRdKj1zeTt0ZVs3XSo9c3k7cmV0dXJuIHRoaXM7fSxyb3RhdGU6ZnVuY3Rpb24gcm90YXRlKHRoZXRhKXt2YXIgYz1NYXRoLmNvcyh0aGV0YSk7dmFyIHM9TWF0aC5zaW4odGhldGEpO3ZhciB0ZT10aGlzLmVsZW1lbnRzO3ZhciBhMTE9dGVbMF0sYTEyPXRlWzNdLGExMz10ZVs2XTt2YXIgYTIxPXRlWzFdLGEyMj10ZVs0XSxhMjM9dGVbN107dGVbMF09YyphMTErcyphMjE7dGVbM109YyphMTIrcyphMjI7dGVbNl09YyphMTMrcyphMjM7dGVbMV09LXMqYTExK2MqYTIxO3RlWzRdPS1zKmExMitjKmEyMjt0ZVs3XT0tcyphMTMrYyphMjM7cmV0dXJuIHRoaXM7fSx0cmFuc2xhdGU6ZnVuY3Rpb24gdHJhbnNsYXRlKHR4LHR5KXt2YXIgdGU9dGhpcy5lbGVtZW50czt0ZVswXSs9dHgqdGVbMl07dGVbM10rPXR4KnRlWzVdO3RlWzZdKz10eCp0ZVs4XTt0ZVsxXSs9dHkqdGVbMl07dGVbNF0rPXR5KnRlWzVdO3RlWzddKz10eSp0ZVs4XTtyZXR1cm4gdGhpczt9LGVxdWFsczpmdW5jdGlvbiBlcXVhbHMobWF0cml4KXt2YXIgdGU9dGhpcy5lbGVtZW50czt2YXIgbWU9bWF0cml4LmVsZW1lbnRzO2Zvcih2YXIgaT0wO2k8OTtpKyspe2lmKHRlW2ldIT09bWVbaV0pcmV0dXJuIGZhbHNlO31yZXR1cm4gdHJ1ZTt9LGZyb21BcnJheTpmdW5jdGlvbiBmcm9tQXJyYXkoYXJyYXksb2Zmc2V0KXtpZihvZmZzZXQ9PT11bmRlZmluZWQpb2Zmc2V0PTA7Zm9yKHZhciBpPTA7aTw5O2krKyl7dGhpcy5lbGVtZW50c1tpXT1hcnJheVtpK29mZnNldF07fXJldHVybiB0aGlzO30sdG9BcnJheTpmdW5jdGlvbiB0b0FycmF5KGFycmF5LG9mZnNldCl7aWYoYXJyYXk9PT11bmRlZmluZWQpYXJyYXk9W107aWYob2Zmc2V0PT09dW5kZWZpbmVkKW9mZnNldD0wO3ZhciB0ZT10aGlzLmVsZW1lbnRzO2FycmF5W29mZnNldF09dGVbMF07YXJyYXlbb2Zmc2V0KzFdPXRlWzFdO2FycmF5W29mZnNldCsyXT10ZVsyXTthcnJheVtvZmZzZXQrM109dGVbM107YXJyYXlbb2Zmc2V0KzRdPXRlWzRdO2FycmF5W29mZnNldCs1XT10ZVs1XTthcnJheVtvZmZzZXQrNl09dGVbNl07YXJyYXlbb2Zmc2V0KzddPXRlWzddO2FycmF5W29mZnNldCs4XT10ZVs4XTtyZXR1cm4gYXJyYXk7fX0pOy8qKgogKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tLwogKiBAYXV0aG9yIGFsdGVyZWRxIC8gaHR0cDovL2FsdGVyZWRxdWFsaWEuY29tLwogKiBAYXV0aG9yIHN6aW1layAvIGh0dHBzOi8vZ2l0aHViLmNvbS9zemltZWsvCiAqL3ZhciB0ZXh0dXJlSWQ9MDtmdW5jdGlvbiBUZXh0dXJlKGltYWdlLG1hcHBpbmcsd3JhcFMsd3JhcFQsbWFnRmlsdGVyLG1pbkZpbHRlcixmb3JtYXQsdHlwZSxhbmlzb3Ryb3B5LGVuY29kaW5nKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywnaWQnLHt2YWx1ZTp0ZXh0dXJlSWQrK30pO3RoaXMudXVpZD1fTWF0aC5nZW5lcmF0ZVVVSUQoKTt0aGlzLm5hbWU9Jyc7dGhpcy5pbWFnZT1pbWFnZSE9PXVuZGVmaW5lZD9pbWFnZTpUZXh0dXJlLkRFRkFVTFRfSU1BR0U7dGhpcy5taXBtYXBzPVtdO3RoaXMubWFwcGluZz1tYXBwaW5nIT09dW5kZWZpbmVkP21hcHBpbmc6VGV4dHVyZS5ERUZBVUxUX01BUFBJTkc7dGhpcy53cmFwUz13cmFwUyE9PXVuZGVmaW5lZD93cmFwUzpDbGFtcFRvRWRnZVdyYXBwaW5nO3RoaXMud3JhcFQ9d3JhcFQhPT11bmRlZmluZWQ/d3JhcFQ6Q2xhbXBUb0VkZ2VXcmFwcGluZzt0aGlzLm1hZ0ZpbHRlcj1tYWdGaWx0ZXIhPT11bmRlZmluZWQ/bWFnRmlsdGVyOkxpbmVhckZpbHRlcjt0aGlzLm1pbkZpbHRlcj1taW5GaWx0ZXIhPT11bmRlZmluZWQ/bWluRmlsdGVyOkxpbmVhck1pcE1hcExpbmVhckZpbHRlcjt0aGlzLmFuaXNvdHJvcHk9YW5pc290cm9weSE9PXVuZGVmaW5lZD9hbmlzb3Ryb3B5OjE7dGhpcy5mb3JtYXQ9Zm9ybWF0IT09dW5kZWZpbmVkP2Zvcm1hdDpSR0JBRm9ybWF0O3RoaXMudHlwZT10eXBlIT09dW5kZWZpbmVkP3R5cGU6VW5zaWduZWRCeXRlVHlwZTt0aGlzLm9mZnNldD1uZXcgVmVjdG9yMigwLDApO3RoaXMucmVwZWF0PW5ldyBWZWN0b3IyKDEsMSk7dGhpcy5jZW50ZXI9bmV3IFZlY3RvcjIoMCwwKTt0aGlzLnJvdGF0aW9uPTA7dGhpcy5tYXRyaXhBdXRvVXBkYXRlPXRydWU7dGhpcy5tYXRyaXg9bmV3IE1hdHJpeDMoKTt0aGlzLmdlbmVyYXRlTWlwbWFwcz10cnVlO3RoaXMucHJlbXVsdGlwbHlBbHBoYT1mYWxzZTt0aGlzLmZsaXBZPXRydWU7dGhpcy51bnBhY2tBbGlnbm1lbnQ9NDsvLyB2YWxpZCB2YWx1ZXM6IDEsIDIsIDQsIDggKHNlZSBodHRwOi8vd3d3Lmtocm9ub3Mub3JnL29wZW5nbGVzL3Nkay9kb2NzL21hbi94aHRtbC9nbFBpeGVsU3RvcmVpLnhtbCkKLy8gVmFsdWVzIG9mIGVuY29kaW5nICE9PSBUSFJFRS5MaW5lYXJFbmNvZGluZyBvbmx5IHN1cHBvcnRlZCBvbiBtYXAsIGVudk1hcCBhbmQgZW1pc3NpdmVNYXAuCi8vCi8vIEFsc28gY2hhbmdpbmcgdGhlIGVuY29kaW5nIGFmdGVyIGFscmVhZHkgdXNlZCBieSBhIE1hdGVyaWFsIHdpbGwgbm90IGF1dG9tYXRpY2FsbHkgbWFrZSB0aGUgTWF0ZXJpYWwKLy8gdXBkYXRlLiAgWW91IG5lZWQgdG8gZXhwbGljaXRseSBjYWxsIE1hdGVyaWFsLm5lZWRzVXBkYXRlIHRvIHRyaWdnZXIgaXQgdG8gcmVjb21waWxlLgp0aGlzLmVuY29kaW5nPWVuY29kaW5nIT09dW5kZWZpbmVkP2VuY29kaW5nOkxpbmVhckVuY29kaW5nO3RoaXMudmVyc2lvbj0wO3RoaXMub25VcGRhdGU9bnVsbDt9VGV4dHVyZS5ERUZBVUxUX0lNQUdFPXVuZGVmaW5lZDtUZXh0dXJlLkRFRkFVTFRfTUFQUElORz1VVk1hcHBpbmc7VGV4dHVyZS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKEV2ZW50RGlzcGF0Y2hlci5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpUZXh0dXJlLGlzVGV4dHVyZTp0cnVlLGNsb25lOmZ1bmN0aW9uIGNsb25lKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKCkuY29weSh0aGlzKTt9LGNvcHk6ZnVuY3Rpb24gY29weShzb3VyY2Upe3RoaXMubmFtZT1zb3VyY2UubmFtZTt0aGlzLmltYWdlPXNvdXJjZS5pbWFnZTt0aGlzLm1pcG1hcHM9c291cmNlLm1pcG1hcHMuc2xpY2UoMCk7dGhpcy5tYXBwaW5nPXNvdXJjZS5tYXBwaW5nO3RoaXMud3JhcFM9c291cmNlLndyYXBTO3RoaXMud3JhcFQ9c291cmNlLndyYXBUO3RoaXMubWFnRmlsdGVyPXNvdXJjZS5tYWdGaWx0ZXI7dGhpcy5taW5GaWx0ZXI9c291cmNlLm1pbkZpbHRlcjt0aGlzLmFuaXNvdHJvcHk9c291cmNlLmFuaXNvdHJvcHk7dGhpcy5mb3JtYXQ9c291cmNlLmZvcm1hdDt0aGlzLnR5cGU9c291cmNlLnR5cGU7dGhpcy5vZmZzZXQuY29weShzb3VyY2Uub2Zmc2V0KTt0aGlzLnJlcGVhdC5jb3B5KHNvdXJjZS5yZXBlYXQpO3RoaXMuY2VudGVyLmNvcHkoc291cmNlLmNlbnRlcik7dGhpcy5yb3RhdGlvbj1zb3VyY2Uucm90YXRpb247dGhpcy5tYXRyaXhBdXRvVXBkYXRlPXNvdXJjZS5tYXRyaXhBdXRvVXBkYXRlO3RoaXMubWF0cml4LmNvcHkoc291cmNlLm1hdHJpeCk7dGhpcy5nZW5lcmF0ZU1pcG1hcHM9c291cmNlLmdlbmVyYXRlTWlwbWFwczt0aGlzLnByZW11bHRpcGx5QWxwaGE9c291cmNlLnByZW11bHRpcGx5QWxwaGE7dGhpcy5mbGlwWT1zb3VyY2UuZmxpcFk7dGhpcy51bnBhY2tBbGlnbm1lbnQ9c291cmNlLnVucGFja0FsaWdubWVudDt0aGlzLmVuY29kaW5nPXNvdXJjZS5lbmNvZGluZztyZXR1cm4gdGhpczt9LHRvSlNPTjpmdW5jdGlvbiB0b0pTT04obWV0YSl7dmFyIGlzUm9vdE9iamVjdD1tZXRhPT09dW5kZWZpbmVkfHx0eXBlb2YgbWV0YT09PSdzdHJpbmcnO2lmKCFpc1Jvb3RPYmplY3QmJm1ldGEudGV4dHVyZXNbdGhpcy51dWlkXSE9PXVuZGVmaW5lZCl7cmV0dXJuIG1ldGEudGV4dHVyZXNbdGhpcy51dWlkXTt9ZnVuY3Rpb24gZ2V0RGF0YVVSTChpbWFnZSl7dmFyIGNhbnZhcztpZihpbWFnZSBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50KXtjYW52YXM9aW1hZ2U7fWVsc2V7Y2FudmFzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCcsJ2NhbnZhcycpO2NhbnZhcy53aWR0aD1pbWFnZS53aWR0aDtjYW52YXMuaGVpZ2h0PWltYWdlLmhlaWdodDt2YXIgY29udGV4dD1jYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtpZihpbWFnZSBpbnN0YW5jZW9mIEltYWdlRGF0YSl7Y29udGV4dC5wdXRJbWFnZURhdGEoaW1hZ2UsMCwwKTt9ZWxzZXtjb250ZXh0LmRyYXdJbWFnZShpbWFnZSwwLDAsaW1hZ2Uud2lkdGgsaW1hZ2UuaGVpZ2h0KTt9fWlmKGNhbnZhcy53aWR0aD4yMDQ4fHxjYW52YXMuaGVpZ2h0PjIwNDgpe3JldHVybiBjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9qcGVnJywwLjYpO31lbHNle3JldHVybiBjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9wbmcnKTt9fXZhciBvdXRwdXQ9e21ldGFkYXRhOnt2ZXJzaW9uOjQuNSx0eXBlOidUZXh0dXJlJyxnZW5lcmF0b3I6J1RleHR1cmUudG9KU09OJ30sdXVpZDp0aGlzLnV1aWQsbmFtZTp0aGlzLm5hbWUsbWFwcGluZzp0aGlzLm1hcHBpbmcscmVwZWF0Olt0aGlzLnJlcGVhdC54LHRoaXMucmVwZWF0LnldLG9mZnNldDpbdGhpcy5vZmZzZXQueCx0aGlzLm9mZnNldC55XSxjZW50ZXI6W3RoaXMuY2VudGVyLngsdGhpcy5jZW50ZXIueV0scm90YXRpb246dGhpcy5yb3RhdGlvbix3cmFwOlt0aGlzLndyYXBTLHRoaXMud3JhcFRdLG1pbkZpbHRlcjp0aGlzLm1pbkZpbHRlcixtYWdGaWx0ZXI6dGhpcy5tYWdGaWx0ZXIsYW5pc290cm9weTp0aGlzLmFuaXNvdHJvcHksZmxpcFk6dGhpcy5mbGlwWX07aWYodGhpcy5pbWFnZSE9PXVuZGVmaW5lZCl7Ly8gVE9ETzogTW92ZSB0byBUSFJFRS5JbWFnZQp2YXIgaW1hZ2U9dGhpcy5pbWFnZTtpZihpbWFnZS51dWlkPT09dW5kZWZpbmVkKXtpbWFnZS51dWlkPV9NYXRoLmdlbmVyYXRlVVVJRCgpOy8vIFVHSAp9aWYoIWlzUm9vdE9iamVjdCYmbWV0YS5pbWFnZXNbaW1hZ2UudXVpZF09PT11bmRlZmluZWQpe21ldGEuaW1hZ2VzW2ltYWdlLnV1aWRdPXt1dWlkOmltYWdlLnV1aWQsdXJsOmdldERhdGFVUkwoaW1hZ2UpfTt9b3V0cHV0LmltYWdlPWltYWdlLnV1aWQ7fWlmKCFpc1Jvb3RPYmplY3Qpe21ldGEudGV4dHVyZXNbdGhpcy51dWlkXT1vdXRwdXQ7fXJldHVybiBvdXRwdXQ7fSxkaXNwb3NlOmZ1bmN0aW9uIGRpc3Bvc2UoKXt0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6J2Rpc3Bvc2UnfSk7fSx0cmFuc2Zvcm1VdjpmdW5jdGlvbiB0cmFuc2Zvcm1Vdih1dil7aWYodGhpcy5tYXBwaW5nIT09VVZNYXBwaW5nKXJldHVybjt1di5hcHBseU1hdHJpeDModGhpcy5tYXRyaXgpO2lmKHV2Lng8MHx8dXYueD4xKXtzd2l0Y2godGhpcy53cmFwUyl7Y2FzZSBSZXBlYXRXcmFwcGluZzp1di54PXV2LngtTWF0aC5mbG9vcih1di54KTticmVhaztjYXNlIENsYW1wVG9FZGdlV3JhcHBpbmc6dXYueD11di54PDA/MDoxO2JyZWFrO2Nhc2UgTWlycm9yZWRSZXBlYXRXcmFwcGluZzppZihNYXRoLmFicyhNYXRoLmZsb29yKHV2LngpJTIpPT09MSl7dXYueD1NYXRoLmNlaWwodXYueCktdXYueDt9ZWxzZXt1di54PXV2LngtTWF0aC5mbG9vcih1di54KTt9YnJlYWs7fX1pZih1di55PDB8fHV2Lnk+MSl7c3dpdGNoKHRoaXMud3JhcFQpe2Nhc2UgUmVwZWF0V3JhcHBpbmc6dXYueT11di55LU1hdGguZmxvb3IodXYueSk7YnJlYWs7Y2FzZSBDbGFtcFRvRWRnZVdyYXBwaW5nOnV2Lnk9dXYueTwwPzA6MTticmVhaztjYXNlIE1pcnJvcmVkUmVwZWF0V3JhcHBpbmc6aWYoTWF0aC5hYnMoTWF0aC5mbG9vcih1di55KSUyKT09PTEpe3V2Lnk9TWF0aC5jZWlsKHV2LnkpLXV2Lnk7fWVsc2V7dXYueT11di55LU1hdGguZmxvb3IodXYueSk7fWJyZWFrO319aWYodGhpcy5mbGlwWSl7dXYueT0xLXV2Lnk7fX19KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoVGV4dHVyZS5wcm90b3R5cGUsIm5lZWRzVXBkYXRlIix7c2V0OmZ1bmN0aW9uIHNldCh2YWx1ZSl7aWYodmFsdWU9PT10cnVlKXRoaXMudmVyc2lvbisrO319KTsvKioKICogQGF1dGhvciBzdXBlcmVnZ2JlcnQgLyBodHRwOi8vd3d3LnBhdWxicnVudC5jby51ay8KICogQGF1dGhvciBwaGlsb2diIC8gaHR0cDovL2Jsb2cudGhlaml0Lm9yZy8KICogQGF1dGhvciBtaWthZWwgZW10aW5nZXIgLyBodHRwOi8vZ29tby5zZS8KICogQGF1dGhvciBlZ3JhZXRoZXIgLyBodHRwOi8vZWdyYWV0aGVyLmNvbS8KICogQGF1dGhvciBXZXN0TGFuZ2xleSAvIGh0dHA6Ly9naXRodWIuY29tL1dlc3RMYW5nbGV5CiAqL2Z1bmN0aW9uIFZlY3RvcjQoeCx5LHosdyl7dGhpcy54PXh8fDA7dGhpcy55PXl8fDA7dGhpcy56PXp8fDA7dGhpcy53PXchPT11bmRlZmluZWQ/dzoxO31PYmplY3QuYXNzaWduKFZlY3RvcjQucHJvdG90eXBlLHtpc1ZlY3RvcjQ6dHJ1ZSxzZXQ6ZnVuY3Rpb24gc2V0KHgseSx6LHcpe3RoaXMueD14O3RoaXMueT15O3RoaXMuej16O3RoaXMudz13O3JldHVybiB0aGlzO30sc2V0U2NhbGFyOmZ1bmN0aW9uIHNldFNjYWxhcihzY2FsYXIpe3RoaXMueD1zY2FsYXI7dGhpcy55PXNjYWxhcjt0aGlzLno9c2NhbGFyO3RoaXMudz1zY2FsYXI7cmV0dXJuIHRoaXM7fSxzZXRYOmZ1bmN0aW9uIHNldFgoeCl7dGhpcy54PXg7cmV0dXJuIHRoaXM7fSxzZXRZOmZ1bmN0aW9uIHNldFkoeSl7dGhpcy55PXk7cmV0dXJuIHRoaXM7fSxzZXRaOmZ1bmN0aW9uIHNldFooeil7dGhpcy56PXo7cmV0dXJuIHRoaXM7fSxzZXRXOmZ1bmN0aW9uIHNldFcodyl7dGhpcy53PXc7cmV0dXJuIHRoaXM7fSxzZXRDb21wb25lbnQ6ZnVuY3Rpb24gc2V0Q29tcG9uZW50KGluZGV4LHZhbHVlKXtzd2l0Y2goaW5kZXgpe2Nhc2UgMDp0aGlzLng9dmFsdWU7YnJlYWs7Y2FzZSAxOnRoaXMueT12YWx1ZTticmVhaztjYXNlIDI6dGhpcy56PXZhbHVlO2JyZWFrO2Nhc2UgMzp0aGlzLnc9dmFsdWU7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoJ2luZGV4IGlzIG91dCBvZiByYW5nZTogJytpbmRleCk7fXJldHVybiB0aGlzO30sZ2V0Q29tcG9uZW50OmZ1bmN0aW9uIGdldENvbXBvbmVudChpbmRleCl7c3dpdGNoKGluZGV4KXtjYXNlIDA6cmV0dXJuIHRoaXMueDtjYXNlIDE6cmV0dXJuIHRoaXMueTtjYXNlIDI6cmV0dXJuIHRoaXMuejtjYXNlIDM6cmV0dXJuIHRoaXMudztkZWZhdWx0OnRocm93IG5ldyBFcnJvcignaW5kZXggaXMgb3V0IG9mIHJhbmdlOiAnK2luZGV4KTt9fSxjbG9uZTpmdW5jdGlvbiBjbG9uZSgpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLngsdGhpcy55LHRoaXMueix0aGlzLncpO30sY29weTpmdW5jdGlvbiBjb3B5KHYpe3RoaXMueD12Lng7dGhpcy55PXYueTt0aGlzLno9di56O3RoaXMudz12LnchPT11bmRlZmluZWQ/di53OjE7cmV0dXJuIHRoaXM7fSxhZGQ6ZnVuY3Rpb24gYWRkKHYsdyl7aWYodyE9PXVuZGVmaW5lZCl7Y29uc29sZS53YXJuKCdUSFJFRS5WZWN0b3I0OiAuYWRkKCkgbm93IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIFVzZSAuYWRkVmVjdG9ycyggYSwgYiApIGluc3RlYWQuJyk7cmV0dXJuIHRoaXMuYWRkVmVjdG9ycyh2LHcpO310aGlzLngrPXYueDt0aGlzLnkrPXYueTt0aGlzLnorPXYuejt0aGlzLncrPXYudztyZXR1cm4gdGhpczt9LGFkZFNjYWxhcjpmdW5jdGlvbiBhZGRTY2FsYXIocyl7dGhpcy54Kz1zO3RoaXMueSs9czt0aGlzLnorPXM7dGhpcy53Kz1zO3JldHVybiB0aGlzO30sYWRkVmVjdG9yczpmdW5jdGlvbiBhZGRWZWN0b3JzKGEsYil7dGhpcy54PWEueCtiLng7dGhpcy55PWEueStiLnk7dGhpcy56PWEueitiLno7dGhpcy53PWEudytiLnc7cmV0dXJuIHRoaXM7fSxhZGRTY2FsZWRWZWN0b3I6ZnVuY3Rpb24gYWRkU2NhbGVkVmVjdG9yKHYscyl7dGhpcy54Kz12Lngqczt0aGlzLnkrPXYueSpzO3RoaXMueis9di56KnM7dGhpcy53Kz12LncqcztyZXR1cm4gdGhpczt9LHN1YjpmdW5jdGlvbiBzdWIodix3KXtpZih3IT09dW5kZWZpbmVkKXtjb25zb2xlLndhcm4oJ1RIUkVFLlZlY3RvcjQ6IC5zdWIoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5zdWJWZWN0b3JzKCBhLCBiICkgaW5zdGVhZC4nKTtyZXR1cm4gdGhpcy5zdWJWZWN0b3JzKHYsdyk7fXRoaXMueC09di54O3RoaXMueS09di55O3RoaXMuei09di56O3RoaXMudy09di53O3JldHVybiB0aGlzO30sc3ViU2NhbGFyOmZ1bmN0aW9uIHN1YlNjYWxhcihzKXt0aGlzLngtPXM7dGhpcy55LT1zO3RoaXMuei09czt0aGlzLnctPXM7cmV0dXJuIHRoaXM7fSxzdWJWZWN0b3JzOmZ1bmN0aW9uIHN1YlZlY3RvcnMoYSxiKXt0aGlzLng9YS54LWIueDt0aGlzLnk9YS55LWIueTt0aGlzLno9YS56LWIuejt0aGlzLnc9YS53LWIudztyZXR1cm4gdGhpczt9LG11bHRpcGx5U2NhbGFyOmZ1bmN0aW9uIG11bHRpcGx5U2NhbGFyKHNjYWxhcil7dGhpcy54Kj1zY2FsYXI7dGhpcy55Kj1zY2FsYXI7dGhpcy56Kj1zY2FsYXI7dGhpcy53Kj1zY2FsYXI7cmV0dXJuIHRoaXM7fSxhcHBseU1hdHJpeDQ6ZnVuY3Rpb24gYXBwbHlNYXRyaXg0KG0pe3ZhciB4PXRoaXMueCx5PXRoaXMueSx6PXRoaXMueix3PXRoaXMudzt2YXIgZT1tLmVsZW1lbnRzO3RoaXMueD1lWzBdKngrZVs0XSp5K2VbOF0qeitlWzEyXSp3O3RoaXMueT1lWzFdKngrZVs1XSp5K2VbOV0qeitlWzEzXSp3O3RoaXMuej1lWzJdKngrZVs2XSp5K2VbMTBdKnorZVsxNF0qdzt0aGlzLnc9ZVszXSp4K2VbN10qeStlWzExXSp6K2VbMTVdKnc7cmV0dXJuIHRoaXM7fSxkaXZpZGVTY2FsYXI6ZnVuY3Rpb24gZGl2aWRlU2NhbGFyKHNjYWxhcil7cmV0dXJuIHRoaXMubXVsdGlwbHlTY2FsYXIoMS9zY2FsYXIpO30sc2V0QXhpc0FuZ2xlRnJvbVF1YXRlcm5pb246ZnVuY3Rpb24gc2V0QXhpc0FuZ2xlRnJvbVF1YXRlcm5pb24ocSl7Ly8gaHR0cDovL3d3dy5ldWNsaWRlYW5zcGFjZS5jb20vbWF0aHMvZ2VvbWV0cnkvcm90YXRpb25zL2NvbnZlcnNpb25zL3F1YXRlcm5pb25Ub0FuZ2xlL2luZGV4Lmh0bQovLyBxIGlzIGFzc3VtZWQgdG8gYmUgbm9ybWFsaXplZAp0aGlzLnc9MipNYXRoLmFjb3MocS53KTt2YXIgcz1NYXRoLnNxcnQoMS1xLncqcS53KTtpZihzPDAuMDAwMSl7dGhpcy54PTE7dGhpcy55PTA7dGhpcy56PTA7fWVsc2V7dGhpcy54PXEueC9zO3RoaXMueT1xLnkvczt0aGlzLno9cS56L3M7fXJldHVybiB0aGlzO30sc2V0QXhpc0FuZ2xlRnJvbVJvdGF0aW9uTWF0cml4OmZ1bmN0aW9uIHNldEF4aXNBbmdsZUZyb21Sb3RhdGlvbk1hdHJpeChtKXsvLyBodHRwOi8vd3d3LmV1Y2xpZGVhbnNwYWNlLmNvbS9tYXRocy9nZW9tZXRyeS9yb3RhdGlvbnMvY29udmVyc2lvbnMvbWF0cml4VG9BbmdsZS9pbmRleC5odG0KLy8gYXNzdW1lcyB0aGUgdXBwZXIgM3gzIG9mIG0gaXMgYSBwdXJlIHJvdGF0aW9uIG1hdHJpeCAoaS5lLCB1bnNjYWxlZCkKdmFyIGFuZ2xlLHgseSx6LC8vIHZhcmlhYmxlcyBmb3IgcmVzdWx0CmVwc2lsb249MC4wMSwvLyBtYXJnaW4gdG8gYWxsb3cgZm9yIHJvdW5kaW5nIGVycm9ycwplcHNpbG9uMj0wLjEsLy8gbWFyZ2luIHRvIGRpc3Rpbmd1aXNoIGJldHdlZW4gMCBhbmQgMTgwIGRlZ3JlZXMKdGU9bS5lbGVtZW50cyxtMTE9dGVbMF0sbTEyPXRlWzRdLG0xMz10ZVs4XSxtMjE9dGVbMV0sbTIyPXRlWzVdLG0yMz10ZVs5XSxtMzE9dGVbMl0sbTMyPXRlWzZdLG0zMz10ZVsxMF07aWYoTWF0aC5hYnMobTEyLW0yMSk8ZXBzaWxvbiYmTWF0aC5hYnMobTEzLW0zMSk8ZXBzaWxvbiYmTWF0aC5hYnMobTIzLW0zMik8ZXBzaWxvbil7Ly8gc2luZ3VsYXJpdHkgZm91bmQKLy8gZmlyc3QgY2hlY2sgZm9yIGlkZW50aXR5IG1hdHJpeCB3aGljaCBtdXN0IGhhdmUgKzEgZm9yIGFsbCB0ZXJtcwovLyBpbiBsZWFkaW5nIGRpYWdvbmFsIGFuZCB6ZXJvIGluIG90aGVyIHRlcm1zCmlmKE1hdGguYWJzKG0xMittMjEpPGVwc2lsb24yJiZNYXRoLmFicyhtMTMrbTMxKTxlcHNpbG9uMiYmTWF0aC5hYnMobTIzK20zMik8ZXBzaWxvbjImJk1hdGguYWJzKG0xMSttMjIrbTMzLTMpPGVwc2lsb24yKXsvLyB0aGlzIHNpbmd1bGFyaXR5IGlzIGlkZW50aXR5IG1hdHJpeCBzbyBhbmdsZSA9IDAKdGhpcy5zZXQoMSwwLDAsMCk7cmV0dXJuIHRoaXM7Ly8gemVybyBhbmdsZSwgYXJiaXRyYXJ5IGF4aXMKfS8vIG90aGVyd2lzZSB0aGlzIHNpbmd1bGFyaXR5IGlzIGFuZ2xlID0gMTgwCmFuZ2xlPU1hdGguUEk7dmFyIHh4PShtMTErMSkvMjt2YXIgeXk9KG0yMisxKS8yO3ZhciB6ej0obTMzKzEpLzI7dmFyIHh5PShtMTIrbTIxKS80O3ZhciB4ej0obTEzK20zMSkvNDt2YXIgeXo9KG0yMyttMzIpLzQ7aWYoeHg+eXkmJnh4Pnp6KXsvLyBtMTEgaXMgdGhlIGxhcmdlc3QgZGlhZ29uYWwgdGVybQppZih4eDxlcHNpbG9uKXt4PTA7eT0wLjcwNzEwNjc4MTt6PTAuNzA3MTA2NzgxO31lbHNle3g9TWF0aC5zcXJ0KHh4KTt5PXh5L3g7ej14ei94O319ZWxzZSBpZih5eT56eil7Ly8gbTIyIGlzIHRoZSBsYXJnZXN0IGRpYWdvbmFsIHRlcm0KaWYoeXk8ZXBzaWxvbil7eD0wLjcwNzEwNjc4MTt5PTA7ej0wLjcwNzEwNjc4MTt9ZWxzZXt5PU1hdGguc3FydCh5eSk7eD14eS95O3o9eXoveTt9fWVsc2V7Ly8gbTMzIGlzIHRoZSBsYXJnZXN0IGRpYWdvbmFsIHRlcm0gc28gYmFzZSByZXN1bHQgb24gdGhpcwppZih6ejxlcHNpbG9uKXt4PTAuNzA3MTA2NzgxO3k9MC43MDcxMDY3ODE7ej0wO31lbHNle3o9TWF0aC5zcXJ0KHp6KTt4PXh6L3o7eT15ei96O319dGhpcy5zZXQoeCx5LHosYW5nbGUpO3JldHVybiB0aGlzOy8vIHJldHVybiAxODAgZGVnIHJvdGF0aW9uCn0vLyBhcyB3ZSBoYXZlIHJlYWNoZWQgaGVyZSB0aGVyZSBhcmUgbm8gc2luZ3VsYXJpdGllcyBzbyB3ZSBjYW4gaGFuZGxlIG5vcm1hbGx5CnZhciBzPU1hdGguc3FydCgobTMyLW0yMykqKG0zMi1tMjMpKyhtMTMtbTMxKSoobTEzLW0zMSkrKG0yMS1tMTIpKihtMjEtbTEyKSk7Ly8gdXNlZCB0byBub3JtYWxpemUKaWYoTWF0aC5hYnMocyk8MC4wMDEpcz0xOy8vIHByZXZlbnQgZGl2aWRlIGJ5IHplcm8sIHNob3VsZCBub3QgaGFwcGVuIGlmIG1hdHJpeCBpcyBvcnRob2dvbmFsIGFuZCBzaG91bGQgYmUKLy8gY2F1Z2h0IGJ5IHNpbmd1bGFyaXR5IHRlc3QgYWJvdmUsIGJ1dCBJJ3ZlIGxlZnQgaXQgaW4ganVzdCBpbiBjYXNlCnRoaXMueD0obTMyLW0yMykvczt0aGlzLnk9KG0xMy1tMzEpL3M7dGhpcy56PShtMjEtbTEyKS9zO3RoaXMudz1NYXRoLmFjb3MoKG0xMSttMjIrbTMzLTEpLzIpO3JldHVybiB0aGlzO30sbWluOmZ1bmN0aW9uIG1pbih2KXt0aGlzLng9TWF0aC5taW4odGhpcy54LHYueCk7dGhpcy55PU1hdGgubWluKHRoaXMueSx2LnkpO3RoaXMuej1NYXRoLm1pbih0aGlzLnosdi56KTt0aGlzLnc9TWF0aC5taW4odGhpcy53LHYudyk7cmV0dXJuIHRoaXM7fSxtYXg6ZnVuY3Rpb24gbWF4KHYpe3RoaXMueD1NYXRoLm1heCh0aGlzLngsdi54KTt0aGlzLnk9TWF0aC5tYXgodGhpcy55LHYueSk7dGhpcy56PU1hdGgubWF4KHRoaXMueix2LnopO3RoaXMudz1NYXRoLm1heCh0aGlzLncsdi53KTtyZXR1cm4gdGhpczt9LGNsYW1wOmZ1bmN0aW9uIGNsYW1wKG1pbixtYXgpey8vIGFzc3VtZXMgbWluIDwgbWF4LCBjb21wb25lbnR3aXNlCnRoaXMueD1NYXRoLm1heChtaW4ueCxNYXRoLm1pbihtYXgueCx0aGlzLngpKTt0aGlzLnk9TWF0aC5tYXgobWluLnksTWF0aC5taW4obWF4LnksdGhpcy55KSk7dGhpcy56PU1hdGgubWF4KG1pbi56LE1hdGgubWluKG1heC56LHRoaXMueikpO3RoaXMudz1NYXRoLm1heChtaW4udyxNYXRoLm1pbihtYXgudyx0aGlzLncpKTtyZXR1cm4gdGhpczt9LGNsYW1wU2NhbGFyOmZ1bmN0aW9uKCl7dmFyIG1pbixtYXg7cmV0dXJuIGZ1bmN0aW9uIGNsYW1wU2NhbGFyKG1pblZhbCxtYXhWYWwpe2lmKG1pbj09PXVuZGVmaW5lZCl7bWluPW5ldyBWZWN0b3I0KCk7bWF4PW5ldyBWZWN0b3I0KCk7fW1pbi5zZXQobWluVmFsLG1pblZhbCxtaW5WYWwsbWluVmFsKTttYXguc2V0KG1heFZhbCxtYXhWYWwsbWF4VmFsLG1heFZhbCk7cmV0dXJuIHRoaXMuY2xhbXAobWluLG1heCk7fTt9KCksY2xhbXBMZW5ndGg6ZnVuY3Rpb24gY2xhbXBMZW5ndGgobWluLG1heCl7dmFyIGxlbmd0aD10aGlzLmxlbmd0aCgpO3JldHVybiB0aGlzLmRpdmlkZVNjYWxhcihsZW5ndGh8fDEpLm11bHRpcGx5U2NhbGFyKE1hdGgubWF4KG1pbixNYXRoLm1pbihtYXgsbGVuZ3RoKSkpO30sZmxvb3I6ZnVuY3Rpb24gZmxvb3IoKXt0aGlzLng9TWF0aC5mbG9vcih0aGlzLngpO3RoaXMueT1NYXRoLmZsb29yKHRoaXMueSk7dGhpcy56PU1hdGguZmxvb3IodGhpcy56KTt0aGlzLnc9TWF0aC5mbG9vcih0aGlzLncpO3JldHVybiB0aGlzO30sY2VpbDpmdW5jdGlvbiBjZWlsKCl7dGhpcy54PU1hdGguY2VpbCh0aGlzLngpO3RoaXMueT1NYXRoLmNlaWwodGhpcy55KTt0aGlzLno9TWF0aC5jZWlsKHRoaXMueik7dGhpcy53PU1hdGguY2VpbCh0aGlzLncpO3JldHVybiB0aGlzO30scm91bmQ6ZnVuY3Rpb24gcm91bmQoKXt0aGlzLng9TWF0aC5yb3VuZCh0aGlzLngpO3RoaXMueT1NYXRoLnJvdW5kKHRoaXMueSk7dGhpcy56PU1hdGgucm91bmQodGhpcy56KTt0aGlzLnc9TWF0aC5yb3VuZCh0aGlzLncpO3JldHVybiB0aGlzO30scm91bmRUb1plcm86ZnVuY3Rpb24gcm91bmRUb1plcm8oKXt0aGlzLng9dGhpcy54PDA/TWF0aC5jZWlsKHRoaXMueCk6TWF0aC5mbG9vcih0aGlzLngpO3RoaXMueT10aGlzLnk8MD9NYXRoLmNlaWwodGhpcy55KTpNYXRoLmZsb29yKHRoaXMueSk7dGhpcy56PXRoaXMuejwwP01hdGguY2VpbCh0aGlzLnopOk1hdGguZmxvb3IodGhpcy56KTt0aGlzLnc9dGhpcy53PDA/TWF0aC5jZWlsKHRoaXMudyk6TWF0aC5mbG9vcih0aGlzLncpO3JldHVybiB0aGlzO30sbmVnYXRlOmZ1bmN0aW9uIG5lZ2F0ZSgpe3RoaXMueD0tdGhpcy54O3RoaXMueT0tdGhpcy55O3RoaXMuej0tdGhpcy56O3RoaXMudz0tdGhpcy53O3JldHVybiB0aGlzO30sZG90OmZ1bmN0aW9uIGRvdCh2KXtyZXR1cm4gdGhpcy54KnYueCt0aGlzLnkqdi55K3RoaXMueip2LnordGhpcy53KnYudzt9LGxlbmd0aFNxOmZ1bmN0aW9uIGxlbmd0aFNxKCl7cmV0dXJuIHRoaXMueCp0aGlzLngrdGhpcy55KnRoaXMueSt0aGlzLnoqdGhpcy56K3RoaXMudyp0aGlzLnc7fSxsZW5ndGg6ZnVuY3Rpb24gbGVuZ3RoKCl7cmV0dXJuIE1hdGguc3FydCh0aGlzLngqdGhpcy54K3RoaXMueSp0aGlzLnkrdGhpcy56KnRoaXMueit0aGlzLncqdGhpcy53KTt9LG1hbmhhdHRhbkxlbmd0aDpmdW5jdGlvbiBtYW5oYXR0YW5MZW5ndGgoKXtyZXR1cm4gTWF0aC5hYnModGhpcy54KStNYXRoLmFicyh0aGlzLnkpK01hdGguYWJzKHRoaXMueikrTWF0aC5hYnModGhpcy53KTt9LG5vcm1hbGl6ZTpmdW5jdGlvbiBub3JtYWxpemUoKXtyZXR1cm4gdGhpcy5kaXZpZGVTY2FsYXIodGhpcy5sZW5ndGgoKXx8MSk7fSxzZXRMZW5ndGg6ZnVuY3Rpb24gc2V0TGVuZ3RoKGxlbmd0aCl7cmV0dXJuIHRoaXMubm9ybWFsaXplKCkubXVsdGlwbHlTY2FsYXIobGVuZ3RoKTt9LGxlcnA6ZnVuY3Rpb24gbGVycCh2LGFscGhhKXt0aGlzLngrPSh2LngtdGhpcy54KSphbHBoYTt0aGlzLnkrPSh2LnktdGhpcy55KSphbHBoYTt0aGlzLnorPSh2LnotdGhpcy56KSphbHBoYTt0aGlzLncrPSh2LnctdGhpcy53KSphbHBoYTtyZXR1cm4gdGhpczt9LGxlcnBWZWN0b3JzOmZ1bmN0aW9uIGxlcnBWZWN0b3JzKHYxLHYyLGFscGhhKXtyZXR1cm4gdGhpcy5zdWJWZWN0b3JzKHYyLHYxKS5tdWx0aXBseVNjYWxhcihhbHBoYSkuYWRkKHYxKTt9LGVxdWFsczpmdW5jdGlvbiBlcXVhbHModil7cmV0dXJuIHYueD09PXRoaXMueCYmdi55PT09dGhpcy55JiZ2Lno9PT10aGlzLnomJnYudz09PXRoaXMudzt9LGZyb21BcnJheTpmdW5jdGlvbiBmcm9tQXJyYXkoYXJyYXksb2Zmc2V0KXtpZihvZmZzZXQ9PT11bmRlZmluZWQpb2Zmc2V0PTA7dGhpcy54PWFycmF5W29mZnNldF07dGhpcy55PWFycmF5W29mZnNldCsxXTt0aGlzLno9YXJyYXlbb2Zmc2V0KzJdO3RoaXMudz1hcnJheVtvZmZzZXQrM107cmV0dXJuIHRoaXM7fSx0b0FycmF5OmZ1bmN0aW9uIHRvQXJyYXkoYXJyYXksb2Zmc2V0KXtpZihhcnJheT09PXVuZGVmaW5lZClhcnJheT1bXTtpZihvZmZzZXQ9PT11bmRlZmluZWQpb2Zmc2V0PTA7YXJyYXlbb2Zmc2V0XT10aGlzLng7YXJyYXlbb2Zmc2V0KzFdPXRoaXMueTthcnJheVtvZmZzZXQrMl09dGhpcy56O2FycmF5W29mZnNldCszXT10aGlzLnc7cmV0dXJuIGFycmF5O30sZnJvbUJ1ZmZlckF0dHJpYnV0ZTpmdW5jdGlvbiBmcm9tQnVmZmVyQXR0cmlidXRlKGF0dHJpYnV0ZSxpbmRleCxvZmZzZXQpe2lmKG9mZnNldCE9PXVuZGVmaW5lZCl7Y29uc29sZS53YXJuKCdUSFJFRS5WZWN0b3I0OiBvZmZzZXQgaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIC5mcm9tQnVmZmVyQXR0cmlidXRlKCkuJyk7fXRoaXMueD1hdHRyaWJ1dGUuZ2V0WChpbmRleCk7dGhpcy55PWF0dHJpYnV0ZS5nZXRZKGluZGV4KTt0aGlzLno9YXR0cmlidXRlLmdldFooaW5kZXgpO3RoaXMudz1hdHRyaWJ1dGUuZ2V0VyhpbmRleCk7cmV0dXJuIHRoaXM7fX0pOy8qKgogKiBAYXV0aG9yIHN6aW1layAvIGh0dHBzOi8vZ2l0aHViLmNvbS9zemltZWsvCiAqIEBhdXRob3IgYWx0ZXJlZHEgLyBodHRwOi8vYWx0ZXJlZHF1YWxpYS5jb20vCiAqIEBhdXRob3IgTWFyaXVzIEtpbnRlbCAvIGh0dHBzOi8vZ2l0aHViLmNvbS9raW50ZWwKICovIC8qCiBJbiBvcHRpb25zLCB3ZSBjYW4gc3BlY2lmeToKICogVGV4dHVyZSBwYXJhbWV0ZXJzIGZvciBhbiBhdXRvLWdlbmVyYXRlZCB0YXJnZXQgdGV4dHVyZQogKiBkZXB0aEJ1ZmZlci9zdGVuY2lsQnVmZmVyOiBCb29sZWFucyB0byBpbmRpY2F0ZSBpZiB3ZSBzaG91bGQgZ2VuZXJhdGUgdGhlc2UgYnVmZmVycwoqL2Z1bmN0aW9uIFdlYkdMUmVuZGVyVGFyZ2V0KHdpZHRoLGhlaWdodCxvcHRpb25zKXt0aGlzLnV1aWQ9X01hdGguZ2VuZXJhdGVVVUlEKCk7dGhpcy53aWR0aD13aWR0aDt0aGlzLmhlaWdodD1oZWlnaHQ7dGhpcy5zY2lzc29yPW5ldyBWZWN0b3I0KDAsMCx3aWR0aCxoZWlnaHQpO3RoaXMuc2Npc3NvclRlc3Q9ZmFsc2U7dGhpcy52aWV3cG9ydD1uZXcgVmVjdG9yNCgwLDAsd2lkdGgsaGVpZ2h0KTtvcHRpb25zPW9wdGlvbnN8fHt9O2lmKG9wdGlvbnMubWluRmlsdGVyPT09dW5kZWZpbmVkKW9wdGlvbnMubWluRmlsdGVyPUxpbmVhckZpbHRlcjt0aGlzLnRleHR1cmU9bmV3IFRleHR1cmUodW5kZWZpbmVkLHVuZGVmaW5lZCxvcHRpb25zLndyYXBTLG9wdGlvbnMud3JhcFQsb3B0aW9ucy5tYWdGaWx0ZXIsb3B0aW9ucy5taW5GaWx0ZXIsb3B0aW9ucy5mb3JtYXQsb3B0aW9ucy50eXBlLG9wdGlvbnMuYW5pc290cm9weSxvcHRpb25zLmVuY29kaW5nKTt0aGlzLmRlcHRoQnVmZmVyPW9wdGlvbnMuZGVwdGhCdWZmZXIhPT11bmRlZmluZWQ/b3B0aW9ucy5kZXB0aEJ1ZmZlcjp0cnVlO3RoaXMuc3RlbmNpbEJ1ZmZlcj1vcHRpb25zLnN0ZW5jaWxCdWZmZXIhPT11bmRlZmluZWQ/b3B0aW9ucy5zdGVuY2lsQnVmZmVyOnRydWU7dGhpcy5kZXB0aFRleHR1cmU9b3B0aW9ucy5kZXB0aFRleHR1cmUhPT11bmRlZmluZWQ/b3B0aW9ucy5kZXB0aFRleHR1cmU6bnVsbDt9V2ViR0xSZW5kZXJUYXJnZXQucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShFdmVudERpc3BhdGNoZXIucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6V2ViR0xSZW5kZXJUYXJnZXQsaXNXZWJHTFJlbmRlclRhcmdldDp0cnVlLHNldFNpemU6ZnVuY3Rpb24gc2V0U2l6ZSh3aWR0aCxoZWlnaHQpe2lmKHRoaXMud2lkdGghPT13aWR0aHx8dGhpcy5oZWlnaHQhPT1oZWlnaHQpe3RoaXMud2lkdGg9d2lkdGg7dGhpcy5oZWlnaHQ9aGVpZ2h0O3RoaXMuZGlzcG9zZSgpO310aGlzLnZpZXdwb3J0LnNldCgwLDAsd2lkdGgsaGVpZ2h0KTt0aGlzLnNjaXNzb3Iuc2V0KDAsMCx3aWR0aCxoZWlnaHQpO30sY2xvbmU6ZnVuY3Rpb24gY2xvbmUoKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IoKS5jb3B5KHRoaXMpO30sY29weTpmdW5jdGlvbiBjb3B5KHNvdXJjZSl7dGhpcy53aWR0aD1zb3VyY2Uud2lkdGg7dGhpcy5oZWlnaHQ9c291cmNlLmhlaWdodDt0aGlzLnZpZXdwb3J0LmNvcHkoc291cmNlLnZpZXdwb3J0KTt0aGlzLnRleHR1cmU9c291cmNlLnRleHR1cmUuY2xvbmUoKTt0aGlzLmRlcHRoQnVmZmVyPXNvdXJjZS5kZXB0aEJ1ZmZlcjt0aGlzLnN0ZW5jaWxCdWZmZXI9c291cmNlLnN0ZW5jaWxCdWZmZXI7dGhpcy5kZXB0aFRleHR1cmU9c291cmNlLmRlcHRoVGV4dHVyZTtyZXR1cm4gdGhpczt9LGRpc3Bvc2U6ZnVuY3Rpb24gZGlzcG9zZSgpe3RoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTonZGlzcG9zZSd9KTt9fSk7LyoqCiAqIEBhdXRob3IgYWx0ZXJlZHEgLyBodHRwOi8vYWx0ZXJlZHF1YWxpYS5jb20vCiAqL2Z1bmN0aW9uIERhdGFUZXh0dXJlKGRhdGEsd2lkdGgsaGVpZ2h0LGZvcm1hdCx0eXBlLG1hcHBpbmcsd3JhcFMsd3JhcFQsbWFnRmlsdGVyLG1pbkZpbHRlcixhbmlzb3Ryb3B5LGVuY29kaW5nKXtUZXh0dXJlLmNhbGwodGhpcyxudWxsLG1hcHBpbmcsd3JhcFMsd3JhcFQsbWFnRmlsdGVyLG1pbkZpbHRlcixmb3JtYXQsdHlwZSxhbmlzb3Ryb3B5LGVuY29kaW5nKTt0aGlzLmltYWdlPXtkYXRhOmRhdGEsd2lkdGg6d2lkdGgsaGVpZ2h0OmhlaWdodH07dGhpcy5tYWdGaWx0ZXI9bWFnRmlsdGVyIT09dW5kZWZpbmVkP21hZ0ZpbHRlcjpOZWFyZXN0RmlsdGVyO3RoaXMubWluRmlsdGVyPW1pbkZpbHRlciE9PXVuZGVmaW5lZD9taW5GaWx0ZXI6TmVhcmVzdEZpbHRlcjt0aGlzLmdlbmVyYXRlTWlwbWFwcz1mYWxzZTt0aGlzLmZsaXBZPWZhbHNlO3RoaXMudW5wYWNrQWxpZ25tZW50PTE7fURhdGFUZXh0dXJlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRleHR1cmUucHJvdG90eXBlKTtEYXRhVGV4dHVyZS5wcm90b3R5cGUuY29uc3RydWN0b3I9RGF0YVRleHR1cmU7RGF0YVRleHR1cmUucHJvdG90eXBlLmlzRGF0YVRleHR1cmU9dHJ1ZTsvKioKICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS8KICovZnVuY3Rpb24gQ3ViZVRleHR1cmUoaW1hZ2VzLG1hcHBpbmcsd3JhcFMsd3JhcFQsbWFnRmlsdGVyLG1pbkZpbHRlcixmb3JtYXQsdHlwZSxhbmlzb3Ryb3B5LGVuY29kaW5nKXtpbWFnZXM9aW1hZ2VzIT09dW5kZWZpbmVkP2ltYWdlczpbXTttYXBwaW5nPW1hcHBpbmchPT11bmRlZmluZWQ/bWFwcGluZzpDdWJlUmVmbGVjdGlvbk1hcHBpbmc7VGV4dHVyZS5jYWxsKHRoaXMsaW1hZ2VzLG1hcHBpbmcsd3JhcFMsd3JhcFQsbWFnRmlsdGVyLG1pbkZpbHRlcixmb3JtYXQsdHlwZSxhbmlzb3Ryb3B5LGVuY29kaW5nKTt0aGlzLmZsaXBZPWZhbHNlO31DdWJlVGV4dHVyZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUZXh0dXJlLnByb3RvdHlwZSk7Q3ViZVRleHR1cmUucHJvdG90eXBlLmNvbnN0cnVjdG9yPUN1YmVUZXh0dXJlO0N1YmVUZXh0dXJlLnByb3RvdHlwZS5pc0N1YmVUZXh0dXJlPXRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KEN1YmVUZXh0dXJlLnByb3RvdHlwZSwnaW1hZ2VzJyx7Z2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiB0aGlzLmltYWdlO30sc2V0OmZ1bmN0aW9uIHNldCh2YWx1ZSl7dGhpcy5pbWFnZT12YWx1ZTt9fSk7LyoqCiAqIEBhdXRob3IgdHNjaHcKICoKICogVW5pZm9ybXMgb2YgYSBwcm9ncmFtLgogKiBUaG9zZSBmb3JtIGEgdHJlZSBzdHJ1Y3R1cmUgd2l0aCBhIHNwZWNpYWwgdG9wLWxldmVsIGNvbnRhaW5lciBmb3IgdGhlIHJvb3QsCiAqIHdoaWNoIHlvdSBnZXQgYnkgY2FsbGluZyAnbmV3IFdlYkdMVW5pZm9ybXMoIGdsLCBwcm9ncmFtLCByZW5kZXJlciApJy4KICoKICoKICogUHJvcGVydGllcyBvZiBpbm5lciBub2RlcyBpbmNsdWRpbmcgdGhlIHRvcC1sZXZlbCBjb250YWluZXI6CiAqCiAqIC5zZXEgLSBhcnJheSBvZiBuZXN0ZWQgdW5pZm9ybXMKICogLm1hcCAtIG5lc3RlZCB1bmlmb3JtcyBieSBuYW1lCiAqCiAqCiAqIE1ldGhvZHMgb2YgYWxsIG5vZGVzIGV4Y2VwdCB0aGUgdG9wLWxldmVsIGNvbnRhaW5lcjoKICoKICogLnNldFZhbHVlKCBnbCwgdmFsdWUsIFtyZW5kZXJlcl0gKQogKgogKiAJCXVwbG9hZHMgYSB1bmlmb3JtIHZhbHVlKHMpCiAqICAJdGhlICdyZW5kZXJlcicgcGFyYW1ldGVyIGlzIG5lZWRlZCBmb3Igc2FtcGxlciB1bmlmb3JtcwogKgogKgogKiBTdGF0aWMgbWV0aG9kcyBvZiB0aGUgdG9wLWxldmVsIGNvbnRhaW5lciAocmVuZGVyZXIgZmFjdG9yaXphdGlvbnMpOgogKgogKiAudXBsb2FkKCBnbCwgc2VxLCB2YWx1ZXMsIHJlbmRlcmVyICkKICoKICogCQlzZXRzIHVuaWZvcm1zIGluICdzZXEnIHRvICd2YWx1ZXNbaWRdLnZhbHVlJwogKgogKiAuc2VxV2l0aFZhbHVlKCBzZXEsIHZhbHVlcyApIDogZmlsdGVyZWRTZXEKICoKICogCQlmaWx0ZXJzICdzZXEnIGVudHJpZXMgd2l0aCBjb3JyZXNwb25kaW5nIGVudHJ5IGluIHZhbHVlcwogKgogKgogKiBNZXRob2RzIG9mIHRoZSB0b3AtbGV2ZWwgY29udGFpbmVyIChyZW5kZXJlciBmYWN0b3JpemF0aW9ucyk6CiAqCiAqIC5zZXRWYWx1ZSggZ2wsIG5hbWUsIHZhbHVlICkKICoKICogCQlzZXRzIHVuaWZvcm0gd2l0aCAgbmFtZSAnbmFtZScgdG8gJ3ZhbHVlJwogKgogKiAuc2V0KCBnbCwgb2JqLCBwcm9wICkKICoKICogCQlzZXRzIHVuaWZvcm0gZnJvbSBvYmplY3QgYW5kIHByb3BlcnR5IHdpdGggc2FtZSBuYW1lIHRoYW4gdW5pZm9ybQogKgogKiAuc2V0T3B0aW9uYWwoIGdsLCBvYmosIHByb3AgKQogKgogKiAJCWxpa2UgLnNldCBmb3IgYW4gb3B0aW9uYWwgcHJvcGVydHkgb2YgdGhlIG9iamVjdAogKgogKi92YXIgZW1wdHlUZXh0dXJlPW5ldyBUZXh0dXJlKCk7dmFyIGVtcHR5Q3ViZVRleHR1cmU9bmV3IEN1YmVUZXh0dXJlKCk7Ly8gLS0tIEJhc2UgZm9yIGlubmVyIG5vZGVzIChpbmNsdWRpbmcgdGhlIHJvb3QpIC0tLQpmdW5jdGlvbiBVbmlmb3JtQ29udGFpbmVyKCl7dGhpcy5zZXE9W107dGhpcy5tYXA9e307fS8vIC0tLSBVdGlsaXRpZXMgLS0tCi8vIEFycmF5IENhY2hlcyAocHJvdmlkZSB0eXBlZCBhcnJheXMgZm9yIHRlbXBvcmFyeSBieSBzaXplKQp2YXIgYXJyYXlDYWNoZUYzMj1bXTt2YXIgYXJyYXlDYWNoZUkzMj1bXTsvLyBGbG9hdDMyQXJyYXkgY2FjaGVzIHVzZWQgZm9yIHVwbG9hZGluZyBNYXRyaXggdW5pZm9ybXMKdmFyIG1hdDRhcnJheT1uZXcgRmxvYXQzMkFycmF5KDE2KTt2YXIgbWF0M2FycmF5PW5ldyBGbG9hdDMyQXJyYXkoOSk7Ly8gRmxhdHRlbmluZyBmb3IgYXJyYXlzIG9mIHZlY3RvcnMgYW5kIG1hdHJpY2VzCmZ1bmN0aW9uIGZsYXR0ZW4oYXJyYXksbkJsb2NrcyxibG9ja1NpemUpe3ZhciBmaXJzdEVsZW09YXJyYXlbMF07aWYoZmlyc3RFbGVtPD0wfHxmaXJzdEVsZW0+MClyZXR1cm4gYXJyYXk7Ly8gdW5vcHRpbWl6ZWQ6ICEgaXNOYU4oIGZpcnN0RWxlbSApCi8vIHNlZSBodHRwOi8vamFja3NvbmR1bnN0YW4uY29tL2FydGljbGVzLzk4Mwp2YXIgbj1uQmxvY2tzKmJsb2NrU2l6ZSxyPWFycmF5Q2FjaGVGMzJbbl07aWYocj09PXVuZGVmaW5lZCl7cj1uZXcgRmxvYXQzMkFycmF5KG4pO2FycmF5Q2FjaGVGMzJbbl09cjt9aWYobkJsb2NrcyE9PTApe2ZpcnN0RWxlbS50b0FycmF5KHIsMCk7Zm9yKHZhciBpPTEsb2Zmc2V0PTA7aSE9PW5CbG9ja3M7KytpKXtvZmZzZXQrPWJsb2NrU2l6ZTthcnJheVtpXS50b0FycmF5KHIsb2Zmc2V0KTt9fXJldHVybiByO30vLyBUZXh0dXJlIHVuaXQgYWxsb2NhdGlvbgpmdW5jdGlvbiBhbGxvY1RleFVuaXRzKHJlbmRlcmVyLG4pe3ZhciByPWFycmF5Q2FjaGVJMzJbbl07aWYocj09PXVuZGVmaW5lZCl7cj1uZXcgSW50MzJBcnJheShuKTthcnJheUNhY2hlSTMyW25dPXI7fWZvcih2YXIgaT0wO2khPT1uOysraSl7cltpXT1yZW5kZXJlci5hbGxvY1RleHR1cmVVbml0KCk7fXJldHVybiByO30vLyAtLS0gU2V0dGVycyAtLS0KLy8gTm90ZTogRGVmaW5pbmcgdGhlc2UgbWV0aG9kcyBleHRlcm5hbGx5LCBiZWNhdXNlIHRoZXkgY29tZSBpbiBhIGJ1bmNoCi8vIGFuZCB0aGlzIHdheSB0aGVpciBuYW1lcyBtaW5pZnkuCi8vIFNpbmdsZSBzY2FsYXIKZnVuY3Rpb24gc2V0VmFsdWUxZihnbCx2KXtnbC51bmlmb3JtMWYodGhpcy5hZGRyLHYpO31mdW5jdGlvbiBzZXRWYWx1ZTFpKGdsLHYpe2dsLnVuaWZvcm0xaSh0aGlzLmFkZHIsdik7fS8vIFNpbmdsZSBmbG9hdCB2ZWN0b3IgKGZyb20gZmxhdCBhcnJheSBvciBUSFJFRS5WZWN0b3JOKQpmdW5jdGlvbiBzZXRWYWx1ZTJmdihnbCx2KXtpZih2Lng9PT11bmRlZmluZWQpe2dsLnVuaWZvcm0yZnYodGhpcy5hZGRyLHYpO31lbHNle2dsLnVuaWZvcm0yZih0aGlzLmFkZHIsdi54LHYueSk7fX1mdW5jdGlvbiBzZXRWYWx1ZTNmdihnbCx2KXtpZih2LnghPT11bmRlZmluZWQpe2dsLnVuaWZvcm0zZih0aGlzLmFkZHIsdi54LHYueSx2LnopO31lbHNlIGlmKHYuciE9PXVuZGVmaW5lZCl7Z2wudW5pZm9ybTNmKHRoaXMuYWRkcix2LnIsdi5nLHYuYik7fWVsc2V7Z2wudW5pZm9ybTNmdih0aGlzLmFkZHIsdik7fX1mdW5jdGlvbiBzZXRWYWx1ZTRmdihnbCx2KXtpZih2Lng9PT11bmRlZmluZWQpe2dsLnVuaWZvcm00ZnYodGhpcy5hZGRyLHYpO31lbHNle2dsLnVuaWZvcm00Zih0aGlzLmFkZHIsdi54LHYueSx2Lnosdi53KTt9fS8vIFNpbmdsZSBtYXRyaXggKGZyb20gZmxhdCBhcnJheSBvciBNYXRyaXhOKQpmdW5jdGlvbiBzZXRWYWx1ZTJmbShnbCx2KXtnbC51bmlmb3JtTWF0cml4MmZ2KHRoaXMuYWRkcixmYWxzZSx2LmVsZW1lbnRzfHx2KTt9ZnVuY3Rpb24gc2V0VmFsdWUzZm0oZ2wsdil7aWYodi5lbGVtZW50cz09PXVuZGVmaW5lZCl7Z2wudW5pZm9ybU1hdHJpeDNmdih0aGlzLmFkZHIsZmFsc2Usdik7fWVsc2V7bWF0M2FycmF5LnNldCh2LmVsZW1lbnRzKTtnbC51bmlmb3JtTWF0cml4M2Z2KHRoaXMuYWRkcixmYWxzZSxtYXQzYXJyYXkpO319ZnVuY3Rpb24gc2V0VmFsdWU0Zm0oZ2wsdil7aWYodi5lbGVtZW50cz09PXVuZGVmaW5lZCl7Z2wudW5pZm9ybU1hdHJpeDRmdih0aGlzLmFkZHIsZmFsc2Usdik7fWVsc2V7bWF0NGFycmF5LnNldCh2LmVsZW1lbnRzKTtnbC51bmlmb3JtTWF0cml4NGZ2KHRoaXMuYWRkcixmYWxzZSxtYXQ0YXJyYXkpO319Ly8gU2luZ2xlIHRleHR1cmUgKDJEIC8gQ3ViZSkKZnVuY3Rpb24gc2V0VmFsdWVUMShnbCx2LHJlbmRlcmVyKXt2YXIgdW5pdD1yZW5kZXJlci5hbGxvY1RleHR1cmVVbml0KCk7Z2wudW5pZm9ybTFpKHRoaXMuYWRkcix1bml0KTtyZW5kZXJlci5zZXRUZXh0dXJlMkQodnx8ZW1wdHlUZXh0dXJlLHVuaXQpO31mdW5jdGlvbiBzZXRWYWx1ZVQ2KGdsLHYscmVuZGVyZXIpe3ZhciB1bml0PXJlbmRlcmVyLmFsbG9jVGV4dHVyZVVuaXQoKTtnbC51bmlmb3JtMWkodGhpcy5hZGRyLHVuaXQpO3JlbmRlcmVyLnNldFRleHR1cmVDdWJlKHZ8fGVtcHR5Q3ViZVRleHR1cmUsdW5pdCk7fS8vIEludGVnZXIgLyBCb29sZWFuIHZlY3RvcnMgb3IgYXJyYXlzIHRoZXJlb2YgKGFsd2F5cyBmbGF0IGFycmF5cykKZnVuY3Rpb24gc2V0VmFsdWUyaXYoZ2wsdil7Z2wudW5pZm9ybTJpdih0aGlzLmFkZHIsdik7fWZ1bmN0aW9uIHNldFZhbHVlM2l2KGdsLHYpe2dsLnVuaWZvcm0zaXYodGhpcy5hZGRyLHYpO31mdW5jdGlvbiBzZXRWYWx1ZTRpdihnbCx2KXtnbC51bmlmb3JtNGl2KHRoaXMuYWRkcix2KTt9Ly8gSGVscGVyIHRvIHBpY2sgdGhlIHJpZ2h0IHNldHRlciBmb3IgdGhlIHNpbmd1bGFyIGNhc2UKZnVuY3Rpb24gZ2V0U2luZ3VsYXJTZXR0ZXIodHlwZSl7c3dpdGNoKHR5cGUpe2Nhc2UgMHgxNDA2OnJldHVybiBzZXRWYWx1ZTFmOy8vIEZMT0FUCmNhc2UgMHg4YjUwOnJldHVybiBzZXRWYWx1ZTJmdjsvLyBfVkVDMgpjYXNlIDB4OGI1MTpyZXR1cm4gc2V0VmFsdWUzZnY7Ly8gX1ZFQzMKY2FzZSAweDhiNTI6cmV0dXJuIHNldFZhbHVlNGZ2Oy8vIF9WRUM0CmNhc2UgMHg4YjVhOnJldHVybiBzZXRWYWx1ZTJmbTsvLyBfTUFUMgpjYXNlIDB4OGI1YjpyZXR1cm4gc2V0VmFsdWUzZm07Ly8gX01BVDMKY2FzZSAweDhiNWM6cmV0dXJuIHNldFZhbHVlNGZtOy8vIF9NQVQ0CmNhc2UgMHg4YjVlOmNhc2UgMHg4ZDY2OnJldHVybiBzZXRWYWx1ZVQxOy8vIFNBTVBMRVJfMkQsIFNBTVBMRVJfRVhURVJOQUxfT0VTCmNhc2UgMHg4YjYwOnJldHVybiBzZXRWYWx1ZVQ2Oy8vIFNBTVBMRVJfQ1VCRQpjYXNlIDB4MTQwNDpjYXNlIDB4OGI1NjpyZXR1cm4gc2V0VmFsdWUxaTsvLyBJTlQsIEJPT0wKY2FzZSAweDhiNTM6Y2FzZSAweDhiNTc6cmV0dXJuIHNldFZhbHVlMml2Oy8vIF9WRUMyCmNhc2UgMHg4YjU0OmNhc2UgMHg4YjU4OnJldHVybiBzZXRWYWx1ZTNpdjsvLyBfVkVDMwpjYXNlIDB4OGI1NTpjYXNlIDB4OGI1OTpyZXR1cm4gc2V0VmFsdWU0aXY7Ly8gX1ZFQzQKfX0vLyBBcnJheSBvZiBzY2FsYXJzCmZ1bmN0aW9uIHNldFZhbHVlMWZ2KGdsLHYpe2dsLnVuaWZvcm0xZnYodGhpcy5hZGRyLHYpO31mdW5jdGlvbiBzZXRWYWx1ZTFpdihnbCx2KXtnbC51bmlmb3JtMWl2KHRoaXMuYWRkcix2KTt9Ly8gQXJyYXkgb2YgdmVjdG9ycyAoZmxhdCBvciBmcm9tIFRIUkVFIGNsYXNzZXMpCmZ1bmN0aW9uIHNldFZhbHVlVjJhKGdsLHYpe2dsLnVuaWZvcm0yZnYodGhpcy5hZGRyLGZsYXR0ZW4odix0aGlzLnNpemUsMikpO31mdW5jdGlvbiBzZXRWYWx1ZVYzYShnbCx2KXtnbC51bmlmb3JtM2Z2KHRoaXMuYWRkcixmbGF0dGVuKHYsdGhpcy5zaXplLDMpKTt9ZnVuY3Rpb24gc2V0VmFsdWVWNGEoZ2wsdil7Z2wudW5pZm9ybTRmdih0aGlzLmFkZHIsZmxhdHRlbih2LHRoaXMuc2l6ZSw0KSk7fS8vIEFycmF5IG9mIG1hdHJpY2VzIChmbGF0IG9yIGZyb20gVEhSRUUgY2xhc2VzKQpmdW5jdGlvbiBzZXRWYWx1ZU0yYShnbCx2KXtnbC51bmlmb3JtTWF0cml4MmZ2KHRoaXMuYWRkcixmYWxzZSxmbGF0dGVuKHYsdGhpcy5zaXplLDQpKTt9ZnVuY3Rpb24gc2V0VmFsdWVNM2EoZ2wsdil7Z2wudW5pZm9ybU1hdHJpeDNmdih0aGlzLmFkZHIsZmFsc2UsZmxhdHRlbih2LHRoaXMuc2l6ZSw5KSk7fWZ1bmN0aW9uIHNldFZhbHVlTTRhKGdsLHYpe2dsLnVuaWZvcm1NYXRyaXg0ZnYodGhpcy5hZGRyLGZhbHNlLGZsYXR0ZW4odix0aGlzLnNpemUsMTYpKTt9Ly8gQXJyYXkgb2YgdGV4dHVyZXMgKDJEIC8gQ3ViZSkKZnVuY3Rpb24gc2V0VmFsdWVUMWEoZ2wsdixyZW5kZXJlcil7dmFyIG49di5sZW5ndGgsdW5pdHM9YWxsb2NUZXhVbml0cyhyZW5kZXJlcixuKTtnbC51bmlmb3JtMWl2KHRoaXMuYWRkcix1bml0cyk7Zm9yKHZhciBpPTA7aSE9PW47KytpKXtyZW5kZXJlci5zZXRUZXh0dXJlMkQodltpXXx8ZW1wdHlUZXh0dXJlLHVuaXRzW2ldKTt9fWZ1bmN0aW9uIHNldFZhbHVlVDZhKGdsLHYscmVuZGVyZXIpe3ZhciBuPXYubGVuZ3RoLHVuaXRzPWFsbG9jVGV4VW5pdHMocmVuZGVyZXIsbik7Z2wudW5pZm9ybTFpdih0aGlzLmFkZHIsdW5pdHMpO2Zvcih2YXIgaT0wO2khPT1uOysraSl7cmVuZGVyZXIuc2V0VGV4dHVyZUN1YmUodltpXXx8ZW1wdHlDdWJlVGV4dHVyZSx1bml0c1tpXSk7fX0vLyBIZWxwZXIgdG8gcGljayB0aGUgcmlnaHQgc2V0dGVyIGZvciBhIHB1cmUgKGJvdHRvbS1sZXZlbCkgYXJyYXkKZnVuY3Rpb24gZ2V0UHVyZUFycmF5U2V0dGVyKHR5cGUpe3N3aXRjaCh0eXBlKXtjYXNlIDB4MTQwNjpyZXR1cm4gc2V0VmFsdWUxZnY7Ly8gRkxPQVQKY2FzZSAweDhiNTA6cmV0dXJuIHNldFZhbHVlVjJhOy8vIF9WRUMyCmNhc2UgMHg4YjUxOnJldHVybiBzZXRWYWx1ZVYzYTsvLyBfVkVDMwpjYXNlIDB4OGI1MjpyZXR1cm4gc2V0VmFsdWVWNGE7Ly8gX1ZFQzQKY2FzZSAweDhiNWE6cmV0dXJuIHNldFZhbHVlTTJhOy8vIF9NQVQyCmNhc2UgMHg4YjViOnJldHVybiBzZXRWYWx1ZU0zYTsvLyBfTUFUMwpjYXNlIDB4OGI1YzpyZXR1cm4gc2V0VmFsdWVNNGE7Ly8gX01BVDQKY2FzZSAweDhiNWU6cmV0dXJuIHNldFZhbHVlVDFhOy8vIFNBTVBMRVJfMkQKY2FzZSAweDhiNjA6cmV0dXJuIHNldFZhbHVlVDZhOy8vIFNBTVBMRVJfQ1VCRQpjYXNlIDB4MTQwNDpjYXNlIDB4OGI1NjpyZXR1cm4gc2V0VmFsdWUxaXY7Ly8gSU5ULCBCT09MCmNhc2UgMHg4YjUzOmNhc2UgMHg4YjU3OnJldHVybiBzZXRWYWx1ZTJpdjsvLyBfVkVDMgpjYXNlIDB4OGI1NDpjYXNlIDB4OGI1ODpyZXR1cm4gc2V0VmFsdWUzaXY7Ly8gX1ZFQzMKY2FzZSAweDhiNTU6Y2FzZSAweDhiNTk6cmV0dXJuIHNldFZhbHVlNGl2Oy8vIF9WRUM0Cn19Ly8gLS0tIFVuaWZvcm0gQ2xhc3NlcyAtLS0KZnVuY3Rpb24gU2luZ2xlVW5pZm9ybShpZCxhY3RpdmVJbmZvLGFkZHIpe3RoaXMuaWQ9aWQ7dGhpcy5hZGRyPWFkZHI7dGhpcy5zZXRWYWx1ZT1nZXRTaW5ndWxhclNldHRlcihhY3RpdmVJbmZvLnR5cGUpOy8vIHRoaXMucGF0aCA9IGFjdGl2ZUluZm8ubmFtZTsgLy8gREVCVUcKfWZ1bmN0aW9uIFB1cmVBcnJheVVuaWZvcm0oaWQsYWN0aXZlSW5mbyxhZGRyKXt0aGlzLmlkPWlkO3RoaXMuYWRkcj1hZGRyO3RoaXMuc2l6ZT1hY3RpdmVJbmZvLnNpemU7dGhpcy5zZXRWYWx1ZT1nZXRQdXJlQXJyYXlTZXR0ZXIoYWN0aXZlSW5mby50eXBlKTsvLyB0aGlzLnBhdGggPSBhY3RpdmVJbmZvLm5hbWU7IC8vIERFQlVHCn1mdW5jdGlvbiBTdHJ1Y3R1cmVkVW5pZm9ybShpZCl7dGhpcy5pZD1pZDtVbmlmb3JtQ29udGFpbmVyLmNhbGwodGhpcyk7Ly8gbWl4LWluCn1TdHJ1Y3R1cmVkVW5pZm9ybS5wcm90b3R5cGUuc2V0VmFsdWU9ZnVuY3Rpb24oZ2wsdmFsdWUpey8vIE5vdGU6IERvbid0IG5lZWQgYW4gZXh0cmEgJ3JlbmRlcmVyJyBwYXJhbWV0ZXIsIHNpbmNlIHNhbXBsZXJzCi8vIGFyZSBub3QgYWxsb3dlZCBpbiBzdHJ1Y3R1cmVkIHVuaWZvcm1zLgp2YXIgc2VxPXRoaXMuc2VxO2Zvcih2YXIgaT0wLG49c2VxLmxlbmd0aDtpIT09bjsrK2kpe3ZhciB1PXNlcVtpXTt1LnNldFZhbHVlKGdsLHZhbHVlW3UuaWRdKTt9fTsvLyAtLS0gVG9wLWxldmVsIC0tLQovLyBQYXJzZXIgLSBidWlsZHMgdXAgdGhlIHByb3BlcnR5IHRyZWUgZnJvbSB0aGUgcGF0aCBzdHJpbmdzCnZhciBSZVBhdGhQYXJ0PS8oW1x3XGRfXSspKFxdKT8oXFt8XC4pPy9nOy8vIGV4dHJhY3RzCi8vIAktIHRoZSBpZGVudGlmaWVyIChtZW1iZXIgbmFtZSBvciBhcnJheSBpbmRleCkKLy8gIC0gZm9sbG93ZWQgYnkgYW4gb3B0aW9uYWwgcmlnaHQgYnJhY2tldCAoZm91bmQgd2hlbiBhcnJheSBpbmRleCkKLy8gIC0gZm9sbG93ZWQgYnkgYW4gb3B0aW9uYWwgbGVmdCBicmFja2V0IG9yIGRvdCAodHlwZSBvZiBzdWJzY3JpcHQpCi8vCi8vIE5vdGU6IFRoZXNlIHBvcnRpb25zIGNhbiBiZSByZWFkIGluIGEgbm9uLW92ZXJsYXBwaW5nIGZhc2hpb24gYW5kCi8vIGFsbG93IHN0cmFpZ2h0Zm9yd2FyZCBwYXJzaW5nIG9mIHRoZSBoaWVyYXJjaHkgdGhhdCBXZWJHTCBlbmNvZGVzCi8vIGluIHRoZSB1bmlmb3JtIG5hbWVzLgpmdW5jdGlvbiBhZGRVbmlmb3JtKGNvbnRhaW5lcix1bmlmb3JtT2JqZWN0KXtjb250YWluZXIuc2VxLnB1c2godW5pZm9ybU9iamVjdCk7Y29udGFpbmVyLm1hcFt1bmlmb3JtT2JqZWN0LmlkXT11bmlmb3JtT2JqZWN0O31mdW5jdGlvbiBwYXJzZVVuaWZvcm0oYWN0aXZlSW5mbyxhZGRyLGNvbnRhaW5lcil7dmFyIHBhdGg9YWN0aXZlSW5mby5uYW1lLHBhdGhMZW5ndGg9cGF0aC5sZW5ndGg7Ly8gcmVzZXQgUmVnRXhwIG9iamVjdCwgYmVjYXVzZSBvZiB0aGUgZWFybHkgZXhpdCBvZiBhIHByZXZpb3VzIHJ1bgpSZVBhdGhQYXJ0Lmxhc3RJbmRleD0wO2Zvcig7Oyl7dmFyIG1hdGNoPVJlUGF0aFBhcnQuZXhlYyhwYXRoKSxtYXRjaEVuZD1SZVBhdGhQYXJ0Lmxhc3RJbmRleCxpZD1tYXRjaFsxXSxpZElzSW5kZXg9bWF0Y2hbMl09PT0nXScsc3Vic2NyaXB0PW1hdGNoWzNdO2lmKGlkSXNJbmRleClpZD1pZHwwOy8vIGNvbnZlcnQgdG8gaW50ZWdlcgppZihzdWJzY3JpcHQ9PT11bmRlZmluZWR8fHN1YnNjcmlwdD09PSdbJyYmbWF0Y2hFbmQrMj09PXBhdGhMZW5ndGgpey8vIGJhcmUgbmFtZSBvciAicHVyZSIgYm90dG9tLWxldmVsIGFycmF5ICJbMF0iIHN1ZmZpeAphZGRVbmlmb3JtKGNvbnRhaW5lcixzdWJzY3JpcHQ9PT11bmRlZmluZWQ/bmV3IFNpbmdsZVVuaWZvcm0oaWQsYWN0aXZlSW5mbyxhZGRyKTpuZXcgUHVyZUFycmF5VW5pZm9ybShpZCxhY3RpdmVJbmZvLGFkZHIpKTticmVhazt9ZWxzZXsvLyBzdGVwIGludG8gaW5uZXIgbm9kZSAvIGNyZWF0ZSBpdCBpbiBjYXNlIGl0IGRvZXNuJ3QgZXhpc3QKdmFyIG1hcD1jb250YWluZXIubWFwLG5leHQ9bWFwW2lkXTtpZihuZXh0PT09dW5kZWZpbmVkKXtuZXh0PW5ldyBTdHJ1Y3R1cmVkVW5pZm9ybShpZCk7YWRkVW5pZm9ybShjb250YWluZXIsbmV4dCk7fWNvbnRhaW5lcj1uZXh0O319fS8vIFJvb3QgQ29udGFpbmVyCmZ1bmN0aW9uIFdlYkdMVW5pZm9ybXMoZ2wscHJvZ3JhbSxyZW5kZXJlcil7VW5pZm9ybUNvbnRhaW5lci5jYWxsKHRoaXMpO3RoaXMucmVuZGVyZXI9cmVuZGVyZXI7dmFyIG49Z2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcihwcm9ncmFtLGdsLkFDVElWRV9VTklGT1JNUyk7Zm9yKHZhciBpPTA7aTxuOysraSl7dmFyIGluZm89Z2wuZ2V0QWN0aXZlVW5pZm9ybShwcm9ncmFtLGkpLHBhdGg9aW5mby5uYW1lLGFkZHI9Z2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0scGF0aCk7cGFyc2VVbmlmb3JtKGluZm8sYWRkcix0aGlzKTt9fVdlYkdMVW5pZm9ybXMucHJvdG90eXBlLnNldFZhbHVlPWZ1bmN0aW9uKGdsLG5hbWUsdmFsdWUpe3ZhciB1PXRoaXMubWFwW25hbWVdO2lmKHUhPT11bmRlZmluZWQpdS5zZXRWYWx1ZShnbCx2YWx1ZSx0aGlzLnJlbmRlcmVyKTt9O1dlYkdMVW5pZm9ybXMucHJvdG90eXBlLnNldE9wdGlvbmFsPWZ1bmN0aW9uKGdsLG9iamVjdCxuYW1lKXt2YXIgdj1vYmplY3RbbmFtZV07aWYodiE9PXVuZGVmaW5lZCl0aGlzLnNldFZhbHVlKGdsLG5hbWUsdik7fTsvLyBTdGF0aWMgaW50ZXJmYWNlCldlYkdMVW5pZm9ybXMudXBsb2FkPWZ1bmN0aW9uKGdsLHNlcSx2YWx1ZXMscmVuZGVyZXIpe2Zvcih2YXIgaT0wLG49c2VxLmxlbmd0aDtpIT09bjsrK2kpe3ZhciB1PXNlcVtpXSx2PXZhbHVlc1t1LmlkXTtpZih2Lm5lZWRzVXBkYXRlIT09ZmFsc2Upey8vIG5vdGU6IGFsd2F5cyB1cGRhdGluZyB3aGVuIC5uZWVkc1VwZGF0ZSBpcyB1bmRlZmluZWQKdS5zZXRWYWx1ZShnbCx2LnZhbHVlLHJlbmRlcmVyKTt9fX07V2ViR0xVbmlmb3Jtcy5zZXFXaXRoVmFsdWU9ZnVuY3Rpb24oc2VxLHZhbHVlcyl7dmFyIHI9W107Zm9yKHZhciBpPTAsbj1zZXEubGVuZ3RoO2khPT1uOysraSl7dmFyIHU9c2VxW2ldO2lmKHUuaWQgaW4gdmFsdWVzKXIucHVzaCh1KTt9cmV0dXJuIHI7fTsvKioKICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS8KICovdmFyIENvbG9yS2V5d29yZHM9eydhbGljZWJsdWUnOjB4RjBGOEZGLCdhbnRpcXVld2hpdGUnOjB4RkFFQkQ3LCdhcXVhJzoweDAwRkZGRiwnYXF1YW1hcmluZSc6MHg3RkZGRDQsJ2F6dXJlJzoweEYwRkZGRiwnYmVpZ2UnOjB4RjVGNURDLCdiaXNxdWUnOjB4RkZFNEM0LCdibGFjayc6MHgwMDAwMDAsJ2JsYW5jaGVkYWxtb25kJzoweEZGRUJDRCwnYmx1ZSc6MHgwMDAwRkYsJ2JsdWV2aW9sZXQnOjB4OEEyQkUyLCdicm93bic6MHhBNTJBMkEsJ2J1cmx5d29vZCc6MHhERUI4ODcsJ2NhZGV0Ymx1ZSc6MHg1RjlFQTAsJ2NoYXJ0cmV1c2UnOjB4N0ZGRjAwLCdjaG9jb2xhdGUnOjB4RDI2OTFFLCdjb3JhbCc6MHhGRjdGNTAsJ2Nvcm5mbG93ZXJibHVlJzoweDY0OTVFRCwnY29ybnNpbGsnOjB4RkZGOERDLCdjcmltc29uJzoweERDMTQzQywnY3lhbic6MHgwMEZGRkYsJ2RhcmtibHVlJzoweDAwMDA4QiwnZGFya2N5YW4nOjB4MDA4QjhCLCdkYXJrZ29sZGVucm9kJzoweEI4ODYwQiwnZGFya2dyYXknOjB4QTlBOUE5LCdkYXJrZ3JlZW4nOjB4MDA2NDAwLCdkYXJrZ3JleSc6MHhBOUE5QTksJ2RhcmtraGFraSc6MHhCREI3NkIsJ2RhcmttYWdlbnRhJzoweDhCMDA4QiwnZGFya29saXZlZ3JlZW4nOjB4NTU2QjJGLCdkYXJrb3JhbmdlJzoweEZGOEMwMCwnZGFya29yY2hpZCc6MHg5OTMyQ0MsJ2RhcmtyZWQnOjB4OEIwMDAwLCdkYXJrc2FsbW9uJzoweEU5OTY3QSwnZGFya3NlYWdyZWVuJzoweDhGQkM4RiwnZGFya3NsYXRlYmx1ZSc6MHg0ODNEOEIsJ2RhcmtzbGF0ZWdyYXknOjB4MkY0RjRGLCdkYXJrc2xhdGVncmV5JzoweDJGNEY0RiwnZGFya3R1cnF1b2lzZSc6MHgwMENFRDEsJ2Rhcmt2aW9sZXQnOjB4OTQwMEQzLCdkZWVwcGluayc6MHhGRjE0OTMsJ2RlZXBza3libHVlJzoweDAwQkZGRiwnZGltZ3JheSc6MHg2OTY5NjksJ2RpbWdyZXknOjB4Njk2OTY5LCdkb2RnZXJibHVlJzoweDFFOTBGRiwnZmlyZWJyaWNrJzoweEIyMjIyMiwnZmxvcmFsd2hpdGUnOjB4RkZGQUYwLCdmb3Jlc3RncmVlbic6MHgyMjhCMjIsJ2Z1Y2hzaWEnOjB4RkYwMEZGLCdnYWluc2Jvcm8nOjB4RENEQ0RDLCdnaG9zdHdoaXRlJzoweEY4RjhGRiwnZ29sZCc6MHhGRkQ3MDAsJ2dvbGRlbnJvZCc6MHhEQUE1MjAsJ2dyYXknOjB4ODA4MDgwLCdncmVlbic6MHgwMDgwMDAsJ2dyZWVueWVsbG93JzoweEFERkYyRiwnZ3JleSc6MHg4MDgwODAsJ2hvbmV5ZGV3JzoweEYwRkZGMCwnaG90cGluayc6MHhGRjY5QjQsJ2luZGlhbnJlZCc6MHhDRDVDNUMsJ2luZGlnbyc6MHg0QjAwODIsJ2l2b3J5JzoweEZGRkZGMCwna2hha2knOjB4RjBFNjhDLCdsYXZlbmRlcic6MHhFNkU2RkEsJ2xhdmVuZGVyYmx1c2gnOjB4RkZGMEY1LCdsYXduZ3JlZW4nOjB4N0NGQzAwLCdsZW1vbmNoaWZmb24nOjB4RkZGQUNELCdsaWdodGJsdWUnOjB4QUREOEU2LCdsaWdodGNvcmFsJzoweEYwODA4MCwnbGlnaHRjeWFuJzoweEUwRkZGRiwnbGlnaHRnb2xkZW5yb2R5ZWxsb3cnOjB4RkFGQUQyLCdsaWdodGdyYXknOjB4RDNEM0QzLCdsaWdodGdyZWVuJzoweDkwRUU5MCwnbGlnaHRncmV5JzoweEQzRDNEMywnbGlnaHRwaW5rJzoweEZGQjZDMSwnbGlnaHRzYWxtb24nOjB4RkZBMDdBLCdsaWdodHNlYWdyZWVuJzoweDIwQjJBQSwnbGlnaHRza3libHVlJzoweDg3Q0VGQSwnbGlnaHRzbGF0ZWdyYXknOjB4Nzc4ODk5LCdsaWdodHNsYXRlZ3JleSc6MHg3Nzg4OTksJ2xpZ2h0c3RlZWxibHVlJzoweEIwQzRERSwnbGlnaHR5ZWxsb3cnOjB4RkZGRkUwLCdsaW1lJzoweDAwRkYwMCwnbGltZWdyZWVuJzoweDMyQ0QzMiwnbGluZW4nOjB4RkFGMEU2LCdtYWdlbnRhJzoweEZGMDBGRiwnbWFyb29uJzoweDgwMDAwMCwnbWVkaXVtYXF1YW1hcmluZSc6MHg2NkNEQUEsJ21lZGl1bWJsdWUnOjB4MDAwMENELCdtZWRpdW1vcmNoaWQnOjB4QkE1NUQzLCdtZWRpdW1wdXJwbGUnOjB4OTM3MERCLCdtZWRpdW1zZWFncmVlbic6MHgzQ0IzNzEsJ21lZGl1bXNsYXRlYmx1ZSc6MHg3QjY4RUUsJ21lZGl1bXNwcmluZ2dyZWVuJzoweDAwRkE5QSwnbWVkaXVtdHVycXVvaXNlJzoweDQ4RDFDQywnbWVkaXVtdmlvbGV0cmVkJzoweEM3MTU4NSwnbWlkbmlnaHRibHVlJzoweDE5MTk3MCwnbWludGNyZWFtJzoweEY1RkZGQSwnbWlzdHlyb3NlJzoweEZGRTRFMSwnbW9jY2FzaW4nOjB4RkZFNEI1LCduYXZham93aGl0ZSc6MHhGRkRFQUQsJ25hdnknOjB4MDAwMDgwLCdvbGRsYWNlJzoweEZERjVFNiwnb2xpdmUnOjB4ODA4MDAwLCdvbGl2ZWRyYWInOjB4NkI4RTIzLCdvcmFuZ2UnOjB4RkZBNTAwLCdvcmFuZ2VyZWQnOjB4RkY0NTAwLCdvcmNoaWQnOjB4REE3MEQ2LCdwYWxlZ29sZGVucm9kJzoweEVFRThBQSwncGFsZWdyZWVuJzoweDk4RkI5OCwncGFsZXR1cnF1b2lzZSc6MHhBRkVFRUUsJ3BhbGV2aW9sZXRyZWQnOjB4REI3MDkzLCdwYXBheWF3aGlwJzoweEZGRUZENSwncGVhY2hwdWZmJzoweEZGREFCOSwncGVydSc6MHhDRDg1M0YsJ3BpbmsnOjB4RkZDMENCLCdwbHVtJzoweEREQTBERCwncG93ZGVyYmx1ZSc6MHhCMEUwRTYsJ3B1cnBsZSc6MHg4MDAwODAsJ3JlYmVjY2FwdXJwbGUnOjB4NjYzMzk5LCdyZWQnOjB4RkYwMDAwLCdyb3N5YnJvd24nOjB4QkM4RjhGLCdyb3lhbGJsdWUnOjB4NDE2OUUxLCdzYWRkbGVicm93bic6MHg4QjQ1MTMsJ3NhbG1vbic6MHhGQTgwNzIsJ3NhbmR5YnJvd24nOjB4RjRBNDYwLCdzZWFncmVlbic6MHgyRThCNTcsJ3NlYXNoZWxsJzoweEZGRjVFRSwnc2llbm5hJzoweEEwNTIyRCwnc2lsdmVyJzoweEMwQzBDMCwnc2t5Ymx1ZSc6MHg4N0NFRUIsJ3NsYXRlYmx1ZSc6MHg2QTVBQ0QsJ3NsYXRlZ3JheSc6MHg3MDgwOTAsJ3NsYXRlZ3JleSc6MHg3MDgwOTAsJ3Nub3cnOjB4RkZGQUZBLCdzcHJpbmdncmVlbic6MHgwMEZGN0YsJ3N0ZWVsYmx1ZSc6MHg0NjgyQjQsJ3Rhbic6MHhEMkI0OEMsJ3RlYWwnOjB4MDA4MDgwLCd0aGlzdGxlJzoweEQ4QkZEOCwndG9tYXRvJzoweEZGNjM0NywndHVycXVvaXNlJzoweDQwRTBEMCwndmlvbGV0JzoweEVFODJFRSwnd2hlYXQnOjB4RjVERUIzLCd3aGl0ZSc6MHhGRkZGRkYsJ3doaXRlc21va2UnOjB4RjVGNUY1LCd5ZWxsb3cnOjB4RkZGRjAwLCd5ZWxsb3dncmVlbic6MHg5QUNEMzJ9O2Z1bmN0aW9uIENvbG9yKHIsZyxiKXtpZihnPT09dW5kZWZpbmVkJiZiPT09dW5kZWZpbmVkKXsvLyByIGlzIFRIUkVFLkNvbG9yLCBoZXggb3Igc3RyaW5nCnJldHVybiB0aGlzLnNldChyKTt9cmV0dXJuIHRoaXMuc2V0UkdCKHIsZyxiKTt9T2JqZWN0LmFzc2lnbihDb2xvci5wcm90b3R5cGUse2lzQ29sb3I6dHJ1ZSxyOjEsZzoxLGI6MSxzZXQ6ZnVuY3Rpb24gc2V0KHZhbHVlKXtpZih2YWx1ZSYmdmFsdWUuaXNDb2xvcil7dGhpcy5jb3B5KHZhbHVlKTt9ZWxzZSBpZih0eXBlb2YgdmFsdWU9PT0nbnVtYmVyJyl7dGhpcy5zZXRIZXgodmFsdWUpO31lbHNlIGlmKHR5cGVvZiB2YWx1ZT09PSdzdHJpbmcnKXt0aGlzLnNldFN0eWxlKHZhbHVlKTt9cmV0dXJuIHRoaXM7fSxzZXRTY2FsYXI6ZnVuY3Rpb24gc2V0U2NhbGFyKHNjYWxhcil7dGhpcy5yPXNjYWxhcjt0aGlzLmc9c2NhbGFyO3RoaXMuYj1zY2FsYXI7cmV0dXJuIHRoaXM7fSxzZXRIZXg6ZnVuY3Rpb24gc2V0SGV4KGhleCl7aGV4PU1hdGguZmxvb3IoaGV4KTt0aGlzLnI9KGhleD4+MTYmMjU1KS8yNTU7dGhpcy5nPShoZXg+PjgmMjU1KS8yNTU7dGhpcy5iPShoZXgmMjU1KS8yNTU7cmV0dXJuIHRoaXM7fSxzZXRSR0I6ZnVuY3Rpb24gc2V0UkdCKHIsZyxiKXt0aGlzLnI9cjt0aGlzLmc9Zzt0aGlzLmI9YjtyZXR1cm4gdGhpczt9LHNldEhTTDpmdW5jdGlvbigpe2Z1bmN0aW9uIGh1ZTJyZ2IocCxxLHQpe2lmKHQ8MCl0Kz0xO2lmKHQ+MSl0LT0xO2lmKHQ8MS82KXJldHVybiBwKyhxLXApKjYqdDtpZih0PDEvMilyZXR1cm4gcTtpZih0PDIvMylyZXR1cm4gcCsocS1wKSo2KigyLzMtdCk7cmV0dXJuIHA7fXJldHVybiBmdW5jdGlvbiBzZXRIU0woaCxzLGwpey8vIGgscyxsIHJhbmdlcyBhcmUgaW4gMC4wIC0gMS4wCmg9X01hdGguZXVjbGlkZWFuTW9kdWxvKGgsMSk7cz1fTWF0aC5jbGFtcChzLDAsMSk7bD1fTWF0aC5jbGFtcChsLDAsMSk7aWYocz09PTApe3RoaXMucj10aGlzLmc9dGhpcy5iPWw7fWVsc2V7dmFyIHA9bDw9MC41P2wqKDErcyk6bCtzLWwqczt2YXIgcT0yKmwtcDt0aGlzLnI9aHVlMnJnYihxLHAsaCsxLzMpO3RoaXMuZz1odWUycmdiKHEscCxoKTt0aGlzLmI9aHVlMnJnYihxLHAsaC0xLzMpO31yZXR1cm4gdGhpczt9O30oKSxzZXRTdHlsZTpmdW5jdGlvbiBzZXRTdHlsZShzdHlsZSl7ZnVuY3Rpb24gaGFuZGxlQWxwaGEoc3RyaW5nKXtpZihzdHJpbmc9PT11bmRlZmluZWQpcmV0dXJuO2lmKHBhcnNlRmxvYXQoc3RyaW5nKTwxKXtjb25zb2xlLndhcm4oJ1RIUkVFLkNvbG9yOiBBbHBoYSBjb21wb25lbnQgb2YgJytzdHlsZSsnIHdpbGwgYmUgaWdub3JlZC4nKTt9fXZhciBtO2lmKG09L14oKD86cmdifGhzbClhPylcKFxzKihbXlwpXSopXCkvLmV4ZWMoc3R5bGUpKXsvLyByZ2IgLyBoc2wKdmFyIGNvbG9yO3ZhciBuYW1lPW1bMV07dmFyIGNvbXBvbmVudHM9bVsyXTtzd2l0Y2gobmFtZSl7Y2FzZSdyZ2InOmNhc2UncmdiYSc6aWYoY29sb3I9L14oXGQrKVxzKixccyooXGQrKVxzKixccyooXGQrKVxzKigsXHMqKFswLTldKlwuP1swLTldKylccyopPyQvLmV4ZWMoY29tcG9uZW50cykpey8vIHJnYigyNTUsMCwwKSByZ2JhKDI1NSwwLDAsMC41KQp0aGlzLnI9TWF0aC5taW4oMjU1LHBhcnNlSW50KGNvbG9yWzFdLDEwKSkvMjU1O3RoaXMuZz1NYXRoLm1pbigyNTUscGFyc2VJbnQoY29sb3JbMl0sMTApKS8yNTU7dGhpcy5iPU1hdGgubWluKDI1NSxwYXJzZUludChjb2xvclszXSwxMCkpLzI1NTtoYW5kbGVBbHBoYShjb2xvcls1XSk7cmV0dXJuIHRoaXM7fWlmKGNvbG9yPS9eKFxkKylcJVxzKixccyooXGQrKVwlXHMqLFxzKihcZCspXCVccyooLFxzKihbMC05XSpcLj9bMC05XSspXHMqKT8kLy5leGVjKGNvbXBvbmVudHMpKXsvLyByZ2IoMTAwJSwwJSwwJSkgcmdiYSgxMDAlLDAlLDAlLDAuNSkKdGhpcy5yPU1hdGgubWluKDEwMCxwYXJzZUludChjb2xvclsxXSwxMCkpLzEwMDt0aGlzLmc9TWF0aC5taW4oMTAwLHBhcnNlSW50KGNvbG9yWzJdLDEwKSkvMTAwO3RoaXMuYj1NYXRoLm1pbigxMDAscGFyc2VJbnQoY29sb3JbM10sMTApKS8xMDA7aGFuZGxlQWxwaGEoY29sb3JbNV0pO3JldHVybiB0aGlzO31icmVhaztjYXNlJ2hzbCc6Y2FzZSdoc2xhJzppZihjb2xvcj0vXihbMC05XSpcLj9bMC05XSspXHMqLFxzKihcZCspXCVccyosXHMqKFxkKylcJVxzKigsXHMqKFswLTldKlwuP1swLTldKylccyopPyQvLmV4ZWMoY29tcG9uZW50cykpey8vIGhzbCgxMjAsNTAlLDUwJSkgaHNsYSgxMjAsNTAlLDUwJSwwLjUpCnZhciBoPXBhcnNlRmxvYXQoY29sb3JbMV0pLzM2MDt2YXIgcz1wYXJzZUludChjb2xvclsyXSwxMCkvMTAwO3ZhciBsPXBhcnNlSW50KGNvbG9yWzNdLDEwKS8xMDA7aGFuZGxlQWxwaGEoY29sb3JbNV0pO3JldHVybiB0aGlzLnNldEhTTChoLHMsbCk7fWJyZWFrO319ZWxzZSBpZihtPS9eXCMoW0EtRmEtZjAtOV0rKSQvLmV4ZWMoc3R5bGUpKXsvLyBoZXggY29sb3IKdmFyIGhleD1tWzFdO3ZhciBzaXplPWhleC5sZW5ndGg7aWYoc2l6ZT09PTMpey8vICNmZjAKdGhpcy5yPXBhcnNlSW50KGhleC5jaGFyQXQoMCkraGV4LmNoYXJBdCgwKSwxNikvMjU1O3RoaXMuZz1wYXJzZUludChoZXguY2hhckF0KDEpK2hleC5jaGFyQXQoMSksMTYpLzI1NTt0aGlzLmI9cGFyc2VJbnQoaGV4LmNoYXJBdCgyKStoZXguY2hhckF0KDIpLDE2KS8yNTU7cmV0dXJuIHRoaXM7fWVsc2UgaWYoc2l6ZT09PTYpey8vICNmZjAwMDAKdGhpcy5yPXBhcnNlSW50KGhleC5jaGFyQXQoMCkraGV4LmNoYXJBdCgxKSwxNikvMjU1O3RoaXMuZz1wYXJzZUludChoZXguY2hhckF0KDIpK2hleC5jaGFyQXQoMyksMTYpLzI1NTt0aGlzLmI9cGFyc2VJbnQoaGV4LmNoYXJBdCg0KStoZXguY2hhckF0KDUpLDE2KS8yNTU7cmV0dXJuIHRoaXM7fX1pZihzdHlsZSYmc3R5bGUubGVuZ3RoPjApey8vIGNvbG9yIGtleXdvcmRzCnZhciBoZXg9Q29sb3JLZXl3b3Jkc1tzdHlsZV07aWYoaGV4IT09dW5kZWZpbmVkKXsvLyByZWQKdGhpcy5zZXRIZXgoaGV4KTt9ZWxzZXsvLyB1bmtub3duIGNvbG9yCmNvbnNvbGUud2FybignVEhSRUUuQ29sb3I6IFVua25vd24gY29sb3IgJytzdHlsZSk7fX1yZXR1cm4gdGhpczt9LGNsb25lOmZ1bmN0aW9uIGNsb25lKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMucix0aGlzLmcsdGhpcy5iKTt9LGNvcHk6ZnVuY3Rpb24gY29weShjb2xvcil7dGhpcy5yPWNvbG9yLnI7dGhpcy5nPWNvbG9yLmc7dGhpcy5iPWNvbG9yLmI7cmV0dXJuIHRoaXM7fSxjb3B5R2FtbWFUb0xpbmVhcjpmdW5jdGlvbiBjb3B5R2FtbWFUb0xpbmVhcihjb2xvcixnYW1tYUZhY3Rvcil7aWYoZ2FtbWFGYWN0b3I9PT11bmRlZmluZWQpZ2FtbWFGYWN0b3I9Mi4wO3RoaXMucj1NYXRoLnBvdyhjb2xvci5yLGdhbW1hRmFjdG9yKTt0aGlzLmc9TWF0aC5wb3coY29sb3IuZyxnYW1tYUZhY3Rvcik7dGhpcy5iPU1hdGgucG93KGNvbG9yLmIsZ2FtbWFGYWN0b3IpO3JldHVybiB0aGlzO30sY29weUxpbmVhclRvR2FtbWE6ZnVuY3Rpb24gY29weUxpbmVhclRvR2FtbWEoY29sb3IsZ2FtbWFGYWN0b3Ipe2lmKGdhbW1hRmFjdG9yPT09dW5kZWZpbmVkKWdhbW1hRmFjdG9yPTIuMDt2YXIgc2FmZUludmVyc2U9Z2FtbWFGYWN0b3I+MD8xLjAvZ2FtbWFGYWN0b3I6MS4wO3RoaXMucj1NYXRoLnBvdyhjb2xvci5yLHNhZmVJbnZlcnNlKTt0aGlzLmc9TWF0aC5wb3coY29sb3IuZyxzYWZlSW52ZXJzZSk7dGhpcy5iPU1hdGgucG93KGNvbG9yLmIsc2FmZUludmVyc2UpO3JldHVybiB0aGlzO30sY29udmVydEdhbW1hVG9MaW5lYXI6ZnVuY3Rpb24gY29udmVydEdhbW1hVG9MaW5lYXIoKXt2YXIgcj10aGlzLnIsZz10aGlzLmcsYj10aGlzLmI7dGhpcy5yPXIqcjt0aGlzLmc9ZypnO3RoaXMuYj1iKmI7cmV0dXJuIHRoaXM7fSxjb252ZXJ0TGluZWFyVG9HYW1tYTpmdW5jdGlvbiBjb252ZXJ0TGluZWFyVG9HYW1tYSgpe3RoaXMucj1NYXRoLnNxcnQodGhpcy5yKTt0aGlzLmc9TWF0aC5zcXJ0KHRoaXMuZyk7dGhpcy5iPU1hdGguc3FydCh0aGlzLmIpO3JldHVybiB0aGlzO30sZ2V0SGV4OmZ1bmN0aW9uIGdldEhleCgpe3JldHVybiB0aGlzLnIqMjU1PDwxNl50aGlzLmcqMjU1PDw4XnRoaXMuYioyNTU8PDA7fSxnZXRIZXhTdHJpbmc6ZnVuY3Rpb24gZ2V0SGV4U3RyaW5nKCl7cmV0dXJuKCcwMDAwMDAnK3RoaXMuZ2V0SGV4KCkudG9TdHJpbmcoMTYpKS5zbGljZSgtNik7fSxnZXRIU0w6ZnVuY3Rpb24gZ2V0SFNMKG9wdGlvbmFsVGFyZ2V0KXsvLyBoLHMsbCByYW5nZXMgYXJlIGluIDAuMCAtIDEuMAp2YXIgaHNsPW9wdGlvbmFsVGFyZ2V0fHx7aDowLHM6MCxsOjB9O3ZhciByPXRoaXMucixnPXRoaXMuZyxiPXRoaXMuYjt2YXIgbWF4PU1hdGgubWF4KHIsZyxiKTt2YXIgbWluPU1hdGgubWluKHIsZyxiKTt2YXIgaHVlLHNhdHVyYXRpb247dmFyIGxpZ2h0bmVzcz0obWluK21heCkvMi4wO2lmKG1pbj09PW1heCl7aHVlPTA7c2F0dXJhdGlvbj0wO31lbHNle3ZhciBkZWx0YT1tYXgtbWluO3NhdHVyYXRpb249bGlnaHRuZXNzPD0wLjU/ZGVsdGEvKG1heCttaW4pOmRlbHRhLygyLW1heC1taW4pO3N3aXRjaChtYXgpe2Nhc2UgcjpodWU9KGctYikvZGVsdGErKGc8Yj82OjApO2JyZWFrO2Nhc2UgZzpodWU9KGItcikvZGVsdGErMjticmVhaztjYXNlIGI6aHVlPShyLWcpL2RlbHRhKzQ7YnJlYWs7fWh1ZS89Njt9aHNsLmg9aHVlO2hzbC5zPXNhdHVyYXRpb247aHNsLmw9bGlnaHRuZXNzO3JldHVybiBoc2w7fSxnZXRTdHlsZTpmdW5jdGlvbiBnZXRTdHlsZSgpe3JldHVybidyZ2IoJysodGhpcy5yKjI1NXwwKSsnLCcrKHRoaXMuZyoyNTV8MCkrJywnKyh0aGlzLmIqMjU1fDApKycpJzt9LG9mZnNldEhTTDpmdW5jdGlvbiBvZmZzZXRIU0woaCxzLGwpe3ZhciBoc2w9dGhpcy5nZXRIU0woKTtoc2wuaCs9aDtoc2wucys9cztoc2wubCs9bDt0aGlzLnNldEhTTChoc2wuaCxoc2wucyxoc2wubCk7cmV0dXJuIHRoaXM7fSxhZGQ6ZnVuY3Rpb24gYWRkKGNvbG9yKXt0aGlzLnIrPWNvbG9yLnI7dGhpcy5nKz1jb2xvci5nO3RoaXMuYis9Y29sb3IuYjtyZXR1cm4gdGhpczt9LGFkZENvbG9yczpmdW5jdGlvbiBhZGRDb2xvcnMoY29sb3IxLGNvbG9yMil7dGhpcy5yPWNvbG9yMS5yK2NvbG9yMi5yO3RoaXMuZz1jb2xvcjEuZytjb2xvcjIuZzt0aGlzLmI9Y29sb3IxLmIrY29sb3IyLmI7cmV0dXJuIHRoaXM7fSxhZGRTY2FsYXI6ZnVuY3Rpb24gYWRkU2NhbGFyKHMpe3RoaXMucis9czt0aGlzLmcrPXM7dGhpcy5iKz1zO3JldHVybiB0aGlzO30sc3ViOmZ1bmN0aW9uIHN1Yihjb2xvcil7dGhpcy5yPU1hdGgubWF4KDAsdGhpcy5yLWNvbG9yLnIpO3RoaXMuZz1NYXRoLm1heCgwLHRoaXMuZy1jb2xvci5nKTt0aGlzLmI9TWF0aC5tYXgoMCx0aGlzLmItY29sb3IuYik7cmV0dXJuIHRoaXM7fSxtdWx0aXBseTpmdW5jdGlvbiBtdWx0aXBseShjb2xvcil7dGhpcy5yKj1jb2xvci5yO3RoaXMuZyo9Y29sb3IuZzt0aGlzLmIqPWNvbG9yLmI7cmV0dXJuIHRoaXM7fSxtdWx0aXBseVNjYWxhcjpmdW5jdGlvbiBtdWx0aXBseVNjYWxhcihzKXt0aGlzLnIqPXM7dGhpcy5nKj1zO3RoaXMuYio9cztyZXR1cm4gdGhpczt9LGxlcnA6ZnVuY3Rpb24gbGVycChjb2xvcixhbHBoYSl7dGhpcy5yKz0oY29sb3Iuci10aGlzLnIpKmFscGhhO3RoaXMuZys9KGNvbG9yLmctdGhpcy5nKSphbHBoYTt0aGlzLmIrPShjb2xvci5iLXRoaXMuYikqYWxwaGE7cmV0dXJuIHRoaXM7fSxlcXVhbHM6ZnVuY3Rpb24gZXF1YWxzKGMpe3JldHVybiBjLnI9PT10aGlzLnImJmMuZz09PXRoaXMuZyYmYy5iPT09dGhpcy5iO30sZnJvbUFycmF5OmZ1bmN0aW9uIGZyb21BcnJheShhcnJheSxvZmZzZXQpe2lmKG9mZnNldD09PXVuZGVmaW5lZClvZmZzZXQ9MDt0aGlzLnI9YXJyYXlbb2Zmc2V0XTt0aGlzLmc9YXJyYXlbb2Zmc2V0KzFdO3RoaXMuYj1hcnJheVtvZmZzZXQrMl07cmV0dXJuIHRoaXM7fSx0b0FycmF5OmZ1bmN0aW9uIHRvQXJyYXkoYXJyYXksb2Zmc2V0KXtpZihhcnJheT09PXVuZGVmaW5lZClhcnJheT1bXTtpZihvZmZzZXQ9PT11bmRlZmluZWQpb2Zmc2V0PTA7YXJyYXlbb2Zmc2V0XT10aGlzLnI7YXJyYXlbb2Zmc2V0KzFdPXRoaXMuZzthcnJheVtvZmZzZXQrMl09dGhpcy5iO3JldHVybiBhcnJheTt9LHRvSlNPTjpmdW5jdGlvbiB0b0pTT04oKXtyZXR1cm4gdGhpcy5nZXRIZXgoKTt9fSk7LyoqCiAqIFVuaWZvcm1zIGxpYnJhcnkgZm9yIHNoYXJlZCB3ZWJnbCBzaGFkZXJzCiAqL3ZhciBVbmlmb3Jtc0xpYj17Y29tbW9uOntkaWZmdXNlOnt2YWx1ZTpuZXcgQ29sb3IoMHhlZWVlZWUpfSxvcGFjaXR5Ont2YWx1ZToxLjB9LG1hcDp7dmFsdWU6bnVsbH0sdXZUcmFuc2Zvcm06e3ZhbHVlOm5ldyBNYXRyaXgzKCl9LGFscGhhTWFwOnt2YWx1ZTpudWxsfX0sc3BlY3VsYXJtYXA6e3NwZWN1bGFyTWFwOnt2YWx1ZTpudWxsfX0sZW52bWFwOntlbnZNYXA6e3ZhbHVlOm51bGx9LGZsaXBFbnZNYXA6e3ZhbHVlOi0xfSxyZWZsZWN0aXZpdHk6e3ZhbHVlOjEuMH0scmVmcmFjdGlvblJhdGlvOnt2YWx1ZTowLjk4fX0sYW9tYXA6e2FvTWFwOnt2YWx1ZTpudWxsfSxhb01hcEludGVuc2l0eTp7dmFsdWU6MX19LGxpZ2h0bWFwOntsaWdodE1hcDp7dmFsdWU6bnVsbH0sbGlnaHRNYXBJbnRlbnNpdHk6e3ZhbHVlOjF9fSxlbWlzc2l2ZW1hcDp7ZW1pc3NpdmVNYXA6e3ZhbHVlOm51bGx9fSxidW1wbWFwOntidW1wTWFwOnt2YWx1ZTpudWxsfSxidW1wU2NhbGU6e3ZhbHVlOjF9fSxub3JtYWxtYXA6e25vcm1hbE1hcDp7dmFsdWU6bnVsbH0sbm9ybWFsU2NhbGU6e3ZhbHVlOm5ldyBWZWN0b3IyKDEsMSl9fSxkaXNwbGFjZW1lbnRtYXA6e2Rpc3BsYWNlbWVudE1hcDp7dmFsdWU6bnVsbH0sZGlzcGxhY2VtZW50U2NhbGU6e3ZhbHVlOjF9LGRpc3BsYWNlbWVudEJpYXM6e3ZhbHVlOjB9fSxyb3VnaG5lc3NtYXA6e3JvdWdobmVzc01hcDp7dmFsdWU6bnVsbH19LG1ldGFsbmVzc21hcDp7bWV0YWxuZXNzTWFwOnt2YWx1ZTpudWxsfX0sZ3JhZGllbnRtYXA6e2dyYWRpZW50TWFwOnt2YWx1ZTpudWxsfX0sZm9nOntmb2dEZW5zaXR5Ont2YWx1ZTowLjAwMDI1fSxmb2dOZWFyOnt2YWx1ZToxfSxmb2dGYXI6e3ZhbHVlOjIwMDB9LGZvZ0NvbG9yOnt2YWx1ZTpuZXcgQ29sb3IoMHhmZmZmZmYpfX0sbGlnaHRzOnthbWJpZW50TGlnaHRDb2xvcjp7dmFsdWU6W119LGRpcmVjdGlvbmFsTGlnaHRzOnt2YWx1ZTpbXSxwcm9wZXJ0aWVzOntkaXJlY3Rpb246e30sY29sb3I6e30sc2hhZG93Ont9LHNoYWRvd0JpYXM6e30sc2hhZG93UmFkaXVzOnt9LHNoYWRvd01hcFNpemU6e319fSxkaXJlY3Rpb25hbFNoYWRvd01hcDp7dmFsdWU6W119LGRpcmVjdGlvbmFsU2hhZG93TWF0cml4Ont2YWx1ZTpbXX0sc3BvdExpZ2h0czp7dmFsdWU6W10scHJvcGVydGllczp7Y29sb3I6e30scG9zaXRpb246e30sZGlyZWN0aW9uOnt9LGRpc3RhbmNlOnt9LGNvbmVDb3M6e30scGVudW1icmFDb3M6e30sZGVjYXk6e30sc2hhZG93Ont9LHNoYWRvd0JpYXM6e30sc2hhZG93UmFkaXVzOnt9LHNoYWRvd01hcFNpemU6e319fSxzcG90U2hhZG93TWFwOnt2YWx1ZTpbXX0sc3BvdFNoYWRvd01hdHJpeDp7dmFsdWU6W119LHBvaW50TGlnaHRzOnt2YWx1ZTpbXSxwcm9wZXJ0aWVzOntjb2xvcjp7fSxwb3NpdGlvbjp7fSxkZWNheTp7fSxkaXN0YW5jZTp7fSxzaGFkb3c6e30sc2hhZG93Qmlhczp7fSxzaGFkb3dSYWRpdXM6e30sc2hhZG93TWFwU2l6ZTp7fSxzaGFkb3dDYW1lcmFOZWFyOnt9LHNoYWRvd0NhbWVyYUZhcjp7fX19LHBvaW50U2hhZG93TWFwOnt2YWx1ZTpbXX0scG9pbnRTaGFkb3dNYXRyaXg6e3ZhbHVlOltdfSxoZW1pc3BoZXJlTGlnaHRzOnt2YWx1ZTpbXSxwcm9wZXJ0aWVzOntkaXJlY3Rpb246e30sc2t5Q29sb3I6e30sZ3JvdW5kQ29sb3I6e319fSwvLyBUT0RPIChhYmVsbmF0aW9uKTogUmVjdEFyZWFMaWdodCBCUkRGIGRhdGEgbmVlZHMgdG8gYmUgbW92ZWQgZnJvbSBleGFtcGxlIHRvIG1haW4gc3JjCnJlY3RBcmVhTGlnaHRzOnt2YWx1ZTpbXSxwcm9wZXJ0aWVzOntjb2xvcjp7fSxwb3NpdGlvbjp7fSx3aWR0aDp7fSxoZWlnaHQ6e319fX0scG9pbnRzOntkaWZmdXNlOnt2YWx1ZTpuZXcgQ29sb3IoMHhlZWVlZWUpfSxvcGFjaXR5Ont2YWx1ZToxLjB9LHNpemU6e3ZhbHVlOjEuMH0sc2NhbGU6e3ZhbHVlOjEuMH0sbWFwOnt2YWx1ZTpudWxsfSx1dlRyYW5zZm9ybTp7dmFsdWU6bmV3IE1hdHJpeDMoKX19fTsvKioKICogVW5pZm9ybSBVdGlsaXRpZXMKICovdmFyIFVuaWZvcm1zVXRpbHM9e21lcmdlOmZ1bmN0aW9uIG1lcmdlKHVuaWZvcm1zKXt2YXIgbWVyZ2VkPXt9O2Zvcih2YXIgdT0wO3U8dW5pZm9ybXMubGVuZ3RoO3UrKyl7dmFyIHRtcD10aGlzLmNsb25lKHVuaWZvcm1zW3VdKTtmb3IodmFyIHAgaW4gdG1wKXttZXJnZWRbcF09dG1wW3BdO319cmV0dXJuIG1lcmdlZDt9LGNsb25lOmZ1bmN0aW9uIGNsb25lKHVuaWZvcm1zX3NyYyl7dmFyIHVuaWZvcm1zX2RzdD17fTtmb3IodmFyIHUgaW4gdW5pZm9ybXNfc3JjKXt1bmlmb3Jtc19kc3RbdV09e307Zm9yKHZhciBwIGluIHVuaWZvcm1zX3NyY1t1XSl7dmFyIHBhcmFtZXRlcl9zcmM9dW5pZm9ybXNfc3JjW3VdW3BdO2lmKHBhcmFtZXRlcl9zcmMmJihwYXJhbWV0ZXJfc3JjLmlzQ29sb3J8fHBhcmFtZXRlcl9zcmMuaXNNYXRyaXgzfHxwYXJhbWV0ZXJfc3JjLmlzTWF0cml4NHx8cGFyYW1ldGVyX3NyYy5pc1ZlY3RvcjJ8fHBhcmFtZXRlcl9zcmMuaXNWZWN0b3IzfHxwYXJhbWV0ZXJfc3JjLmlzVmVjdG9yNHx8cGFyYW1ldGVyX3NyYy5pc1RleHR1cmUpKXt1bmlmb3Jtc19kc3RbdV1bcF09cGFyYW1ldGVyX3NyYy5jbG9uZSgpO31lbHNlIGlmKEFycmF5LmlzQXJyYXkocGFyYW1ldGVyX3NyYykpe3VuaWZvcm1zX2RzdFt1XVtwXT1wYXJhbWV0ZXJfc3JjLnNsaWNlKCk7fWVsc2V7dW5pZm9ybXNfZHN0W3VdW3BdPXBhcmFtZXRlcl9zcmM7fX19cmV0dXJuIHVuaWZvcm1zX2RzdDt9fTt2YXIgYWxwaGFtYXBfZnJhZ21lbnQ9IiNpZmRlZiBVU0VfQUxQSEFNQVBcblx0ZGlmZnVzZUNvbG9yLmEgKj0gdGV4dHVyZTJEKCBhbHBoYU1hcCwgdlV2ICkuZztcbiNlbmRpZlxuIjt2YXIgYWxwaGFtYXBfcGFyc19mcmFnbWVudD0iI2lmZGVmIFVTRV9BTFBIQU1BUFxuXHR1bmlmb3JtIHNhbXBsZXIyRCBhbHBoYU1hcDtcbiNlbmRpZlxuIjt2YXIgYWxwaGF0ZXN0X2ZyYWdtZW50PSIjaWZkZWYgQUxQSEFURVNUXG5cdGlmICggZGlmZnVzZUNvbG9yLmEgPCBBTFBIQVRFU1QgKSBkaXNjYXJkO1xuI2VuZGlmXG4iO3ZhciBhb21hcF9mcmFnbWVudD0iI2lmZGVmIFVTRV9BT01BUFxuXHRmbG9hdCBhbWJpZW50T2NjbHVzaW9uID0gKCB0ZXh0dXJlMkQoIGFvTWFwLCB2VXYyICkuciAtIDEuMCApICogYW9NYXBJbnRlbnNpdHkgKyAxLjA7XG5cdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSAqPSBhbWJpZW50T2NjbHVzaW9uO1xuXHQjaWYgZGVmaW5lZCggVVNFX0VOVk1BUCApICYmIGRlZmluZWQoIFBIWVNJQ0FMIClcblx0XHRmbG9hdCBkb3ROViA9IHNhdHVyYXRlKCBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgZ2VvbWV0cnkudmlld0RpciApICk7XG5cdFx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3RTcGVjdWxhciAqPSBjb21wdXRlU3BlY3VsYXJPY2NsdXNpb24oIGRvdE5WLCBhbWJpZW50T2NjbHVzaW9uLCBtYXRlcmlhbC5zcGVjdWxhclJvdWdobmVzcyApO1xuXHQjZW5kaWZcbiNlbmRpZlxuIjt2YXIgYW9tYXBfcGFyc19mcmFnbWVudD0iI2lmZGVmIFVTRV9BT01BUFxuXHR1bmlmb3JtIHNhbXBsZXIyRCBhb01hcDtcblx0dW5pZm9ybSBmbG9hdCBhb01hcEludGVuc2l0eTtcbiNlbmRpZiI7dmFyIGJlZ2luX3ZlcnRleD0iXG52ZWMzIHRyYW5zZm9ybWVkID0gdmVjMyggcG9zaXRpb24gKTtcbiI7dmFyIGJlZ2lubm9ybWFsX3ZlcnRleD0iXG52ZWMzIG9iamVjdE5vcm1hbCA9IHZlYzMoIG5vcm1hbCApO1xuIjt2YXIgYnNkZnM9ImZsb2F0IHB1bmN0dWFsTGlnaHRJbnRlbnNpdHlUb0lycmFkaWFuY2VGYWN0b3IoIGNvbnN0IGluIGZsb2F0IGxpZ2h0RGlzdGFuY2UsIGNvbnN0IGluIGZsb2F0IGN1dG9mZkRpc3RhbmNlLCBjb25zdCBpbiBmbG9hdCBkZWNheUV4cG9uZW50ICkge1xuXHRpZiggZGVjYXlFeHBvbmVudCA+IDAuMCApIHtcbiNpZiBkZWZpbmVkICggUEhZU0lDQUxMWV9DT1JSRUNUX0xJR0hUUyApXG5cdFx0ZmxvYXQgZGlzdGFuY2VGYWxsb2ZmID0gMS4wIC8gbWF4KCBwb3coIGxpZ2h0RGlzdGFuY2UsIGRlY2F5RXhwb25lbnQgKSwgMC4wMSApO1xuXHRcdGZsb2F0IG1heERpc3RhbmNlQ3V0b2ZmRmFjdG9yID0gcG93Miggc2F0dXJhdGUoIDEuMCAtIHBvdzQoIGxpZ2h0RGlzdGFuY2UgLyBjdXRvZmZEaXN0YW5jZSApICkgKTtcblx0XHRyZXR1cm4gZGlzdGFuY2VGYWxsb2ZmICogbWF4RGlzdGFuY2VDdXRvZmZGYWN0b3I7XG4jZWxzZVxuXHRcdHJldHVybiBwb3coIHNhdHVyYXRlKCAtbGlnaHREaXN0YW5jZSAvIGN1dG9mZkRpc3RhbmNlICsgMS4wICksIGRlY2F5RXhwb25lbnQgKTtcbiNlbmRpZlxuXHR9XG5cdHJldHVybiAxLjA7XG59XG52ZWMzIEJSREZfRGlmZnVzZV9MYW1iZXJ0KCBjb25zdCBpbiB2ZWMzIGRpZmZ1c2VDb2xvciApIHtcblx0cmV0dXJuIFJFQ0lQUk9DQUxfUEkgKiBkaWZmdXNlQ29sb3I7XG59XG52ZWMzIEZfU2NobGljayggY29uc3QgaW4gdmVjMyBzcGVjdWxhckNvbG9yLCBjb25zdCBpbiBmbG9hdCBkb3RMSCApIHtcblx0ZmxvYXQgZnJlc25lbCA9IGV4cDIoICggLTUuNTU0NzMgKiBkb3RMSCAtIDYuOTgzMTYgKSAqIGRvdExIICk7XG5cdHJldHVybiAoIDEuMCAtIHNwZWN1bGFyQ29sb3IgKSAqIGZyZXNuZWwgKyBzcGVjdWxhckNvbG9yO1xufVxuZmxvYXQgR19HR1hfU21pdGgoIGNvbnN0IGluIGZsb2F0IGFscGhhLCBjb25zdCBpbiBmbG9hdCBkb3ROTCwgY29uc3QgaW4gZmxvYXQgZG90TlYgKSB7XG5cdGZsb2F0IGEyID0gcG93MiggYWxwaGEgKTtcblx0ZmxvYXQgZ2wgPSBkb3ROTCArIHNxcnQoIGEyICsgKCAxLjAgLSBhMiApICogcG93MiggZG90TkwgKSApO1xuXHRmbG9hdCBndiA9IGRvdE5WICsgc3FydCggYTIgKyAoIDEuMCAtIGEyICkgKiBwb3cyKCBkb3ROViApICk7XG5cdHJldHVybiAxLjAgLyAoIGdsICogZ3YgKTtcbn1cbmZsb2F0IEdfR0dYX1NtaXRoQ29ycmVsYXRlZCggY29uc3QgaW4gZmxvYXQgYWxwaGEsIGNvbnN0IGluIGZsb2F0IGRvdE5MLCBjb25zdCBpbiBmbG9hdCBkb3ROViApIHtcblx0ZmxvYXQgYTIgPSBwb3cyKCBhbHBoYSApO1xuXHRmbG9hdCBndiA9IGRvdE5MICogc3FydCggYTIgKyAoIDEuMCAtIGEyICkgKiBwb3cyKCBkb3ROViApICk7XG5cdGZsb2F0IGdsID0gZG90TlYgKiBzcXJ0KCBhMiArICggMS4wIC0gYTIgKSAqIHBvdzIoIGRvdE5MICkgKTtcblx0cmV0dXJuIDAuNSAvIG1heCggZ3YgKyBnbCwgRVBTSUxPTiApO1xufVxuZmxvYXQgRF9HR1goIGNvbnN0IGluIGZsb2F0IGFscGhhLCBjb25zdCBpbiBmbG9hdCBkb3ROSCApIHtcblx0ZmxvYXQgYTIgPSBwb3cyKCBhbHBoYSApO1xuXHRmbG9hdCBkZW5vbSA9IHBvdzIoIGRvdE5IICkgKiAoIGEyIC0gMS4wICkgKyAxLjA7XG5cdHJldHVybiBSRUNJUFJPQ0FMX1BJICogYTIgLyBwb3cyKCBkZW5vbSApO1xufVxudmVjMyBCUkRGX1NwZWN1bGFyX0dHWCggY29uc3QgaW4gSW5jaWRlbnRMaWdodCBpbmNpZGVudExpZ2h0LCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBjb25zdCBpbiB2ZWMzIHNwZWN1bGFyQ29sb3IsIGNvbnN0IGluIGZsb2F0IHJvdWdobmVzcyApIHtcblx0ZmxvYXQgYWxwaGEgPSBwb3cyKCByb3VnaG5lc3MgKTtcblx0dmVjMyBoYWxmRGlyID0gbm9ybWFsaXplKCBpbmNpZGVudExpZ2h0LmRpcmVjdGlvbiArIGdlb21ldHJ5LnZpZXdEaXIgKTtcblx0ZmxvYXQgZG90TkwgPSBzYXR1cmF0ZSggZG90KCBnZW9tZXRyeS5ub3JtYWwsIGluY2lkZW50TGlnaHQuZGlyZWN0aW9uICkgKTtcblx0ZmxvYXQgZG90TlYgPSBzYXR1cmF0ZSggZG90KCBnZW9tZXRyeS5ub3JtYWwsIGdlb21ldHJ5LnZpZXdEaXIgKSApO1xuXHRmbG9hdCBkb3ROSCA9IHNhdHVyYXRlKCBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgaGFsZkRpciApICk7XG5cdGZsb2F0IGRvdExIID0gc2F0dXJhdGUoIGRvdCggaW5jaWRlbnRMaWdodC5kaXJlY3Rpb24sIGhhbGZEaXIgKSApO1xuXHR2ZWMzIEYgPSBGX1NjaGxpY2soIHNwZWN1bGFyQ29sb3IsIGRvdExIICk7XG5cdGZsb2F0IEcgPSBHX0dHWF9TbWl0aENvcnJlbGF0ZWQoIGFscGhhLCBkb3ROTCwgZG90TlYgKTtcblx0ZmxvYXQgRCA9IERfR0dYKCBhbHBoYSwgZG90TkggKTtcblx0cmV0dXJuIEYgKiAoIEcgKiBEICk7XG59XG52ZWMyIExUQ19VdiggY29uc3QgaW4gdmVjMyBOLCBjb25zdCBpbiB2ZWMzIFYsIGNvbnN0IGluIGZsb2F0IHJvdWdobmVzcyApIHtcblx0Y29uc3QgZmxvYXQgTFVUX1NJWkUgID0gNjQuMDtcblx0Y29uc3QgZmxvYXQgTFVUX1NDQUxFID0gKCBMVVRfU0laRSAtIDEuMCApIC8gTFVUX1NJWkU7XG5cdGNvbnN0IGZsb2F0IExVVF9CSUFTICA9IDAuNSAvIExVVF9TSVpFO1xuXHRmbG9hdCB0aGV0YSA9IGFjb3MoIGRvdCggTiwgViApICk7XG5cdHZlYzIgdXYgPSB2ZWMyKFxuXHRcdHNxcnQoIHNhdHVyYXRlKCByb3VnaG5lc3MgKSApLFxuXHRcdHNhdHVyYXRlKCB0aGV0YSAvICggMC41ICogUEkgKSApICk7XG5cdHV2ID0gdXYgKiBMVVRfU0NBTEUgKyBMVVRfQklBUztcblx0cmV0dXJuIHV2O1xufVxuZmxvYXQgTFRDX0NsaXBwZWRTcGhlcmVGb3JtRmFjdG9yKCBjb25zdCBpbiB2ZWMzIGYgKSB7XG5cdGZsb2F0IGwgPSBsZW5ndGgoIGYgKTtcblx0cmV0dXJuIG1heCggKCBsICogbCArIGYueiApIC8gKCBsICsgMS4wICksIDAuMCApO1xufVxudmVjMyBMVENfRWRnZVZlY3RvckZvcm1GYWN0b3IoIGNvbnN0IGluIHZlYzMgdjEsIGNvbnN0IGluIHZlYzMgdjIgKSB7XG5cdGZsb2F0IHggPSBkb3QoIHYxLCB2MiApO1xuXHRmbG9hdCB5ID0gYWJzKCB4ICk7XG5cdGZsb2F0IGEgPSAwLjg2MjY3ICsgKDAuNDk3ODggKyAwLjAxNDM2ICogeSApICogeTtcblx0ZmxvYXQgYiA9IDMuNDUwNjggKyAoNC4xODgxNCArIHkpICogeTtcblx0ZmxvYXQgdiA9IGEgLyBiO1xuXHRmbG9hdCB0aGV0YV9zaW50aGV0YSA9ICh4ID4gMC4wKSA/IHYgOiAwLjUgKiBpbnZlcnNlc3FydCggMS4wIC0geCAqIHggKSAtIHY7XG5cdHJldHVybiBjcm9zcyggdjEsIHYyICkgKiB0aGV0YV9zaW50aGV0YTtcbn1cbnZlYzMgTFRDX0V2YWx1YXRlKCBjb25zdCBpbiB2ZWMzIE4sIGNvbnN0IGluIHZlYzMgViwgY29uc3QgaW4gdmVjMyBQLCBjb25zdCBpbiBtYXQzIG1JbnYsIGNvbnN0IGluIHZlYzMgcmVjdENvb3Jkc1sgNCBdICkge1xuXHR2ZWMzIHYxID0gcmVjdENvb3Jkc1sgMSBdIC0gcmVjdENvb3Jkc1sgMCBdO1xuXHR2ZWMzIHYyID0gcmVjdENvb3Jkc1sgMyBdIC0gcmVjdENvb3Jkc1sgMCBdO1xuXHR2ZWMzIGxpZ2h0Tm9ybWFsID0gY3Jvc3MoIHYxLCB2MiApO1xuXHRpZiggZG90KCBsaWdodE5vcm1hbCwgUCAtIHJlY3RDb29yZHNbIDAgXSApIDwgMC4wICkgcmV0dXJuIHZlYzMoIDAuMCApO1xuXHR2ZWMzIFQxLCBUMjtcblx0VDEgPSBub3JtYWxpemUoIFYgLSBOICogZG90KCBWLCBOICkgKTtcblx0VDIgPSAtIGNyb3NzKCBOLCBUMSApO1xuXHRtYXQzIG1hdCA9IG1JbnYgKiB0cmFuc3Bvc2VNYXQzKCBtYXQzKCBUMSwgVDIsIE4gKSApO1xuXHR2ZWMzIGNvb3Jkc1sgNCBdO1xuXHRjb29yZHNbIDAgXSA9IG1hdCAqICggcmVjdENvb3Jkc1sgMCBdIC0gUCApO1xuXHRjb29yZHNbIDEgXSA9IG1hdCAqICggcmVjdENvb3Jkc1sgMSBdIC0gUCApO1xuXHRjb29yZHNbIDIgXSA9IG1hdCAqICggcmVjdENvb3Jkc1sgMiBdIC0gUCApO1xuXHRjb29yZHNbIDMgXSA9IG1hdCAqICggcmVjdENvb3Jkc1sgMyBdIC0gUCApO1xuXHRjb29yZHNbIDAgXSA9IG5vcm1hbGl6ZSggY29vcmRzWyAwIF0gKTtcblx0Y29vcmRzWyAxIF0gPSBub3JtYWxpemUoIGNvb3Jkc1sgMSBdICk7XG5cdGNvb3Jkc1sgMiBdID0gbm9ybWFsaXplKCBjb29yZHNbIDIgXSApO1xuXHRjb29yZHNbIDMgXSA9IG5vcm1hbGl6ZSggY29vcmRzWyAzIF0gKTtcblx0dmVjMyB2ZWN0b3JGb3JtRmFjdG9yID0gdmVjMyggMC4wICk7XG5cdHZlY3RvckZvcm1GYWN0b3IgKz0gTFRDX0VkZ2VWZWN0b3JGb3JtRmFjdG9yKCBjb29yZHNbIDAgXSwgY29vcmRzWyAxIF0gKTtcblx0dmVjdG9yRm9ybUZhY3RvciArPSBMVENfRWRnZVZlY3RvckZvcm1GYWN0b3IoIGNvb3Jkc1sgMSBdLCBjb29yZHNbIDIgXSApO1xuXHR2ZWN0b3JGb3JtRmFjdG9yICs9IExUQ19FZGdlVmVjdG9yRm9ybUZhY3RvciggY29vcmRzWyAyIF0sIGNvb3Jkc1sgMyBdICk7XG5cdHZlY3RvckZvcm1GYWN0b3IgKz0gTFRDX0VkZ2VWZWN0b3JGb3JtRmFjdG9yKCBjb29yZHNbIDMgXSwgY29vcmRzWyAwIF0gKTtcblx0dmVjMyByZXN1bHQgPSB2ZWMzKCBMVENfQ2xpcHBlZFNwaGVyZUZvcm1GYWN0b3IoIHZlY3RvckZvcm1GYWN0b3IgKSApO1xuXHRyZXR1cm4gcmVzdWx0O1xufVxudmVjMyBCUkRGX1NwZWN1bGFyX0dHWF9FbnZpcm9ubWVudCggY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgY29uc3QgaW4gdmVjMyBzcGVjdWxhckNvbG9yLCBjb25zdCBpbiBmbG9hdCByb3VnaG5lc3MgKSB7XG5cdGZsb2F0IGRvdE5WID0gc2F0dXJhdGUoIGRvdCggZ2VvbWV0cnkubm9ybWFsLCBnZW9tZXRyeS52aWV3RGlyICkgKTtcblx0Y29uc3QgdmVjNCBjMCA9IHZlYzQoIC0gMSwgLSAwLjAyNzUsIC0gMC41NzIsIDAuMDIyICk7XG5cdGNvbnN0IHZlYzQgYzEgPSB2ZWM0KCAxLCAwLjA0MjUsIDEuMDQsIC0gMC4wNCApO1xuXHR2ZWM0IHIgPSByb3VnaG5lc3MgKiBjMCArIGMxO1xuXHRmbG9hdCBhMDA0ID0gbWluKCByLnggKiByLngsIGV4cDIoIC0gOS4yOCAqIGRvdE5WICkgKSAqIHIueCArIHIueTtcblx0dmVjMiBBQiA9IHZlYzIoIC0xLjA0LCAxLjA0ICkgKiBhMDA0ICsgci56dztcblx0cmV0dXJuIHNwZWN1bGFyQ29sb3IgKiBBQi54ICsgQUIueTtcbn1cbmZsb2F0IEdfQmxpbm5QaG9uZ19JbXBsaWNpdCggKSB7XG5cdHJldHVybiAwLjI1O1xufVxuZmxvYXQgRF9CbGlublBob25nKCBjb25zdCBpbiBmbG9hdCBzaGluaW5lc3MsIGNvbnN0IGluIGZsb2F0IGRvdE5IICkge1xuXHRyZXR1cm4gUkVDSVBST0NBTF9QSSAqICggc2hpbmluZXNzICogMC41ICsgMS4wICkgKiBwb3coIGRvdE5ILCBzaGluaW5lc3MgKTtcbn1cbnZlYzMgQlJERl9TcGVjdWxhcl9CbGlublBob25nKCBjb25zdCBpbiBJbmNpZGVudExpZ2h0IGluY2lkZW50TGlnaHQsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIGNvbnN0IGluIHZlYzMgc3BlY3VsYXJDb2xvciwgY29uc3QgaW4gZmxvYXQgc2hpbmluZXNzICkge1xuXHR2ZWMzIGhhbGZEaXIgPSBub3JtYWxpemUoIGluY2lkZW50TGlnaHQuZGlyZWN0aW9uICsgZ2VvbWV0cnkudmlld0RpciApO1xuXHRmbG9hdCBkb3ROSCA9IHNhdHVyYXRlKCBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgaGFsZkRpciApICk7XG5cdGZsb2F0IGRvdExIID0gc2F0dXJhdGUoIGRvdCggaW5jaWRlbnRMaWdodC5kaXJlY3Rpb24sIGhhbGZEaXIgKSApO1xuXHR2ZWMzIEYgPSBGX1NjaGxpY2soIHNwZWN1bGFyQ29sb3IsIGRvdExIICk7XG5cdGZsb2F0IEcgPSBHX0JsaW5uUGhvbmdfSW1wbGljaXQoICk7XG5cdGZsb2F0IEQgPSBEX0JsaW5uUGhvbmcoIHNoaW5pbmVzcywgZG90TkggKTtcblx0cmV0dXJuIEYgKiAoIEcgKiBEICk7XG59XG5mbG9hdCBHR1hSb3VnaG5lc3NUb0JsaW5uRXhwb25lbnQoIGNvbnN0IGluIGZsb2F0IGdneFJvdWdobmVzcyApIHtcblx0cmV0dXJuICggMi4wIC8gcG93MiggZ2d4Um91Z2huZXNzICsgMC4wMDAxICkgLSAyLjAgKTtcbn1cbmZsb2F0IEJsaW5uRXhwb25lbnRUb0dHWFJvdWdobmVzcyggY29uc3QgaW4gZmxvYXQgYmxpbm5FeHBvbmVudCApIHtcblx0cmV0dXJuIHNxcnQoIDIuMCAvICggYmxpbm5FeHBvbmVudCArIDIuMCApICk7XG59XG4iO3ZhciBidW1wbWFwX3BhcnNfZnJhZ21lbnQ9IiNpZmRlZiBVU0VfQlVNUE1BUFxuXHR1bmlmb3JtIHNhbXBsZXIyRCBidW1wTWFwO1xuXHR1bmlmb3JtIGZsb2F0IGJ1bXBTY2FsZTtcblx0dmVjMiBkSGR4eV9md2QoKSB7XG5cdFx0dmVjMiBkU1RkeCA9IGRGZHgoIHZVdiApO1xuXHRcdHZlYzIgZFNUZHkgPSBkRmR5KCB2VXYgKTtcblx0XHRmbG9hdCBIbGwgPSBidW1wU2NhbGUgKiB0ZXh0dXJlMkQoIGJ1bXBNYXAsIHZVdiApLng7XG5cdFx0ZmxvYXQgZEJ4ID0gYnVtcFNjYWxlICogdGV4dHVyZTJEKCBidW1wTWFwLCB2VXYgKyBkU1RkeCApLnggLSBIbGw7XG5cdFx0ZmxvYXQgZEJ5ID0gYnVtcFNjYWxlICogdGV4dHVyZTJEKCBidW1wTWFwLCB2VXYgKyBkU1RkeSApLnggLSBIbGw7XG5cdFx0cmV0dXJuIHZlYzIoIGRCeCwgZEJ5ICk7XG5cdH1cblx0dmVjMyBwZXJ0dXJiTm9ybWFsQXJiKCB2ZWMzIHN1cmZfcG9zLCB2ZWMzIHN1cmZfbm9ybSwgdmVjMiBkSGR4eSApIHtcblx0XHR2ZWMzIHZTaWdtYVggPSB2ZWMzKCBkRmR4KCBzdXJmX3Bvcy54ICksIGRGZHgoIHN1cmZfcG9zLnkgKSwgZEZkeCggc3VyZl9wb3MueiApICk7XG5cdFx0dmVjMyB2U2lnbWFZID0gdmVjMyggZEZkeSggc3VyZl9wb3MueCApLCBkRmR5KCBzdXJmX3Bvcy55ICksIGRGZHkoIHN1cmZfcG9zLnogKSApO1xuXHRcdHZlYzMgdk4gPSBzdXJmX25vcm07XG5cdFx0dmVjMyBSMSA9IGNyb3NzKCB2U2lnbWFZLCB2TiApO1xuXHRcdHZlYzMgUjIgPSBjcm9zcyggdk4sIHZTaWdtYVggKTtcblx0XHRmbG9hdCBmRGV0ID0gZG90KCB2U2lnbWFYLCBSMSApO1xuXHRcdHZlYzMgdkdyYWQgPSBzaWduKCBmRGV0ICkgKiAoIGRIZHh5LnggKiBSMSArIGRIZHh5LnkgKiBSMiApO1xuXHRcdHJldHVybiBub3JtYWxpemUoIGFicyggZkRldCApICogc3VyZl9ub3JtIC0gdkdyYWQgKTtcblx0fVxuI2VuZGlmXG4iO3ZhciBjbGlwcGluZ19wbGFuZXNfZnJhZ21lbnQ9IiNpZiBOVU1fQ0xJUFBJTkdfUExBTkVTID4gMFxuXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBVTklPTl9DTElQUElOR19QTEFORVM7ICsrIGkgKSB7XG5cdFx0dmVjNCBwbGFuZSA9IGNsaXBwaW5nUGxhbmVzWyBpIF07XG5cdFx0aWYgKCBkb3QoIHZWaWV3UG9zaXRpb24sIHBsYW5lLnh5eiApID4gcGxhbmUudyApIGRpc2NhcmQ7XG5cdH1cblx0XHRcblx0I2lmIFVOSU9OX0NMSVBQSU5HX1BMQU5FUyA8IE5VTV9DTElQUElOR19QTEFORVNcblx0XHRib29sIGNsaXBwZWQgPSB0cnVlO1xuXHRcdGZvciAoIGludCBpID0gVU5JT05fQ0xJUFBJTkdfUExBTkVTOyBpIDwgTlVNX0NMSVBQSU5HX1BMQU5FUzsgKysgaSApIHtcblx0XHRcdHZlYzQgcGxhbmUgPSBjbGlwcGluZ1BsYW5lc1sgaSBdO1xuXHRcdFx0Y2xpcHBlZCA9ICggZG90KCB2Vmlld1Bvc2l0aW9uLCBwbGFuZS54eXogKSA+IHBsYW5lLncgKSAmJiBjbGlwcGVkO1xuXHRcdH1cblx0XHRpZiAoIGNsaXBwZWQgKSBkaXNjYXJkO1xuXHRcblx0I2VuZGlmXG4jZW5kaWZcbiI7dmFyIGNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50PSIjaWYgTlVNX0NMSVBQSU5HX1BMQU5FUyA+IDBcblx0I2lmICEgZGVmaW5lZCggUEhZU0lDQUwgKSAmJiAhIGRlZmluZWQoIFBIT05HIClcblx0XHR2YXJ5aW5nIHZlYzMgdlZpZXdQb3NpdGlvbjtcblx0I2VuZGlmXG5cdHVuaWZvcm0gdmVjNCBjbGlwcGluZ1BsYW5lc1sgTlVNX0NMSVBQSU5HX1BMQU5FUyBdO1xuI2VuZGlmXG4iO3ZhciBjbGlwcGluZ19wbGFuZXNfcGFyc192ZXJ0ZXg9IiNpZiBOVU1fQ0xJUFBJTkdfUExBTkVTID4gMCAmJiAhIGRlZmluZWQoIFBIWVNJQ0FMICkgJiYgISBkZWZpbmVkKCBQSE9ORyApXG5cdHZhcnlpbmcgdmVjMyB2Vmlld1Bvc2l0aW9uO1xuI2VuZGlmXG4iO3ZhciBjbGlwcGluZ19wbGFuZXNfdmVydGV4PSIjaWYgTlVNX0NMSVBQSU5HX1BMQU5FUyA+IDAgJiYgISBkZWZpbmVkKCBQSFlTSUNBTCApICYmICEgZGVmaW5lZCggUEhPTkcgKVxuXHR2Vmlld1Bvc2l0aW9uID0gLSBtdlBvc2l0aW9uLnh5ejtcbiNlbmRpZlxuIjt2YXIgY29sb3JfZnJhZ21lbnQ9IiNpZmRlZiBVU0VfQ09MT1Jcblx0ZGlmZnVzZUNvbG9yLnJnYiAqPSB2Q29sb3I7XG4jZW5kaWYiO3ZhciBjb2xvcl9wYXJzX2ZyYWdtZW50PSIjaWZkZWYgVVNFX0NPTE9SXG5cdHZhcnlpbmcgdmVjMyB2Q29sb3I7XG4jZW5kaWZcbiI7dmFyIGNvbG9yX3BhcnNfdmVydGV4PSIjaWZkZWYgVVNFX0NPTE9SXG5cdHZhcnlpbmcgdmVjMyB2Q29sb3I7XG4jZW5kaWYiO3ZhciBjb2xvcl92ZXJ0ZXg9IiNpZmRlZiBVU0VfQ09MT1Jcblx0dkNvbG9yLnh5eiA9IGNvbG9yLnh5ejtcbiNlbmRpZiI7dmFyIGNvbW1vbj0iI2RlZmluZSBQSSAzLjE0MTU5MjY1MzU5XG4jZGVmaW5lIFBJMiA2LjI4MzE4NTMwNzE4XG4jZGVmaW5lIFBJX0hBTEYgMS41NzA3OTYzMjY3OTQ5XG4jZGVmaW5lIFJFQ0lQUk9DQUxfUEkgMC4zMTgzMDk4ODYxOFxuI2RlZmluZSBSRUNJUFJPQ0FMX1BJMiAwLjE1OTE1NDk0XG4jZGVmaW5lIExPRzIgMS40NDI2OTVcbiNkZWZpbmUgRVBTSUxPTiAxZS02XG4jZGVmaW5lIHNhdHVyYXRlKGEpIGNsYW1wKCBhLCAwLjAsIDEuMCApXG4jZGVmaW5lIHdoaXRlQ29tcGxpbWVudChhKSAoIDEuMCAtIHNhdHVyYXRlKCBhICkgKVxuZmxvYXQgcG93MiggY29uc3QgaW4gZmxvYXQgeCApIHsgcmV0dXJuIHgqeDsgfVxuZmxvYXQgcG93MyggY29uc3QgaW4gZmxvYXQgeCApIHsgcmV0dXJuIHgqeCp4OyB9XG5mbG9hdCBwb3c0KCBjb25zdCBpbiBmbG9hdCB4ICkgeyBmbG9hdCB4MiA9IHgqeDsgcmV0dXJuIHgyKngyOyB9XG5mbG9hdCBhdmVyYWdlKCBjb25zdCBpbiB2ZWMzIGNvbG9yICkgeyByZXR1cm4gZG90KCBjb2xvciwgdmVjMyggMC4zMzMzICkgKTsgfVxuaGlnaHAgZmxvYXQgcmFuZCggY29uc3QgaW4gdmVjMiB1diApIHtcblx0Y29uc3QgaGlnaHAgZmxvYXQgYSA9IDEyLjk4OTgsIGIgPSA3OC4yMzMsIGMgPSA0Mzc1OC41NDUzO1xuXHRoaWdocCBmbG9hdCBkdCA9IGRvdCggdXYueHksIHZlYzIoIGEsYiApICksIHNuID0gbW9kKCBkdCwgUEkgKTtcblx0cmV0dXJuIGZyYWN0KHNpbihzbikgKiBjKTtcbn1cbnN0cnVjdCBJbmNpZGVudExpZ2h0IHtcblx0dmVjMyBjb2xvcjtcblx0dmVjMyBkaXJlY3Rpb247XG5cdGJvb2wgdmlzaWJsZTtcbn07XG5zdHJ1Y3QgUmVmbGVjdGVkTGlnaHQge1xuXHR2ZWMzIGRpcmVjdERpZmZ1c2U7XG5cdHZlYzMgZGlyZWN0U3BlY3VsYXI7XG5cdHZlYzMgaW5kaXJlY3REaWZmdXNlO1xuXHR2ZWMzIGluZGlyZWN0U3BlY3VsYXI7XG59O1xuc3RydWN0IEdlb21ldHJpY0NvbnRleHQge1xuXHR2ZWMzIHBvc2l0aW9uO1xuXHR2ZWMzIG5vcm1hbDtcblx0dmVjMyB2aWV3RGlyO1xufTtcbnZlYzMgdHJhbnNmb3JtRGlyZWN0aW9uKCBpbiB2ZWMzIGRpciwgaW4gbWF0NCBtYXRyaXggKSB7XG5cdHJldHVybiBub3JtYWxpemUoICggbWF0cml4ICogdmVjNCggZGlyLCAwLjAgKSApLnh5eiApO1xufVxudmVjMyBpbnZlcnNlVHJhbnNmb3JtRGlyZWN0aW9uKCBpbiB2ZWMzIGRpciwgaW4gbWF0NCBtYXRyaXggKSB7XG5cdHJldHVybiBub3JtYWxpemUoICggdmVjNCggZGlyLCAwLjAgKSAqIG1hdHJpeCApLnh5eiApO1xufVxudmVjMyBwcm9qZWN0T25QbGFuZShpbiB2ZWMzIHBvaW50LCBpbiB2ZWMzIHBvaW50T25QbGFuZSwgaW4gdmVjMyBwbGFuZU5vcm1hbCApIHtcblx0ZmxvYXQgZGlzdGFuY2UgPSBkb3QoIHBsYW5lTm9ybWFsLCBwb2ludCAtIHBvaW50T25QbGFuZSApO1xuXHRyZXR1cm4gLSBkaXN0YW5jZSAqIHBsYW5lTm9ybWFsICsgcG9pbnQ7XG59XG5mbG9hdCBzaWRlT2ZQbGFuZSggaW4gdmVjMyBwb2ludCwgaW4gdmVjMyBwb2ludE9uUGxhbmUsIGluIHZlYzMgcGxhbmVOb3JtYWwgKSB7XG5cdHJldHVybiBzaWduKCBkb3QoIHBvaW50IC0gcG9pbnRPblBsYW5lLCBwbGFuZU5vcm1hbCApICk7XG59XG52ZWMzIGxpbmVQbGFuZUludGVyc2VjdCggaW4gdmVjMyBwb2ludE9uTGluZSwgaW4gdmVjMyBsaW5lRGlyZWN0aW9uLCBpbiB2ZWMzIHBvaW50T25QbGFuZSwgaW4gdmVjMyBwbGFuZU5vcm1hbCApIHtcblx0cmV0dXJuIGxpbmVEaXJlY3Rpb24gKiAoIGRvdCggcGxhbmVOb3JtYWwsIHBvaW50T25QbGFuZSAtIHBvaW50T25MaW5lICkgLyBkb3QoIHBsYW5lTm9ybWFsLCBsaW5lRGlyZWN0aW9uICkgKSArIHBvaW50T25MaW5lO1xufVxubWF0MyB0cmFuc3Bvc2VNYXQzKCBjb25zdCBpbiBtYXQzIG0gKSB7XG5cdG1hdDMgdG1wO1xuXHR0bXBbIDAgXSA9IHZlYzMoIG1bIDAgXS54LCBtWyAxIF0ueCwgbVsgMiBdLnggKTtcblx0dG1wWyAxIF0gPSB2ZWMzKCBtWyAwIF0ueSwgbVsgMSBdLnksIG1bIDIgXS55ICk7XG5cdHRtcFsgMiBdID0gdmVjMyggbVsgMCBdLnosIG1bIDEgXS56LCBtWyAyIF0ueiApO1xuXHRyZXR1cm4gdG1wO1xufVxuZmxvYXQgbGluZWFyVG9SZWxhdGl2ZUx1bWluYW5jZSggY29uc3QgaW4gdmVjMyBjb2xvciApIHtcblx0dmVjMyB3ZWlnaHRzID0gdmVjMyggMC4yMTI2LCAwLjcxNTIsIDAuMDcyMiApO1xuXHRyZXR1cm4gZG90KCB3ZWlnaHRzLCBjb2xvci5yZ2IgKTtcbn1cbiI7dmFyIGN1YmVfdXZfcmVmbGVjdGlvbl9mcmFnbWVudD0iI2lmZGVmIEVOVk1BUF9UWVBFX0NVQkVfVVZcbiNkZWZpbmUgY3ViZVVWX3RleHR1cmVTaXplICgxMDI0LjApXG5pbnQgZ2V0RmFjZUZyb21EaXJlY3Rpb24odmVjMyBkaXJlY3Rpb24pIHtcblx0dmVjMyBhYnNEaXJlY3Rpb24gPSBhYnMoZGlyZWN0aW9uKTtcblx0aW50IGZhY2UgPSAtMTtcblx0aWYoIGFic0RpcmVjdGlvbi54ID4gYWJzRGlyZWN0aW9uLnogKSB7XG5cdFx0aWYoYWJzRGlyZWN0aW9uLnggPiBhYnNEaXJlY3Rpb24ueSApXG5cdFx0XHRmYWNlID0gZGlyZWN0aW9uLnggPiAwLjAgPyAwIDogMztcblx0XHRlbHNlXG5cdFx0XHRmYWNlID0gZGlyZWN0aW9uLnkgPiAwLjAgPyAxIDogNDtcblx0fVxuXHRlbHNlIHtcblx0XHRpZihhYnNEaXJlY3Rpb24ueiA+IGFic0RpcmVjdGlvbi55IClcblx0XHRcdGZhY2UgPSBkaXJlY3Rpb24ueiA+IDAuMCA/IDIgOiA1O1xuXHRcdGVsc2Vcblx0XHRcdGZhY2UgPSBkaXJlY3Rpb24ueSA+IDAuMCA/IDEgOiA0O1xuXHR9XG5cdHJldHVybiBmYWNlO1xufVxuI2RlZmluZSBjdWJlVVZfbWF4TG9kczEgIChsb2cyKGN1YmVVVl90ZXh0dXJlU2l6ZSowLjI1KSAtIDEuMClcbiNkZWZpbmUgY3ViZVVWX3JhbmdlQ2xhbXAgKGV4cDIoKDYuMCAtIDEuMCkgKiAyLjApKVxudmVjMiBNaXBMZXZlbEluZm8oIHZlYzMgdmVjLCBmbG9hdCByb3VnaG5lc3NMZXZlbCwgZmxvYXQgcm91Z2huZXNzICkge1xuXHRmbG9hdCBzY2FsZSA9IGV4cDIoY3ViZVVWX21heExvZHMxIC0gcm91Z2huZXNzTGV2ZWwpO1xuXHRmbG9hdCBkeFJvdWdobmVzcyA9IGRGZHgocm91Z2huZXNzKTtcblx0ZmxvYXQgZHlSb3VnaG5lc3MgPSBkRmR5KHJvdWdobmVzcyk7XG5cdHZlYzMgZHggPSBkRmR4KCB2ZWMgKiBzY2FsZSAqIGR4Um91Z2huZXNzICk7XG5cdHZlYzMgZHkgPSBkRmR5KCB2ZWMgKiBzY2FsZSAqIGR5Um91Z2huZXNzICk7XG5cdGZsb2F0IGQgPSBtYXgoIGRvdCggZHgsIGR4ICksIGRvdCggZHksIGR5ICkgKTtcblx0ZCA9IGNsYW1wKGQsIDEuMCwgY3ViZVVWX3JhbmdlQ2xhbXApO1xuXHRmbG9hdCBtaXBMZXZlbCA9IDAuNSAqIGxvZzIoZCk7XG5cdHJldHVybiB2ZWMyKGZsb29yKG1pcExldmVsKSwgZnJhY3QobWlwTGV2ZWwpKTtcbn1cbiNkZWZpbmUgY3ViZVVWX21heExvZHMyIChsb2cyKGN1YmVVVl90ZXh0dXJlU2l6ZSowLjI1KSAtIDIuMClcbiNkZWZpbmUgY3ViZVVWX3JjcFRleHR1cmVTaXplICgxLjAgLyBjdWJlVVZfdGV4dHVyZVNpemUpXG52ZWMyIGdldEN1YmVVVih2ZWMzIGRpcmVjdGlvbiwgZmxvYXQgcm91Z2huZXNzTGV2ZWwsIGZsb2F0IG1pcExldmVsKSB7XG5cdG1pcExldmVsID0gcm91Z2huZXNzTGV2ZWwgPiBjdWJlVVZfbWF4TG9kczIgLSAzLjAgPyAwLjAgOiBtaXBMZXZlbDtcblx0ZmxvYXQgYSA9IDE2LjAgKiBjdWJlVVZfcmNwVGV4dHVyZVNpemU7XG5cdHZlYzIgZXhwMl9wYWNrZWQgPSBleHAyKCB2ZWMyKCByb3VnaG5lc3NMZXZlbCwgbWlwTGV2ZWwgKSApO1xuXHR2ZWMyIHJjcF9leHAyX3BhY2tlZCA9IHZlYzIoIDEuMCApIC8gZXhwMl9wYWNrZWQ7XG5cdGZsb2F0IHBvd1NjYWxlID0gZXhwMl9wYWNrZWQueCAqIGV4cDJfcGFja2VkLnk7XG5cdGZsb2F0IHNjYWxlID0gcmNwX2V4cDJfcGFja2VkLnggKiByY3BfZXhwMl9wYWNrZWQueSAqIDAuMjU7XG5cdGZsb2F0IG1pcE9mZnNldCA9IDAuNzUqKDEuMCAtIHJjcF9leHAyX3BhY2tlZC55KSAqIHJjcF9leHAyX3BhY2tlZC54O1xuXHRib29sIGJSZXMgPSBtaXBMZXZlbCA9PSAwLjA7XG5cdHNjYWxlID0gIGJSZXMgJiYgKHNjYWxlIDwgYSkgPyBhIDogc2NhbGU7XG5cdHZlYzMgcjtcblx0dmVjMiBvZmZzZXQ7XG5cdGludCBmYWNlID0gZ2V0RmFjZUZyb21EaXJlY3Rpb24oZGlyZWN0aW9uKTtcblx0ZmxvYXQgcmNwUG93U2NhbGUgPSAxLjAgLyBwb3dTY2FsZTtcblx0aWYoIGZhY2UgPT0gMCkge1xuXHRcdHIgPSB2ZWMzKGRpcmVjdGlvbi54LCAtZGlyZWN0aW9uLnosIGRpcmVjdGlvbi55KTtcblx0XHRvZmZzZXQgPSB2ZWMyKDAuMCttaXBPZmZzZXQsMC43NSAqIHJjcFBvd1NjYWxlKTtcblx0XHRvZmZzZXQueSA9IGJSZXMgJiYgKG9mZnNldC55IDwgMi4wKmEpID8gYSA6IG9mZnNldC55O1xuXHR9XG5cdGVsc2UgaWYoIGZhY2UgPT0gMSkge1xuXHRcdHIgPSB2ZWMzKGRpcmVjdGlvbi55LCBkaXJlY3Rpb24ueCwgZGlyZWN0aW9uLnopO1xuXHRcdG9mZnNldCA9IHZlYzIoc2NhbGUrbWlwT2Zmc2V0LCAwLjc1ICogcmNwUG93U2NhbGUpO1xuXHRcdG9mZnNldC55ID0gYlJlcyAmJiAob2Zmc2V0LnkgPCAyLjAqYSkgPyBhIDogb2Zmc2V0Lnk7XG5cdH1cblx0ZWxzZSBpZiggZmFjZSA9PSAyKSB7XG5cdFx0ciA9IHZlYzMoZGlyZWN0aW9uLnosIGRpcmVjdGlvbi54LCBkaXJlY3Rpb24ueSk7XG5cdFx0b2Zmc2V0ID0gdmVjMigyLjAqc2NhbGUrbWlwT2Zmc2V0LCAwLjc1ICogcmNwUG93U2NhbGUpO1xuXHRcdG9mZnNldC55ID0gYlJlcyAmJiAob2Zmc2V0LnkgPCAyLjAqYSkgPyBhIDogb2Zmc2V0Lnk7XG5cdH1cblx0ZWxzZSBpZiggZmFjZSA9PSAzKSB7XG5cdFx0ciA9IHZlYzMoZGlyZWN0aW9uLngsIGRpcmVjdGlvbi56LCBkaXJlY3Rpb24ueSk7XG5cdFx0b2Zmc2V0ID0gdmVjMigwLjArbWlwT2Zmc2V0LDAuNSAqIHJjcFBvd1NjYWxlKTtcblx0XHRvZmZzZXQueSA9IGJSZXMgJiYgKG9mZnNldC55IDwgMi4wKmEpID8gMC4wIDogb2Zmc2V0Lnk7XG5cdH1cblx0ZWxzZSBpZiggZmFjZSA9PSA0KSB7XG5cdFx0ciA9IHZlYzMoZGlyZWN0aW9uLnksIGRpcmVjdGlvbi54LCAtZGlyZWN0aW9uLnopO1xuXHRcdG9mZnNldCA9IHZlYzIoc2NhbGUrbWlwT2Zmc2V0LCAwLjUgKiByY3BQb3dTY2FsZSk7XG5cdFx0b2Zmc2V0LnkgPSBiUmVzICYmIChvZmZzZXQueSA8IDIuMCphKSA/IDAuMCA6IG9mZnNldC55O1xuXHR9XG5cdGVsc2Uge1xuXHRcdHIgPSB2ZWMzKGRpcmVjdGlvbi56LCAtZGlyZWN0aW9uLngsIGRpcmVjdGlvbi55KTtcblx0XHRvZmZzZXQgPSB2ZWMyKDIuMCpzY2FsZSttaXBPZmZzZXQsIDAuNSAqIHJjcFBvd1NjYWxlKTtcblx0XHRvZmZzZXQueSA9IGJSZXMgJiYgKG9mZnNldC55IDwgMi4wKmEpID8gMC4wIDogb2Zmc2V0Lnk7XG5cdH1cblx0ciA9IG5vcm1hbGl6ZShyKTtcblx0ZmxvYXQgdGV4ZWxPZmZzZXQgPSAwLjUgKiBjdWJlVVZfcmNwVGV4dHVyZVNpemU7XG5cdHZlYzIgcyA9ICggci55eiAvIGFicyggci54ICkgKyB2ZWMyKCAxLjAgKSApICogMC41O1xuXHR2ZWMyIGJhc2UgPSBvZmZzZXQgKyB2ZWMyKCB0ZXhlbE9mZnNldCApO1xuXHRyZXR1cm4gYmFzZSArIHMgKiAoIHNjYWxlIC0gMi4wICogdGV4ZWxPZmZzZXQgKTtcbn1cbiNkZWZpbmUgY3ViZVVWX21heExvZHMzIChsb2cyKGN1YmVVVl90ZXh0dXJlU2l6ZSowLjI1KSAtIDMuMClcbnZlYzQgdGV4dHVyZUN1YmVVVih2ZWMzIHJlZmxlY3RlZERpcmVjdGlvbiwgZmxvYXQgcm91Z2huZXNzICkge1xuXHRmbG9hdCByb3VnaG5lc3NWYWwgPSByb3VnaG5lc3MqIGN1YmVVVl9tYXhMb2RzMztcblx0ZmxvYXQgcjEgPSBmbG9vcihyb3VnaG5lc3NWYWwpO1xuXHRmbG9hdCByMiA9IHIxICsgMS4wO1xuXHRmbG9hdCB0ID0gZnJhY3Qocm91Z2huZXNzVmFsKTtcblx0dmVjMiBtaXBJbmZvID0gTWlwTGV2ZWxJbmZvKHJlZmxlY3RlZERpcmVjdGlvbiwgcjEsIHJvdWdobmVzcyk7XG5cdGZsb2F0IHMgPSBtaXBJbmZvLnk7XG5cdGZsb2F0IGxldmVsMCA9IG1pcEluZm8ueDtcblx0ZmxvYXQgbGV2ZWwxID0gbGV2ZWwwICsgMS4wO1xuXHRsZXZlbDEgPSBsZXZlbDEgPiA1LjAgPyA1LjAgOiBsZXZlbDE7XG5cdGxldmVsMCArPSBtaW4oIGZsb29yKCBzICsgMC41ICksIDUuMCApO1xuXHR2ZWMyIHV2XzEwID0gZ2V0Q3ViZVVWKHJlZmxlY3RlZERpcmVjdGlvbiwgcjEsIGxldmVsMCk7XG5cdHZlYzQgY29sb3IxMCA9IGVudk1hcFRleGVsVG9MaW5lYXIodGV4dHVyZTJEKGVudk1hcCwgdXZfMTApKTtcblx0dmVjMiB1dl8yMCA9IGdldEN1YmVVVihyZWZsZWN0ZWREaXJlY3Rpb24sIHIyLCBsZXZlbDApO1xuXHR2ZWM0IGNvbG9yMjAgPSBlbnZNYXBUZXhlbFRvTGluZWFyKHRleHR1cmUyRChlbnZNYXAsIHV2XzIwKSk7XG5cdHZlYzQgcmVzdWx0ID0gbWl4KGNvbG9yMTAsIGNvbG9yMjAsIHQpO1xuXHRyZXR1cm4gdmVjNChyZXN1bHQucmdiLCAxLjApO1xufVxuI2VuZGlmXG4iO3ZhciBkZWZhdWx0bm9ybWFsX3ZlcnRleD0idmVjMyB0cmFuc2Zvcm1lZE5vcm1hbCA9IG5vcm1hbE1hdHJpeCAqIG9iamVjdE5vcm1hbDtcbiNpZmRlZiBGTElQX1NJREVEXG5cdHRyYW5zZm9ybWVkTm9ybWFsID0gLSB0cmFuc2Zvcm1lZE5vcm1hbDtcbiNlbmRpZlxuIjt2YXIgZGlzcGxhY2VtZW50bWFwX3BhcnNfdmVydGV4PSIjaWZkZWYgVVNFX0RJU1BMQUNFTUVOVE1BUFxuXHR1bmlmb3JtIHNhbXBsZXIyRCBkaXNwbGFjZW1lbnRNYXA7XG5cdHVuaWZvcm0gZmxvYXQgZGlzcGxhY2VtZW50U2NhbGU7XG5cdHVuaWZvcm0gZmxvYXQgZGlzcGxhY2VtZW50QmlhcztcbiNlbmRpZlxuIjt2YXIgZGlzcGxhY2VtZW50bWFwX3ZlcnRleD0iI2lmZGVmIFVTRV9ESVNQTEFDRU1FTlRNQVBcblx0dHJhbnNmb3JtZWQgKz0gbm9ybWFsaXplKCBvYmplY3ROb3JtYWwgKSAqICggdGV4dHVyZTJEKCBkaXNwbGFjZW1lbnRNYXAsIHV2ICkueCAqIGRpc3BsYWNlbWVudFNjYWxlICsgZGlzcGxhY2VtZW50QmlhcyApO1xuI2VuZGlmXG4iO3ZhciBlbWlzc2l2ZW1hcF9mcmFnbWVudD0iI2lmZGVmIFVTRV9FTUlTU0lWRU1BUFxuXHR2ZWM0IGVtaXNzaXZlQ29sb3IgPSB0ZXh0dXJlMkQoIGVtaXNzaXZlTWFwLCB2VXYgKTtcblx0ZW1pc3NpdmVDb2xvci5yZ2IgPSBlbWlzc2l2ZU1hcFRleGVsVG9MaW5lYXIoIGVtaXNzaXZlQ29sb3IgKS5yZ2I7XG5cdHRvdGFsRW1pc3NpdmVSYWRpYW5jZSAqPSBlbWlzc2l2ZUNvbG9yLnJnYjtcbiNlbmRpZlxuIjt2YXIgZW1pc3NpdmVtYXBfcGFyc19mcmFnbWVudD0iI2lmZGVmIFVTRV9FTUlTU0lWRU1BUFxuXHR1bmlmb3JtIHNhbXBsZXIyRCBlbWlzc2l2ZU1hcDtcbiNlbmRpZlxuIjt2YXIgZW5jb2RpbmdzX2ZyYWdtZW50PSIgIGdsX0ZyYWdDb2xvciA9IGxpbmVhclRvT3V0cHV0VGV4ZWwoIGdsX0ZyYWdDb2xvciApO1xuIjt2YXIgZW5jb2RpbmdzX3BhcnNfZnJhZ21lbnQ9IlxudmVjNCBMaW5lYXJUb0xpbmVhciggaW4gdmVjNCB2YWx1ZSApIHtcblx0cmV0dXJuIHZhbHVlO1xufVxudmVjNCBHYW1tYVRvTGluZWFyKCBpbiB2ZWM0IHZhbHVlLCBpbiBmbG9hdCBnYW1tYUZhY3RvciApIHtcblx0cmV0dXJuIHZlYzQoIHBvdyggdmFsdWUueHl6LCB2ZWMzKCBnYW1tYUZhY3RvciApICksIHZhbHVlLncgKTtcbn1cbnZlYzQgTGluZWFyVG9HYW1tYSggaW4gdmVjNCB2YWx1ZSwgaW4gZmxvYXQgZ2FtbWFGYWN0b3IgKSB7XG5cdHJldHVybiB2ZWM0KCBwb3coIHZhbHVlLnh5eiwgdmVjMyggMS4wIC8gZ2FtbWFGYWN0b3IgKSApLCB2YWx1ZS53ICk7XG59XG52ZWM0IHNSR0JUb0xpbmVhciggaW4gdmVjNCB2YWx1ZSApIHtcblx0cmV0dXJuIHZlYzQoIG1peCggcG93KCB2YWx1ZS5yZ2IgKiAwLjk0Nzg2NzI5ODYgKyB2ZWMzKCAwLjA1MjEzMjcwMTQgKSwgdmVjMyggMi40ICkgKSwgdmFsdWUucmdiICogMC4wNzczOTkzODA4LCB2ZWMzKCBsZXNzVGhhbkVxdWFsKCB2YWx1ZS5yZ2IsIHZlYzMoIDAuMDQwNDUgKSApICkgKSwgdmFsdWUudyApO1xufVxudmVjNCBMaW5lYXJUb3NSR0IoIGluIHZlYzQgdmFsdWUgKSB7XG5cdHJldHVybiB2ZWM0KCBtaXgoIHBvdyggdmFsdWUucmdiLCB2ZWMzKCAwLjQxNjY2ICkgKSAqIDEuMDU1IC0gdmVjMyggMC4wNTUgKSwgdmFsdWUucmdiICogMTIuOTIsIHZlYzMoIGxlc3NUaGFuRXF1YWwoIHZhbHVlLnJnYiwgdmVjMyggMC4wMDMxMzA4ICkgKSApICksIHZhbHVlLncgKTtcbn1cbnZlYzQgUkdCRVRvTGluZWFyKCBpbiB2ZWM0IHZhbHVlICkge1xuXHRyZXR1cm4gdmVjNCggdmFsdWUucmdiICogZXhwMiggdmFsdWUuYSAqIDI1NS4wIC0gMTI4LjAgKSwgMS4wICk7XG59XG52ZWM0IExpbmVhclRvUkdCRSggaW4gdmVjNCB2YWx1ZSApIHtcblx0ZmxvYXQgbWF4Q29tcG9uZW50ID0gbWF4KCBtYXgoIHZhbHVlLnIsIHZhbHVlLmcgKSwgdmFsdWUuYiApO1xuXHRmbG9hdCBmRXhwID0gY2xhbXAoIGNlaWwoIGxvZzIoIG1heENvbXBvbmVudCApICksIC0xMjguMCwgMTI3LjAgKTtcblx0cmV0dXJuIHZlYzQoIHZhbHVlLnJnYiAvIGV4cDIoIGZFeHAgKSwgKCBmRXhwICsgMTI4LjAgKSAvIDI1NS4wICk7XG59XG52ZWM0IFJHQk1Ub0xpbmVhciggaW4gdmVjNCB2YWx1ZSwgaW4gZmxvYXQgbWF4UmFuZ2UgKSB7XG5cdHJldHVybiB2ZWM0KCB2YWx1ZS54eXogKiB2YWx1ZS53ICogbWF4UmFuZ2UsIDEuMCApO1xufVxudmVjNCBMaW5lYXJUb1JHQk0oIGluIHZlYzQgdmFsdWUsIGluIGZsb2F0IG1heFJhbmdlICkge1xuXHRmbG9hdCBtYXhSR0IgPSBtYXgoIHZhbHVlLngsIG1heCggdmFsdWUuZywgdmFsdWUuYiApICk7XG5cdGZsb2F0IE0gICAgICA9IGNsYW1wKCBtYXhSR0IgLyBtYXhSYW5nZSwgMC4wLCAxLjAgKTtcblx0TSAgICAgICAgICAgID0gY2VpbCggTSAqIDI1NS4wICkgLyAyNTUuMDtcblx0cmV0dXJuIHZlYzQoIHZhbHVlLnJnYiAvICggTSAqIG1heFJhbmdlICksIE0gKTtcbn1cbnZlYzQgUkdCRFRvTGluZWFyKCBpbiB2ZWM0IHZhbHVlLCBpbiBmbG9hdCBtYXhSYW5nZSApIHtcblx0cmV0dXJuIHZlYzQoIHZhbHVlLnJnYiAqICggKCBtYXhSYW5nZSAvIDI1NS4wICkgLyB2YWx1ZS5hICksIDEuMCApO1xufVxudmVjNCBMaW5lYXJUb1JHQkQoIGluIHZlYzQgdmFsdWUsIGluIGZsb2F0IG1heFJhbmdlICkge1xuXHRmbG9hdCBtYXhSR0IgPSBtYXgoIHZhbHVlLngsIG1heCggdmFsdWUuZywgdmFsdWUuYiApICk7XG5cdGZsb2F0IEQgICAgICA9IG1heCggbWF4UmFuZ2UgLyBtYXhSR0IsIDEuMCApO1xuXHREICAgICAgICAgICAgPSBtaW4oIGZsb29yKCBEICkgLyAyNTUuMCwgMS4wICk7XG5cdHJldHVybiB2ZWM0KCB2YWx1ZS5yZ2IgKiAoIEQgKiAoIDI1NS4wIC8gbWF4UmFuZ2UgKSApLCBEICk7XG59XG5jb25zdCBtYXQzIGNMb2dMdXZNID0gbWF0MyggMC4yMjA5LCAwLjMzOTAsIDAuNDE4NCwgMC4xMTM4LCAwLjY3ODAsIDAuNzMxOSwgMC4wMTAyLCAwLjExMzAsIDAuMjk2OSApO1xudmVjNCBMaW5lYXJUb0xvZ0x1diggaW4gdmVjNCB2YWx1ZSApICB7XG5cdHZlYzMgWHBfWV9YWVpwID0gdmFsdWUucmdiICogY0xvZ0x1dk07XG5cdFhwX1lfWFlacCA9IG1heChYcF9ZX1hZWnAsIHZlYzMoMWUtNiwgMWUtNiwgMWUtNikpO1xuXHR2ZWM0IHZSZXN1bHQ7XG5cdHZSZXN1bHQueHkgPSBYcF9ZX1hZWnAueHkgLyBYcF9ZX1hZWnAuejtcblx0ZmxvYXQgTGUgPSAyLjAgKiBsb2cyKFhwX1lfWFlacC55KSArIDEyNy4wO1xuXHR2UmVzdWx0LncgPSBmcmFjdChMZSk7XG5cdHZSZXN1bHQueiA9IChMZSAtIChmbG9vcih2UmVzdWx0LncqMjU1LjApKS8yNTUuMCkvMjU1LjA7XG5cdHJldHVybiB2UmVzdWx0O1xufVxuY29uc3QgbWF0MyBjTG9nTHV2SW52ZXJzZU0gPSBtYXQzKCA2LjAwMTQsIC0yLjcwMDgsIC0xLjc5OTYsIC0xLjMzMjAsIDMuMTAyOSwgLTUuNzcyMSwgMC4zMDA4LCAtMS4wODgyLCA1LjYyNjggKTtcbnZlYzQgTG9nTHV2VG9MaW5lYXIoIGluIHZlYzQgdmFsdWUgKSB7XG5cdGZsb2F0IExlID0gdmFsdWUueiAqIDI1NS4wICsgdmFsdWUudztcblx0dmVjMyBYcF9ZX1hZWnA7XG5cdFhwX1lfWFlacC55ID0gZXhwMigoTGUgLSAxMjcuMCkgLyAyLjApO1xuXHRYcF9ZX1hZWnAueiA9IFhwX1lfWFlacC55IC8gdmFsdWUueTtcblx0WHBfWV9YWVpwLnggPSB2YWx1ZS54ICogWHBfWV9YWVpwLno7XG5cdHZlYzMgdlJHQiA9IFhwX1lfWFlacC5yZ2IgKiBjTG9nTHV2SW52ZXJzZU07XG5cdHJldHVybiB2ZWM0KCBtYXgodlJHQiwgMC4wKSwgMS4wICk7XG59XG4iO3ZhciBlbnZtYXBfZnJhZ21lbnQ9IiNpZmRlZiBVU0VfRU5WTUFQXG5cdCNpZiBkZWZpbmVkKCBVU0VfQlVNUE1BUCApIHx8IGRlZmluZWQoIFVTRV9OT1JNQUxNQVAgKSB8fCBkZWZpbmVkKCBQSE9ORyApXG5cdFx0dmVjMyBjYW1lcmFUb1ZlcnRleCA9IG5vcm1hbGl6ZSggdldvcmxkUG9zaXRpb24gLSBjYW1lcmFQb3NpdGlvbiApO1xuXHRcdHZlYzMgd29ybGROb3JtYWwgPSBpbnZlcnNlVHJhbnNmb3JtRGlyZWN0aW9uKCBub3JtYWwsIHZpZXdNYXRyaXggKTtcblx0XHQjaWZkZWYgRU5WTUFQX01PREVfUkVGTEVDVElPTlxuXHRcdFx0dmVjMyByZWZsZWN0VmVjID0gcmVmbGVjdCggY2FtZXJhVG9WZXJ0ZXgsIHdvcmxkTm9ybWFsICk7XG5cdFx0I2Vsc2Vcblx0XHRcdHZlYzMgcmVmbGVjdFZlYyA9IHJlZnJhY3QoIGNhbWVyYVRvVmVydGV4LCB3b3JsZE5vcm1hbCwgcmVmcmFjdGlvblJhdGlvICk7XG5cdFx0I2VuZGlmXG5cdCNlbHNlXG5cdFx0dmVjMyByZWZsZWN0VmVjID0gdlJlZmxlY3Q7XG5cdCNlbmRpZlxuXHQjaWZkZWYgRU5WTUFQX1RZUEVfQ1VCRVxuXHRcdHZlYzQgZW52Q29sb3IgPSB0ZXh0dXJlQ3ViZSggZW52TWFwLCB2ZWMzKCBmbGlwRW52TWFwICogcmVmbGVjdFZlYy54LCByZWZsZWN0VmVjLnl6ICkgKTtcblx0I2VsaWYgZGVmaW5lZCggRU5WTUFQX1RZUEVfRVFVSVJFQyApXG5cdFx0dmVjMiBzYW1wbGVVVjtcblx0XHRyZWZsZWN0VmVjID0gbm9ybWFsaXplKCByZWZsZWN0VmVjICk7XG5cdFx0c2FtcGxlVVYueSA9IGFzaW4oIGNsYW1wKCByZWZsZWN0VmVjLnksIC0gMS4wLCAxLjAgKSApICogUkVDSVBST0NBTF9QSSArIDAuNTtcblx0XHRzYW1wbGVVVi54ID0gYXRhbiggcmVmbGVjdFZlYy56LCByZWZsZWN0VmVjLnggKSAqIFJFQ0lQUk9DQUxfUEkyICsgMC41O1xuXHRcdHZlYzQgZW52Q29sb3IgPSB0ZXh0dXJlMkQoIGVudk1hcCwgc2FtcGxlVVYgKTtcblx0I2VsaWYgZGVmaW5lZCggRU5WTUFQX1RZUEVfU1BIRVJFIClcblx0XHRyZWZsZWN0VmVjID0gbm9ybWFsaXplKCByZWZsZWN0VmVjICk7XG5cdFx0dmVjMyByZWZsZWN0VmlldyA9IG5vcm1hbGl6ZSggKCB2aWV3TWF0cml4ICogdmVjNCggcmVmbGVjdFZlYywgMC4wICkgKS54eXogKyB2ZWMzKCAwLjAsIDAuMCwgMS4wICkgKTtcblx0XHR2ZWM0IGVudkNvbG9yID0gdGV4dHVyZTJEKCBlbnZNYXAsIHJlZmxlY3RWaWV3Lnh5ICogMC41ICsgMC41ICk7XG5cdCNlbHNlXG5cdFx0dmVjNCBlbnZDb2xvciA9IHZlYzQoIDAuMCApO1xuXHQjZW5kaWZcblx0ZW52Q29sb3IgPSBlbnZNYXBUZXhlbFRvTGluZWFyKCBlbnZDb2xvciApO1xuXHQjaWZkZWYgRU5WTUFQX0JMRU5ESU5HX01VTFRJUExZXG5cdFx0b3V0Z29pbmdMaWdodCA9IG1peCggb3V0Z29pbmdMaWdodCwgb3V0Z29pbmdMaWdodCAqIGVudkNvbG9yLnh5eiwgc3BlY3VsYXJTdHJlbmd0aCAqIHJlZmxlY3Rpdml0eSApO1xuXHQjZWxpZiBkZWZpbmVkKCBFTlZNQVBfQkxFTkRJTkdfTUlYIClcblx0XHRvdXRnb2luZ0xpZ2h0ID0gbWl4KCBvdXRnb2luZ0xpZ2h0LCBlbnZDb2xvci54eXosIHNwZWN1bGFyU3RyZW5ndGggKiByZWZsZWN0aXZpdHkgKTtcblx0I2VsaWYgZGVmaW5lZCggRU5WTUFQX0JMRU5ESU5HX0FERCApXG5cdFx0b3V0Z29pbmdMaWdodCArPSBlbnZDb2xvci54eXogKiBzcGVjdWxhclN0cmVuZ3RoICogcmVmbGVjdGl2aXR5O1xuXHQjZW5kaWZcbiNlbmRpZlxuIjt2YXIgZW52bWFwX3BhcnNfZnJhZ21lbnQ9IiNpZiBkZWZpbmVkKCBVU0VfRU5WTUFQICkgfHwgZGVmaW5lZCggUEhZU0lDQUwgKVxuXHR1bmlmb3JtIGZsb2F0IHJlZmxlY3Rpdml0eTtcblx0dW5pZm9ybSBmbG9hdCBlbnZNYXBJbnRlbnNpdHk7XG4jZW5kaWZcbiNpZmRlZiBVU0VfRU5WTUFQXG5cdCNpZiAhIGRlZmluZWQoIFBIWVNJQ0FMICkgJiYgKCBkZWZpbmVkKCBVU0VfQlVNUE1BUCApIHx8IGRlZmluZWQoIFVTRV9OT1JNQUxNQVAgKSB8fCBkZWZpbmVkKCBQSE9ORyApIClcblx0XHR2YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb247XG5cdCNlbmRpZlxuXHQjaWZkZWYgRU5WTUFQX1RZUEVfQ1VCRVxuXHRcdHVuaWZvcm0gc2FtcGxlckN1YmUgZW52TWFwO1xuXHQjZWxzZVxuXHRcdHVuaWZvcm0gc2FtcGxlcjJEIGVudk1hcDtcblx0I2VuZGlmXG5cdHVuaWZvcm0gZmxvYXQgZmxpcEVudk1hcDtcblx0I2lmIGRlZmluZWQoIFVTRV9CVU1QTUFQICkgfHwgZGVmaW5lZCggVVNFX05PUk1BTE1BUCApIHx8IGRlZmluZWQoIFBIT05HICkgfHwgZGVmaW5lZCggUEhZU0lDQUwgKVxuXHRcdHVuaWZvcm0gZmxvYXQgcmVmcmFjdGlvblJhdGlvO1xuXHQjZWxzZVxuXHRcdHZhcnlpbmcgdmVjMyB2UmVmbGVjdDtcblx0I2VuZGlmXG4jZW5kaWZcbiI7dmFyIGVudm1hcF9wYXJzX3ZlcnRleD0iI2lmZGVmIFVTRV9FTlZNQVBcblx0I2lmIGRlZmluZWQoIFVTRV9CVU1QTUFQICkgfHwgZGVmaW5lZCggVVNFX05PUk1BTE1BUCApIHx8IGRlZmluZWQoIFBIT05HIClcblx0XHR2YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb247XG5cdCNlbHNlXG5cdFx0dmFyeWluZyB2ZWMzIHZSZWZsZWN0O1xuXHRcdHVuaWZvcm0gZmxvYXQgcmVmcmFjdGlvblJhdGlvO1xuXHQjZW5kaWZcbiNlbmRpZlxuIjt2YXIgZW52bWFwX3ZlcnRleD0iI2lmZGVmIFVTRV9FTlZNQVBcblx0I2lmIGRlZmluZWQoIFVTRV9CVU1QTUFQICkgfHwgZGVmaW5lZCggVVNFX05PUk1BTE1BUCApIHx8IGRlZmluZWQoIFBIT05HIClcblx0XHR2V29ybGRQb3NpdGlvbiA9IHdvcmxkUG9zaXRpb24ueHl6O1xuXHQjZWxzZVxuXHRcdHZlYzMgY2FtZXJhVG9WZXJ0ZXggPSBub3JtYWxpemUoIHdvcmxkUG9zaXRpb24ueHl6IC0gY2FtZXJhUG9zaXRpb24gKTtcblx0XHR2ZWMzIHdvcmxkTm9ybWFsID0gaW52ZXJzZVRyYW5zZm9ybURpcmVjdGlvbiggdHJhbnNmb3JtZWROb3JtYWwsIHZpZXdNYXRyaXggKTtcblx0XHQjaWZkZWYgRU5WTUFQX01PREVfUkVGTEVDVElPTlxuXHRcdFx0dlJlZmxlY3QgPSByZWZsZWN0KCBjYW1lcmFUb1ZlcnRleCwgd29ybGROb3JtYWwgKTtcblx0XHQjZWxzZVxuXHRcdFx0dlJlZmxlY3QgPSByZWZyYWN0KCBjYW1lcmFUb1ZlcnRleCwgd29ybGROb3JtYWwsIHJlZnJhY3Rpb25SYXRpbyApO1xuXHRcdCNlbmRpZlxuXHQjZW5kaWZcbiNlbmRpZlxuIjt2YXIgZm9nX3ZlcnRleD0iXG4jaWZkZWYgVVNFX0ZPR1xuZm9nRGVwdGggPSAtbXZQb3NpdGlvbi56O1xuI2VuZGlmIjt2YXIgZm9nX3BhcnNfdmVydGV4PSIjaWZkZWYgVVNFX0ZPR1xuICB2YXJ5aW5nIGZsb2F0IGZvZ0RlcHRoO1xuI2VuZGlmXG4iO3ZhciBmb2dfZnJhZ21lbnQ9IiNpZmRlZiBVU0VfRk9HXG5cdCNpZmRlZiBGT0dfRVhQMlxuXHRcdGZsb2F0IGZvZ0ZhY3RvciA9IHdoaXRlQ29tcGxpbWVudCggZXhwMiggLSBmb2dEZW5zaXR5ICogZm9nRGVuc2l0eSAqIGZvZ0RlcHRoICogZm9nRGVwdGggKiBMT0cyICkgKTtcblx0I2Vsc2Vcblx0XHRmbG9hdCBmb2dGYWN0b3IgPSBzbW9vdGhzdGVwKCBmb2dOZWFyLCBmb2dGYXIsIGZvZ0RlcHRoICk7XG5cdCNlbmRpZlxuXHRnbF9GcmFnQ29sb3IucmdiID0gbWl4KCBnbF9GcmFnQ29sb3IucmdiLCBmb2dDb2xvciwgZm9nRmFjdG9yICk7XG4jZW5kaWZcbiI7dmFyIGZvZ19wYXJzX2ZyYWdtZW50PSIjaWZkZWYgVVNFX0ZPR1xuXHR1bmlmb3JtIHZlYzMgZm9nQ29sb3I7XG5cdHZhcnlpbmcgZmxvYXQgZm9nRGVwdGg7XG5cdCNpZmRlZiBGT0dfRVhQMlxuXHRcdHVuaWZvcm0gZmxvYXQgZm9nRGVuc2l0eTtcblx0I2Vsc2Vcblx0XHR1bmlmb3JtIGZsb2F0IGZvZ05lYXI7XG5cdFx0dW5pZm9ybSBmbG9hdCBmb2dGYXI7XG5cdCNlbmRpZlxuI2VuZGlmXG4iO3ZhciBncmFkaWVudG1hcF9wYXJzX2ZyYWdtZW50PSIjaWZkZWYgVE9PTlxuXHR1bmlmb3JtIHNhbXBsZXIyRCBncmFkaWVudE1hcDtcblx0dmVjMyBnZXRHcmFkaWVudElycmFkaWFuY2UoIHZlYzMgbm9ybWFsLCB2ZWMzIGxpZ2h0RGlyZWN0aW9uICkge1xuXHRcdGZsb2F0IGRvdE5MID0gZG90KCBub3JtYWwsIGxpZ2h0RGlyZWN0aW9uICk7XG5cdFx0dmVjMiBjb29yZCA9IHZlYzIoIGRvdE5MICogMC41ICsgMC41LCAwLjAgKTtcblx0XHQjaWZkZWYgVVNFX0dSQURJRU5UTUFQXG5cdFx0XHRyZXR1cm4gdGV4dHVyZTJEKCBncmFkaWVudE1hcCwgY29vcmQgKS5yZ2I7XG5cdFx0I2Vsc2Vcblx0XHRcdHJldHVybiAoIGNvb3JkLnggPCAwLjcgKSA/IHZlYzMoIDAuNyApIDogdmVjMyggMS4wICk7XG5cdFx0I2VuZGlmXG5cdH1cbiNlbmRpZlxuIjt2YXIgbGlnaHRtYXBfZnJhZ21lbnQ9IiNpZmRlZiBVU0VfTElHSFRNQVBcblx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlICs9IFBJICogdGV4dHVyZTJEKCBsaWdodE1hcCwgdlV2MiApLnh5eiAqIGxpZ2h0TWFwSW50ZW5zaXR5O1xuI2VuZGlmXG4iO3ZhciBsaWdodG1hcF9wYXJzX2ZyYWdtZW50PSIjaWZkZWYgVVNFX0xJR0hUTUFQXG5cdHVuaWZvcm0gc2FtcGxlcjJEIGxpZ2h0TWFwO1xuXHR1bmlmb3JtIGZsb2F0IGxpZ2h0TWFwSW50ZW5zaXR5O1xuI2VuZGlmIjt2YXIgbGlnaHRzX2xhbWJlcnRfdmVydGV4PSJ2ZWMzIGRpZmZ1c2UgPSB2ZWMzKCAxLjAgKTtcbkdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnk7XG5nZW9tZXRyeS5wb3NpdGlvbiA9IG12UG9zaXRpb24ueHl6O1xuZ2VvbWV0cnkubm9ybWFsID0gbm9ybWFsaXplKCB0cmFuc2Zvcm1lZE5vcm1hbCApO1xuZ2VvbWV0cnkudmlld0RpciA9IG5vcm1hbGl6ZSggLW12UG9zaXRpb24ueHl6ICk7XG5HZW9tZXRyaWNDb250ZXh0IGJhY2tHZW9tZXRyeTtcbmJhY2tHZW9tZXRyeS5wb3NpdGlvbiA9IGdlb21ldHJ5LnBvc2l0aW9uO1xuYmFja0dlb21ldHJ5Lm5vcm1hbCA9IC1nZW9tZXRyeS5ub3JtYWw7XG5iYWNrR2VvbWV0cnkudmlld0RpciA9IGdlb21ldHJ5LnZpZXdEaXI7XG52TGlnaHRGcm9udCA9IHZlYzMoIDAuMCApO1xuI2lmZGVmIERPVUJMRV9TSURFRFxuXHR2TGlnaHRCYWNrID0gdmVjMyggMC4wICk7XG4jZW5kaWZcbkluY2lkZW50TGlnaHQgZGlyZWN0TGlnaHQ7XG5mbG9hdCBkb3ROTDtcbnZlYzMgZGlyZWN0TGlnaHRDb2xvcl9EaWZmdXNlO1xuI2lmIE5VTV9QT0lOVF9MSUdIVFMgPiAwXG5cdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9QT0lOVF9MSUdIVFM7IGkgKysgKSB7XG5cdFx0Z2V0UG9pbnREaXJlY3RMaWdodElycmFkaWFuY2UoIHBvaW50TGlnaHRzWyBpIF0sIGdlb21ldHJ5LCBkaXJlY3RMaWdodCApO1xuXHRcdGRvdE5MID0gZG90KCBnZW9tZXRyeS5ub3JtYWwsIGRpcmVjdExpZ2h0LmRpcmVjdGlvbiApO1xuXHRcdGRpcmVjdExpZ2h0Q29sb3JfRGlmZnVzZSA9IFBJICogZGlyZWN0TGlnaHQuY29sb3I7XG5cdFx0dkxpZ2h0RnJvbnQgKz0gc2F0dXJhdGUoIGRvdE5MICkgKiBkaXJlY3RMaWdodENvbG9yX0RpZmZ1c2U7XG5cdFx0I2lmZGVmIERPVUJMRV9TSURFRFxuXHRcdFx0dkxpZ2h0QmFjayArPSBzYXR1cmF0ZSggLWRvdE5MICkgKiBkaXJlY3RMaWdodENvbG9yX0RpZmZ1c2U7XG5cdFx0I2VuZGlmXG5cdH1cbiNlbmRpZlxuI2lmIE5VTV9TUE9UX0xJR0hUUyA+IDBcblx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX1NQT1RfTElHSFRTOyBpICsrICkge1xuXHRcdGdldFNwb3REaXJlY3RMaWdodElycmFkaWFuY2UoIHNwb3RMaWdodHNbIGkgXSwgZ2VvbWV0cnksIGRpcmVjdExpZ2h0ICk7XG5cdFx0ZG90TkwgPSBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgZGlyZWN0TGlnaHQuZGlyZWN0aW9uICk7XG5cdFx0ZGlyZWN0TGlnaHRDb2xvcl9EaWZmdXNlID0gUEkgKiBkaXJlY3RMaWdodC5jb2xvcjtcblx0XHR2TGlnaHRGcm9udCArPSBzYXR1cmF0ZSggZG90TkwgKSAqIGRpcmVjdExpZ2h0Q29sb3JfRGlmZnVzZTtcblx0XHQjaWZkZWYgRE9VQkxFX1NJREVEXG5cdFx0XHR2TGlnaHRCYWNrICs9IHNhdHVyYXRlKCAtZG90TkwgKSAqIGRpcmVjdExpZ2h0Q29sb3JfRGlmZnVzZTtcblx0XHQjZW5kaWZcblx0fVxuI2VuZGlmXG4jaWYgTlVNX0RJUl9MSUdIVFMgPiAwXG5cdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9ESVJfTElHSFRTOyBpICsrICkge1xuXHRcdGdldERpcmVjdGlvbmFsRGlyZWN0TGlnaHRJcnJhZGlhbmNlKCBkaXJlY3Rpb25hbExpZ2h0c1sgaSBdLCBnZW9tZXRyeSwgZGlyZWN0TGlnaHQgKTtcblx0XHRkb3ROTCA9IGRvdCggZ2VvbWV0cnkubm9ybWFsLCBkaXJlY3RMaWdodC5kaXJlY3Rpb24gKTtcblx0XHRkaXJlY3RMaWdodENvbG9yX0RpZmZ1c2UgPSBQSSAqIGRpcmVjdExpZ2h0LmNvbG9yO1xuXHRcdHZMaWdodEZyb250ICs9IHNhdHVyYXRlKCBkb3ROTCApICogZGlyZWN0TGlnaHRDb2xvcl9EaWZmdXNlO1xuXHRcdCNpZmRlZiBET1VCTEVfU0lERURcblx0XHRcdHZMaWdodEJhY2sgKz0gc2F0dXJhdGUoIC1kb3ROTCApICogZGlyZWN0TGlnaHRDb2xvcl9EaWZmdXNlO1xuXHRcdCNlbmRpZlxuXHR9XG4jZW5kaWZcbiNpZiBOVU1fSEVNSV9MSUdIVFMgPiAwXG5cdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9IRU1JX0xJR0hUUzsgaSArKyApIHtcblx0XHR2TGlnaHRGcm9udCArPSBnZXRIZW1pc3BoZXJlTGlnaHRJcnJhZGlhbmNlKCBoZW1pc3BoZXJlTGlnaHRzWyBpIF0sIGdlb21ldHJ5ICk7XG5cdFx0I2lmZGVmIERPVUJMRV9TSURFRFxuXHRcdFx0dkxpZ2h0QmFjayArPSBnZXRIZW1pc3BoZXJlTGlnaHRJcnJhZGlhbmNlKCBoZW1pc3BoZXJlTGlnaHRzWyBpIF0sIGJhY2tHZW9tZXRyeSApO1xuXHRcdCNlbmRpZlxuXHR9XG4jZW5kaWZcbiI7dmFyIGxpZ2h0c19wYXJzPSJ1bmlmb3JtIHZlYzMgYW1iaWVudExpZ2h0Q29sb3I7XG52ZWMzIGdldEFtYmllbnRMaWdodElycmFkaWFuY2UoIGNvbnN0IGluIHZlYzMgYW1iaWVudExpZ2h0Q29sb3IgKSB7XG5cdHZlYzMgaXJyYWRpYW5jZSA9IGFtYmllbnRMaWdodENvbG9yO1xuXHQjaWZuZGVmIFBIWVNJQ0FMTFlfQ09SUkVDVF9MSUdIVFNcblx0XHRpcnJhZGlhbmNlICo9IFBJO1xuXHQjZW5kaWZcblx0cmV0dXJuIGlycmFkaWFuY2U7XG59XG4jaWYgTlVNX0RJUl9MSUdIVFMgPiAwXG5cdHN0cnVjdCBEaXJlY3Rpb25hbExpZ2h0IHtcblx0XHR2ZWMzIGRpcmVjdGlvbjtcblx0XHR2ZWMzIGNvbG9yO1xuXHRcdGludCBzaGFkb3c7XG5cdFx0ZmxvYXQgc2hhZG93Qmlhcztcblx0XHRmbG9hdCBzaGFkb3dSYWRpdXM7XG5cdFx0dmVjMiBzaGFkb3dNYXBTaXplO1xuXHR9O1xuXHR1bmlmb3JtIERpcmVjdGlvbmFsTGlnaHQgZGlyZWN0aW9uYWxMaWdodHNbIE5VTV9ESVJfTElHSFRTIF07XG5cdHZvaWQgZ2V0RGlyZWN0aW9uYWxEaXJlY3RMaWdodElycmFkaWFuY2UoIGNvbnN0IGluIERpcmVjdGlvbmFsTGlnaHQgZGlyZWN0aW9uYWxMaWdodCwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgb3V0IEluY2lkZW50TGlnaHQgZGlyZWN0TGlnaHQgKSB7XG5cdFx0ZGlyZWN0TGlnaHQuY29sb3IgPSBkaXJlY3Rpb25hbExpZ2h0LmNvbG9yO1xuXHRcdGRpcmVjdExpZ2h0LmRpcmVjdGlvbiA9IGRpcmVjdGlvbmFsTGlnaHQuZGlyZWN0aW9uO1xuXHRcdGRpcmVjdExpZ2h0LnZpc2libGUgPSB0cnVlO1xuXHR9XG4jZW5kaWZcbiNpZiBOVU1fUE9JTlRfTElHSFRTID4gMFxuXHRzdHJ1Y3QgUG9pbnRMaWdodCB7XG5cdFx0dmVjMyBwb3NpdGlvbjtcblx0XHR2ZWMzIGNvbG9yO1xuXHRcdGZsb2F0IGRpc3RhbmNlO1xuXHRcdGZsb2F0IGRlY2F5O1xuXHRcdGludCBzaGFkb3c7XG5cdFx0ZmxvYXQgc2hhZG93Qmlhcztcblx0XHRmbG9hdCBzaGFkb3dSYWRpdXM7XG5cdFx0dmVjMiBzaGFkb3dNYXBTaXplO1xuXHRcdGZsb2F0IHNoYWRvd0NhbWVyYU5lYXI7XG5cdFx0ZmxvYXQgc2hhZG93Q2FtZXJhRmFyO1xuXHR9O1xuXHR1bmlmb3JtIFBvaW50TGlnaHQgcG9pbnRMaWdodHNbIE5VTV9QT0lOVF9MSUdIVFMgXTtcblx0dm9pZCBnZXRQb2ludERpcmVjdExpZ2h0SXJyYWRpYW5jZSggY29uc3QgaW4gUG9pbnRMaWdodCBwb2ludExpZ2h0LCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBvdXQgSW5jaWRlbnRMaWdodCBkaXJlY3RMaWdodCApIHtcblx0XHR2ZWMzIGxWZWN0b3IgPSBwb2ludExpZ2h0LnBvc2l0aW9uIC0gZ2VvbWV0cnkucG9zaXRpb247XG5cdFx0ZGlyZWN0TGlnaHQuZGlyZWN0aW9uID0gbm9ybWFsaXplKCBsVmVjdG9yICk7XG5cdFx0ZmxvYXQgbGlnaHREaXN0YW5jZSA9IGxlbmd0aCggbFZlY3RvciApO1xuXHRcdGRpcmVjdExpZ2h0LmNvbG9yID0gcG9pbnRMaWdodC5jb2xvcjtcblx0XHRkaXJlY3RMaWdodC5jb2xvciAqPSBwdW5jdHVhbExpZ2h0SW50ZW5zaXR5VG9JcnJhZGlhbmNlRmFjdG9yKCBsaWdodERpc3RhbmNlLCBwb2ludExpZ2h0LmRpc3RhbmNlLCBwb2ludExpZ2h0LmRlY2F5ICk7XG5cdFx0ZGlyZWN0TGlnaHQudmlzaWJsZSA9ICggZGlyZWN0TGlnaHQuY29sb3IgIT0gdmVjMyggMC4wICkgKTtcblx0fVxuI2VuZGlmXG4jaWYgTlVNX1NQT1RfTElHSFRTID4gMFxuXHRzdHJ1Y3QgU3BvdExpZ2h0IHtcblx0XHR2ZWMzIHBvc2l0aW9uO1xuXHRcdHZlYzMgZGlyZWN0aW9uO1xuXHRcdHZlYzMgY29sb3I7XG5cdFx0ZmxvYXQgZGlzdGFuY2U7XG5cdFx0ZmxvYXQgZGVjYXk7XG5cdFx0ZmxvYXQgY29uZUNvcztcblx0XHRmbG9hdCBwZW51bWJyYUNvcztcblx0XHRpbnQgc2hhZG93O1xuXHRcdGZsb2F0IHNoYWRvd0JpYXM7XG5cdFx0ZmxvYXQgc2hhZG93UmFkaXVzO1xuXHRcdHZlYzIgc2hhZG93TWFwU2l6ZTtcblx0fTtcblx0dW5pZm9ybSBTcG90TGlnaHQgc3BvdExpZ2h0c1sgTlVNX1NQT1RfTElHSFRTIF07XG5cdHZvaWQgZ2V0U3BvdERpcmVjdExpZ2h0SXJyYWRpYW5jZSggY29uc3QgaW4gU3BvdExpZ2h0IHNwb3RMaWdodCwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgb3V0IEluY2lkZW50TGlnaHQgZGlyZWN0TGlnaHQgICkge1xuXHRcdHZlYzMgbFZlY3RvciA9IHNwb3RMaWdodC5wb3NpdGlvbiAtIGdlb21ldHJ5LnBvc2l0aW9uO1xuXHRcdGRpcmVjdExpZ2h0LmRpcmVjdGlvbiA9IG5vcm1hbGl6ZSggbFZlY3RvciApO1xuXHRcdGZsb2F0IGxpZ2h0RGlzdGFuY2UgPSBsZW5ndGgoIGxWZWN0b3IgKTtcblx0XHRmbG9hdCBhbmdsZUNvcyA9IGRvdCggZGlyZWN0TGlnaHQuZGlyZWN0aW9uLCBzcG90TGlnaHQuZGlyZWN0aW9uICk7XG5cdFx0aWYgKCBhbmdsZUNvcyA+IHNwb3RMaWdodC5jb25lQ29zICkge1xuXHRcdFx0ZmxvYXQgc3BvdEVmZmVjdCA9IHNtb290aHN0ZXAoIHNwb3RMaWdodC5jb25lQ29zLCBzcG90TGlnaHQucGVudW1icmFDb3MsIGFuZ2xlQ29zICk7XG5cdFx0XHRkaXJlY3RMaWdodC5jb2xvciA9IHNwb3RMaWdodC5jb2xvcjtcblx0XHRcdGRpcmVjdExpZ2h0LmNvbG9yICo9IHNwb3RFZmZlY3QgKiBwdW5jdHVhbExpZ2h0SW50ZW5zaXR5VG9JcnJhZGlhbmNlRmFjdG9yKCBsaWdodERpc3RhbmNlLCBzcG90TGlnaHQuZGlzdGFuY2UsIHNwb3RMaWdodC5kZWNheSApO1xuXHRcdFx0ZGlyZWN0TGlnaHQudmlzaWJsZSA9IHRydWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGRpcmVjdExpZ2h0LmNvbG9yID0gdmVjMyggMC4wICk7XG5cdFx0XHRkaXJlY3RMaWdodC52aXNpYmxlID0gZmFsc2U7XG5cdFx0fVxuXHR9XG4jZW5kaWZcbiNpZiBOVU1fUkVDVF9BUkVBX0xJR0hUUyA+IDBcblx0c3RydWN0IFJlY3RBcmVhTGlnaHQge1xuXHRcdHZlYzMgY29sb3I7XG5cdFx0dmVjMyBwb3NpdGlvbjtcblx0XHR2ZWMzIGhhbGZXaWR0aDtcblx0XHR2ZWMzIGhhbGZIZWlnaHQ7XG5cdH07XG5cdHVuaWZvcm0gc2FtcGxlcjJEIGx0Y01hdDtcdHVuaWZvcm0gc2FtcGxlcjJEIGx0Y01hZztcblx0dW5pZm9ybSBSZWN0QXJlYUxpZ2h0IHJlY3RBcmVhTGlnaHRzWyBOVU1fUkVDVF9BUkVBX0xJR0hUUyBdO1xuI2VuZGlmXG4jaWYgTlVNX0hFTUlfTElHSFRTID4gMFxuXHRzdHJ1Y3QgSGVtaXNwaGVyZUxpZ2h0IHtcblx0XHR2ZWMzIGRpcmVjdGlvbjtcblx0XHR2ZWMzIHNreUNvbG9yO1xuXHRcdHZlYzMgZ3JvdW5kQ29sb3I7XG5cdH07XG5cdHVuaWZvcm0gSGVtaXNwaGVyZUxpZ2h0IGhlbWlzcGhlcmVMaWdodHNbIE5VTV9IRU1JX0xJR0hUUyBdO1xuXHR2ZWMzIGdldEhlbWlzcGhlcmVMaWdodElycmFkaWFuY2UoIGNvbnN0IGluIEhlbWlzcGhlcmVMaWdodCBoZW1pTGlnaHQsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnkgKSB7XG5cdFx0ZmxvYXQgZG90TkwgPSBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgaGVtaUxpZ2h0LmRpcmVjdGlvbiApO1xuXHRcdGZsb2F0IGhlbWlEaWZmdXNlV2VpZ2h0ID0gMC41ICogZG90TkwgKyAwLjU7XG5cdFx0dmVjMyBpcnJhZGlhbmNlID0gbWl4KCBoZW1pTGlnaHQuZ3JvdW5kQ29sb3IsIGhlbWlMaWdodC5za3lDb2xvciwgaGVtaURpZmZ1c2VXZWlnaHQgKTtcblx0XHQjaWZuZGVmIFBIWVNJQ0FMTFlfQ09SUkVDVF9MSUdIVFNcblx0XHRcdGlycmFkaWFuY2UgKj0gUEk7XG5cdFx0I2VuZGlmXG5cdFx0cmV0dXJuIGlycmFkaWFuY2U7XG5cdH1cbiNlbmRpZlxuI2lmIGRlZmluZWQoIFVTRV9FTlZNQVAgKSAmJiBkZWZpbmVkKCBQSFlTSUNBTCApXG5cdHZlYzMgZ2V0TGlnaHRQcm9iZUluZGlyZWN0SXJyYWRpYW5jZSggY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgY29uc3QgaW4gaW50IG1heE1JUExldmVsICkge1xuXHRcdHZlYzMgd29ybGROb3JtYWwgPSBpbnZlcnNlVHJhbnNmb3JtRGlyZWN0aW9uKCBnZW9tZXRyeS5ub3JtYWwsIHZpZXdNYXRyaXggKTtcblx0XHQjaWZkZWYgRU5WTUFQX1RZUEVfQ1VCRVxuXHRcdFx0dmVjMyBxdWVyeVZlYyA9IHZlYzMoIGZsaXBFbnZNYXAgKiB3b3JsZE5vcm1hbC54LCB3b3JsZE5vcm1hbC55eiApO1xuXHRcdFx0I2lmZGVmIFRFWFRVUkVfTE9EX0VYVFxuXHRcdFx0XHR2ZWM0IGVudk1hcENvbG9yID0gdGV4dHVyZUN1YmVMb2RFWFQoIGVudk1hcCwgcXVlcnlWZWMsIGZsb2F0KCBtYXhNSVBMZXZlbCApICk7XG5cdFx0XHQjZWxzZVxuXHRcdFx0XHR2ZWM0IGVudk1hcENvbG9yID0gdGV4dHVyZUN1YmUoIGVudk1hcCwgcXVlcnlWZWMsIGZsb2F0KCBtYXhNSVBMZXZlbCApICk7XG5cdFx0XHQjZW5kaWZcblx0XHRcdGVudk1hcENvbG9yLnJnYiA9IGVudk1hcFRleGVsVG9MaW5lYXIoIGVudk1hcENvbG9yICkucmdiO1xuXHRcdCNlbGlmIGRlZmluZWQoIEVOVk1BUF9UWVBFX0NVQkVfVVYgKVxuXHRcdFx0dmVjMyBxdWVyeVZlYyA9IHZlYzMoIGZsaXBFbnZNYXAgKiB3b3JsZE5vcm1hbC54LCB3b3JsZE5vcm1hbC55eiApO1xuXHRcdFx0dmVjNCBlbnZNYXBDb2xvciA9IHRleHR1cmVDdWJlVVYoIHF1ZXJ5VmVjLCAxLjAgKTtcblx0XHQjZWxzZVxuXHRcdFx0dmVjNCBlbnZNYXBDb2xvciA9IHZlYzQoIDAuMCApO1xuXHRcdCNlbmRpZlxuXHRcdHJldHVybiBQSSAqIGVudk1hcENvbG9yLnJnYiAqIGVudk1hcEludGVuc2l0eTtcblx0fVxuXHRmbG9hdCBnZXRTcGVjdWxhck1JUExldmVsKCBjb25zdCBpbiBmbG9hdCBibGlublNoaW5pbmVzc0V4cG9uZW50LCBjb25zdCBpbiBpbnQgbWF4TUlQTGV2ZWwgKSB7XG5cdFx0ZmxvYXQgbWF4TUlQTGV2ZWxTY2FsYXIgPSBmbG9hdCggbWF4TUlQTGV2ZWwgKTtcblx0XHRmbG9hdCBkZXNpcmVkTUlQTGV2ZWwgPSBtYXhNSVBMZXZlbFNjYWxhciArIDAuNzkyNDggLSAwLjUgKiBsb2cyKCBwb3cyKCBibGlublNoaW5pbmVzc0V4cG9uZW50ICkgKyAxLjAgKTtcblx0XHRyZXR1cm4gY2xhbXAoIGRlc2lyZWRNSVBMZXZlbCwgMC4wLCBtYXhNSVBMZXZlbFNjYWxhciApO1xuXHR9XG5cdHZlYzMgZ2V0TGlnaHRQcm9iZUluZGlyZWN0UmFkaWFuY2UoIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIGNvbnN0IGluIGZsb2F0IGJsaW5uU2hpbmluZXNzRXhwb25lbnQsIGNvbnN0IGluIGludCBtYXhNSVBMZXZlbCApIHtcblx0XHQjaWZkZWYgRU5WTUFQX01PREVfUkVGTEVDVElPTlxuXHRcdFx0dmVjMyByZWZsZWN0VmVjID0gcmVmbGVjdCggLWdlb21ldHJ5LnZpZXdEaXIsIGdlb21ldHJ5Lm5vcm1hbCApO1xuXHRcdCNlbHNlXG5cdFx0XHR2ZWMzIHJlZmxlY3RWZWMgPSByZWZyYWN0KCAtZ2VvbWV0cnkudmlld0RpciwgZ2VvbWV0cnkubm9ybWFsLCByZWZyYWN0aW9uUmF0aW8gKTtcblx0XHQjZW5kaWZcblx0XHRyZWZsZWN0VmVjID0gaW52ZXJzZVRyYW5zZm9ybURpcmVjdGlvbiggcmVmbGVjdFZlYywgdmlld01hdHJpeCApO1xuXHRcdGZsb2F0IHNwZWN1bGFyTUlQTGV2ZWwgPSBnZXRTcGVjdWxhck1JUExldmVsKCBibGlublNoaW5pbmVzc0V4cG9uZW50LCBtYXhNSVBMZXZlbCApO1xuXHRcdCNpZmRlZiBFTlZNQVBfVFlQRV9DVUJFXG5cdFx0XHR2ZWMzIHF1ZXJ5UmVmbGVjdFZlYyA9IHZlYzMoIGZsaXBFbnZNYXAgKiByZWZsZWN0VmVjLngsIHJlZmxlY3RWZWMueXogKTtcblx0XHRcdCNpZmRlZiBURVhUVVJFX0xPRF9FWFRcblx0XHRcdFx0dmVjNCBlbnZNYXBDb2xvciA9IHRleHR1cmVDdWJlTG9kRVhUKCBlbnZNYXAsIHF1ZXJ5UmVmbGVjdFZlYywgc3BlY3VsYXJNSVBMZXZlbCApO1xuXHRcdFx0I2Vsc2Vcblx0XHRcdFx0dmVjNCBlbnZNYXBDb2xvciA9IHRleHR1cmVDdWJlKCBlbnZNYXAsIHF1ZXJ5UmVmbGVjdFZlYywgc3BlY3VsYXJNSVBMZXZlbCApO1xuXHRcdFx0I2VuZGlmXG5cdFx0XHRlbnZNYXBDb2xvci5yZ2IgPSBlbnZNYXBUZXhlbFRvTGluZWFyKCBlbnZNYXBDb2xvciApLnJnYjtcblx0XHQjZWxpZiBkZWZpbmVkKCBFTlZNQVBfVFlQRV9DVUJFX1VWIClcblx0XHRcdHZlYzMgcXVlcnlSZWZsZWN0VmVjID0gdmVjMyggZmxpcEVudk1hcCAqIHJlZmxlY3RWZWMueCwgcmVmbGVjdFZlYy55eiApO1xuXHRcdFx0dmVjNCBlbnZNYXBDb2xvciA9IHRleHR1cmVDdWJlVVYocXVlcnlSZWZsZWN0VmVjLCBCbGlubkV4cG9uZW50VG9HR1hSb3VnaG5lc3MoYmxpbm5TaGluaW5lc3NFeHBvbmVudCkpO1xuXHRcdCNlbGlmIGRlZmluZWQoIEVOVk1BUF9UWVBFX0VRVUlSRUMgKVxuXHRcdFx0dmVjMiBzYW1wbGVVVjtcblx0XHRcdHNhbXBsZVVWLnkgPSBhc2luKCBjbGFtcCggcmVmbGVjdFZlYy55LCAtIDEuMCwgMS4wICkgKSAqIFJFQ0lQUk9DQUxfUEkgKyAwLjU7XG5cdFx0XHRzYW1wbGVVVi54ID0gYXRhbiggcmVmbGVjdFZlYy56LCByZWZsZWN0VmVjLnggKSAqIFJFQ0lQUk9DQUxfUEkyICsgMC41O1xuXHRcdFx0I2lmZGVmIFRFWFRVUkVfTE9EX0VYVFxuXHRcdFx0XHR2ZWM0IGVudk1hcENvbG9yID0gdGV4dHVyZTJETG9kRVhUKCBlbnZNYXAsIHNhbXBsZVVWLCBzcGVjdWxhck1JUExldmVsICk7XG5cdFx0XHQjZWxzZVxuXHRcdFx0XHR2ZWM0IGVudk1hcENvbG9yID0gdGV4dHVyZTJEKCBlbnZNYXAsIHNhbXBsZVVWLCBzcGVjdWxhck1JUExldmVsICk7XG5cdFx0XHQjZW5kaWZcblx0XHRcdGVudk1hcENvbG9yLnJnYiA9IGVudk1hcFRleGVsVG9MaW5lYXIoIGVudk1hcENvbG9yICkucmdiO1xuXHRcdCNlbGlmIGRlZmluZWQoIEVOVk1BUF9UWVBFX1NQSEVSRSApXG5cdFx0XHR2ZWMzIHJlZmxlY3RWaWV3ID0gbm9ybWFsaXplKCAoIHZpZXdNYXRyaXggKiB2ZWM0KCByZWZsZWN0VmVjLCAwLjAgKSApLnh5eiArIHZlYzMoIDAuMCwwLjAsMS4wICkgKTtcblx0XHRcdCNpZmRlZiBURVhUVVJFX0xPRF9FWFRcblx0XHRcdFx0dmVjNCBlbnZNYXBDb2xvciA9IHRleHR1cmUyRExvZEVYVCggZW52TWFwLCByZWZsZWN0Vmlldy54eSAqIDAuNSArIDAuNSwgc3BlY3VsYXJNSVBMZXZlbCApO1xuXHRcdFx0I2Vsc2Vcblx0XHRcdFx0dmVjNCBlbnZNYXBDb2xvciA9IHRleHR1cmUyRCggZW52TWFwLCByZWZsZWN0Vmlldy54eSAqIDAuNSArIDAuNSwgc3BlY3VsYXJNSVBMZXZlbCApO1xuXHRcdFx0I2VuZGlmXG5cdFx0XHRlbnZNYXBDb2xvci5yZ2IgPSBlbnZNYXBUZXhlbFRvTGluZWFyKCBlbnZNYXBDb2xvciApLnJnYjtcblx0XHQjZW5kaWZcblx0XHRyZXR1cm4gZW52TWFwQ29sb3IucmdiICogZW52TWFwSW50ZW5zaXR5O1xuXHR9XG4jZW5kaWZcbiI7dmFyIGxpZ2h0c19waG9uZ19mcmFnbWVudD0iQmxpbm5QaG9uZ01hdGVyaWFsIG1hdGVyaWFsO1xubWF0ZXJpYWwuZGlmZnVzZUNvbG9yID0gZGlmZnVzZUNvbG9yLnJnYjtcbm1hdGVyaWFsLnNwZWN1bGFyQ29sb3IgPSBzcGVjdWxhcjtcbm1hdGVyaWFsLnNwZWN1bGFyU2hpbmluZXNzID0gc2hpbmluZXNzO1xubWF0ZXJpYWwuc3BlY3VsYXJTdHJlbmd0aCA9IHNwZWN1bGFyU3RyZW5ndGg7XG4iO3ZhciBsaWdodHNfcGhvbmdfcGFyc19mcmFnbWVudD0idmFyeWluZyB2ZWMzIHZWaWV3UG9zaXRpb247XG4jaWZuZGVmIEZMQVRfU0hBREVEXG5cdHZhcnlpbmcgdmVjMyB2Tm9ybWFsO1xuI2VuZGlmXG5zdHJ1Y3QgQmxpbm5QaG9uZ01hdGVyaWFsIHtcblx0dmVjM1x0ZGlmZnVzZUNvbG9yO1xuXHR2ZWMzXHRzcGVjdWxhckNvbG9yO1xuXHRmbG9hdFx0c3BlY3VsYXJTaGluaW5lc3M7XG5cdGZsb2F0XHRzcGVjdWxhclN0cmVuZ3RoO1xufTtcbnZvaWQgUkVfRGlyZWN0X0JsaW5uUGhvbmcoIGNvbnN0IGluIEluY2lkZW50TGlnaHQgZGlyZWN0TGlnaHQsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIGNvbnN0IGluIEJsaW5uUGhvbmdNYXRlcmlhbCBtYXRlcmlhbCwgaW5vdXQgUmVmbGVjdGVkTGlnaHQgcmVmbGVjdGVkTGlnaHQgKSB7XG5cdCNpZmRlZiBUT09OXG5cdFx0dmVjMyBpcnJhZGlhbmNlID0gZ2V0R3JhZGllbnRJcnJhZGlhbmNlKCBnZW9tZXRyeS5ub3JtYWwsIGRpcmVjdExpZ2h0LmRpcmVjdGlvbiApICogZGlyZWN0TGlnaHQuY29sb3I7XG5cdCNlbHNlXG5cdFx0ZmxvYXQgZG90TkwgPSBzYXR1cmF0ZSggZG90KCBnZW9tZXRyeS5ub3JtYWwsIGRpcmVjdExpZ2h0LmRpcmVjdGlvbiApICk7XG5cdFx0dmVjMyBpcnJhZGlhbmNlID0gZG90TkwgKiBkaXJlY3RMaWdodC5jb2xvcjtcblx0I2VuZGlmXG5cdCNpZm5kZWYgUEhZU0lDQUxMWV9DT1JSRUNUX0xJR0hUU1xuXHRcdGlycmFkaWFuY2UgKj0gUEk7XG5cdCNlbmRpZlxuXHRyZWZsZWN0ZWRMaWdodC5kaXJlY3REaWZmdXNlICs9IGlycmFkaWFuY2UgKiBCUkRGX0RpZmZ1c2VfTGFtYmVydCggbWF0ZXJpYWwuZGlmZnVzZUNvbG9yICk7XG5cdHJlZmxlY3RlZExpZ2h0LmRpcmVjdFNwZWN1bGFyICs9IGlycmFkaWFuY2UgKiBCUkRGX1NwZWN1bGFyX0JsaW5uUGhvbmcoIGRpcmVjdExpZ2h0LCBnZW9tZXRyeSwgbWF0ZXJpYWwuc3BlY3VsYXJDb2xvciwgbWF0ZXJpYWwuc3BlY3VsYXJTaGluaW5lc3MgKSAqIG1hdGVyaWFsLnNwZWN1bGFyU3RyZW5ndGg7XG59XG52b2lkIFJFX0luZGlyZWN0RGlmZnVzZV9CbGlublBob25nKCBjb25zdCBpbiB2ZWMzIGlycmFkaWFuY2UsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIGNvbnN0IGluIEJsaW5uUGhvbmdNYXRlcmlhbCBtYXRlcmlhbCwgaW5vdXQgUmVmbGVjdGVkTGlnaHQgcmVmbGVjdGVkTGlnaHQgKSB7XG5cdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSArPSBpcnJhZGlhbmNlICogQlJERl9EaWZmdXNlX0xhbWJlcnQoIG1hdGVyaWFsLmRpZmZ1c2VDb2xvciApO1xufVxuI2RlZmluZSBSRV9EaXJlY3RcdFx0XHRcdFJFX0RpcmVjdF9CbGlublBob25nXG4jZGVmaW5lIFJFX0luZGlyZWN0RGlmZnVzZVx0XHRSRV9JbmRpcmVjdERpZmZ1c2VfQmxpbm5QaG9uZ1xuI2RlZmluZSBNYXRlcmlhbF9MaWdodFByb2JlTE9EKCBtYXRlcmlhbCApXHQoMClcbiI7dmFyIGxpZ2h0c19waHlzaWNhbF9mcmFnbWVudD0iUGh5c2ljYWxNYXRlcmlhbCBtYXRlcmlhbDtcbm1hdGVyaWFsLmRpZmZ1c2VDb2xvciA9IGRpZmZ1c2VDb2xvci5yZ2IgKiAoIDEuMCAtIG1ldGFsbmVzc0ZhY3RvciApO1xubWF0ZXJpYWwuc3BlY3VsYXJSb3VnaG5lc3MgPSBjbGFtcCggcm91Z2huZXNzRmFjdG9yLCAwLjA0LCAxLjAgKTtcbiNpZmRlZiBTVEFOREFSRFxuXHRtYXRlcmlhbC5zcGVjdWxhckNvbG9yID0gbWl4KCB2ZWMzKCBERUZBVUxUX1NQRUNVTEFSX0NPRUZGSUNJRU5UICksIGRpZmZ1c2VDb2xvci5yZ2IsIG1ldGFsbmVzc0ZhY3RvciApO1xuI2Vsc2Vcblx0bWF0ZXJpYWwuc3BlY3VsYXJDb2xvciA9IG1peCggdmVjMyggTUFYSU1VTV9TUEVDVUxBUl9DT0VGRklDSUVOVCAqIHBvdzIoIHJlZmxlY3Rpdml0eSApICksIGRpZmZ1c2VDb2xvci5yZ2IsIG1ldGFsbmVzc0ZhY3RvciApO1xuXHRtYXRlcmlhbC5jbGVhckNvYXQgPSBzYXR1cmF0ZSggY2xlYXJDb2F0ICk7XHRtYXRlcmlhbC5jbGVhckNvYXRSb3VnaG5lc3MgPSBjbGFtcCggY2xlYXJDb2F0Um91Z2huZXNzLCAwLjA0LCAxLjAgKTtcbiNlbmRpZlxuIjt2YXIgbGlnaHRzX3BoeXNpY2FsX3BhcnNfZnJhZ21lbnQ9InN0cnVjdCBQaHlzaWNhbE1hdGVyaWFsIHtcblx0dmVjM1x0ZGlmZnVzZUNvbG9yO1xuXHRmbG9hdFx0c3BlY3VsYXJSb3VnaG5lc3M7XG5cdHZlYzNcdHNwZWN1bGFyQ29sb3I7XG5cdCNpZm5kZWYgU1RBTkRBUkRcblx0XHRmbG9hdCBjbGVhckNvYXQ7XG5cdFx0ZmxvYXQgY2xlYXJDb2F0Um91Z2huZXNzO1xuXHQjZW5kaWZcbn07XG4jZGVmaW5lIE1BWElNVU1fU1BFQ1VMQVJfQ09FRkZJQ0lFTlQgMC4xNlxuI2RlZmluZSBERUZBVUxUX1NQRUNVTEFSX0NPRUZGSUNJRU5UIDAuMDRcbmZsb2F0IGNsZWFyQ29hdERIUkFwcHJveCggY29uc3QgaW4gZmxvYXQgcm91Z2huZXNzLCBjb25zdCBpbiBmbG9hdCBkb3ROTCApIHtcblx0cmV0dXJuIERFRkFVTFRfU1BFQ1VMQVJfQ09FRkZJQ0lFTlQgKyAoIDEuMCAtIERFRkFVTFRfU1BFQ1VMQVJfQ09FRkZJQ0lFTlQgKSAqICggcG93KCAxLjAgLSBkb3ROTCwgNS4wICkgKiBwb3coIDEuMCAtIHJvdWdobmVzcywgMi4wICkgKTtcbn1cbiNpZiBOVU1fUkVDVF9BUkVBX0xJR0hUUyA+IDBcblx0dm9pZCBSRV9EaXJlY3RfUmVjdEFyZWFfUGh5c2ljYWwoIGNvbnN0IGluIFJlY3RBcmVhTGlnaHQgcmVjdEFyZWFMaWdodCwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgY29uc3QgaW4gUGh5c2ljYWxNYXRlcmlhbCBtYXRlcmlhbCwgaW5vdXQgUmVmbGVjdGVkTGlnaHQgcmVmbGVjdGVkTGlnaHQgKSB7XG5cdFx0dmVjMyBub3JtYWwgPSBnZW9tZXRyeS5ub3JtYWw7XG5cdFx0dmVjMyB2aWV3RGlyID0gZ2VvbWV0cnkudmlld0Rpcjtcblx0XHR2ZWMzIHBvc2l0aW9uID0gZ2VvbWV0cnkucG9zaXRpb247XG5cdFx0dmVjMyBsaWdodFBvcyA9IHJlY3RBcmVhTGlnaHQucG9zaXRpb247XG5cdFx0dmVjMyBoYWxmV2lkdGggPSByZWN0QXJlYUxpZ2h0LmhhbGZXaWR0aDtcblx0XHR2ZWMzIGhhbGZIZWlnaHQgPSByZWN0QXJlYUxpZ2h0LmhhbGZIZWlnaHQ7XG5cdFx0dmVjMyBsaWdodENvbG9yID0gcmVjdEFyZWFMaWdodC5jb2xvcjtcblx0XHRmbG9hdCByb3VnaG5lc3MgPSBtYXRlcmlhbC5zcGVjdWxhclJvdWdobmVzcztcblx0XHR2ZWMzIHJlY3RDb29yZHNbIDQgXTtcblx0XHRyZWN0Q29vcmRzWyAwIF0gPSBsaWdodFBvcyAtIGhhbGZXaWR0aCAtIGhhbGZIZWlnaHQ7XHRcdHJlY3RDb29yZHNbIDEgXSA9IGxpZ2h0UG9zICsgaGFsZldpZHRoIC0gaGFsZkhlaWdodDtcblx0XHRyZWN0Q29vcmRzWyAyIF0gPSBsaWdodFBvcyArIGhhbGZXaWR0aCArIGhhbGZIZWlnaHQ7XG5cdFx0cmVjdENvb3Jkc1sgMyBdID0gbGlnaHRQb3MgLSBoYWxmV2lkdGggKyBoYWxmSGVpZ2h0O1xuXHRcdHZlYzIgdXYgPSBMVENfVXYoIG5vcm1hbCwgdmlld0Rpciwgcm91Z2huZXNzICk7XG5cdFx0ZmxvYXQgbm9ybSA9IHRleHR1cmUyRCggbHRjTWFnLCB1diApLmE7XG5cdFx0dmVjNCB0ID0gdGV4dHVyZTJEKCBsdGNNYXQsIHV2ICk7XG5cdFx0bWF0MyBtSW52ID0gbWF0Myhcblx0XHRcdHZlYzMoICAgMSwgICAwLCB0LnkgKSxcblx0XHRcdHZlYzMoICAgMCwgdC56LCAgIDAgKSxcblx0XHRcdHZlYzMoIHQudywgICAwLCB0LnggKVxuXHRcdCk7XG5cdFx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0U3BlY3VsYXIgKz0gbGlnaHRDb2xvciAqIG1hdGVyaWFsLnNwZWN1bGFyQ29sb3IgKiBub3JtICogTFRDX0V2YWx1YXRlKCBub3JtYWwsIHZpZXdEaXIsIHBvc2l0aW9uLCBtSW52LCByZWN0Q29vcmRzICk7XG5cdFx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSArPSBsaWdodENvbG9yICogbWF0ZXJpYWwuZGlmZnVzZUNvbG9yICogTFRDX0V2YWx1YXRlKCBub3JtYWwsIHZpZXdEaXIsIHBvc2l0aW9uLCBtYXQzKCAxICksIHJlY3RDb29yZHMgKTtcblx0fVxuI2VuZGlmXG52b2lkIFJFX0RpcmVjdF9QaHlzaWNhbCggY29uc3QgaW4gSW5jaWRlbnRMaWdodCBkaXJlY3RMaWdodCwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgY29uc3QgaW4gUGh5c2ljYWxNYXRlcmlhbCBtYXRlcmlhbCwgaW5vdXQgUmVmbGVjdGVkTGlnaHQgcmVmbGVjdGVkTGlnaHQgKSB7XG5cdGZsb2F0IGRvdE5MID0gc2F0dXJhdGUoIGRvdCggZ2VvbWV0cnkubm9ybWFsLCBkaXJlY3RMaWdodC5kaXJlY3Rpb24gKSApO1xuXHR2ZWMzIGlycmFkaWFuY2UgPSBkb3ROTCAqIGRpcmVjdExpZ2h0LmNvbG9yO1xuXHQjaWZuZGVmIFBIWVNJQ0FMTFlfQ09SUkVDVF9MSUdIVFNcblx0XHRpcnJhZGlhbmNlICo9IFBJO1xuXHQjZW5kaWZcblx0I2lmbmRlZiBTVEFOREFSRFxuXHRcdGZsb2F0IGNsZWFyQ29hdERIUiA9IG1hdGVyaWFsLmNsZWFyQ29hdCAqIGNsZWFyQ29hdERIUkFwcHJveCggbWF0ZXJpYWwuY2xlYXJDb2F0Um91Z2huZXNzLCBkb3ROTCApO1xuXHQjZWxzZVxuXHRcdGZsb2F0IGNsZWFyQ29hdERIUiA9IDAuMDtcblx0I2VuZGlmXG5cdHJlZmxlY3RlZExpZ2h0LmRpcmVjdFNwZWN1bGFyICs9ICggMS4wIC0gY2xlYXJDb2F0REhSICkgKiBpcnJhZGlhbmNlICogQlJERl9TcGVjdWxhcl9HR1goIGRpcmVjdExpZ2h0LCBnZW9tZXRyeSwgbWF0ZXJpYWwuc3BlY3VsYXJDb2xvciwgbWF0ZXJpYWwuc3BlY3VsYXJSb3VnaG5lc3MgKTtcblx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSArPSAoIDEuMCAtIGNsZWFyQ29hdERIUiApICogaXJyYWRpYW5jZSAqIEJSREZfRGlmZnVzZV9MYW1iZXJ0KCBtYXRlcmlhbC5kaWZmdXNlQ29sb3IgKTtcblx0I2lmbmRlZiBTVEFOREFSRFxuXHRcdHJlZmxlY3RlZExpZ2h0LmRpcmVjdFNwZWN1bGFyICs9IGlycmFkaWFuY2UgKiBtYXRlcmlhbC5jbGVhckNvYXQgKiBCUkRGX1NwZWN1bGFyX0dHWCggZGlyZWN0TGlnaHQsIGdlb21ldHJ5LCB2ZWMzKCBERUZBVUxUX1NQRUNVTEFSX0NPRUZGSUNJRU5UICksIG1hdGVyaWFsLmNsZWFyQ29hdFJvdWdobmVzcyApO1xuXHQjZW5kaWZcbn1cbnZvaWQgUkVfSW5kaXJlY3REaWZmdXNlX1BoeXNpY2FsKCBjb25zdCBpbiB2ZWMzIGlycmFkaWFuY2UsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIGNvbnN0IGluIFBoeXNpY2FsTWF0ZXJpYWwgbWF0ZXJpYWwsIGlub3V0IFJlZmxlY3RlZExpZ2h0IHJlZmxlY3RlZExpZ2h0ICkge1xuXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKz0gaXJyYWRpYW5jZSAqIEJSREZfRGlmZnVzZV9MYW1iZXJ0KCBtYXRlcmlhbC5kaWZmdXNlQ29sb3IgKTtcbn1cbnZvaWQgUkVfSW5kaXJlY3RTcGVjdWxhcl9QaHlzaWNhbCggY29uc3QgaW4gdmVjMyByYWRpYW5jZSwgY29uc3QgaW4gdmVjMyBjbGVhckNvYXRSYWRpYW5jZSwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgY29uc3QgaW4gUGh5c2ljYWxNYXRlcmlhbCBtYXRlcmlhbCwgaW5vdXQgUmVmbGVjdGVkTGlnaHQgcmVmbGVjdGVkTGlnaHQgKSB7XG5cdCNpZm5kZWYgU1RBTkRBUkRcblx0XHRmbG9hdCBkb3ROViA9IHNhdHVyYXRlKCBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgZ2VvbWV0cnkudmlld0RpciApICk7XG5cdFx0ZmxvYXQgZG90TkwgPSBkb3ROVjtcblx0XHRmbG9hdCBjbGVhckNvYXRESFIgPSBtYXRlcmlhbC5jbGVhckNvYXQgKiBjbGVhckNvYXRESFJBcHByb3goIG1hdGVyaWFsLmNsZWFyQ29hdFJvdWdobmVzcywgZG90TkwgKTtcblx0I2Vsc2Vcblx0XHRmbG9hdCBjbGVhckNvYXRESFIgPSAwLjA7XG5cdCNlbmRpZlxuXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdFNwZWN1bGFyICs9ICggMS4wIC0gY2xlYXJDb2F0REhSICkgKiByYWRpYW5jZSAqIEJSREZfU3BlY3VsYXJfR0dYX0Vudmlyb25tZW50KCBnZW9tZXRyeSwgbWF0ZXJpYWwuc3BlY3VsYXJDb2xvciwgbWF0ZXJpYWwuc3BlY3VsYXJSb3VnaG5lc3MgKTtcblx0I2lmbmRlZiBTVEFOREFSRFxuXHRcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0U3BlY3VsYXIgKz0gY2xlYXJDb2F0UmFkaWFuY2UgKiBtYXRlcmlhbC5jbGVhckNvYXQgKiBCUkRGX1NwZWN1bGFyX0dHWF9FbnZpcm9ubWVudCggZ2VvbWV0cnksIHZlYzMoIERFRkFVTFRfU1BFQ1VMQVJfQ09FRkZJQ0lFTlQgKSwgbWF0ZXJpYWwuY2xlYXJDb2F0Um91Z2huZXNzICk7XG5cdCNlbmRpZlxufVxuI2RlZmluZSBSRV9EaXJlY3RcdFx0XHRcdFJFX0RpcmVjdF9QaHlzaWNhbFxuI2RlZmluZSBSRV9EaXJlY3RfUmVjdEFyZWFcdFx0UkVfRGlyZWN0X1JlY3RBcmVhX1BoeXNpY2FsXG4jZGVmaW5lIFJFX0luZGlyZWN0RGlmZnVzZVx0XHRSRV9JbmRpcmVjdERpZmZ1c2VfUGh5c2ljYWxcbiNkZWZpbmUgUkVfSW5kaXJlY3RTcGVjdWxhclx0XHRSRV9JbmRpcmVjdFNwZWN1bGFyX1BoeXNpY2FsXG4jZGVmaW5lIE1hdGVyaWFsX0JsaW5uU2hpbmluZXNzRXhwb25lbnQoIG1hdGVyaWFsICkgICBHR1hSb3VnaG5lc3NUb0JsaW5uRXhwb25lbnQoIG1hdGVyaWFsLnNwZWN1bGFyUm91Z2huZXNzIClcbiNkZWZpbmUgTWF0ZXJpYWxfQ2xlYXJDb2F0X0JsaW5uU2hpbmluZXNzRXhwb25lbnQoIG1hdGVyaWFsICkgICBHR1hSb3VnaG5lc3NUb0JsaW5uRXhwb25lbnQoIG1hdGVyaWFsLmNsZWFyQ29hdFJvdWdobmVzcyApXG5mbG9hdCBjb21wdXRlU3BlY3VsYXJPY2NsdXNpb24oIGNvbnN0IGluIGZsb2F0IGRvdE5WLCBjb25zdCBpbiBmbG9hdCBhbWJpZW50T2NjbHVzaW9uLCBjb25zdCBpbiBmbG9hdCByb3VnaG5lc3MgKSB7XG5cdHJldHVybiBzYXR1cmF0ZSggcG93KCBkb3ROViArIGFtYmllbnRPY2NsdXNpb24sIGV4cDIoIC0gMTYuMCAqIHJvdWdobmVzcyAtIDEuMCApICkgLSAxLjAgKyBhbWJpZW50T2NjbHVzaW9uICk7XG59XG4iO3ZhciBsaWdodHNfdGVtcGxhdGU9IlxuR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeTtcbmdlb21ldHJ5LnBvc2l0aW9uID0gLSB2Vmlld1Bvc2l0aW9uO1xuZ2VvbWV0cnkubm9ybWFsID0gbm9ybWFsO1xuZ2VvbWV0cnkudmlld0RpciA9IG5vcm1hbGl6ZSggdlZpZXdQb3NpdGlvbiApO1xuSW5jaWRlbnRMaWdodCBkaXJlY3RMaWdodDtcbiNpZiAoIE5VTV9QT0lOVF9MSUdIVFMgPiAwICkgJiYgZGVmaW5lZCggUkVfRGlyZWN0IClcblx0UG9pbnRMaWdodCBwb2ludExpZ2h0O1xuXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fUE9JTlRfTElHSFRTOyBpICsrICkge1xuXHRcdHBvaW50TGlnaHQgPSBwb2ludExpZ2h0c1sgaSBdO1xuXHRcdGdldFBvaW50RGlyZWN0TGlnaHRJcnJhZGlhbmNlKCBwb2ludExpZ2h0LCBnZW9tZXRyeSwgZGlyZWN0TGlnaHQgKTtcblx0XHQjaWZkZWYgVVNFX1NIQURPV01BUFxuXHRcdGRpcmVjdExpZ2h0LmNvbG9yICo9IGFsbCggYnZlYzIoIHBvaW50TGlnaHQuc2hhZG93LCBkaXJlY3RMaWdodC52aXNpYmxlICkgKSA/IGdldFBvaW50U2hhZG93KCBwb2ludFNoYWRvd01hcFsgaSBdLCBwb2ludExpZ2h0LnNoYWRvd01hcFNpemUsIHBvaW50TGlnaHQuc2hhZG93QmlhcywgcG9pbnRMaWdodC5zaGFkb3dSYWRpdXMsIHZQb2ludFNoYWRvd0Nvb3JkWyBpIF0sIHBvaW50TGlnaHQuc2hhZG93Q2FtZXJhTmVhciwgcG9pbnRMaWdodC5zaGFkb3dDYW1lcmFGYXIgKSA6IDEuMDtcblx0XHQjZW5kaWZcblx0XHRSRV9EaXJlY3QoIGRpcmVjdExpZ2h0LCBnZW9tZXRyeSwgbWF0ZXJpYWwsIHJlZmxlY3RlZExpZ2h0ICk7XG5cdH1cbiNlbmRpZlxuI2lmICggTlVNX1NQT1RfTElHSFRTID4gMCApICYmIGRlZmluZWQoIFJFX0RpcmVjdCApXG5cdFNwb3RMaWdodCBzcG90TGlnaHQ7XG5cdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9TUE9UX0xJR0hUUzsgaSArKyApIHtcblx0XHRzcG90TGlnaHQgPSBzcG90TGlnaHRzWyBpIF07XG5cdFx0Z2V0U3BvdERpcmVjdExpZ2h0SXJyYWRpYW5jZSggc3BvdExpZ2h0LCBnZW9tZXRyeSwgZGlyZWN0TGlnaHQgKTtcblx0XHQjaWZkZWYgVVNFX1NIQURPV01BUFxuXHRcdGRpcmVjdExpZ2h0LmNvbG9yICo9IGFsbCggYnZlYzIoIHNwb3RMaWdodC5zaGFkb3csIGRpcmVjdExpZ2h0LnZpc2libGUgKSApID8gZ2V0U2hhZG93KCBzcG90U2hhZG93TWFwWyBpIF0sIHNwb3RMaWdodC5zaGFkb3dNYXBTaXplLCBzcG90TGlnaHQuc2hhZG93Qmlhcywgc3BvdExpZ2h0LnNoYWRvd1JhZGl1cywgdlNwb3RTaGFkb3dDb29yZFsgaSBdICkgOiAxLjA7XG5cdFx0I2VuZGlmXG5cdFx0UkVfRGlyZWN0KCBkaXJlY3RMaWdodCwgZ2VvbWV0cnksIG1hdGVyaWFsLCByZWZsZWN0ZWRMaWdodCApO1xuXHR9XG4jZW5kaWZcbiNpZiAoIE5VTV9ESVJfTElHSFRTID4gMCApICYmIGRlZmluZWQoIFJFX0RpcmVjdCApXG5cdERpcmVjdGlvbmFsTGlnaHQgZGlyZWN0aW9uYWxMaWdodDtcblx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX0RJUl9MSUdIVFM7IGkgKysgKSB7XG5cdFx0ZGlyZWN0aW9uYWxMaWdodCA9IGRpcmVjdGlvbmFsTGlnaHRzWyBpIF07XG5cdFx0Z2V0RGlyZWN0aW9uYWxEaXJlY3RMaWdodElycmFkaWFuY2UoIGRpcmVjdGlvbmFsTGlnaHQsIGdlb21ldHJ5LCBkaXJlY3RMaWdodCApO1xuXHRcdCNpZmRlZiBVU0VfU0hBRE9XTUFQXG5cdFx0ZGlyZWN0TGlnaHQuY29sb3IgKj0gYWxsKCBidmVjMiggZGlyZWN0aW9uYWxMaWdodC5zaGFkb3csIGRpcmVjdExpZ2h0LnZpc2libGUgKSApID8gZ2V0U2hhZG93KCBkaXJlY3Rpb25hbFNoYWRvd01hcFsgaSBdLCBkaXJlY3Rpb25hbExpZ2h0LnNoYWRvd01hcFNpemUsIGRpcmVjdGlvbmFsTGlnaHQuc2hhZG93QmlhcywgZGlyZWN0aW9uYWxMaWdodC5zaGFkb3dSYWRpdXMsIHZEaXJlY3Rpb25hbFNoYWRvd0Nvb3JkWyBpIF0gKSA6IDEuMDtcblx0XHQjZW5kaWZcblx0XHRSRV9EaXJlY3QoIGRpcmVjdExpZ2h0LCBnZW9tZXRyeSwgbWF0ZXJpYWwsIHJlZmxlY3RlZExpZ2h0ICk7XG5cdH1cbiNlbmRpZlxuI2lmICggTlVNX1JFQ1RfQVJFQV9MSUdIVFMgPiAwICkgJiYgZGVmaW5lZCggUkVfRGlyZWN0X1JlY3RBcmVhIClcblx0UmVjdEFyZWFMaWdodCByZWN0QXJlYUxpZ2h0O1xuXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fUkVDVF9BUkVBX0xJR0hUUzsgaSArKyApIHtcblx0XHRyZWN0QXJlYUxpZ2h0ID0gcmVjdEFyZWFMaWdodHNbIGkgXTtcblx0XHRSRV9EaXJlY3RfUmVjdEFyZWEoIHJlY3RBcmVhTGlnaHQsIGdlb21ldHJ5LCBtYXRlcmlhbCwgcmVmbGVjdGVkTGlnaHQgKTtcblx0fVxuI2VuZGlmXG4jaWYgZGVmaW5lZCggUkVfSW5kaXJlY3REaWZmdXNlIClcblx0dmVjMyBpcnJhZGlhbmNlID0gZ2V0QW1iaWVudExpZ2h0SXJyYWRpYW5jZSggYW1iaWVudExpZ2h0Q29sb3IgKTtcblx0I2lmZGVmIFVTRV9MSUdIVE1BUFxuXHRcdHZlYzMgbGlnaHRNYXBJcnJhZGlhbmNlID0gdGV4dHVyZTJEKCBsaWdodE1hcCwgdlV2MiApLnh5eiAqIGxpZ2h0TWFwSW50ZW5zaXR5O1xuXHRcdCNpZm5kZWYgUEhZU0lDQUxMWV9DT1JSRUNUX0xJR0hUU1xuXHRcdFx0bGlnaHRNYXBJcnJhZGlhbmNlICo9IFBJO1xuXHRcdCNlbmRpZlxuXHRcdGlycmFkaWFuY2UgKz0gbGlnaHRNYXBJcnJhZGlhbmNlO1xuXHQjZW5kaWZcblx0I2lmICggTlVNX0hFTUlfTElHSFRTID4gMCApXG5cdFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX0hFTUlfTElHSFRTOyBpICsrICkge1xuXHRcdFx0aXJyYWRpYW5jZSArPSBnZXRIZW1pc3BoZXJlTGlnaHRJcnJhZGlhbmNlKCBoZW1pc3BoZXJlTGlnaHRzWyBpIF0sIGdlb21ldHJ5ICk7XG5cdFx0fVxuXHQjZW5kaWZcblx0I2lmIGRlZmluZWQoIFVTRV9FTlZNQVAgKSAmJiBkZWZpbmVkKCBQSFlTSUNBTCApICYmIGRlZmluZWQoIEVOVk1BUF9UWVBFX0NVQkVfVVYgKVxuXHRcdGlycmFkaWFuY2UgKz0gZ2V0TGlnaHRQcm9iZUluZGlyZWN0SXJyYWRpYW5jZSggZ2VvbWV0cnksIDggKTtcblx0I2VuZGlmXG5cdFJFX0luZGlyZWN0RGlmZnVzZSggaXJyYWRpYW5jZSwgZ2VvbWV0cnksIG1hdGVyaWFsLCByZWZsZWN0ZWRMaWdodCApO1xuI2VuZGlmXG4jaWYgZGVmaW5lZCggVVNFX0VOVk1BUCApICYmIGRlZmluZWQoIFJFX0luZGlyZWN0U3BlY3VsYXIgKVxuXHR2ZWMzIHJhZGlhbmNlID0gZ2V0TGlnaHRQcm9iZUluZGlyZWN0UmFkaWFuY2UoIGdlb21ldHJ5LCBNYXRlcmlhbF9CbGlublNoaW5pbmVzc0V4cG9uZW50KCBtYXRlcmlhbCApLCA4ICk7XG5cdCNpZm5kZWYgU1RBTkRBUkRcblx0XHR2ZWMzIGNsZWFyQ29hdFJhZGlhbmNlID0gZ2V0TGlnaHRQcm9iZUluZGlyZWN0UmFkaWFuY2UoIGdlb21ldHJ5LCBNYXRlcmlhbF9DbGVhckNvYXRfQmxpbm5TaGluaW5lc3NFeHBvbmVudCggbWF0ZXJpYWwgKSwgOCApO1xuXHQjZWxzZVxuXHRcdHZlYzMgY2xlYXJDb2F0UmFkaWFuY2UgPSB2ZWMzKCAwLjAgKTtcblx0I2VuZGlmXG5cdFJFX0luZGlyZWN0U3BlY3VsYXIoIHJhZGlhbmNlLCBjbGVhckNvYXRSYWRpYW5jZSwgZ2VvbWV0cnksIG1hdGVyaWFsLCByZWZsZWN0ZWRMaWdodCApO1xuI2VuZGlmXG4iO3ZhciBsb2dkZXB0aGJ1Zl9mcmFnbWVudD0iI2lmIGRlZmluZWQoIFVTRV9MT0dERVBUSEJVRiApICYmIGRlZmluZWQoIFVTRV9MT0dERVBUSEJVRl9FWFQgKVxuXHRnbF9GcmFnRGVwdGhFWFQgPSBsb2cyKCB2RnJhZ0RlcHRoICkgKiBsb2dEZXB0aEJ1ZkZDICogMC41O1xuI2VuZGlmIjt2YXIgbG9nZGVwdGhidWZfcGFyc19mcmFnbWVudD0iI2lmZGVmIFVTRV9MT0dERVBUSEJVRlxuXHR1bmlmb3JtIGZsb2F0IGxvZ0RlcHRoQnVmRkM7XG5cdCNpZmRlZiBVU0VfTE9HREVQVEhCVUZfRVhUXG5cdFx0dmFyeWluZyBmbG9hdCB2RnJhZ0RlcHRoO1xuXHQjZW5kaWZcbiNlbmRpZlxuIjt2YXIgbG9nZGVwdGhidWZfcGFyc192ZXJ0ZXg9IiNpZmRlZiBVU0VfTE9HREVQVEhCVUZcblx0I2lmZGVmIFVTRV9MT0dERVBUSEJVRl9FWFRcblx0XHR2YXJ5aW5nIGZsb2F0IHZGcmFnRGVwdGg7XG5cdCNlbmRpZlxuXHR1bmlmb3JtIGZsb2F0IGxvZ0RlcHRoQnVmRkM7XG4jZW5kaWYiO3ZhciBsb2dkZXB0aGJ1Zl92ZXJ0ZXg9IiNpZmRlZiBVU0VfTE9HREVQVEhCVUZcblx0I2lmZGVmIFVTRV9MT0dERVBUSEJVRl9FWFRcblx0XHR2RnJhZ0RlcHRoID0gMS4wICsgZ2xfUG9zaXRpb24udztcblx0I2Vsc2Vcblx0XHRnbF9Qb3NpdGlvbi56ID0gbG9nMiggbWF4KCBFUFNJTE9OLCBnbF9Qb3NpdGlvbi53ICsgMS4wICkgKSAqIGxvZ0RlcHRoQnVmRkMgLSAxLjA7XG5cdFx0Z2xfUG9zaXRpb24ueiAqPSBnbF9Qb3NpdGlvbi53O1xuXHQjZW5kaWZcbiNlbmRpZlxuIjt2YXIgbWFwX2ZyYWdtZW50PSIjaWZkZWYgVVNFX01BUFxuXHR2ZWM0IHRleGVsQ29sb3IgPSB0ZXh0dXJlMkQoIG1hcCwgdlV2ICk7XG5cdHRleGVsQ29sb3IgPSBtYXBUZXhlbFRvTGluZWFyKCB0ZXhlbENvbG9yICk7XG5cdGRpZmZ1c2VDb2xvciAqPSB0ZXhlbENvbG9yO1xuI2VuZGlmXG4iO3ZhciBtYXBfcGFyc19mcmFnbWVudD0iI2lmZGVmIFVTRV9NQVBcblx0dW5pZm9ybSBzYW1wbGVyMkQgbWFwO1xuI2VuZGlmXG4iO3ZhciBtYXBfcGFydGljbGVfZnJhZ21lbnQ9IiNpZmRlZiBVU0VfTUFQXG5cdHZlYzIgdXYgPSAoIHV2VHJhbnNmb3JtICogdmVjMyggZ2xfUG9pbnRDb29yZC54LCAxLjAgLSBnbF9Qb2ludENvb3JkLnksIDEgKSApLnh5O1xuXHR2ZWM0IG1hcFRleGVsID0gdGV4dHVyZTJEKCBtYXAsIHV2ICk7XG5cdGRpZmZ1c2VDb2xvciAqPSBtYXBUZXhlbFRvTGluZWFyKCBtYXBUZXhlbCApO1xuI2VuZGlmXG4iO3ZhciBtYXBfcGFydGljbGVfcGFyc19mcmFnbWVudD0iI2lmZGVmIFVTRV9NQVBcblx0dW5pZm9ybSBtYXQzIHV2VHJhbnNmb3JtO1xuXHR1bmlmb3JtIHNhbXBsZXIyRCBtYXA7XG4jZW5kaWZcbiI7dmFyIG1ldGFsbmVzc21hcF9mcmFnbWVudD0iZmxvYXQgbWV0YWxuZXNzRmFjdG9yID0gbWV0YWxuZXNzO1xuI2lmZGVmIFVTRV9NRVRBTE5FU1NNQVBcblx0dmVjNCB0ZXhlbE1ldGFsbmVzcyA9IHRleHR1cmUyRCggbWV0YWxuZXNzTWFwLCB2VXYgKTtcblx0bWV0YWxuZXNzRmFjdG9yICo9IHRleGVsTWV0YWxuZXNzLmI7XG4jZW5kaWZcbiI7dmFyIG1ldGFsbmVzc21hcF9wYXJzX2ZyYWdtZW50PSIjaWZkZWYgVVNFX01FVEFMTkVTU01BUFxuXHR1bmlmb3JtIHNhbXBsZXIyRCBtZXRhbG5lc3NNYXA7XG4jZW5kaWYiO3ZhciBtb3JwaG5vcm1hbF92ZXJ0ZXg9IiNpZmRlZiBVU0VfTU9SUEhOT1JNQUxTXG5cdG9iamVjdE5vcm1hbCArPSAoIG1vcnBoTm9ybWFsMCAtIG5vcm1hbCApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyAwIF07XG5cdG9iamVjdE5vcm1hbCArPSAoIG1vcnBoTm9ybWFsMSAtIG5vcm1hbCApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyAxIF07XG5cdG9iamVjdE5vcm1hbCArPSAoIG1vcnBoTm9ybWFsMiAtIG5vcm1hbCApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyAyIF07XG5cdG9iamVjdE5vcm1hbCArPSAoIG1vcnBoTm9ybWFsMyAtIG5vcm1hbCApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyAzIF07XG4jZW5kaWZcbiI7dmFyIG1vcnBodGFyZ2V0X3BhcnNfdmVydGV4PSIjaWZkZWYgVVNFX01PUlBIVEFSR0VUU1xuXHQjaWZuZGVmIFVTRV9NT1JQSE5PUk1BTFNcblx0dW5pZm9ybSBmbG9hdCBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDggXTtcblx0I2Vsc2Vcblx0dW5pZm9ybSBmbG9hdCBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDQgXTtcblx0I2VuZGlmXG4jZW5kaWYiO3ZhciBtb3JwaHRhcmdldF92ZXJ0ZXg9IiNpZmRlZiBVU0VfTU9SUEhUQVJHRVRTXG5cdHRyYW5zZm9ybWVkICs9ICggbW9ycGhUYXJnZXQwIC0gcG9zaXRpb24gKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgMCBdO1xuXHR0cmFuc2Zvcm1lZCArPSAoIG1vcnBoVGFyZ2V0MSAtIHBvc2l0aW9uICkgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDEgXTtcblx0dHJhbnNmb3JtZWQgKz0gKCBtb3JwaFRhcmdldDIgLSBwb3NpdGlvbiApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyAyIF07XG5cdHRyYW5zZm9ybWVkICs9ICggbW9ycGhUYXJnZXQzIC0gcG9zaXRpb24gKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgMyBdO1xuXHQjaWZuZGVmIFVTRV9NT1JQSE5PUk1BTFNcblx0dHJhbnNmb3JtZWQgKz0gKCBtb3JwaFRhcmdldDQgLSBwb3NpdGlvbiApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyA0IF07XG5cdHRyYW5zZm9ybWVkICs9ICggbW9ycGhUYXJnZXQ1IC0gcG9zaXRpb24gKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgNSBdO1xuXHR0cmFuc2Zvcm1lZCArPSAoIG1vcnBoVGFyZ2V0NiAtIHBvc2l0aW9uICkgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDYgXTtcblx0dHJhbnNmb3JtZWQgKz0gKCBtb3JwaFRhcmdldDcgLSBwb3NpdGlvbiApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyA3IF07XG5cdCNlbmRpZlxuI2VuZGlmXG4iO3ZhciBub3JtYWxfZnJhZ21lbnQ9IiNpZmRlZiBGTEFUX1NIQURFRFxuXHR2ZWMzIGZkeCA9IHZlYzMoIGRGZHgoIHZWaWV3UG9zaXRpb24ueCApLCBkRmR4KCB2Vmlld1Bvc2l0aW9uLnkgKSwgZEZkeCggdlZpZXdQb3NpdGlvbi56ICkgKTtcblx0dmVjMyBmZHkgPSB2ZWMzKCBkRmR5KCB2Vmlld1Bvc2l0aW9uLnggKSwgZEZkeSggdlZpZXdQb3NpdGlvbi55ICksIGRGZHkoIHZWaWV3UG9zaXRpb24ueiApICk7XG5cdHZlYzMgbm9ybWFsID0gbm9ybWFsaXplKCBjcm9zcyggZmR4LCBmZHkgKSApO1xuI2Vsc2Vcblx0dmVjMyBub3JtYWwgPSBub3JtYWxpemUoIHZOb3JtYWwgKTtcblx0I2lmZGVmIERPVUJMRV9TSURFRFxuXHRcdG5vcm1hbCA9IG5vcm1hbCAqICggZmxvYXQoIGdsX0Zyb250RmFjaW5nICkgKiAyLjAgLSAxLjAgKTtcblx0I2VuZGlmXG4jZW5kaWZcbiNpZmRlZiBVU0VfTk9STUFMTUFQXG5cdG5vcm1hbCA9IHBlcnR1cmJOb3JtYWwyQXJiKCAtdlZpZXdQb3NpdGlvbiwgbm9ybWFsICk7XG4jZWxpZiBkZWZpbmVkKCBVU0VfQlVNUE1BUCApXG5cdG5vcm1hbCA9IHBlcnR1cmJOb3JtYWxBcmIoIC12Vmlld1Bvc2l0aW9uLCBub3JtYWwsIGRIZHh5X2Z3ZCgpICk7XG4jZW5kaWZcbiI7dmFyIG5vcm1hbG1hcF9wYXJzX2ZyYWdtZW50PSIjaWZkZWYgVVNFX05PUk1BTE1BUFxuXHR1bmlmb3JtIHNhbXBsZXIyRCBub3JtYWxNYXA7XG5cdHVuaWZvcm0gdmVjMiBub3JtYWxTY2FsZTtcblx0dmVjMyBwZXJ0dXJiTm9ybWFsMkFyYiggdmVjMyBleWVfcG9zLCB2ZWMzIHN1cmZfbm9ybSApIHtcblx0XHR2ZWMzIHEwID0gdmVjMyggZEZkeCggZXllX3Bvcy54ICksIGRGZHgoIGV5ZV9wb3MueSApLCBkRmR4KCBleWVfcG9zLnogKSApO1xuXHRcdHZlYzMgcTEgPSB2ZWMzKCBkRmR5KCBleWVfcG9zLnggKSwgZEZkeSggZXllX3Bvcy55ICksIGRGZHkoIGV5ZV9wb3MueiApICk7XG5cdFx0dmVjMiBzdDAgPSBkRmR4KCB2VXYuc3QgKTtcblx0XHR2ZWMyIHN0MSA9IGRGZHkoIHZVdi5zdCApO1xuXHRcdHZlYzMgUyA9IG5vcm1hbGl6ZSggcTAgKiBzdDEudCAtIHExICogc3QwLnQgKTtcblx0XHR2ZWMzIFQgPSBub3JtYWxpemUoIC1xMCAqIHN0MS5zICsgcTEgKiBzdDAucyApO1xuXHRcdHZlYzMgTiA9IG5vcm1hbGl6ZSggc3VyZl9ub3JtICk7XG5cdFx0dmVjMyBtYXBOID0gdGV4dHVyZTJEKCBub3JtYWxNYXAsIHZVdiApLnh5eiAqIDIuMCAtIDEuMDtcblx0XHRtYXBOLnh5ID0gbm9ybWFsU2NhbGUgKiBtYXBOLnh5O1xuXHRcdG1hdDMgdHNuID0gbWF0MyggUywgVCwgTiApO1xuXHRcdHJldHVybiBub3JtYWxpemUoIHRzbiAqIG1hcE4gKTtcblx0fVxuI2VuZGlmXG4iO3ZhciBwYWNraW5nPSJ2ZWMzIHBhY2tOb3JtYWxUb1JHQiggY29uc3QgaW4gdmVjMyBub3JtYWwgKSB7XG5cdHJldHVybiBub3JtYWxpemUoIG5vcm1hbCApICogMC41ICsgMC41O1xufVxudmVjMyB1bnBhY2tSR0JUb05vcm1hbCggY29uc3QgaW4gdmVjMyByZ2IgKSB7XG5cdHJldHVybiAyLjAgKiByZ2IueHl6IC0gMS4wO1xufVxuY29uc3QgZmxvYXQgUGFja1Vwc2NhbGUgPSAyNTYuIC8gMjU1Ljtjb25zdCBmbG9hdCBVbnBhY2tEb3duc2NhbGUgPSAyNTUuIC8gMjU2LjtcbmNvbnN0IHZlYzMgUGFja0ZhY3RvcnMgPSB2ZWMzKCAyNTYuICogMjU2LiAqIDI1Ni4sIDI1Ni4gKiAyNTYuLCAgMjU2LiApO1xuY29uc3QgdmVjNCBVbnBhY2tGYWN0b3JzID0gVW5wYWNrRG93bnNjYWxlIC8gdmVjNCggUGFja0ZhY3RvcnMsIDEuICk7XG5jb25zdCBmbG9hdCBTaGlmdFJpZ2h0OCA9IDEuIC8gMjU2LjtcbnZlYzQgcGFja0RlcHRoVG9SR0JBKCBjb25zdCBpbiBmbG9hdCB2ICkge1xuXHR2ZWM0IHIgPSB2ZWM0KCBmcmFjdCggdiAqIFBhY2tGYWN0b3JzICksIHYgKTtcblx0ci55encgLT0gci54eXogKiBTaGlmdFJpZ2h0ODtcdHJldHVybiByICogUGFja1Vwc2NhbGU7XG59XG5mbG9hdCB1bnBhY2tSR0JBVG9EZXB0aCggY29uc3QgaW4gdmVjNCB2ICkge1xuXHRyZXR1cm4gZG90KCB2LCBVbnBhY2tGYWN0b3JzICk7XG59XG5mbG9hdCB2aWV3WlRvT3J0aG9ncmFwaGljRGVwdGgoIGNvbnN0IGluIGZsb2F0IHZpZXdaLCBjb25zdCBpbiBmbG9hdCBuZWFyLCBjb25zdCBpbiBmbG9hdCBmYXIgKSB7XG5cdHJldHVybiAoIHZpZXdaICsgbmVhciApIC8gKCBuZWFyIC0gZmFyICk7XG59XG5mbG9hdCBvcnRob2dyYXBoaWNEZXB0aFRvVmlld1ooIGNvbnN0IGluIGZsb2F0IGxpbmVhckNsaXBaLCBjb25zdCBpbiBmbG9hdCBuZWFyLCBjb25zdCBpbiBmbG9hdCBmYXIgKSB7XG5cdHJldHVybiBsaW5lYXJDbGlwWiAqICggbmVhciAtIGZhciApIC0gbmVhcjtcbn1cbmZsb2F0IHZpZXdaVG9QZXJzcGVjdGl2ZURlcHRoKCBjb25zdCBpbiBmbG9hdCB2aWV3WiwgY29uc3QgaW4gZmxvYXQgbmVhciwgY29uc3QgaW4gZmxvYXQgZmFyICkge1xuXHRyZXR1cm4gKCggbmVhciArIHZpZXdaICkgKiBmYXIgKSAvICgoIGZhciAtIG5lYXIgKSAqIHZpZXdaICk7XG59XG5mbG9hdCBwZXJzcGVjdGl2ZURlcHRoVG9WaWV3WiggY29uc3QgaW4gZmxvYXQgaW52Q2xpcFosIGNvbnN0IGluIGZsb2F0IG5lYXIsIGNvbnN0IGluIGZsb2F0IGZhciApIHtcblx0cmV0dXJuICggbmVhciAqIGZhciApIC8gKCAoIGZhciAtIG5lYXIgKSAqIGludkNsaXBaIC0gZmFyICk7XG59XG4iO3ZhciBwcmVtdWx0aXBsaWVkX2FscGhhX2ZyYWdtZW50PSIjaWZkZWYgUFJFTVVMVElQTElFRF9BTFBIQVxuXHRnbF9GcmFnQ29sb3IucmdiICo9IGdsX0ZyYWdDb2xvci5hO1xuI2VuZGlmXG4iO3ZhciBwcm9qZWN0X3ZlcnRleD0idmVjNCBtdlBvc2l0aW9uID0gbW9kZWxWaWV3TWF0cml4ICogdmVjNCggdHJhbnNmb3JtZWQsIDEuMCApO1xuZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbXZQb3NpdGlvbjtcbiI7dmFyIGRpdGhlcmluZ19mcmFnbWVudD0iI2lmIGRlZmluZWQoIERJVEhFUklORyApXG4gIGdsX0ZyYWdDb2xvci5yZ2IgPSBkaXRoZXJpbmcoIGdsX0ZyYWdDb2xvci5yZ2IgKTtcbiNlbmRpZlxuIjt2YXIgZGl0aGVyaW5nX3BhcnNfZnJhZ21lbnQ9IiNpZiBkZWZpbmVkKCBESVRIRVJJTkcgKVxuXHR2ZWMzIGRpdGhlcmluZyggdmVjMyBjb2xvciApIHtcblx0XHRmbG9hdCBncmlkX3Bvc2l0aW9uID0gcmFuZCggZ2xfRnJhZ0Nvb3JkLnh5ICk7XG5cdFx0dmVjMyBkaXRoZXJfc2hpZnRfUkdCID0gdmVjMyggMC4yNSAvIDI1NS4wLCAtMC4yNSAvIDI1NS4wLCAwLjI1IC8gMjU1LjAgKTtcblx0XHRkaXRoZXJfc2hpZnRfUkdCID0gbWl4KCAyLjAgKiBkaXRoZXJfc2hpZnRfUkdCLCAtMi4wICogZGl0aGVyX3NoaWZ0X1JHQiwgZ3JpZF9wb3NpdGlvbiApO1xuXHRcdHJldHVybiBjb2xvciArIGRpdGhlcl9zaGlmdF9SR0I7XG5cdH1cbiNlbmRpZlxuIjt2YXIgcm91Z2huZXNzbWFwX2ZyYWdtZW50PSJmbG9hdCByb3VnaG5lc3NGYWN0b3IgPSByb3VnaG5lc3M7XG4jaWZkZWYgVVNFX1JPVUdITkVTU01BUFxuXHR2ZWM0IHRleGVsUm91Z2huZXNzID0gdGV4dHVyZTJEKCByb3VnaG5lc3NNYXAsIHZVdiApO1xuXHRyb3VnaG5lc3NGYWN0b3IgKj0gdGV4ZWxSb3VnaG5lc3MuZztcbiNlbmRpZlxuIjt2YXIgcm91Z2huZXNzbWFwX3BhcnNfZnJhZ21lbnQ9IiNpZmRlZiBVU0VfUk9VR0hORVNTTUFQXG5cdHVuaWZvcm0gc2FtcGxlcjJEIHJvdWdobmVzc01hcDtcbiNlbmRpZiI7dmFyIHNoYWRvd21hcF9wYXJzX2ZyYWdtZW50PSIjaWZkZWYgVVNFX1NIQURPV01BUFxuXHQjaWYgTlVNX0RJUl9MSUdIVFMgPiAwXG5cdFx0dW5pZm9ybSBzYW1wbGVyMkQgZGlyZWN0aW9uYWxTaGFkb3dNYXBbIE5VTV9ESVJfTElHSFRTIF07XG5cdFx0dmFyeWluZyB2ZWM0IHZEaXJlY3Rpb25hbFNoYWRvd0Nvb3JkWyBOVU1fRElSX0xJR0hUUyBdO1xuXHQjZW5kaWZcblx0I2lmIE5VTV9TUE9UX0xJR0hUUyA+IDBcblx0XHR1bmlmb3JtIHNhbXBsZXIyRCBzcG90U2hhZG93TWFwWyBOVU1fU1BPVF9MSUdIVFMgXTtcblx0XHR2YXJ5aW5nIHZlYzQgdlNwb3RTaGFkb3dDb29yZFsgTlVNX1NQT1RfTElHSFRTIF07XG5cdCNlbmRpZlxuXHQjaWYgTlVNX1BPSU5UX0xJR0hUUyA+IDBcblx0XHR1bmlmb3JtIHNhbXBsZXIyRCBwb2ludFNoYWRvd01hcFsgTlVNX1BPSU5UX0xJR0hUUyBdO1xuXHRcdHZhcnlpbmcgdmVjNCB2UG9pbnRTaGFkb3dDb29yZFsgTlVNX1BPSU5UX0xJR0hUUyBdO1xuXHQjZW5kaWZcblx0ZmxvYXQgdGV4dHVyZTJEQ29tcGFyZSggc2FtcGxlcjJEIGRlcHRocywgdmVjMiB1diwgZmxvYXQgY29tcGFyZSApIHtcblx0XHRyZXR1cm4gc3RlcCggY29tcGFyZSwgdW5wYWNrUkdCQVRvRGVwdGgoIHRleHR1cmUyRCggZGVwdGhzLCB1diApICkgKTtcblx0fVxuXHRmbG9hdCB0ZXh0dXJlMkRTaGFkb3dMZXJwKCBzYW1wbGVyMkQgZGVwdGhzLCB2ZWMyIHNpemUsIHZlYzIgdXYsIGZsb2F0IGNvbXBhcmUgKSB7XG5cdFx0Y29uc3QgdmVjMiBvZmZzZXQgPSB2ZWMyKCAwLjAsIDEuMCApO1xuXHRcdHZlYzIgdGV4ZWxTaXplID0gdmVjMiggMS4wICkgLyBzaXplO1xuXHRcdHZlYzIgY2VudHJvaWRVViA9IGZsb29yKCB1diAqIHNpemUgKyAwLjUgKSAvIHNpemU7XG5cdFx0ZmxvYXQgbGIgPSB0ZXh0dXJlMkRDb21wYXJlKCBkZXB0aHMsIGNlbnRyb2lkVVYgKyB0ZXhlbFNpemUgKiBvZmZzZXQueHgsIGNvbXBhcmUgKTtcblx0XHRmbG9hdCBsdCA9IHRleHR1cmUyRENvbXBhcmUoIGRlcHRocywgY2VudHJvaWRVViArIHRleGVsU2l6ZSAqIG9mZnNldC54eSwgY29tcGFyZSApO1xuXHRcdGZsb2F0IHJiID0gdGV4dHVyZTJEQ29tcGFyZSggZGVwdGhzLCBjZW50cm9pZFVWICsgdGV4ZWxTaXplICogb2Zmc2V0Lnl4LCBjb21wYXJlICk7XG5cdFx0ZmxvYXQgcnQgPSB0ZXh0dXJlMkRDb21wYXJlKCBkZXB0aHMsIGNlbnRyb2lkVVYgKyB0ZXhlbFNpemUgKiBvZmZzZXQueXksIGNvbXBhcmUgKTtcblx0XHR2ZWMyIGYgPSBmcmFjdCggdXYgKiBzaXplICsgMC41ICk7XG5cdFx0ZmxvYXQgYSA9IG1peCggbGIsIGx0LCBmLnkgKTtcblx0XHRmbG9hdCBiID0gbWl4KCByYiwgcnQsIGYueSApO1xuXHRcdGZsb2F0IGMgPSBtaXgoIGEsIGIsIGYueCApO1xuXHRcdHJldHVybiBjO1xuXHR9XG5cdGZsb2F0IGdldFNoYWRvdyggc2FtcGxlcjJEIHNoYWRvd01hcCwgdmVjMiBzaGFkb3dNYXBTaXplLCBmbG9hdCBzaGFkb3dCaWFzLCBmbG9hdCBzaGFkb3dSYWRpdXMsIHZlYzQgc2hhZG93Q29vcmQgKSB7XG5cdFx0ZmxvYXQgc2hhZG93ID0gMS4wO1xuXHRcdHNoYWRvd0Nvb3JkLnh5eiAvPSBzaGFkb3dDb29yZC53O1xuXHRcdHNoYWRvd0Nvb3JkLnogKz0gc2hhZG93Qmlhcztcblx0XHRidmVjNCBpbkZydXN0dW1WZWMgPSBidmVjNCAoIHNoYWRvd0Nvb3JkLnggPj0gMC4wLCBzaGFkb3dDb29yZC54IDw9IDEuMCwgc2hhZG93Q29vcmQueSA+PSAwLjAsIHNoYWRvd0Nvb3JkLnkgPD0gMS4wICk7XG5cdFx0Ym9vbCBpbkZydXN0dW0gPSBhbGwoIGluRnJ1c3R1bVZlYyApO1xuXHRcdGJ2ZWMyIGZydXN0dW1UZXN0VmVjID0gYnZlYzIoIGluRnJ1c3R1bSwgc2hhZG93Q29vcmQueiA8PSAxLjAgKTtcblx0XHRib29sIGZydXN0dW1UZXN0ID0gYWxsKCBmcnVzdHVtVGVzdFZlYyApO1xuXHRcdGlmICggZnJ1c3R1bVRlc3QgKSB7XG5cdFx0I2lmIGRlZmluZWQoIFNIQURPV01BUF9UWVBFX1BDRiApXG5cdFx0XHR2ZWMyIHRleGVsU2l6ZSA9IHZlYzIoIDEuMCApIC8gc2hhZG93TWFwU2l6ZTtcblx0XHRcdGZsb2F0IGR4MCA9IC0gdGV4ZWxTaXplLnggKiBzaGFkb3dSYWRpdXM7XG5cdFx0XHRmbG9hdCBkeTAgPSAtIHRleGVsU2l6ZS55ICogc2hhZG93UmFkaXVzO1xuXHRcdFx0ZmxvYXQgZHgxID0gKyB0ZXhlbFNpemUueCAqIHNoYWRvd1JhZGl1cztcblx0XHRcdGZsb2F0IGR5MSA9ICsgdGV4ZWxTaXplLnkgKiBzaGFkb3dSYWRpdXM7XG5cdFx0XHRzaGFkb3cgPSAoXG5cdFx0XHRcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDAsIGR5MCApLCBzaGFkb3dDb29yZC56ICkgK1xuXHRcdFx0XHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggMC4wLCBkeTAgKSwgc2hhZG93Q29vcmQueiApICtcblx0XHRcdFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MSwgZHkwICksIHNoYWRvd0Nvb3JkLnogKSArXG5cdFx0XHRcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDAsIDAuMCApLCBzaGFkb3dDb29yZC56ICkgK1xuXHRcdFx0XHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5LCBzaGFkb3dDb29yZC56ICkgK1xuXHRcdFx0XHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgxLCAwLjAgKSwgc2hhZG93Q29vcmQueiApICtcblx0XHRcdFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MCwgZHkxICksIHNoYWRvd0Nvb3JkLnogKSArXG5cdFx0XHRcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCAwLjAsIGR5MSApLCBzaGFkb3dDb29yZC56ICkgK1xuXHRcdFx0XHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgxLCBkeTEgKSwgc2hhZG93Q29vcmQueiApXG5cdFx0XHQpICogKCAxLjAgLyA5LjAgKTtcblx0XHQjZWxpZiBkZWZpbmVkKCBTSEFET1dNQVBfVFlQRV9QQ0ZfU09GVCApXG5cdFx0XHR2ZWMyIHRleGVsU2l6ZSA9IHZlYzIoIDEuMCApIC8gc2hhZG93TWFwU2l6ZTtcblx0XHRcdGZsb2F0IGR4MCA9IC0gdGV4ZWxTaXplLnggKiBzaGFkb3dSYWRpdXM7XG5cdFx0XHRmbG9hdCBkeTAgPSAtIHRleGVsU2l6ZS55ICogc2hhZG93UmFkaXVzO1xuXHRcdFx0ZmxvYXQgZHgxID0gKyB0ZXhlbFNpemUueCAqIHNoYWRvd1JhZGl1cztcblx0XHRcdGZsb2F0IGR5MSA9ICsgdGV4ZWxTaXplLnkgKiBzaGFkb3dSYWRpdXM7XG5cdFx0XHRzaGFkb3cgPSAoXG5cdFx0XHRcdHRleHR1cmUyRFNoYWRvd0xlcnAoIHNoYWRvd01hcCwgc2hhZG93TWFwU2l6ZSwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDAsIGR5MCApLCBzaGFkb3dDb29yZC56ICkgK1xuXHRcdFx0XHR0ZXh0dXJlMkRTaGFkb3dMZXJwKCBzaGFkb3dNYXAsIHNoYWRvd01hcFNpemUsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggMC4wLCBkeTAgKSwgc2hhZG93Q29vcmQueiApICtcblx0XHRcdFx0dGV4dHVyZTJEU2hhZG93TGVycCggc2hhZG93TWFwLCBzaGFkb3dNYXBTaXplLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MSwgZHkwICksIHNoYWRvd0Nvb3JkLnogKSArXG5cdFx0XHRcdHRleHR1cmUyRFNoYWRvd0xlcnAoIHNoYWRvd01hcCwgc2hhZG93TWFwU2l6ZSwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDAsIDAuMCApLCBzaGFkb3dDb29yZC56ICkgK1xuXHRcdFx0XHR0ZXh0dXJlMkRTaGFkb3dMZXJwKCBzaGFkb3dNYXAsIHNoYWRvd01hcFNpemUsIHNoYWRvd0Nvb3JkLnh5LCBzaGFkb3dDb29yZC56ICkgK1xuXHRcdFx0XHR0ZXh0dXJlMkRTaGFkb3dMZXJwKCBzaGFkb3dNYXAsIHNoYWRvd01hcFNpemUsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgxLCAwLjAgKSwgc2hhZG93Q29vcmQueiApICtcblx0XHRcdFx0dGV4dHVyZTJEU2hhZG93TGVycCggc2hhZG93TWFwLCBzaGFkb3dNYXBTaXplLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MCwgZHkxICksIHNoYWRvd0Nvb3JkLnogKSArXG5cdFx0XHRcdHRleHR1cmUyRFNoYWRvd0xlcnAoIHNoYWRvd01hcCwgc2hhZG93TWFwU2l6ZSwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCAwLjAsIGR5MSApLCBzaGFkb3dDb29yZC56ICkgK1xuXHRcdFx0XHR0ZXh0dXJlMkRTaGFkb3dMZXJwKCBzaGFkb3dNYXAsIHNoYWRvd01hcFNpemUsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgxLCBkeTEgKSwgc2hhZG93Q29vcmQueiApXG5cdFx0XHQpICogKCAxLjAgLyA5LjAgKTtcblx0XHQjZWxzZVxuXHRcdFx0c2hhZG93ID0gdGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSwgc2hhZG93Q29vcmQueiApO1xuXHRcdCNlbmRpZlxuXHRcdH1cblx0XHRyZXR1cm4gc2hhZG93O1xuXHR9XG5cdHZlYzIgY3ViZVRvVVYoIHZlYzMgdiwgZmxvYXQgdGV4ZWxTaXplWSApIHtcblx0XHR2ZWMzIGFic1YgPSBhYnMoIHYgKTtcblx0XHRmbG9hdCBzY2FsZVRvQ3ViZSA9IDEuMCAvIG1heCggYWJzVi54LCBtYXgoIGFic1YueSwgYWJzVi56ICkgKTtcblx0XHRhYnNWICo9IHNjYWxlVG9DdWJlO1xuXHRcdHYgKj0gc2NhbGVUb0N1YmUgKiAoIDEuMCAtIDIuMCAqIHRleGVsU2l6ZVkgKTtcblx0XHR2ZWMyIHBsYW5hciA9IHYueHk7XG5cdFx0ZmxvYXQgYWxtb3N0QVRleGVsID0gMS41ICogdGV4ZWxTaXplWTtcblx0XHRmbG9hdCBhbG1vc3RPbmUgPSAxLjAgLSBhbG1vc3RBVGV4ZWw7XG5cdFx0aWYgKCBhYnNWLnogPj0gYWxtb3N0T25lICkge1xuXHRcdFx0aWYgKCB2LnogPiAwLjAgKVxuXHRcdFx0XHRwbGFuYXIueCA9IDQuMCAtIHYueDtcblx0XHR9IGVsc2UgaWYgKCBhYnNWLnggPj0gYWxtb3N0T25lICkge1xuXHRcdFx0ZmxvYXQgc2lnblggPSBzaWduKCB2LnggKTtcblx0XHRcdHBsYW5hci54ID0gdi56ICogc2lnblggKyAyLjAgKiBzaWduWDtcblx0XHR9IGVsc2UgaWYgKCBhYnNWLnkgPj0gYWxtb3N0T25lICkge1xuXHRcdFx0ZmxvYXQgc2lnblkgPSBzaWduKCB2LnkgKTtcblx0XHRcdHBsYW5hci54ID0gdi54ICsgMi4wICogc2lnblkgKyAyLjA7XG5cdFx0XHRwbGFuYXIueSA9IHYueiAqIHNpZ25ZIC0gMi4wO1xuXHRcdH1cblx0XHRyZXR1cm4gdmVjMiggMC4xMjUsIDAuMjUgKSAqIHBsYW5hciArIHZlYzIoIDAuMzc1LCAwLjc1ICk7XG5cdH1cblx0ZmxvYXQgZ2V0UG9pbnRTaGFkb3coIHNhbXBsZXIyRCBzaGFkb3dNYXAsIHZlYzIgc2hhZG93TWFwU2l6ZSwgZmxvYXQgc2hhZG93QmlhcywgZmxvYXQgc2hhZG93UmFkaXVzLCB2ZWM0IHNoYWRvd0Nvb3JkLCBmbG9hdCBzaGFkb3dDYW1lcmFOZWFyLCBmbG9hdCBzaGFkb3dDYW1lcmFGYXIgKSB7XG5cdFx0dmVjMiB0ZXhlbFNpemUgPSB2ZWMyKCAxLjAgKSAvICggc2hhZG93TWFwU2l6ZSAqIHZlYzIoIDQuMCwgMi4wICkgKTtcblx0XHR2ZWMzIGxpZ2h0VG9Qb3NpdGlvbiA9IHNoYWRvd0Nvb3JkLnh5ejtcblx0XHRmbG9hdCBkcCA9ICggbGVuZ3RoKCBsaWdodFRvUG9zaXRpb24gKSAtIHNoYWRvd0NhbWVyYU5lYXIgKSAvICggc2hhZG93Q2FtZXJhRmFyIC0gc2hhZG93Q2FtZXJhTmVhciApO1x0XHRkcCArPSBzaGFkb3dCaWFzO1xuXHRcdHZlYzMgYmQzRCA9IG5vcm1hbGl6ZSggbGlnaHRUb1Bvc2l0aW9uICk7XG5cdFx0I2lmIGRlZmluZWQoIFNIQURPV01BUF9UWVBFX1BDRiApIHx8IGRlZmluZWQoIFNIQURPV01BUF9UWVBFX1BDRl9TT0ZUIClcblx0XHRcdHZlYzIgb2Zmc2V0ID0gdmVjMiggLSAxLCAxICkgKiBzaGFkb3dSYWRpdXMgKiB0ZXhlbFNpemUueTtcblx0XHRcdHJldHVybiAoXG5cdFx0XHRcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgY3ViZVRvVVYoIGJkM0QgKyBvZmZzZXQueHl5LCB0ZXhlbFNpemUueSApLCBkcCApICtcblx0XHRcdFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBjdWJlVG9VViggYmQzRCArIG9mZnNldC55eXksIHRleGVsU2l6ZS55ICksIGRwICkgK1xuXHRcdFx0XHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIGN1YmVUb1VWKCBiZDNEICsgb2Zmc2V0Lnh5eCwgdGV4ZWxTaXplLnkgKSwgZHAgKSArXG5cdFx0XHRcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgY3ViZVRvVVYoIGJkM0QgKyBvZmZzZXQueXl4LCB0ZXhlbFNpemUueSApLCBkcCApICtcblx0XHRcdFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBjdWJlVG9VViggYmQzRCwgdGV4ZWxTaXplLnkgKSwgZHAgKSArXG5cdFx0XHRcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgY3ViZVRvVVYoIGJkM0QgKyBvZmZzZXQueHh5LCB0ZXhlbFNpemUueSApLCBkcCApICtcblx0XHRcdFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBjdWJlVG9VViggYmQzRCArIG9mZnNldC55eHksIHRleGVsU2l6ZS55ICksIGRwICkgK1xuXHRcdFx0XHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIGN1YmVUb1VWKCBiZDNEICsgb2Zmc2V0Lnh4eCwgdGV4ZWxTaXplLnkgKSwgZHAgKSArXG5cdFx0XHRcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgY3ViZVRvVVYoIGJkM0QgKyBvZmZzZXQueXh4LCB0ZXhlbFNpemUueSApLCBkcCApXG5cdFx0XHQpICogKCAxLjAgLyA5LjAgKTtcblx0XHQjZWxzZVxuXHRcdFx0cmV0dXJuIHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgY3ViZVRvVVYoIGJkM0QsIHRleGVsU2l6ZS55ICksIGRwICk7XG5cdFx0I2VuZGlmXG5cdH1cbiNlbmRpZlxuIjt2YXIgc2hhZG93bWFwX3BhcnNfdmVydGV4PSIjaWZkZWYgVVNFX1NIQURPV01BUFxuXHQjaWYgTlVNX0RJUl9MSUdIVFMgPiAwXG5cdFx0dW5pZm9ybSBtYXQ0IGRpcmVjdGlvbmFsU2hhZG93TWF0cml4WyBOVU1fRElSX0xJR0hUUyBdO1xuXHRcdHZhcnlpbmcgdmVjNCB2RGlyZWN0aW9uYWxTaGFkb3dDb29yZFsgTlVNX0RJUl9MSUdIVFMgXTtcblx0I2VuZGlmXG5cdCNpZiBOVU1fU1BPVF9MSUdIVFMgPiAwXG5cdFx0dW5pZm9ybSBtYXQ0IHNwb3RTaGFkb3dNYXRyaXhbIE5VTV9TUE9UX0xJR0hUUyBdO1xuXHRcdHZhcnlpbmcgdmVjNCB2U3BvdFNoYWRvd0Nvb3JkWyBOVU1fU1BPVF9MSUdIVFMgXTtcblx0I2VuZGlmXG5cdCNpZiBOVU1fUE9JTlRfTElHSFRTID4gMFxuXHRcdHVuaWZvcm0gbWF0NCBwb2ludFNoYWRvd01hdHJpeFsgTlVNX1BPSU5UX0xJR0hUUyBdO1xuXHRcdHZhcnlpbmcgdmVjNCB2UG9pbnRTaGFkb3dDb29yZFsgTlVNX1BPSU5UX0xJR0hUUyBdO1xuXHQjZW5kaWZcbiNlbmRpZlxuIjt2YXIgc2hhZG93bWFwX3ZlcnRleD0iI2lmZGVmIFVTRV9TSEFET1dNQVBcblx0I2lmIE5VTV9ESVJfTElHSFRTID4gMFxuXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fRElSX0xJR0hUUzsgaSArKyApIHtcblx0XHR2RGlyZWN0aW9uYWxTaGFkb3dDb29yZFsgaSBdID0gZGlyZWN0aW9uYWxTaGFkb3dNYXRyaXhbIGkgXSAqIHdvcmxkUG9zaXRpb247XG5cdH1cblx0I2VuZGlmXG5cdCNpZiBOVU1fU1BPVF9MSUdIVFMgPiAwXG5cdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9TUE9UX0xJR0hUUzsgaSArKyApIHtcblx0XHR2U3BvdFNoYWRvd0Nvb3JkWyBpIF0gPSBzcG90U2hhZG93TWF0cml4WyBpIF0gKiB3b3JsZFBvc2l0aW9uO1xuXHR9XG5cdCNlbmRpZlxuXHQjaWYgTlVNX1BPSU5UX0xJR0hUUyA+IDBcblx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX1BPSU5UX0xJR0hUUzsgaSArKyApIHtcblx0XHR2UG9pbnRTaGFkb3dDb29yZFsgaSBdID0gcG9pbnRTaGFkb3dNYXRyaXhbIGkgXSAqIHdvcmxkUG9zaXRpb247XG5cdH1cblx0I2VuZGlmXG4jZW5kaWZcbiI7dmFyIHNoYWRvd21hc2tfcGFyc19mcmFnbWVudD0iZmxvYXQgZ2V0U2hhZG93TWFzaygpIHtcblx0ZmxvYXQgc2hhZG93ID0gMS4wO1xuXHQjaWZkZWYgVVNFX1NIQURPV01BUFxuXHQjaWYgTlVNX0RJUl9MSUdIVFMgPiAwXG5cdERpcmVjdGlvbmFsTGlnaHQgZGlyZWN0aW9uYWxMaWdodDtcblx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX0RJUl9MSUdIVFM7IGkgKysgKSB7XG5cdFx0ZGlyZWN0aW9uYWxMaWdodCA9IGRpcmVjdGlvbmFsTGlnaHRzWyBpIF07XG5cdFx0c2hhZG93ICo9IGJvb2woIGRpcmVjdGlvbmFsTGlnaHQuc2hhZG93ICkgPyBnZXRTaGFkb3coIGRpcmVjdGlvbmFsU2hhZG93TWFwWyBpIF0sIGRpcmVjdGlvbmFsTGlnaHQuc2hhZG93TWFwU2l6ZSwgZGlyZWN0aW9uYWxMaWdodC5zaGFkb3dCaWFzLCBkaXJlY3Rpb25hbExpZ2h0LnNoYWRvd1JhZGl1cywgdkRpcmVjdGlvbmFsU2hhZG93Q29vcmRbIGkgXSApIDogMS4wO1xuXHR9XG5cdCNlbmRpZlxuXHQjaWYgTlVNX1NQT1RfTElHSFRTID4gMFxuXHRTcG90TGlnaHQgc3BvdExpZ2h0O1xuXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fU1BPVF9MSUdIVFM7IGkgKysgKSB7XG5cdFx0c3BvdExpZ2h0ID0gc3BvdExpZ2h0c1sgaSBdO1xuXHRcdHNoYWRvdyAqPSBib29sKCBzcG90TGlnaHQuc2hhZG93ICkgPyBnZXRTaGFkb3coIHNwb3RTaGFkb3dNYXBbIGkgXSwgc3BvdExpZ2h0LnNoYWRvd01hcFNpemUsIHNwb3RMaWdodC5zaGFkb3dCaWFzLCBzcG90TGlnaHQuc2hhZG93UmFkaXVzLCB2U3BvdFNoYWRvd0Nvb3JkWyBpIF0gKSA6IDEuMDtcblx0fVxuXHQjZW5kaWZcblx0I2lmIE5VTV9QT0lOVF9MSUdIVFMgPiAwXG5cdFBvaW50TGlnaHQgcG9pbnRMaWdodDtcblx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX1BPSU5UX0xJR0hUUzsgaSArKyApIHtcblx0XHRwb2ludExpZ2h0ID0gcG9pbnRMaWdodHNbIGkgXTtcblx0XHRzaGFkb3cgKj0gYm9vbCggcG9pbnRMaWdodC5zaGFkb3cgKSA/IGdldFBvaW50U2hhZG93KCBwb2ludFNoYWRvd01hcFsgaSBdLCBwb2ludExpZ2h0LnNoYWRvd01hcFNpemUsIHBvaW50TGlnaHQuc2hhZG93QmlhcywgcG9pbnRMaWdodC5zaGFkb3dSYWRpdXMsIHZQb2ludFNoYWRvd0Nvb3JkWyBpIF0sIHBvaW50TGlnaHQuc2hhZG93Q2FtZXJhTmVhciwgcG9pbnRMaWdodC5zaGFkb3dDYW1lcmFGYXIgKSA6IDEuMDtcblx0fVxuXHQjZW5kaWZcblx0I2VuZGlmXG5cdHJldHVybiBzaGFkb3c7XG59XG4iO3ZhciBza2luYmFzZV92ZXJ0ZXg9IiNpZmRlZiBVU0VfU0tJTk5JTkdcblx0bWF0NCBib25lTWF0WCA9IGdldEJvbmVNYXRyaXgoIHNraW5JbmRleC54ICk7XG5cdG1hdDQgYm9uZU1hdFkgPSBnZXRCb25lTWF0cml4KCBza2luSW5kZXgueSApO1xuXHRtYXQ0IGJvbmVNYXRaID0gZ2V0Qm9uZU1hdHJpeCggc2tpbkluZGV4LnogKTtcblx0bWF0NCBib25lTWF0VyA9IGdldEJvbmVNYXRyaXgoIHNraW5JbmRleC53ICk7XG4jZW5kaWYiO3ZhciBza2lubmluZ19wYXJzX3ZlcnRleD0iI2lmZGVmIFVTRV9TS0lOTklOR1xuXHR1bmlmb3JtIG1hdDQgYmluZE1hdHJpeDtcblx0dW5pZm9ybSBtYXQ0IGJpbmRNYXRyaXhJbnZlcnNlO1xuXHQjaWZkZWYgQk9ORV9URVhUVVJFXG5cdFx0dW5pZm9ybSBzYW1wbGVyMkQgYm9uZVRleHR1cmU7XG5cdFx0dW5pZm9ybSBpbnQgYm9uZVRleHR1cmVTaXplO1xuXHRcdG1hdDQgZ2V0Qm9uZU1hdHJpeCggY29uc3QgaW4gZmxvYXQgaSApIHtcblx0XHRcdGZsb2F0IGogPSBpICogNC4wO1xuXHRcdFx0ZmxvYXQgeCA9IG1vZCggaiwgZmxvYXQoIGJvbmVUZXh0dXJlU2l6ZSApICk7XG5cdFx0XHRmbG9hdCB5ID0gZmxvb3IoIGogLyBmbG9hdCggYm9uZVRleHR1cmVTaXplICkgKTtcblx0XHRcdGZsb2F0IGR4ID0gMS4wIC8gZmxvYXQoIGJvbmVUZXh0dXJlU2l6ZSApO1xuXHRcdFx0ZmxvYXQgZHkgPSAxLjAgLyBmbG9hdCggYm9uZVRleHR1cmVTaXplICk7XG5cdFx0XHR5ID0gZHkgKiAoIHkgKyAwLjUgKTtcblx0XHRcdHZlYzQgdjEgPSB0ZXh0dXJlMkQoIGJvbmVUZXh0dXJlLCB2ZWMyKCBkeCAqICggeCArIDAuNSApLCB5ICkgKTtcblx0XHRcdHZlYzQgdjIgPSB0ZXh0dXJlMkQoIGJvbmVUZXh0dXJlLCB2ZWMyKCBkeCAqICggeCArIDEuNSApLCB5ICkgKTtcblx0XHRcdHZlYzQgdjMgPSB0ZXh0dXJlMkQoIGJvbmVUZXh0dXJlLCB2ZWMyKCBkeCAqICggeCArIDIuNSApLCB5ICkgKTtcblx0XHRcdHZlYzQgdjQgPSB0ZXh0dXJlMkQoIGJvbmVUZXh0dXJlLCB2ZWMyKCBkeCAqICggeCArIDMuNSApLCB5ICkgKTtcblx0XHRcdG1hdDQgYm9uZSA9IG1hdDQoIHYxLCB2MiwgdjMsIHY0ICk7XG5cdFx0XHRyZXR1cm4gYm9uZTtcblx0XHR9XG5cdCNlbHNlXG5cdFx0dW5pZm9ybSBtYXQ0IGJvbmVNYXRyaWNlc1sgTUFYX0JPTkVTIF07XG5cdFx0bWF0NCBnZXRCb25lTWF0cml4KCBjb25zdCBpbiBmbG9hdCBpICkge1xuXHRcdFx0bWF0NCBib25lID0gYm9uZU1hdHJpY2VzWyBpbnQoaSkgXTtcblx0XHRcdHJldHVybiBib25lO1xuXHRcdH1cblx0I2VuZGlmXG4jZW5kaWZcbiI7dmFyIHNraW5uaW5nX3ZlcnRleD0iI2lmZGVmIFVTRV9TS0lOTklOR1xuXHR2ZWM0IHNraW5WZXJ0ZXggPSBiaW5kTWF0cml4ICogdmVjNCggdHJhbnNmb3JtZWQsIDEuMCApO1xuXHR2ZWM0IHNraW5uZWQgPSB2ZWM0KCAwLjAgKTtcblx0c2tpbm5lZCArPSBib25lTWF0WCAqIHNraW5WZXJ0ZXggKiBza2luV2VpZ2h0Lng7XG5cdHNraW5uZWQgKz0gYm9uZU1hdFkgKiBza2luVmVydGV4ICogc2tpbldlaWdodC55O1xuXHRza2lubmVkICs9IGJvbmVNYXRaICogc2tpblZlcnRleCAqIHNraW5XZWlnaHQuejtcblx0c2tpbm5lZCArPSBib25lTWF0VyAqIHNraW5WZXJ0ZXggKiBza2luV2VpZ2h0Lnc7XG5cdHRyYW5zZm9ybWVkID0gKCBiaW5kTWF0cml4SW52ZXJzZSAqIHNraW5uZWQgKS54eXo7XG4jZW5kaWZcbiI7dmFyIHNraW5ub3JtYWxfdmVydGV4PSIjaWZkZWYgVVNFX1NLSU5OSU5HXG5cdG1hdDQgc2tpbk1hdHJpeCA9IG1hdDQoIDAuMCApO1xuXHRza2luTWF0cml4ICs9IHNraW5XZWlnaHQueCAqIGJvbmVNYXRYO1xuXHRza2luTWF0cml4ICs9IHNraW5XZWlnaHQueSAqIGJvbmVNYXRZO1xuXHRza2luTWF0cml4ICs9IHNraW5XZWlnaHQueiAqIGJvbmVNYXRaO1xuXHRza2luTWF0cml4ICs9IHNraW5XZWlnaHQudyAqIGJvbmVNYXRXO1xuXHRza2luTWF0cml4ICA9IGJpbmRNYXRyaXhJbnZlcnNlICogc2tpbk1hdHJpeCAqIGJpbmRNYXRyaXg7XG5cdG9iamVjdE5vcm1hbCA9IHZlYzQoIHNraW5NYXRyaXggKiB2ZWM0KCBvYmplY3ROb3JtYWwsIDAuMCApICkueHl6O1xuI2VuZGlmXG4iO3ZhciBzcGVjdWxhcm1hcF9mcmFnbWVudD0iZmxvYXQgc3BlY3VsYXJTdHJlbmd0aDtcbiNpZmRlZiBVU0VfU1BFQ1VMQVJNQVBcblx0dmVjNCB0ZXhlbFNwZWN1bGFyID0gdGV4dHVyZTJEKCBzcGVjdWxhck1hcCwgdlV2ICk7XG5cdHNwZWN1bGFyU3RyZW5ndGggPSB0ZXhlbFNwZWN1bGFyLnI7XG4jZWxzZVxuXHRzcGVjdWxhclN0cmVuZ3RoID0gMS4wO1xuI2VuZGlmIjt2YXIgc3BlY3VsYXJtYXBfcGFyc19mcmFnbWVudD0iI2lmZGVmIFVTRV9TUEVDVUxBUk1BUFxuXHR1bmlmb3JtIHNhbXBsZXIyRCBzcGVjdWxhck1hcDtcbiNlbmRpZiI7dmFyIHRvbmVtYXBwaW5nX2ZyYWdtZW50PSIjaWYgZGVmaW5lZCggVE9ORV9NQVBQSU5HIClcbiAgZ2xfRnJhZ0NvbG9yLnJnYiA9IHRvbmVNYXBwaW5nKCBnbF9GcmFnQ29sb3IucmdiICk7XG4jZW5kaWZcbiI7dmFyIHRvbmVtYXBwaW5nX3BhcnNfZnJhZ21lbnQ9IiNpZm5kZWYgc2F0dXJhdGVcblx0I2RlZmluZSBzYXR1cmF0ZShhKSBjbGFtcCggYSwgMC4wLCAxLjAgKVxuI2VuZGlmXG51bmlmb3JtIGZsb2F0IHRvbmVNYXBwaW5nRXhwb3N1cmU7XG51bmlmb3JtIGZsb2F0IHRvbmVNYXBwaW5nV2hpdGVQb2ludDtcbnZlYzMgTGluZWFyVG9uZU1hcHBpbmcoIHZlYzMgY29sb3IgKSB7XG5cdHJldHVybiB0b25lTWFwcGluZ0V4cG9zdXJlICogY29sb3I7XG59XG52ZWMzIFJlaW5oYXJkVG9uZU1hcHBpbmcoIHZlYzMgY29sb3IgKSB7XG5cdGNvbG9yICo9IHRvbmVNYXBwaW5nRXhwb3N1cmU7XG5cdHJldHVybiBzYXR1cmF0ZSggY29sb3IgLyAoIHZlYzMoIDEuMCApICsgY29sb3IgKSApO1xufVxuI2RlZmluZSBVbmNoYXJ0ZWQySGVscGVyKCB4ICkgbWF4KCAoICggeCAqICggMC4xNSAqIHggKyAwLjEwICogMC41MCApICsgMC4yMCAqIDAuMDIgKSAvICggeCAqICggMC4xNSAqIHggKyAwLjUwICkgKyAwLjIwICogMC4zMCApICkgLSAwLjAyIC8gMC4zMCwgdmVjMyggMC4wICkgKVxudmVjMyBVbmNoYXJ0ZWQyVG9uZU1hcHBpbmcoIHZlYzMgY29sb3IgKSB7XG5cdGNvbG9yICo9IHRvbmVNYXBwaW5nRXhwb3N1cmU7XG5cdHJldHVybiBzYXR1cmF0ZSggVW5jaGFydGVkMkhlbHBlciggY29sb3IgKSAvIFVuY2hhcnRlZDJIZWxwZXIoIHZlYzMoIHRvbmVNYXBwaW5nV2hpdGVQb2ludCApICkgKTtcbn1cbnZlYzMgT3B0aW1pemVkQ2luZW9uVG9uZU1hcHBpbmcoIHZlYzMgY29sb3IgKSB7XG5cdGNvbG9yICo9IHRvbmVNYXBwaW5nRXhwb3N1cmU7XG5cdGNvbG9yID0gbWF4KCB2ZWMzKCAwLjAgKSwgY29sb3IgLSAwLjAwNCApO1xuXHRyZXR1cm4gcG93KCAoIGNvbG9yICogKCA2LjIgKiBjb2xvciArIDAuNSApICkgLyAoIGNvbG9yICogKCA2LjIgKiBjb2xvciArIDEuNyApICsgMC4wNiApLCB2ZWMzKCAyLjIgKSApO1xufVxuIjt2YXIgdXZfcGFyc19mcmFnbWVudD0iI2lmIGRlZmluZWQoIFVTRV9NQVAgKSB8fCBkZWZpbmVkKCBVU0VfQlVNUE1BUCApIHx8IGRlZmluZWQoIFVTRV9OT1JNQUxNQVAgKSB8fCBkZWZpbmVkKCBVU0VfU1BFQ1VMQVJNQVAgKSB8fCBkZWZpbmVkKCBVU0VfQUxQSEFNQVAgKSB8fCBkZWZpbmVkKCBVU0VfRU1JU1NJVkVNQVAgKSB8fCBkZWZpbmVkKCBVU0VfUk9VR0hORVNTTUFQICkgfHwgZGVmaW5lZCggVVNFX01FVEFMTkVTU01BUCApXG5cdHZhcnlpbmcgdmVjMiB2VXY7XG4jZW5kaWYiO3ZhciB1dl9wYXJzX3ZlcnRleD0iI2lmIGRlZmluZWQoIFVTRV9NQVAgKSB8fCBkZWZpbmVkKCBVU0VfQlVNUE1BUCApIHx8IGRlZmluZWQoIFVTRV9OT1JNQUxNQVAgKSB8fCBkZWZpbmVkKCBVU0VfU1BFQ1VMQVJNQVAgKSB8fCBkZWZpbmVkKCBVU0VfQUxQSEFNQVAgKSB8fCBkZWZpbmVkKCBVU0VfRU1JU1NJVkVNQVAgKSB8fCBkZWZpbmVkKCBVU0VfUk9VR0hORVNTTUFQICkgfHwgZGVmaW5lZCggVVNFX01FVEFMTkVTU01BUCApXG5cdHZhcnlpbmcgdmVjMiB2VXY7XG5cdHVuaWZvcm0gbWF0MyB1dlRyYW5zZm9ybTtcbiNlbmRpZlxuIjt2YXIgdXZfdmVydGV4PSIjaWYgZGVmaW5lZCggVVNFX01BUCApIHx8IGRlZmluZWQoIFVTRV9CVU1QTUFQICkgfHwgZGVmaW5lZCggVVNFX05PUk1BTE1BUCApIHx8IGRlZmluZWQoIFVTRV9TUEVDVUxBUk1BUCApIHx8IGRlZmluZWQoIFVTRV9BTFBIQU1BUCApIHx8IGRlZmluZWQoIFVTRV9FTUlTU0lWRU1BUCApIHx8IGRlZmluZWQoIFVTRV9ST1VHSE5FU1NNQVAgKSB8fCBkZWZpbmVkKCBVU0VfTUVUQUxORVNTTUFQIClcblx0dlV2ID0gKCB1dlRyYW5zZm9ybSAqIHZlYzMoIHV2LCAxICkgKS54eTtcbiNlbmRpZiI7dmFyIHV2Ml9wYXJzX2ZyYWdtZW50PSIjaWYgZGVmaW5lZCggVVNFX0xJR0hUTUFQICkgfHwgZGVmaW5lZCggVVNFX0FPTUFQIClcblx0dmFyeWluZyB2ZWMyIHZVdjI7XG4jZW5kaWYiO3ZhciB1djJfcGFyc192ZXJ0ZXg9IiNpZiBkZWZpbmVkKCBVU0VfTElHSFRNQVAgKSB8fCBkZWZpbmVkKCBVU0VfQU9NQVAgKVxuXHRhdHRyaWJ1dGUgdmVjMiB1djI7XG5cdHZhcnlpbmcgdmVjMiB2VXYyO1xuI2VuZGlmIjt2YXIgdXYyX3ZlcnRleD0iI2lmIGRlZmluZWQoIFVTRV9MSUdIVE1BUCApIHx8IGRlZmluZWQoIFVTRV9BT01BUCApXG5cdHZVdjIgPSB1djI7XG4jZW5kaWYiO3ZhciB3b3JsZHBvc192ZXJ0ZXg9IiNpZiBkZWZpbmVkKCBVU0VfRU5WTUFQICkgfHwgZGVmaW5lZCggRElTVEFOQ0UgKSB8fCBkZWZpbmVkICggVVNFX1NIQURPV01BUCApXG5cdHZlYzQgd29ybGRQb3NpdGlvbiA9IG1vZGVsTWF0cml4ICogdmVjNCggdHJhbnNmb3JtZWQsIDEuMCApO1xuI2VuZGlmXG4iO3ZhciBjdWJlX2ZyYWc9InVuaWZvcm0gc2FtcGxlckN1YmUgdEN1YmU7XG51bmlmb3JtIGZsb2F0IHRGbGlwO1xudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xudmFyeWluZyB2ZWMzIHZXb3JsZFBvc2l0aW9uO1xudm9pZCBtYWluKCkge1xuXHRnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlQ3ViZSggdEN1YmUsIHZlYzMoIHRGbGlwICogdldvcmxkUG9zaXRpb24ueCwgdldvcmxkUG9zaXRpb24ueXogKSApO1xuXHRnbF9GcmFnQ29sb3IuYSAqPSBvcGFjaXR5O1xufVxuIjt2YXIgY3ViZV92ZXJ0PSJ2YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb247XG4jaW5jbHVkZSA8Y29tbW9uPlxudm9pZCBtYWluKCkge1xuXHR2V29ybGRQb3NpdGlvbiA9IHRyYW5zZm9ybURpcmVjdGlvbiggcG9zaXRpb24sIG1vZGVsTWF0cml4ICk7XG5cdCNpbmNsdWRlIDxiZWdpbl92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxwcm9qZWN0X3ZlcnRleD5cblx0Z2xfUG9zaXRpb24ueiA9IGdsX1Bvc2l0aW9uLnc7XG59XG4iO3ZhciBkZXB0aF9mcmFnPSIjaWYgREVQVEhfUEFDS0lORyA9PSAzMjAwXG5cdHVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcbiNlbmRpZlxuI2luY2x1ZGUgPGNvbW1vbj5cbiNpbmNsdWRlIDxwYWNraW5nPlxuI2luY2x1ZGUgPHV2X3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8bWFwX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8YWxwaGFtYXBfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50Plxudm9pZCBtYWluKCkge1xuXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX2ZyYWdtZW50PlxuXHR2ZWM0IGRpZmZ1c2VDb2xvciA9IHZlYzQoIDEuMCApO1xuXHQjaWYgREVQVEhfUEFDS0lORyA9PSAzMjAwXG5cdFx0ZGlmZnVzZUNvbG9yLmEgPSBvcGFjaXR5O1xuXHQjZW5kaWZcblx0I2luY2x1ZGUgPG1hcF9mcmFnbWVudD5cblx0I2luY2x1ZGUgPGFscGhhbWFwX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8YWxwaGF0ZXN0X2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfZnJhZ21lbnQ+XG5cdCNpZiBERVBUSF9QQUNLSU5HID09IDMyMDBcblx0XHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCB2ZWMzKCBnbF9GcmFnQ29vcmQueiApLCBvcGFjaXR5ICk7XG5cdCNlbGlmIERFUFRIX1BBQ0tJTkcgPT0gMzIwMVxuXHRcdGdsX0ZyYWdDb2xvciA9IHBhY2tEZXB0aFRvUkdCQSggZ2xfRnJhZ0Nvb3JkLnogKTtcblx0I2VuZGlmXG59XG4iO3ZhciBkZXB0aF92ZXJ0PSIjaW5jbHVkZSA8Y29tbW9uPlxuI2luY2x1ZGUgPHV2X3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPGRpc3BsYWNlbWVudG1hcF9wYXJzX3ZlcnRleD5cbiNpbmNsdWRlIDxtb3JwaHRhcmdldF9wYXJzX3ZlcnRleD5cbiNpbmNsdWRlIDxza2lubmluZ19wYXJzX3ZlcnRleD5cbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX3ZlcnRleD5cbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc192ZXJ0ZXg+XG52b2lkIG1haW4oKSB7XG5cdCNpbmNsdWRlIDx1dl92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxza2luYmFzZV92ZXJ0ZXg+XG5cdCNpZmRlZiBVU0VfRElTUExBQ0VNRU5UTUFQXG5cdFx0I2luY2x1ZGUgPGJlZ2lubm9ybWFsX3ZlcnRleD5cblx0XHQjaW5jbHVkZSA8bW9ycGhub3JtYWxfdmVydGV4PlxuXHRcdCNpbmNsdWRlIDxza2lubm9ybWFsX3ZlcnRleD5cblx0I2VuZGlmXG5cdCNpbmNsdWRlIDxiZWdpbl92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxtb3JwaHRhcmdldF92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxza2lubmluZ192ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxkaXNwbGFjZW1lbnRtYXBfdmVydGV4PlxuXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfdmVydGV4PlxufVxuIjt2YXIgZGlzdGFuY2VSR0JBX2ZyYWc9IiNkZWZpbmUgRElTVEFOQ0VcbnVuaWZvcm0gdmVjMyByZWZlcmVuY2VQb3NpdGlvbjtcbnVuaWZvcm0gZmxvYXQgbmVhckRpc3RhbmNlO1xudW5pZm9ybSBmbG9hdCBmYXJEaXN0YW5jZTtcbnZhcnlpbmcgdmVjMyB2V29ybGRQb3NpdGlvbjtcbiNpbmNsdWRlIDxjb21tb24+XG4jaW5jbHVkZSA8cGFja2luZz5cbiNpbmNsdWRlIDx1dl9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPG1hcF9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGFscGhhbWFwX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ+XG52b2lkIG1haW4gKCkge1xuXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX2ZyYWdtZW50PlxuXHR2ZWM0IGRpZmZ1c2VDb2xvciA9IHZlYzQoIDEuMCApO1xuXHQjaW5jbHVkZSA8bWFwX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8YWxwaGFtYXBfZnJhZ21lbnQ+XG5cdCNpbmNsdWRlIDxhbHBoYXRlc3RfZnJhZ21lbnQ+XG5cdGZsb2F0IGRpc3QgPSBsZW5ndGgoIHZXb3JsZFBvc2l0aW9uIC0gcmVmZXJlbmNlUG9zaXRpb24gKTtcblx0ZGlzdCA9ICggZGlzdCAtIG5lYXJEaXN0YW5jZSApIC8gKCBmYXJEaXN0YW5jZSAtIG5lYXJEaXN0YW5jZSApO1xuXHRkaXN0ID0gc2F0dXJhdGUoIGRpc3QgKTtcblx0Z2xfRnJhZ0NvbG9yID0gcGFja0RlcHRoVG9SR0JBKCBkaXN0ICk7XG59XG4iO3ZhciBkaXN0YW5jZVJHQkFfdmVydD0iI2RlZmluZSBESVNUQU5DRVxudmFyeWluZyB2ZWMzIHZXb3JsZFBvc2l0aW9uO1xuI2luY2x1ZGUgPGNvbW1vbj5cbiNpbmNsdWRlIDx1dl9wYXJzX3ZlcnRleD5cbiNpbmNsdWRlIDxkaXNwbGFjZW1lbnRtYXBfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8bW9ycGh0YXJnZXRfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8c2tpbm5pbmdfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfdmVydGV4Plxudm9pZCBtYWluKCkge1xuXHQjaW5jbHVkZSA8dXZfdmVydGV4PlxuXHQjaW5jbHVkZSA8c2tpbmJhc2VfdmVydGV4PlxuXHQjaWZkZWYgVVNFX0RJU1BMQUNFTUVOVE1BUFxuXHRcdCNpbmNsdWRlIDxiZWdpbm5vcm1hbF92ZXJ0ZXg+XG5cdFx0I2luY2x1ZGUgPG1vcnBobm9ybWFsX3ZlcnRleD5cblx0XHQjaW5jbHVkZSA8c2tpbm5vcm1hbF92ZXJ0ZXg+XG5cdCNlbmRpZlxuXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxuXHQjaW5jbHVkZSA8bW9ycGh0YXJnZXRfdmVydGV4PlxuXHQjaW5jbHVkZSA8c2tpbm5pbmdfdmVydGV4PlxuXHQjaW5jbHVkZSA8ZGlzcGxhY2VtZW50bWFwX3ZlcnRleD5cblx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4PlxuXHQjaW5jbHVkZSA8d29ybGRwb3NfdmVydGV4PlxuXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3ZlcnRleD5cblx0dldvcmxkUG9zaXRpb24gPSB3b3JsZFBvc2l0aW9uLnh5ejtcbn1cbiI7dmFyIGVxdWlyZWN0X2ZyYWc9InVuaWZvcm0gc2FtcGxlcjJEIHRFcXVpcmVjdDtcbnZhcnlpbmcgdmVjMyB2V29ybGRQb3NpdGlvbjtcbiNpbmNsdWRlIDxjb21tb24+XG52b2lkIG1haW4oKSB7XG5cdHZlYzMgZGlyZWN0aW9uID0gbm9ybWFsaXplKCB2V29ybGRQb3NpdGlvbiApO1xuXHR2ZWMyIHNhbXBsZVVWO1xuXHRzYW1wbGVVVi55ID0gYXNpbiggY2xhbXAoIGRpcmVjdGlvbi55LCAtIDEuMCwgMS4wICkgKSAqIFJFQ0lQUk9DQUxfUEkgKyAwLjU7XG5cdHNhbXBsZVVWLnggPSBhdGFuKCBkaXJlY3Rpb24ueiwgZGlyZWN0aW9uLnggKSAqIFJFQ0lQUk9DQUxfUEkyICsgMC41O1xuXHRnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlMkQoIHRFcXVpcmVjdCwgc2FtcGxlVVYgKTtcbn1cbiI7dmFyIGVxdWlyZWN0X3ZlcnQ9InZhcnlpbmcgdmVjMyB2V29ybGRQb3NpdGlvbjtcbiNpbmNsdWRlIDxjb21tb24+XG52b2lkIG1haW4oKSB7XG5cdHZXb3JsZFBvc2l0aW9uID0gdHJhbnNmb3JtRGlyZWN0aW9uKCBwb3NpdGlvbiwgbW9kZWxNYXRyaXggKTtcblx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cblx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4PlxufVxuIjt2YXIgbGluZWRhc2hlZF9mcmFnPSJ1bmlmb3JtIHZlYzMgZGlmZnVzZTtcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcbnVuaWZvcm0gZmxvYXQgZGFzaFNpemU7XG51bmlmb3JtIGZsb2F0IHRvdGFsU2l6ZTtcbnZhcnlpbmcgZmxvYXQgdkxpbmVEaXN0YW5jZTtcbiNpbmNsdWRlIDxjb21tb24+XG4jaW5jbHVkZSA8Y29sb3JfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxmb2dfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50Plxudm9pZCBtYWluKCkge1xuXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX2ZyYWdtZW50PlxuXHRpZiAoIG1vZCggdkxpbmVEaXN0YW5jZSwgdG90YWxTaXplICkgPiBkYXNoU2l6ZSApIHtcblx0XHRkaXNjYXJkO1xuXHR9XG5cdHZlYzMgb3V0Z29pbmdMaWdodCA9IHZlYzMoIDAuMCApO1xuXHR2ZWM0IGRpZmZ1c2VDb2xvciA9IHZlYzQoIGRpZmZ1c2UsIG9wYWNpdHkgKTtcblx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8Y29sb3JfZnJhZ21lbnQ+XG5cdG91dGdvaW5nTGlnaHQgPSBkaWZmdXNlQ29sb3IucmdiO1xuXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCBvdXRnb2luZ0xpZ2h0LCBkaWZmdXNlQ29sb3IuYSApO1xuXHQjaW5jbHVkZSA8cHJlbXVsdGlwbGllZF9hbHBoYV9mcmFnbWVudD5cblx0I2luY2x1ZGUgPHRvbmVtYXBwaW5nX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8ZW5jb2RpbmdzX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8Zm9nX2ZyYWdtZW50PlxufVxuIjt2YXIgbGluZWRhc2hlZF92ZXJ0PSJ1bmlmb3JtIGZsb2F0IHNjYWxlO1xuYXR0cmlidXRlIGZsb2F0IGxpbmVEaXN0YW5jZTtcbnZhcnlpbmcgZmxvYXQgdkxpbmVEaXN0YW5jZTtcbiNpbmNsdWRlIDxjb21tb24+XG4jaW5jbHVkZSA8Y29sb3JfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8Zm9nX3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleD5cbnZvaWQgbWFpbigpIHtcblx0I2luY2x1ZGUgPGNvbG9yX3ZlcnRleD5cblx0dkxpbmVEaXN0YW5jZSA9IHNjYWxlICogbGluZURpc3RhbmNlO1xuXHR2ZWM0IG12UG9zaXRpb24gPSBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KCBwb3NpdGlvbiwgMS4wICk7XG5cdGdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIG12UG9zaXRpb247XG5cdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfdmVydGV4PlxuXHQjaW5jbHVkZSA8Zm9nX3ZlcnRleD5cbn1cbiI7dmFyIG1lc2hiYXNpY19mcmFnPSJ1bmlmb3JtIHZlYzMgZGlmZnVzZTtcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcbiNpZm5kZWYgRkxBVF9TSEFERURcblx0dmFyeWluZyB2ZWMzIHZOb3JtYWw7XG4jZW5kaWZcbiNpbmNsdWRlIDxjb21tb24+XG4jaW5jbHVkZSA8Y29sb3JfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDx1dl9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPHV2Ml9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPG1hcF9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGFscGhhbWFwX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8YW9tYXBfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxsaWdodG1hcF9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGVudm1hcF9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGZvZ19wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPHNwZWN1bGFybWFwX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc19mcmFnbWVudD5cbnZvaWQgbWFpbigpIHtcblx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudD5cblx0dmVjNCBkaWZmdXNlQ29sb3IgPSB2ZWM0KCBkaWZmdXNlLCBvcGFjaXR5ICk7XG5cdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9mcmFnbWVudD5cblx0I2luY2x1ZGUgPG1hcF9mcmFnbWVudD5cblx0I2luY2x1ZGUgPGNvbG9yX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8YWxwaGFtYXBfZnJhZ21lbnQ+XG5cdCNpbmNsdWRlIDxhbHBoYXRlc3RfZnJhZ21lbnQ+XG5cdCNpbmNsdWRlIDxzcGVjdWxhcm1hcF9mcmFnbWVudD5cblx0UmVmbGVjdGVkTGlnaHQgcmVmbGVjdGVkTGlnaHQgPSBSZWZsZWN0ZWRMaWdodCggdmVjMyggMC4wICksIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICkgKTtcblx0I2lmZGVmIFVTRV9MSUdIVE1BUFxuXHRcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSArPSB0ZXh0dXJlMkQoIGxpZ2h0TWFwLCB2VXYyICkueHl6ICogbGlnaHRNYXBJbnRlbnNpdHk7XG5cdCNlbHNlXG5cdFx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlICs9IHZlYzMoIDEuMCApO1xuXHQjZW5kaWZcblx0I2luY2x1ZGUgPGFvbWFwX2ZyYWdtZW50PlxuXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKj0gZGlmZnVzZUNvbG9yLnJnYjtcblx0dmVjMyBvdXRnb2luZ0xpZ2h0ID0gcmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlO1xuXHQjaW5jbHVkZSA8ZW52bWFwX2ZyYWdtZW50PlxuXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCBvdXRnb2luZ0xpZ2h0LCBkaWZmdXNlQ29sb3IuYSApO1xuXHQjaW5jbHVkZSA8cHJlbXVsdGlwbGllZF9hbHBoYV9mcmFnbWVudD5cblx0I2luY2x1ZGUgPHRvbmVtYXBwaW5nX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8ZW5jb2RpbmdzX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8Zm9nX2ZyYWdtZW50PlxufVxuIjt2YXIgbWVzaGJhc2ljX3ZlcnQ9IiNpbmNsdWRlIDxjb21tb24+XG4jaW5jbHVkZSA8dXZfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8dXYyX3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPGVudm1hcF9wYXJzX3ZlcnRleD5cbiNpbmNsdWRlIDxjb2xvcl9wYXJzX3ZlcnRleD5cbiNpbmNsdWRlIDxmb2dfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8bW9ycGh0YXJnZXRfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8c2tpbm5pbmdfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfdmVydGV4Plxudm9pZCBtYWluKCkge1xuXHQjaW5jbHVkZSA8dXZfdmVydGV4PlxuXHQjaW5jbHVkZSA8dXYyX3ZlcnRleD5cblx0I2luY2x1ZGUgPGNvbG9yX3ZlcnRleD5cblx0I2luY2x1ZGUgPHNraW5iYXNlX3ZlcnRleD5cblx0I2lmZGVmIFVTRV9FTlZNQVBcblx0I2luY2x1ZGUgPGJlZ2lubm9ybWFsX3ZlcnRleD5cblx0I2luY2x1ZGUgPG1vcnBobm9ybWFsX3ZlcnRleD5cblx0I2luY2x1ZGUgPHNraW5ub3JtYWxfdmVydGV4PlxuXHQjaW5jbHVkZSA8ZGVmYXVsdG5vcm1hbF92ZXJ0ZXg+XG5cdCNlbmRpZlxuXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxuXHQjaW5jbHVkZSA8bW9ycGh0YXJnZXRfdmVydGV4PlxuXHQjaW5jbHVkZSA8c2tpbm5pbmdfdmVydGV4PlxuXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDx3b3JsZHBvc192ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfdmVydGV4PlxuXHQjaW5jbHVkZSA8ZW52bWFwX3ZlcnRleD5cblx0I2luY2x1ZGUgPGZvZ192ZXJ0ZXg+XG59XG4iO3ZhciBtZXNobGFtYmVydF9mcmFnPSJ1bmlmb3JtIHZlYzMgZGlmZnVzZTtcbnVuaWZvcm0gdmVjMyBlbWlzc2l2ZTtcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcbnZhcnlpbmcgdmVjMyB2TGlnaHRGcm9udDtcbiNpZmRlZiBET1VCTEVfU0lERURcblx0dmFyeWluZyB2ZWMzIHZMaWdodEJhY2s7XG4jZW5kaWZcbiNpbmNsdWRlIDxjb21tb24+XG4jaW5jbHVkZSA8cGFja2luZz5cbiNpbmNsdWRlIDxkaXRoZXJpbmdfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxjb2xvcl9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPHV2X3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8dXYyX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8bWFwX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8YWxwaGFtYXBfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxhb21hcF9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGxpZ2h0bWFwX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8ZW1pc3NpdmVtYXBfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxlbnZtYXBfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxic2Rmcz5cbiNpbmNsdWRlIDxsaWdodHNfcGFycz5cbiNpbmNsdWRlIDxmb2dfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxzaGFkb3dtYXBfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxzaGFkb3dtYXNrX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8c3BlY3VsYXJtYXBfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50Plxudm9pZCBtYWluKCkge1xuXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX2ZyYWdtZW50PlxuXHR2ZWM0IGRpZmZ1c2VDb2xvciA9IHZlYzQoIGRpZmZ1c2UsIG9wYWNpdHkgKTtcblx0UmVmbGVjdGVkTGlnaHQgcmVmbGVjdGVkTGlnaHQgPSBSZWZsZWN0ZWRMaWdodCggdmVjMyggMC4wICksIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICkgKTtcblx0dmVjMyB0b3RhbEVtaXNzaXZlUmFkaWFuY2UgPSBlbWlzc2l2ZTtcblx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8bWFwX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8Y29sb3JfZnJhZ21lbnQ+XG5cdCNpbmNsdWRlIDxhbHBoYW1hcF9mcmFnbWVudD5cblx0I2luY2x1ZGUgPGFscGhhdGVzdF9mcmFnbWVudD5cblx0I2luY2x1ZGUgPHNwZWN1bGFybWFwX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8ZW1pc3NpdmVtYXBfZnJhZ21lbnQ+XG5cdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSA9IGdldEFtYmllbnRMaWdodElycmFkaWFuY2UoIGFtYmllbnRMaWdodENvbG9yICk7XG5cdCNpbmNsdWRlIDxsaWdodG1hcF9mcmFnbWVudD5cblx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlICo9IEJSREZfRGlmZnVzZV9MYW1iZXJ0KCBkaWZmdXNlQ29sb3IucmdiICk7XG5cdCNpZmRlZiBET1VCTEVfU0lERURcblx0XHRyZWZsZWN0ZWRMaWdodC5kaXJlY3REaWZmdXNlID0gKCBnbF9Gcm9udEZhY2luZyApID8gdkxpZ2h0RnJvbnQgOiB2TGlnaHRCYWNrO1xuXHQjZWxzZVxuXHRcdHJlZmxlY3RlZExpZ2h0LmRpcmVjdERpZmZ1c2UgPSB2TGlnaHRGcm9udDtcblx0I2VuZGlmXG5cdHJlZmxlY3RlZExpZ2h0LmRpcmVjdERpZmZ1c2UgKj0gQlJERl9EaWZmdXNlX0xhbWJlcnQoIGRpZmZ1c2VDb2xvci5yZ2IgKSAqIGdldFNoYWRvd01hc2soKTtcblx0I2luY2x1ZGUgPGFvbWFwX2ZyYWdtZW50PlxuXHR2ZWMzIG91dGdvaW5nTGlnaHQgPSByZWZsZWN0ZWRMaWdodC5kaXJlY3REaWZmdXNlICsgcmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlICsgdG90YWxFbWlzc2l2ZVJhZGlhbmNlO1xuXHQjaW5jbHVkZSA8ZW52bWFwX2ZyYWdtZW50PlxuXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCBvdXRnb2luZ0xpZ2h0LCBkaWZmdXNlQ29sb3IuYSApO1xuXHQjaW5jbHVkZSA8dG9uZW1hcHBpbmdfZnJhZ21lbnQ+XG5cdCNpbmNsdWRlIDxlbmNvZGluZ3NfZnJhZ21lbnQ+XG5cdCNpbmNsdWRlIDxmb2dfZnJhZ21lbnQ+XG5cdCNpbmNsdWRlIDxwcmVtdWx0aXBsaWVkX2FscGhhX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8ZGl0aGVyaW5nX2ZyYWdtZW50PlxufVxuIjt2YXIgbWVzaGxhbWJlcnRfdmVydD0iI2RlZmluZSBMQU1CRVJUXG52YXJ5aW5nIHZlYzMgdkxpZ2h0RnJvbnQ7XG4jaWZkZWYgRE9VQkxFX1NJREVEXG5cdHZhcnlpbmcgdmVjMyB2TGlnaHRCYWNrO1xuI2VuZGlmXG4jaW5jbHVkZSA8Y29tbW9uPlxuI2luY2x1ZGUgPHV2X3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPHV2Ml9wYXJzX3ZlcnRleD5cbiNpbmNsdWRlIDxlbnZtYXBfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8YnNkZnM+XG4jaW5jbHVkZSA8bGlnaHRzX3BhcnM+XG4jaW5jbHVkZSA8Y29sb3JfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8Zm9nX3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPG1vcnBodGFyZ2V0X3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPHNraW5uaW5nX3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPHNoYWRvd21hcF9wYXJzX3ZlcnRleD5cbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX3ZlcnRleD5cbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc192ZXJ0ZXg+XG52b2lkIG1haW4oKSB7XG5cdCNpbmNsdWRlIDx1dl92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDx1djJfdmVydGV4PlxuXHQjaW5jbHVkZSA8Y29sb3JfdmVydGV4PlxuXHQjaW5jbHVkZSA8YmVnaW5ub3JtYWxfdmVydGV4PlxuXHQjaW5jbHVkZSA8bW9ycGhub3JtYWxfdmVydGV4PlxuXHQjaW5jbHVkZSA8c2tpbmJhc2VfdmVydGV4PlxuXHQjaW5jbHVkZSA8c2tpbm5vcm1hbF92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxkZWZhdWx0bm9ybWFsX3ZlcnRleD5cblx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cblx0I2luY2x1ZGUgPG1vcnBodGFyZ2V0X3ZlcnRleD5cblx0I2luY2x1ZGUgPHNraW5uaW5nX3ZlcnRleD5cblx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4PlxuXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfdmVydGV4PlxuXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3ZlcnRleD5cblx0I2luY2x1ZGUgPHdvcmxkcG9zX3ZlcnRleD5cblx0I2luY2x1ZGUgPGVudm1hcF92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxsaWdodHNfbGFtYmVydF92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxzaGFkb3dtYXBfdmVydGV4PlxuXHQjaW5jbHVkZSA8Zm9nX3ZlcnRleD5cbn1cbiI7dmFyIG1lc2hwaG9uZ19mcmFnPSIjZGVmaW5lIFBIT05HXG51bmlmb3JtIHZlYzMgZGlmZnVzZTtcbnVuaWZvcm0gdmVjMyBlbWlzc2l2ZTtcbnVuaWZvcm0gdmVjMyBzcGVjdWxhcjtcbnVuaWZvcm0gZmxvYXQgc2hpbmluZXNzO1xudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xuI2luY2x1ZGUgPGNvbW1vbj5cbiNpbmNsdWRlIDxwYWNraW5nPlxuI2luY2x1ZGUgPGRpdGhlcmluZ19wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8dXZfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDx1djJfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxtYXBfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxhbHBoYW1hcF9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGFvbWFwX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8bGlnaHRtYXBfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxlbWlzc2l2ZW1hcF9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGVudm1hcF9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGdyYWRpZW50bWFwX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8Zm9nX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8YnNkZnM+XG4jaW5jbHVkZSA8bGlnaHRzX3BhcnM+XG4jaW5jbHVkZSA8bGlnaHRzX3Bob25nX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8YnVtcG1hcF9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPG5vcm1hbG1hcF9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPHNwZWN1bGFybWFwX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc19mcmFnbWVudD5cbnZvaWQgbWFpbigpIHtcblx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudD5cblx0dmVjNCBkaWZmdXNlQ29sb3IgPSB2ZWM0KCBkaWZmdXNlLCBvcGFjaXR5ICk7XG5cdFJlZmxlY3RlZExpZ2h0IHJlZmxlY3RlZExpZ2h0ID0gUmVmbGVjdGVkTGlnaHQoIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICksIHZlYzMoIDAuMCApICk7XG5cdHZlYzMgdG90YWxFbWlzc2l2ZVJhZGlhbmNlID0gZW1pc3NpdmU7XG5cdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9mcmFnbWVudD5cblx0I2luY2x1ZGUgPG1hcF9mcmFnbWVudD5cblx0I2luY2x1ZGUgPGNvbG9yX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8YWxwaGFtYXBfZnJhZ21lbnQ+XG5cdCNpbmNsdWRlIDxhbHBoYXRlc3RfZnJhZ21lbnQ+XG5cdCNpbmNsdWRlIDxzcGVjdWxhcm1hcF9mcmFnbWVudD5cblx0I2luY2x1ZGUgPG5vcm1hbF9mcmFnbWVudD5cblx0I2luY2x1ZGUgPGVtaXNzaXZlbWFwX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8bGlnaHRzX3Bob25nX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8bGlnaHRzX3RlbXBsYXRlPlxuXHQjaW5jbHVkZSA8YW9tYXBfZnJhZ21lbnQ+XG5cdHZlYzMgb3V0Z29pbmdMaWdodCA9IHJlZmxlY3RlZExpZ2h0LmRpcmVjdERpZmZ1c2UgKyByZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKyByZWZsZWN0ZWRMaWdodC5kaXJlY3RTcGVjdWxhciArIHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0U3BlY3VsYXIgKyB0b3RhbEVtaXNzaXZlUmFkaWFuY2U7XG5cdCNpbmNsdWRlIDxlbnZtYXBfZnJhZ21lbnQ+XG5cdGdsX0ZyYWdDb2xvciA9IHZlYzQoIG91dGdvaW5nTGlnaHQsIGRpZmZ1c2VDb2xvci5hICk7XG5cdCNpbmNsdWRlIDx0b25lbWFwcGluZ19mcmFnbWVudD5cblx0I2luY2x1ZGUgPGVuY29kaW5nc19mcmFnbWVudD5cblx0I2luY2x1ZGUgPGZvZ19mcmFnbWVudD5cblx0I2luY2x1ZGUgPHByZW11bHRpcGxpZWRfYWxwaGFfZnJhZ21lbnQ+XG5cdCNpbmNsdWRlIDxkaXRoZXJpbmdfZnJhZ21lbnQ+XG59XG4iO3ZhciBtZXNocGhvbmdfdmVydD0iI2RlZmluZSBQSE9OR1xudmFyeWluZyB2ZWMzIHZWaWV3UG9zaXRpb247XG4jaWZuZGVmIEZMQVRfU0hBREVEXG5cdHZhcnlpbmcgdmVjMyB2Tm9ybWFsO1xuI2VuZGlmXG4jaW5jbHVkZSA8Y29tbW9uPlxuI2luY2x1ZGUgPHV2X3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPHV2Ml9wYXJzX3ZlcnRleD5cbiNpbmNsdWRlIDxkaXNwbGFjZW1lbnRtYXBfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8ZW52bWFwX3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPGZvZ19wYXJzX3ZlcnRleD5cbiNpbmNsdWRlIDxtb3JwaHRhcmdldF9wYXJzX3ZlcnRleD5cbiNpbmNsdWRlIDxza2lubmluZ19wYXJzX3ZlcnRleD5cbiNpbmNsdWRlIDxzaGFkb3dtYXBfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfdmVydGV4Plxudm9pZCBtYWluKCkge1xuXHQjaW5jbHVkZSA8dXZfdmVydGV4PlxuXHQjaW5jbHVkZSA8dXYyX3ZlcnRleD5cblx0I2luY2x1ZGUgPGNvbG9yX3ZlcnRleD5cblx0I2luY2x1ZGUgPGJlZ2lubm9ybWFsX3ZlcnRleD5cblx0I2luY2x1ZGUgPG1vcnBobm9ybWFsX3ZlcnRleD5cblx0I2luY2x1ZGUgPHNraW5iYXNlX3ZlcnRleD5cblx0I2luY2x1ZGUgPHNraW5ub3JtYWxfdmVydGV4PlxuXHQjaW5jbHVkZSA8ZGVmYXVsdG5vcm1hbF92ZXJ0ZXg+XG4jaWZuZGVmIEZMQVRfU0hBREVEXG5cdHZOb3JtYWwgPSBub3JtYWxpemUoIHRyYW5zZm9ybWVkTm9ybWFsICk7XG4jZW5kaWZcblx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cblx0I2luY2x1ZGUgPG1vcnBodGFyZ2V0X3ZlcnRleD5cblx0I2luY2x1ZGUgPHNraW5uaW5nX3ZlcnRleD5cblx0I2luY2x1ZGUgPGRpc3BsYWNlbWVudG1hcF92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxwcm9qZWN0X3ZlcnRleD5cblx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3ZlcnRleD5cblx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg+XG5cdHZWaWV3UG9zaXRpb24gPSAtIG12UG9zaXRpb24ueHl6O1xuXHQjaW5jbHVkZSA8d29ybGRwb3NfdmVydGV4PlxuXHQjaW5jbHVkZSA8ZW52bWFwX3ZlcnRleD5cblx0I2luY2x1ZGUgPHNoYWRvd21hcF92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxmb2dfdmVydGV4PlxufVxuIjt2YXIgbWVzaHBoeXNpY2FsX2ZyYWc9IiNkZWZpbmUgUEhZU0lDQUxcbnVuaWZvcm0gdmVjMyBkaWZmdXNlO1xudW5pZm9ybSB2ZWMzIGVtaXNzaXZlO1xudW5pZm9ybSBmbG9hdCByb3VnaG5lc3M7XG51bmlmb3JtIGZsb2F0IG1ldGFsbmVzcztcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcbiNpZm5kZWYgU1RBTkRBUkRcblx0dW5pZm9ybSBmbG9hdCBjbGVhckNvYXQ7XG5cdHVuaWZvcm0gZmxvYXQgY2xlYXJDb2F0Um91Z2huZXNzO1xuI2VuZGlmXG52YXJ5aW5nIHZlYzMgdlZpZXdQb3NpdGlvbjtcbiNpZm5kZWYgRkxBVF9TSEFERURcblx0dmFyeWluZyB2ZWMzIHZOb3JtYWw7XG4jZW5kaWZcbiNpbmNsdWRlIDxjb21tb24+XG4jaW5jbHVkZSA8cGFja2luZz5cbiNpbmNsdWRlIDxkaXRoZXJpbmdfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxjb2xvcl9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPHV2X3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8dXYyX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8bWFwX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8YWxwaGFtYXBfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxhb21hcF9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGxpZ2h0bWFwX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8ZW1pc3NpdmVtYXBfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxlbnZtYXBfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxmb2dfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxic2Rmcz5cbiNpbmNsdWRlIDxjdWJlX3V2X3JlZmxlY3Rpb25fZnJhZ21lbnQ+XG4jaW5jbHVkZSA8bGlnaHRzX3BhcnM+XG4jaW5jbHVkZSA8bGlnaHRzX3BoeXNpY2FsX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8YnVtcG1hcF9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPG5vcm1hbG1hcF9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPHJvdWdobmVzc21hcF9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPG1ldGFsbmVzc21hcF9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ+XG52b2lkIG1haW4oKSB7XG5cdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfZnJhZ21lbnQ+XG5cdHZlYzQgZGlmZnVzZUNvbG9yID0gdmVjNCggZGlmZnVzZSwgb3BhY2l0eSApO1xuXHRSZWZsZWN0ZWRMaWdodCByZWZsZWN0ZWRMaWdodCA9IFJlZmxlY3RlZExpZ2h0KCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICksIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSApO1xuXHR2ZWMzIHRvdGFsRW1pc3NpdmVSYWRpYW5jZSA9IGVtaXNzaXZlO1xuXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfZnJhZ21lbnQ+XG5cdCNpbmNsdWRlIDxtYXBfZnJhZ21lbnQ+XG5cdCNpbmNsdWRlIDxjb2xvcl9mcmFnbWVudD5cblx0I2luY2x1ZGUgPGFscGhhbWFwX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8YWxwaGF0ZXN0X2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8cm91Z2huZXNzbWFwX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8bWV0YWxuZXNzbWFwX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8bm9ybWFsX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8ZW1pc3NpdmVtYXBfZnJhZ21lbnQ+XG5cdCNpbmNsdWRlIDxsaWdodHNfcGh5c2ljYWxfZnJhZ21lbnQ+XG5cdCNpbmNsdWRlIDxsaWdodHNfdGVtcGxhdGU+XG5cdCNpbmNsdWRlIDxhb21hcF9mcmFnbWVudD5cblx0dmVjMyBvdXRnb2luZ0xpZ2h0ID0gcmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSArIHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSArIHJlZmxlY3RlZExpZ2h0LmRpcmVjdFNwZWN1bGFyICsgcmVmbGVjdGVkTGlnaHQuaW5kaXJlY3RTcGVjdWxhciArIHRvdGFsRW1pc3NpdmVSYWRpYW5jZTtcblx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggb3V0Z29pbmdMaWdodCwgZGlmZnVzZUNvbG9yLmEgKTtcblx0I2luY2x1ZGUgPHRvbmVtYXBwaW5nX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8ZW5jb2RpbmdzX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8Zm9nX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8cHJlbXVsdGlwbGllZF9hbHBoYV9mcmFnbWVudD5cblx0I2luY2x1ZGUgPGRpdGhlcmluZ19mcmFnbWVudD5cbn1cbiI7dmFyIG1lc2hwaHlzaWNhbF92ZXJ0PSIjZGVmaW5lIFBIWVNJQ0FMXG52YXJ5aW5nIHZlYzMgdlZpZXdQb3NpdGlvbjtcbiNpZm5kZWYgRkxBVF9TSEFERURcblx0dmFyeWluZyB2ZWMzIHZOb3JtYWw7XG4jZW5kaWZcbiNpbmNsdWRlIDxjb21tb24+XG4jaW5jbHVkZSA8dXZfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8dXYyX3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPGRpc3BsYWNlbWVudG1hcF9wYXJzX3ZlcnRleD5cbiNpbmNsdWRlIDxjb2xvcl9wYXJzX3ZlcnRleD5cbiNpbmNsdWRlIDxmb2dfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8bW9ycGh0YXJnZXRfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8c2tpbm5pbmdfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleD5cbnZvaWQgbWFpbigpIHtcblx0I2luY2x1ZGUgPHV2X3ZlcnRleD5cblx0I2luY2x1ZGUgPHV2Ml92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxjb2xvcl92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxiZWdpbm5vcm1hbF92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxtb3JwaG5vcm1hbF92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxza2luYmFzZV92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxza2lubm9ybWFsX3ZlcnRleD5cblx0I2luY2x1ZGUgPGRlZmF1bHRub3JtYWxfdmVydGV4PlxuI2lmbmRlZiBGTEFUX1NIQURFRFxuXHR2Tm9ybWFsID0gbm9ybWFsaXplKCB0cmFuc2Zvcm1lZE5vcm1hbCApO1xuI2VuZGlmXG5cdCNpbmNsdWRlIDxiZWdpbl92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxtb3JwaHRhcmdldF92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxza2lubmluZ192ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxkaXNwbGFjZW1lbnRtYXBfdmVydGV4PlxuXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfdmVydGV4PlxuXHR2Vmlld1Bvc2l0aW9uID0gLSBtdlBvc2l0aW9uLnh5ejtcblx0I2luY2x1ZGUgPHdvcmxkcG9zX3ZlcnRleD5cblx0I2luY2x1ZGUgPHNoYWRvd21hcF92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxmb2dfdmVydGV4PlxufVxuIjt2YXIgbm9ybWFsX2ZyYWc9IiNkZWZpbmUgTk9STUFMXG51bmlmb3JtIGZsb2F0IG9wYWNpdHk7XG4jaWYgZGVmaW5lZCggRkxBVF9TSEFERUQgKSB8fCBkZWZpbmVkKCBVU0VfQlVNUE1BUCApIHx8IGRlZmluZWQoIFVTRV9OT1JNQUxNQVAgKVxuXHR2YXJ5aW5nIHZlYzMgdlZpZXdQb3NpdGlvbjtcbiNlbmRpZlxuI2lmbmRlZiBGTEFUX1NIQURFRFxuXHR2YXJ5aW5nIHZlYzMgdk5vcm1hbDtcbiNlbmRpZlxuI2luY2x1ZGUgPHBhY2tpbmc+XG4jaW5jbHVkZSA8dXZfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxidW1wbWFwX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8bm9ybWFsbWFwX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc19mcmFnbWVudD5cbnZvaWQgbWFpbigpIHtcblx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8bm9ybWFsX2ZyYWdtZW50PlxuXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCBwYWNrTm9ybWFsVG9SR0IoIG5vcm1hbCApLCBvcGFjaXR5ICk7XG59XG4iO3ZhciBub3JtYWxfdmVydD0iI2RlZmluZSBOT1JNQUxcbiNpZiBkZWZpbmVkKCBGTEFUX1NIQURFRCApIHx8IGRlZmluZWQoIFVTRV9CVU1QTUFQICkgfHwgZGVmaW5lZCggVVNFX05PUk1BTE1BUCApXG5cdHZhcnlpbmcgdmVjMyB2Vmlld1Bvc2l0aW9uO1xuI2VuZGlmXG4jaWZuZGVmIEZMQVRfU0hBREVEXG5cdHZhcnlpbmcgdmVjMyB2Tm9ybWFsO1xuI2VuZGlmXG4jaW5jbHVkZSA8dXZfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8ZGlzcGxhY2VtZW50bWFwX3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPG1vcnBodGFyZ2V0X3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPHNraW5uaW5nX3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfdmVydGV4Plxudm9pZCBtYWluKCkge1xuXHQjaW5jbHVkZSA8dXZfdmVydGV4PlxuXHQjaW5jbHVkZSA8YmVnaW5ub3JtYWxfdmVydGV4PlxuXHQjaW5jbHVkZSA8bW9ycGhub3JtYWxfdmVydGV4PlxuXHQjaW5jbHVkZSA8c2tpbmJhc2VfdmVydGV4PlxuXHQjaW5jbHVkZSA8c2tpbm5vcm1hbF92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxkZWZhdWx0bm9ybWFsX3ZlcnRleD5cbiNpZm5kZWYgRkxBVF9TSEFERURcblx0dk5vcm1hbCA9IG5vcm1hbGl6ZSggdHJhbnNmb3JtZWROb3JtYWwgKTtcbiNlbmRpZlxuXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxuXHQjaW5jbHVkZSA8bW9ycGh0YXJnZXRfdmVydGV4PlxuXHQjaW5jbHVkZSA8c2tpbm5pbmdfdmVydGV4PlxuXHQjaW5jbHVkZSA8ZGlzcGxhY2VtZW50bWFwX3ZlcnRleD5cblx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4PlxuXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfdmVydGV4PlxuI2lmIGRlZmluZWQoIEZMQVRfU0hBREVEICkgfHwgZGVmaW5lZCggVVNFX0JVTVBNQVAgKSB8fCBkZWZpbmVkKCBVU0VfTk9STUFMTUFQIClcblx0dlZpZXdQb3NpdGlvbiA9IC0gbXZQb3NpdGlvbi54eXo7XG4jZW5kaWZcbn1cbiI7dmFyIHBvaW50c19mcmFnPSJ1bmlmb3JtIHZlYzMgZGlmZnVzZTtcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcbiNpbmNsdWRlIDxjb21tb24+XG4jaW5jbHVkZSA8cGFja2luZz5cbiNpbmNsdWRlIDxjb2xvcl9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPG1hcF9wYXJ0aWNsZV9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGZvZ19wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPHNoYWRvd21hcF9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ+XG52b2lkIG1haW4oKSB7XG5cdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfZnJhZ21lbnQ+XG5cdHZlYzMgb3V0Z29pbmdMaWdodCA9IHZlYzMoIDAuMCApO1xuXHR2ZWM0IGRpZmZ1c2VDb2xvciA9IHZlYzQoIGRpZmZ1c2UsIG9wYWNpdHkgKTtcblx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8bWFwX3BhcnRpY2xlX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8Y29sb3JfZnJhZ21lbnQ+XG5cdCNpbmNsdWRlIDxhbHBoYXRlc3RfZnJhZ21lbnQ+XG5cdG91dGdvaW5nTGlnaHQgPSBkaWZmdXNlQ29sb3IucmdiO1xuXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCBvdXRnb2luZ0xpZ2h0LCBkaWZmdXNlQ29sb3IuYSApO1xuXHQjaW5jbHVkZSA8cHJlbXVsdGlwbGllZF9hbHBoYV9mcmFnbWVudD5cblx0I2luY2x1ZGUgPHRvbmVtYXBwaW5nX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8ZW5jb2RpbmdzX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8Zm9nX2ZyYWdtZW50PlxufVxuIjt2YXIgcG9pbnRzX3ZlcnQ9InVuaWZvcm0gZmxvYXQgc2l6ZTtcbnVuaWZvcm0gZmxvYXQgc2NhbGU7XG4jaW5jbHVkZSA8Y29tbW9uPlxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPGZvZ19wYXJzX3ZlcnRleD5cbiNpbmNsdWRlIDxzaGFkb3dtYXBfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfdmVydGV4Plxudm9pZCBtYWluKCkge1xuXHQjaW5jbHVkZSA8Y29sb3JfdmVydGV4PlxuXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxuXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XG5cdCNpZmRlZiBVU0VfU0laRUFUVEVOVUFUSU9OXG5cdFx0Z2xfUG9pbnRTaXplID0gc2l6ZSAqICggc2NhbGUgLyAtIG12UG9zaXRpb24ueiApO1xuXHQjZWxzZVxuXHRcdGdsX1BvaW50U2l6ZSA9IHNpemU7XG5cdCNlbmRpZlxuXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfdmVydGV4PlxuXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3ZlcnRleD5cblx0I2luY2x1ZGUgPHdvcmxkcG9zX3ZlcnRleD5cblx0I2luY2x1ZGUgPHNoYWRvd21hcF92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxmb2dfdmVydGV4PlxufVxuIjt2YXIgc2hhZG93X2ZyYWc9InVuaWZvcm0gdmVjMyBjb2xvcjtcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcbiNpbmNsdWRlIDxjb21tb24+XG4jaW5jbHVkZSA8cGFja2luZz5cbiNpbmNsdWRlIDxmb2dfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxic2Rmcz5cbiNpbmNsdWRlIDxsaWdodHNfcGFycz5cbiNpbmNsdWRlIDxzaGFkb3dtYXBfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxzaGFkb3dtYXNrX3BhcnNfZnJhZ21lbnQ+XG52b2lkIG1haW4oKSB7XG5cdGdsX0ZyYWdDb2xvciA9IHZlYzQoIGNvbG9yLCBvcGFjaXR5ICogKCAxLjAgLSBnZXRTaGFkb3dNYXNrKCkgKSApO1xuXHQjaW5jbHVkZSA8Zm9nX2ZyYWdtZW50PlxufVxuIjt2YXIgc2hhZG93X3ZlcnQ9IiNpbmNsdWRlIDxmb2dfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfdmVydGV4Plxudm9pZCBtYWluKCkge1xuXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxuXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDx3b3JsZHBvc192ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxzaGFkb3dtYXBfdmVydGV4PlxuXHQjaW5jbHVkZSA8Zm9nX3ZlcnRleD5cbn1cbiI7dmFyIFNoYWRlckNodW5rPXthbHBoYW1hcF9mcmFnbWVudDphbHBoYW1hcF9mcmFnbWVudCxhbHBoYW1hcF9wYXJzX2ZyYWdtZW50OmFscGhhbWFwX3BhcnNfZnJhZ21lbnQsYWxwaGF0ZXN0X2ZyYWdtZW50OmFscGhhdGVzdF9mcmFnbWVudCxhb21hcF9mcmFnbWVudDphb21hcF9mcmFnbWVudCxhb21hcF9wYXJzX2ZyYWdtZW50OmFvbWFwX3BhcnNfZnJhZ21lbnQsYmVnaW5fdmVydGV4OmJlZ2luX3ZlcnRleCxiZWdpbm5vcm1hbF92ZXJ0ZXg6YmVnaW5ub3JtYWxfdmVydGV4LGJzZGZzOmJzZGZzLGJ1bXBtYXBfcGFyc19mcmFnbWVudDpidW1wbWFwX3BhcnNfZnJhZ21lbnQsY2xpcHBpbmdfcGxhbmVzX2ZyYWdtZW50OmNsaXBwaW5nX3BsYW5lc19mcmFnbWVudCxjbGlwcGluZ19wbGFuZXNfcGFyc19mcmFnbWVudDpjbGlwcGluZ19wbGFuZXNfcGFyc19mcmFnbWVudCxjbGlwcGluZ19wbGFuZXNfcGFyc192ZXJ0ZXg6Y2xpcHBpbmdfcGxhbmVzX3BhcnNfdmVydGV4LGNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg6Y2xpcHBpbmdfcGxhbmVzX3ZlcnRleCxjb2xvcl9mcmFnbWVudDpjb2xvcl9mcmFnbWVudCxjb2xvcl9wYXJzX2ZyYWdtZW50OmNvbG9yX3BhcnNfZnJhZ21lbnQsY29sb3JfcGFyc192ZXJ0ZXg6Y29sb3JfcGFyc192ZXJ0ZXgsY29sb3JfdmVydGV4OmNvbG9yX3ZlcnRleCxjb21tb246Y29tbW9uLGN1YmVfdXZfcmVmbGVjdGlvbl9mcmFnbWVudDpjdWJlX3V2X3JlZmxlY3Rpb25fZnJhZ21lbnQsZGVmYXVsdG5vcm1hbF92ZXJ0ZXg6ZGVmYXVsdG5vcm1hbF92ZXJ0ZXgsZGlzcGxhY2VtZW50bWFwX3BhcnNfdmVydGV4OmRpc3BsYWNlbWVudG1hcF9wYXJzX3ZlcnRleCxkaXNwbGFjZW1lbnRtYXBfdmVydGV4OmRpc3BsYWNlbWVudG1hcF92ZXJ0ZXgsZW1pc3NpdmVtYXBfZnJhZ21lbnQ6ZW1pc3NpdmVtYXBfZnJhZ21lbnQsZW1pc3NpdmVtYXBfcGFyc19mcmFnbWVudDplbWlzc2l2ZW1hcF9wYXJzX2ZyYWdtZW50LGVuY29kaW5nc19mcmFnbWVudDplbmNvZGluZ3NfZnJhZ21lbnQsZW5jb2RpbmdzX3BhcnNfZnJhZ21lbnQ6ZW5jb2RpbmdzX3BhcnNfZnJhZ21lbnQsZW52bWFwX2ZyYWdtZW50OmVudm1hcF9mcmFnbWVudCxlbnZtYXBfcGFyc19mcmFnbWVudDplbnZtYXBfcGFyc19mcmFnbWVudCxlbnZtYXBfcGFyc192ZXJ0ZXg6ZW52bWFwX3BhcnNfdmVydGV4LGVudm1hcF92ZXJ0ZXg6ZW52bWFwX3ZlcnRleCxmb2dfdmVydGV4OmZvZ192ZXJ0ZXgsZm9nX3BhcnNfdmVydGV4OmZvZ19wYXJzX3ZlcnRleCxmb2dfZnJhZ21lbnQ6Zm9nX2ZyYWdtZW50LGZvZ19wYXJzX2ZyYWdtZW50OmZvZ19wYXJzX2ZyYWdtZW50LGdyYWRpZW50bWFwX3BhcnNfZnJhZ21lbnQ6Z3JhZGllbnRtYXBfcGFyc19mcmFnbWVudCxsaWdodG1hcF9mcmFnbWVudDpsaWdodG1hcF9mcmFnbWVudCxsaWdodG1hcF9wYXJzX2ZyYWdtZW50OmxpZ2h0bWFwX3BhcnNfZnJhZ21lbnQsbGlnaHRzX2xhbWJlcnRfdmVydGV4OmxpZ2h0c19sYW1iZXJ0X3ZlcnRleCxsaWdodHNfcGFyczpsaWdodHNfcGFycyxsaWdodHNfcGhvbmdfZnJhZ21lbnQ6bGlnaHRzX3Bob25nX2ZyYWdtZW50LGxpZ2h0c19waG9uZ19wYXJzX2ZyYWdtZW50OmxpZ2h0c19waG9uZ19wYXJzX2ZyYWdtZW50LGxpZ2h0c19waHlzaWNhbF9mcmFnbWVudDpsaWdodHNfcGh5c2ljYWxfZnJhZ21lbnQsbGlnaHRzX3BoeXNpY2FsX3BhcnNfZnJhZ21lbnQ6bGlnaHRzX3BoeXNpY2FsX3BhcnNfZnJhZ21lbnQsbGlnaHRzX3RlbXBsYXRlOmxpZ2h0c190ZW1wbGF0ZSxsb2dkZXB0aGJ1Zl9mcmFnbWVudDpsb2dkZXB0aGJ1Zl9mcmFnbWVudCxsb2dkZXB0aGJ1Zl9wYXJzX2ZyYWdtZW50OmxvZ2RlcHRoYnVmX3BhcnNfZnJhZ21lbnQsbG9nZGVwdGhidWZfcGFyc192ZXJ0ZXg6bG9nZGVwdGhidWZfcGFyc192ZXJ0ZXgsbG9nZGVwdGhidWZfdmVydGV4OmxvZ2RlcHRoYnVmX3ZlcnRleCxtYXBfZnJhZ21lbnQ6bWFwX2ZyYWdtZW50LG1hcF9wYXJzX2ZyYWdtZW50Om1hcF9wYXJzX2ZyYWdtZW50LG1hcF9wYXJ0aWNsZV9mcmFnbWVudDptYXBfcGFydGljbGVfZnJhZ21lbnQsbWFwX3BhcnRpY2xlX3BhcnNfZnJhZ21lbnQ6bWFwX3BhcnRpY2xlX3BhcnNfZnJhZ21lbnQsbWV0YWxuZXNzbWFwX2ZyYWdtZW50Om1ldGFsbmVzc21hcF9mcmFnbWVudCxtZXRhbG5lc3NtYXBfcGFyc19mcmFnbWVudDptZXRhbG5lc3NtYXBfcGFyc19mcmFnbWVudCxtb3JwaG5vcm1hbF92ZXJ0ZXg6bW9ycGhub3JtYWxfdmVydGV4LG1vcnBodGFyZ2V0X3BhcnNfdmVydGV4Om1vcnBodGFyZ2V0X3BhcnNfdmVydGV4LG1vcnBodGFyZ2V0X3ZlcnRleDptb3JwaHRhcmdldF92ZXJ0ZXgsbm9ybWFsX2ZyYWdtZW50Om5vcm1hbF9mcmFnbWVudCxub3JtYWxtYXBfcGFyc19mcmFnbWVudDpub3JtYWxtYXBfcGFyc19mcmFnbWVudCxwYWNraW5nOnBhY2tpbmcscHJlbXVsdGlwbGllZF9hbHBoYV9mcmFnbWVudDpwcmVtdWx0aXBsaWVkX2FscGhhX2ZyYWdtZW50LHByb2plY3RfdmVydGV4OnByb2plY3RfdmVydGV4LGRpdGhlcmluZ19mcmFnbWVudDpkaXRoZXJpbmdfZnJhZ21lbnQsZGl0aGVyaW5nX3BhcnNfZnJhZ21lbnQ6ZGl0aGVyaW5nX3BhcnNfZnJhZ21lbnQscm91Z2huZXNzbWFwX2ZyYWdtZW50OnJvdWdobmVzc21hcF9mcmFnbWVudCxyb3VnaG5lc3NtYXBfcGFyc19mcmFnbWVudDpyb3VnaG5lc3NtYXBfcGFyc19mcmFnbWVudCxzaGFkb3dtYXBfcGFyc19mcmFnbWVudDpzaGFkb3dtYXBfcGFyc19mcmFnbWVudCxzaGFkb3dtYXBfcGFyc192ZXJ0ZXg6c2hhZG93bWFwX3BhcnNfdmVydGV4LHNoYWRvd21hcF92ZXJ0ZXg6c2hhZG93bWFwX3ZlcnRleCxzaGFkb3dtYXNrX3BhcnNfZnJhZ21lbnQ6c2hhZG93bWFza19wYXJzX2ZyYWdtZW50LHNraW5iYXNlX3ZlcnRleDpza2luYmFzZV92ZXJ0ZXgsc2tpbm5pbmdfcGFyc192ZXJ0ZXg6c2tpbm5pbmdfcGFyc192ZXJ0ZXgsc2tpbm5pbmdfdmVydGV4OnNraW5uaW5nX3ZlcnRleCxza2lubm9ybWFsX3ZlcnRleDpza2lubm9ybWFsX3ZlcnRleCxzcGVjdWxhcm1hcF9mcmFnbWVudDpzcGVjdWxhcm1hcF9mcmFnbWVudCxzcGVjdWxhcm1hcF9wYXJzX2ZyYWdtZW50OnNwZWN1bGFybWFwX3BhcnNfZnJhZ21lbnQsdG9uZW1hcHBpbmdfZnJhZ21lbnQ6dG9uZW1hcHBpbmdfZnJhZ21lbnQsdG9uZW1hcHBpbmdfcGFyc19mcmFnbWVudDp0b25lbWFwcGluZ19wYXJzX2ZyYWdtZW50LHV2X3BhcnNfZnJhZ21lbnQ6dXZfcGFyc19mcmFnbWVudCx1dl9wYXJzX3ZlcnRleDp1dl9wYXJzX3ZlcnRleCx1dl92ZXJ0ZXg6dXZfdmVydGV4LHV2Ml9wYXJzX2ZyYWdtZW50OnV2Ml9wYXJzX2ZyYWdtZW50LHV2Ml9wYXJzX3ZlcnRleDp1djJfcGFyc192ZXJ0ZXgsdXYyX3ZlcnRleDp1djJfdmVydGV4LHdvcmxkcG9zX3ZlcnRleDp3b3JsZHBvc192ZXJ0ZXgsY3ViZV9mcmFnOmN1YmVfZnJhZyxjdWJlX3ZlcnQ6Y3ViZV92ZXJ0LGRlcHRoX2ZyYWc6ZGVwdGhfZnJhZyxkZXB0aF92ZXJ0OmRlcHRoX3ZlcnQsZGlzdGFuY2VSR0JBX2ZyYWc6ZGlzdGFuY2VSR0JBX2ZyYWcsZGlzdGFuY2VSR0JBX3ZlcnQ6ZGlzdGFuY2VSR0JBX3ZlcnQsZXF1aXJlY3RfZnJhZzplcXVpcmVjdF9mcmFnLGVxdWlyZWN0X3ZlcnQ6ZXF1aXJlY3RfdmVydCxsaW5lZGFzaGVkX2ZyYWc6bGluZWRhc2hlZF9mcmFnLGxpbmVkYXNoZWRfdmVydDpsaW5lZGFzaGVkX3ZlcnQsbWVzaGJhc2ljX2ZyYWc6bWVzaGJhc2ljX2ZyYWcsbWVzaGJhc2ljX3ZlcnQ6bWVzaGJhc2ljX3ZlcnQsbWVzaGxhbWJlcnRfZnJhZzptZXNobGFtYmVydF9mcmFnLG1lc2hsYW1iZXJ0X3ZlcnQ6bWVzaGxhbWJlcnRfdmVydCxtZXNocGhvbmdfZnJhZzptZXNocGhvbmdfZnJhZyxtZXNocGhvbmdfdmVydDptZXNocGhvbmdfdmVydCxtZXNocGh5c2ljYWxfZnJhZzptZXNocGh5c2ljYWxfZnJhZyxtZXNocGh5c2ljYWxfdmVydDptZXNocGh5c2ljYWxfdmVydCxub3JtYWxfZnJhZzpub3JtYWxfZnJhZyxub3JtYWxfdmVydDpub3JtYWxfdmVydCxwb2ludHNfZnJhZzpwb2ludHNfZnJhZyxwb2ludHNfdmVydDpwb2ludHNfdmVydCxzaGFkb3dfZnJhZzpzaGFkb3dfZnJhZyxzaGFkb3dfdmVydDpzaGFkb3dfdmVydH07LyoqCiAqIEBhdXRob3IgYWx0ZXJlZHEgLyBodHRwOi8vYWx0ZXJlZHF1YWxpYS5jb20vCiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vCiAqIEBhdXRob3IgbWlrYWVsIGVtdGluZ2VyIC8gaHR0cDovL2dvbW8uc2UvCiAqL3ZhciBTaGFkZXJMaWI9e2Jhc2ljOnt1bmlmb3JtczpVbmlmb3Jtc1V0aWxzLm1lcmdlKFtVbmlmb3Jtc0xpYi5jb21tb24sVW5pZm9ybXNMaWIuc3BlY3VsYXJtYXAsVW5pZm9ybXNMaWIuZW52bWFwLFVuaWZvcm1zTGliLmFvbWFwLFVuaWZvcm1zTGliLmxpZ2h0bWFwLFVuaWZvcm1zTGliLmZvZ10pLHZlcnRleFNoYWRlcjpTaGFkZXJDaHVuay5tZXNoYmFzaWNfdmVydCxmcmFnbWVudFNoYWRlcjpTaGFkZXJDaHVuay5tZXNoYmFzaWNfZnJhZ30sbGFtYmVydDp7dW5pZm9ybXM6VW5pZm9ybXNVdGlscy5tZXJnZShbVW5pZm9ybXNMaWIuY29tbW9uLFVuaWZvcm1zTGliLnNwZWN1bGFybWFwLFVuaWZvcm1zTGliLmVudm1hcCxVbmlmb3Jtc0xpYi5hb21hcCxVbmlmb3Jtc0xpYi5saWdodG1hcCxVbmlmb3Jtc0xpYi5lbWlzc2l2ZW1hcCxVbmlmb3Jtc0xpYi5mb2csVW5pZm9ybXNMaWIubGlnaHRzLHtlbWlzc2l2ZTp7dmFsdWU6bmV3IENvbG9yKDB4MDAwMDAwKX19XSksdmVydGV4U2hhZGVyOlNoYWRlckNodW5rLm1lc2hsYW1iZXJ0X3ZlcnQsZnJhZ21lbnRTaGFkZXI6U2hhZGVyQ2h1bmsubWVzaGxhbWJlcnRfZnJhZ30scGhvbmc6e3VuaWZvcm1zOlVuaWZvcm1zVXRpbHMubWVyZ2UoW1VuaWZvcm1zTGliLmNvbW1vbixVbmlmb3Jtc0xpYi5zcGVjdWxhcm1hcCxVbmlmb3Jtc0xpYi5lbnZtYXAsVW5pZm9ybXNMaWIuYW9tYXAsVW5pZm9ybXNMaWIubGlnaHRtYXAsVW5pZm9ybXNMaWIuZW1pc3NpdmVtYXAsVW5pZm9ybXNMaWIuYnVtcG1hcCxVbmlmb3Jtc0xpYi5ub3JtYWxtYXAsVW5pZm9ybXNMaWIuZGlzcGxhY2VtZW50bWFwLFVuaWZvcm1zTGliLmdyYWRpZW50bWFwLFVuaWZvcm1zTGliLmZvZyxVbmlmb3Jtc0xpYi5saWdodHMse2VtaXNzaXZlOnt2YWx1ZTpuZXcgQ29sb3IoMHgwMDAwMDApfSxzcGVjdWxhcjp7dmFsdWU6bmV3IENvbG9yKDB4MTExMTExKX0sc2hpbmluZXNzOnt2YWx1ZTozMH19XSksdmVydGV4U2hhZGVyOlNoYWRlckNodW5rLm1lc2hwaG9uZ192ZXJ0LGZyYWdtZW50U2hhZGVyOlNoYWRlckNodW5rLm1lc2hwaG9uZ19mcmFnfSxzdGFuZGFyZDp7dW5pZm9ybXM6VW5pZm9ybXNVdGlscy5tZXJnZShbVW5pZm9ybXNMaWIuY29tbW9uLFVuaWZvcm1zTGliLmVudm1hcCxVbmlmb3Jtc0xpYi5hb21hcCxVbmlmb3Jtc0xpYi5saWdodG1hcCxVbmlmb3Jtc0xpYi5lbWlzc2l2ZW1hcCxVbmlmb3Jtc0xpYi5idW1wbWFwLFVuaWZvcm1zTGliLm5vcm1hbG1hcCxVbmlmb3Jtc0xpYi5kaXNwbGFjZW1lbnRtYXAsVW5pZm9ybXNMaWIucm91Z2huZXNzbWFwLFVuaWZvcm1zTGliLm1ldGFsbmVzc21hcCxVbmlmb3Jtc0xpYi5mb2csVW5pZm9ybXNMaWIubGlnaHRzLHtlbWlzc2l2ZTp7dmFsdWU6bmV3IENvbG9yKDB4MDAwMDAwKX0scm91Z2huZXNzOnt2YWx1ZTowLjV9LG1ldGFsbmVzczp7dmFsdWU6MC41fSxlbnZNYXBJbnRlbnNpdHk6e3ZhbHVlOjF9Ly8gdGVtcG9yYXJ5Cn1dKSx2ZXJ0ZXhTaGFkZXI6U2hhZGVyQ2h1bmsubWVzaHBoeXNpY2FsX3ZlcnQsZnJhZ21lbnRTaGFkZXI6U2hhZGVyQ2h1bmsubWVzaHBoeXNpY2FsX2ZyYWd9LHBvaW50czp7dW5pZm9ybXM6VW5pZm9ybXNVdGlscy5tZXJnZShbVW5pZm9ybXNMaWIucG9pbnRzLFVuaWZvcm1zTGliLmZvZ10pLHZlcnRleFNoYWRlcjpTaGFkZXJDaHVuay5wb2ludHNfdmVydCxmcmFnbWVudFNoYWRlcjpTaGFkZXJDaHVuay5wb2ludHNfZnJhZ30sZGFzaGVkOnt1bmlmb3JtczpVbmlmb3Jtc1V0aWxzLm1lcmdlKFtVbmlmb3Jtc0xpYi5jb21tb24sVW5pZm9ybXNMaWIuZm9nLHtzY2FsZTp7dmFsdWU6MX0sZGFzaFNpemU6e3ZhbHVlOjF9LHRvdGFsU2l6ZTp7dmFsdWU6Mn19XSksdmVydGV4U2hhZGVyOlNoYWRlckNodW5rLmxpbmVkYXNoZWRfdmVydCxmcmFnbWVudFNoYWRlcjpTaGFkZXJDaHVuay5saW5lZGFzaGVkX2ZyYWd9LGRlcHRoOnt1bmlmb3JtczpVbmlmb3Jtc1V0aWxzLm1lcmdlKFtVbmlmb3Jtc0xpYi5jb21tb24sVW5pZm9ybXNMaWIuZGlzcGxhY2VtZW50bWFwXSksdmVydGV4U2hhZGVyOlNoYWRlckNodW5rLmRlcHRoX3ZlcnQsZnJhZ21lbnRTaGFkZXI6U2hhZGVyQ2h1bmsuZGVwdGhfZnJhZ30sbm9ybWFsOnt1bmlmb3JtczpVbmlmb3Jtc1V0aWxzLm1lcmdlKFtVbmlmb3Jtc0xpYi5jb21tb24sVW5pZm9ybXNMaWIuYnVtcG1hcCxVbmlmb3Jtc0xpYi5ub3JtYWxtYXAsVW5pZm9ybXNMaWIuZGlzcGxhY2VtZW50bWFwLHtvcGFjaXR5Ont2YWx1ZToxLjB9fV0pLHZlcnRleFNoYWRlcjpTaGFkZXJDaHVuay5ub3JtYWxfdmVydCxmcmFnbWVudFNoYWRlcjpTaGFkZXJDaHVuay5ub3JtYWxfZnJhZ30sLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJLy8JQ3ViZSBtYXAgc2hhZGVyCgkgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL2N1YmU6e3VuaWZvcm1zOnt0Q3ViZTp7dmFsdWU6bnVsbH0sdEZsaXA6e3ZhbHVlOi0xfSxvcGFjaXR5Ont2YWx1ZToxLjB9fSx2ZXJ0ZXhTaGFkZXI6U2hhZGVyQ2h1bmsuY3ViZV92ZXJ0LGZyYWdtZW50U2hhZGVyOlNoYWRlckNodW5rLmN1YmVfZnJhZ30sZXF1aXJlY3Q6e3VuaWZvcm1zOnt0RXF1aXJlY3Q6e3ZhbHVlOm51bGx9fSx2ZXJ0ZXhTaGFkZXI6U2hhZGVyQ2h1bmsuZXF1aXJlY3RfdmVydCxmcmFnbWVudFNoYWRlcjpTaGFkZXJDaHVuay5lcXVpcmVjdF9mcmFnfSxkaXN0YW5jZVJHQkE6e3VuaWZvcm1zOlVuaWZvcm1zVXRpbHMubWVyZ2UoW1VuaWZvcm1zTGliLmNvbW1vbixVbmlmb3Jtc0xpYi5kaXNwbGFjZW1lbnRtYXAse3JlZmVyZW5jZVBvc2l0aW9uOnt2YWx1ZTpuZXcgVmVjdG9yMygpfSxuZWFyRGlzdGFuY2U6e3ZhbHVlOjF9LGZhckRpc3RhbmNlOnt2YWx1ZToxMDAwfX1dKSx2ZXJ0ZXhTaGFkZXI6U2hhZGVyQ2h1bmsuZGlzdGFuY2VSR0JBX3ZlcnQsZnJhZ21lbnRTaGFkZXI6U2hhZGVyQ2h1bmsuZGlzdGFuY2VSR0JBX2ZyYWd9LHNoYWRvdzp7dW5pZm9ybXM6VW5pZm9ybXNVdGlscy5tZXJnZShbVW5pZm9ybXNMaWIubGlnaHRzLFVuaWZvcm1zTGliLmZvZyx7Y29sb3I6e3ZhbHVlOm5ldyBDb2xvcigweDAwMDAwKX0sb3BhY2l0eTp7dmFsdWU6MS4wfX1dKSx2ZXJ0ZXhTaGFkZXI6U2hhZGVyQ2h1bmsuc2hhZG93X3ZlcnQsZnJhZ21lbnRTaGFkZXI6U2hhZGVyQ2h1bmsuc2hhZG93X2ZyYWd9fTtTaGFkZXJMaWIucGh5c2ljYWw9e3VuaWZvcm1zOlVuaWZvcm1zVXRpbHMubWVyZ2UoW1NoYWRlckxpYi5zdGFuZGFyZC51bmlmb3Jtcyx7Y2xlYXJDb2F0Ont2YWx1ZTowfSxjbGVhckNvYXRSb3VnaG5lc3M6e3ZhbHVlOjB9fV0pLHZlcnRleFNoYWRlcjpTaGFkZXJDaHVuay5tZXNocGh5c2ljYWxfdmVydCxmcmFnbWVudFNoYWRlcjpTaGFkZXJDaHVuay5tZXNocGh5c2ljYWxfZnJhZ307LyoqCiAqIEBhdXRob3IgYmhvdXN0b24gLyBodHRwOi8vY2xhcmEuaW8KICovZnVuY3Rpb24gQm94MihtaW4sbWF4KXt0aGlzLm1pbj1taW4hPT11bmRlZmluZWQ/bWluOm5ldyBWZWN0b3IyKCtJbmZpbml0eSwrSW5maW5pdHkpO3RoaXMubWF4PW1heCE9PXVuZGVmaW5lZD9tYXg6bmV3IFZlY3RvcjIoLUluZmluaXR5LC1JbmZpbml0eSk7fU9iamVjdC5hc3NpZ24oQm94Mi5wcm90b3R5cGUse3NldDpmdW5jdGlvbiBzZXQobWluLG1heCl7dGhpcy5taW4uY29weShtaW4pO3RoaXMubWF4LmNvcHkobWF4KTtyZXR1cm4gdGhpczt9LHNldEZyb21Qb2ludHM6ZnVuY3Rpb24gc2V0RnJvbVBvaW50cyhwb2ludHMpe3RoaXMubWFrZUVtcHR5KCk7Zm9yKHZhciBpPTAsaWw9cG9pbnRzLmxlbmd0aDtpPGlsO2krKyl7dGhpcy5leHBhbmRCeVBvaW50KHBvaW50c1tpXSk7fXJldHVybiB0aGlzO30sc2V0RnJvbUNlbnRlckFuZFNpemU6ZnVuY3Rpb24oKXt2YXIgdjE9bmV3IFZlY3RvcjIoKTtyZXR1cm4gZnVuY3Rpb24gc2V0RnJvbUNlbnRlckFuZFNpemUoY2VudGVyLHNpemUpe3ZhciBoYWxmU2l6ZT12MS5jb3B5KHNpemUpLm11bHRpcGx5U2NhbGFyKDAuNSk7dGhpcy5taW4uY29weShjZW50ZXIpLnN1YihoYWxmU2l6ZSk7dGhpcy5tYXguY29weShjZW50ZXIpLmFkZChoYWxmU2l6ZSk7cmV0dXJuIHRoaXM7fTt9KCksY2xvbmU6ZnVuY3Rpb24gY2xvbmUoKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IoKS5jb3B5KHRoaXMpO30sY29weTpmdW5jdGlvbiBjb3B5KGJveCl7dGhpcy5taW4uY29weShib3gubWluKTt0aGlzLm1heC5jb3B5KGJveC5tYXgpO3JldHVybiB0aGlzO30sbWFrZUVtcHR5OmZ1bmN0aW9uIG1ha2VFbXB0eSgpe3RoaXMubWluLng9dGhpcy5taW4ueT0rSW5maW5pdHk7dGhpcy5tYXgueD10aGlzLm1heC55PS1JbmZpbml0eTtyZXR1cm4gdGhpczt9LGlzRW1wdHk6ZnVuY3Rpb24gaXNFbXB0eSgpey8vIHRoaXMgaXMgYSBtb3JlIHJvYnVzdCBjaGVjayBmb3IgZW1wdHkgdGhhbiAoIHZvbHVtZSA8PSAwICkgYmVjYXVzZSB2b2x1bWUgY2FuIGdldCBwb3NpdGl2ZSB3aXRoIHR3byBuZWdhdGl2ZSBheGVzCnJldHVybiB0aGlzLm1heC54PHRoaXMubWluLnh8fHRoaXMubWF4Lnk8dGhpcy5taW4ueTt9LGdldENlbnRlcjpmdW5jdGlvbiBnZXRDZW50ZXIob3B0aW9uYWxUYXJnZXQpe3ZhciByZXN1bHQ9b3B0aW9uYWxUYXJnZXR8fG5ldyBWZWN0b3IyKCk7cmV0dXJuIHRoaXMuaXNFbXB0eSgpP3Jlc3VsdC5zZXQoMCwwKTpyZXN1bHQuYWRkVmVjdG9ycyh0aGlzLm1pbix0aGlzLm1heCkubXVsdGlwbHlTY2FsYXIoMC41KTt9LGdldFNpemU6ZnVuY3Rpb24gZ2V0U2l6ZShvcHRpb25hbFRhcmdldCl7dmFyIHJlc3VsdD1vcHRpb25hbFRhcmdldHx8bmV3IFZlY3RvcjIoKTtyZXR1cm4gdGhpcy5pc0VtcHR5KCk/cmVzdWx0LnNldCgwLDApOnJlc3VsdC5zdWJWZWN0b3JzKHRoaXMubWF4LHRoaXMubWluKTt9LGV4cGFuZEJ5UG9pbnQ6ZnVuY3Rpb24gZXhwYW5kQnlQb2ludChwb2ludCl7dGhpcy5taW4ubWluKHBvaW50KTt0aGlzLm1heC5tYXgocG9pbnQpO3JldHVybiB0aGlzO30sZXhwYW5kQnlWZWN0b3I6ZnVuY3Rpb24gZXhwYW5kQnlWZWN0b3IodmVjdG9yKXt0aGlzLm1pbi5zdWIodmVjdG9yKTt0aGlzLm1heC5hZGQodmVjdG9yKTtyZXR1cm4gdGhpczt9LGV4cGFuZEJ5U2NhbGFyOmZ1bmN0aW9uIGV4cGFuZEJ5U2NhbGFyKHNjYWxhcil7dGhpcy5taW4uYWRkU2NhbGFyKC1zY2FsYXIpO3RoaXMubWF4LmFkZFNjYWxhcihzY2FsYXIpO3JldHVybiB0aGlzO30sY29udGFpbnNQb2ludDpmdW5jdGlvbiBjb250YWluc1BvaW50KHBvaW50KXtyZXR1cm4gcG9pbnQueDx0aGlzLm1pbi54fHxwb2ludC54PnRoaXMubWF4Lnh8fHBvaW50Lnk8dGhpcy5taW4ueXx8cG9pbnQueT50aGlzLm1heC55P2ZhbHNlOnRydWU7fSxjb250YWluc0JveDpmdW5jdGlvbiBjb250YWluc0JveChib3gpe3JldHVybiB0aGlzLm1pbi54PD1ib3gubWluLngmJmJveC5tYXgueDw9dGhpcy5tYXgueCYmdGhpcy5taW4ueTw9Ym94Lm1pbi55JiZib3gubWF4Lnk8PXRoaXMubWF4Lnk7fSxnZXRQYXJhbWV0ZXI6ZnVuY3Rpb24gZ2V0UGFyYW1ldGVyKHBvaW50LG9wdGlvbmFsVGFyZ2V0KXsvLyBUaGlzIGNhbiBwb3RlbnRpYWxseSBoYXZlIGEgZGl2aWRlIGJ5IHplcm8gaWYgdGhlIGJveAovLyBoYXMgYSBzaXplIGRpbWVuc2lvbiBvZiAwLgp2YXIgcmVzdWx0PW9wdGlvbmFsVGFyZ2V0fHxuZXcgVmVjdG9yMigpO3JldHVybiByZXN1bHQuc2V0KChwb2ludC54LXRoaXMubWluLngpLyh0aGlzLm1heC54LXRoaXMubWluLngpLChwb2ludC55LXRoaXMubWluLnkpLyh0aGlzLm1heC55LXRoaXMubWluLnkpKTt9LGludGVyc2VjdHNCb3g6ZnVuY3Rpb24gaW50ZXJzZWN0c0JveChib3gpey8vIHVzaW5nIDQgc3BsaXR0aW5nIHBsYW5lcyB0byBydWxlIG91dCBpbnRlcnNlY3Rpb25zCnJldHVybiBib3gubWF4Lng8dGhpcy5taW4ueHx8Ym94Lm1pbi54PnRoaXMubWF4Lnh8fGJveC5tYXgueTx0aGlzLm1pbi55fHxib3gubWluLnk+dGhpcy5tYXgueT9mYWxzZTp0cnVlO30sY2xhbXBQb2ludDpmdW5jdGlvbiBjbGFtcFBvaW50KHBvaW50LG9wdGlvbmFsVGFyZ2V0KXt2YXIgcmVzdWx0PW9wdGlvbmFsVGFyZ2V0fHxuZXcgVmVjdG9yMigpO3JldHVybiByZXN1bHQuY29weShwb2ludCkuY2xhbXAodGhpcy5taW4sdGhpcy5tYXgpO30sZGlzdGFuY2VUb1BvaW50OmZ1bmN0aW9uKCl7dmFyIHYxPW5ldyBWZWN0b3IyKCk7cmV0dXJuIGZ1bmN0aW9uIGRpc3RhbmNlVG9Qb2ludChwb2ludCl7dmFyIGNsYW1wZWRQb2ludD12MS5jb3B5KHBvaW50KS5jbGFtcCh0aGlzLm1pbix0aGlzLm1heCk7cmV0dXJuIGNsYW1wZWRQb2ludC5zdWIocG9pbnQpLmxlbmd0aCgpO307fSgpLGludGVyc2VjdDpmdW5jdGlvbiBpbnRlcnNlY3QoYm94KXt0aGlzLm1pbi5tYXgoYm94Lm1pbik7dGhpcy5tYXgubWluKGJveC5tYXgpO3JldHVybiB0aGlzO30sdW5pb246ZnVuY3Rpb24gdW5pb24oYm94KXt0aGlzLm1pbi5taW4oYm94Lm1pbik7dGhpcy5tYXgubWF4KGJveC5tYXgpO3JldHVybiB0aGlzO30sdHJhbnNsYXRlOmZ1bmN0aW9uIHRyYW5zbGF0ZShvZmZzZXQpe3RoaXMubWluLmFkZChvZmZzZXQpO3RoaXMubWF4LmFkZChvZmZzZXQpO3JldHVybiB0aGlzO30sZXF1YWxzOmZ1bmN0aW9uIGVxdWFscyhib3gpe3JldHVybiBib3gubWluLmVxdWFscyh0aGlzLm1pbikmJmJveC5tYXguZXF1YWxzKHRoaXMubWF4KTt9fSk7LyoqCiAqIEBhdXRob3IgbWlrYWVsIGVtdGluZ2VyIC8gaHR0cDovL2dvbW8uc2UvCiAqIEBhdXRob3IgYWx0ZXJlZHEgLyBodHRwOi8vYWx0ZXJlZHF1YWxpYS5jb20vCiAqL2Z1bmN0aW9uIFdlYkdMRmxhcmVSZW5kZXJlcihyZW5kZXJlcixnbCxzdGF0ZSx0ZXh0dXJlcyxjYXBhYmlsaXRpZXMpe3ZhciB2ZXJ0ZXhCdWZmZXIsZWxlbWVudEJ1ZmZlcjt2YXIgc2hhZGVyLHByb2dyYW0sYXR0cmlidXRlcyx1bmlmb3Jtczt2YXIgdGVtcFRleHR1cmUsb2NjbHVzaW9uVGV4dHVyZTtmdW5jdGlvbiBpbml0KCl7dmFyIHZlcnRpY2VzPW5ldyBGbG9hdDMyQXJyYXkoWy0xLC0xLDAsMCwxLC0xLDEsMCwxLDEsMSwxLC0xLDEsMCwxXSk7dmFyIGZhY2VzPW5ldyBVaW50MTZBcnJheShbMCwxLDIsMCwyLDNdKTsvLyBidWZmZXJzCnZlcnRleEJ1ZmZlcj1nbC5jcmVhdGVCdWZmZXIoKTtlbGVtZW50QnVmZmVyPWdsLmNyZWF0ZUJ1ZmZlcigpO2dsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLHZlcnRleEJ1ZmZlcik7Z2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsdmVydGljZXMsZ2wuU1RBVElDX0RSQVcpO2dsLmJpbmRCdWZmZXIoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsZWxlbWVudEJ1ZmZlcik7Z2wuYnVmZmVyRGF0YShnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUixmYWNlcyxnbC5TVEFUSUNfRFJBVyk7Ly8gdGV4dHVyZXMKdGVtcFRleHR1cmU9Z2wuY3JlYXRlVGV4dHVyZSgpO29jY2x1c2lvblRleHR1cmU9Z2wuY3JlYXRlVGV4dHVyZSgpO3N0YXRlLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsdGVtcFRleHR1cmUpO2dsLnRleEltYWdlMkQoZ2wuVEVYVFVSRV8yRCwwLGdsLlJHQiwxNiwxNiwwLGdsLlJHQixnbC5VTlNJR05FRF9CWVRFLG51bGwpO2dsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCxnbC5URVhUVVJFX1dSQVBfUyxnbC5DTEFNUF9UT19FREdFKTtnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsZ2wuVEVYVFVSRV9XUkFQX1QsZ2wuQ0xBTVBfVE9fRURHRSk7Z2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELGdsLlRFWFRVUkVfTUFHX0ZJTFRFUixnbC5ORUFSRVNUKTtnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsZ2wuVEVYVFVSRV9NSU5fRklMVEVSLGdsLk5FQVJFU1QpO3N0YXRlLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsb2NjbHVzaW9uVGV4dHVyZSk7Z2wudGV4SW1hZ2UyRChnbC5URVhUVVJFXzJELDAsZ2wuUkdCQSwxNiwxNiwwLGdsLlJHQkEsZ2wuVU5TSUdORURfQllURSxudWxsKTtnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsZ2wuVEVYVFVSRV9XUkFQX1MsZ2wuQ0xBTVBfVE9fRURHRSk7Z2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELGdsLlRFWFRVUkVfV1JBUF9ULGdsLkNMQU1QX1RPX0VER0UpO2dsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCxnbC5URVhUVVJFX01BR19GSUxURVIsZ2wuTkVBUkVTVCk7Z2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELGdsLlRFWFRVUkVfTUlOX0ZJTFRFUixnbC5ORUFSRVNUKTtzaGFkZXI9e3ZlcnRleFNoYWRlcjpbJ3VuaWZvcm0gbG93cCBpbnQgcmVuZGVyVHlwZTsnLCd1bmlmb3JtIHZlYzMgc2NyZWVuUG9zaXRpb247JywndW5pZm9ybSB2ZWMyIHNjYWxlOycsJ3VuaWZvcm0gZmxvYXQgcm90YXRpb247JywndW5pZm9ybSBzYW1wbGVyMkQgb2NjbHVzaW9uTWFwOycsJ2F0dHJpYnV0ZSB2ZWMyIHBvc2l0aW9uOycsJ2F0dHJpYnV0ZSB2ZWMyIHV2OycsJ3ZhcnlpbmcgdmVjMiB2VVY7JywndmFyeWluZyBmbG9hdCB2VmlzaWJpbGl0eTsnLCd2b2lkIG1haW4oKSB7JywnCXZVViA9IHV2OycsJwl2ZWMyIHBvcyA9IHBvc2l0aW9uOycsJwlpZiAoIHJlbmRlclR5cGUgPT0gMiApIHsnLCcJCXZlYzQgdmlzaWJpbGl0eSA9IHRleHR1cmUyRCggb2NjbHVzaW9uTWFwLCB2ZWMyKCAwLjEsIDAuMSApICk7JywnCQl2aXNpYmlsaXR5ICs9IHRleHR1cmUyRCggb2NjbHVzaW9uTWFwLCB2ZWMyKCAwLjUsIDAuMSApICk7JywnCQl2aXNpYmlsaXR5ICs9IHRleHR1cmUyRCggb2NjbHVzaW9uTWFwLCB2ZWMyKCAwLjksIDAuMSApICk7JywnCQl2aXNpYmlsaXR5ICs9IHRleHR1cmUyRCggb2NjbHVzaW9uTWFwLCB2ZWMyKCAwLjksIDAuNSApICk7JywnCQl2aXNpYmlsaXR5ICs9IHRleHR1cmUyRCggb2NjbHVzaW9uTWFwLCB2ZWMyKCAwLjksIDAuOSApICk7JywnCQl2aXNpYmlsaXR5ICs9IHRleHR1cmUyRCggb2NjbHVzaW9uTWFwLCB2ZWMyKCAwLjUsIDAuOSApICk7JywnCQl2aXNpYmlsaXR5ICs9IHRleHR1cmUyRCggb2NjbHVzaW9uTWFwLCB2ZWMyKCAwLjEsIDAuOSApICk7JywnCQl2aXNpYmlsaXR5ICs9IHRleHR1cmUyRCggb2NjbHVzaW9uTWFwLCB2ZWMyKCAwLjEsIDAuNSApICk7JywnCQl2aXNpYmlsaXR5ICs9IHRleHR1cmUyRCggb2NjbHVzaW9uTWFwLCB2ZWMyKCAwLjUsIDAuNSApICk7JywnCQl2VmlzaWJpbGl0eSA9ICAgICAgICB2aXNpYmlsaXR5LnIgLyA5LjA7JywnCQl2VmlzaWJpbGl0eSAqPSAxLjAgLSB2aXNpYmlsaXR5LmcgLyA5LjA7JywnCQl2VmlzaWJpbGl0eSAqPSAgICAgICB2aXNpYmlsaXR5LmIgLyA5LjA7JywnCQl2VmlzaWJpbGl0eSAqPSAxLjAgLSB2aXNpYmlsaXR5LmEgLyA5LjA7JywnCQlwb3MueCA9IGNvcyggcm90YXRpb24gKSAqIHBvc2l0aW9uLnggLSBzaW4oIHJvdGF0aW9uICkgKiBwb3NpdGlvbi55OycsJwkJcG9zLnkgPSBzaW4oIHJvdGF0aW9uICkgKiBwb3NpdGlvbi54ICsgY29zKCByb3RhdGlvbiApICogcG9zaXRpb24ueTsnLCcJfScsJwlnbF9Qb3NpdGlvbiA9IHZlYzQoICggcG9zICogc2NhbGUgKyBzY3JlZW5Qb3NpdGlvbi54eSApLnh5LCBzY3JlZW5Qb3NpdGlvbi56LCAxLjAgKTsnLCd9J10uam9pbignXG4nKSxmcmFnbWVudFNoYWRlcjpbJ3VuaWZvcm0gbG93cCBpbnQgcmVuZGVyVHlwZTsnLCd1bmlmb3JtIHNhbXBsZXIyRCBtYXA7JywndW5pZm9ybSBmbG9hdCBvcGFjaXR5OycsJ3VuaWZvcm0gdmVjMyBjb2xvcjsnLCd2YXJ5aW5nIHZlYzIgdlVWOycsJ3ZhcnlpbmcgZmxvYXQgdlZpc2liaWxpdHk7Jywndm9pZCBtYWluKCkgeycsLy8gcGluayBzcXVhcmUKJwlpZiAoIHJlbmRlclR5cGUgPT0gMCApIHsnLCcJCWdsX0ZyYWdDb2xvciA9IHZlYzQoIDEuMCwgMC4wLCAxLjAsIDAuMCApOycsLy8gcmVzdG9yZQonCX0gZWxzZSBpZiAoIHJlbmRlclR5cGUgPT0gMSApIHsnLCcJCWdsX0ZyYWdDb2xvciA9IHRleHR1cmUyRCggbWFwLCB2VVYgKTsnLC8vIGZsYXJlCicJfSBlbHNlIHsnLCcJCXZlYzQgdGV4dHVyZSA9IHRleHR1cmUyRCggbWFwLCB2VVYgKTsnLCcJCXRleHR1cmUuYSAqPSBvcGFjaXR5ICogdlZpc2liaWxpdHk7JywnCQlnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlOycsJwkJZ2xfRnJhZ0NvbG9yLnJnYiAqPSBjb2xvcjsnLCcJfScsJ30nXS5qb2luKCdcbicpfTtwcm9ncmFtPWNyZWF0ZVByb2dyYW0oc2hhZGVyKTthdHRyaWJ1dGVzPXt2ZXJ0ZXg6Z2wuZ2V0QXR0cmliTG9jYXRpb24ocHJvZ3JhbSwncG9zaXRpb24nKSx1djpnbC5nZXRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLCd1dicpfTt1bmlmb3Jtcz17cmVuZGVyVHlwZTpnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwncmVuZGVyVHlwZScpLG1hcDpnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwnbWFwJyksb2NjbHVzaW9uTWFwOmdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCdvY2NsdXNpb25NYXAnKSxvcGFjaXR5OmdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCdvcGFjaXR5JyksY29sb3I6Z2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sJ2NvbG9yJyksc2NhbGU6Z2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sJ3NjYWxlJykscm90YXRpb246Z2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sJ3JvdGF0aW9uJyksc2NyZWVuUG9zaXRpb246Z2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sJ3NjcmVlblBvc2l0aW9uJyl9O30vKgoJICogUmVuZGVyIGxlbnMgZmxhcmVzCgkgKiBNZXRob2Q6IHJlbmRlcnMgMTZ4MTYgMHhmZjAwZmYtY29sb3JlZCBwb2ludHMgc2NhdHRlcmVkIG92ZXIgdGhlIGxpZ2h0IHNvdXJjZSBhcmVhLAoJICogICAgICAgICByZWFkcyB0aGVzZSBiYWNrIGFuZCBjYWxjdWxhdGVzIG9jY2x1c2lvbi4KCSAqL3RoaXMucmVuZGVyPWZ1bmN0aW9uKGZsYXJlcyxzY2VuZSxjYW1lcmEsdmlld3BvcnQpe2lmKGZsYXJlcy5sZW5ndGg9PT0wKXJldHVybjt2YXIgdGVtcFBvc2l0aW9uPW5ldyBWZWN0b3IzKCk7dmFyIGludkFzcGVjdD12aWV3cG9ydC53L3ZpZXdwb3J0LnosaGFsZlZpZXdwb3J0V2lkdGg9dmlld3BvcnQueiowLjUsaGFsZlZpZXdwb3J0SGVpZ2h0PXZpZXdwb3J0LncqMC41O3ZhciBzaXplPTE2L3ZpZXdwb3J0Lncsc2NhbGU9bmV3IFZlY3RvcjIoc2l6ZSppbnZBc3BlY3Qsc2l6ZSk7dmFyIHNjcmVlblBvc2l0aW9uPW5ldyBWZWN0b3IzKDEsMSwwKSxzY3JlZW5Qb3NpdGlvblBpeGVscz1uZXcgVmVjdG9yMigxLDEpO3ZhciB2YWxpZEFyZWE9bmV3IEJveDIoKTt2YWxpZEFyZWEubWluLnNldCh2aWV3cG9ydC54LHZpZXdwb3J0LnkpO3ZhbGlkQXJlYS5tYXguc2V0KHZpZXdwb3J0LngrKHZpZXdwb3J0LnotMTYpLHZpZXdwb3J0LnkrKHZpZXdwb3J0LnctMTYpKTtpZihwcm9ncmFtPT09dW5kZWZpbmVkKXtpbml0KCk7fXN0YXRlLnVzZVByb2dyYW0ocHJvZ3JhbSk7c3RhdGUuaW5pdEF0dHJpYnV0ZXMoKTtzdGF0ZS5lbmFibGVBdHRyaWJ1dGUoYXR0cmlidXRlcy52ZXJ0ZXgpO3N0YXRlLmVuYWJsZUF0dHJpYnV0ZShhdHRyaWJ1dGVzLnV2KTtzdGF0ZS5kaXNhYmxlVW51c2VkQXR0cmlidXRlcygpOy8vIGxvb3AgdGhyb3VnaCBhbGwgbGVucyBmbGFyZXMgdG8gdXBkYXRlIHRoZWlyIG9jY2x1c2lvbiBhbmQgcG9zaXRpb25zCi8vIHNldHVwIGdsIGFuZCBjb21tb24gdXNlZCBhdHRyaWJzL3VuaWZvcm1zCmdsLnVuaWZvcm0xaSh1bmlmb3Jtcy5vY2NsdXNpb25NYXAsMCk7Z2wudW5pZm9ybTFpKHVuaWZvcm1zLm1hcCwxKTtnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUix2ZXJ0ZXhCdWZmZXIpO2dsLnZlcnRleEF0dHJpYlBvaW50ZXIoYXR0cmlidXRlcy52ZXJ0ZXgsMixnbC5GTE9BVCxmYWxzZSwyKjgsMCk7Z2wudmVydGV4QXR0cmliUG9pbnRlcihhdHRyaWJ1dGVzLnV2LDIsZ2wuRkxPQVQsZmFsc2UsMio4LDgpO2dsLmJpbmRCdWZmZXIoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsZWxlbWVudEJ1ZmZlcik7c3RhdGUuZGlzYWJsZShnbC5DVUxMX0ZBQ0UpO3N0YXRlLmJ1ZmZlcnMuZGVwdGguc2V0TWFzayhmYWxzZSk7Zm9yKHZhciBpPTAsbD1mbGFyZXMubGVuZ3RoO2k8bDtpKyspe3NpemU9MTYvdmlld3BvcnQudztzY2FsZS5zZXQoc2l6ZSppbnZBc3BlY3Qsc2l6ZSk7Ly8gY2FsYyBvYmplY3Qgc2NyZWVuIHBvc2l0aW9uCnZhciBmbGFyZT1mbGFyZXNbaV07dGVtcFBvc2l0aW9uLnNldChmbGFyZS5tYXRyaXhXb3JsZC5lbGVtZW50c1sxMl0sZmxhcmUubWF0cml4V29ybGQuZWxlbWVudHNbMTNdLGZsYXJlLm1hdHJpeFdvcmxkLmVsZW1lbnRzWzE0XSk7dGVtcFBvc2l0aW9uLmFwcGx5TWF0cml4NChjYW1lcmEubWF0cml4V29ybGRJbnZlcnNlKTt0ZW1wUG9zaXRpb24uYXBwbHlNYXRyaXg0KGNhbWVyYS5wcm9qZWN0aW9uTWF0cml4KTsvLyBzZXR1cCBhcnJheXMgZm9yIGdsIHByb2dyYW1zCnNjcmVlblBvc2l0aW9uLmNvcHkodGVtcFBvc2l0aW9uKTsvLyBob3Jpem9udGFsIGFuZCB2ZXJ0aWNhbCBjb29yZGluYXRlIG9mIHRoZSBsb3dlciBsZWZ0IGNvcm5lciBvZiB0aGUgcGl4ZWxzIHRvIGNvcHkKc2NyZWVuUG9zaXRpb25QaXhlbHMueD12aWV3cG9ydC54K3NjcmVlblBvc2l0aW9uLngqaGFsZlZpZXdwb3J0V2lkdGgraGFsZlZpZXdwb3J0V2lkdGgtODtzY3JlZW5Qb3NpdGlvblBpeGVscy55PXZpZXdwb3J0Lnkrc2NyZWVuUG9zaXRpb24ueSpoYWxmVmlld3BvcnRIZWlnaHQraGFsZlZpZXdwb3J0SGVpZ2h0LTg7Ly8gc2NyZWVuIGN1bGwKaWYodmFsaWRBcmVhLmNvbnRhaW5zUG9pbnQoc2NyZWVuUG9zaXRpb25QaXhlbHMpPT09dHJ1ZSl7Ly8gc2F2ZSBjdXJyZW50IFJHQiB0byB0ZW1wIHRleHR1cmUKc3RhdGUuYWN0aXZlVGV4dHVyZShnbC5URVhUVVJFMCk7c3RhdGUuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCxudWxsKTtzdGF0ZS5hY3RpdmVUZXh0dXJlKGdsLlRFWFRVUkUxKTtzdGF0ZS5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELHRlbXBUZXh0dXJlKTtnbC5jb3B5VGV4SW1hZ2UyRChnbC5URVhUVVJFXzJELDAsZ2wuUkdCLHNjcmVlblBvc2l0aW9uUGl4ZWxzLngsc2NyZWVuUG9zaXRpb25QaXhlbHMueSwxNiwxNiwwKTsvLyByZW5kZXIgcGluayBxdWFkCmdsLnVuaWZvcm0xaSh1bmlmb3Jtcy5yZW5kZXJUeXBlLDApO2dsLnVuaWZvcm0yZih1bmlmb3Jtcy5zY2FsZSxzY2FsZS54LHNjYWxlLnkpO2dsLnVuaWZvcm0zZih1bmlmb3Jtcy5zY3JlZW5Qb3NpdGlvbixzY3JlZW5Qb3NpdGlvbi54LHNjcmVlblBvc2l0aW9uLnksc2NyZWVuUG9zaXRpb24ueik7c3RhdGUuZGlzYWJsZShnbC5CTEVORCk7c3RhdGUuZW5hYmxlKGdsLkRFUFRIX1RFU1QpO2dsLmRyYXdFbGVtZW50cyhnbC5UUklBTkdMRVMsNixnbC5VTlNJR05FRF9TSE9SVCwwKTsvLyBjb3B5IHJlc3VsdCB0byBvY2NsdXNpb25NYXAKc3RhdGUuYWN0aXZlVGV4dHVyZShnbC5URVhUVVJFMCk7c3RhdGUuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCxvY2NsdXNpb25UZXh0dXJlKTtnbC5jb3B5VGV4SW1hZ2UyRChnbC5URVhUVVJFXzJELDAsZ2wuUkdCQSxzY3JlZW5Qb3NpdGlvblBpeGVscy54LHNjcmVlblBvc2l0aW9uUGl4ZWxzLnksMTYsMTYsMCk7Ly8gcmVzdG9yZSBncmFwaGljcwpnbC51bmlmb3JtMWkodW5pZm9ybXMucmVuZGVyVHlwZSwxKTtzdGF0ZS5kaXNhYmxlKGdsLkRFUFRIX1RFU1QpO3N0YXRlLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTEpO3N0YXRlLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsdGVtcFRleHR1cmUpO2dsLmRyYXdFbGVtZW50cyhnbC5UUklBTkdMRVMsNixnbC5VTlNJR05FRF9TSE9SVCwwKTsvLyB1cGRhdGUgb2JqZWN0IHBvc2l0aW9ucwpmbGFyZS5wb3NpdGlvblNjcmVlbi5jb3B5KHNjcmVlblBvc2l0aW9uKTtpZihmbGFyZS5jdXN0b21VcGRhdGVDYWxsYmFjayl7ZmxhcmUuY3VzdG9tVXBkYXRlQ2FsbGJhY2soZmxhcmUpO31lbHNle2ZsYXJlLnVwZGF0ZUxlbnNGbGFyZXMoKTt9Ly8gcmVuZGVyIGZsYXJlcwpnbC51bmlmb3JtMWkodW5pZm9ybXMucmVuZGVyVHlwZSwyKTtzdGF0ZS5lbmFibGUoZ2wuQkxFTkQpO2Zvcih2YXIgaj0wLGpsPWZsYXJlLmxlbnNGbGFyZXMubGVuZ3RoO2o8amw7aisrKXt2YXIgc3ByaXRlPWZsYXJlLmxlbnNGbGFyZXNbal07aWYoc3ByaXRlLm9wYWNpdHk+MC4wMDEmJnNwcml0ZS5zY2FsZT4wLjAwMSl7c2NyZWVuUG9zaXRpb24ueD1zcHJpdGUueDtzY3JlZW5Qb3NpdGlvbi55PXNwcml0ZS55O3NjcmVlblBvc2l0aW9uLno9c3ByaXRlLno7c2l6ZT1zcHJpdGUuc2l6ZSpzcHJpdGUuc2NhbGUvdmlld3BvcnQudztzY2FsZS54PXNpemUqaW52QXNwZWN0O3NjYWxlLnk9c2l6ZTtnbC51bmlmb3JtM2YodW5pZm9ybXMuc2NyZWVuUG9zaXRpb24sc2NyZWVuUG9zaXRpb24ueCxzY3JlZW5Qb3NpdGlvbi55LHNjcmVlblBvc2l0aW9uLnopO2dsLnVuaWZvcm0yZih1bmlmb3Jtcy5zY2FsZSxzY2FsZS54LHNjYWxlLnkpO2dsLnVuaWZvcm0xZih1bmlmb3Jtcy5yb3RhdGlvbixzcHJpdGUucm90YXRpb24pO2dsLnVuaWZvcm0xZih1bmlmb3Jtcy5vcGFjaXR5LHNwcml0ZS5vcGFjaXR5KTtnbC51bmlmb3JtM2YodW5pZm9ybXMuY29sb3Isc3ByaXRlLmNvbG9yLnIsc3ByaXRlLmNvbG9yLmcsc3ByaXRlLmNvbG9yLmIpO3N0YXRlLnNldEJsZW5kaW5nKHNwcml0ZS5ibGVuZGluZyxzcHJpdGUuYmxlbmRFcXVhdGlvbixzcHJpdGUuYmxlbmRTcmMsc3ByaXRlLmJsZW5kRHN0KTt0ZXh0dXJlcy5zZXRUZXh0dXJlMkQoc3ByaXRlLnRleHR1cmUsMSk7Z2wuZHJhd0VsZW1lbnRzKGdsLlRSSUFOR0xFUyw2LGdsLlVOU0lHTkVEX1NIT1JULDApO319fX0vLyByZXN0b3JlIGdsCnN0YXRlLmVuYWJsZShnbC5DVUxMX0ZBQ0UpO3N0YXRlLmVuYWJsZShnbC5ERVBUSF9URVNUKTtzdGF0ZS5idWZmZXJzLmRlcHRoLnNldE1hc2sodHJ1ZSk7c3RhdGUucmVzZXQoKTt9O2Z1bmN0aW9uIGNyZWF0ZVByb2dyYW0oc2hhZGVyKXt2YXIgcHJvZ3JhbT1nbC5jcmVhdGVQcm9ncmFtKCk7dmFyIGZyYWdtZW50U2hhZGVyPWdsLmNyZWF0ZVNoYWRlcihnbC5GUkFHTUVOVF9TSEFERVIpO3ZhciB2ZXJ0ZXhTaGFkZXI9Z2wuY3JlYXRlU2hhZGVyKGdsLlZFUlRFWF9TSEFERVIpO3ZhciBwcmVmaXg9J3ByZWNpc2lvbiAnK2NhcGFiaWxpdGllcy5wcmVjaXNpb24rJyBmbG9hdDtcbic7Z2wuc2hhZGVyU291cmNlKGZyYWdtZW50U2hhZGVyLHByZWZpeCtzaGFkZXIuZnJhZ21lbnRTaGFkZXIpO2dsLnNoYWRlclNvdXJjZSh2ZXJ0ZXhTaGFkZXIscHJlZml4K3NoYWRlci52ZXJ0ZXhTaGFkZXIpO2dsLmNvbXBpbGVTaGFkZXIoZnJhZ21lbnRTaGFkZXIpO2dsLmNvbXBpbGVTaGFkZXIodmVydGV4U2hhZGVyKTtnbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSxmcmFnbWVudFNoYWRlcik7Z2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sdmVydGV4U2hhZGVyKTtnbC5saW5rUHJvZ3JhbShwcm9ncmFtKTtyZXR1cm4gcHJvZ3JhbTt9fS8qKgogKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tLwogKi9mdW5jdGlvbiBDYW52YXNUZXh0dXJlKGNhbnZhcyxtYXBwaW5nLHdyYXBTLHdyYXBULG1hZ0ZpbHRlcixtaW5GaWx0ZXIsZm9ybWF0LHR5cGUsYW5pc290cm9weSl7VGV4dHVyZS5jYWxsKHRoaXMsY2FudmFzLG1hcHBpbmcsd3JhcFMsd3JhcFQsbWFnRmlsdGVyLG1pbkZpbHRlcixmb3JtYXQsdHlwZSxhbmlzb3Ryb3B5KTt0aGlzLm5lZWRzVXBkYXRlPXRydWU7fUNhbnZhc1RleHR1cmUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVGV4dHVyZS5wcm90b3R5cGUpO0NhbnZhc1RleHR1cmUucHJvdG90eXBlLmNvbnN0cnVjdG9yPUNhbnZhc1RleHR1cmU7LyoqCiAqIEBhdXRob3IgbWlrYWVsIGVtdGluZ2VyIC8gaHR0cDovL2dvbW8uc2UvCiAqIEBhdXRob3IgYWx0ZXJlZHEgLyBodHRwOi8vYWx0ZXJlZHF1YWxpYS5jb20vCiAqL2Z1bmN0aW9uIFdlYkdMU3ByaXRlUmVuZGVyZXIocmVuZGVyZXIsZ2wsc3RhdGUsdGV4dHVyZXMsY2FwYWJpbGl0aWVzKXt2YXIgdmVydGV4QnVmZmVyLGVsZW1lbnRCdWZmZXI7dmFyIHByb2dyYW0sYXR0cmlidXRlcyx1bmlmb3Jtczt2YXIgdGV4dHVyZTsvLyBkZWNvbXBvc2UgbWF0cml4V29ybGQKdmFyIHNwcml0ZVBvc2l0aW9uPW5ldyBWZWN0b3IzKCk7dmFyIHNwcml0ZVJvdGF0aW9uPW5ldyBRdWF0ZXJuaW9uKCk7dmFyIHNwcml0ZVNjYWxlPW5ldyBWZWN0b3IzKCk7ZnVuY3Rpb24gaW5pdCgpe3ZhciB2ZXJ0aWNlcz1uZXcgRmxvYXQzMkFycmF5KFstMC41LC0wLjUsMCwwLDAuNSwtMC41LDEsMCwwLjUsMC41LDEsMSwtMC41LDAuNSwwLDFdKTt2YXIgZmFjZXM9bmV3IFVpbnQxNkFycmF5KFswLDEsMiwwLDIsM10pO3ZlcnRleEJ1ZmZlcj1nbC5jcmVhdGVCdWZmZXIoKTtlbGVtZW50QnVmZmVyPWdsLmNyZWF0ZUJ1ZmZlcigpO2dsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLHZlcnRleEJ1ZmZlcik7Z2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsdmVydGljZXMsZ2wuU1RBVElDX0RSQVcpO2dsLmJpbmRCdWZmZXIoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsZWxlbWVudEJ1ZmZlcik7Z2wuYnVmZmVyRGF0YShnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUixmYWNlcyxnbC5TVEFUSUNfRFJBVyk7cHJvZ3JhbT1jcmVhdGVQcm9ncmFtKCk7YXR0cmlidXRlcz17cG9zaXRpb246Z2wuZ2V0QXR0cmliTG9jYXRpb24ocHJvZ3JhbSwncG9zaXRpb24nKSx1djpnbC5nZXRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLCd1dicpfTt1bmlmb3Jtcz17dXZPZmZzZXQ6Z2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sJ3V2T2Zmc2V0JyksdXZTY2FsZTpnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwndXZTY2FsZScpLHJvdGF0aW9uOmdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCdyb3RhdGlvbicpLHNjYWxlOmdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCdzY2FsZScpLGNvbG9yOmdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCdjb2xvcicpLG1hcDpnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwnbWFwJyksb3BhY2l0eTpnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwnb3BhY2l0eScpLG1vZGVsVmlld01hdHJpeDpnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwnbW9kZWxWaWV3TWF0cml4JykscHJvamVjdGlvbk1hdHJpeDpnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwncHJvamVjdGlvbk1hdHJpeCcpLGZvZ1R5cGU6Z2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sJ2ZvZ1R5cGUnKSxmb2dEZW5zaXR5OmdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCdmb2dEZW5zaXR5JyksZm9nTmVhcjpnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwnZm9nTmVhcicpLGZvZ0ZhcjpnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwnZm9nRmFyJyksZm9nQ29sb3I6Z2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sJ2ZvZ0NvbG9yJyksZm9nRGVwdGg6Z2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sJ2ZvZ0RlcHRoJyksYWxwaGFUZXN0OmdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCdhbHBoYVRlc3QnKX07dmFyIGNhbnZhcz1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwnLCdjYW52YXMnKTtjYW52YXMud2lkdGg9ODtjYW52YXMuaGVpZ2h0PTg7dmFyIGNvbnRleHQ9Y2FudmFzLmdldENvbnRleHQoJzJkJyk7Y29udGV4dC5maWxsU3R5bGU9J3doaXRlJztjb250ZXh0LmZpbGxSZWN0KDAsMCw4LDgpO3RleHR1cmU9bmV3IENhbnZhc1RleHR1cmUoY2FudmFzKTt9dGhpcy5yZW5kZXI9ZnVuY3Rpb24oc3ByaXRlcyxzY2VuZSxjYW1lcmEpe2lmKHNwcml0ZXMubGVuZ3RoPT09MClyZXR1cm47Ly8gc2V0dXAgZ2wKaWYocHJvZ3JhbT09PXVuZGVmaW5lZCl7aW5pdCgpO31zdGF0ZS51c2VQcm9ncmFtKHByb2dyYW0pO3N0YXRlLmluaXRBdHRyaWJ1dGVzKCk7c3RhdGUuZW5hYmxlQXR0cmlidXRlKGF0dHJpYnV0ZXMucG9zaXRpb24pO3N0YXRlLmVuYWJsZUF0dHJpYnV0ZShhdHRyaWJ1dGVzLnV2KTtzdGF0ZS5kaXNhYmxlVW51c2VkQXR0cmlidXRlcygpO3N0YXRlLmRpc2FibGUoZ2wuQ1VMTF9GQUNFKTtzdGF0ZS5lbmFibGUoZ2wuQkxFTkQpO2dsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLHZlcnRleEJ1ZmZlcik7Z2wudmVydGV4QXR0cmliUG9pbnRlcihhdHRyaWJ1dGVzLnBvc2l0aW9uLDIsZ2wuRkxPQVQsZmFsc2UsMio4LDApO2dsLnZlcnRleEF0dHJpYlBvaW50ZXIoYXR0cmlidXRlcy51diwyLGdsLkZMT0FULGZhbHNlLDIqOCw4KTtnbC5iaW5kQnVmZmVyKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLGVsZW1lbnRCdWZmZXIpO2dsLnVuaWZvcm1NYXRyaXg0ZnYodW5pZm9ybXMucHJvamVjdGlvbk1hdHJpeCxmYWxzZSxjYW1lcmEucHJvamVjdGlvbk1hdHJpeC5lbGVtZW50cyk7c3RhdGUuYWN0aXZlVGV4dHVyZShnbC5URVhUVVJFMCk7Z2wudW5pZm9ybTFpKHVuaWZvcm1zLm1hcCwwKTt2YXIgb2xkRm9nVHlwZT0wO3ZhciBzY2VuZUZvZ1R5cGU9MDt2YXIgZm9nPXNjZW5lLmZvZztpZihmb2cpe2dsLnVuaWZvcm0zZih1bmlmb3Jtcy5mb2dDb2xvcixmb2cuY29sb3Iucixmb2cuY29sb3IuZyxmb2cuY29sb3IuYik7aWYoZm9nLmlzRm9nKXtnbC51bmlmb3JtMWYodW5pZm9ybXMuZm9nTmVhcixmb2cubmVhcik7Z2wudW5pZm9ybTFmKHVuaWZvcm1zLmZvZ0Zhcixmb2cuZmFyKTtnbC51bmlmb3JtMWkodW5pZm9ybXMuZm9nVHlwZSwxKTtvbGRGb2dUeXBlPTE7c2NlbmVGb2dUeXBlPTE7fWVsc2UgaWYoZm9nLmlzRm9nRXhwMil7Z2wudW5pZm9ybTFmKHVuaWZvcm1zLmZvZ0RlbnNpdHksZm9nLmRlbnNpdHkpO2dsLnVuaWZvcm0xaSh1bmlmb3Jtcy5mb2dUeXBlLDIpO29sZEZvZ1R5cGU9MjtzY2VuZUZvZ1R5cGU9Mjt9fWVsc2V7Z2wudW5pZm9ybTFpKHVuaWZvcm1zLmZvZ1R5cGUsMCk7b2xkRm9nVHlwZT0wO3NjZW5lRm9nVHlwZT0wO30vLyB1cGRhdGUgcG9zaXRpb25zIGFuZCBzb3J0CmZvcih2YXIgaT0wLGw9c3ByaXRlcy5sZW5ndGg7aTxsO2krKyl7dmFyIHNwcml0ZT1zcHJpdGVzW2ldO3Nwcml0ZS5tb2RlbFZpZXdNYXRyaXgubXVsdGlwbHlNYXRyaWNlcyhjYW1lcmEubWF0cml4V29ybGRJbnZlcnNlLHNwcml0ZS5tYXRyaXhXb3JsZCk7c3ByaXRlLno9LXNwcml0ZS5tb2RlbFZpZXdNYXRyaXguZWxlbWVudHNbMTRdO31zcHJpdGVzLnNvcnQocGFpbnRlclNvcnRTdGFibGUpOy8vIHJlbmRlciBhbGwgc3ByaXRlcwp2YXIgc2NhbGU9W107Zm9yKHZhciBpPTAsbD1zcHJpdGVzLmxlbmd0aDtpPGw7aSsrKXt2YXIgc3ByaXRlPXNwcml0ZXNbaV07dmFyIG1hdGVyaWFsPXNwcml0ZS5tYXRlcmlhbDtpZihtYXRlcmlhbC52aXNpYmxlPT09ZmFsc2UpY29udGludWU7c3ByaXRlLm9uQmVmb3JlUmVuZGVyKHJlbmRlcmVyLHNjZW5lLGNhbWVyYSx1bmRlZmluZWQsbWF0ZXJpYWwsdW5kZWZpbmVkKTtnbC51bmlmb3JtMWYodW5pZm9ybXMuYWxwaGFUZXN0LG1hdGVyaWFsLmFscGhhVGVzdCk7Z2wudW5pZm9ybU1hdHJpeDRmdih1bmlmb3Jtcy5tb2RlbFZpZXdNYXRyaXgsZmFsc2Usc3ByaXRlLm1vZGVsVmlld01hdHJpeC5lbGVtZW50cyk7c3ByaXRlLm1hdHJpeFdvcmxkLmRlY29tcG9zZShzcHJpdGVQb3NpdGlvbixzcHJpdGVSb3RhdGlvbixzcHJpdGVTY2FsZSk7c2NhbGVbMF09c3ByaXRlU2NhbGUueDtzY2FsZVsxXT1zcHJpdGVTY2FsZS55O3ZhciBmb2dUeXBlPTA7aWYoc2NlbmUuZm9nJiZtYXRlcmlhbC5mb2cpe2ZvZ1R5cGU9c2NlbmVGb2dUeXBlO31pZihvbGRGb2dUeXBlIT09Zm9nVHlwZSl7Z2wudW5pZm9ybTFpKHVuaWZvcm1zLmZvZ1R5cGUsZm9nVHlwZSk7b2xkRm9nVHlwZT1mb2dUeXBlO31pZihtYXRlcmlhbC5tYXAhPT1udWxsKXtnbC51bmlmb3JtMmYodW5pZm9ybXMudXZPZmZzZXQsbWF0ZXJpYWwubWFwLm9mZnNldC54LG1hdGVyaWFsLm1hcC5vZmZzZXQueSk7Z2wudW5pZm9ybTJmKHVuaWZvcm1zLnV2U2NhbGUsbWF0ZXJpYWwubWFwLnJlcGVhdC54LG1hdGVyaWFsLm1hcC5yZXBlYXQueSk7fWVsc2V7Z2wudW5pZm9ybTJmKHVuaWZvcm1zLnV2T2Zmc2V0LDAsMCk7Z2wudW5pZm9ybTJmKHVuaWZvcm1zLnV2U2NhbGUsMSwxKTt9Z2wudW5pZm9ybTFmKHVuaWZvcm1zLm9wYWNpdHksbWF0ZXJpYWwub3BhY2l0eSk7Z2wudW5pZm9ybTNmKHVuaWZvcm1zLmNvbG9yLG1hdGVyaWFsLmNvbG9yLnIsbWF0ZXJpYWwuY29sb3IuZyxtYXRlcmlhbC5jb2xvci5iKTtnbC51bmlmb3JtMWYodW5pZm9ybXMucm90YXRpb24sbWF0ZXJpYWwucm90YXRpb24pO2dsLnVuaWZvcm0yZnYodW5pZm9ybXMuc2NhbGUsc2NhbGUpO3N0YXRlLnNldEJsZW5kaW5nKG1hdGVyaWFsLmJsZW5kaW5nLG1hdGVyaWFsLmJsZW5kRXF1YXRpb24sbWF0ZXJpYWwuYmxlbmRTcmMsbWF0ZXJpYWwuYmxlbmREc3QsbWF0ZXJpYWwuYmxlbmRFcXVhdGlvbkFscGhhLG1hdGVyaWFsLmJsZW5kU3JjQWxwaGEsbWF0ZXJpYWwuYmxlbmREc3RBbHBoYSxtYXRlcmlhbC5wcmVtdWx0aXBsaWVkQWxwaGEpO3N0YXRlLmJ1ZmZlcnMuZGVwdGguc2V0VGVzdChtYXRlcmlhbC5kZXB0aFRlc3QpO3N0YXRlLmJ1ZmZlcnMuZGVwdGguc2V0TWFzayhtYXRlcmlhbC5kZXB0aFdyaXRlKTtzdGF0ZS5idWZmZXJzLmNvbG9yLnNldE1hc2sobWF0ZXJpYWwuY29sb3JXcml0ZSk7dGV4dHVyZXMuc2V0VGV4dHVyZTJEKG1hdGVyaWFsLm1hcHx8dGV4dHVyZSwwKTtnbC5kcmF3RWxlbWVudHMoZ2wuVFJJQU5HTEVTLDYsZ2wuVU5TSUdORURfU0hPUlQsMCk7c3ByaXRlLm9uQWZ0ZXJSZW5kZXIocmVuZGVyZXIsc2NlbmUsY2FtZXJhLHVuZGVmaW5lZCxtYXRlcmlhbCx1bmRlZmluZWQpO30vLyByZXN0b3JlIGdsCnN0YXRlLmVuYWJsZShnbC5DVUxMX0ZBQ0UpO3N0YXRlLnJlc2V0KCk7fTtmdW5jdGlvbiBjcmVhdGVQcm9ncmFtKCl7dmFyIHByb2dyYW09Z2wuY3JlYXRlUHJvZ3JhbSgpO3ZhciB2ZXJ0ZXhTaGFkZXI9Z2wuY3JlYXRlU2hhZGVyKGdsLlZFUlRFWF9TSEFERVIpO3ZhciBmcmFnbWVudFNoYWRlcj1nbC5jcmVhdGVTaGFkZXIoZ2wuRlJBR01FTlRfU0hBREVSKTtnbC5zaGFkZXJTb3VyY2UodmVydGV4U2hhZGVyLFsncHJlY2lzaW9uICcrY2FwYWJpbGl0aWVzLnByZWNpc2lvbisnIGZsb2F0OycsJyNkZWZpbmUgU0hBREVSX05BTUUgJysnU3ByaXRlTWF0ZXJpYWwnLCd1bmlmb3JtIG1hdDQgbW9kZWxWaWV3TWF0cml4OycsJ3VuaWZvcm0gbWF0NCBwcm9qZWN0aW9uTWF0cml4OycsJ3VuaWZvcm0gZmxvYXQgcm90YXRpb247JywndW5pZm9ybSB2ZWMyIHNjYWxlOycsJ3VuaWZvcm0gdmVjMiB1dk9mZnNldDsnLCd1bmlmb3JtIHZlYzIgdXZTY2FsZTsnLCdhdHRyaWJ1dGUgdmVjMiBwb3NpdGlvbjsnLCdhdHRyaWJ1dGUgdmVjMiB1djsnLCd2YXJ5aW5nIHZlYzIgdlVWOycsJ3ZhcnlpbmcgZmxvYXQgZm9nRGVwdGg7Jywndm9pZCBtYWluKCkgeycsJwl2VVYgPSB1dk9mZnNldCArIHV2ICogdXZTY2FsZTsnLCcJdmVjMiBhbGlnbmVkUG9zaXRpb24gPSBwb3NpdGlvbiAqIHNjYWxlOycsJwl2ZWMyIHJvdGF0ZWRQb3NpdGlvbjsnLCcJcm90YXRlZFBvc2l0aW9uLnggPSBjb3MoIHJvdGF0aW9uICkgKiBhbGlnbmVkUG9zaXRpb24ueCAtIHNpbiggcm90YXRpb24gKSAqIGFsaWduZWRQb3NpdGlvbi55OycsJwlyb3RhdGVkUG9zaXRpb24ueSA9IHNpbiggcm90YXRpb24gKSAqIGFsaWduZWRQb3NpdGlvbi54ICsgY29zKCByb3RhdGlvbiApICogYWxpZ25lZFBvc2l0aW9uLnk7JywnCXZlYzQgbXZQb3NpdGlvbjsnLCcJbXZQb3NpdGlvbiA9IG1vZGVsVmlld01hdHJpeCAqIHZlYzQoIDAuMCwgMC4wLCAwLjAsIDEuMCApOycsJwltdlBvc2l0aW9uLnh5ICs9IHJvdGF0ZWRQb3NpdGlvbjsnLCcJZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbXZQb3NpdGlvbjsnLCcJZm9nRGVwdGggPSAtIG12UG9zaXRpb24uejsnLCd9J10uam9pbignXG4nKSk7Z2wuc2hhZGVyU291cmNlKGZyYWdtZW50U2hhZGVyLFsncHJlY2lzaW9uICcrY2FwYWJpbGl0aWVzLnByZWNpc2lvbisnIGZsb2F0OycsJyNkZWZpbmUgU0hBREVSX05BTUUgJysnU3ByaXRlTWF0ZXJpYWwnLCd1bmlmb3JtIHZlYzMgY29sb3I7JywndW5pZm9ybSBzYW1wbGVyMkQgbWFwOycsJ3VuaWZvcm0gZmxvYXQgb3BhY2l0eTsnLCd1bmlmb3JtIGludCBmb2dUeXBlOycsJ3VuaWZvcm0gdmVjMyBmb2dDb2xvcjsnLCd1bmlmb3JtIGZsb2F0IGZvZ0RlbnNpdHk7JywndW5pZm9ybSBmbG9hdCBmb2dOZWFyOycsJ3VuaWZvcm0gZmxvYXQgZm9nRmFyOycsJ3VuaWZvcm0gZmxvYXQgYWxwaGFUZXN0OycsJ3ZhcnlpbmcgdmVjMiB2VVY7JywndmFyeWluZyBmbG9hdCBmb2dEZXB0aDsnLCd2b2lkIG1haW4oKSB7JywnCXZlYzQgdGV4dHVyZSA9IHRleHR1cmUyRCggbWFwLCB2VVYgKTsnLCcJZ2xfRnJhZ0NvbG9yID0gdmVjNCggY29sb3IgKiB0ZXh0dXJlLnh5eiwgdGV4dHVyZS5hICogb3BhY2l0eSApOycsJwlpZiAoIGdsX0ZyYWdDb2xvci5hIDwgYWxwaGFUZXN0ICkgZGlzY2FyZDsnLCcJaWYgKCBmb2dUeXBlID4gMCApIHsnLCcJCWZsb2F0IGZvZ0ZhY3RvciA9IDAuMDsnLCcJCWlmICggZm9nVHlwZSA9PSAxICkgeycsJwkJCWZvZ0ZhY3RvciA9IHNtb290aHN0ZXAoIGZvZ05lYXIsIGZvZ0ZhciwgZm9nRGVwdGggKTsnLCcJCX0gZWxzZSB7JywnCQkJY29uc3QgZmxvYXQgTE9HMiA9IDEuNDQyNjk1OycsJwkJCWZvZ0ZhY3RvciA9IGV4cDIoIC0gZm9nRGVuc2l0eSAqIGZvZ0RlbnNpdHkgKiBmb2dEZXB0aCAqIGZvZ0RlcHRoICogTE9HMiApOycsJwkJCWZvZ0ZhY3RvciA9IDEuMCAtIGNsYW1wKCBmb2dGYWN0b3IsIDAuMCwgMS4wICk7JywnCQl9JywnCQlnbF9GcmFnQ29sb3IucmdiID0gbWl4KCBnbF9GcmFnQ29sb3IucmdiLCBmb2dDb2xvciwgZm9nRmFjdG9yICk7JywnCX0nLCd9J10uam9pbignXG4nKSk7Z2wuY29tcGlsZVNoYWRlcih2ZXJ0ZXhTaGFkZXIpO2dsLmNvbXBpbGVTaGFkZXIoZnJhZ21lbnRTaGFkZXIpO2dsLmF0dGFjaFNoYWRlcihwcm9ncmFtLHZlcnRleFNoYWRlcik7Z2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sZnJhZ21lbnRTaGFkZXIpO2dsLmxpbmtQcm9ncmFtKHByb2dyYW0pO3JldHVybiBwcm9ncmFtO31mdW5jdGlvbiBwYWludGVyU29ydFN0YWJsZShhLGIpe2lmKGEucmVuZGVyT3JkZXIhPT1iLnJlbmRlck9yZGVyKXtyZXR1cm4gYS5yZW5kZXJPcmRlci1iLnJlbmRlck9yZGVyO31lbHNlIGlmKGEueiE9PWIueil7cmV0dXJuIGIuei1hLno7fWVsc2V7cmV0dXJuIGIuaWQtYS5pZDt9fX0vKioKICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS8KICogQGF1dGhvciBhbHRlcmVkcSAvIGh0dHA6Ly9hbHRlcmVkcXVhbGlhLmNvbS8KICovdmFyIG1hdGVyaWFsSWQ9MDtmdW5jdGlvbiBNYXRlcmlhbCgpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCdpZCcse3ZhbHVlOm1hdGVyaWFsSWQrK30pO3RoaXMudXVpZD1fTWF0aC5nZW5lcmF0ZVVVSUQoKTt0aGlzLm5hbWU9Jyc7dGhpcy50eXBlPSdNYXRlcmlhbCc7dGhpcy5mb2c9dHJ1ZTt0aGlzLmxpZ2h0cz10cnVlO3RoaXMuYmxlbmRpbmc9Tm9ybWFsQmxlbmRpbmc7dGhpcy5zaWRlPUZyb250U2lkZTt0aGlzLmZsYXRTaGFkaW5nPWZhbHNlO3RoaXMudmVydGV4Q29sb3JzPU5vQ29sb3JzOy8vIFRIUkVFLk5vQ29sb3JzLCBUSFJFRS5WZXJ0ZXhDb2xvcnMsIFRIUkVFLkZhY2VDb2xvcnMKdGhpcy5vcGFjaXR5PTE7dGhpcy50cmFuc3BhcmVudD1mYWxzZTt0aGlzLmJsZW5kU3JjPVNyY0FscGhhRmFjdG9yO3RoaXMuYmxlbmREc3Q9T25lTWludXNTcmNBbHBoYUZhY3Rvcjt0aGlzLmJsZW5kRXF1YXRpb249QWRkRXF1YXRpb247dGhpcy5ibGVuZFNyY0FscGhhPW51bGw7dGhpcy5ibGVuZERzdEFscGhhPW51bGw7dGhpcy5ibGVuZEVxdWF0aW9uQWxwaGE9bnVsbDt0aGlzLmRlcHRoRnVuYz1MZXNzRXF1YWxEZXB0aDt0aGlzLmRlcHRoVGVzdD10cnVlO3RoaXMuZGVwdGhXcml0ZT10cnVlO3RoaXMuY2xpcHBpbmdQbGFuZXM9bnVsbDt0aGlzLmNsaXBJbnRlcnNlY3Rpb249ZmFsc2U7dGhpcy5jbGlwU2hhZG93cz1mYWxzZTt0aGlzLmNvbG9yV3JpdGU9dHJ1ZTt0aGlzLnByZWNpc2lvbj1udWxsOy8vIG92ZXJyaWRlIHRoZSByZW5kZXJlcidzIGRlZmF1bHQgcHJlY2lzaW9uIGZvciB0aGlzIG1hdGVyaWFsCnRoaXMucG9seWdvbk9mZnNldD1mYWxzZTt0aGlzLnBvbHlnb25PZmZzZXRGYWN0b3I9MDt0aGlzLnBvbHlnb25PZmZzZXRVbml0cz0wO3RoaXMuZGl0aGVyaW5nPWZhbHNlO3RoaXMuYWxwaGFUZXN0PTA7dGhpcy5wcmVtdWx0aXBsaWVkQWxwaGE9ZmFsc2U7dGhpcy5vdmVyZHJhdz0wOy8vIE92ZXJkcmF3biBwaXhlbHMgKHR5cGljYWxseSBiZXR3ZWVuIDAgYW5kIDEpIGZvciBmaXhpbmcgYW50aWFsaWFzaW5nIGdhcHMgaW4gQ2FudmFzUmVuZGVyZXIKdGhpcy52aXNpYmxlPXRydWU7dGhpcy51c2VyRGF0YT17fTt0aGlzLm5lZWRzVXBkYXRlPXRydWU7fU1hdGVyaWFsLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoRXZlbnREaXNwYXRjaGVyLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOk1hdGVyaWFsLGlzTWF0ZXJpYWw6dHJ1ZSxvbkJlZm9yZUNvbXBpbGU6ZnVuY3Rpb24gb25CZWZvcmVDb21waWxlKCl7fSxzZXRWYWx1ZXM6ZnVuY3Rpb24gc2V0VmFsdWVzKHZhbHVlcyl7aWYodmFsdWVzPT09dW5kZWZpbmVkKXJldHVybjtmb3IodmFyIGtleSBpbiB2YWx1ZXMpe3ZhciBuZXdWYWx1ZT12YWx1ZXNba2V5XTtpZihuZXdWYWx1ZT09PXVuZGVmaW5lZCl7Y29uc29sZS53YXJuKCJUSFJFRS5NYXRlcmlhbDogJyIra2V5KyInIHBhcmFtZXRlciBpcyB1bmRlZmluZWQuIik7Y29udGludWU7fS8vIGZvciBiYWNrd2FyZCBjb21wYXRhYmlsaXR5IGlmIHNoYWRpbmcgaXMgc2V0IGluIHRoZSBjb25zdHJ1Y3RvcgppZihrZXk9PT0nc2hhZGluZycpe2NvbnNvbGUud2FybignVEhSRUUuJyt0aGlzLnR5cGUrJzogLnNoYWRpbmcgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIHRoZSBib29sZWFuIC5mbGF0U2hhZGluZyBpbnN0ZWFkLicpO3RoaXMuZmxhdFNoYWRpbmc9bmV3VmFsdWU9PT1GbGF0U2hhZGluZz90cnVlOmZhbHNlO2NvbnRpbnVlO312YXIgY3VycmVudFZhbHVlPXRoaXNba2V5XTtpZihjdXJyZW50VmFsdWU9PT11bmRlZmluZWQpe2NvbnNvbGUud2FybigiVEhSRUUuIit0aGlzLnR5cGUrIjogJyIra2V5KyInIGlzIG5vdCBhIHByb3BlcnR5IG9mIHRoaXMgbWF0ZXJpYWwuIik7Y29udGludWU7fWlmKGN1cnJlbnRWYWx1ZSYmY3VycmVudFZhbHVlLmlzQ29sb3Ipe2N1cnJlbnRWYWx1ZS5zZXQobmV3VmFsdWUpO31lbHNlIGlmKGN1cnJlbnRWYWx1ZSYmY3VycmVudFZhbHVlLmlzVmVjdG9yMyYmbmV3VmFsdWUmJm5ld1ZhbHVlLmlzVmVjdG9yMyl7Y3VycmVudFZhbHVlLmNvcHkobmV3VmFsdWUpO31lbHNlIGlmKGtleT09PSdvdmVyZHJhdycpey8vIGVuc3VyZSBvdmVyZHJhdyBpcyBiYWNrd2FyZHMtY29tcGF0aWJsZSB3aXRoIGxlZ2FjeSBib29sZWFuIHR5cGUKdGhpc1trZXldPU51bWJlcihuZXdWYWx1ZSk7fWVsc2V7dGhpc1trZXldPW5ld1ZhbHVlO319fSx0b0pTT046ZnVuY3Rpb24gdG9KU09OKG1ldGEpe3ZhciBpc1Jvb3Q9bWV0YT09PXVuZGVmaW5lZHx8dHlwZW9mIG1ldGE9PT0nc3RyaW5nJztpZihpc1Jvb3Qpe21ldGE9e3RleHR1cmVzOnt9LGltYWdlczp7fX07fXZhciBkYXRhPXttZXRhZGF0YTp7dmVyc2lvbjo0LjUsdHlwZTonTWF0ZXJpYWwnLGdlbmVyYXRvcjonTWF0ZXJpYWwudG9KU09OJ319Oy8vIHN0YW5kYXJkIE1hdGVyaWFsIHNlcmlhbGl6YXRpb24KZGF0YS51dWlkPXRoaXMudXVpZDtkYXRhLnR5cGU9dGhpcy50eXBlO2lmKHRoaXMubmFtZSE9PScnKWRhdGEubmFtZT10aGlzLm5hbWU7aWYodGhpcy5jb2xvciYmdGhpcy5jb2xvci5pc0NvbG9yKWRhdGEuY29sb3I9dGhpcy5jb2xvci5nZXRIZXgoKTtpZih0aGlzLnJvdWdobmVzcyE9PXVuZGVmaW5lZClkYXRhLnJvdWdobmVzcz10aGlzLnJvdWdobmVzcztpZih0aGlzLm1ldGFsbmVzcyE9PXVuZGVmaW5lZClkYXRhLm1ldGFsbmVzcz10aGlzLm1ldGFsbmVzcztpZih0aGlzLmVtaXNzaXZlJiZ0aGlzLmVtaXNzaXZlLmlzQ29sb3IpZGF0YS5lbWlzc2l2ZT10aGlzLmVtaXNzaXZlLmdldEhleCgpO2lmKHRoaXMuZW1pc3NpdmVJbnRlbnNpdHkhPT0xKWRhdGEuZW1pc3NpdmVJbnRlbnNpdHk9dGhpcy5lbWlzc2l2ZUludGVuc2l0eTtpZih0aGlzLnNwZWN1bGFyJiZ0aGlzLnNwZWN1bGFyLmlzQ29sb3IpZGF0YS5zcGVjdWxhcj10aGlzLnNwZWN1bGFyLmdldEhleCgpO2lmKHRoaXMuc2hpbmluZXNzIT09dW5kZWZpbmVkKWRhdGEuc2hpbmluZXNzPXRoaXMuc2hpbmluZXNzO2lmKHRoaXMuY2xlYXJDb2F0IT09dW5kZWZpbmVkKWRhdGEuY2xlYXJDb2F0PXRoaXMuY2xlYXJDb2F0O2lmKHRoaXMuY2xlYXJDb2F0Um91Z2huZXNzIT09dW5kZWZpbmVkKWRhdGEuY2xlYXJDb2F0Um91Z2huZXNzPXRoaXMuY2xlYXJDb2F0Um91Z2huZXNzO2lmKHRoaXMubWFwJiZ0aGlzLm1hcC5pc1RleHR1cmUpZGF0YS5tYXA9dGhpcy5tYXAudG9KU09OKG1ldGEpLnV1aWQ7aWYodGhpcy5hbHBoYU1hcCYmdGhpcy5hbHBoYU1hcC5pc1RleHR1cmUpZGF0YS5hbHBoYU1hcD10aGlzLmFscGhhTWFwLnRvSlNPTihtZXRhKS51dWlkO2lmKHRoaXMubGlnaHRNYXAmJnRoaXMubGlnaHRNYXAuaXNUZXh0dXJlKWRhdGEubGlnaHRNYXA9dGhpcy5saWdodE1hcC50b0pTT04obWV0YSkudXVpZDtpZih0aGlzLmJ1bXBNYXAmJnRoaXMuYnVtcE1hcC5pc1RleHR1cmUpe2RhdGEuYnVtcE1hcD10aGlzLmJ1bXBNYXAudG9KU09OKG1ldGEpLnV1aWQ7ZGF0YS5idW1wU2NhbGU9dGhpcy5idW1wU2NhbGU7fWlmKHRoaXMubm9ybWFsTWFwJiZ0aGlzLm5vcm1hbE1hcC5pc1RleHR1cmUpe2RhdGEubm9ybWFsTWFwPXRoaXMubm9ybWFsTWFwLnRvSlNPTihtZXRhKS51dWlkO2RhdGEubm9ybWFsU2NhbGU9dGhpcy5ub3JtYWxTY2FsZS50b0FycmF5KCk7fWlmKHRoaXMuZGlzcGxhY2VtZW50TWFwJiZ0aGlzLmRpc3BsYWNlbWVudE1hcC5pc1RleHR1cmUpe2RhdGEuZGlzcGxhY2VtZW50TWFwPXRoaXMuZGlzcGxhY2VtZW50TWFwLnRvSlNPTihtZXRhKS51dWlkO2RhdGEuZGlzcGxhY2VtZW50U2NhbGU9dGhpcy5kaXNwbGFjZW1lbnRTY2FsZTtkYXRhLmRpc3BsYWNlbWVudEJpYXM9dGhpcy5kaXNwbGFjZW1lbnRCaWFzO31pZih0aGlzLnJvdWdobmVzc01hcCYmdGhpcy5yb3VnaG5lc3NNYXAuaXNUZXh0dXJlKWRhdGEucm91Z2huZXNzTWFwPXRoaXMucm91Z2huZXNzTWFwLnRvSlNPTihtZXRhKS51dWlkO2lmKHRoaXMubWV0YWxuZXNzTWFwJiZ0aGlzLm1ldGFsbmVzc01hcC5pc1RleHR1cmUpZGF0YS5tZXRhbG5lc3NNYXA9dGhpcy5tZXRhbG5lc3NNYXAudG9KU09OKG1ldGEpLnV1aWQ7aWYodGhpcy5lbWlzc2l2ZU1hcCYmdGhpcy5lbWlzc2l2ZU1hcC5pc1RleHR1cmUpZGF0YS5lbWlzc2l2ZU1hcD10aGlzLmVtaXNzaXZlTWFwLnRvSlNPTihtZXRhKS51dWlkO2lmKHRoaXMuc3BlY3VsYXJNYXAmJnRoaXMuc3BlY3VsYXJNYXAuaXNUZXh0dXJlKWRhdGEuc3BlY3VsYXJNYXA9dGhpcy5zcGVjdWxhck1hcC50b0pTT04obWV0YSkudXVpZDtpZih0aGlzLmVudk1hcCYmdGhpcy5lbnZNYXAuaXNUZXh0dXJlKXtkYXRhLmVudk1hcD10aGlzLmVudk1hcC50b0pTT04obWV0YSkudXVpZDtkYXRhLnJlZmxlY3Rpdml0eT10aGlzLnJlZmxlY3Rpdml0eTsvLyBTY2FsZSBiZWhpbmQgZW52TWFwCn1pZih0aGlzLmdyYWRpZW50TWFwJiZ0aGlzLmdyYWRpZW50TWFwLmlzVGV4dHVyZSl7ZGF0YS5ncmFkaWVudE1hcD10aGlzLmdyYWRpZW50TWFwLnRvSlNPTihtZXRhKS51dWlkO31pZih0aGlzLnNpemUhPT11bmRlZmluZWQpZGF0YS5zaXplPXRoaXMuc2l6ZTtpZih0aGlzLnNpemVBdHRlbnVhdGlvbiE9PXVuZGVmaW5lZClkYXRhLnNpemVBdHRlbnVhdGlvbj10aGlzLnNpemVBdHRlbnVhdGlvbjtpZih0aGlzLmJsZW5kaW5nIT09Tm9ybWFsQmxlbmRpbmcpZGF0YS5ibGVuZGluZz10aGlzLmJsZW5kaW5nO2lmKHRoaXMuZmxhdFNoYWRpbmc9PT10cnVlKWRhdGEuZmxhdFNoYWRpbmc9dGhpcy5mbGF0U2hhZGluZztpZih0aGlzLnNpZGUhPT1Gcm9udFNpZGUpZGF0YS5zaWRlPXRoaXMuc2lkZTtpZih0aGlzLnZlcnRleENvbG9ycyE9PU5vQ29sb3JzKWRhdGEudmVydGV4Q29sb3JzPXRoaXMudmVydGV4Q29sb3JzO2lmKHRoaXMub3BhY2l0eTwxKWRhdGEub3BhY2l0eT10aGlzLm9wYWNpdHk7aWYodGhpcy50cmFuc3BhcmVudD09PXRydWUpZGF0YS50cmFuc3BhcmVudD10aGlzLnRyYW5zcGFyZW50O2RhdGEuZGVwdGhGdW5jPXRoaXMuZGVwdGhGdW5jO2RhdGEuZGVwdGhUZXN0PXRoaXMuZGVwdGhUZXN0O2RhdGEuZGVwdGhXcml0ZT10aGlzLmRlcHRoV3JpdGU7Ly8gcm90YXRpb24gKFNwcml0ZU1hdGVyaWFsKQppZih0aGlzLnJvdGF0aW9uIT09MClkYXRhLnJvdGF0aW9uPXRoaXMucm90YXRpb247aWYodGhpcy5saW5ld2lkdGghPT0xKWRhdGEubGluZXdpZHRoPXRoaXMubGluZXdpZHRoO2lmKHRoaXMuZGFzaFNpemUhPT11bmRlZmluZWQpZGF0YS5kYXNoU2l6ZT10aGlzLmRhc2hTaXplO2lmKHRoaXMuZ2FwU2l6ZSE9PXVuZGVmaW5lZClkYXRhLmdhcFNpemU9dGhpcy5nYXBTaXplO2lmKHRoaXMuc2NhbGUhPT11bmRlZmluZWQpZGF0YS5zY2FsZT10aGlzLnNjYWxlO2lmKHRoaXMuZGl0aGVyaW5nPT09dHJ1ZSlkYXRhLmRpdGhlcmluZz10cnVlO2lmKHRoaXMuYWxwaGFUZXN0PjApZGF0YS5hbHBoYVRlc3Q9dGhpcy5hbHBoYVRlc3Q7aWYodGhpcy5wcmVtdWx0aXBsaWVkQWxwaGE9PT10cnVlKWRhdGEucHJlbXVsdGlwbGllZEFscGhhPXRoaXMucHJlbXVsdGlwbGllZEFscGhhO2lmKHRoaXMud2lyZWZyYW1lPT09dHJ1ZSlkYXRhLndpcmVmcmFtZT10aGlzLndpcmVmcmFtZTtpZih0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD4xKWRhdGEud2lyZWZyYW1lTGluZXdpZHRoPXRoaXMud2lyZWZyYW1lTGluZXdpZHRoO2lmKHRoaXMud2lyZWZyYW1lTGluZWNhcCE9PSdyb3VuZCcpZGF0YS53aXJlZnJhbWVMaW5lY2FwPXRoaXMud2lyZWZyYW1lTGluZWNhcDtpZih0aGlzLndpcmVmcmFtZUxpbmVqb2luIT09J3JvdW5kJylkYXRhLndpcmVmcmFtZUxpbmVqb2luPXRoaXMud2lyZWZyYW1lTGluZWpvaW47aWYodGhpcy5tb3JwaFRhcmdldHM9PT10cnVlKWRhdGEubW9ycGhUYXJnZXRzPXRydWU7aWYodGhpcy5za2lubmluZz09PXRydWUpZGF0YS5za2lubmluZz10cnVlO2lmKHRoaXMudmlzaWJsZT09PWZhbHNlKWRhdGEudmlzaWJsZT1mYWxzZTtpZihKU09OLnN0cmluZ2lmeSh0aGlzLnVzZXJEYXRhKSE9PSd7fScpZGF0YS51c2VyRGF0YT10aGlzLnVzZXJEYXRhOy8vIFRPRE86IENvcGllZCBmcm9tIE9iamVjdDNELnRvSlNPTgpmdW5jdGlvbiBleHRyYWN0RnJvbUNhY2hlKGNhY2hlKXt2YXIgdmFsdWVzPVtdO2Zvcih2YXIga2V5IGluIGNhY2hlKXt2YXIgZGF0YT1jYWNoZVtrZXldO2RlbGV0ZSBkYXRhLm1ldGFkYXRhO3ZhbHVlcy5wdXNoKGRhdGEpO31yZXR1cm4gdmFsdWVzO31pZihpc1Jvb3Qpe3ZhciB0ZXh0dXJlcz1leHRyYWN0RnJvbUNhY2hlKG1ldGEudGV4dHVyZXMpO3ZhciBpbWFnZXM9ZXh0cmFjdEZyb21DYWNoZShtZXRhLmltYWdlcyk7aWYodGV4dHVyZXMubGVuZ3RoPjApZGF0YS50ZXh0dXJlcz10ZXh0dXJlcztpZihpbWFnZXMubGVuZ3RoPjApZGF0YS5pbWFnZXM9aW1hZ2VzO31yZXR1cm4gZGF0YTt9LGNsb25lOmZ1bmN0aW9uIGNsb25lKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKCkuY29weSh0aGlzKTt9LGNvcHk6ZnVuY3Rpb24gY29weShzb3VyY2Upe3RoaXMubmFtZT1zb3VyY2UubmFtZTt0aGlzLmZvZz1zb3VyY2UuZm9nO3RoaXMubGlnaHRzPXNvdXJjZS5saWdodHM7dGhpcy5ibGVuZGluZz1zb3VyY2UuYmxlbmRpbmc7dGhpcy5zaWRlPXNvdXJjZS5zaWRlO3RoaXMuZmxhdFNoYWRpbmc9c291cmNlLmZsYXRTaGFkaW5nO3RoaXMudmVydGV4Q29sb3JzPXNvdXJjZS52ZXJ0ZXhDb2xvcnM7dGhpcy5vcGFjaXR5PXNvdXJjZS5vcGFjaXR5O3RoaXMudHJhbnNwYXJlbnQ9c291cmNlLnRyYW5zcGFyZW50O3RoaXMuYmxlbmRTcmM9c291cmNlLmJsZW5kU3JjO3RoaXMuYmxlbmREc3Q9c291cmNlLmJsZW5kRHN0O3RoaXMuYmxlbmRFcXVhdGlvbj1zb3VyY2UuYmxlbmRFcXVhdGlvbjt0aGlzLmJsZW5kU3JjQWxwaGE9c291cmNlLmJsZW5kU3JjQWxwaGE7dGhpcy5ibGVuZERzdEFscGhhPXNvdXJjZS5ibGVuZERzdEFscGhhO3RoaXMuYmxlbmRFcXVhdGlvbkFscGhhPXNvdXJjZS5ibGVuZEVxdWF0aW9uQWxwaGE7dGhpcy5kZXB0aEZ1bmM9c291cmNlLmRlcHRoRnVuYzt0aGlzLmRlcHRoVGVzdD1zb3VyY2UuZGVwdGhUZXN0O3RoaXMuZGVwdGhXcml0ZT1zb3VyY2UuZGVwdGhXcml0ZTt0aGlzLmNvbG9yV3JpdGU9c291cmNlLmNvbG9yV3JpdGU7dGhpcy5wcmVjaXNpb249c291cmNlLnByZWNpc2lvbjt0aGlzLnBvbHlnb25PZmZzZXQ9c291cmNlLnBvbHlnb25PZmZzZXQ7dGhpcy5wb2x5Z29uT2Zmc2V0RmFjdG9yPXNvdXJjZS5wb2x5Z29uT2Zmc2V0RmFjdG9yO3RoaXMucG9seWdvbk9mZnNldFVuaXRzPXNvdXJjZS5wb2x5Z29uT2Zmc2V0VW5pdHM7dGhpcy5kaXRoZXJpbmc9c291cmNlLmRpdGhlcmluZzt0aGlzLmFscGhhVGVzdD1zb3VyY2UuYWxwaGFUZXN0O3RoaXMucHJlbXVsdGlwbGllZEFscGhhPXNvdXJjZS5wcmVtdWx0aXBsaWVkQWxwaGE7dGhpcy5vdmVyZHJhdz1zb3VyY2Uub3ZlcmRyYXc7dGhpcy52aXNpYmxlPXNvdXJjZS52aXNpYmxlO3RoaXMudXNlckRhdGE9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShzb3VyY2UudXNlckRhdGEpKTt0aGlzLmNsaXBTaGFkb3dzPXNvdXJjZS5jbGlwU2hhZG93czt0aGlzLmNsaXBJbnRlcnNlY3Rpb249c291cmNlLmNsaXBJbnRlcnNlY3Rpb247dmFyIHNyY1BsYW5lcz1zb3VyY2UuY2xpcHBpbmdQbGFuZXMsZHN0UGxhbmVzPW51bGw7aWYoc3JjUGxhbmVzIT09bnVsbCl7dmFyIG49c3JjUGxhbmVzLmxlbmd0aDtkc3RQbGFuZXM9bmV3IEFycmF5KG4pO2Zvcih2YXIgaT0wO2khPT1uOysraSl7ZHN0UGxhbmVzW2ldPXNyY1BsYW5lc1tpXS5jbG9uZSgpO319dGhpcy5jbGlwcGluZ1BsYW5lcz1kc3RQbGFuZXM7cmV0dXJuIHRoaXM7fSxkaXNwb3NlOmZ1bmN0aW9uIGRpc3Bvc2UoKXt0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6J2Rpc3Bvc2UnfSk7fX0pOy8qKgogKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tLwogKiBAYXV0aG9yIGFsdGVyZWRxIC8gaHR0cDovL2FsdGVyZWRxdWFsaWEuY29tLwogKiBAYXV0aG9yIGJob3VzdG9uIC8gaHR0cHM6Ly9jbGFyYS5pbwogKiBAYXV0aG9yIFdlc3RMYW5nbGV5IC8gaHR0cDovL2dpdGh1Yi5jb20vV2VzdExhbmdsZXkKICoKICogcGFyYW1ldGVycyA9IHsKICoKICogIG9wYWNpdHk6IDxmbG9hdD4sCiAqCiAqICBtYXA6IG5ldyBUSFJFRS5UZXh0dXJlKCA8SW1hZ2U+ICksCiAqCiAqICBhbHBoYU1hcDogbmV3IFRIUkVFLlRleHR1cmUoIDxJbWFnZT4gKSwKICoKICogIGRpc3BsYWNlbWVudE1hcDogbmV3IFRIUkVFLlRleHR1cmUoIDxJbWFnZT4gKSwKICogIGRpc3BsYWNlbWVudFNjYWxlOiA8ZmxvYXQ+LAogKiAgZGlzcGxhY2VtZW50QmlhczogPGZsb2F0PiwKICoKICogIHdpcmVmcmFtZTogPGJvb2xlYW4+LAogKiAgd2lyZWZyYW1lTGluZXdpZHRoOiA8ZmxvYXQ+CiAqIH0KICovZnVuY3Rpb24gTWVzaERlcHRoTWF0ZXJpYWwocGFyYW1ldGVycyl7TWF0ZXJpYWwuY2FsbCh0aGlzKTt0aGlzLnR5cGU9J01lc2hEZXB0aE1hdGVyaWFsJzt0aGlzLmRlcHRoUGFja2luZz1CYXNpY0RlcHRoUGFja2luZzt0aGlzLnNraW5uaW5nPWZhbHNlO3RoaXMubW9ycGhUYXJnZXRzPWZhbHNlO3RoaXMubWFwPW51bGw7dGhpcy5hbHBoYU1hcD1udWxsO3RoaXMuZGlzcGxhY2VtZW50TWFwPW51bGw7dGhpcy5kaXNwbGFjZW1lbnRTY2FsZT0xO3RoaXMuZGlzcGxhY2VtZW50Qmlhcz0wO3RoaXMud2lyZWZyYW1lPWZhbHNlO3RoaXMud2lyZWZyYW1lTGluZXdpZHRoPTE7dGhpcy5mb2c9ZmFsc2U7dGhpcy5saWdodHM9ZmFsc2U7dGhpcy5zZXRWYWx1ZXMocGFyYW1ldGVycyk7fU1lc2hEZXB0aE1hdGVyaWFsLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKE1hdGVyaWFsLnByb3RvdHlwZSk7TWVzaERlcHRoTWF0ZXJpYWwucHJvdG90eXBlLmNvbnN0cnVjdG9yPU1lc2hEZXB0aE1hdGVyaWFsO01lc2hEZXB0aE1hdGVyaWFsLnByb3RvdHlwZS5pc01lc2hEZXB0aE1hdGVyaWFsPXRydWU7TWVzaERlcHRoTWF0ZXJpYWwucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oc291cmNlKXtNYXRlcmlhbC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsc291cmNlKTt0aGlzLmRlcHRoUGFja2luZz1zb3VyY2UuZGVwdGhQYWNraW5nO3RoaXMuc2tpbm5pbmc9c291cmNlLnNraW5uaW5nO3RoaXMubW9ycGhUYXJnZXRzPXNvdXJjZS5tb3JwaFRhcmdldHM7dGhpcy5tYXA9c291cmNlLm1hcDt0aGlzLmFscGhhTWFwPXNvdXJjZS5hbHBoYU1hcDt0aGlzLmRpc3BsYWNlbWVudE1hcD1zb3VyY2UuZGlzcGxhY2VtZW50TWFwO3RoaXMuZGlzcGxhY2VtZW50U2NhbGU9c291cmNlLmRpc3BsYWNlbWVudFNjYWxlO3RoaXMuZGlzcGxhY2VtZW50Qmlhcz1zb3VyY2UuZGlzcGxhY2VtZW50Qmlhczt0aGlzLndpcmVmcmFtZT1zb3VyY2Uud2lyZWZyYW1lO3RoaXMud2lyZWZyYW1lTGluZXdpZHRoPXNvdXJjZS53aXJlZnJhbWVMaW5ld2lkdGg7cmV0dXJuIHRoaXM7fTsvKioKICogQGF1dGhvciBXZXN0TGFuZ2xleSAvIGh0dHA6Ly9naXRodWIuY29tL1dlc3RMYW5nbGV5CiAqCiAqIHBhcmFtZXRlcnMgPSB7CiAqCiAqICByZWZlcmVuY2VQb3NpdGlvbjogPGZsb2F0PiwKICogIG5lYXJEaXN0YW5jZTogPGZsb2F0PiwKICogIGZhckRpc3RhbmNlOiA8ZmxvYXQ+LAogKgogKiAgc2tpbm5pbmc6IDxib29sPiwKICogIG1vcnBoVGFyZ2V0czogPGJvb2w+LAogKgogKiAgbWFwOiBuZXcgVEhSRUUuVGV4dHVyZSggPEltYWdlPiApLAogKgogKiAgYWxwaGFNYXA6IG5ldyBUSFJFRS5UZXh0dXJlKCA8SW1hZ2U+ICksCiAqCiAqICBkaXNwbGFjZW1lbnRNYXA6IG5ldyBUSFJFRS5UZXh0dXJlKCA8SW1hZ2U+ICksCiAqICBkaXNwbGFjZW1lbnRTY2FsZTogPGZsb2F0PiwKICogIGRpc3BsYWNlbWVudEJpYXM6IDxmbG9hdD4KICoKICogfQogKi9mdW5jdGlvbiBNZXNoRGlzdGFuY2VNYXRlcmlhbChwYXJhbWV0ZXJzKXtNYXRlcmlhbC5jYWxsKHRoaXMpO3RoaXMudHlwZT0nTWVzaERpc3RhbmNlTWF0ZXJpYWwnO3RoaXMucmVmZXJlbmNlUG9zaXRpb249bmV3IFZlY3RvcjMoKTt0aGlzLm5lYXJEaXN0YW5jZT0xO3RoaXMuZmFyRGlzdGFuY2U9MTAwMDt0aGlzLnNraW5uaW5nPWZhbHNlO3RoaXMubW9ycGhUYXJnZXRzPWZhbHNlO3RoaXMubWFwPW51bGw7dGhpcy5hbHBoYU1hcD1udWxsO3RoaXMuZGlzcGxhY2VtZW50TWFwPW51bGw7dGhpcy5kaXNwbGFjZW1lbnRTY2FsZT0xO3RoaXMuZGlzcGxhY2VtZW50Qmlhcz0wO3RoaXMuZm9nPWZhbHNlO3RoaXMubGlnaHRzPWZhbHNlO3RoaXMuc2V0VmFsdWVzKHBhcmFtZXRlcnMpO31NZXNoRGlzdGFuY2VNYXRlcmlhbC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShNYXRlcmlhbC5wcm90b3R5cGUpO01lc2hEaXN0YW5jZU1hdGVyaWFsLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1NZXNoRGlzdGFuY2VNYXRlcmlhbDtNZXNoRGlzdGFuY2VNYXRlcmlhbC5wcm90b3R5cGUuaXNNZXNoRGlzdGFuY2VNYXRlcmlhbD10cnVlO01lc2hEaXN0YW5jZU1hdGVyaWFsLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHNvdXJjZSl7TWF0ZXJpYWwucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHNvdXJjZSk7dGhpcy5yZWZlcmVuY2VQb3NpdGlvbi5jb3B5KHNvdXJjZS5yZWZlcmVuY2VQb3NpdGlvbik7dGhpcy5uZWFyRGlzdGFuY2U9c291cmNlLm5lYXJEaXN0YW5jZTt0aGlzLmZhckRpc3RhbmNlPXNvdXJjZS5mYXJEaXN0YW5jZTt0aGlzLnNraW5uaW5nPXNvdXJjZS5za2lubmluZzt0aGlzLm1vcnBoVGFyZ2V0cz1zb3VyY2UubW9ycGhUYXJnZXRzO3RoaXMubWFwPXNvdXJjZS5tYXA7dGhpcy5hbHBoYU1hcD1zb3VyY2UuYWxwaGFNYXA7dGhpcy5kaXNwbGFjZW1lbnRNYXA9c291cmNlLmRpc3BsYWNlbWVudE1hcDt0aGlzLmRpc3BsYWNlbWVudFNjYWxlPXNvdXJjZS5kaXNwbGFjZW1lbnRTY2FsZTt0aGlzLmRpc3BsYWNlbWVudEJpYXM9c291cmNlLmRpc3BsYWNlbWVudEJpYXM7cmV0dXJuIHRoaXM7fTsvKioKICogQGF1dGhvciBiaG91c3RvbiAvIGh0dHA6Ly9jbGFyYS5pbwogKiBAYXV0aG9yIFdlc3RMYW5nbGV5IC8gaHR0cDovL2dpdGh1Yi5jb20vV2VzdExhbmdsZXkKICovZnVuY3Rpb24gQm94MyhtaW4sbWF4KXt0aGlzLm1pbj1taW4hPT11bmRlZmluZWQ/bWluOm5ldyBWZWN0b3IzKCtJbmZpbml0eSwrSW5maW5pdHksK0luZmluaXR5KTt0aGlzLm1heD1tYXghPT11bmRlZmluZWQ/bWF4Om5ldyBWZWN0b3IzKC1JbmZpbml0eSwtSW5maW5pdHksLUluZmluaXR5KTt9T2JqZWN0LmFzc2lnbihCb3gzLnByb3RvdHlwZSx7aXNCb3gzOnRydWUsc2V0OmZ1bmN0aW9uIHNldChtaW4sbWF4KXt0aGlzLm1pbi5jb3B5KG1pbik7dGhpcy5tYXguY29weShtYXgpO3JldHVybiB0aGlzO30sc2V0RnJvbUFycmF5OmZ1bmN0aW9uIHNldEZyb21BcnJheShhcnJheSl7dmFyIG1pblg9K0luZmluaXR5O3ZhciBtaW5ZPStJbmZpbml0eTt2YXIgbWluWj0rSW5maW5pdHk7dmFyIG1heFg9LUluZmluaXR5O3ZhciBtYXhZPS1JbmZpbml0eTt2YXIgbWF4Wj0tSW5maW5pdHk7Zm9yKHZhciBpPTAsbD1hcnJheS5sZW5ndGg7aTxsO2krPTMpe3ZhciB4PWFycmF5W2ldO3ZhciB5PWFycmF5W2krMV07dmFyIHo9YXJyYXlbaSsyXTtpZih4PG1pblgpbWluWD14O2lmKHk8bWluWSltaW5ZPXk7aWYoejxtaW5aKW1pblo9ejtpZih4Pm1heFgpbWF4WD14O2lmKHk+bWF4WSltYXhZPXk7aWYoej5tYXhaKW1heFo9ejt9dGhpcy5taW4uc2V0KG1pblgsbWluWSxtaW5aKTt0aGlzLm1heC5zZXQobWF4WCxtYXhZLG1heFopO3JldHVybiB0aGlzO30sc2V0RnJvbUJ1ZmZlckF0dHJpYnV0ZTpmdW5jdGlvbiBzZXRGcm9tQnVmZmVyQXR0cmlidXRlKGF0dHJpYnV0ZSl7dmFyIG1pblg9K0luZmluaXR5O3ZhciBtaW5ZPStJbmZpbml0eTt2YXIgbWluWj0rSW5maW5pdHk7dmFyIG1heFg9LUluZmluaXR5O3ZhciBtYXhZPS1JbmZpbml0eTt2YXIgbWF4Wj0tSW5maW5pdHk7Zm9yKHZhciBpPTAsbD1hdHRyaWJ1dGUuY291bnQ7aTxsO2krKyl7dmFyIHg9YXR0cmlidXRlLmdldFgoaSk7dmFyIHk9YXR0cmlidXRlLmdldFkoaSk7dmFyIHo9YXR0cmlidXRlLmdldFooaSk7aWYoeDxtaW5YKW1pblg9eDtpZih5PG1pblkpbWluWT15O2lmKHo8bWluWiltaW5aPXo7aWYoeD5tYXhYKW1heFg9eDtpZih5Pm1heFkpbWF4WT15O2lmKHo+bWF4WiltYXhaPXo7fXRoaXMubWluLnNldChtaW5YLG1pblksbWluWik7dGhpcy5tYXguc2V0KG1heFgsbWF4WSxtYXhaKTtyZXR1cm4gdGhpczt9LHNldEZyb21Qb2ludHM6ZnVuY3Rpb24gc2V0RnJvbVBvaW50cyhwb2ludHMpe3RoaXMubWFrZUVtcHR5KCk7Zm9yKHZhciBpPTAsaWw9cG9pbnRzLmxlbmd0aDtpPGlsO2krKyl7dGhpcy5leHBhbmRCeVBvaW50KHBvaW50c1tpXSk7fXJldHVybiB0aGlzO30sc2V0RnJvbUNlbnRlckFuZFNpemU6ZnVuY3Rpb24oKXt2YXIgdjE9bmV3IFZlY3RvcjMoKTtyZXR1cm4gZnVuY3Rpb24gc2V0RnJvbUNlbnRlckFuZFNpemUoY2VudGVyLHNpemUpe3ZhciBoYWxmU2l6ZT12MS5jb3B5KHNpemUpLm11bHRpcGx5U2NhbGFyKDAuNSk7dGhpcy5taW4uY29weShjZW50ZXIpLnN1YihoYWxmU2l6ZSk7dGhpcy5tYXguY29weShjZW50ZXIpLmFkZChoYWxmU2l6ZSk7cmV0dXJuIHRoaXM7fTt9KCksc2V0RnJvbU9iamVjdDpmdW5jdGlvbiBzZXRGcm9tT2JqZWN0KG9iamVjdCl7dGhpcy5tYWtlRW1wdHkoKTtyZXR1cm4gdGhpcy5leHBhbmRCeU9iamVjdChvYmplY3QpO30sY2xvbmU6ZnVuY3Rpb24gY2xvbmUoKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IoKS5jb3B5KHRoaXMpO30sY29weTpmdW5jdGlvbiBjb3B5KGJveCl7dGhpcy5taW4uY29weShib3gubWluKTt0aGlzLm1heC5jb3B5KGJveC5tYXgpO3JldHVybiB0aGlzO30sbWFrZUVtcHR5OmZ1bmN0aW9uIG1ha2VFbXB0eSgpe3RoaXMubWluLng9dGhpcy5taW4ueT10aGlzLm1pbi56PStJbmZpbml0eTt0aGlzLm1heC54PXRoaXMubWF4Lnk9dGhpcy5tYXguej0tSW5maW5pdHk7cmV0dXJuIHRoaXM7fSxpc0VtcHR5OmZ1bmN0aW9uIGlzRW1wdHkoKXsvLyB0aGlzIGlzIGEgbW9yZSByb2J1c3QgY2hlY2sgZm9yIGVtcHR5IHRoYW4gKCB2b2x1bWUgPD0gMCApIGJlY2F1c2Ugdm9sdW1lIGNhbiBnZXQgcG9zaXRpdmUgd2l0aCB0d28gbmVnYXRpdmUgYXhlcwpyZXR1cm4gdGhpcy5tYXgueDx0aGlzLm1pbi54fHx0aGlzLm1heC55PHRoaXMubWluLnl8fHRoaXMubWF4Lno8dGhpcy5taW4uejt9LGdldENlbnRlcjpmdW5jdGlvbiBnZXRDZW50ZXIob3B0aW9uYWxUYXJnZXQpe3ZhciByZXN1bHQ9b3B0aW9uYWxUYXJnZXR8fG5ldyBWZWN0b3IzKCk7cmV0dXJuIHRoaXMuaXNFbXB0eSgpP3Jlc3VsdC5zZXQoMCwwLDApOnJlc3VsdC5hZGRWZWN0b3JzKHRoaXMubWluLHRoaXMubWF4KS5tdWx0aXBseVNjYWxhcigwLjUpO30sZ2V0U2l6ZTpmdW5jdGlvbiBnZXRTaXplKG9wdGlvbmFsVGFyZ2V0KXt2YXIgcmVzdWx0PW9wdGlvbmFsVGFyZ2V0fHxuZXcgVmVjdG9yMygpO3JldHVybiB0aGlzLmlzRW1wdHkoKT9yZXN1bHQuc2V0KDAsMCwwKTpyZXN1bHQuc3ViVmVjdG9ycyh0aGlzLm1heCx0aGlzLm1pbik7fSxleHBhbmRCeVBvaW50OmZ1bmN0aW9uIGV4cGFuZEJ5UG9pbnQocG9pbnQpe3RoaXMubWluLm1pbihwb2ludCk7dGhpcy5tYXgubWF4KHBvaW50KTtyZXR1cm4gdGhpczt9LGV4cGFuZEJ5VmVjdG9yOmZ1bmN0aW9uIGV4cGFuZEJ5VmVjdG9yKHZlY3Rvcil7dGhpcy5taW4uc3ViKHZlY3Rvcik7dGhpcy5tYXguYWRkKHZlY3Rvcik7cmV0dXJuIHRoaXM7fSxleHBhbmRCeVNjYWxhcjpmdW5jdGlvbiBleHBhbmRCeVNjYWxhcihzY2FsYXIpe3RoaXMubWluLmFkZFNjYWxhcigtc2NhbGFyKTt0aGlzLm1heC5hZGRTY2FsYXIoc2NhbGFyKTtyZXR1cm4gdGhpczt9LGV4cGFuZEJ5T2JqZWN0OmZ1bmN0aW9uKCl7Ly8gQ29tcHV0ZXMgdGhlIHdvcmxkLWF4aXMtYWxpZ25lZCBib3VuZGluZyBib3ggb2YgYW4gb2JqZWN0IChpbmNsdWRpbmcgaXRzIGNoaWxkcmVuKSwKLy8gYWNjb3VudGluZyBmb3IgYm90aCB0aGUgb2JqZWN0J3MsIGFuZCBjaGlsZHJlbidzLCB3b3JsZCB0cmFuc2Zvcm1zCnZhciBzY29wZSxpLGw7dmFyIHYxPW5ldyBWZWN0b3IzKCk7ZnVuY3Rpb24gdHJhdmVyc2Uobm9kZSl7dmFyIGdlb21ldHJ5PW5vZGUuZ2VvbWV0cnk7aWYoZ2VvbWV0cnkhPT11bmRlZmluZWQpe2lmKGdlb21ldHJ5LmlzR2VvbWV0cnkpe3ZhciB2ZXJ0aWNlcz1nZW9tZXRyeS52ZXJ0aWNlcztmb3IoaT0wLGw9dmVydGljZXMubGVuZ3RoO2k8bDtpKyspe3YxLmNvcHkodmVydGljZXNbaV0pO3YxLmFwcGx5TWF0cml4NChub2RlLm1hdHJpeFdvcmxkKTtzY29wZS5leHBhbmRCeVBvaW50KHYxKTt9fWVsc2UgaWYoZ2VvbWV0cnkuaXNCdWZmZXJHZW9tZXRyeSl7dmFyIGF0dHJpYnV0ZT1nZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uO2lmKGF0dHJpYnV0ZSE9PXVuZGVmaW5lZCl7Zm9yKGk9MCxsPWF0dHJpYnV0ZS5jb3VudDtpPGw7aSsrKXt2MS5mcm9tQnVmZmVyQXR0cmlidXRlKGF0dHJpYnV0ZSxpKS5hcHBseU1hdHJpeDQobm9kZS5tYXRyaXhXb3JsZCk7c2NvcGUuZXhwYW5kQnlQb2ludCh2MSk7fX19fX1yZXR1cm4gZnVuY3Rpb24gZXhwYW5kQnlPYmplY3Qob2JqZWN0KXtzY29wZT10aGlzO29iamVjdC51cGRhdGVNYXRyaXhXb3JsZCh0cnVlKTtvYmplY3QudHJhdmVyc2UodHJhdmVyc2UpO3JldHVybiB0aGlzO307fSgpLGNvbnRhaW5zUG9pbnQ6ZnVuY3Rpb24gY29udGFpbnNQb2ludChwb2ludCl7cmV0dXJuIHBvaW50Lng8dGhpcy5taW4ueHx8cG9pbnQueD50aGlzLm1heC54fHxwb2ludC55PHRoaXMubWluLnl8fHBvaW50Lnk+dGhpcy5tYXgueXx8cG9pbnQuejx0aGlzLm1pbi56fHxwb2ludC56PnRoaXMubWF4Lno/ZmFsc2U6dHJ1ZTt9LGNvbnRhaW5zQm94OmZ1bmN0aW9uIGNvbnRhaW5zQm94KGJveCl7cmV0dXJuIHRoaXMubWluLng8PWJveC5taW4ueCYmYm94Lm1heC54PD10aGlzLm1heC54JiZ0aGlzLm1pbi55PD1ib3gubWluLnkmJmJveC5tYXgueTw9dGhpcy5tYXgueSYmdGhpcy5taW4uejw9Ym94Lm1pbi56JiZib3gubWF4Lno8PXRoaXMubWF4Lno7fSxnZXRQYXJhbWV0ZXI6ZnVuY3Rpb24gZ2V0UGFyYW1ldGVyKHBvaW50LG9wdGlvbmFsVGFyZ2V0KXsvLyBUaGlzIGNhbiBwb3RlbnRpYWxseSBoYXZlIGEgZGl2aWRlIGJ5IHplcm8gaWYgdGhlIGJveAovLyBoYXMgYSBzaXplIGRpbWVuc2lvbiBvZiAwLgp2YXIgcmVzdWx0PW9wdGlvbmFsVGFyZ2V0fHxuZXcgVmVjdG9yMygpO3JldHVybiByZXN1bHQuc2V0KChwb2ludC54LXRoaXMubWluLngpLyh0aGlzLm1heC54LXRoaXMubWluLngpLChwb2ludC55LXRoaXMubWluLnkpLyh0aGlzLm1heC55LXRoaXMubWluLnkpLChwb2ludC56LXRoaXMubWluLnopLyh0aGlzLm1heC56LXRoaXMubWluLnopKTt9LGludGVyc2VjdHNCb3g6ZnVuY3Rpb24gaW50ZXJzZWN0c0JveChib3gpey8vIHVzaW5nIDYgc3BsaXR0aW5nIHBsYW5lcyB0byBydWxlIG91dCBpbnRlcnNlY3Rpb25zLgpyZXR1cm4gYm94Lm1heC54PHRoaXMubWluLnh8fGJveC5taW4ueD50aGlzLm1heC54fHxib3gubWF4Lnk8dGhpcy5taW4ueXx8Ym94Lm1pbi55PnRoaXMubWF4Lnl8fGJveC5tYXguejx0aGlzLm1pbi56fHxib3gubWluLno+dGhpcy5tYXguej9mYWxzZTp0cnVlO30saW50ZXJzZWN0c1NwaGVyZTpmdW5jdGlvbigpe3ZhciBjbG9zZXN0UG9pbnQ9bmV3IFZlY3RvcjMoKTtyZXR1cm4gZnVuY3Rpb24gaW50ZXJzZWN0c1NwaGVyZShzcGhlcmUpey8vIEZpbmQgdGhlIHBvaW50IG9uIHRoZSBBQUJCIGNsb3Nlc3QgdG8gdGhlIHNwaGVyZSBjZW50ZXIuCnRoaXMuY2xhbXBQb2ludChzcGhlcmUuY2VudGVyLGNsb3Nlc3RQb2ludCk7Ly8gSWYgdGhhdCBwb2ludCBpcyBpbnNpZGUgdGhlIHNwaGVyZSwgdGhlIEFBQkIgYW5kIHNwaGVyZSBpbnRlcnNlY3QuCnJldHVybiBjbG9zZXN0UG9pbnQuZGlzdGFuY2VUb1NxdWFyZWQoc3BoZXJlLmNlbnRlcik8PXNwaGVyZS5yYWRpdXMqc3BoZXJlLnJhZGl1czt9O30oKSxpbnRlcnNlY3RzUGxhbmU6ZnVuY3Rpb24gaW50ZXJzZWN0c1BsYW5lKHBsYW5lKXsvLyBXZSBjb21wdXRlIHRoZSBtaW5pbXVtIGFuZCBtYXhpbXVtIGRvdCBwcm9kdWN0IHZhbHVlcy4gSWYgdGhvc2UgdmFsdWVzCi8vIGFyZSBvbiB0aGUgc2FtZSBzaWRlIChiYWNrIG9yIGZyb250KSBvZiB0aGUgcGxhbmUsIHRoZW4gdGhlcmUgaXMgbm8gaW50ZXJzZWN0aW9uLgp2YXIgbWluLG1heDtpZihwbGFuZS5ub3JtYWwueD4wKXttaW49cGxhbmUubm9ybWFsLngqdGhpcy5taW4ueDttYXg9cGxhbmUubm9ybWFsLngqdGhpcy5tYXgueDt9ZWxzZXttaW49cGxhbmUubm9ybWFsLngqdGhpcy5tYXgueDttYXg9cGxhbmUubm9ybWFsLngqdGhpcy5taW4ueDt9aWYocGxhbmUubm9ybWFsLnk+MCl7bWluKz1wbGFuZS5ub3JtYWwueSp0aGlzLm1pbi55O21heCs9cGxhbmUubm9ybWFsLnkqdGhpcy5tYXgueTt9ZWxzZXttaW4rPXBsYW5lLm5vcm1hbC55KnRoaXMubWF4Lnk7bWF4Kz1wbGFuZS5ub3JtYWwueSp0aGlzLm1pbi55O31pZihwbGFuZS5ub3JtYWwuej4wKXttaW4rPXBsYW5lLm5vcm1hbC56KnRoaXMubWluLno7bWF4Kz1wbGFuZS5ub3JtYWwueip0aGlzLm1heC56O31lbHNle21pbis9cGxhbmUubm9ybWFsLnoqdGhpcy5tYXguejttYXgrPXBsYW5lLm5vcm1hbC56KnRoaXMubWluLno7fXJldHVybiBtaW48PXBsYW5lLmNvbnN0YW50JiZtYXg+PXBsYW5lLmNvbnN0YW50O30sY2xhbXBQb2ludDpmdW5jdGlvbiBjbGFtcFBvaW50KHBvaW50LG9wdGlvbmFsVGFyZ2V0KXt2YXIgcmVzdWx0PW9wdGlvbmFsVGFyZ2V0fHxuZXcgVmVjdG9yMygpO3JldHVybiByZXN1bHQuY29weShwb2ludCkuY2xhbXAodGhpcy5taW4sdGhpcy5tYXgpO30sZGlzdGFuY2VUb1BvaW50OmZ1bmN0aW9uKCl7dmFyIHYxPW5ldyBWZWN0b3IzKCk7cmV0dXJuIGZ1bmN0aW9uIGRpc3RhbmNlVG9Qb2ludChwb2ludCl7dmFyIGNsYW1wZWRQb2ludD12MS5jb3B5KHBvaW50KS5jbGFtcCh0aGlzLm1pbix0aGlzLm1heCk7cmV0dXJuIGNsYW1wZWRQb2ludC5zdWIocG9pbnQpLmxlbmd0aCgpO307fSgpLGdldEJvdW5kaW5nU3BoZXJlOmZ1bmN0aW9uKCl7dmFyIHYxPW5ldyBWZWN0b3IzKCk7cmV0dXJuIGZ1bmN0aW9uIGdldEJvdW5kaW5nU3BoZXJlKG9wdGlvbmFsVGFyZ2V0KXt2YXIgcmVzdWx0PW9wdGlvbmFsVGFyZ2V0fHxuZXcgU3BoZXJlKCk7dGhpcy5nZXRDZW50ZXIocmVzdWx0LmNlbnRlcik7cmVzdWx0LnJhZGl1cz10aGlzLmdldFNpemUodjEpLmxlbmd0aCgpKjAuNTtyZXR1cm4gcmVzdWx0O307fSgpLGludGVyc2VjdDpmdW5jdGlvbiBpbnRlcnNlY3QoYm94KXt0aGlzLm1pbi5tYXgoYm94Lm1pbik7dGhpcy5tYXgubWluKGJveC5tYXgpOy8vIGVuc3VyZSB0aGF0IGlmIHRoZXJlIGlzIG5vIG92ZXJsYXAsIHRoZSByZXN1bHQgaXMgZnVsbHkgZW1wdHksIG5vdCBzbGlnaHRseSBlbXB0eSB3aXRoIG5vbi1pbmYvK2luZiB2YWx1ZXMgdGhhdCB3aWxsIGNhdXNlIHN1YnNlcXVlbmNlIGludGVyc2VjdHMgdG8gZXJyb25lb3VzbHkgcmV0dXJuIHZhbGlkIHZhbHVlcy4KaWYodGhpcy5pc0VtcHR5KCkpdGhpcy5tYWtlRW1wdHkoKTtyZXR1cm4gdGhpczt9LHVuaW9uOmZ1bmN0aW9uIHVuaW9uKGJveCl7dGhpcy5taW4ubWluKGJveC5taW4pO3RoaXMubWF4Lm1heChib3gubWF4KTtyZXR1cm4gdGhpczt9LGFwcGx5TWF0cml4NDpmdW5jdGlvbigpe3ZhciBwb2ludHM9W25ldyBWZWN0b3IzKCksbmV3IFZlY3RvcjMoKSxuZXcgVmVjdG9yMygpLG5ldyBWZWN0b3IzKCksbmV3IFZlY3RvcjMoKSxuZXcgVmVjdG9yMygpLG5ldyBWZWN0b3IzKCksbmV3IFZlY3RvcjMoKV07cmV0dXJuIGZ1bmN0aW9uIGFwcGx5TWF0cml4NChtYXRyaXgpey8vIHRyYW5zZm9ybSBvZiBlbXB0eSBib3ggaXMgYW4gZW1wdHkgYm94LgppZih0aGlzLmlzRW1wdHkoKSlyZXR1cm4gdGhpczsvLyBOT1RFOiBJIGFtIHVzaW5nIGEgYmluYXJ5IHBhdHRlcm4gdG8gc3BlY2lmeSBhbGwgMl4zIGNvbWJpbmF0aW9ucyBiZWxvdwpwb2ludHNbMF0uc2V0KHRoaXMubWluLngsdGhpcy5taW4ueSx0aGlzLm1pbi56KS5hcHBseU1hdHJpeDQobWF0cml4KTsvLyAwMDAKcG9pbnRzWzFdLnNldCh0aGlzLm1pbi54LHRoaXMubWluLnksdGhpcy5tYXgueikuYXBwbHlNYXRyaXg0KG1hdHJpeCk7Ly8gMDAxCnBvaW50c1syXS5zZXQodGhpcy5taW4ueCx0aGlzLm1heC55LHRoaXMubWluLnopLmFwcGx5TWF0cml4NChtYXRyaXgpOy8vIDAxMApwb2ludHNbM10uc2V0KHRoaXMubWluLngsdGhpcy5tYXgueSx0aGlzLm1heC56KS5hcHBseU1hdHJpeDQobWF0cml4KTsvLyAwMTEKcG9pbnRzWzRdLnNldCh0aGlzLm1heC54LHRoaXMubWluLnksdGhpcy5taW4ueikuYXBwbHlNYXRyaXg0KG1hdHJpeCk7Ly8gMTAwCnBvaW50c1s1XS5zZXQodGhpcy5tYXgueCx0aGlzLm1pbi55LHRoaXMubWF4LnopLmFwcGx5TWF0cml4NChtYXRyaXgpOy8vIDEwMQpwb2ludHNbNl0uc2V0KHRoaXMubWF4LngsdGhpcy5tYXgueSx0aGlzLm1pbi56KS5hcHBseU1hdHJpeDQobWF0cml4KTsvLyAxMTAKcG9pbnRzWzddLnNldCh0aGlzLm1heC54LHRoaXMubWF4LnksdGhpcy5tYXgueikuYXBwbHlNYXRyaXg0KG1hdHJpeCk7Ly8gMTExCnRoaXMuc2V0RnJvbVBvaW50cyhwb2ludHMpO3JldHVybiB0aGlzO307fSgpLHRyYW5zbGF0ZTpmdW5jdGlvbiB0cmFuc2xhdGUob2Zmc2V0KXt0aGlzLm1pbi5hZGQob2Zmc2V0KTt0aGlzLm1heC5hZGQob2Zmc2V0KTtyZXR1cm4gdGhpczt9LGVxdWFsczpmdW5jdGlvbiBlcXVhbHMoYm94KXtyZXR1cm4gYm94Lm1pbi5lcXVhbHModGhpcy5taW4pJiZib3gubWF4LmVxdWFscyh0aGlzLm1heCk7fX0pOy8qKgogKiBAYXV0aG9yIGJob3VzdG9uIC8gaHR0cDovL2NsYXJhLmlvCiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vCiAqL2Z1bmN0aW9uIFNwaGVyZShjZW50ZXIscmFkaXVzKXt0aGlzLmNlbnRlcj1jZW50ZXIhPT11bmRlZmluZWQ/Y2VudGVyOm5ldyBWZWN0b3IzKCk7dGhpcy5yYWRpdXM9cmFkaXVzIT09dW5kZWZpbmVkP3JhZGl1czowO31PYmplY3QuYXNzaWduKFNwaGVyZS5wcm90b3R5cGUse3NldDpmdW5jdGlvbiBzZXQoY2VudGVyLHJhZGl1cyl7dGhpcy5jZW50ZXIuY29weShjZW50ZXIpO3RoaXMucmFkaXVzPXJhZGl1cztyZXR1cm4gdGhpczt9LHNldEZyb21Qb2ludHM6ZnVuY3Rpb24oKXt2YXIgYm94PW5ldyBCb3gzKCk7cmV0dXJuIGZ1bmN0aW9uIHNldEZyb21Qb2ludHMocG9pbnRzLG9wdGlvbmFsQ2VudGVyKXt2YXIgY2VudGVyPXRoaXMuY2VudGVyO2lmKG9wdGlvbmFsQ2VudGVyIT09dW5kZWZpbmVkKXtjZW50ZXIuY29weShvcHRpb25hbENlbnRlcik7fWVsc2V7Ym94LnNldEZyb21Qb2ludHMocG9pbnRzKS5nZXRDZW50ZXIoY2VudGVyKTt9dmFyIG1heFJhZGl1c1NxPTA7Zm9yKHZhciBpPTAsaWw9cG9pbnRzLmxlbmd0aDtpPGlsO2krKyl7bWF4UmFkaXVzU3E9TWF0aC5tYXgobWF4UmFkaXVzU3EsY2VudGVyLmRpc3RhbmNlVG9TcXVhcmVkKHBvaW50c1tpXSkpO310aGlzLnJhZGl1cz1NYXRoLnNxcnQobWF4UmFkaXVzU3EpO3JldHVybiB0aGlzO307fSgpLGNsb25lOmZ1bmN0aW9uIGNsb25lKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKCkuY29weSh0aGlzKTt9LGNvcHk6ZnVuY3Rpb24gY29weShzcGhlcmUpe3RoaXMuY2VudGVyLmNvcHkoc3BoZXJlLmNlbnRlcik7dGhpcy5yYWRpdXM9c3BoZXJlLnJhZGl1cztyZXR1cm4gdGhpczt9LGVtcHR5OmZ1bmN0aW9uIGVtcHR5KCl7cmV0dXJuIHRoaXMucmFkaXVzPD0wO30sY29udGFpbnNQb2ludDpmdW5jdGlvbiBjb250YWluc1BvaW50KHBvaW50KXtyZXR1cm4gcG9pbnQuZGlzdGFuY2VUb1NxdWFyZWQodGhpcy5jZW50ZXIpPD10aGlzLnJhZGl1cyp0aGlzLnJhZGl1czt9LGRpc3RhbmNlVG9Qb2ludDpmdW5jdGlvbiBkaXN0YW5jZVRvUG9pbnQocG9pbnQpe3JldHVybiBwb2ludC5kaXN0YW5jZVRvKHRoaXMuY2VudGVyKS10aGlzLnJhZGl1czt9LGludGVyc2VjdHNTcGhlcmU6ZnVuY3Rpb24gaW50ZXJzZWN0c1NwaGVyZShzcGhlcmUpe3ZhciByYWRpdXNTdW09dGhpcy5yYWRpdXMrc3BoZXJlLnJhZGl1cztyZXR1cm4gc3BoZXJlLmNlbnRlci5kaXN0YW5jZVRvU3F1YXJlZCh0aGlzLmNlbnRlcik8PXJhZGl1c1N1bSpyYWRpdXNTdW07fSxpbnRlcnNlY3RzQm94OmZ1bmN0aW9uIGludGVyc2VjdHNCb3goYm94KXtyZXR1cm4gYm94LmludGVyc2VjdHNTcGhlcmUodGhpcyk7fSxpbnRlcnNlY3RzUGxhbmU6ZnVuY3Rpb24gaW50ZXJzZWN0c1BsYW5lKHBsYW5lKXtyZXR1cm4gTWF0aC5hYnMocGxhbmUuZGlzdGFuY2VUb1BvaW50KHRoaXMuY2VudGVyKSk8PXRoaXMucmFkaXVzO30sY2xhbXBQb2ludDpmdW5jdGlvbiBjbGFtcFBvaW50KHBvaW50LG9wdGlvbmFsVGFyZ2V0KXt2YXIgZGVsdGFMZW5ndGhTcT10aGlzLmNlbnRlci5kaXN0YW5jZVRvU3F1YXJlZChwb2ludCk7dmFyIHJlc3VsdD1vcHRpb25hbFRhcmdldHx8bmV3IFZlY3RvcjMoKTtyZXN1bHQuY29weShwb2ludCk7aWYoZGVsdGFMZW5ndGhTcT50aGlzLnJhZGl1cyp0aGlzLnJhZGl1cyl7cmVzdWx0LnN1Yih0aGlzLmNlbnRlcikubm9ybWFsaXplKCk7cmVzdWx0Lm11bHRpcGx5U2NhbGFyKHRoaXMucmFkaXVzKS5hZGQodGhpcy5jZW50ZXIpO31yZXR1cm4gcmVzdWx0O30sZ2V0Qm91bmRpbmdCb3g6ZnVuY3Rpb24gZ2V0Qm91bmRpbmdCb3gob3B0aW9uYWxUYXJnZXQpe3ZhciBib3g9b3B0aW9uYWxUYXJnZXR8fG5ldyBCb3gzKCk7Ym94LnNldCh0aGlzLmNlbnRlcix0aGlzLmNlbnRlcik7Ym94LmV4cGFuZEJ5U2NhbGFyKHRoaXMucmFkaXVzKTtyZXR1cm4gYm94O30sYXBwbHlNYXRyaXg0OmZ1bmN0aW9uIGFwcGx5TWF0cml4NChtYXRyaXgpe3RoaXMuY2VudGVyLmFwcGx5TWF0cml4NChtYXRyaXgpO3RoaXMucmFkaXVzPXRoaXMucmFkaXVzKm1hdHJpeC5nZXRNYXhTY2FsZU9uQXhpcygpO3JldHVybiB0aGlzO30sdHJhbnNsYXRlOmZ1bmN0aW9uIHRyYW5zbGF0ZShvZmZzZXQpe3RoaXMuY2VudGVyLmFkZChvZmZzZXQpO3JldHVybiB0aGlzO30sZXF1YWxzOmZ1bmN0aW9uIGVxdWFscyhzcGhlcmUpe3JldHVybiBzcGhlcmUuY2VudGVyLmVxdWFscyh0aGlzLmNlbnRlcikmJnNwaGVyZS5yYWRpdXM9PT10aGlzLnJhZGl1czt9fSk7LyoqCiAqIEBhdXRob3IgYmhvdXN0b24gLyBodHRwOi8vY2xhcmEuaW8KICovZnVuY3Rpb24gUGxhbmUobm9ybWFsLGNvbnN0YW50KXsvLyBub3JtYWwgaXMgYXNzdW1lZCB0byBiZSBub3JtYWxpemVkCnRoaXMubm9ybWFsPW5vcm1hbCE9PXVuZGVmaW5lZD9ub3JtYWw6bmV3IFZlY3RvcjMoMSwwLDApO3RoaXMuY29uc3RhbnQ9Y29uc3RhbnQhPT11bmRlZmluZWQ/Y29uc3RhbnQ6MDt9T2JqZWN0LmFzc2lnbihQbGFuZS5wcm90b3R5cGUse3NldDpmdW5jdGlvbiBzZXQobm9ybWFsLGNvbnN0YW50KXt0aGlzLm5vcm1hbC5jb3B5KG5vcm1hbCk7dGhpcy5jb25zdGFudD1jb25zdGFudDtyZXR1cm4gdGhpczt9LHNldENvbXBvbmVudHM6ZnVuY3Rpb24gc2V0Q29tcG9uZW50cyh4LHkseix3KXt0aGlzLm5vcm1hbC5zZXQoeCx5LHopO3RoaXMuY29uc3RhbnQ9dztyZXR1cm4gdGhpczt9LHNldEZyb21Ob3JtYWxBbmRDb3BsYW5hclBvaW50OmZ1bmN0aW9uIHNldEZyb21Ob3JtYWxBbmRDb3BsYW5hclBvaW50KG5vcm1hbCxwb2ludCl7dGhpcy5ub3JtYWwuY29weShub3JtYWwpO3RoaXMuY29uc3RhbnQ9LXBvaW50LmRvdCh0aGlzLm5vcm1hbCk7cmV0dXJuIHRoaXM7fSxzZXRGcm9tQ29wbGFuYXJQb2ludHM6ZnVuY3Rpb24oKXt2YXIgdjE9bmV3IFZlY3RvcjMoKTt2YXIgdjI9bmV3IFZlY3RvcjMoKTtyZXR1cm4gZnVuY3Rpb24gc2V0RnJvbUNvcGxhbmFyUG9pbnRzKGEsYixjKXt2YXIgbm9ybWFsPXYxLnN1YlZlY3RvcnMoYyxiKS5jcm9zcyh2Mi5zdWJWZWN0b3JzKGEsYikpLm5vcm1hbGl6ZSgpOy8vIFE6IHNob3VsZCBhbiBlcnJvciBiZSB0aHJvd24gaWYgbm9ybWFsIGlzIHplcm8gKGUuZy4gZGVnZW5lcmF0ZSBwbGFuZSk/CnRoaXMuc2V0RnJvbU5vcm1hbEFuZENvcGxhbmFyUG9pbnQobm9ybWFsLGEpO3JldHVybiB0aGlzO307fSgpLGNsb25lOmZ1bmN0aW9uIGNsb25lKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKCkuY29weSh0aGlzKTt9LGNvcHk6ZnVuY3Rpb24gY29weShwbGFuZSl7dGhpcy5ub3JtYWwuY29weShwbGFuZS5ub3JtYWwpO3RoaXMuY29uc3RhbnQ9cGxhbmUuY29uc3RhbnQ7cmV0dXJuIHRoaXM7fSxub3JtYWxpemU6ZnVuY3Rpb24gbm9ybWFsaXplKCl7Ly8gTm90ZTogd2lsbCBsZWFkIHRvIGEgZGl2aWRlIGJ5IHplcm8gaWYgdGhlIHBsYW5lIGlzIGludmFsaWQuCnZhciBpbnZlcnNlTm9ybWFsTGVuZ3RoPTEuMC90aGlzLm5vcm1hbC5sZW5ndGgoKTt0aGlzLm5vcm1hbC5tdWx0aXBseVNjYWxhcihpbnZlcnNlTm9ybWFsTGVuZ3RoKTt0aGlzLmNvbnN0YW50Kj1pbnZlcnNlTm9ybWFsTGVuZ3RoO3JldHVybiB0aGlzO30sbmVnYXRlOmZ1bmN0aW9uIG5lZ2F0ZSgpe3RoaXMuY29uc3RhbnQqPS0xO3RoaXMubm9ybWFsLm5lZ2F0ZSgpO3JldHVybiB0aGlzO30sZGlzdGFuY2VUb1BvaW50OmZ1bmN0aW9uIGRpc3RhbmNlVG9Qb2ludChwb2ludCl7cmV0dXJuIHRoaXMubm9ybWFsLmRvdChwb2ludCkrdGhpcy5jb25zdGFudDt9LGRpc3RhbmNlVG9TcGhlcmU6ZnVuY3Rpb24gZGlzdGFuY2VUb1NwaGVyZShzcGhlcmUpe3JldHVybiB0aGlzLmRpc3RhbmNlVG9Qb2ludChzcGhlcmUuY2VudGVyKS1zcGhlcmUucmFkaXVzO30scHJvamVjdFBvaW50OmZ1bmN0aW9uIHByb2plY3RQb2ludChwb2ludCxvcHRpb25hbFRhcmdldCl7dmFyIHJlc3VsdD1vcHRpb25hbFRhcmdldHx8bmV3IFZlY3RvcjMoKTtyZXR1cm4gcmVzdWx0LmNvcHkodGhpcy5ub3JtYWwpLm11bHRpcGx5U2NhbGFyKC10aGlzLmRpc3RhbmNlVG9Qb2ludChwb2ludCkpLmFkZChwb2ludCk7fSxpbnRlcnNlY3RMaW5lOmZ1bmN0aW9uKCl7dmFyIHYxPW5ldyBWZWN0b3IzKCk7cmV0dXJuIGZ1bmN0aW9uIGludGVyc2VjdExpbmUobGluZSxvcHRpb25hbFRhcmdldCl7dmFyIHJlc3VsdD1vcHRpb25hbFRhcmdldHx8bmV3IFZlY3RvcjMoKTt2YXIgZGlyZWN0aW9uPWxpbmUuZGVsdGEodjEpO3ZhciBkZW5vbWluYXRvcj10aGlzLm5vcm1hbC5kb3QoZGlyZWN0aW9uKTtpZihkZW5vbWluYXRvcj09PTApey8vIGxpbmUgaXMgY29wbGFuYXIsIHJldHVybiBvcmlnaW4KaWYodGhpcy5kaXN0YW5jZVRvUG9pbnQobGluZS5zdGFydCk9PT0wKXtyZXR1cm4gcmVzdWx0LmNvcHkobGluZS5zdGFydCk7fS8vIFVuc3VyZSBpZiB0aGlzIGlzIHRoZSBjb3JyZWN0IG1ldGhvZCB0byBoYW5kbGUgdGhpcyBjYXNlLgpyZXR1cm4gdW5kZWZpbmVkO312YXIgdD0tKGxpbmUuc3RhcnQuZG90KHRoaXMubm9ybWFsKSt0aGlzLmNvbnN0YW50KS9kZW5vbWluYXRvcjtpZih0PDB8fHQ+MSl7cmV0dXJuIHVuZGVmaW5lZDt9cmV0dXJuIHJlc3VsdC5jb3B5KGRpcmVjdGlvbikubXVsdGlwbHlTY2FsYXIodCkuYWRkKGxpbmUuc3RhcnQpO307fSgpLGludGVyc2VjdHNMaW5lOmZ1bmN0aW9uIGludGVyc2VjdHNMaW5lKGxpbmUpey8vIE5vdGU6IHRoaXMgdGVzdHMgaWYgYSBsaW5lIGludGVyc2VjdHMgdGhlIHBsYW5lLCBub3Qgd2hldGhlciBpdCAob3IgaXRzIGVuZC1wb2ludHMpIGFyZSBjb3BsYW5hciB3aXRoIGl0Lgp2YXIgc3RhcnRTaWduPXRoaXMuZGlzdGFuY2VUb1BvaW50KGxpbmUuc3RhcnQpO3ZhciBlbmRTaWduPXRoaXMuZGlzdGFuY2VUb1BvaW50KGxpbmUuZW5kKTtyZXR1cm4gc3RhcnRTaWduPDAmJmVuZFNpZ24+MHx8ZW5kU2lnbjwwJiZzdGFydFNpZ24+MDt9LGludGVyc2VjdHNCb3g6ZnVuY3Rpb24gaW50ZXJzZWN0c0JveChib3gpe3JldHVybiBib3guaW50ZXJzZWN0c1BsYW5lKHRoaXMpO30saW50ZXJzZWN0c1NwaGVyZTpmdW5jdGlvbiBpbnRlcnNlY3RzU3BoZXJlKHNwaGVyZSl7cmV0dXJuIHNwaGVyZS5pbnRlcnNlY3RzUGxhbmUodGhpcyk7fSxjb3BsYW5hclBvaW50OmZ1bmN0aW9uIGNvcGxhbmFyUG9pbnQob3B0aW9uYWxUYXJnZXQpe3ZhciByZXN1bHQ9b3B0aW9uYWxUYXJnZXR8fG5ldyBWZWN0b3IzKCk7cmV0dXJuIHJlc3VsdC5jb3B5KHRoaXMubm9ybWFsKS5tdWx0aXBseVNjYWxhcigtdGhpcy5jb25zdGFudCk7fSxhcHBseU1hdHJpeDQ6ZnVuY3Rpb24oKXt2YXIgdjE9bmV3IFZlY3RvcjMoKTt2YXIgbTE9bmV3IE1hdHJpeDMoKTtyZXR1cm4gZnVuY3Rpb24gYXBwbHlNYXRyaXg0KG1hdHJpeCxvcHRpb25hbE5vcm1hbE1hdHJpeCl7dmFyIG5vcm1hbE1hdHJpeD1vcHRpb25hbE5vcm1hbE1hdHJpeHx8bTEuZ2V0Tm9ybWFsTWF0cml4KG1hdHJpeCk7dmFyIHJlZmVyZW5jZVBvaW50PXRoaXMuY29wbGFuYXJQb2ludCh2MSkuYXBwbHlNYXRyaXg0KG1hdHJpeCk7dmFyIG5vcm1hbD10aGlzLm5vcm1hbC5hcHBseU1hdHJpeDMobm9ybWFsTWF0cml4KS5ub3JtYWxpemUoKTt0aGlzLmNvbnN0YW50PS1yZWZlcmVuY2VQb2ludC5kb3Qobm9ybWFsKTtyZXR1cm4gdGhpczt9O30oKSx0cmFuc2xhdGU6ZnVuY3Rpb24gdHJhbnNsYXRlKG9mZnNldCl7dGhpcy5jb25zdGFudC09b2Zmc2V0LmRvdCh0aGlzLm5vcm1hbCk7cmV0dXJuIHRoaXM7fSxlcXVhbHM6ZnVuY3Rpb24gZXF1YWxzKHBsYW5lKXtyZXR1cm4gcGxhbmUubm9ybWFsLmVxdWFscyh0aGlzLm5vcm1hbCkmJnBsYW5lLmNvbnN0YW50PT09dGhpcy5jb25zdGFudDt9fSk7LyoqCiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vCiAqIEBhdXRob3IgYWx0ZXJlZHEgLyBodHRwOi8vYWx0ZXJlZHF1YWxpYS5jb20vCiAqIEBhdXRob3IgYmhvdXN0b24gLyBodHRwOi8vY2xhcmEuaW8KICovZnVuY3Rpb24gRnJ1c3R1bShwMCxwMSxwMixwMyxwNCxwNSl7dGhpcy5wbGFuZXM9W3AwIT09dW5kZWZpbmVkP3AwOm5ldyBQbGFuZSgpLHAxIT09dW5kZWZpbmVkP3AxOm5ldyBQbGFuZSgpLHAyIT09dW5kZWZpbmVkP3AyOm5ldyBQbGFuZSgpLHAzIT09dW5kZWZpbmVkP3AzOm5ldyBQbGFuZSgpLHA0IT09dW5kZWZpbmVkP3A0Om5ldyBQbGFuZSgpLHA1IT09dW5kZWZpbmVkP3A1Om5ldyBQbGFuZSgpXTt9T2JqZWN0LmFzc2lnbihGcnVzdHVtLnByb3RvdHlwZSx7c2V0OmZ1bmN0aW9uIHNldChwMCxwMSxwMixwMyxwNCxwNSl7dmFyIHBsYW5lcz10aGlzLnBsYW5lcztwbGFuZXNbMF0uY29weShwMCk7cGxhbmVzWzFdLmNvcHkocDEpO3BsYW5lc1syXS5jb3B5KHAyKTtwbGFuZXNbM10uY29weShwMyk7cGxhbmVzWzRdLmNvcHkocDQpO3BsYW5lc1s1XS5jb3B5KHA1KTtyZXR1cm4gdGhpczt9LGNsb25lOmZ1bmN0aW9uIGNsb25lKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKCkuY29weSh0aGlzKTt9LGNvcHk6ZnVuY3Rpb24gY29weShmcnVzdHVtKXt2YXIgcGxhbmVzPXRoaXMucGxhbmVzO2Zvcih2YXIgaT0wO2k8NjtpKyspe3BsYW5lc1tpXS5jb3B5KGZydXN0dW0ucGxhbmVzW2ldKTt9cmV0dXJuIHRoaXM7fSxzZXRGcm9tTWF0cml4OmZ1bmN0aW9uIHNldEZyb21NYXRyaXgobSl7dmFyIHBsYW5lcz10aGlzLnBsYW5lczt2YXIgbWU9bS5lbGVtZW50czt2YXIgbWUwPW1lWzBdLG1lMT1tZVsxXSxtZTI9bWVbMl0sbWUzPW1lWzNdO3ZhciBtZTQ9bWVbNF0sbWU1PW1lWzVdLG1lNj1tZVs2XSxtZTc9bWVbN107dmFyIG1lOD1tZVs4XSxtZTk9bWVbOV0sbWUxMD1tZVsxMF0sbWUxMT1tZVsxMV07dmFyIG1lMTI9bWVbMTJdLG1lMTM9bWVbMTNdLG1lMTQ9bWVbMTRdLG1lMTU9bWVbMTVdO3BsYW5lc1swXS5zZXRDb21wb25lbnRzKG1lMy1tZTAsbWU3LW1lNCxtZTExLW1lOCxtZTE1LW1lMTIpLm5vcm1hbGl6ZSgpO3BsYW5lc1sxXS5zZXRDb21wb25lbnRzKG1lMyttZTAsbWU3K21lNCxtZTExK21lOCxtZTE1K21lMTIpLm5vcm1hbGl6ZSgpO3BsYW5lc1syXS5zZXRDb21wb25lbnRzKG1lMyttZTEsbWU3K21lNSxtZTExK21lOSxtZTE1K21lMTMpLm5vcm1hbGl6ZSgpO3BsYW5lc1szXS5zZXRDb21wb25lbnRzKG1lMy1tZTEsbWU3LW1lNSxtZTExLW1lOSxtZTE1LW1lMTMpLm5vcm1hbGl6ZSgpO3BsYW5lc1s0XS5zZXRDb21wb25lbnRzKG1lMy1tZTIsbWU3LW1lNixtZTExLW1lMTAsbWUxNS1tZTE0KS5ub3JtYWxpemUoKTtwbGFuZXNbNV0uc2V0Q29tcG9uZW50cyhtZTMrbWUyLG1lNyttZTYsbWUxMSttZTEwLG1lMTUrbWUxNCkubm9ybWFsaXplKCk7cmV0dXJuIHRoaXM7fSxpbnRlcnNlY3RzT2JqZWN0OmZ1bmN0aW9uKCl7dmFyIHNwaGVyZT1uZXcgU3BoZXJlKCk7cmV0dXJuIGZ1bmN0aW9uIGludGVyc2VjdHNPYmplY3Qob2JqZWN0KXt2YXIgZ2VvbWV0cnk9b2JqZWN0Lmdlb21ldHJ5O2lmKGdlb21ldHJ5LmJvdW5kaW5nU3BoZXJlPT09bnVsbClnZW9tZXRyeS5jb21wdXRlQm91bmRpbmdTcGhlcmUoKTtzcGhlcmUuY29weShnZW9tZXRyeS5ib3VuZGluZ1NwaGVyZSkuYXBwbHlNYXRyaXg0KG9iamVjdC5tYXRyaXhXb3JsZCk7cmV0dXJuIHRoaXMuaW50ZXJzZWN0c1NwaGVyZShzcGhlcmUpO307fSgpLGludGVyc2VjdHNTcHJpdGU6ZnVuY3Rpb24oKXt2YXIgc3BoZXJlPW5ldyBTcGhlcmUoKTtyZXR1cm4gZnVuY3Rpb24gaW50ZXJzZWN0c1Nwcml0ZShzcHJpdGUpe3NwaGVyZS5jZW50ZXIuc2V0KDAsMCwwKTtzcGhlcmUucmFkaXVzPTAuNzA3MTA2NzgxMTg2NTQ3NjtzcGhlcmUuYXBwbHlNYXRyaXg0KHNwcml0ZS5tYXRyaXhXb3JsZCk7cmV0dXJuIHRoaXMuaW50ZXJzZWN0c1NwaGVyZShzcGhlcmUpO307fSgpLGludGVyc2VjdHNTcGhlcmU6ZnVuY3Rpb24gaW50ZXJzZWN0c1NwaGVyZShzcGhlcmUpe3ZhciBwbGFuZXM9dGhpcy5wbGFuZXM7dmFyIGNlbnRlcj1zcGhlcmUuY2VudGVyO3ZhciBuZWdSYWRpdXM9LXNwaGVyZS5yYWRpdXM7Zm9yKHZhciBpPTA7aTw2O2krKyl7dmFyIGRpc3RhbmNlPXBsYW5lc1tpXS5kaXN0YW5jZVRvUG9pbnQoY2VudGVyKTtpZihkaXN0YW5jZTxuZWdSYWRpdXMpe3JldHVybiBmYWxzZTt9fXJldHVybiB0cnVlO30saW50ZXJzZWN0c0JveDpmdW5jdGlvbigpe3ZhciBwMT1uZXcgVmVjdG9yMygpLHAyPW5ldyBWZWN0b3IzKCk7cmV0dXJuIGZ1bmN0aW9uIGludGVyc2VjdHNCb3goYm94KXt2YXIgcGxhbmVzPXRoaXMucGxhbmVzO2Zvcih2YXIgaT0wO2k8NjtpKyspe3ZhciBwbGFuZT1wbGFuZXNbaV07cDEueD1wbGFuZS5ub3JtYWwueD4wP2JveC5taW4ueDpib3gubWF4Lng7cDIueD1wbGFuZS5ub3JtYWwueD4wP2JveC5tYXgueDpib3gubWluLng7cDEueT1wbGFuZS5ub3JtYWwueT4wP2JveC5taW4ueTpib3gubWF4Lnk7cDIueT1wbGFuZS5ub3JtYWwueT4wP2JveC5tYXgueTpib3gubWluLnk7cDEuej1wbGFuZS5ub3JtYWwuej4wP2JveC5taW4uejpib3gubWF4Lno7cDIuej1wbGFuZS5ub3JtYWwuej4wP2JveC5tYXguejpib3gubWluLno7dmFyIGQxPXBsYW5lLmRpc3RhbmNlVG9Qb2ludChwMSk7dmFyIGQyPXBsYW5lLmRpc3RhbmNlVG9Qb2ludChwMik7Ly8gaWYgYm90aCBvdXRzaWRlIHBsYW5lLCBubyBpbnRlcnNlY3Rpb24KaWYoZDE8MCYmZDI8MCl7cmV0dXJuIGZhbHNlO319cmV0dXJuIHRydWU7fTt9KCksY29udGFpbnNQb2ludDpmdW5jdGlvbiBjb250YWluc1BvaW50KHBvaW50KXt2YXIgcGxhbmVzPXRoaXMucGxhbmVzO2Zvcih2YXIgaT0wO2k8NjtpKyspe2lmKHBsYW5lc1tpXS5kaXN0YW5jZVRvUG9pbnQocG9pbnQpPDApe3JldHVybiBmYWxzZTt9fXJldHVybiB0cnVlO319KTsvKioKICogQGF1dGhvciBhbHRlcmVkcSAvIGh0dHA6Ly9hbHRlcmVkcXVhbGlhLmNvbS8KICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS8KICovZnVuY3Rpb24gV2ViR0xTaGFkb3dNYXAoX3JlbmRlcmVyLF9vYmplY3RzLG1heFRleHR1cmVTaXplKXt2YXIgX2ZydXN0dW09bmV3IEZydXN0dW0oKSxfcHJvalNjcmVlbk1hdHJpeD1uZXcgTWF0cml4NCgpLF9zaGFkb3dNYXBTaXplPW5ldyBWZWN0b3IyKCksX21heFNoYWRvd01hcFNpemU9bmV3IFZlY3RvcjIobWF4VGV4dHVyZVNpemUsbWF4VGV4dHVyZVNpemUpLF9sb29rVGFyZ2V0PW5ldyBWZWN0b3IzKCksX2xpZ2h0UG9zaXRpb25Xb3JsZD1uZXcgVmVjdG9yMygpLF9Nb3JwaGluZ0ZsYWc9MSxfU2tpbm5pbmdGbGFnPTIsX051bWJlck9mTWF0ZXJpYWxWYXJpYW50cz0oX01vcnBoaW5nRmxhZ3xfU2tpbm5pbmdGbGFnKSsxLF9kZXB0aE1hdGVyaWFscz1uZXcgQXJyYXkoX051bWJlck9mTWF0ZXJpYWxWYXJpYW50cyksX2Rpc3RhbmNlTWF0ZXJpYWxzPW5ldyBBcnJheShfTnVtYmVyT2ZNYXRlcmlhbFZhcmlhbnRzKSxfbWF0ZXJpYWxDYWNoZT17fTt2YXIgY3ViZURpcmVjdGlvbnM9W25ldyBWZWN0b3IzKDEsMCwwKSxuZXcgVmVjdG9yMygtMSwwLDApLG5ldyBWZWN0b3IzKDAsMCwxKSxuZXcgVmVjdG9yMygwLDAsLTEpLG5ldyBWZWN0b3IzKDAsMSwwKSxuZXcgVmVjdG9yMygwLC0xLDApXTt2YXIgY3ViZVVwcz1bbmV3IFZlY3RvcjMoMCwxLDApLG5ldyBWZWN0b3IzKDAsMSwwKSxuZXcgVmVjdG9yMygwLDEsMCksbmV3IFZlY3RvcjMoMCwxLDApLG5ldyBWZWN0b3IzKDAsMCwxKSxuZXcgVmVjdG9yMygwLDAsLTEpXTt2YXIgY3ViZTJEVmlld1BvcnRzPVtuZXcgVmVjdG9yNCgpLG5ldyBWZWN0b3I0KCksbmV3IFZlY3RvcjQoKSxuZXcgVmVjdG9yNCgpLG5ldyBWZWN0b3I0KCksbmV3IFZlY3RvcjQoKV07Ly8gaW5pdApmb3IodmFyIGk9MDtpIT09X051bWJlck9mTWF0ZXJpYWxWYXJpYW50czsrK2kpe3ZhciB1c2VNb3JwaGluZz0oaSZfTW9ycGhpbmdGbGFnKSE9PTA7dmFyIHVzZVNraW5uaW5nPShpJl9Ta2lubmluZ0ZsYWcpIT09MDt2YXIgZGVwdGhNYXRlcmlhbD1uZXcgTWVzaERlcHRoTWF0ZXJpYWwoe2RlcHRoUGFja2luZzpSR0JBRGVwdGhQYWNraW5nLG1vcnBoVGFyZ2V0czp1c2VNb3JwaGluZyxza2lubmluZzp1c2VTa2lubmluZ30pO19kZXB0aE1hdGVyaWFsc1tpXT1kZXB0aE1hdGVyaWFsOy8vCnZhciBkaXN0YW5jZU1hdGVyaWFsPW5ldyBNZXNoRGlzdGFuY2VNYXRlcmlhbCh7bW9ycGhUYXJnZXRzOnVzZU1vcnBoaW5nLHNraW5uaW5nOnVzZVNraW5uaW5nfSk7X2Rpc3RhbmNlTWF0ZXJpYWxzW2ldPWRpc3RhbmNlTWF0ZXJpYWw7fS8vCnZhciBzY29wZT10aGlzO3RoaXMuZW5hYmxlZD1mYWxzZTt0aGlzLmF1dG9VcGRhdGU9dHJ1ZTt0aGlzLm5lZWRzVXBkYXRlPWZhbHNlO3RoaXMudHlwZT1QQ0ZTaGFkb3dNYXA7dGhpcy5yZW5kZXJSZXZlcnNlU2lkZWQ9dHJ1ZTt0aGlzLnJlbmRlclNpbmdsZVNpZGVkPXRydWU7dGhpcy5yZW5kZXI9ZnVuY3Rpb24obGlnaHRzLHNjZW5lLGNhbWVyYSl7aWYoc2NvcGUuZW5hYmxlZD09PWZhbHNlKXJldHVybjtpZihzY29wZS5hdXRvVXBkYXRlPT09ZmFsc2UmJnNjb3BlLm5lZWRzVXBkYXRlPT09ZmFsc2UpcmV0dXJuO2lmKGxpZ2h0cy5sZW5ndGg9PT0wKXJldHVybjsvLyBUT0RPIENsZWFuIHVwIChuZWVkZWQgaW4gY2FzZSBvZiBjb250ZXh0bG9zdCkKdmFyIF9nbD1fcmVuZGVyZXIuY29udGV4dDt2YXIgX3N0YXRlPV9yZW5kZXJlci5zdGF0ZTsvLyBTZXQgR0wgc3RhdGUgZm9yIGRlcHRoIG1hcC4KX3N0YXRlLmRpc2FibGUoX2dsLkJMRU5EKTtfc3RhdGUuYnVmZmVycy5jb2xvci5zZXRDbGVhcigxLDEsMSwxKTtfc3RhdGUuYnVmZmVycy5kZXB0aC5zZXRUZXN0KHRydWUpO19zdGF0ZS5zZXRTY2lzc29yVGVzdChmYWxzZSk7Ly8gcmVuZGVyIGRlcHRoIG1hcAp2YXIgZmFjZUNvdW50O2Zvcih2YXIgaT0wLGlsPWxpZ2h0cy5sZW5ndGg7aTxpbDtpKyspe3ZhciBsaWdodD1saWdodHNbaV07dmFyIHNoYWRvdz1saWdodC5zaGFkb3c7dmFyIGlzUG9pbnRMaWdodD1saWdodCYmbGlnaHQuaXNQb2ludExpZ2h0O2lmKHNoYWRvdz09PXVuZGVmaW5lZCl7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFNoYWRvd01hcDonLGxpZ2h0LCdoYXMgbm8gc2hhZG93LicpO2NvbnRpbnVlO312YXIgc2hhZG93Q2FtZXJhPXNoYWRvdy5jYW1lcmE7X3NoYWRvd01hcFNpemUuY29weShzaGFkb3cubWFwU2l6ZSk7X3NoYWRvd01hcFNpemUubWluKF9tYXhTaGFkb3dNYXBTaXplKTtpZihpc1BvaW50TGlnaHQpe3ZhciB2cFdpZHRoPV9zaGFkb3dNYXBTaXplLng7dmFyIHZwSGVpZ2h0PV9zaGFkb3dNYXBTaXplLnk7Ly8gVGhlc2Ugdmlld3BvcnRzIG1hcCBhIGN1YmUtbWFwIG9udG8gYSAyRCB0ZXh0dXJlIHdpdGggdGhlCi8vIGZvbGxvd2luZyBvcmllbnRhdGlvbjoKLy8KLy8gIHh6WFoKLy8gICB5IFkKLy8KLy8gWCAtIFBvc2l0aXZlIHggZGlyZWN0aW9uCi8vIHggLSBOZWdhdGl2ZSB4IGRpcmVjdGlvbgovLyBZIC0gUG9zaXRpdmUgeSBkaXJlY3Rpb24KLy8geSAtIE5lZ2F0aXZlIHkgZGlyZWN0aW9uCi8vIFogLSBQb3NpdGl2ZSB6IGRpcmVjdGlvbgovLyB6IC0gTmVnYXRpdmUgeiBkaXJlY3Rpb24KLy8gcG9zaXRpdmUgWApjdWJlMkRWaWV3UG9ydHNbMF0uc2V0KHZwV2lkdGgqMix2cEhlaWdodCx2cFdpZHRoLHZwSGVpZ2h0KTsvLyBuZWdhdGl2ZSBYCmN1YmUyRFZpZXdQb3J0c1sxXS5zZXQoMCx2cEhlaWdodCx2cFdpZHRoLHZwSGVpZ2h0KTsvLyBwb3NpdGl2ZSBaCmN1YmUyRFZpZXdQb3J0c1syXS5zZXQodnBXaWR0aCozLHZwSGVpZ2h0LHZwV2lkdGgsdnBIZWlnaHQpOy8vIG5lZ2F0aXZlIFoKY3ViZTJEVmlld1BvcnRzWzNdLnNldCh2cFdpZHRoLHZwSGVpZ2h0LHZwV2lkdGgsdnBIZWlnaHQpOy8vIHBvc2l0aXZlIFkKY3ViZTJEVmlld1BvcnRzWzRdLnNldCh2cFdpZHRoKjMsMCx2cFdpZHRoLHZwSGVpZ2h0KTsvLyBuZWdhdGl2ZSBZCmN1YmUyRFZpZXdQb3J0c1s1XS5zZXQodnBXaWR0aCwwLHZwV2lkdGgsdnBIZWlnaHQpO19zaGFkb3dNYXBTaXplLngqPTQuMDtfc2hhZG93TWFwU2l6ZS55Kj0yLjA7fWlmKHNoYWRvdy5tYXA9PT1udWxsKXt2YXIgcGFycz17bWluRmlsdGVyOk5lYXJlc3RGaWx0ZXIsbWFnRmlsdGVyOk5lYXJlc3RGaWx0ZXIsZm9ybWF0OlJHQkFGb3JtYXR9O3NoYWRvdy5tYXA9bmV3IFdlYkdMUmVuZGVyVGFyZ2V0KF9zaGFkb3dNYXBTaXplLngsX3NoYWRvd01hcFNpemUueSxwYXJzKTtzaGFkb3cubWFwLnRleHR1cmUubmFtZT1saWdodC5uYW1lKyIuc2hhZG93TWFwIjtzaGFkb3dDYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO31pZihzaGFkb3cuaXNTcG90TGlnaHRTaGFkb3cpe3NoYWRvdy51cGRhdGUobGlnaHQpO312YXIgc2hhZG93TWFwPXNoYWRvdy5tYXA7dmFyIHNoYWRvd01hdHJpeD1zaGFkb3cubWF0cml4O19saWdodFBvc2l0aW9uV29ybGQuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGxpZ2h0Lm1hdHJpeFdvcmxkKTtzaGFkb3dDYW1lcmEucG9zaXRpb24uY29weShfbGlnaHRQb3NpdGlvbldvcmxkKTtpZihpc1BvaW50TGlnaHQpe2ZhY2VDb3VudD02Oy8vIGZvciBwb2ludCBsaWdodHMgd2Ugc2V0IHRoZSBzaGFkb3cgbWF0cml4IHRvIGJlIGEgdHJhbnNsYXRpb24tb25seSBtYXRyaXgKLy8gZXF1YWwgdG8gaW52ZXJzZSBvZiB0aGUgbGlnaHQncyBwb3NpdGlvbgpzaGFkb3dNYXRyaXgubWFrZVRyYW5zbGF0aW9uKC1fbGlnaHRQb3NpdGlvbldvcmxkLngsLV9saWdodFBvc2l0aW9uV29ybGQueSwtX2xpZ2h0UG9zaXRpb25Xb3JsZC56KTt9ZWxzZXtmYWNlQ291bnQ9MTtfbG9va1RhcmdldC5zZXRGcm9tTWF0cml4UG9zaXRpb24obGlnaHQudGFyZ2V0Lm1hdHJpeFdvcmxkKTtzaGFkb3dDYW1lcmEubG9va0F0KF9sb29rVGFyZ2V0KTtzaGFkb3dDYW1lcmEudXBkYXRlTWF0cml4V29ybGQoKTsvLyBjb21wdXRlIHNoYWRvdyBtYXRyaXgKc2hhZG93TWF0cml4LnNldCgwLjUsMC4wLDAuMCwwLjUsMC4wLDAuNSwwLjAsMC41LDAuMCwwLjAsMC41LDAuNSwwLjAsMC4wLDAuMCwxLjApO3NoYWRvd01hdHJpeC5tdWx0aXBseShzaGFkb3dDYW1lcmEucHJvamVjdGlvbk1hdHJpeCk7c2hhZG93TWF0cml4Lm11bHRpcGx5KHNoYWRvd0NhbWVyYS5tYXRyaXhXb3JsZEludmVyc2UpO31fcmVuZGVyZXIuc2V0UmVuZGVyVGFyZ2V0KHNoYWRvd01hcCk7X3JlbmRlcmVyLmNsZWFyKCk7Ly8gcmVuZGVyIHNoYWRvdyBtYXAgZm9yIGVhY2ggY3ViZSBmYWNlIChpZiBvbW5pLWRpcmVjdGlvbmFsKSBvcgovLyBydW4gYSBzaW5nbGUgcGFzcyBpZiBub3QKZm9yKHZhciBmYWNlPTA7ZmFjZTxmYWNlQ291bnQ7ZmFjZSsrKXtpZihpc1BvaW50TGlnaHQpe19sb29rVGFyZ2V0LmNvcHkoc2hhZG93Q2FtZXJhLnBvc2l0aW9uKTtfbG9va1RhcmdldC5hZGQoY3ViZURpcmVjdGlvbnNbZmFjZV0pO3NoYWRvd0NhbWVyYS51cC5jb3B5KGN1YmVVcHNbZmFjZV0pO3NoYWRvd0NhbWVyYS5sb29rQXQoX2xvb2tUYXJnZXQpO3NoYWRvd0NhbWVyYS51cGRhdGVNYXRyaXhXb3JsZCgpO3ZhciB2cERpbWVuc2lvbnM9Y3ViZTJEVmlld1BvcnRzW2ZhY2VdO19zdGF0ZS52aWV3cG9ydCh2cERpbWVuc2lvbnMpO30vLyB1cGRhdGUgY2FtZXJhIG1hdHJpY2VzIGFuZCBmcnVzdHVtCl9wcm9qU2NyZWVuTWF0cml4Lm11bHRpcGx5TWF0cmljZXMoc2hhZG93Q2FtZXJhLnByb2plY3Rpb25NYXRyaXgsc2hhZG93Q2FtZXJhLm1hdHJpeFdvcmxkSW52ZXJzZSk7X2ZydXN0dW0uc2V0RnJvbU1hdHJpeChfcHJvalNjcmVlbk1hdHJpeCk7Ly8gc2V0IG9iamVjdCBtYXRyaWNlcyAmIGZydXN0dW0gY3VsbGluZwpyZW5kZXJPYmplY3Qoc2NlbmUsY2FtZXJhLHNoYWRvd0NhbWVyYSxpc1BvaW50TGlnaHQpO319c2NvcGUubmVlZHNVcGRhdGU9ZmFsc2U7fTtmdW5jdGlvbiBnZXREZXB0aE1hdGVyaWFsKG9iamVjdCxtYXRlcmlhbCxpc1BvaW50TGlnaHQsbGlnaHRQb3NpdGlvbldvcmxkLHNoYWRvd0NhbWVyYU5lYXIsc2hhZG93Q2FtZXJhRmFyKXt2YXIgZ2VvbWV0cnk9b2JqZWN0Lmdlb21ldHJ5O3ZhciByZXN1bHQ9bnVsbDt2YXIgbWF0ZXJpYWxWYXJpYW50cz1fZGVwdGhNYXRlcmlhbHM7dmFyIGN1c3RvbU1hdGVyaWFsPW9iamVjdC5jdXN0b21EZXB0aE1hdGVyaWFsO2lmKGlzUG9pbnRMaWdodCl7bWF0ZXJpYWxWYXJpYW50cz1fZGlzdGFuY2VNYXRlcmlhbHM7Y3VzdG9tTWF0ZXJpYWw9b2JqZWN0LmN1c3RvbURpc3RhbmNlTWF0ZXJpYWw7fWlmKCFjdXN0b21NYXRlcmlhbCl7dmFyIHVzZU1vcnBoaW5nPWZhbHNlO2lmKG1hdGVyaWFsLm1vcnBoVGFyZ2V0cyl7aWYoZ2VvbWV0cnkmJmdlb21ldHJ5LmlzQnVmZmVyR2VvbWV0cnkpe3VzZU1vcnBoaW5nPWdlb21ldHJ5Lm1vcnBoQXR0cmlidXRlcyYmZ2VvbWV0cnkubW9ycGhBdHRyaWJ1dGVzLnBvc2l0aW9uJiZnZW9tZXRyeS5tb3JwaEF0dHJpYnV0ZXMucG9zaXRpb24ubGVuZ3RoPjA7fWVsc2UgaWYoZ2VvbWV0cnkmJmdlb21ldHJ5LmlzR2VvbWV0cnkpe3VzZU1vcnBoaW5nPWdlb21ldHJ5Lm1vcnBoVGFyZ2V0cyYmZ2VvbWV0cnkubW9ycGhUYXJnZXRzLmxlbmd0aD4wO319aWYob2JqZWN0LmlzU2tpbm5lZE1lc2gmJm1hdGVyaWFsLnNraW5uaW5nPT09ZmFsc2Upe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xTaGFkb3dNYXA6IFRIUkVFLlNraW5uZWRNZXNoIHdpdGggbWF0ZXJpYWwuc2tpbm5pbmcgc2V0IHRvIGZhbHNlOicsb2JqZWN0KTt9dmFyIHVzZVNraW5uaW5nPW9iamVjdC5pc1NraW5uZWRNZXNoJiZtYXRlcmlhbC5za2lubmluZzt2YXIgdmFyaWFudEluZGV4PTA7aWYodXNlTW9ycGhpbmcpdmFyaWFudEluZGV4fD1fTW9ycGhpbmdGbGFnO2lmKHVzZVNraW5uaW5nKXZhcmlhbnRJbmRleHw9X1NraW5uaW5nRmxhZztyZXN1bHQ9bWF0ZXJpYWxWYXJpYW50c1t2YXJpYW50SW5kZXhdO31lbHNle3Jlc3VsdD1jdXN0b21NYXRlcmlhbDt9aWYoX3JlbmRlcmVyLmxvY2FsQ2xpcHBpbmdFbmFibGVkJiZtYXRlcmlhbC5jbGlwU2hhZG93cz09PXRydWUmJm1hdGVyaWFsLmNsaXBwaW5nUGxhbmVzLmxlbmd0aCE9PTApey8vIGluIHRoaXMgY2FzZSB3ZSBuZWVkIGEgdW5pcXVlIG1hdGVyaWFsIGluc3RhbmNlIHJlZmxlY3RpbmcgdGhlCi8vIGFwcHJvcHJpYXRlIHN0YXRlCnZhciBrZXlBPXJlc3VsdC51dWlkLGtleUI9bWF0ZXJpYWwudXVpZDt2YXIgbWF0ZXJpYWxzRm9yVmFyaWFudD1fbWF0ZXJpYWxDYWNoZVtrZXlBXTtpZihtYXRlcmlhbHNGb3JWYXJpYW50PT09dW5kZWZpbmVkKXttYXRlcmlhbHNGb3JWYXJpYW50PXt9O19tYXRlcmlhbENhY2hlW2tleUFdPW1hdGVyaWFsc0ZvclZhcmlhbnQ7fXZhciBjYWNoZWRNYXRlcmlhbD1tYXRlcmlhbHNGb3JWYXJpYW50W2tleUJdO2lmKGNhY2hlZE1hdGVyaWFsPT09dW5kZWZpbmVkKXtjYWNoZWRNYXRlcmlhbD1yZXN1bHQuY2xvbmUoKTttYXRlcmlhbHNGb3JWYXJpYW50W2tleUJdPWNhY2hlZE1hdGVyaWFsO31yZXN1bHQ9Y2FjaGVkTWF0ZXJpYWw7fXJlc3VsdC52aXNpYmxlPW1hdGVyaWFsLnZpc2libGU7cmVzdWx0LndpcmVmcmFtZT1tYXRlcmlhbC53aXJlZnJhbWU7dmFyIHNpZGU9bWF0ZXJpYWwuc2lkZTtpZihzY29wZS5yZW5kZXJTaW5nbGVTaWRlZCYmc2lkZT09RG91YmxlU2lkZSl7c2lkZT1Gcm9udFNpZGU7fWlmKHNjb3BlLnJlbmRlclJldmVyc2VTaWRlZCl7aWYoc2lkZT09PUZyb250U2lkZSlzaWRlPUJhY2tTaWRlO2Vsc2UgaWYoc2lkZT09PUJhY2tTaWRlKXNpZGU9RnJvbnRTaWRlO31yZXN1bHQuc2lkZT1zaWRlO3Jlc3VsdC5jbGlwU2hhZG93cz1tYXRlcmlhbC5jbGlwU2hhZG93cztyZXN1bHQuY2xpcHBpbmdQbGFuZXM9bWF0ZXJpYWwuY2xpcHBpbmdQbGFuZXM7cmVzdWx0LmNsaXBJbnRlcnNlY3Rpb249bWF0ZXJpYWwuY2xpcEludGVyc2VjdGlvbjtyZXN1bHQud2lyZWZyYW1lTGluZXdpZHRoPW1hdGVyaWFsLndpcmVmcmFtZUxpbmV3aWR0aDtyZXN1bHQubGluZXdpZHRoPW1hdGVyaWFsLmxpbmV3aWR0aDtpZihpc1BvaW50TGlnaHQmJnJlc3VsdC5pc01lc2hEaXN0YW5jZU1hdGVyaWFsKXtyZXN1bHQucmVmZXJlbmNlUG9zaXRpb24uY29weShsaWdodFBvc2l0aW9uV29ybGQpO3Jlc3VsdC5uZWFyRGlzdGFuY2U9c2hhZG93Q2FtZXJhTmVhcjtyZXN1bHQuZmFyRGlzdGFuY2U9c2hhZG93Q2FtZXJhRmFyO31yZXR1cm4gcmVzdWx0O31mdW5jdGlvbiByZW5kZXJPYmplY3Qob2JqZWN0LGNhbWVyYSxzaGFkb3dDYW1lcmEsaXNQb2ludExpZ2h0KXtpZihvYmplY3QudmlzaWJsZT09PWZhbHNlKXJldHVybjt2YXIgdmlzaWJsZT1vYmplY3QubGF5ZXJzLnRlc3QoY2FtZXJhLmxheWVycyk7aWYodmlzaWJsZSYmKG9iamVjdC5pc01lc2h8fG9iamVjdC5pc0xpbmV8fG9iamVjdC5pc1BvaW50cykpe2lmKG9iamVjdC5jYXN0U2hhZG93JiYoIW9iamVjdC5mcnVzdHVtQ3VsbGVkfHxfZnJ1c3R1bS5pbnRlcnNlY3RzT2JqZWN0KG9iamVjdCkpKXtvYmplY3QubW9kZWxWaWV3TWF0cml4Lm11bHRpcGx5TWF0cmljZXMoc2hhZG93Q2FtZXJhLm1hdHJpeFdvcmxkSW52ZXJzZSxvYmplY3QubWF0cml4V29ybGQpO3ZhciBnZW9tZXRyeT1fb2JqZWN0cy51cGRhdGUob2JqZWN0KTt2YXIgbWF0ZXJpYWw9b2JqZWN0Lm1hdGVyaWFsO2lmKEFycmF5LmlzQXJyYXkobWF0ZXJpYWwpKXt2YXIgZ3JvdXBzPWdlb21ldHJ5Lmdyb3Vwcztmb3IodmFyIGs9MCxrbD1ncm91cHMubGVuZ3RoO2s8a2w7aysrKXt2YXIgZ3JvdXA9Z3JvdXBzW2tdO3ZhciBncm91cE1hdGVyaWFsPW1hdGVyaWFsW2dyb3VwLm1hdGVyaWFsSW5kZXhdO2lmKGdyb3VwTWF0ZXJpYWwmJmdyb3VwTWF0ZXJpYWwudmlzaWJsZSl7dmFyIGRlcHRoTWF0ZXJpYWw9Z2V0RGVwdGhNYXRlcmlhbChvYmplY3QsZ3JvdXBNYXRlcmlhbCxpc1BvaW50TGlnaHQsX2xpZ2h0UG9zaXRpb25Xb3JsZCxzaGFkb3dDYW1lcmEubmVhcixzaGFkb3dDYW1lcmEuZmFyKTtfcmVuZGVyZXIucmVuZGVyQnVmZmVyRGlyZWN0KHNoYWRvd0NhbWVyYSxudWxsLGdlb21ldHJ5LGRlcHRoTWF0ZXJpYWwsb2JqZWN0LGdyb3VwKTt9fX1lbHNlIGlmKG1hdGVyaWFsLnZpc2libGUpe3ZhciBkZXB0aE1hdGVyaWFsPWdldERlcHRoTWF0ZXJpYWwob2JqZWN0LG1hdGVyaWFsLGlzUG9pbnRMaWdodCxfbGlnaHRQb3NpdGlvbldvcmxkLHNoYWRvd0NhbWVyYS5uZWFyLHNoYWRvd0NhbWVyYS5mYXIpO19yZW5kZXJlci5yZW5kZXJCdWZmZXJEaXJlY3Qoc2hhZG93Q2FtZXJhLG51bGwsZ2VvbWV0cnksZGVwdGhNYXRlcmlhbCxvYmplY3QsbnVsbCk7fX19dmFyIGNoaWxkcmVuPW9iamVjdC5jaGlsZHJlbjtmb3IodmFyIGk9MCxsPWNoaWxkcmVuLmxlbmd0aDtpPGw7aSsrKXtyZW5kZXJPYmplY3QoY2hpbGRyZW5baV0sY2FtZXJhLHNoYWRvd0NhbWVyYSxpc1BvaW50TGlnaHQpO319fS8qKgogKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tLwogKi9mdW5jdGlvbiBXZWJHTEF0dHJpYnV0ZXMoZ2wpe3ZhciBidWZmZXJzPXt9O2Z1bmN0aW9uIGNyZWF0ZUJ1ZmZlcihhdHRyaWJ1dGUsYnVmZmVyVHlwZSl7dmFyIGFycmF5PWF0dHJpYnV0ZS5hcnJheTt2YXIgdXNhZ2U9YXR0cmlidXRlLmR5bmFtaWM/Z2wuRFlOQU1JQ19EUkFXOmdsLlNUQVRJQ19EUkFXO3ZhciBidWZmZXI9Z2wuY3JlYXRlQnVmZmVyKCk7Z2wuYmluZEJ1ZmZlcihidWZmZXJUeXBlLGJ1ZmZlcik7Z2wuYnVmZmVyRGF0YShidWZmZXJUeXBlLGFycmF5LHVzYWdlKTthdHRyaWJ1dGUub25VcGxvYWRDYWxsYmFjaygpO3ZhciB0eXBlPWdsLkZMT0FUO2lmKGFycmF5IGluc3RhbmNlb2YgRmxvYXQzMkFycmF5KXt0eXBlPWdsLkZMT0FUO31lbHNlIGlmKGFycmF5IGluc3RhbmNlb2YgRmxvYXQ2NEFycmF5KXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMQXR0cmlidXRlczogVW5zdXBwb3J0ZWQgZGF0YSBidWZmZXIgZm9ybWF0OiBGbG9hdDY0QXJyYXkuJyk7fWVsc2UgaWYoYXJyYXkgaW5zdGFuY2VvZiBVaW50MTZBcnJheSl7dHlwZT1nbC5VTlNJR05FRF9TSE9SVDt9ZWxzZSBpZihhcnJheSBpbnN0YW5jZW9mIEludDE2QXJyYXkpe3R5cGU9Z2wuU0hPUlQ7fWVsc2UgaWYoYXJyYXkgaW5zdGFuY2VvZiBVaW50MzJBcnJheSl7dHlwZT1nbC5VTlNJR05FRF9JTlQ7fWVsc2UgaWYoYXJyYXkgaW5zdGFuY2VvZiBJbnQzMkFycmF5KXt0eXBlPWdsLklOVDt9ZWxzZSBpZihhcnJheSBpbnN0YW5jZW9mIEludDhBcnJheSl7dHlwZT1nbC5CWVRFO31lbHNlIGlmKGFycmF5IGluc3RhbmNlb2YgVWludDhBcnJheSl7dHlwZT1nbC5VTlNJR05FRF9CWVRFO31yZXR1cm57YnVmZmVyOmJ1ZmZlcix0eXBlOnR5cGUsYnl0ZXNQZXJFbGVtZW50OmFycmF5LkJZVEVTX1BFUl9FTEVNRU5ULHZlcnNpb246YXR0cmlidXRlLnZlcnNpb259O31mdW5jdGlvbiB1cGRhdGVCdWZmZXIoYnVmZmVyLGF0dHJpYnV0ZSxidWZmZXJUeXBlKXt2YXIgYXJyYXk9YXR0cmlidXRlLmFycmF5O3ZhciB1cGRhdGVSYW5nZT1hdHRyaWJ1dGUudXBkYXRlUmFuZ2U7Z2wuYmluZEJ1ZmZlcihidWZmZXJUeXBlLGJ1ZmZlcik7aWYoYXR0cmlidXRlLmR5bmFtaWM9PT1mYWxzZSl7Z2wuYnVmZmVyRGF0YShidWZmZXJUeXBlLGFycmF5LGdsLlNUQVRJQ19EUkFXKTt9ZWxzZSBpZih1cGRhdGVSYW5nZS5jb3VudD09PS0xKXsvLyBOb3QgdXNpbmcgdXBkYXRlIHJhbmdlcwpnbC5idWZmZXJTdWJEYXRhKGJ1ZmZlclR5cGUsMCxhcnJheSk7fWVsc2UgaWYodXBkYXRlUmFuZ2UuY291bnQ9PT0wKXtjb25zb2xlLmVycm9yKCdUSFJFRS5XZWJHTE9iamVjdHMudXBkYXRlQnVmZmVyOiBkeW5hbWljIFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZSBtYXJrZWQgYXMgbmVlZHNVcGRhdGUgYnV0IHVwZGF0ZVJhbmdlLmNvdW50IGlzIDAsIGVuc3VyZSB5b3UgYXJlIHVzaW5nIHNldCBtZXRob2RzIG9yIHVwZGF0aW5nIG1hbnVhbGx5LicpO31lbHNle2dsLmJ1ZmZlclN1YkRhdGEoYnVmZmVyVHlwZSx1cGRhdGVSYW5nZS5vZmZzZXQqYXJyYXkuQllURVNfUEVSX0VMRU1FTlQsYXJyYXkuc3ViYXJyYXkodXBkYXRlUmFuZ2Uub2Zmc2V0LHVwZGF0ZVJhbmdlLm9mZnNldCt1cGRhdGVSYW5nZS5jb3VudCkpO3VwZGF0ZVJhbmdlLmNvdW50PS0xOy8vIHJlc2V0IHJhbmdlCn19Ly8KZnVuY3Rpb24gZ2V0KGF0dHJpYnV0ZSl7aWYoYXR0cmlidXRlLmlzSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGUpYXR0cmlidXRlPWF0dHJpYnV0ZS5kYXRhO3JldHVybiBidWZmZXJzW2F0dHJpYnV0ZS51dWlkXTt9ZnVuY3Rpb24gcmVtb3ZlKGF0dHJpYnV0ZSl7aWYoYXR0cmlidXRlLmlzSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGUpYXR0cmlidXRlPWF0dHJpYnV0ZS5kYXRhO3ZhciBkYXRhPWJ1ZmZlcnNbYXR0cmlidXRlLnV1aWRdO2lmKGRhdGEpe2dsLmRlbGV0ZUJ1ZmZlcihkYXRhLmJ1ZmZlcik7ZGVsZXRlIGJ1ZmZlcnNbYXR0cmlidXRlLnV1aWRdO319ZnVuY3Rpb24gdXBkYXRlKGF0dHJpYnV0ZSxidWZmZXJUeXBlKXtpZihhdHRyaWJ1dGUuaXNJbnRlcmxlYXZlZEJ1ZmZlckF0dHJpYnV0ZSlhdHRyaWJ1dGU9YXR0cmlidXRlLmRhdGE7dmFyIGRhdGE9YnVmZmVyc1thdHRyaWJ1dGUudXVpZF07aWYoZGF0YT09PXVuZGVmaW5lZCl7YnVmZmVyc1thdHRyaWJ1dGUudXVpZF09Y3JlYXRlQnVmZmVyKGF0dHJpYnV0ZSxidWZmZXJUeXBlKTt9ZWxzZSBpZihkYXRhLnZlcnNpb248YXR0cmlidXRlLnZlcnNpb24pe3VwZGF0ZUJ1ZmZlcihkYXRhLmJ1ZmZlcixhdHRyaWJ1dGUsYnVmZmVyVHlwZSk7ZGF0YS52ZXJzaW9uPWF0dHJpYnV0ZS52ZXJzaW9uO319cmV0dXJue2dldDpnZXQscmVtb3ZlOnJlbW92ZSx1cGRhdGU6dXBkYXRlfTt9LyoqCiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vCiAqIEBhdXRob3IgV2VzdExhbmdsZXkgLyBodHRwOi8vZ2l0aHViLmNvbS9XZXN0TGFuZ2xleQogKiBAYXV0aG9yIGJob3VzdG9uIC8gaHR0cDovL2NsYXJhLmlvCiAqL2Z1bmN0aW9uIEV1bGVyKHgseSx6LG9yZGVyKXt0aGlzLl94PXh8fDA7dGhpcy5feT15fHwwO3RoaXMuX3o9enx8MDt0aGlzLl9vcmRlcj1vcmRlcnx8RXVsZXIuRGVmYXVsdE9yZGVyO31FdWxlci5Sb3RhdGlvbk9yZGVycz1bJ1hZWicsJ1laWCcsJ1pYWScsJ1haWScsJ1lYWicsJ1pZWCddO0V1bGVyLkRlZmF1bHRPcmRlcj0nWFlaJztPYmplY3QuZGVmaW5lUHJvcGVydGllcyhFdWxlci5wcm90b3R5cGUse3g6e2dldDpmdW5jdGlvbiBnZXQoKXtyZXR1cm4gdGhpcy5feDt9LHNldDpmdW5jdGlvbiBzZXQodmFsdWUpe3RoaXMuX3g9dmFsdWU7dGhpcy5vbkNoYW5nZUNhbGxiYWNrKCk7fX0seTp7Z2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiB0aGlzLl95O30sc2V0OmZ1bmN0aW9uIHNldCh2YWx1ZSl7dGhpcy5feT12YWx1ZTt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTt9fSx6OntnZXQ6ZnVuY3Rpb24gZ2V0KCl7cmV0dXJuIHRoaXMuX3o7fSxzZXQ6ZnVuY3Rpb24gc2V0KHZhbHVlKXt0aGlzLl96PXZhbHVlO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpO319LG9yZGVyOntnZXQ6ZnVuY3Rpb24gZ2V0KCl7cmV0dXJuIHRoaXMuX29yZGVyO30sc2V0OmZ1bmN0aW9uIHNldCh2YWx1ZSl7dGhpcy5fb3JkZXI9dmFsdWU7dGhpcy5vbkNoYW5nZUNhbGxiYWNrKCk7fX19KTtPYmplY3QuYXNzaWduKEV1bGVyLnByb3RvdHlwZSx7aXNFdWxlcjp0cnVlLHNldDpmdW5jdGlvbiBzZXQoeCx5LHosb3JkZXIpe3RoaXMuX3g9eDt0aGlzLl95PXk7dGhpcy5fej16O3RoaXMuX29yZGVyPW9yZGVyfHx0aGlzLl9vcmRlcjt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtyZXR1cm4gdGhpczt9LGNsb25lOmZ1bmN0aW9uIGNsb25lKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMuX3gsdGhpcy5feSx0aGlzLl96LHRoaXMuX29yZGVyKTt9LGNvcHk6ZnVuY3Rpb24gY29weShldWxlcil7dGhpcy5feD1ldWxlci5feDt0aGlzLl95PWV1bGVyLl95O3RoaXMuX3o9ZXVsZXIuX3o7dGhpcy5fb3JkZXI9ZXVsZXIuX29yZGVyO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpO3JldHVybiB0aGlzO30sc2V0RnJvbVJvdGF0aW9uTWF0cml4OmZ1bmN0aW9uIHNldEZyb21Sb3RhdGlvbk1hdHJpeChtLG9yZGVyLHVwZGF0ZSl7dmFyIGNsYW1wPV9NYXRoLmNsYW1wOy8vIGFzc3VtZXMgdGhlIHVwcGVyIDN4MyBvZiBtIGlzIGEgcHVyZSByb3RhdGlvbiBtYXRyaXggKGkuZSwgdW5zY2FsZWQpCnZhciB0ZT1tLmVsZW1lbnRzO3ZhciBtMTE9dGVbMF0sbTEyPXRlWzRdLG0xMz10ZVs4XTt2YXIgbTIxPXRlWzFdLG0yMj10ZVs1XSxtMjM9dGVbOV07dmFyIG0zMT10ZVsyXSxtMzI9dGVbNl0sbTMzPXRlWzEwXTtvcmRlcj1vcmRlcnx8dGhpcy5fb3JkZXI7aWYob3JkZXI9PT0nWFlaJyl7dGhpcy5feT1NYXRoLmFzaW4oY2xhbXAobTEzLC0xLDEpKTtpZihNYXRoLmFicyhtMTMpPDAuOTk5OTkpe3RoaXMuX3g9TWF0aC5hdGFuMigtbTIzLG0zMyk7dGhpcy5fej1NYXRoLmF0YW4yKC1tMTIsbTExKTt9ZWxzZXt0aGlzLl94PU1hdGguYXRhbjIobTMyLG0yMik7dGhpcy5fej0wO319ZWxzZSBpZihvcmRlcj09PSdZWFonKXt0aGlzLl94PU1hdGguYXNpbigtY2xhbXAobTIzLC0xLDEpKTtpZihNYXRoLmFicyhtMjMpPDAuOTk5OTkpe3RoaXMuX3k9TWF0aC5hdGFuMihtMTMsbTMzKTt0aGlzLl96PU1hdGguYXRhbjIobTIxLG0yMik7fWVsc2V7dGhpcy5feT1NYXRoLmF0YW4yKC1tMzEsbTExKTt0aGlzLl96PTA7fX1lbHNlIGlmKG9yZGVyPT09J1pYWScpe3RoaXMuX3g9TWF0aC5hc2luKGNsYW1wKG0zMiwtMSwxKSk7aWYoTWF0aC5hYnMobTMyKTwwLjk5OTk5KXt0aGlzLl95PU1hdGguYXRhbjIoLW0zMSxtMzMpO3RoaXMuX3o9TWF0aC5hdGFuMigtbTEyLG0yMik7fWVsc2V7dGhpcy5feT0wO3RoaXMuX3o9TWF0aC5hdGFuMihtMjEsbTExKTt9fWVsc2UgaWYob3JkZXI9PT0nWllYJyl7dGhpcy5feT1NYXRoLmFzaW4oLWNsYW1wKG0zMSwtMSwxKSk7aWYoTWF0aC5hYnMobTMxKTwwLjk5OTk5KXt0aGlzLl94PU1hdGguYXRhbjIobTMyLG0zMyk7dGhpcy5fej1NYXRoLmF0YW4yKG0yMSxtMTEpO31lbHNle3RoaXMuX3g9MDt0aGlzLl96PU1hdGguYXRhbjIoLW0xMixtMjIpO319ZWxzZSBpZihvcmRlcj09PSdZWlgnKXt0aGlzLl96PU1hdGguYXNpbihjbGFtcChtMjEsLTEsMSkpO2lmKE1hdGguYWJzKG0yMSk8MC45OTk5OSl7dGhpcy5feD1NYXRoLmF0YW4yKC1tMjMsbTIyKTt0aGlzLl95PU1hdGguYXRhbjIoLW0zMSxtMTEpO31lbHNle3RoaXMuX3g9MDt0aGlzLl95PU1hdGguYXRhbjIobTEzLG0zMyk7fX1lbHNlIGlmKG9yZGVyPT09J1haWScpe3RoaXMuX3o9TWF0aC5hc2luKC1jbGFtcChtMTIsLTEsMSkpO2lmKE1hdGguYWJzKG0xMik8MC45OTk5OSl7dGhpcy5feD1NYXRoLmF0YW4yKG0zMixtMjIpO3RoaXMuX3k9TWF0aC5hdGFuMihtMTMsbTExKTt9ZWxzZXt0aGlzLl94PU1hdGguYXRhbjIoLW0yMyxtMzMpO3RoaXMuX3k9MDt9fWVsc2V7Y29uc29sZS53YXJuKCdUSFJFRS5FdWxlcjogLnNldEZyb21Sb3RhdGlvbk1hdHJpeCgpIGdpdmVuIHVuc3VwcG9ydGVkIG9yZGVyOiAnK29yZGVyKTt9dGhpcy5fb3JkZXI9b3JkZXI7aWYodXBkYXRlIT09ZmFsc2UpdGhpcy5vbkNoYW5nZUNhbGxiYWNrKCk7cmV0dXJuIHRoaXM7fSxzZXRGcm9tUXVhdGVybmlvbjpmdW5jdGlvbigpe3ZhciBtYXRyaXg9bmV3IE1hdHJpeDQoKTtyZXR1cm4gZnVuY3Rpb24gc2V0RnJvbVF1YXRlcm5pb24ocSxvcmRlcix1cGRhdGUpe21hdHJpeC5tYWtlUm90YXRpb25Gcm9tUXVhdGVybmlvbihxKTtyZXR1cm4gdGhpcy5zZXRGcm9tUm90YXRpb25NYXRyaXgobWF0cml4LG9yZGVyLHVwZGF0ZSk7fTt9KCksc2V0RnJvbVZlY3RvcjM6ZnVuY3Rpb24gc2V0RnJvbVZlY3RvcjModixvcmRlcil7cmV0dXJuIHRoaXMuc2V0KHYueCx2Lnksdi56LG9yZGVyfHx0aGlzLl9vcmRlcik7fSxyZW9yZGVyOmZ1bmN0aW9uKCl7Ly8gV0FSTklORzogdGhpcyBkaXNjYXJkcyByZXZvbHV0aW9uIGluZm9ybWF0aW9uIC1iaG91c3Rvbgp2YXIgcT1uZXcgUXVhdGVybmlvbigpO3JldHVybiBmdW5jdGlvbiByZW9yZGVyKG5ld09yZGVyKXtxLnNldEZyb21FdWxlcih0aGlzKTtyZXR1cm4gdGhpcy5zZXRGcm9tUXVhdGVybmlvbihxLG5ld09yZGVyKTt9O30oKSxlcXVhbHM6ZnVuY3Rpb24gZXF1YWxzKGV1bGVyKXtyZXR1cm4gZXVsZXIuX3g9PT10aGlzLl94JiZldWxlci5feT09PXRoaXMuX3kmJmV1bGVyLl96PT09dGhpcy5feiYmZXVsZXIuX29yZGVyPT09dGhpcy5fb3JkZXI7fSxmcm9tQXJyYXk6ZnVuY3Rpb24gZnJvbUFycmF5KGFycmF5KXt0aGlzLl94PWFycmF5WzBdO3RoaXMuX3k9YXJyYXlbMV07dGhpcy5fej1hcnJheVsyXTtpZihhcnJheVszXSE9PXVuZGVmaW5lZCl0aGlzLl9vcmRlcj1hcnJheVszXTt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtyZXR1cm4gdGhpczt9LHRvQXJyYXk6ZnVuY3Rpb24gdG9BcnJheShhcnJheSxvZmZzZXQpe2lmKGFycmF5PT09dW5kZWZpbmVkKWFycmF5PVtdO2lmKG9mZnNldD09PXVuZGVmaW5lZClvZmZzZXQ9MDthcnJheVtvZmZzZXRdPXRoaXMuX3g7YXJyYXlbb2Zmc2V0KzFdPXRoaXMuX3k7YXJyYXlbb2Zmc2V0KzJdPXRoaXMuX3o7YXJyYXlbb2Zmc2V0KzNdPXRoaXMuX29yZGVyO3JldHVybiBhcnJheTt9LHRvVmVjdG9yMzpmdW5jdGlvbiB0b1ZlY3RvcjMob3B0aW9uYWxSZXN1bHQpe2lmKG9wdGlvbmFsUmVzdWx0KXtyZXR1cm4gb3B0aW9uYWxSZXN1bHQuc2V0KHRoaXMuX3gsdGhpcy5feSx0aGlzLl96KTt9ZWxzZXtyZXR1cm4gbmV3IFZlY3RvcjModGhpcy5feCx0aGlzLl95LHRoaXMuX3opO319LG9uQ2hhbmdlOmZ1bmN0aW9uIG9uQ2hhbmdlKGNhbGxiYWNrKXt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2s9Y2FsbGJhY2s7cmV0dXJuIHRoaXM7fSxvbkNoYW5nZUNhbGxiYWNrOmZ1bmN0aW9uIG9uQ2hhbmdlQ2FsbGJhY2soKXt9fSk7LyoqCiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vCiAqL2Z1bmN0aW9uIExheWVycygpe3RoaXMubWFzaz0xfDA7fU9iamVjdC5hc3NpZ24oTGF5ZXJzLnByb3RvdHlwZSx7c2V0OmZ1bmN0aW9uIHNldChjaGFubmVsKXt0aGlzLm1hc2s9MTw8Y2hhbm5lbHwwO30sZW5hYmxlOmZ1bmN0aW9uIGVuYWJsZShjaGFubmVsKXt0aGlzLm1hc2t8PTE8PGNoYW5uZWx8MDt9LHRvZ2dsZTpmdW5jdGlvbiB0b2dnbGUoY2hhbm5lbCl7dGhpcy5tYXNrXj0xPDxjaGFubmVsfDA7fSxkaXNhYmxlOmZ1bmN0aW9uIGRpc2FibGUoY2hhbm5lbCl7dGhpcy5tYXNrJj1+KDE8PGNoYW5uZWx8MCk7fSx0ZXN0OmZ1bmN0aW9uIHRlc3QobGF5ZXJzKXtyZXR1cm4odGhpcy5tYXNrJmxheWVycy5tYXNrKSE9PTA7fX0pOy8qKgogKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tLwogKiBAYXV0aG9yIG1pa2FlbCBlbXRpbmdlciAvIGh0dHA6Ly9nb21vLnNlLwogKiBAYXV0aG9yIGFsdGVyZWRxIC8gaHR0cDovL2FsdGVyZWRxdWFsaWEuY29tLwogKiBAYXV0aG9yIFdlc3RMYW5nbGV5IC8gaHR0cDovL2dpdGh1Yi5jb20vV2VzdExhbmdsZXkKICogQGF1dGhvciBlbGVwaGFudGF0d29yayAvIHd3dy5lbGVwaGFudGF0d29yay5jaAogKi92YXIgb2JqZWN0M0RJZD0wO2Z1bmN0aW9uIE9iamVjdDNEKCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsJ2lkJyx7dmFsdWU6b2JqZWN0M0RJZCsrfSk7dGhpcy51dWlkPV9NYXRoLmdlbmVyYXRlVVVJRCgpO3RoaXMubmFtZT0nJzt0aGlzLnR5cGU9J09iamVjdDNEJzt0aGlzLnBhcmVudD1udWxsO3RoaXMuY2hpbGRyZW49W107dGhpcy51cD1PYmplY3QzRC5EZWZhdWx0VXAuY2xvbmUoKTt2YXIgcG9zaXRpb249bmV3IFZlY3RvcjMoKTt2YXIgcm90YXRpb249bmV3IEV1bGVyKCk7dmFyIHF1YXRlcm5pb249bmV3IFF1YXRlcm5pb24oKTt2YXIgc2NhbGU9bmV3IFZlY3RvcjMoMSwxLDEpO2Z1bmN0aW9uIG9uUm90YXRpb25DaGFuZ2UoKXtxdWF0ZXJuaW9uLnNldEZyb21FdWxlcihyb3RhdGlvbixmYWxzZSk7fWZ1bmN0aW9uIG9uUXVhdGVybmlvbkNoYW5nZSgpe3JvdGF0aW9uLnNldEZyb21RdWF0ZXJuaW9uKHF1YXRlcm5pb24sdW5kZWZpbmVkLGZhbHNlKTt9cm90YXRpb24ub25DaGFuZ2Uob25Sb3RhdGlvbkNoYW5nZSk7cXVhdGVybmlvbi5vbkNoYW5nZShvblF1YXRlcm5pb25DaGFuZ2UpO09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMse3Bvc2l0aW9uOntlbnVtZXJhYmxlOnRydWUsdmFsdWU6cG9zaXRpb259LHJvdGF0aW9uOntlbnVtZXJhYmxlOnRydWUsdmFsdWU6cm90YXRpb259LHF1YXRlcm5pb246e2VudW1lcmFibGU6dHJ1ZSx2YWx1ZTpxdWF0ZXJuaW9ufSxzY2FsZTp7ZW51bWVyYWJsZTp0cnVlLHZhbHVlOnNjYWxlfSxtb2RlbFZpZXdNYXRyaXg6e3ZhbHVlOm5ldyBNYXRyaXg0KCl9LG5vcm1hbE1hdHJpeDp7dmFsdWU6bmV3IE1hdHJpeDMoKX19KTt0aGlzLm1hdHJpeD1uZXcgTWF0cml4NCgpO3RoaXMubWF0cml4V29ybGQ9bmV3IE1hdHJpeDQoKTt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9T2JqZWN0M0QuRGVmYXVsdE1hdHJpeEF1dG9VcGRhdGU7dGhpcy5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlPWZhbHNlO3RoaXMubGF5ZXJzPW5ldyBMYXllcnMoKTt0aGlzLnZpc2libGU9dHJ1ZTt0aGlzLmNhc3RTaGFkb3c9ZmFsc2U7dGhpcy5yZWNlaXZlU2hhZG93PWZhbHNlO3RoaXMuZnJ1c3R1bUN1bGxlZD10cnVlO3RoaXMucmVuZGVyT3JkZXI9MDt0aGlzLnVzZXJEYXRhPXt9O31PYmplY3QzRC5EZWZhdWx0VXA9bmV3IFZlY3RvcjMoMCwxLDApO09iamVjdDNELkRlZmF1bHRNYXRyaXhBdXRvVXBkYXRlPXRydWU7T2JqZWN0M0QucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShFdmVudERpc3BhdGNoZXIucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6T2JqZWN0M0QsaXNPYmplY3QzRDp0cnVlLG9uQmVmb3JlUmVuZGVyOmZ1bmN0aW9uIG9uQmVmb3JlUmVuZGVyKCl7fSxvbkFmdGVyUmVuZGVyOmZ1bmN0aW9uIG9uQWZ0ZXJSZW5kZXIoKXt9LGFwcGx5TWF0cml4OmZ1bmN0aW9uIGFwcGx5TWF0cml4KG1hdHJpeCl7dGhpcy5tYXRyaXgubXVsdGlwbHlNYXRyaWNlcyhtYXRyaXgsdGhpcy5tYXRyaXgpO3RoaXMubWF0cml4LmRlY29tcG9zZSh0aGlzLnBvc2l0aW9uLHRoaXMucXVhdGVybmlvbix0aGlzLnNjYWxlKTt9LGFwcGx5UXVhdGVybmlvbjpmdW5jdGlvbiBhcHBseVF1YXRlcm5pb24ocSl7dGhpcy5xdWF0ZXJuaW9uLnByZW11bHRpcGx5KHEpO3JldHVybiB0aGlzO30sc2V0Um90YXRpb25Gcm9tQXhpc0FuZ2xlOmZ1bmN0aW9uIHNldFJvdGF0aW9uRnJvbUF4aXNBbmdsZShheGlzLGFuZ2xlKXsvLyBhc3N1bWVzIGF4aXMgaXMgbm9ybWFsaXplZAp0aGlzLnF1YXRlcm5pb24uc2V0RnJvbUF4aXNBbmdsZShheGlzLGFuZ2xlKTt9LHNldFJvdGF0aW9uRnJvbUV1bGVyOmZ1bmN0aW9uIHNldFJvdGF0aW9uRnJvbUV1bGVyKGV1bGVyKXt0aGlzLnF1YXRlcm5pb24uc2V0RnJvbUV1bGVyKGV1bGVyLHRydWUpO30sc2V0Um90YXRpb25Gcm9tTWF0cml4OmZ1bmN0aW9uIHNldFJvdGF0aW9uRnJvbU1hdHJpeChtKXsvLyBhc3N1bWVzIHRoZSB1cHBlciAzeDMgb2YgbSBpcyBhIHB1cmUgcm90YXRpb24gbWF0cml4IChpLmUsIHVuc2NhbGVkKQp0aGlzLnF1YXRlcm5pb24uc2V0RnJvbVJvdGF0aW9uTWF0cml4KG0pO30sc2V0Um90YXRpb25Gcm9tUXVhdGVybmlvbjpmdW5jdGlvbiBzZXRSb3RhdGlvbkZyb21RdWF0ZXJuaW9uKHEpey8vIGFzc3VtZXMgcSBpcyBub3JtYWxpemVkCnRoaXMucXVhdGVybmlvbi5jb3B5KHEpO30scm90YXRlT25BeGlzOmZ1bmN0aW9uKCl7Ly8gcm90YXRlIG9iamVjdCBvbiBheGlzIGluIG9iamVjdCBzcGFjZQovLyBheGlzIGlzIGFzc3VtZWQgdG8gYmUgbm9ybWFsaXplZAp2YXIgcTE9bmV3IFF1YXRlcm5pb24oKTtyZXR1cm4gZnVuY3Rpb24gcm90YXRlT25BeGlzKGF4aXMsYW5nbGUpe3ExLnNldEZyb21BeGlzQW5nbGUoYXhpcyxhbmdsZSk7dGhpcy5xdWF0ZXJuaW9uLm11bHRpcGx5KHExKTtyZXR1cm4gdGhpczt9O30oKSxyb3RhdGVPbldvcmxkQXhpczpmdW5jdGlvbigpey8vIHJvdGF0ZSBvYmplY3Qgb24gYXhpcyBpbiB3b3JsZCBzcGFjZQovLyBheGlzIGlzIGFzc3VtZWQgdG8gYmUgbm9ybWFsaXplZAovLyBtZXRob2QgYXNzdW1lcyBubyByb3RhdGVkIHBhcmVudAp2YXIgcTE9bmV3IFF1YXRlcm5pb24oKTtyZXR1cm4gZnVuY3Rpb24gcm90YXRlT25Xb3JsZEF4aXMoYXhpcyxhbmdsZSl7cTEuc2V0RnJvbUF4aXNBbmdsZShheGlzLGFuZ2xlKTt0aGlzLnF1YXRlcm5pb24ucHJlbXVsdGlwbHkocTEpO3JldHVybiB0aGlzO307fSgpLHJvdGF0ZVg6ZnVuY3Rpb24oKXt2YXIgdjE9bmV3IFZlY3RvcjMoMSwwLDApO3JldHVybiBmdW5jdGlvbiByb3RhdGVYKGFuZ2xlKXtyZXR1cm4gdGhpcy5yb3RhdGVPbkF4aXModjEsYW5nbGUpO307fSgpLHJvdGF0ZVk6ZnVuY3Rpb24oKXt2YXIgdjE9bmV3IFZlY3RvcjMoMCwxLDApO3JldHVybiBmdW5jdGlvbiByb3RhdGVZKGFuZ2xlKXtyZXR1cm4gdGhpcy5yb3RhdGVPbkF4aXModjEsYW5nbGUpO307fSgpLHJvdGF0ZVo6ZnVuY3Rpb24oKXt2YXIgdjE9bmV3IFZlY3RvcjMoMCwwLDEpO3JldHVybiBmdW5jdGlvbiByb3RhdGVaKGFuZ2xlKXtyZXR1cm4gdGhpcy5yb3RhdGVPbkF4aXModjEsYW5nbGUpO307fSgpLHRyYW5zbGF0ZU9uQXhpczpmdW5jdGlvbigpey8vIHRyYW5zbGF0ZSBvYmplY3QgYnkgZGlzdGFuY2UgYWxvbmcgYXhpcyBpbiBvYmplY3Qgc3BhY2UKLy8gYXhpcyBpcyBhc3N1bWVkIHRvIGJlIG5vcm1hbGl6ZWQKdmFyIHYxPW5ldyBWZWN0b3IzKCk7cmV0dXJuIGZ1bmN0aW9uIHRyYW5zbGF0ZU9uQXhpcyhheGlzLGRpc3RhbmNlKXt2MS5jb3B5KGF4aXMpLmFwcGx5UXVhdGVybmlvbih0aGlzLnF1YXRlcm5pb24pO3RoaXMucG9zaXRpb24uYWRkKHYxLm11bHRpcGx5U2NhbGFyKGRpc3RhbmNlKSk7cmV0dXJuIHRoaXM7fTt9KCksdHJhbnNsYXRlWDpmdW5jdGlvbigpe3ZhciB2MT1uZXcgVmVjdG9yMygxLDAsMCk7cmV0dXJuIGZ1bmN0aW9uIHRyYW5zbGF0ZVgoZGlzdGFuY2Upe3JldHVybiB0aGlzLnRyYW5zbGF0ZU9uQXhpcyh2MSxkaXN0YW5jZSk7fTt9KCksdHJhbnNsYXRlWTpmdW5jdGlvbigpe3ZhciB2MT1uZXcgVmVjdG9yMygwLDEsMCk7cmV0dXJuIGZ1bmN0aW9uIHRyYW5zbGF0ZVkoZGlzdGFuY2Upe3JldHVybiB0aGlzLnRyYW5zbGF0ZU9uQXhpcyh2MSxkaXN0YW5jZSk7fTt9KCksdHJhbnNsYXRlWjpmdW5jdGlvbigpe3ZhciB2MT1uZXcgVmVjdG9yMygwLDAsMSk7cmV0dXJuIGZ1bmN0aW9uIHRyYW5zbGF0ZVooZGlzdGFuY2Upe3JldHVybiB0aGlzLnRyYW5zbGF0ZU9uQXhpcyh2MSxkaXN0YW5jZSk7fTt9KCksbG9jYWxUb1dvcmxkOmZ1bmN0aW9uIGxvY2FsVG9Xb3JsZCh2ZWN0b3Ipe3JldHVybiB2ZWN0b3IuYXBwbHlNYXRyaXg0KHRoaXMubWF0cml4V29ybGQpO30sd29ybGRUb0xvY2FsOmZ1bmN0aW9uKCl7dmFyIG0xPW5ldyBNYXRyaXg0KCk7cmV0dXJuIGZ1bmN0aW9uIHdvcmxkVG9Mb2NhbCh2ZWN0b3Ipe3JldHVybiB2ZWN0b3IuYXBwbHlNYXRyaXg0KG0xLmdldEludmVyc2UodGhpcy5tYXRyaXhXb3JsZCkpO307fSgpLGxvb2tBdDpmdW5jdGlvbigpey8vIFRoaXMgbWV0aG9kIGRvZXMgbm90IHN1cHBvcnQgb2JqZWN0cyB3aXRoIHJvdGF0ZWQgYW5kL29yIHRyYW5zbGF0ZWQgcGFyZW50KHMpCnZhciBtMT1uZXcgTWF0cml4NCgpO3ZhciB2ZWN0b3I9bmV3IFZlY3RvcjMoKTtyZXR1cm4gZnVuY3Rpb24gbG9va0F0KHgseSx6KXtpZih4LmlzVmVjdG9yMyl7dmVjdG9yLmNvcHkoeCk7fWVsc2V7dmVjdG9yLnNldCh4LHkseik7fWlmKHRoaXMuaXNDYW1lcmEpe20xLmxvb2tBdCh0aGlzLnBvc2l0aW9uLHZlY3Rvcix0aGlzLnVwKTt9ZWxzZXttMS5sb29rQXQodmVjdG9yLHRoaXMucG9zaXRpb24sdGhpcy51cCk7fXRoaXMucXVhdGVybmlvbi5zZXRGcm9tUm90YXRpb25NYXRyaXgobTEpO307fSgpLGFkZDpmdW5jdGlvbiBhZGQob2JqZWN0KXtpZihhcmd1bWVudHMubGVuZ3RoPjEpe2Zvcih2YXIgaT0wO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspe3RoaXMuYWRkKGFyZ3VtZW50c1tpXSk7fXJldHVybiB0aGlzO31pZihvYmplY3Q9PT10aGlzKXtjb25zb2xlLmVycm9yKCJUSFJFRS5PYmplY3QzRC5hZGQ6IG9iamVjdCBjYW4ndCBiZSBhZGRlZCBhcyBhIGNoaWxkIG9mIGl0c2VsZi4iLG9iamVjdCk7cmV0dXJuIHRoaXM7fWlmKG9iamVjdCYmb2JqZWN0LmlzT2JqZWN0M0Qpe2lmKG9iamVjdC5wYXJlbnQhPT1udWxsKXtvYmplY3QucGFyZW50LnJlbW92ZShvYmplY3QpO31vYmplY3QucGFyZW50PXRoaXM7b2JqZWN0LmRpc3BhdGNoRXZlbnQoe3R5cGU6J2FkZGVkJ30pO3RoaXMuY2hpbGRyZW4ucHVzaChvYmplY3QpO31lbHNle2NvbnNvbGUuZXJyb3IoIlRIUkVFLk9iamVjdDNELmFkZDogb2JqZWN0IG5vdCBhbiBpbnN0YW5jZSBvZiBUSFJFRS5PYmplY3QzRC4iLG9iamVjdCk7fXJldHVybiB0aGlzO30scmVtb3ZlOmZ1bmN0aW9uIHJlbW92ZShvYmplY3Qpe2lmKGFyZ3VtZW50cy5sZW5ndGg+MSl7Zm9yKHZhciBpPTA7aTxhcmd1bWVudHMubGVuZ3RoO2krKyl7dGhpcy5yZW1vdmUoYXJndW1lbnRzW2ldKTt9cmV0dXJuIHRoaXM7fXZhciBpbmRleD10aGlzLmNoaWxkcmVuLmluZGV4T2Yob2JqZWN0KTtpZihpbmRleCE9PS0xKXtvYmplY3QucGFyZW50PW51bGw7b2JqZWN0LmRpc3BhdGNoRXZlbnQoe3R5cGU6J3JlbW92ZWQnfSk7dGhpcy5jaGlsZHJlbi5zcGxpY2UoaW5kZXgsMSk7fXJldHVybiB0aGlzO30sZ2V0T2JqZWN0QnlJZDpmdW5jdGlvbiBnZXRPYmplY3RCeUlkKGlkKXtyZXR1cm4gdGhpcy5nZXRPYmplY3RCeVByb3BlcnR5KCdpZCcsaWQpO30sZ2V0T2JqZWN0QnlOYW1lOmZ1bmN0aW9uIGdldE9iamVjdEJ5TmFtZShuYW1lKXtyZXR1cm4gdGhpcy5nZXRPYmplY3RCeVByb3BlcnR5KCduYW1lJyxuYW1lKTt9LGdldE9iamVjdEJ5UHJvcGVydHk6ZnVuY3Rpb24gZ2V0T2JqZWN0QnlQcm9wZXJ0eShuYW1lLHZhbHVlKXtpZih0aGlzW25hbWVdPT09dmFsdWUpcmV0dXJuIHRoaXM7Zm9yKHZhciBpPTAsbD10aGlzLmNoaWxkcmVuLmxlbmd0aDtpPGw7aSsrKXt2YXIgY2hpbGQ9dGhpcy5jaGlsZHJlbltpXTt2YXIgb2JqZWN0PWNoaWxkLmdldE9iamVjdEJ5UHJvcGVydHkobmFtZSx2YWx1ZSk7aWYob2JqZWN0IT09dW5kZWZpbmVkKXtyZXR1cm4gb2JqZWN0O319cmV0dXJuIHVuZGVmaW5lZDt9LGdldFdvcmxkUG9zaXRpb246ZnVuY3Rpb24gZ2V0V29ybGRQb3NpdGlvbihvcHRpb25hbFRhcmdldCl7dmFyIHJlc3VsdD1vcHRpb25hbFRhcmdldHx8bmV3IFZlY3RvcjMoKTt0aGlzLnVwZGF0ZU1hdHJpeFdvcmxkKHRydWUpO3JldHVybiByZXN1bHQuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHRoaXMubWF0cml4V29ybGQpO30sZ2V0V29ybGRRdWF0ZXJuaW9uOmZ1bmN0aW9uKCl7dmFyIHBvc2l0aW9uPW5ldyBWZWN0b3IzKCk7dmFyIHNjYWxlPW5ldyBWZWN0b3IzKCk7cmV0dXJuIGZ1bmN0aW9uIGdldFdvcmxkUXVhdGVybmlvbihvcHRpb25hbFRhcmdldCl7dmFyIHJlc3VsdD1vcHRpb25hbFRhcmdldHx8bmV3IFF1YXRlcm5pb24oKTt0aGlzLnVwZGF0ZU1hdHJpeFdvcmxkKHRydWUpO3RoaXMubWF0cml4V29ybGQuZGVjb21wb3NlKHBvc2l0aW9uLHJlc3VsdCxzY2FsZSk7cmV0dXJuIHJlc3VsdDt9O30oKSxnZXRXb3JsZFJvdGF0aW9uOmZ1bmN0aW9uKCl7dmFyIHF1YXRlcm5pb249bmV3IFF1YXRlcm5pb24oKTtyZXR1cm4gZnVuY3Rpb24gZ2V0V29ybGRSb3RhdGlvbihvcHRpb25hbFRhcmdldCl7dmFyIHJlc3VsdD1vcHRpb25hbFRhcmdldHx8bmV3IEV1bGVyKCk7dGhpcy5nZXRXb3JsZFF1YXRlcm5pb24ocXVhdGVybmlvbik7cmV0dXJuIHJlc3VsdC5zZXRGcm9tUXVhdGVybmlvbihxdWF0ZXJuaW9uLHRoaXMucm90YXRpb24ub3JkZXIsZmFsc2UpO307fSgpLGdldFdvcmxkU2NhbGU6ZnVuY3Rpb24oKXt2YXIgcG9zaXRpb249bmV3IFZlY3RvcjMoKTt2YXIgcXVhdGVybmlvbj1uZXcgUXVhdGVybmlvbigpO3JldHVybiBmdW5jdGlvbiBnZXRXb3JsZFNjYWxlKG9wdGlvbmFsVGFyZ2V0KXt2YXIgcmVzdWx0PW9wdGlvbmFsVGFyZ2V0fHxuZXcgVmVjdG9yMygpO3RoaXMudXBkYXRlTWF0cml4V29ybGQodHJ1ZSk7dGhpcy5tYXRyaXhXb3JsZC5kZWNvbXBvc2UocG9zaXRpb24scXVhdGVybmlvbixyZXN1bHQpO3JldHVybiByZXN1bHQ7fTt9KCksZ2V0V29ybGREaXJlY3Rpb246ZnVuY3Rpb24oKXt2YXIgcXVhdGVybmlvbj1uZXcgUXVhdGVybmlvbigpO3JldHVybiBmdW5jdGlvbiBnZXRXb3JsZERpcmVjdGlvbihvcHRpb25hbFRhcmdldCl7dmFyIHJlc3VsdD1vcHRpb25hbFRhcmdldHx8bmV3IFZlY3RvcjMoKTt0aGlzLmdldFdvcmxkUXVhdGVybmlvbihxdWF0ZXJuaW9uKTtyZXR1cm4gcmVzdWx0LnNldCgwLDAsMSkuYXBwbHlRdWF0ZXJuaW9uKHF1YXRlcm5pb24pO307fSgpLHJheWNhc3Q6ZnVuY3Rpb24gcmF5Y2FzdCgpe30sdHJhdmVyc2U6ZnVuY3Rpb24gdHJhdmVyc2UoY2FsbGJhY2spe2NhbGxiYWNrKHRoaXMpO3ZhciBjaGlsZHJlbj10aGlzLmNoaWxkcmVuO2Zvcih2YXIgaT0wLGw9Y2hpbGRyZW4ubGVuZ3RoO2k8bDtpKyspe2NoaWxkcmVuW2ldLnRyYXZlcnNlKGNhbGxiYWNrKTt9fSx0cmF2ZXJzZVZpc2libGU6ZnVuY3Rpb24gdHJhdmVyc2VWaXNpYmxlKGNhbGxiYWNrKXtpZih0aGlzLnZpc2libGU9PT1mYWxzZSlyZXR1cm47Y2FsbGJhY2sodGhpcyk7dmFyIGNoaWxkcmVuPXRoaXMuY2hpbGRyZW47Zm9yKHZhciBpPTAsbD1jaGlsZHJlbi5sZW5ndGg7aTxsO2krKyl7Y2hpbGRyZW5baV0udHJhdmVyc2VWaXNpYmxlKGNhbGxiYWNrKTt9fSx0cmF2ZXJzZUFuY2VzdG9yczpmdW5jdGlvbiB0cmF2ZXJzZUFuY2VzdG9ycyhjYWxsYmFjayl7dmFyIHBhcmVudD10aGlzLnBhcmVudDtpZihwYXJlbnQhPT1udWxsKXtjYWxsYmFjayhwYXJlbnQpO3BhcmVudC50cmF2ZXJzZUFuY2VzdG9ycyhjYWxsYmFjayk7fX0sdXBkYXRlTWF0cml4OmZ1bmN0aW9uIHVwZGF0ZU1hdHJpeCgpe3RoaXMubWF0cml4LmNvbXBvc2UodGhpcy5wb3NpdGlvbix0aGlzLnF1YXRlcm5pb24sdGhpcy5zY2FsZSk7dGhpcy5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlPXRydWU7fSx1cGRhdGVNYXRyaXhXb3JsZDpmdW5jdGlvbiB1cGRhdGVNYXRyaXhXb3JsZChmb3JjZSl7aWYodGhpcy5tYXRyaXhBdXRvVXBkYXRlKXRoaXMudXBkYXRlTWF0cml4KCk7aWYodGhpcy5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlfHxmb3JjZSl7aWYodGhpcy5wYXJlbnQ9PT1udWxsKXt0aGlzLm1hdHJpeFdvcmxkLmNvcHkodGhpcy5tYXRyaXgpO31lbHNle3RoaXMubWF0cml4V29ybGQubXVsdGlwbHlNYXRyaWNlcyh0aGlzLnBhcmVudC5tYXRyaXhXb3JsZCx0aGlzLm1hdHJpeCk7fXRoaXMubWF0cml4V29ybGROZWVkc1VwZGF0ZT1mYWxzZTtmb3JjZT10cnVlO30vLyB1cGRhdGUgY2hpbGRyZW4KdmFyIGNoaWxkcmVuPXRoaXMuY2hpbGRyZW47Zm9yKHZhciBpPTAsbD1jaGlsZHJlbi5sZW5ndGg7aTxsO2krKyl7Y2hpbGRyZW5baV0udXBkYXRlTWF0cml4V29ybGQoZm9yY2UpO319LHRvSlNPTjpmdW5jdGlvbiB0b0pTT04obWV0YSl7Ly8gbWV0YSBpcyBhIHN0cmluZyB3aGVuIGNhbGxlZCBmcm9tIEpTT04uc3RyaW5naWZ5CnZhciBpc1Jvb3RPYmplY3Q9bWV0YT09PXVuZGVmaW5lZHx8dHlwZW9mIG1ldGE9PT0nc3RyaW5nJzt2YXIgb3V0cHV0PXt9Oy8vIG1ldGEgaXMgYSBoYXNoIHVzZWQgdG8gY29sbGVjdCBnZW9tZXRyaWVzLCBtYXRlcmlhbHMuCi8vIG5vdCBwcm92aWRpbmcgaXQgaW1wbGllcyB0aGF0IHRoaXMgaXMgdGhlIHJvb3Qgb2JqZWN0Ci8vIGJlaW5nIHNlcmlhbGl6ZWQuCmlmKGlzUm9vdE9iamVjdCl7Ly8gaW5pdGlhbGl6ZSBtZXRhIG9iagptZXRhPXtnZW9tZXRyaWVzOnt9LG1hdGVyaWFsczp7fSx0ZXh0dXJlczp7fSxpbWFnZXM6e30sc2hhcGVzOnt9fTtvdXRwdXQubWV0YWRhdGE9e3ZlcnNpb246NC41LHR5cGU6J09iamVjdCcsZ2VuZXJhdG9yOidPYmplY3QzRC50b0pTT04nfTt9Ly8gc3RhbmRhcmQgT2JqZWN0M0Qgc2VyaWFsaXphdGlvbgp2YXIgb2JqZWN0PXt9O29iamVjdC51dWlkPXRoaXMudXVpZDtvYmplY3QudHlwZT10aGlzLnR5cGU7aWYodGhpcy5uYW1lIT09Jycpb2JqZWN0Lm5hbWU9dGhpcy5uYW1lO2lmKHRoaXMuY2FzdFNoYWRvdz09PXRydWUpb2JqZWN0LmNhc3RTaGFkb3c9dHJ1ZTtpZih0aGlzLnJlY2VpdmVTaGFkb3c9PT10cnVlKW9iamVjdC5yZWNlaXZlU2hhZG93PXRydWU7aWYodGhpcy52aXNpYmxlPT09ZmFsc2Upb2JqZWN0LnZpc2libGU9ZmFsc2U7aWYoSlNPTi5zdHJpbmdpZnkodGhpcy51c2VyRGF0YSkhPT0ne30nKW9iamVjdC51c2VyRGF0YT10aGlzLnVzZXJEYXRhO29iamVjdC5tYXRyaXg9dGhpcy5tYXRyaXgudG9BcnJheSgpOy8vCmZ1bmN0aW9uIHNlcmlhbGl6ZShsaWJyYXJ5LGVsZW1lbnQpe2lmKGxpYnJhcnlbZWxlbWVudC51dWlkXT09PXVuZGVmaW5lZCl7bGlicmFyeVtlbGVtZW50LnV1aWRdPWVsZW1lbnQudG9KU09OKG1ldGEpO31yZXR1cm4gZWxlbWVudC51dWlkO31pZih0aGlzLmdlb21ldHJ5IT09dW5kZWZpbmVkKXtvYmplY3QuZ2VvbWV0cnk9c2VyaWFsaXplKG1ldGEuZ2VvbWV0cmllcyx0aGlzLmdlb21ldHJ5KTt2YXIgcGFyYW1ldGVycz10aGlzLmdlb21ldHJ5LnBhcmFtZXRlcnM7aWYocGFyYW1ldGVycyE9PXVuZGVmaW5lZCYmcGFyYW1ldGVycy5zaGFwZXMhPT11bmRlZmluZWQpe3ZhciBzaGFwZXM9cGFyYW1ldGVycy5zaGFwZXM7aWYoQXJyYXkuaXNBcnJheShzaGFwZXMpKXtmb3IodmFyIGk9MCxsPXNoYXBlcy5sZW5ndGg7aTxsO2krKyl7dmFyIHNoYXBlPXNoYXBlc1tpXTtzZXJpYWxpemUobWV0YS5zaGFwZXMsc2hhcGUpO319ZWxzZXtzZXJpYWxpemUobWV0YS5zaGFwZXMsc2hhcGVzKTt9fX1pZih0aGlzLm1hdGVyaWFsIT09dW5kZWZpbmVkKXtpZihBcnJheS5pc0FycmF5KHRoaXMubWF0ZXJpYWwpKXt2YXIgdXVpZHM9W107Zm9yKHZhciBpPTAsbD10aGlzLm1hdGVyaWFsLmxlbmd0aDtpPGw7aSsrKXt1dWlkcy5wdXNoKHNlcmlhbGl6ZShtZXRhLm1hdGVyaWFscyx0aGlzLm1hdGVyaWFsW2ldKSk7fW9iamVjdC5tYXRlcmlhbD11dWlkczt9ZWxzZXtvYmplY3QubWF0ZXJpYWw9c2VyaWFsaXplKG1ldGEubWF0ZXJpYWxzLHRoaXMubWF0ZXJpYWwpO319Ly8KaWYodGhpcy5jaGlsZHJlbi5sZW5ndGg+MCl7b2JqZWN0LmNoaWxkcmVuPVtdO2Zvcih2YXIgaT0wO2k8dGhpcy5jaGlsZHJlbi5sZW5ndGg7aSsrKXtvYmplY3QuY2hpbGRyZW4ucHVzaCh0aGlzLmNoaWxkcmVuW2ldLnRvSlNPTihtZXRhKS5vYmplY3QpO319aWYoaXNSb290T2JqZWN0KXt2YXIgZ2VvbWV0cmllcz1leHRyYWN0RnJvbUNhY2hlKG1ldGEuZ2VvbWV0cmllcyk7dmFyIG1hdGVyaWFscz1leHRyYWN0RnJvbUNhY2hlKG1ldGEubWF0ZXJpYWxzKTt2YXIgdGV4dHVyZXM9ZXh0cmFjdEZyb21DYWNoZShtZXRhLnRleHR1cmVzKTt2YXIgaW1hZ2VzPWV4dHJhY3RGcm9tQ2FjaGUobWV0YS5pbWFnZXMpO3ZhciBzaGFwZXM9ZXh0cmFjdEZyb21DYWNoZShtZXRhLnNoYXBlcyk7aWYoZ2VvbWV0cmllcy5sZW5ndGg+MClvdXRwdXQuZ2VvbWV0cmllcz1nZW9tZXRyaWVzO2lmKG1hdGVyaWFscy5sZW5ndGg+MClvdXRwdXQubWF0ZXJpYWxzPW1hdGVyaWFscztpZih0ZXh0dXJlcy5sZW5ndGg+MClvdXRwdXQudGV4dHVyZXM9dGV4dHVyZXM7aWYoaW1hZ2VzLmxlbmd0aD4wKW91dHB1dC5pbWFnZXM9aW1hZ2VzO2lmKHNoYXBlcy5sZW5ndGg+MClvdXRwdXQuc2hhcGVzPXNoYXBlczt9b3V0cHV0Lm9iamVjdD1vYmplY3Q7cmV0dXJuIG91dHB1dDsvLyBleHRyYWN0IGRhdGEgZnJvbSB0aGUgY2FjaGUgaGFzaAovLyByZW1vdmUgbWV0YWRhdGEgb24gZWFjaCBpdGVtCi8vIGFuZCByZXR1cm4gYXMgYXJyYXkKZnVuY3Rpb24gZXh0cmFjdEZyb21DYWNoZShjYWNoZSl7dmFyIHZhbHVlcz1bXTtmb3IodmFyIGtleSBpbiBjYWNoZSl7dmFyIGRhdGE9Y2FjaGVba2V5XTtkZWxldGUgZGF0YS5tZXRhZGF0YTt2YWx1ZXMucHVzaChkYXRhKTt9cmV0dXJuIHZhbHVlczt9fSxjbG9uZTpmdW5jdGlvbiBjbG9uZShyZWN1cnNpdmUpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3RvcigpLmNvcHkodGhpcyxyZWN1cnNpdmUpO30sY29weTpmdW5jdGlvbiBjb3B5KHNvdXJjZSxyZWN1cnNpdmUpe2lmKHJlY3Vyc2l2ZT09PXVuZGVmaW5lZClyZWN1cnNpdmU9dHJ1ZTt0aGlzLm5hbWU9c291cmNlLm5hbWU7dGhpcy51cC5jb3B5KHNvdXJjZS51cCk7dGhpcy5wb3NpdGlvbi5jb3B5KHNvdXJjZS5wb3NpdGlvbik7dGhpcy5xdWF0ZXJuaW9uLmNvcHkoc291cmNlLnF1YXRlcm5pb24pO3RoaXMuc2NhbGUuY29weShzb3VyY2Uuc2NhbGUpO3RoaXMubWF0cml4LmNvcHkoc291cmNlLm1hdHJpeCk7dGhpcy5tYXRyaXhXb3JsZC5jb3B5KHNvdXJjZS5tYXRyaXhXb3JsZCk7dGhpcy5tYXRyaXhBdXRvVXBkYXRlPXNvdXJjZS5tYXRyaXhBdXRvVXBkYXRlO3RoaXMubWF0cml4V29ybGROZWVkc1VwZGF0ZT1zb3VyY2UubWF0cml4V29ybGROZWVkc1VwZGF0ZTt0aGlzLmxheWVycy5tYXNrPXNvdXJjZS5sYXllcnMubWFzazt0aGlzLnZpc2libGU9c291cmNlLnZpc2libGU7dGhpcy5jYXN0U2hhZG93PXNvdXJjZS5jYXN0U2hhZG93O3RoaXMucmVjZWl2ZVNoYWRvdz1zb3VyY2UucmVjZWl2ZVNoYWRvdzt0aGlzLmZydXN0dW1DdWxsZWQ9c291cmNlLmZydXN0dW1DdWxsZWQ7dGhpcy5yZW5kZXJPcmRlcj1zb3VyY2UucmVuZGVyT3JkZXI7dGhpcy51c2VyRGF0YT1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHNvdXJjZS51c2VyRGF0YSkpO2lmKHJlY3Vyc2l2ZT09PXRydWUpe2Zvcih2YXIgaT0wO2k8c291cmNlLmNoaWxkcmVuLmxlbmd0aDtpKyspe3ZhciBjaGlsZD1zb3VyY2UuY2hpbGRyZW5baV07dGhpcy5hZGQoY2hpbGQuY2xvbmUoKSk7fX1yZXR1cm4gdGhpczt9fSk7LyoqCiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vCiAqIEBhdXRob3IgbWlrYWVsIGVtdGluZ2VyIC8gaHR0cDovL2dvbW8uc2UvCiAqIEBhdXRob3IgV2VzdExhbmdsZXkgLyBodHRwOi8vZ2l0aHViLmNvbS9XZXN0TGFuZ2xleQoqL2Z1bmN0aW9uIENhbWVyYSgpe09iamVjdDNELmNhbGwodGhpcyk7dGhpcy50eXBlPSdDYW1lcmEnO3RoaXMubWF0cml4V29ybGRJbnZlcnNlPW5ldyBNYXRyaXg0KCk7dGhpcy5wcm9qZWN0aW9uTWF0cml4PW5ldyBNYXRyaXg0KCk7fUNhbWVyYS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKE9iamVjdDNELnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOkNhbWVyYSxpc0NhbWVyYTp0cnVlLGNvcHk6ZnVuY3Rpb24gY29weShzb3VyY2UscmVjdXJzaXZlKXtPYmplY3QzRC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsc291cmNlLHJlY3Vyc2l2ZSk7dGhpcy5tYXRyaXhXb3JsZEludmVyc2UuY29weShzb3VyY2UubWF0cml4V29ybGRJbnZlcnNlKTt0aGlzLnByb2plY3Rpb25NYXRyaXguY29weShzb3VyY2UucHJvamVjdGlvbk1hdHJpeCk7cmV0dXJuIHRoaXM7fSxnZXRXb3JsZERpcmVjdGlvbjpmdW5jdGlvbigpe3ZhciBxdWF0ZXJuaW9uPW5ldyBRdWF0ZXJuaW9uKCk7cmV0dXJuIGZ1bmN0aW9uIGdldFdvcmxkRGlyZWN0aW9uKG9wdGlvbmFsVGFyZ2V0KXt2YXIgcmVzdWx0PW9wdGlvbmFsVGFyZ2V0fHxuZXcgVmVjdG9yMygpO3RoaXMuZ2V0V29ybGRRdWF0ZXJuaW9uKHF1YXRlcm5pb24pO3JldHVybiByZXN1bHQuc2V0KDAsMCwtMSkuYXBwbHlRdWF0ZXJuaW9uKHF1YXRlcm5pb24pO307fSgpLHVwZGF0ZU1hdHJpeFdvcmxkOmZ1bmN0aW9uIHVwZGF0ZU1hdHJpeFdvcmxkKGZvcmNlKXtPYmplY3QzRC5wcm90b3R5cGUudXBkYXRlTWF0cml4V29ybGQuY2FsbCh0aGlzLGZvcmNlKTt0aGlzLm1hdHJpeFdvcmxkSW52ZXJzZS5nZXRJbnZlcnNlKHRoaXMubWF0cml4V29ybGQpO30sY2xvbmU6ZnVuY3Rpb24gY2xvbmUoKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IoKS5jb3B5KHRoaXMpO319KTsvKioKICogQGF1dGhvciBhbHRlcmVkcSAvIGh0dHA6Ly9hbHRlcmVkcXVhbGlhLmNvbS8KICogQGF1dGhvciBhcm9zZSAvIGh0dHA6Ly9naXRodWIuY29tL2Fyb3NlCiAqL2Z1bmN0aW9uIE9ydGhvZ3JhcGhpY0NhbWVyYShsZWZ0LHJpZ2h0LHRvcCxib3R0b20sbmVhcixmYXIpe0NhbWVyYS5jYWxsKHRoaXMpO3RoaXMudHlwZT0nT3J0aG9ncmFwaGljQ2FtZXJhJzt0aGlzLnpvb209MTt0aGlzLnZpZXc9bnVsbDt0aGlzLmxlZnQ9bGVmdDt0aGlzLnJpZ2h0PXJpZ2h0O3RoaXMudG9wPXRvcDt0aGlzLmJvdHRvbT1ib3R0b207dGhpcy5uZWFyPW5lYXIhPT11bmRlZmluZWQ/bmVhcjowLjE7dGhpcy5mYXI9ZmFyIT09dW5kZWZpbmVkP2ZhcjoyMDAwO3RoaXMudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO31PcnRob2dyYXBoaWNDYW1lcmEucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShDYW1lcmEucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6T3J0aG9ncmFwaGljQ2FtZXJhLGlzT3J0aG9ncmFwaGljQ2FtZXJhOnRydWUsY29weTpmdW5jdGlvbiBjb3B5KHNvdXJjZSxyZWN1cnNpdmUpe0NhbWVyYS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsc291cmNlLHJlY3Vyc2l2ZSk7dGhpcy5sZWZ0PXNvdXJjZS5sZWZ0O3RoaXMucmlnaHQ9c291cmNlLnJpZ2h0O3RoaXMudG9wPXNvdXJjZS50b3A7dGhpcy5ib3R0b209c291cmNlLmJvdHRvbTt0aGlzLm5lYXI9c291cmNlLm5lYXI7dGhpcy5mYXI9c291cmNlLmZhcjt0aGlzLnpvb209c291cmNlLnpvb207dGhpcy52aWV3PXNvdXJjZS52aWV3PT09bnVsbD9udWxsOk9iamVjdC5hc3NpZ24oe30sc291cmNlLnZpZXcpO3JldHVybiB0aGlzO30sc2V0Vmlld09mZnNldDpmdW5jdGlvbiBzZXRWaWV3T2Zmc2V0KGZ1bGxXaWR0aCxmdWxsSGVpZ2h0LHgseSx3aWR0aCxoZWlnaHQpe2lmKHRoaXMudmlldz09PW51bGwpe3RoaXMudmlldz17ZW5hYmxlZDp0cnVlLGZ1bGxXaWR0aDoxLGZ1bGxIZWlnaHQ6MSxvZmZzZXRYOjAsb2Zmc2V0WTowLHdpZHRoOjEsaGVpZ2h0OjF9O310aGlzLnZpZXcuZW5hYmxlZD10cnVlO3RoaXMudmlldy5mdWxsV2lkdGg9ZnVsbFdpZHRoO3RoaXMudmlldy5mdWxsSGVpZ2h0PWZ1bGxIZWlnaHQ7dGhpcy52aWV3Lm9mZnNldFg9eDt0aGlzLnZpZXcub2Zmc2V0WT15O3RoaXMudmlldy53aWR0aD13aWR0aDt0aGlzLnZpZXcuaGVpZ2h0PWhlaWdodDt0aGlzLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTt9LGNsZWFyVmlld09mZnNldDpmdW5jdGlvbiBjbGVhclZpZXdPZmZzZXQoKXtpZih0aGlzLnZpZXchPT1udWxsKXt0aGlzLnZpZXcuZW5hYmxlZD1mYWxzZTt9dGhpcy51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7fSx1cGRhdGVQcm9qZWN0aW9uTWF0cml4OmZ1bmN0aW9uIHVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKXt2YXIgZHg9KHRoaXMucmlnaHQtdGhpcy5sZWZ0KS8oMip0aGlzLnpvb20pO3ZhciBkeT0odGhpcy50b3AtdGhpcy5ib3R0b20pLygyKnRoaXMuem9vbSk7dmFyIGN4PSh0aGlzLnJpZ2h0K3RoaXMubGVmdCkvMjt2YXIgY3k9KHRoaXMudG9wK3RoaXMuYm90dG9tKS8yO3ZhciBsZWZ0PWN4LWR4O3ZhciByaWdodD1jeCtkeDt2YXIgdG9wPWN5K2R5O3ZhciBib3R0b209Y3ktZHk7aWYodGhpcy52aWV3IT09bnVsbCYmdGhpcy52aWV3LmVuYWJsZWQpe3ZhciB6b29tVz10aGlzLnpvb20vKHRoaXMudmlldy53aWR0aC90aGlzLnZpZXcuZnVsbFdpZHRoKTt2YXIgem9vbUg9dGhpcy56b29tLyh0aGlzLnZpZXcuaGVpZ2h0L3RoaXMudmlldy5mdWxsSGVpZ2h0KTt2YXIgc2NhbGVXPSh0aGlzLnJpZ2h0LXRoaXMubGVmdCkvdGhpcy52aWV3LndpZHRoO3ZhciBzY2FsZUg9KHRoaXMudG9wLXRoaXMuYm90dG9tKS90aGlzLnZpZXcuaGVpZ2h0O2xlZnQrPXNjYWxlVyoodGhpcy52aWV3Lm9mZnNldFgvem9vbVcpO3JpZ2h0PWxlZnQrc2NhbGVXKih0aGlzLnZpZXcud2lkdGgvem9vbVcpO3RvcC09c2NhbGVIKih0aGlzLnZpZXcub2Zmc2V0WS96b29tSCk7Ym90dG9tPXRvcC1zY2FsZUgqKHRoaXMudmlldy5oZWlnaHQvem9vbUgpO310aGlzLnByb2plY3Rpb25NYXRyaXgubWFrZU9ydGhvZ3JhcGhpYyhsZWZ0LHJpZ2h0LHRvcCxib3R0b20sdGhpcy5uZWFyLHRoaXMuZmFyKTt9LHRvSlNPTjpmdW5jdGlvbiB0b0pTT04obWV0YSl7dmFyIGRhdGE9T2JqZWN0M0QucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMsbWV0YSk7ZGF0YS5vYmplY3Quem9vbT10aGlzLnpvb207ZGF0YS5vYmplY3QubGVmdD10aGlzLmxlZnQ7ZGF0YS5vYmplY3QucmlnaHQ9dGhpcy5yaWdodDtkYXRhLm9iamVjdC50b3A9dGhpcy50b3A7ZGF0YS5vYmplY3QuYm90dG9tPXRoaXMuYm90dG9tO2RhdGEub2JqZWN0Lm5lYXI9dGhpcy5uZWFyO2RhdGEub2JqZWN0LmZhcj10aGlzLmZhcjtpZih0aGlzLnZpZXchPT1udWxsKWRhdGEub2JqZWN0LnZpZXc9T2JqZWN0LmFzc2lnbih7fSx0aGlzLnZpZXcpO3JldHVybiBkYXRhO319KTsvKioKICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS8KICogQGF1dGhvciBhbHRlcmVkcSAvIGh0dHA6Ly9hbHRlcmVkcXVhbGlhLmNvbS8KICovZnVuY3Rpb24gRmFjZTMoYSxiLGMsbm9ybWFsLGNvbG9yLG1hdGVyaWFsSW5kZXgpe3RoaXMuYT1hO3RoaXMuYj1iO3RoaXMuYz1jO3RoaXMubm9ybWFsPW5vcm1hbCYmbm9ybWFsLmlzVmVjdG9yMz9ub3JtYWw6bmV3IFZlY3RvcjMoKTt0aGlzLnZlcnRleE5vcm1hbHM9QXJyYXkuaXNBcnJheShub3JtYWwpP25vcm1hbDpbXTt0aGlzLmNvbG9yPWNvbG9yJiZjb2xvci5pc0NvbG9yP2NvbG9yOm5ldyBDb2xvcigpO3RoaXMudmVydGV4Q29sb3JzPUFycmF5LmlzQXJyYXkoY29sb3IpP2NvbG9yOltdO3RoaXMubWF0ZXJpYWxJbmRleD1tYXRlcmlhbEluZGV4IT09dW5kZWZpbmVkP21hdGVyaWFsSW5kZXg6MDt9T2JqZWN0LmFzc2lnbihGYWNlMy5wcm90b3R5cGUse2Nsb25lOmZ1bmN0aW9uIGNsb25lKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKCkuY29weSh0aGlzKTt9LGNvcHk6ZnVuY3Rpb24gY29weShzb3VyY2Upe3RoaXMuYT1zb3VyY2UuYTt0aGlzLmI9c291cmNlLmI7dGhpcy5jPXNvdXJjZS5jO3RoaXMubm9ybWFsLmNvcHkoc291cmNlLm5vcm1hbCk7dGhpcy5jb2xvci5jb3B5KHNvdXJjZS5jb2xvcik7dGhpcy5tYXRlcmlhbEluZGV4PXNvdXJjZS5tYXRlcmlhbEluZGV4O2Zvcih2YXIgaT0wLGlsPXNvdXJjZS52ZXJ0ZXhOb3JtYWxzLmxlbmd0aDtpPGlsO2krKyl7dGhpcy52ZXJ0ZXhOb3JtYWxzW2ldPXNvdXJjZS52ZXJ0ZXhOb3JtYWxzW2ldLmNsb25lKCk7fWZvcih2YXIgaT0wLGlsPXNvdXJjZS52ZXJ0ZXhDb2xvcnMubGVuZ3RoO2k8aWw7aSsrKXt0aGlzLnZlcnRleENvbG9yc1tpXT1zb3VyY2UudmVydGV4Q29sb3JzW2ldLmNsb25lKCk7fXJldHVybiB0aGlzO319KTsvKioKICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS8KICogQGF1dGhvciBraWxlIC8gaHR0cDovL2tpbGUuc3RyYXZhZ2FuemEub3JnLwogKiBAYXV0aG9yIGFsdGVyZWRxIC8gaHR0cDovL2FsdGVyZWRxdWFsaWEuY29tLwogKiBAYXV0aG9yIG1pa2FlbCBlbXRpbmdlciAvIGh0dHA6Ly9nb21vLnNlLwogKiBAYXV0aG9yIHp6ODUgLyBodHRwOi8vd3d3LmxhYjRnYW1lcy5uZXQveno4NS9ibG9nCiAqIEBhdXRob3IgYmhvdXN0b24gLyBodHRwOi8vY2xhcmEuaW8KICovdmFyIGdlb21ldHJ5SWQ9MDsvLyBHZW9tZXRyeSB1c2VzIGV2ZW4gbnVtYmVycyBhcyBJZApmdW5jdGlvbiBHZW9tZXRyeSgpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCdpZCcse3ZhbHVlOmdlb21ldHJ5SWQrPTJ9KTt0aGlzLnV1aWQ9X01hdGguZ2VuZXJhdGVVVUlEKCk7dGhpcy5uYW1lPScnO3RoaXMudHlwZT0nR2VvbWV0cnknO3RoaXMudmVydGljZXM9W107dGhpcy5jb2xvcnM9W107dGhpcy5mYWNlcz1bXTt0aGlzLmZhY2VWZXJ0ZXhVdnM9W1tdXTt0aGlzLm1vcnBoVGFyZ2V0cz1bXTt0aGlzLm1vcnBoTm9ybWFscz1bXTt0aGlzLnNraW5XZWlnaHRzPVtdO3RoaXMuc2tpbkluZGljZXM9W107dGhpcy5saW5lRGlzdGFuY2VzPVtdO3RoaXMuYm91bmRpbmdCb3g9bnVsbDt0aGlzLmJvdW5kaW5nU3BoZXJlPW51bGw7Ly8gdXBkYXRlIGZsYWdzCnRoaXMuZWxlbWVudHNOZWVkVXBkYXRlPWZhbHNlO3RoaXMudmVydGljZXNOZWVkVXBkYXRlPWZhbHNlO3RoaXMudXZzTmVlZFVwZGF0ZT1mYWxzZTt0aGlzLm5vcm1hbHNOZWVkVXBkYXRlPWZhbHNlO3RoaXMuY29sb3JzTmVlZFVwZGF0ZT1mYWxzZTt0aGlzLmxpbmVEaXN0YW5jZXNOZWVkVXBkYXRlPWZhbHNlO3RoaXMuZ3JvdXBzTmVlZFVwZGF0ZT1mYWxzZTt9R2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShFdmVudERpc3BhdGNoZXIucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6R2VvbWV0cnksaXNHZW9tZXRyeTp0cnVlLGFwcGx5TWF0cml4OmZ1bmN0aW9uIGFwcGx5TWF0cml4KG1hdHJpeCl7dmFyIG5vcm1hbE1hdHJpeD1uZXcgTWF0cml4MygpLmdldE5vcm1hbE1hdHJpeChtYXRyaXgpO2Zvcih2YXIgaT0wLGlsPXRoaXMudmVydGljZXMubGVuZ3RoO2k8aWw7aSsrKXt2YXIgdmVydGV4PXRoaXMudmVydGljZXNbaV07dmVydGV4LmFwcGx5TWF0cml4NChtYXRyaXgpO31mb3IodmFyIGk9MCxpbD10aGlzLmZhY2VzLmxlbmd0aDtpPGlsO2krKyl7dmFyIGZhY2U9dGhpcy5mYWNlc1tpXTtmYWNlLm5vcm1hbC5hcHBseU1hdHJpeDMobm9ybWFsTWF0cml4KS5ub3JtYWxpemUoKTtmb3IodmFyIGo9MCxqbD1mYWNlLnZlcnRleE5vcm1hbHMubGVuZ3RoO2o8amw7aisrKXtmYWNlLnZlcnRleE5vcm1hbHNbal0uYXBwbHlNYXRyaXgzKG5vcm1hbE1hdHJpeCkubm9ybWFsaXplKCk7fX1pZih0aGlzLmJvdW5kaW5nQm94IT09bnVsbCl7dGhpcy5jb21wdXRlQm91bmRpbmdCb3goKTt9aWYodGhpcy5ib3VuZGluZ1NwaGVyZSE9PW51bGwpe3RoaXMuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCk7fXRoaXMudmVydGljZXNOZWVkVXBkYXRlPXRydWU7dGhpcy5ub3JtYWxzTmVlZFVwZGF0ZT10cnVlO3JldHVybiB0aGlzO30scm90YXRlWDpmdW5jdGlvbigpey8vIHJvdGF0ZSBnZW9tZXRyeSBhcm91bmQgd29ybGQgeC1heGlzCnZhciBtMT1uZXcgTWF0cml4NCgpO3JldHVybiBmdW5jdGlvbiByb3RhdGVYKGFuZ2xlKXttMS5tYWtlUm90YXRpb25YKGFuZ2xlKTt0aGlzLmFwcGx5TWF0cml4KG0xKTtyZXR1cm4gdGhpczt9O30oKSxyb3RhdGVZOmZ1bmN0aW9uKCl7Ly8gcm90YXRlIGdlb21ldHJ5IGFyb3VuZCB3b3JsZCB5LWF4aXMKdmFyIG0xPW5ldyBNYXRyaXg0KCk7cmV0dXJuIGZ1bmN0aW9uIHJvdGF0ZVkoYW5nbGUpe20xLm1ha2VSb3RhdGlvblkoYW5nbGUpO3RoaXMuYXBwbHlNYXRyaXgobTEpO3JldHVybiB0aGlzO307fSgpLHJvdGF0ZVo6ZnVuY3Rpb24oKXsvLyByb3RhdGUgZ2VvbWV0cnkgYXJvdW5kIHdvcmxkIHotYXhpcwp2YXIgbTE9bmV3IE1hdHJpeDQoKTtyZXR1cm4gZnVuY3Rpb24gcm90YXRlWihhbmdsZSl7bTEubWFrZVJvdGF0aW9uWihhbmdsZSk7dGhpcy5hcHBseU1hdHJpeChtMSk7cmV0dXJuIHRoaXM7fTt9KCksdHJhbnNsYXRlOmZ1bmN0aW9uKCl7Ly8gdHJhbnNsYXRlIGdlb21ldHJ5CnZhciBtMT1uZXcgTWF0cml4NCgpO3JldHVybiBmdW5jdGlvbiB0cmFuc2xhdGUoeCx5LHope20xLm1ha2VUcmFuc2xhdGlvbih4LHkseik7dGhpcy5hcHBseU1hdHJpeChtMSk7cmV0dXJuIHRoaXM7fTt9KCksc2NhbGU6ZnVuY3Rpb24oKXsvLyBzY2FsZSBnZW9tZXRyeQp2YXIgbTE9bmV3IE1hdHJpeDQoKTtyZXR1cm4gZnVuY3Rpb24gc2NhbGUoeCx5LHope20xLm1ha2VTY2FsZSh4LHkseik7dGhpcy5hcHBseU1hdHJpeChtMSk7cmV0dXJuIHRoaXM7fTt9KCksbG9va0F0OmZ1bmN0aW9uKCl7dmFyIG9iaj1uZXcgT2JqZWN0M0QoKTtyZXR1cm4gZnVuY3Rpb24gbG9va0F0KHZlY3Rvcil7b2JqLmxvb2tBdCh2ZWN0b3IpO29iai51cGRhdGVNYXRyaXgoKTt0aGlzLmFwcGx5TWF0cml4KG9iai5tYXRyaXgpO307fSgpLGZyb21CdWZmZXJHZW9tZXRyeTpmdW5jdGlvbiBmcm9tQnVmZmVyR2VvbWV0cnkoZ2VvbWV0cnkpe3ZhciBzY29wZT10aGlzO3ZhciBpbmRpY2VzPWdlb21ldHJ5LmluZGV4IT09bnVsbD9nZW9tZXRyeS5pbmRleC5hcnJheTp1bmRlZmluZWQ7dmFyIGF0dHJpYnV0ZXM9Z2VvbWV0cnkuYXR0cmlidXRlczt2YXIgcG9zaXRpb25zPWF0dHJpYnV0ZXMucG9zaXRpb24uYXJyYXk7dmFyIG5vcm1hbHM9YXR0cmlidXRlcy5ub3JtYWwhPT11bmRlZmluZWQ/YXR0cmlidXRlcy5ub3JtYWwuYXJyYXk6dW5kZWZpbmVkO3ZhciBjb2xvcnM9YXR0cmlidXRlcy5jb2xvciE9PXVuZGVmaW5lZD9hdHRyaWJ1dGVzLmNvbG9yLmFycmF5OnVuZGVmaW5lZDt2YXIgdXZzPWF0dHJpYnV0ZXMudXYhPT11bmRlZmluZWQ/YXR0cmlidXRlcy51di5hcnJheTp1bmRlZmluZWQ7dmFyIHV2czI9YXR0cmlidXRlcy51djIhPT11bmRlZmluZWQ/YXR0cmlidXRlcy51djIuYXJyYXk6dW5kZWZpbmVkO2lmKHV2czIhPT11bmRlZmluZWQpdGhpcy5mYWNlVmVydGV4VXZzWzFdPVtdO3ZhciB0ZW1wTm9ybWFscz1bXTt2YXIgdGVtcFVWcz1bXTt2YXIgdGVtcFVWczI9W107Zm9yKHZhciBpPTAsaj0wO2k8cG9zaXRpb25zLmxlbmd0aDtpKz0zLGorPTIpe3Njb3BlLnZlcnRpY2VzLnB1c2gobmV3IFZlY3RvcjMocG9zaXRpb25zW2ldLHBvc2l0aW9uc1tpKzFdLHBvc2l0aW9uc1tpKzJdKSk7aWYobm9ybWFscyE9PXVuZGVmaW5lZCl7dGVtcE5vcm1hbHMucHVzaChuZXcgVmVjdG9yMyhub3JtYWxzW2ldLG5vcm1hbHNbaSsxXSxub3JtYWxzW2krMl0pKTt9aWYoY29sb3JzIT09dW5kZWZpbmVkKXtzY29wZS5jb2xvcnMucHVzaChuZXcgQ29sb3IoY29sb3JzW2ldLGNvbG9yc1tpKzFdLGNvbG9yc1tpKzJdKSk7fWlmKHV2cyE9PXVuZGVmaW5lZCl7dGVtcFVWcy5wdXNoKG5ldyBWZWN0b3IyKHV2c1tqXSx1dnNbaisxXSkpO31pZih1dnMyIT09dW5kZWZpbmVkKXt0ZW1wVVZzMi5wdXNoKG5ldyBWZWN0b3IyKHV2czJbal0sdXZzMltqKzFdKSk7fX1mdW5jdGlvbiBhZGRGYWNlKGEsYixjLG1hdGVyaWFsSW5kZXgpe3ZhciB2ZXJ0ZXhOb3JtYWxzPW5vcm1hbHMhPT11bmRlZmluZWQ/W3RlbXBOb3JtYWxzW2FdLmNsb25lKCksdGVtcE5vcm1hbHNbYl0uY2xvbmUoKSx0ZW1wTm9ybWFsc1tjXS5jbG9uZSgpXTpbXTt2YXIgdmVydGV4Q29sb3JzPWNvbG9ycyE9PXVuZGVmaW5lZD9bc2NvcGUuY29sb3JzW2FdLmNsb25lKCksc2NvcGUuY29sb3JzW2JdLmNsb25lKCksc2NvcGUuY29sb3JzW2NdLmNsb25lKCldOltdO3ZhciBmYWNlPW5ldyBGYWNlMyhhLGIsYyx2ZXJ0ZXhOb3JtYWxzLHZlcnRleENvbG9ycyxtYXRlcmlhbEluZGV4KTtzY29wZS5mYWNlcy5wdXNoKGZhY2UpO2lmKHV2cyE9PXVuZGVmaW5lZCl7c2NvcGUuZmFjZVZlcnRleFV2c1swXS5wdXNoKFt0ZW1wVVZzW2FdLmNsb25lKCksdGVtcFVWc1tiXS5jbG9uZSgpLHRlbXBVVnNbY10uY2xvbmUoKV0pO31pZih1dnMyIT09dW5kZWZpbmVkKXtzY29wZS5mYWNlVmVydGV4VXZzWzFdLnB1c2goW3RlbXBVVnMyW2FdLmNsb25lKCksdGVtcFVWczJbYl0uY2xvbmUoKSx0ZW1wVVZzMltjXS5jbG9uZSgpXSk7fX12YXIgZ3JvdXBzPWdlb21ldHJ5Lmdyb3VwcztpZihncm91cHMubGVuZ3RoPjApe2Zvcih2YXIgaT0wO2k8Z3JvdXBzLmxlbmd0aDtpKyspe3ZhciBncm91cD1ncm91cHNbaV07dmFyIHN0YXJ0PWdyb3VwLnN0YXJ0O3ZhciBjb3VudD1ncm91cC5jb3VudDtmb3IodmFyIGo9c3RhcnQsamw9c3RhcnQrY291bnQ7ajxqbDtqKz0zKXtpZihpbmRpY2VzIT09dW5kZWZpbmVkKXthZGRGYWNlKGluZGljZXNbal0saW5kaWNlc1tqKzFdLGluZGljZXNbaisyXSxncm91cC5tYXRlcmlhbEluZGV4KTt9ZWxzZXthZGRGYWNlKGosaisxLGorMixncm91cC5tYXRlcmlhbEluZGV4KTt9fX19ZWxzZXtpZihpbmRpY2VzIT09dW5kZWZpbmVkKXtmb3IodmFyIGk9MDtpPGluZGljZXMubGVuZ3RoO2krPTMpe2FkZEZhY2UoaW5kaWNlc1tpXSxpbmRpY2VzW2krMV0saW5kaWNlc1tpKzJdKTt9fWVsc2V7Zm9yKHZhciBpPTA7aTxwb3NpdGlvbnMubGVuZ3RoLzM7aSs9Myl7YWRkRmFjZShpLGkrMSxpKzIpO319fXRoaXMuY29tcHV0ZUZhY2VOb3JtYWxzKCk7aWYoZ2VvbWV0cnkuYm91bmRpbmdCb3ghPT1udWxsKXt0aGlzLmJvdW5kaW5nQm94PWdlb21ldHJ5LmJvdW5kaW5nQm94LmNsb25lKCk7fWlmKGdlb21ldHJ5LmJvdW5kaW5nU3BoZXJlIT09bnVsbCl7dGhpcy5ib3VuZGluZ1NwaGVyZT1nZW9tZXRyeS5ib3VuZGluZ1NwaGVyZS5jbG9uZSgpO31yZXR1cm4gdGhpczt9LGNlbnRlcjpmdW5jdGlvbiBjZW50ZXIoKXt0aGlzLmNvbXB1dGVCb3VuZGluZ0JveCgpO3ZhciBvZmZzZXQ9dGhpcy5ib3VuZGluZ0JveC5nZXRDZW50ZXIoKS5uZWdhdGUoKTt0aGlzLnRyYW5zbGF0ZShvZmZzZXQueCxvZmZzZXQueSxvZmZzZXQueik7cmV0dXJuIG9mZnNldDt9LG5vcm1hbGl6ZTpmdW5jdGlvbiBub3JtYWxpemUoKXt0aGlzLmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpO3ZhciBjZW50ZXI9dGhpcy5ib3VuZGluZ1NwaGVyZS5jZW50ZXI7dmFyIHJhZGl1cz10aGlzLmJvdW5kaW5nU3BoZXJlLnJhZGl1czt2YXIgcz1yYWRpdXM9PT0wPzE6MS4wL3JhZGl1czt2YXIgbWF0cml4PW5ldyBNYXRyaXg0KCk7bWF0cml4LnNldChzLDAsMCwtcypjZW50ZXIueCwwLHMsMCwtcypjZW50ZXIueSwwLDAscywtcypjZW50ZXIueiwwLDAsMCwxKTt0aGlzLmFwcGx5TWF0cml4KG1hdHJpeCk7cmV0dXJuIHRoaXM7fSxjb21wdXRlRmFjZU5vcm1hbHM6ZnVuY3Rpb24gY29tcHV0ZUZhY2VOb3JtYWxzKCl7dmFyIGNiPW5ldyBWZWN0b3IzKCksYWI9bmV3IFZlY3RvcjMoKTtmb3IodmFyIGY9MCxmbD10aGlzLmZhY2VzLmxlbmd0aDtmPGZsO2YrKyl7dmFyIGZhY2U9dGhpcy5mYWNlc1tmXTt2YXIgdkE9dGhpcy52ZXJ0aWNlc1tmYWNlLmFdO3ZhciB2Qj10aGlzLnZlcnRpY2VzW2ZhY2UuYl07dmFyIHZDPXRoaXMudmVydGljZXNbZmFjZS5jXTtjYi5zdWJWZWN0b3JzKHZDLHZCKTthYi5zdWJWZWN0b3JzKHZBLHZCKTtjYi5jcm9zcyhhYik7Y2Iubm9ybWFsaXplKCk7ZmFjZS5ub3JtYWwuY29weShjYik7fX0sY29tcHV0ZVZlcnRleE5vcm1hbHM6ZnVuY3Rpb24gY29tcHV0ZVZlcnRleE5vcm1hbHMoYXJlYVdlaWdodGVkKXtpZihhcmVhV2VpZ2h0ZWQ9PT11bmRlZmluZWQpYXJlYVdlaWdodGVkPXRydWU7dmFyIHYsdmwsZixmbCxmYWNlLHZlcnRpY2VzO3ZlcnRpY2VzPW5ldyBBcnJheSh0aGlzLnZlcnRpY2VzLmxlbmd0aCk7Zm9yKHY9MCx2bD10aGlzLnZlcnRpY2VzLmxlbmd0aDt2PHZsO3YrKyl7dmVydGljZXNbdl09bmV3IFZlY3RvcjMoKTt9aWYoYXJlYVdlaWdodGVkKXsvLyB2ZXJ0ZXggbm9ybWFscyB3ZWlnaHRlZCBieSB0cmlhbmdsZSBhcmVhcwovLyBodHRwOi8vd3d3LmlxdWlsZXpsZXMub3JnL3d3dy9hcnRpY2xlcy9ub3JtYWxzL25vcm1hbHMuaHRtCnZhciB2QSx2Qix2Qzt2YXIgY2I9bmV3IFZlY3RvcjMoKSxhYj1uZXcgVmVjdG9yMygpO2ZvcihmPTAsZmw9dGhpcy5mYWNlcy5sZW5ndGg7ZjxmbDtmKyspe2ZhY2U9dGhpcy5mYWNlc1tmXTt2QT10aGlzLnZlcnRpY2VzW2ZhY2UuYV07dkI9dGhpcy52ZXJ0aWNlc1tmYWNlLmJdO3ZDPXRoaXMudmVydGljZXNbZmFjZS5jXTtjYi5zdWJWZWN0b3JzKHZDLHZCKTthYi5zdWJWZWN0b3JzKHZBLHZCKTtjYi5jcm9zcyhhYik7dmVydGljZXNbZmFjZS5hXS5hZGQoY2IpO3ZlcnRpY2VzW2ZhY2UuYl0uYWRkKGNiKTt2ZXJ0aWNlc1tmYWNlLmNdLmFkZChjYik7fX1lbHNle3RoaXMuY29tcHV0ZUZhY2VOb3JtYWxzKCk7Zm9yKGY9MCxmbD10aGlzLmZhY2VzLmxlbmd0aDtmPGZsO2YrKyl7ZmFjZT10aGlzLmZhY2VzW2ZdO3ZlcnRpY2VzW2ZhY2UuYV0uYWRkKGZhY2Uubm9ybWFsKTt2ZXJ0aWNlc1tmYWNlLmJdLmFkZChmYWNlLm5vcm1hbCk7dmVydGljZXNbZmFjZS5jXS5hZGQoZmFjZS5ub3JtYWwpO319Zm9yKHY9MCx2bD10aGlzLnZlcnRpY2VzLmxlbmd0aDt2PHZsO3YrKyl7dmVydGljZXNbdl0ubm9ybWFsaXplKCk7fWZvcihmPTAsZmw9dGhpcy5mYWNlcy5sZW5ndGg7ZjxmbDtmKyspe2ZhY2U9dGhpcy5mYWNlc1tmXTt2YXIgdmVydGV4Tm9ybWFscz1mYWNlLnZlcnRleE5vcm1hbHM7aWYodmVydGV4Tm9ybWFscy5sZW5ndGg9PT0zKXt2ZXJ0ZXhOb3JtYWxzWzBdLmNvcHkodmVydGljZXNbZmFjZS5hXSk7dmVydGV4Tm9ybWFsc1sxXS5jb3B5KHZlcnRpY2VzW2ZhY2UuYl0pO3ZlcnRleE5vcm1hbHNbMl0uY29weSh2ZXJ0aWNlc1tmYWNlLmNdKTt9ZWxzZXt2ZXJ0ZXhOb3JtYWxzWzBdPXZlcnRpY2VzW2ZhY2UuYV0uY2xvbmUoKTt2ZXJ0ZXhOb3JtYWxzWzFdPXZlcnRpY2VzW2ZhY2UuYl0uY2xvbmUoKTt2ZXJ0ZXhOb3JtYWxzWzJdPXZlcnRpY2VzW2ZhY2UuY10uY2xvbmUoKTt9fWlmKHRoaXMuZmFjZXMubGVuZ3RoPjApe3RoaXMubm9ybWFsc05lZWRVcGRhdGU9dHJ1ZTt9fSxjb21wdXRlRmxhdFZlcnRleE5vcm1hbHM6ZnVuY3Rpb24gY29tcHV0ZUZsYXRWZXJ0ZXhOb3JtYWxzKCl7dmFyIGYsZmwsZmFjZTt0aGlzLmNvbXB1dGVGYWNlTm9ybWFscygpO2ZvcihmPTAsZmw9dGhpcy5mYWNlcy5sZW5ndGg7ZjxmbDtmKyspe2ZhY2U9dGhpcy5mYWNlc1tmXTt2YXIgdmVydGV4Tm9ybWFscz1mYWNlLnZlcnRleE5vcm1hbHM7aWYodmVydGV4Tm9ybWFscy5sZW5ndGg9PT0zKXt2ZXJ0ZXhOb3JtYWxzWzBdLmNvcHkoZmFjZS5ub3JtYWwpO3ZlcnRleE5vcm1hbHNbMV0uY29weShmYWNlLm5vcm1hbCk7dmVydGV4Tm9ybWFsc1syXS5jb3B5KGZhY2Uubm9ybWFsKTt9ZWxzZXt2ZXJ0ZXhOb3JtYWxzWzBdPWZhY2Uubm9ybWFsLmNsb25lKCk7dmVydGV4Tm9ybWFsc1sxXT1mYWNlLm5vcm1hbC5jbG9uZSgpO3ZlcnRleE5vcm1hbHNbMl09ZmFjZS5ub3JtYWwuY2xvbmUoKTt9fWlmKHRoaXMuZmFjZXMubGVuZ3RoPjApe3RoaXMubm9ybWFsc05lZWRVcGRhdGU9dHJ1ZTt9fSxjb21wdXRlTW9ycGhOb3JtYWxzOmZ1bmN0aW9uIGNvbXB1dGVNb3JwaE5vcm1hbHMoKXt2YXIgaSxpbCxmLGZsLGZhY2U7Ly8gc2F2ZSBvcmlnaW5hbCBub3JtYWxzCi8vIC0gY3JlYXRlIHRlbXAgdmFyaWFibGVzIG9uIGZpcnN0IGFjY2VzcwovLyAgIG90aGVyd2lzZSBqdXN0IGNvcHkgKGZvciBmYXN0ZXIgcmVwZWF0ZWQgY2FsbHMpCmZvcihmPTAsZmw9dGhpcy5mYWNlcy5sZW5ndGg7ZjxmbDtmKyspe2ZhY2U9dGhpcy5mYWNlc1tmXTtpZighZmFjZS5fX29yaWdpbmFsRmFjZU5vcm1hbCl7ZmFjZS5fX29yaWdpbmFsRmFjZU5vcm1hbD1mYWNlLm5vcm1hbC5jbG9uZSgpO31lbHNle2ZhY2UuX19vcmlnaW5hbEZhY2VOb3JtYWwuY29weShmYWNlLm5vcm1hbCk7fWlmKCFmYWNlLl9fb3JpZ2luYWxWZXJ0ZXhOb3JtYWxzKWZhY2UuX19vcmlnaW5hbFZlcnRleE5vcm1hbHM9W107Zm9yKGk9MCxpbD1mYWNlLnZlcnRleE5vcm1hbHMubGVuZ3RoO2k8aWw7aSsrKXtpZighZmFjZS5fX29yaWdpbmFsVmVydGV4Tm9ybWFsc1tpXSl7ZmFjZS5fX29yaWdpbmFsVmVydGV4Tm9ybWFsc1tpXT1mYWNlLnZlcnRleE5vcm1hbHNbaV0uY2xvbmUoKTt9ZWxzZXtmYWNlLl9fb3JpZ2luYWxWZXJ0ZXhOb3JtYWxzW2ldLmNvcHkoZmFjZS52ZXJ0ZXhOb3JtYWxzW2ldKTt9fX0vLyB1c2UgdGVtcCBnZW9tZXRyeSB0byBjb21wdXRlIGZhY2UgYW5kIHZlcnRleCBub3JtYWxzIGZvciBlYWNoIG1vcnBoCnZhciB0bXBHZW89bmV3IEdlb21ldHJ5KCk7dG1wR2VvLmZhY2VzPXRoaXMuZmFjZXM7Zm9yKGk9MCxpbD10aGlzLm1vcnBoVGFyZ2V0cy5sZW5ndGg7aTxpbDtpKyspey8vIGNyZWF0ZSBvbiBmaXJzdCBhY2Nlc3MKaWYoIXRoaXMubW9ycGhOb3JtYWxzW2ldKXt0aGlzLm1vcnBoTm9ybWFsc1tpXT17fTt0aGlzLm1vcnBoTm9ybWFsc1tpXS5mYWNlTm9ybWFscz1bXTt0aGlzLm1vcnBoTm9ybWFsc1tpXS52ZXJ0ZXhOb3JtYWxzPVtdO3ZhciBkc3ROb3JtYWxzRmFjZT10aGlzLm1vcnBoTm9ybWFsc1tpXS5mYWNlTm9ybWFsczt2YXIgZHN0Tm9ybWFsc1ZlcnRleD10aGlzLm1vcnBoTm9ybWFsc1tpXS52ZXJ0ZXhOb3JtYWxzO3ZhciBmYWNlTm9ybWFsLHZlcnRleE5vcm1hbHM7Zm9yKGY9MCxmbD10aGlzLmZhY2VzLmxlbmd0aDtmPGZsO2YrKyl7ZmFjZU5vcm1hbD1uZXcgVmVjdG9yMygpO3ZlcnRleE5vcm1hbHM9e2E6bmV3IFZlY3RvcjMoKSxiOm5ldyBWZWN0b3IzKCksYzpuZXcgVmVjdG9yMygpfTtkc3ROb3JtYWxzRmFjZS5wdXNoKGZhY2VOb3JtYWwpO2RzdE5vcm1hbHNWZXJ0ZXgucHVzaCh2ZXJ0ZXhOb3JtYWxzKTt9fXZhciBtb3JwaE5vcm1hbHM9dGhpcy5tb3JwaE5vcm1hbHNbaV07Ly8gc2V0IHZlcnRpY2VzIHRvIG1vcnBoIHRhcmdldAp0bXBHZW8udmVydGljZXM9dGhpcy5tb3JwaFRhcmdldHNbaV0udmVydGljZXM7Ly8gY29tcHV0ZSBtb3JwaCBub3JtYWxzCnRtcEdlby5jb21wdXRlRmFjZU5vcm1hbHMoKTt0bXBHZW8uY29tcHV0ZVZlcnRleE5vcm1hbHMoKTsvLyBzdG9yZSBtb3JwaCBub3JtYWxzCnZhciBmYWNlTm9ybWFsLHZlcnRleE5vcm1hbHM7Zm9yKGY9MCxmbD10aGlzLmZhY2VzLmxlbmd0aDtmPGZsO2YrKyl7ZmFjZT10aGlzLmZhY2VzW2ZdO2ZhY2VOb3JtYWw9bW9ycGhOb3JtYWxzLmZhY2VOb3JtYWxzW2ZdO3ZlcnRleE5vcm1hbHM9bW9ycGhOb3JtYWxzLnZlcnRleE5vcm1hbHNbZl07ZmFjZU5vcm1hbC5jb3B5KGZhY2Uubm9ybWFsKTt2ZXJ0ZXhOb3JtYWxzLmEuY29weShmYWNlLnZlcnRleE5vcm1hbHNbMF0pO3ZlcnRleE5vcm1hbHMuYi5jb3B5KGZhY2UudmVydGV4Tm9ybWFsc1sxXSk7dmVydGV4Tm9ybWFscy5jLmNvcHkoZmFjZS52ZXJ0ZXhOb3JtYWxzWzJdKTt9fS8vIHJlc3RvcmUgb3JpZ2luYWwgbm9ybWFscwpmb3IoZj0wLGZsPXRoaXMuZmFjZXMubGVuZ3RoO2Y8Zmw7ZisrKXtmYWNlPXRoaXMuZmFjZXNbZl07ZmFjZS5ub3JtYWw9ZmFjZS5fX29yaWdpbmFsRmFjZU5vcm1hbDtmYWNlLnZlcnRleE5vcm1hbHM9ZmFjZS5fX29yaWdpbmFsVmVydGV4Tm9ybWFsczt9fSxjb21wdXRlTGluZURpc3RhbmNlczpmdW5jdGlvbiBjb21wdXRlTGluZURpc3RhbmNlcygpe3ZhciBkPTA7dmFyIHZlcnRpY2VzPXRoaXMudmVydGljZXM7Zm9yKHZhciBpPTAsaWw9dmVydGljZXMubGVuZ3RoO2k8aWw7aSsrKXtpZihpPjApe2QrPXZlcnRpY2VzW2ldLmRpc3RhbmNlVG8odmVydGljZXNbaS0xXSk7fXRoaXMubGluZURpc3RhbmNlc1tpXT1kO319LGNvbXB1dGVCb3VuZGluZ0JveDpmdW5jdGlvbiBjb21wdXRlQm91bmRpbmdCb3goKXtpZih0aGlzLmJvdW5kaW5nQm94PT09bnVsbCl7dGhpcy5ib3VuZGluZ0JveD1uZXcgQm94MygpO310aGlzLmJvdW5kaW5nQm94LnNldEZyb21Qb2ludHModGhpcy52ZXJ0aWNlcyk7fSxjb21wdXRlQm91bmRpbmdTcGhlcmU6ZnVuY3Rpb24gY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCl7aWYodGhpcy5ib3VuZGluZ1NwaGVyZT09PW51bGwpe3RoaXMuYm91bmRpbmdTcGhlcmU9bmV3IFNwaGVyZSgpO310aGlzLmJvdW5kaW5nU3BoZXJlLnNldEZyb21Qb2ludHModGhpcy52ZXJ0aWNlcyk7fSxtZXJnZTpmdW5jdGlvbiBtZXJnZShnZW9tZXRyeSxtYXRyaXgsbWF0ZXJpYWxJbmRleE9mZnNldCl7aWYoIShnZW9tZXRyeSYmZ2VvbWV0cnkuaXNHZW9tZXRyeSkpe2NvbnNvbGUuZXJyb3IoJ1RIUkVFLkdlb21ldHJ5Lm1lcmdlKCk6IGdlb21ldHJ5IG5vdCBhbiBpbnN0YW5jZSBvZiBUSFJFRS5HZW9tZXRyeS4nLGdlb21ldHJ5KTtyZXR1cm47fXZhciBub3JtYWxNYXRyaXgsdmVydGV4T2Zmc2V0PXRoaXMudmVydGljZXMubGVuZ3RoLHZlcnRpY2VzMT10aGlzLnZlcnRpY2VzLHZlcnRpY2VzMj1nZW9tZXRyeS52ZXJ0aWNlcyxmYWNlczE9dGhpcy5mYWNlcyxmYWNlczI9Z2VvbWV0cnkuZmFjZXMsdXZzMT10aGlzLmZhY2VWZXJ0ZXhVdnNbMF0sdXZzMj1nZW9tZXRyeS5mYWNlVmVydGV4VXZzWzBdLGNvbG9yczE9dGhpcy5jb2xvcnMsY29sb3JzMj1nZW9tZXRyeS5jb2xvcnM7aWYobWF0ZXJpYWxJbmRleE9mZnNldD09PXVuZGVmaW5lZCltYXRlcmlhbEluZGV4T2Zmc2V0PTA7aWYobWF0cml4IT09dW5kZWZpbmVkKXtub3JtYWxNYXRyaXg9bmV3IE1hdHJpeDMoKS5nZXROb3JtYWxNYXRyaXgobWF0cml4KTt9Ly8gdmVydGljZXMKZm9yKHZhciBpPTAsaWw9dmVydGljZXMyLmxlbmd0aDtpPGlsO2krKyl7dmFyIHZlcnRleD12ZXJ0aWNlczJbaV07dmFyIHZlcnRleENvcHk9dmVydGV4LmNsb25lKCk7aWYobWF0cml4IT09dW5kZWZpbmVkKXZlcnRleENvcHkuYXBwbHlNYXRyaXg0KG1hdHJpeCk7dmVydGljZXMxLnB1c2godmVydGV4Q29weSk7fS8vIGNvbG9ycwpmb3IodmFyIGk9MCxpbD1jb2xvcnMyLmxlbmd0aDtpPGlsO2krKyl7Y29sb3JzMS5wdXNoKGNvbG9yczJbaV0uY2xvbmUoKSk7fS8vIGZhY2VzCmZvcihpPTAsaWw9ZmFjZXMyLmxlbmd0aDtpPGlsO2krKyl7dmFyIGZhY2U9ZmFjZXMyW2ldLGZhY2VDb3B5LG5vcm1hbCxjb2xvcixmYWNlVmVydGV4Tm9ybWFscz1mYWNlLnZlcnRleE5vcm1hbHMsZmFjZVZlcnRleENvbG9ycz1mYWNlLnZlcnRleENvbG9ycztmYWNlQ29weT1uZXcgRmFjZTMoZmFjZS5hK3ZlcnRleE9mZnNldCxmYWNlLmIrdmVydGV4T2Zmc2V0LGZhY2UuYyt2ZXJ0ZXhPZmZzZXQpO2ZhY2VDb3B5Lm5vcm1hbC5jb3B5KGZhY2Uubm9ybWFsKTtpZihub3JtYWxNYXRyaXghPT11bmRlZmluZWQpe2ZhY2VDb3B5Lm5vcm1hbC5hcHBseU1hdHJpeDMobm9ybWFsTWF0cml4KS5ub3JtYWxpemUoKTt9Zm9yKHZhciBqPTAsamw9ZmFjZVZlcnRleE5vcm1hbHMubGVuZ3RoO2o8amw7aisrKXtub3JtYWw9ZmFjZVZlcnRleE5vcm1hbHNbal0uY2xvbmUoKTtpZihub3JtYWxNYXRyaXghPT11bmRlZmluZWQpe25vcm1hbC5hcHBseU1hdHJpeDMobm9ybWFsTWF0cml4KS5ub3JtYWxpemUoKTt9ZmFjZUNvcHkudmVydGV4Tm9ybWFscy5wdXNoKG5vcm1hbCk7fWZhY2VDb3B5LmNvbG9yLmNvcHkoZmFjZS5jb2xvcik7Zm9yKHZhciBqPTAsamw9ZmFjZVZlcnRleENvbG9ycy5sZW5ndGg7ajxqbDtqKyspe2NvbG9yPWZhY2VWZXJ0ZXhDb2xvcnNbal07ZmFjZUNvcHkudmVydGV4Q29sb3JzLnB1c2goY29sb3IuY2xvbmUoKSk7fWZhY2VDb3B5Lm1hdGVyaWFsSW5kZXg9ZmFjZS5tYXRlcmlhbEluZGV4K21hdGVyaWFsSW5kZXhPZmZzZXQ7ZmFjZXMxLnB1c2goZmFjZUNvcHkpO30vLyB1dnMKZm9yKGk9MCxpbD11dnMyLmxlbmd0aDtpPGlsO2krKyl7dmFyIHV2PXV2czJbaV0sdXZDb3B5PVtdO2lmKHV2PT09dW5kZWZpbmVkKXtjb250aW51ZTt9Zm9yKHZhciBqPTAsamw9dXYubGVuZ3RoO2o8amw7aisrKXt1dkNvcHkucHVzaCh1dltqXS5jbG9uZSgpKTt9dXZzMS5wdXNoKHV2Q29weSk7fX0sbWVyZ2VNZXNoOmZ1bmN0aW9uIG1lcmdlTWVzaChtZXNoKXtpZighKG1lc2gmJm1lc2guaXNNZXNoKSl7Y29uc29sZS5lcnJvcignVEhSRUUuR2VvbWV0cnkubWVyZ2VNZXNoKCk6IG1lc2ggbm90IGFuIGluc3RhbmNlIG9mIFRIUkVFLk1lc2guJyxtZXNoKTtyZXR1cm47fW1lc2gubWF0cml4QXV0b1VwZGF0ZSYmbWVzaC51cGRhdGVNYXRyaXgoKTt0aGlzLm1lcmdlKG1lc2guZ2VvbWV0cnksbWVzaC5tYXRyaXgpO30sLyoKCSAqIENoZWNrcyBmb3IgZHVwbGljYXRlIHZlcnRpY2VzIHdpdGggaGFzaG1hcC4KCSAqIER1cGxpY2F0ZWQgdmVydGljZXMgYXJlIHJlbW92ZWQKCSAqIGFuZCBmYWNlcycgdmVydGljZXMgYXJlIHVwZGF0ZWQuCgkgKi9tZXJnZVZlcnRpY2VzOmZ1bmN0aW9uIG1lcmdlVmVydGljZXMoKXt2YXIgdmVydGljZXNNYXA9e307Ly8gSGFzaG1hcCBmb3IgbG9va2luZyB1cCB2ZXJ0aWNlcyBieSBwb3NpdGlvbiBjb29yZGluYXRlcyAoYW5kIG1ha2luZyBzdXJlIHRoZXkgYXJlIHVuaXF1ZSkKdmFyIHVuaXF1ZT1bXSxjaGFuZ2VzPVtdO3ZhciB2LGtleTt2YXIgcHJlY2lzaW9uUG9pbnRzPTQ7Ly8gbnVtYmVyIG9mIGRlY2ltYWwgcG9pbnRzLCBlLmcuIDQgZm9yIGVwc2lsb24gb2YgMC4wMDAxCnZhciBwcmVjaXNpb249TWF0aC5wb3coMTAscHJlY2lzaW9uUG9pbnRzKTt2YXIgaSxpbCxmYWNlO3ZhciBpbmRpY2VzLGosamw7Zm9yKGk9MCxpbD10aGlzLnZlcnRpY2VzLmxlbmd0aDtpPGlsO2krKyl7dj10aGlzLnZlcnRpY2VzW2ldO2tleT1NYXRoLnJvdW5kKHYueCpwcmVjaXNpb24pKydfJytNYXRoLnJvdW5kKHYueSpwcmVjaXNpb24pKydfJytNYXRoLnJvdW5kKHYueipwcmVjaXNpb24pO2lmKHZlcnRpY2VzTWFwW2tleV09PT11bmRlZmluZWQpe3ZlcnRpY2VzTWFwW2tleV09aTt1bmlxdWUucHVzaCh0aGlzLnZlcnRpY2VzW2ldKTtjaGFuZ2VzW2ldPXVuaXF1ZS5sZW5ndGgtMTt9ZWxzZXsvL2NvbnNvbGUubG9nKCdEdXBsaWNhdGUgdmVydGV4IGZvdW5kLiAnLCBpLCAnIGNvdWxkIGJlIHVzaW5nICcsIHZlcnRpY2VzTWFwW2tleV0pOwpjaGFuZ2VzW2ldPWNoYW5nZXNbdmVydGljZXNNYXBba2V5XV07fX0vLyBpZiBmYWNlcyBhcmUgY29tcGxldGVseSBkZWdlbmVyYXRlIGFmdGVyIG1lcmdpbmcgdmVydGljZXMsIHdlCi8vIGhhdmUgdG8gcmVtb3ZlIHRoZW0gZnJvbSB0aGUgZ2VvbWV0cnkuCnZhciBmYWNlSW5kaWNlc1RvUmVtb3ZlPVtdO2ZvcihpPTAsaWw9dGhpcy5mYWNlcy5sZW5ndGg7aTxpbDtpKyspe2ZhY2U9dGhpcy5mYWNlc1tpXTtmYWNlLmE9Y2hhbmdlc1tmYWNlLmFdO2ZhY2UuYj1jaGFuZ2VzW2ZhY2UuYl07ZmFjZS5jPWNoYW5nZXNbZmFjZS5jXTtpbmRpY2VzPVtmYWNlLmEsZmFjZS5iLGZhY2UuY107Ly8gaWYgYW55IGR1cGxpY2F0ZSB2ZXJ0aWNlcyBhcmUgZm91bmQgaW4gYSBGYWNlMwovLyB3ZSBoYXZlIHRvIHJlbW92ZSB0aGUgZmFjZSBhcyBub3RoaW5nIGNhbiBiZSBzYXZlZApmb3IodmFyIG49MDtuPDM7bisrKXtpZihpbmRpY2VzW25dPT09aW5kaWNlc1sobisxKSUzXSl7ZmFjZUluZGljZXNUb1JlbW92ZS5wdXNoKGkpO2JyZWFrO319fWZvcihpPWZhY2VJbmRpY2VzVG9SZW1vdmUubGVuZ3RoLTE7aT49MDtpLS0pe3ZhciBpZHg9ZmFjZUluZGljZXNUb1JlbW92ZVtpXTt0aGlzLmZhY2VzLnNwbGljZShpZHgsMSk7Zm9yKGo9MCxqbD10aGlzLmZhY2VWZXJ0ZXhVdnMubGVuZ3RoO2o8amw7aisrKXt0aGlzLmZhY2VWZXJ0ZXhVdnNbal0uc3BsaWNlKGlkeCwxKTt9fS8vIFVzZSB1bmlxdWUgc2V0IG9mIHZlcnRpY2VzCnZhciBkaWZmPXRoaXMudmVydGljZXMubGVuZ3RoLXVuaXF1ZS5sZW5ndGg7dGhpcy52ZXJ0aWNlcz11bmlxdWU7cmV0dXJuIGRpZmY7fSxzZXRGcm9tUG9pbnRzOmZ1bmN0aW9uIHNldEZyb21Qb2ludHMocG9pbnRzKXt0aGlzLnZlcnRpY2VzPVtdO2Zvcih2YXIgaT0wLGw9cG9pbnRzLmxlbmd0aDtpPGw7aSsrKXt2YXIgcG9pbnQ9cG9pbnRzW2ldO3RoaXMudmVydGljZXMucHVzaChuZXcgVmVjdG9yMyhwb2ludC54LHBvaW50LnkscG9pbnQuenx8MCkpO31yZXR1cm4gdGhpczt9LHNvcnRGYWNlc0J5TWF0ZXJpYWxJbmRleDpmdW5jdGlvbiBzb3J0RmFjZXNCeU1hdGVyaWFsSW5kZXgoKXt2YXIgZmFjZXM9dGhpcy5mYWNlczt2YXIgbGVuZ3RoPWZhY2VzLmxlbmd0aDsvLyB0YWcgZmFjZXMKZm9yKHZhciBpPTA7aTxsZW5ndGg7aSsrKXtmYWNlc1tpXS5faWQ9aTt9Ly8gc29ydCBmYWNlcwpmdW5jdGlvbiBtYXRlcmlhbEluZGV4U29ydChhLGIpe3JldHVybiBhLm1hdGVyaWFsSW5kZXgtYi5tYXRlcmlhbEluZGV4O31mYWNlcy5zb3J0KG1hdGVyaWFsSW5kZXhTb3J0KTsvLyBzb3J0IHV2cwp2YXIgdXZzMT10aGlzLmZhY2VWZXJ0ZXhVdnNbMF07dmFyIHV2czI9dGhpcy5mYWNlVmVydGV4VXZzWzFdO3ZhciBuZXdVdnMxLG5ld1V2czI7aWYodXZzMSYmdXZzMS5sZW5ndGg9PT1sZW5ndGgpbmV3VXZzMT1bXTtpZih1dnMyJiZ1dnMyLmxlbmd0aD09PWxlbmd0aCluZXdVdnMyPVtdO2Zvcih2YXIgaT0wO2k8bGVuZ3RoO2krKyl7dmFyIGlkPWZhY2VzW2ldLl9pZDtpZihuZXdVdnMxKW5ld1V2czEucHVzaCh1dnMxW2lkXSk7aWYobmV3VXZzMiluZXdVdnMyLnB1c2godXZzMltpZF0pO31pZihuZXdVdnMxKXRoaXMuZmFjZVZlcnRleFV2c1swXT1uZXdVdnMxO2lmKG5ld1V2czIpdGhpcy5mYWNlVmVydGV4VXZzWzFdPW5ld1V2czI7fSx0b0pTT046ZnVuY3Rpb24gdG9KU09OKCl7dmFyIGRhdGE9e21ldGFkYXRhOnt2ZXJzaW9uOjQuNSx0eXBlOidHZW9tZXRyeScsZ2VuZXJhdG9yOidHZW9tZXRyeS50b0pTT04nfX07Ly8gc3RhbmRhcmQgR2VvbWV0cnkgc2VyaWFsaXphdGlvbgpkYXRhLnV1aWQ9dGhpcy51dWlkO2RhdGEudHlwZT10aGlzLnR5cGU7aWYodGhpcy5uYW1lIT09JycpZGF0YS5uYW1lPXRoaXMubmFtZTtpZih0aGlzLnBhcmFtZXRlcnMhPT11bmRlZmluZWQpe3ZhciBwYXJhbWV0ZXJzPXRoaXMucGFyYW1ldGVycztmb3IodmFyIGtleSBpbiBwYXJhbWV0ZXJzKXtpZihwYXJhbWV0ZXJzW2tleV0hPT11bmRlZmluZWQpZGF0YVtrZXldPXBhcmFtZXRlcnNba2V5XTt9cmV0dXJuIGRhdGE7fXZhciB2ZXJ0aWNlcz1bXTtmb3IodmFyIGk9MDtpPHRoaXMudmVydGljZXMubGVuZ3RoO2krKyl7dmFyIHZlcnRleD10aGlzLnZlcnRpY2VzW2ldO3ZlcnRpY2VzLnB1c2godmVydGV4LngsdmVydGV4LnksdmVydGV4LnopO312YXIgZmFjZXM9W107dmFyIG5vcm1hbHM9W107dmFyIG5vcm1hbHNIYXNoPXt9O3ZhciBjb2xvcnM9W107dmFyIGNvbG9yc0hhc2g9e307dmFyIHV2cz1bXTt2YXIgdXZzSGFzaD17fTtmb3IodmFyIGk9MDtpPHRoaXMuZmFjZXMubGVuZ3RoO2krKyl7dmFyIGZhY2U9dGhpcy5mYWNlc1tpXTt2YXIgaGFzTWF0ZXJpYWw9dHJ1ZTt2YXIgaGFzRmFjZVV2PWZhbHNlOy8vIGRlcHJlY2F0ZWQKdmFyIGhhc0ZhY2VWZXJ0ZXhVdj10aGlzLmZhY2VWZXJ0ZXhVdnNbMF1baV0hPT11bmRlZmluZWQ7dmFyIGhhc0ZhY2VOb3JtYWw9ZmFjZS5ub3JtYWwubGVuZ3RoKCk+MDt2YXIgaGFzRmFjZVZlcnRleE5vcm1hbD1mYWNlLnZlcnRleE5vcm1hbHMubGVuZ3RoPjA7dmFyIGhhc0ZhY2VDb2xvcj1mYWNlLmNvbG9yLnIhPT0xfHxmYWNlLmNvbG9yLmchPT0xfHxmYWNlLmNvbG9yLmIhPT0xO3ZhciBoYXNGYWNlVmVydGV4Q29sb3I9ZmFjZS52ZXJ0ZXhDb2xvcnMubGVuZ3RoPjA7dmFyIGZhY2VUeXBlPTA7ZmFjZVR5cGU9c2V0Qml0KGZhY2VUeXBlLDAsMCk7Ly8gaXNRdWFkCmZhY2VUeXBlPXNldEJpdChmYWNlVHlwZSwxLGhhc01hdGVyaWFsKTtmYWNlVHlwZT1zZXRCaXQoZmFjZVR5cGUsMixoYXNGYWNlVXYpO2ZhY2VUeXBlPXNldEJpdChmYWNlVHlwZSwzLGhhc0ZhY2VWZXJ0ZXhVdik7ZmFjZVR5cGU9c2V0Qml0KGZhY2VUeXBlLDQsaGFzRmFjZU5vcm1hbCk7ZmFjZVR5cGU9c2V0Qml0KGZhY2VUeXBlLDUsaGFzRmFjZVZlcnRleE5vcm1hbCk7ZmFjZVR5cGU9c2V0Qml0KGZhY2VUeXBlLDYsaGFzRmFjZUNvbG9yKTtmYWNlVHlwZT1zZXRCaXQoZmFjZVR5cGUsNyxoYXNGYWNlVmVydGV4Q29sb3IpO2ZhY2VzLnB1c2goZmFjZVR5cGUpO2ZhY2VzLnB1c2goZmFjZS5hLGZhY2UuYixmYWNlLmMpO2ZhY2VzLnB1c2goZmFjZS5tYXRlcmlhbEluZGV4KTtpZihoYXNGYWNlVmVydGV4VXYpe3ZhciBmYWNlVmVydGV4VXZzPXRoaXMuZmFjZVZlcnRleFV2c1swXVtpXTtmYWNlcy5wdXNoKGdldFV2SW5kZXgoZmFjZVZlcnRleFV2c1swXSksZ2V0VXZJbmRleChmYWNlVmVydGV4VXZzWzFdKSxnZXRVdkluZGV4KGZhY2VWZXJ0ZXhVdnNbMl0pKTt9aWYoaGFzRmFjZU5vcm1hbCl7ZmFjZXMucHVzaChnZXROb3JtYWxJbmRleChmYWNlLm5vcm1hbCkpO31pZihoYXNGYWNlVmVydGV4Tm9ybWFsKXt2YXIgdmVydGV4Tm9ybWFscz1mYWNlLnZlcnRleE5vcm1hbHM7ZmFjZXMucHVzaChnZXROb3JtYWxJbmRleCh2ZXJ0ZXhOb3JtYWxzWzBdKSxnZXROb3JtYWxJbmRleCh2ZXJ0ZXhOb3JtYWxzWzFdKSxnZXROb3JtYWxJbmRleCh2ZXJ0ZXhOb3JtYWxzWzJdKSk7fWlmKGhhc0ZhY2VDb2xvcil7ZmFjZXMucHVzaChnZXRDb2xvckluZGV4KGZhY2UuY29sb3IpKTt9aWYoaGFzRmFjZVZlcnRleENvbG9yKXt2YXIgdmVydGV4Q29sb3JzPWZhY2UudmVydGV4Q29sb3JzO2ZhY2VzLnB1c2goZ2V0Q29sb3JJbmRleCh2ZXJ0ZXhDb2xvcnNbMF0pLGdldENvbG9ySW5kZXgodmVydGV4Q29sb3JzWzFdKSxnZXRDb2xvckluZGV4KHZlcnRleENvbG9yc1syXSkpO319ZnVuY3Rpb24gc2V0Qml0KHZhbHVlLHBvc2l0aW9uLGVuYWJsZWQpe3JldHVybiBlbmFibGVkP3ZhbHVlfDE8PHBvc2l0aW9uOnZhbHVlJn4oMTw8cG9zaXRpb24pO31mdW5jdGlvbiBnZXROb3JtYWxJbmRleChub3JtYWwpe3ZhciBoYXNoPW5vcm1hbC54LnRvU3RyaW5nKCkrbm9ybWFsLnkudG9TdHJpbmcoKStub3JtYWwuei50b1N0cmluZygpO2lmKG5vcm1hbHNIYXNoW2hhc2hdIT09dW5kZWZpbmVkKXtyZXR1cm4gbm9ybWFsc0hhc2hbaGFzaF07fW5vcm1hbHNIYXNoW2hhc2hdPW5vcm1hbHMubGVuZ3RoLzM7bm9ybWFscy5wdXNoKG5vcm1hbC54LG5vcm1hbC55LG5vcm1hbC56KTtyZXR1cm4gbm9ybWFsc0hhc2hbaGFzaF07fWZ1bmN0aW9uIGdldENvbG9ySW5kZXgoY29sb3Ipe3ZhciBoYXNoPWNvbG9yLnIudG9TdHJpbmcoKStjb2xvci5nLnRvU3RyaW5nKCkrY29sb3IuYi50b1N0cmluZygpO2lmKGNvbG9yc0hhc2hbaGFzaF0hPT11bmRlZmluZWQpe3JldHVybiBjb2xvcnNIYXNoW2hhc2hdO31jb2xvcnNIYXNoW2hhc2hdPWNvbG9ycy5sZW5ndGg7Y29sb3JzLnB1c2goY29sb3IuZ2V0SGV4KCkpO3JldHVybiBjb2xvcnNIYXNoW2hhc2hdO31mdW5jdGlvbiBnZXRVdkluZGV4KHV2KXt2YXIgaGFzaD11di54LnRvU3RyaW5nKCkrdXYueS50b1N0cmluZygpO2lmKHV2c0hhc2hbaGFzaF0hPT11bmRlZmluZWQpe3JldHVybiB1dnNIYXNoW2hhc2hdO311dnNIYXNoW2hhc2hdPXV2cy5sZW5ndGgvMjt1dnMucHVzaCh1di54LHV2LnkpO3JldHVybiB1dnNIYXNoW2hhc2hdO31kYXRhLmRhdGE9e307ZGF0YS5kYXRhLnZlcnRpY2VzPXZlcnRpY2VzO2RhdGEuZGF0YS5ub3JtYWxzPW5vcm1hbHM7aWYoY29sb3JzLmxlbmd0aD4wKWRhdGEuZGF0YS5jb2xvcnM9Y29sb3JzO2lmKHV2cy5sZW5ndGg+MClkYXRhLmRhdGEudXZzPVt1dnNdOy8vIHRlbXBvcmFsIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkKZGF0YS5kYXRhLmZhY2VzPWZhY2VzO3JldHVybiBkYXRhO30sY2xvbmU6ZnVuY3Rpb24gY2xvbmUoKXsvKgoJCSAvLyBIYW5kbGUgcHJpbWl0aXZlcwoKCQkgdmFyIHBhcmFtZXRlcnMgPSB0aGlzLnBhcmFtZXRlcnM7CgoJCSBpZiAoIHBhcmFtZXRlcnMgIT09IHVuZGVmaW5lZCApIHsKCgkJIHZhciB2YWx1ZXMgPSBbXTsKCgkJIGZvciAoIHZhciBrZXkgaW4gcGFyYW1ldGVycyApIHsKCgkJIHZhbHVlcy5wdXNoKCBwYXJhbWV0ZXJzWyBrZXkgXSApOwoKCQkgfQoKCQkgdmFyIGdlb21ldHJ5ID0gT2JqZWN0LmNyZWF0ZSggdGhpcy5jb25zdHJ1Y3Rvci5wcm90b3R5cGUgKTsKCQkgdGhpcy5jb25zdHJ1Y3Rvci5hcHBseSggZ2VvbWV0cnksIHZhbHVlcyApOwoJCSByZXR1cm4gZ2VvbWV0cnk7CgoJCSB9CgoJCSByZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IoKS5jb3B5KCB0aGlzICk7CgkJICovcmV0dXJuIG5ldyBHZW9tZXRyeSgpLmNvcHkodGhpcyk7fSxjb3B5OmZ1bmN0aW9uIGNvcHkoc291cmNlKXt2YXIgaSxpbCxqLGpsLGssa2w7Ly8gcmVzZXQKdGhpcy52ZXJ0aWNlcz1bXTt0aGlzLmNvbG9ycz1bXTt0aGlzLmZhY2VzPVtdO3RoaXMuZmFjZVZlcnRleFV2cz1bW11dO3RoaXMubW9ycGhUYXJnZXRzPVtdO3RoaXMubW9ycGhOb3JtYWxzPVtdO3RoaXMuc2tpbldlaWdodHM9W107dGhpcy5za2luSW5kaWNlcz1bXTt0aGlzLmxpbmVEaXN0YW5jZXM9W107dGhpcy5ib3VuZGluZ0JveD1udWxsO3RoaXMuYm91bmRpbmdTcGhlcmU9bnVsbDsvLyBuYW1lCnRoaXMubmFtZT1zb3VyY2UubmFtZTsvLyB2ZXJ0aWNlcwp2YXIgdmVydGljZXM9c291cmNlLnZlcnRpY2VzO2ZvcihpPTAsaWw9dmVydGljZXMubGVuZ3RoO2k8aWw7aSsrKXt0aGlzLnZlcnRpY2VzLnB1c2godmVydGljZXNbaV0uY2xvbmUoKSk7fS8vIGNvbG9ycwp2YXIgY29sb3JzPXNvdXJjZS5jb2xvcnM7Zm9yKGk9MCxpbD1jb2xvcnMubGVuZ3RoO2k8aWw7aSsrKXt0aGlzLmNvbG9ycy5wdXNoKGNvbG9yc1tpXS5jbG9uZSgpKTt9Ly8gZmFjZXMKdmFyIGZhY2VzPXNvdXJjZS5mYWNlcztmb3IoaT0wLGlsPWZhY2VzLmxlbmd0aDtpPGlsO2krKyl7dGhpcy5mYWNlcy5wdXNoKGZhY2VzW2ldLmNsb25lKCkpO30vLyBmYWNlIHZlcnRleCB1dnMKZm9yKGk9MCxpbD1zb3VyY2UuZmFjZVZlcnRleFV2cy5sZW5ndGg7aTxpbDtpKyspe3ZhciBmYWNlVmVydGV4VXZzPXNvdXJjZS5mYWNlVmVydGV4VXZzW2ldO2lmKHRoaXMuZmFjZVZlcnRleFV2c1tpXT09PXVuZGVmaW5lZCl7dGhpcy5mYWNlVmVydGV4VXZzW2ldPVtdO31mb3Ioaj0wLGpsPWZhY2VWZXJ0ZXhVdnMubGVuZ3RoO2o8amw7aisrKXt2YXIgdXZzPWZhY2VWZXJ0ZXhVdnNbal0sdXZzQ29weT1bXTtmb3Ioaz0wLGtsPXV2cy5sZW5ndGg7azxrbDtrKyspe3ZhciB1dj11dnNba107dXZzQ29weS5wdXNoKHV2LmNsb25lKCkpO310aGlzLmZhY2VWZXJ0ZXhVdnNbaV0ucHVzaCh1dnNDb3B5KTt9fS8vIG1vcnBoIHRhcmdldHMKdmFyIG1vcnBoVGFyZ2V0cz1zb3VyY2UubW9ycGhUYXJnZXRzO2ZvcihpPTAsaWw9bW9ycGhUYXJnZXRzLmxlbmd0aDtpPGlsO2krKyl7dmFyIG1vcnBoVGFyZ2V0PXt9O21vcnBoVGFyZ2V0Lm5hbWU9bW9ycGhUYXJnZXRzW2ldLm5hbWU7Ly8gdmVydGljZXMKaWYobW9ycGhUYXJnZXRzW2ldLnZlcnRpY2VzIT09dW5kZWZpbmVkKXttb3JwaFRhcmdldC52ZXJ0aWNlcz1bXTtmb3Ioaj0wLGpsPW1vcnBoVGFyZ2V0c1tpXS52ZXJ0aWNlcy5sZW5ndGg7ajxqbDtqKyspe21vcnBoVGFyZ2V0LnZlcnRpY2VzLnB1c2gobW9ycGhUYXJnZXRzW2ldLnZlcnRpY2VzW2pdLmNsb25lKCkpO319Ly8gbm9ybWFscwppZihtb3JwaFRhcmdldHNbaV0ubm9ybWFscyE9PXVuZGVmaW5lZCl7bW9ycGhUYXJnZXQubm9ybWFscz1bXTtmb3Ioaj0wLGpsPW1vcnBoVGFyZ2V0c1tpXS5ub3JtYWxzLmxlbmd0aDtqPGpsO2orKyl7bW9ycGhUYXJnZXQubm9ybWFscy5wdXNoKG1vcnBoVGFyZ2V0c1tpXS5ub3JtYWxzW2pdLmNsb25lKCkpO319dGhpcy5tb3JwaFRhcmdldHMucHVzaChtb3JwaFRhcmdldCk7fS8vIG1vcnBoIG5vcm1hbHMKdmFyIG1vcnBoTm9ybWFscz1zb3VyY2UubW9ycGhOb3JtYWxzO2ZvcihpPTAsaWw9bW9ycGhOb3JtYWxzLmxlbmd0aDtpPGlsO2krKyl7dmFyIG1vcnBoTm9ybWFsPXt9Oy8vIHZlcnRleCBub3JtYWxzCmlmKG1vcnBoTm9ybWFsc1tpXS52ZXJ0ZXhOb3JtYWxzIT09dW5kZWZpbmVkKXttb3JwaE5vcm1hbC52ZXJ0ZXhOb3JtYWxzPVtdO2ZvcihqPTAsamw9bW9ycGhOb3JtYWxzW2ldLnZlcnRleE5vcm1hbHMubGVuZ3RoO2o8amw7aisrKXt2YXIgc3JjVmVydGV4Tm9ybWFsPW1vcnBoTm9ybWFsc1tpXS52ZXJ0ZXhOb3JtYWxzW2pdO3ZhciBkZXN0VmVydGV4Tm9ybWFsPXt9O2Rlc3RWZXJ0ZXhOb3JtYWwuYT1zcmNWZXJ0ZXhOb3JtYWwuYS5jbG9uZSgpO2Rlc3RWZXJ0ZXhOb3JtYWwuYj1zcmNWZXJ0ZXhOb3JtYWwuYi5jbG9uZSgpO2Rlc3RWZXJ0ZXhOb3JtYWwuYz1zcmNWZXJ0ZXhOb3JtYWwuYy5jbG9uZSgpO21vcnBoTm9ybWFsLnZlcnRleE5vcm1hbHMucHVzaChkZXN0VmVydGV4Tm9ybWFsKTt9fS8vIGZhY2Ugbm9ybWFscwppZihtb3JwaE5vcm1hbHNbaV0uZmFjZU5vcm1hbHMhPT11bmRlZmluZWQpe21vcnBoTm9ybWFsLmZhY2VOb3JtYWxzPVtdO2ZvcihqPTAsamw9bW9ycGhOb3JtYWxzW2ldLmZhY2VOb3JtYWxzLmxlbmd0aDtqPGpsO2orKyl7bW9ycGhOb3JtYWwuZmFjZU5vcm1hbHMucHVzaChtb3JwaE5vcm1hbHNbaV0uZmFjZU5vcm1hbHNbal0uY2xvbmUoKSk7fX10aGlzLm1vcnBoTm9ybWFscy5wdXNoKG1vcnBoTm9ybWFsKTt9Ly8gc2tpbiB3ZWlnaHRzCnZhciBza2luV2VpZ2h0cz1zb3VyY2Uuc2tpbldlaWdodHM7Zm9yKGk9MCxpbD1za2luV2VpZ2h0cy5sZW5ndGg7aTxpbDtpKyspe3RoaXMuc2tpbldlaWdodHMucHVzaChza2luV2VpZ2h0c1tpXS5jbG9uZSgpKTt9Ly8gc2tpbiBpbmRpY2VzCnZhciBza2luSW5kaWNlcz1zb3VyY2Uuc2tpbkluZGljZXM7Zm9yKGk9MCxpbD1za2luSW5kaWNlcy5sZW5ndGg7aTxpbDtpKyspe3RoaXMuc2tpbkluZGljZXMucHVzaChza2luSW5kaWNlc1tpXS5jbG9uZSgpKTt9Ly8gbGluZSBkaXN0YW5jZXMKdmFyIGxpbmVEaXN0YW5jZXM9c291cmNlLmxpbmVEaXN0YW5jZXM7Zm9yKGk9MCxpbD1saW5lRGlzdGFuY2VzLmxlbmd0aDtpPGlsO2krKyl7dGhpcy5saW5lRGlzdGFuY2VzLnB1c2gobGluZURpc3RhbmNlc1tpXSk7fS8vIGJvdW5kaW5nIGJveAp2YXIgYm91bmRpbmdCb3g9c291cmNlLmJvdW5kaW5nQm94O2lmKGJvdW5kaW5nQm94IT09bnVsbCl7dGhpcy5ib3VuZGluZ0JveD1ib3VuZGluZ0JveC5jbG9uZSgpO30vLyBib3VuZGluZyBzcGhlcmUKdmFyIGJvdW5kaW5nU3BoZXJlPXNvdXJjZS5ib3VuZGluZ1NwaGVyZTtpZihib3VuZGluZ1NwaGVyZSE9PW51bGwpe3RoaXMuYm91bmRpbmdTcGhlcmU9Ym91bmRpbmdTcGhlcmUuY2xvbmUoKTt9Ly8gdXBkYXRlIGZsYWdzCnRoaXMuZWxlbWVudHNOZWVkVXBkYXRlPXNvdXJjZS5lbGVtZW50c05lZWRVcGRhdGU7dGhpcy52ZXJ0aWNlc05lZWRVcGRhdGU9c291cmNlLnZlcnRpY2VzTmVlZFVwZGF0ZTt0aGlzLnV2c05lZWRVcGRhdGU9c291cmNlLnV2c05lZWRVcGRhdGU7dGhpcy5ub3JtYWxzTmVlZFVwZGF0ZT1zb3VyY2Uubm9ybWFsc05lZWRVcGRhdGU7dGhpcy5jb2xvcnNOZWVkVXBkYXRlPXNvdXJjZS5jb2xvcnNOZWVkVXBkYXRlO3RoaXMubGluZURpc3RhbmNlc05lZWRVcGRhdGU9c291cmNlLmxpbmVEaXN0YW5jZXNOZWVkVXBkYXRlO3RoaXMuZ3JvdXBzTmVlZFVwZGF0ZT1zb3VyY2UuZ3JvdXBzTmVlZFVwZGF0ZTtyZXR1cm4gdGhpczt9LGRpc3Bvc2U6ZnVuY3Rpb24gZGlzcG9zZSgpe3RoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTonZGlzcG9zZSd9KTt9fSk7LyoqCiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vCiAqL2Z1bmN0aW9uIEJ1ZmZlckF0dHJpYnV0ZShhcnJheSxpdGVtU2l6ZSxub3JtYWxpemVkKXtpZihBcnJheS5pc0FycmF5KGFycmF5KSl7dGhyb3cgbmV3IFR5cGVFcnJvcignVEhSRUUuQnVmZmVyQXR0cmlidXRlOiBhcnJheSBzaG91bGQgYmUgYSBUeXBlZCBBcnJheS4nKTt9dGhpcy51dWlkPV9NYXRoLmdlbmVyYXRlVVVJRCgpO3RoaXMubmFtZT0nJzt0aGlzLmFycmF5PWFycmF5O3RoaXMuaXRlbVNpemU9aXRlbVNpemU7dGhpcy5jb3VudD1hcnJheSE9PXVuZGVmaW5lZD9hcnJheS5sZW5ndGgvaXRlbVNpemU6MDt0aGlzLm5vcm1hbGl6ZWQ9bm9ybWFsaXplZD09PXRydWU7dGhpcy5keW5hbWljPWZhbHNlO3RoaXMudXBkYXRlUmFuZ2U9e29mZnNldDowLGNvdW50Oi0xfTt0aGlzLm9uVXBsb2FkQ2FsbGJhY2s9ZnVuY3Rpb24oKXt9O3RoaXMudmVyc2lvbj0wO31PYmplY3QuZGVmaW5lUHJvcGVydHkoQnVmZmVyQXR0cmlidXRlLnByb3RvdHlwZSwnbmVlZHNVcGRhdGUnLHtzZXQ6ZnVuY3Rpb24gc2V0KHZhbHVlKXtpZih2YWx1ZT09PXRydWUpdGhpcy52ZXJzaW9uKys7fX0pO09iamVjdC5hc3NpZ24oQnVmZmVyQXR0cmlidXRlLnByb3RvdHlwZSx7aXNCdWZmZXJBdHRyaWJ1dGU6dHJ1ZSxzZXRBcnJheTpmdW5jdGlvbiBzZXRBcnJheShhcnJheSl7aWYoQXJyYXkuaXNBcnJheShhcnJheSkpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ1RIUkVFLkJ1ZmZlckF0dHJpYnV0ZTogYXJyYXkgc2hvdWxkIGJlIGEgVHlwZWQgQXJyYXkuJyk7fXRoaXMuY291bnQ9YXJyYXkhPT11bmRlZmluZWQ/YXJyYXkubGVuZ3RoL3RoaXMuaXRlbVNpemU6MDt0aGlzLmFycmF5PWFycmF5O30sc2V0RHluYW1pYzpmdW5jdGlvbiBzZXREeW5hbWljKHZhbHVlKXt0aGlzLmR5bmFtaWM9dmFsdWU7cmV0dXJuIHRoaXM7fSxjb3B5OmZ1bmN0aW9uIGNvcHkoc291cmNlKXt0aGlzLmFycmF5PW5ldyBzb3VyY2UuYXJyYXkuY29uc3RydWN0b3Ioc291cmNlLmFycmF5KTt0aGlzLml0ZW1TaXplPXNvdXJjZS5pdGVtU2l6ZTt0aGlzLmNvdW50PXNvdXJjZS5jb3VudDt0aGlzLm5vcm1hbGl6ZWQ9c291cmNlLm5vcm1hbGl6ZWQ7dGhpcy5keW5hbWljPXNvdXJjZS5keW5hbWljO3JldHVybiB0aGlzO30sY29weUF0OmZ1bmN0aW9uIGNvcHlBdChpbmRleDEsYXR0cmlidXRlLGluZGV4Mil7aW5kZXgxKj10aGlzLml0ZW1TaXplO2luZGV4Mio9YXR0cmlidXRlLml0ZW1TaXplO2Zvcih2YXIgaT0wLGw9dGhpcy5pdGVtU2l6ZTtpPGw7aSsrKXt0aGlzLmFycmF5W2luZGV4MStpXT1hdHRyaWJ1dGUuYXJyYXlbaW5kZXgyK2ldO31yZXR1cm4gdGhpczt9LGNvcHlBcnJheTpmdW5jdGlvbiBjb3B5QXJyYXkoYXJyYXkpe3RoaXMuYXJyYXkuc2V0KGFycmF5KTtyZXR1cm4gdGhpczt9LGNvcHlDb2xvcnNBcnJheTpmdW5jdGlvbiBjb3B5Q29sb3JzQXJyYXkoY29sb3JzKXt2YXIgYXJyYXk9dGhpcy5hcnJheSxvZmZzZXQ9MDtmb3IodmFyIGk9MCxsPWNvbG9ycy5sZW5ndGg7aTxsO2krKyl7dmFyIGNvbG9yPWNvbG9yc1tpXTtpZihjb2xvcj09PXVuZGVmaW5lZCl7Y29uc29sZS53YXJuKCdUSFJFRS5CdWZmZXJBdHRyaWJ1dGUuY29weUNvbG9yc0FycmF5KCk6IGNvbG9yIGlzIHVuZGVmaW5lZCcsaSk7Y29sb3I9bmV3IENvbG9yKCk7fWFycmF5W29mZnNldCsrXT1jb2xvci5yO2FycmF5W29mZnNldCsrXT1jb2xvci5nO2FycmF5W29mZnNldCsrXT1jb2xvci5iO31yZXR1cm4gdGhpczt9LGNvcHlJbmRpY2VzQXJyYXk6ZnVuY3Rpb24gY29weUluZGljZXNBcnJheShpbmRpY2VzKXt2YXIgYXJyYXk9dGhpcy5hcnJheSxvZmZzZXQ9MDtmb3IodmFyIGk9MCxsPWluZGljZXMubGVuZ3RoO2k8bDtpKyspe3ZhciBpbmRleD1pbmRpY2VzW2ldO2FycmF5W29mZnNldCsrXT1pbmRleC5hO2FycmF5W29mZnNldCsrXT1pbmRleC5iO2FycmF5W29mZnNldCsrXT1pbmRleC5jO31yZXR1cm4gdGhpczt9LGNvcHlWZWN0b3Iyc0FycmF5OmZ1bmN0aW9uIGNvcHlWZWN0b3Iyc0FycmF5KHZlY3RvcnMpe3ZhciBhcnJheT10aGlzLmFycmF5LG9mZnNldD0wO2Zvcih2YXIgaT0wLGw9dmVjdG9ycy5sZW5ndGg7aTxsO2krKyl7dmFyIHZlY3Rvcj12ZWN0b3JzW2ldO2lmKHZlY3Rvcj09PXVuZGVmaW5lZCl7Y29uc29sZS53YXJuKCdUSFJFRS5CdWZmZXJBdHRyaWJ1dGUuY29weVZlY3RvcjJzQXJyYXkoKTogdmVjdG9yIGlzIHVuZGVmaW5lZCcsaSk7dmVjdG9yPW5ldyBWZWN0b3IyKCk7fWFycmF5W29mZnNldCsrXT12ZWN0b3IueDthcnJheVtvZmZzZXQrK109dmVjdG9yLnk7fXJldHVybiB0aGlzO30sY29weVZlY3RvcjNzQXJyYXk6ZnVuY3Rpb24gY29weVZlY3RvcjNzQXJyYXkodmVjdG9ycyl7dmFyIGFycmF5PXRoaXMuYXJyYXksb2Zmc2V0PTA7Zm9yKHZhciBpPTAsbD12ZWN0b3JzLmxlbmd0aDtpPGw7aSsrKXt2YXIgdmVjdG9yPXZlY3RvcnNbaV07aWYodmVjdG9yPT09dW5kZWZpbmVkKXtjb25zb2xlLndhcm4oJ1RIUkVFLkJ1ZmZlckF0dHJpYnV0ZS5jb3B5VmVjdG9yM3NBcnJheSgpOiB2ZWN0b3IgaXMgdW5kZWZpbmVkJyxpKTt2ZWN0b3I9bmV3IFZlY3RvcjMoKTt9YXJyYXlbb2Zmc2V0KytdPXZlY3Rvci54O2FycmF5W29mZnNldCsrXT12ZWN0b3IueTthcnJheVtvZmZzZXQrK109dmVjdG9yLno7fXJldHVybiB0aGlzO30sY29weVZlY3RvcjRzQXJyYXk6ZnVuY3Rpb24gY29weVZlY3RvcjRzQXJyYXkodmVjdG9ycyl7dmFyIGFycmF5PXRoaXMuYXJyYXksb2Zmc2V0PTA7Zm9yKHZhciBpPTAsbD12ZWN0b3JzLmxlbmd0aDtpPGw7aSsrKXt2YXIgdmVjdG9yPXZlY3RvcnNbaV07aWYodmVjdG9yPT09dW5kZWZpbmVkKXtjb25zb2xlLndhcm4oJ1RIUkVFLkJ1ZmZlckF0dHJpYnV0ZS5jb3B5VmVjdG9yNHNBcnJheSgpOiB2ZWN0b3IgaXMgdW5kZWZpbmVkJyxpKTt2ZWN0b3I9bmV3IFZlY3RvcjQoKTt9YXJyYXlbb2Zmc2V0KytdPXZlY3Rvci54O2FycmF5W29mZnNldCsrXT12ZWN0b3IueTthcnJheVtvZmZzZXQrK109dmVjdG9yLno7YXJyYXlbb2Zmc2V0KytdPXZlY3Rvci53O31yZXR1cm4gdGhpczt9LHNldDpmdW5jdGlvbiBzZXQodmFsdWUsb2Zmc2V0KXtpZihvZmZzZXQ9PT11bmRlZmluZWQpb2Zmc2V0PTA7dGhpcy5hcnJheS5zZXQodmFsdWUsb2Zmc2V0KTtyZXR1cm4gdGhpczt9LGdldFg6ZnVuY3Rpb24gZ2V0WChpbmRleCl7cmV0dXJuIHRoaXMuYXJyYXlbaW5kZXgqdGhpcy5pdGVtU2l6ZV07fSxzZXRYOmZ1bmN0aW9uIHNldFgoaW5kZXgseCl7dGhpcy5hcnJheVtpbmRleCp0aGlzLml0ZW1TaXplXT14O3JldHVybiB0aGlzO30sZ2V0WTpmdW5jdGlvbiBnZXRZKGluZGV4KXtyZXR1cm4gdGhpcy5hcnJheVtpbmRleCp0aGlzLml0ZW1TaXplKzFdO30sc2V0WTpmdW5jdGlvbiBzZXRZKGluZGV4LHkpe3RoaXMuYXJyYXlbaW5kZXgqdGhpcy5pdGVtU2l6ZSsxXT15O3JldHVybiB0aGlzO30sZ2V0WjpmdW5jdGlvbiBnZXRaKGluZGV4KXtyZXR1cm4gdGhpcy5hcnJheVtpbmRleCp0aGlzLml0ZW1TaXplKzJdO30sc2V0WjpmdW5jdGlvbiBzZXRaKGluZGV4LHope3RoaXMuYXJyYXlbaW5kZXgqdGhpcy5pdGVtU2l6ZSsyXT16O3JldHVybiB0aGlzO30sZ2V0VzpmdW5jdGlvbiBnZXRXKGluZGV4KXtyZXR1cm4gdGhpcy5hcnJheVtpbmRleCp0aGlzLml0ZW1TaXplKzNdO30sc2V0VzpmdW5jdGlvbiBzZXRXKGluZGV4LHcpe3RoaXMuYXJyYXlbaW5kZXgqdGhpcy5pdGVtU2l6ZSszXT13O3JldHVybiB0aGlzO30sc2V0WFk6ZnVuY3Rpb24gc2V0WFkoaW5kZXgseCx5KXtpbmRleCo9dGhpcy5pdGVtU2l6ZTt0aGlzLmFycmF5W2luZGV4KzBdPXg7dGhpcy5hcnJheVtpbmRleCsxXT15O3JldHVybiB0aGlzO30sc2V0WFlaOmZ1bmN0aW9uIHNldFhZWihpbmRleCx4LHkseil7aW5kZXgqPXRoaXMuaXRlbVNpemU7dGhpcy5hcnJheVtpbmRleCswXT14O3RoaXMuYXJyYXlbaW5kZXgrMV09eTt0aGlzLmFycmF5W2luZGV4KzJdPXo7cmV0dXJuIHRoaXM7fSxzZXRYWVpXOmZ1bmN0aW9uIHNldFhZWlcoaW5kZXgseCx5LHosdyl7aW5kZXgqPXRoaXMuaXRlbVNpemU7dGhpcy5hcnJheVtpbmRleCswXT14O3RoaXMuYXJyYXlbaW5kZXgrMV09eTt0aGlzLmFycmF5W2luZGV4KzJdPXo7dGhpcy5hcnJheVtpbmRleCszXT13O3JldHVybiB0aGlzO30sb25VcGxvYWQ6ZnVuY3Rpb24gb25VcGxvYWQoY2FsbGJhY2spe3RoaXMub25VcGxvYWRDYWxsYmFjaz1jYWxsYmFjaztyZXR1cm4gdGhpczt9LGNsb25lOmZ1bmN0aW9uIGNsb25lKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMuYXJyYXksdGhpcy5pdGVtU2l6ZSkuY29weSh0aGlzKTt9fSk7Ly8KZnVuY3Rpb24gSW50OEJ1ZmZlckF0dHJpYnV0ZShhcnJheSxpdGVtU2l6ZSxub3JtYWxpemVkKXtCdWZmZXJBdHRyaWJ1dGUuY2FsbCh0aGlzLG5ldyBJbnQ4QXJyYXkoYXJyYXkpLGl0ZW1TaXplLG5vcm1hbGl6ZWQpO31JbnQ4QnVmZmVyQXR0cmlidXRlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEJ1ZmZlckF0dHJpYnV0ZS5wcm90b3R5cGUpO0ludDhCdWZmZXJBdHRyaWJ1dGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPUludDhCdWZmZXJBdHRyaWJ1dGU7ZnVuY3Rpb24gVWludDhCdWZmZXJBdHRyaWJ1dGUoYXJyYXksaXRlbVNpemUsbm9ybWFsaXplZCl7QnVmZmVyQXR0cmlidXRlLmNhbGwodGhpcyxuZXcgVWludDhBcnJheShhcnJheSksaXRlbVNpemUsbm9ybWFsaXplZCk7fVVpbnQ4QnVmZmVyQXR0cmlidXRlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEJ1ZmZlckF0dHJpYnV0ZS5wcm90b3R5cGUpO1VpbnQ4QnVmZmVyQXR0cmlidXRlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1VaW50OEJ1ZmZlckF0dHJpYnV0ZTtmdW5jdGlvbiBVaW50OENsYW1wZWRCdWZmZXJBdHRyaWJ1dGUoYXJyYXksaXRlbVNpemUsbm9ybWFsaXplZCl7QnVmZmVyQXR0cmlidXRlLmNhbGwodGhpcyxuZXcgVWludDhDbGFtcGVkQXJyYXkoYXJyYXkpLGl0ZW1TaXplLG5vcm1hbGl6ZWQpO31VaW50OENsYW1wZWRCdWZmZXJBdHRyaWJ1dGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoQnVmZmVyQXR0cmlidXRlLnByb3RvdHlwZSk7VWludDhDbGFtcGVkQnVmZmVyQXR0cmlidXRlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1VaW50OENsYW1wZWRCdWZmZXJBdHRyaWJ1dGU7ZnVuY3Rpb24gSW50MTZCdWZmZXJBdHRyaWJ1dGUoYXJyYXksaXRlbVNpemUsbm9ybWFsaXplZCl7QnVmZmVyQXR0cmlidXRlLmNhbGwodGhpcyxuZXcgSW50MTZBcnJheShhcnJheSksaXRlbVNpemUsbm9ybWFsaXplZCk7fUludDE2QnVmZmVyQXR0cmlidXRlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEJ1ZmZlckF0dHJpYnV0ZS5wcm90b3R5cGUpO0ludDE2QnVmZmVyQXR0cmlidXRlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1JbnQxNkJ1ZmZlckF0dHJpYnV0ZTtmdW5jdGlvbiBVaW50MTZCdWZmZXJBdHRyaWJ1dGUoYXJyYXksaXRlbVNpemUsbm9ybWFsaXplZCl7QnVmZmVyQXR0cmlidXRlLmNhbGwodGhpcyxuZXcgVWludDE2QXJyYXkoYXJyYXkpLGl0ZW1TaXplLG5vcm1hbGl6ZWQpO31VaW50MTZCdWZmZXJBdHRyaWJ1dGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoQnVmZmVyQXR0cmlidXRlLnByb3RvdHlwZSk7VWludDE2QnVmZmVyQXR0cmlidXRlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1VaW50MTZCdWZmZXJBdHRyaWJ1dGU7ZnVuY3Rpb24gSW50MzJCdWZmZXJBdHRyaWJ1dGUoYXJyYXksaXRlbVNpemUsbm9ybWFsaXplZCl7QnVmZmVyQXR0cmlidXRlLmNhbGwodGhpcyxuZXcgSW50MzJBcnJheShhcnJheSksaXRlbVNpemUsbm9ybWFsaXplZCk7fUludDMyQnVmZmVyQXR0cmlidXRlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEJ1ZmZlckF0dHJpYnV0ZS5wcm90b3R5cGUpO0ludDMyQnVmZmVyQXR0cmlidXRlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1JbnQzMkJ1ZmZlckF0dHJpYnV0ZTtmdW5jdGlvbiBVaW50MzJCdWZmZXJBdHRyaWJ1dGUoYXJyYXksaXRlbVNpemUsbm9ybWFsaXplZCl7QnVmZmVyQXR0cmlidXRlLmNhbGwodGhpcyxuZXcgVWludDMyQXJyYXkoYXJyYXkpLGl0ZW1TaXplLG5vcm1hbGl6ZWQpO31VaW50MzJCdWZmZXJBdHRyaWJ1dGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoQnVmZmVyQXR0cmlidXRlLnByb3RvdHlwZSk7VWludDMyQnVmZmVyQXR0cmlidXRlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1VaW50MzJCdWZmZXJBdHRyaWJ1dGU7ZnVuY3Rpb24gRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZShhcnJheSxpdGVtU2l6ZSxub3JtYWxpemVkKXtCdWZmZXJBdHRyaWJ1dGUuY2FsbCh0aGlzLG5ldyBGbG9hdDMyQXJyYXkoYXJyYXkpLGl0ZW1TaXplLG5vcm1hbGl6ZWQpO31GbG9hdDMyQnVmZmVyQXR0cmlidXRlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEJ1ZmZlckF0dHJpYnV0ZS5wcm90b3R5cGUpO0Zsb2F0MzJCdWZmZXJBdHRyaWJ1dGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPUZsb2F0MzJCdWZmZXJBdHRyaWJ1dGU7ZnVuY3Rpb24gRmxvYXQ2NEJ1ZmZlckF0dHJpYnV0ZShhcnJheSxpdGVtU2l6ZSxub3JtYWxpemVkKXtCdWZmZXJBdHRyaWJ1dGUuY2FsbCh0aGlzLG5ldyBGbG9hdDY0QXJyYXkoYXJyYXkpLGl0ZW1TaXplLG5vcm1hbGl6ZWQpO31GbG9hdDY0QnVmZmVyQXR0cmlidXRlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEJ1ZmZlckF0dHJpYnV0ZS5wcm90b3R5cGUpO0Zsb2F0NjRCdWZmZXJBdHRyaWJ1dGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPUZsb2F0NjRCdWZmZXJBdHRyaWJ1dGU7LyoqCiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vCiAqL2Z1bmN0aW9uIERpcmVjdEdlb21ldHJ5KCl7dGhpcy5pbmRpY2VzPVtdO3RoaXMudmVydGljZXM9W107dGhpcy5ub3JtYWxzPVtdO3RoaXMuY29sb3JzPVtdO3RoaXMudXZzPVtdO3RoaXMudXZzMj1bXTt0aGlzLmdyb3Vwcz1bXTt0aGlzLm1vcnBoVGFyZ2V0cz17fTt0aGlzLnNraW5XZWlnaHRzPVtdO3RoaXMuc2tpbkluZGljZXM9W107Ly8gdGhpcy5saW5lRGlzdGFuY2VzID0gW107CnRoaXMuYm91bmRpbmdCb3g9bnVsbDt0aGlzLmJvdW5kaW5nU3BoZXJlPW51bGw7Ly8gdXBkYXRlIGZsYWdzCnRoaXMudmVydGljZXNOZWVkVXBkYXRlPWZhbHNlO3RoaXMubm9ybWFsc05lZWRVcGRhdGU9ZmFsc2U7dGhpcy5jb2xvcnNOZWVkVXBkYXRlPWZhbHNlO3RoaXMudXZzTmVlZFVwZGF0ZT1mYWxzZTt0aGlzLmdyb3Vwc05lZWRVcGRhdGU9ZmFsc2U7fU9iamVjdC5hc3NpZ24oRGlyZWN0R2VvbWV0cnkucHJvdG90eXBlLHtjb21wdXRlR3JvdXBzOmZ1bmN0aW9uIGNvbXB1dGVHcm91cHMoZ2VvbWV0cnkpe3ZhciBncm91cDt2YXIgZ3JvdXBzPVtdO3ZhciBtYXRlcmlhbEluZGV4PXVuZGVmaW5lZDt2YXIgZmFjZXM9Z2VvbWV0cnkuZmFjZXM7Zm9yKHZhciBpPTA7aTxmYWNlcy5sZW5ndGg7aSsrKXt2YXIgZmFjZT1mYWNlc1tpXTsvLyBtYXRlcmlhbHMKaWYoZmFjZS5tYXRlcmlhbEluZGV4IT09bWF0ZXJpYWxJbmRleCl7bWF0ZXJpYWxJbmRleD1mYWNlLm1hdGVyaWFsSW5kZXg7aWYoZ3JvdXAhPT11bmRlZmluZWQpe2dyb3VwLmNvdW50PWkqMy1ncm91cC5zdGFydDtncm91cHMucHVzaChncm91cCk7fWdyb3VwPXtzdGFydDppKjMsbWF0ZXJpYWxJbmRleDptYXRlcmlhbEluZGV4fTt9fWlmKGdyb3VwIT09dW5kZWZpbmVkKXtncm91cC5jb3VudD1pKjMtZ3JvdXAuc3RhcnQ7Z3JvdXBzLnB1c2goZ3JvdXApO310aGlzLmdyb3Vwcz1ncm91cHM7fSxmcm9tR2VvbWV0cnk6ZnVuY3Rpb24gZnJvbUdlb21ldHJ5KGdlb21ldHJ5KXt2YXIgZmFjZXM9Z2VvbWV0cnkuZmFjZXM7dmFyIHZlcnRpY2VzPWdlb21ldHJ5LnZlcnRpY2VzO3ZhciBmYWNlVmVydGV4VXZzPWdlb21ldHJ5LmZhY2VWZXJ0ZXhVdnM7dmFyIGhhc0ZhY2VWZXJ0ZXhVdj1mYWNlVmVydGV4VXZzWzBdJiZmYWNlVmVydGV4VXZzWzBdLmxlbmd0aD4wO3ZhciBoYXNGYWNlVmVydGV4VXYyPWZhY2VWZXJ0ZXhVdnNbMV0mJmZhY2VWZXJ0ZXhVdnNbMV0ubGVuZ3RoPjA7Ly8gbW9ycGhzCnZhciBtb3JwaFRhcmdldHM9Z2VvbWV0cnkubW9ycGhUYXJnZXRzO3ZhciBtb3JwaFRhcmdldHNMZW5ndGg9bW9ycGhUYXJnZXRzLmxlbmd0aDt2YXIgbW9ycGhUYXJnZXRzUG9zaXRpb247aWYobW9ycGhUYXJnZXRzTGVuZ3RoPjApe21vcnBoVGFyZ2V0c1Bvc2l0aW9uPVtdO2Zvcih2YXIgaT0wO2k8bW9ycGhUYXJnZXRzTGVuZ3RoO2krKyl7bW9ycGhUYXJnZXRzUG9zaXRpb25baV09W107fXRoaXMubW9ycGhUYXJnZXRzLnBvc2l0aW9uPW1vcnBoVGFyZ2V0c1Bvc2l0aW9uO312YXIgbW9ycGhOb3JtYWxzPWdlb21ldHJ5Lm1vcnBoTm9ybWFsczt2YXIgbW9ycGhOb3JtYWxzTGVuZ3RoPW1vcnBoTm9ybWFscy5sZW5ndGg7dmFyIG1vcnBoVGFyZ2V0c05vcm1hbDtpZihtb3JwaE5vcm1hbHNMZW5ndGg+MCl7bW9ycGhUYXJnZXRzTm9ybWFsPVtdO2Zvcih2YXIgaT0wO2k8bW9ycGhOb3JtYWxzTGVuZ3RoO2krKyl7bW9ycGhUYXJnZXRzTm9ybWFsW2ldPVtdO310aGlzLm1vcnBoVGFyZ2V0cy5ub3JtYWw9bW9ycGhUYXJnZXRzTm9ybWFsO30vLyBza2lucwp2YXIgc2tpbkluZGljZXM9Z2VvbWV0cnkuc2tpbkluZGljZXM7dmFyIHNraW5XZWlnaHRzPWdlb21ldHJ5LnNraW5XZWlnaHRzO3ZhciBoYXNTa2luSW5kaWNlcz1za2luSW5kaWNlcy5sZW5ndGg9PT12ZXJ0aWNlcy5sZW5ndGg7dmFyIGhhc1NraW5XZWlnaHRzPXNraW5XZWlnaHRzLmxlbmd0aD09PXZlcnRpY2VzLmxlbmd0aDsvLwpmb3IodmFyIGk9MDtpPGZhY2VzLmxlbmd0aDtpKyspe3ZhciBmYWNlPWZhY2VzW2ldO3RoaXMudmVydGljZXMucHVzaCh2ZXJ0aWNlc1tmYWNlLmFdLHZlcnRpY2VzW2ZhY2UuYl0sdmVydGljZXNbZmFjZS5jXSk7dmFyIHZlcnRleE5vcm1hbHM9ZmFjZS52ZXJ0ZXhOb3JtYWxzO2lmKHZlcnRleE5vcm1hbHMubGVuZ3RoPT09Myl7dGhpcy5ub3JtYWxzLnB1c2godmVydGV4Tm9ybWFsc1swXSx2ZXJ0ZXhOb3JtYWxzWzFdLHZlcnRleE5vcm1hbHNbMl0pO31lbHNle3ZhciBub3JtYWw9ZmFjZS5ub3JtYWw7dGhpcy5ub3JtYWxzLnB1c2gobm9ybWFsLG5vcm1hbCxub3JtYWwpO312YXIgdmVydGV4Q29sb3JzPWZhY2UudmVydGV4Q29sb3JzO2lmKHZlcnRleENvbG9ycy5sZW5ndGg9PT0zKXt0aGlzLmNvbG9ycy5wdXNoKHZlcnRleENvbG9yc1swXSx2ZXJ0ZXhDb2xvcnNbMV0sdmVydGV4Q29sb3JzWzJdKTt9ZWxzZXt2YXIgY29sb3I9ZmFjZS5jb2xvcjt0aGlzLmNvbG9ycy5wdXNoKGNvbG9yLGNvbG9yLGNvbG9yKTt9aWYoaGFzRmFjZVZlcnRleFV2PT09dHJ1ZSl7dmFyIHZlcnRleFV2cz1mYWNlVmVydGV4VXZzWzBdW2ldO2lmKHZlcnRleFV2cyE9PXVuZGVmaW5lZCl7dGhpcy51dnMucHVzaCh2ZXJ0ZXhVdnNbMF0sdmVydGV4VXZzWzFdLHZlcnRleFV2c1syXSk7fWVsc2V7Y29uc29sZS53YXJuKCdUSFJFRS5EaXJlY3RHZW9tZXRyeS5mcm9tR2VvbWV0cnkoKTogVW5kZWZpbmVkIHZlcnRleFV2ICcsaSk7dGhpcy51dnMucHVzaChuZXcgVmVjdG9yMigpLG5ldyBWZWN0b3IyKCksbmV3IFZlY3RvcjIoKSk7fX1pZihoYXNGYWNlVmVydGV4VXYyPT09dHJ1ZSl7dmFyIHZlcnRleFV2cz1mYWNlVmVydGV4VXZzWzFdW2ldO2lmKHZlcnRleFV2cyE9PXVuZGVmaW5lZCl7dGhpcy51dnMyLnB1c2godmVydGV4VXZzWzBdLHZlcnRleFV2c1sxXSx2ZXJ0ZXhVdnNbMl0pO31lbHNle2NvbnNvbGUud2FybignVEhSRUUuRGlyZWN0R2VvbWV0cnkuZnJvbUdlb21ldHJ5KCk6IFVuZGVmaW5lZCB2ZXJ0ZXhVdjIgJyxpKTt0aGlzLnV2czIucHVzaChuZXcgVmVjdG9yMigpLG5ldyBWZWN0b3IyKCksbmV3IFZlY3RvcjIoKSk7fX0vLyBtb3JwaHMKZm9yKHZhciBqPTA7ajxtb3JwaFRhcmdldHNMZW5ndGg7aisrKXt2YXIgbW9ycGhUYXJnZXQ9bW9ycGhUYXJnZXRzW2pdLnZlcnRpY2VzO21vcnBoVGFyZ2V0c1Bvc2l0aW9uW2pdLnB1c2gobW9ycGhUYXJnZXRbZmFjZS5hXSxtb3JwaFRhcmdldFtmYWNlLmJdLG1vcnBoVGFyZ2V0W2ZhY2UuY10pO31mb3IodmFyIGo9MDtqPG1vcnBoTm9ybWFsc0xlbmd0aDtqKyspe3ZhciBtb3JwaE5vcm1hbD1tb3JwaE5vcm1hbHNbal0udmVydGV4Tm9ybWFsc1tpXTttb3JwaFRhcmdldHNOb3JtYWxbal0ucHVzaChtb3JwaE5vcm1hbC5hLG1vcnBoTm9ybWFsLmIsbW9ycGhOb3JtYWwuYyk7fS8vIHNraW5zCmlmKGhhc1NraW5JbmRpY2VzKXt0aGlzLnNraW5JbmRpY2VzLnB1c2goc2tpbkluZGljZXNbZmFjZS5hXSxza2luSW5kaWNlc1tmYWNlLmJdLHNraW5JbmRpY2VzW2ZhY2UuY10pO31pZihoYXNTa2luV2VpZ2h0cyl7dGhpcy5za2luV2VpZ2h0cy5wdXNoKHNraW5XZWlnaHRzW2ZhY2UuYV0sc2tpbldlaWdodHNbZmFjZS5iXSxza2luV2VpZ2h0c1tmYWNlLmNdKTt9fXRoaXMuY29tcHV0ZUdyb3VwcyhnZW9tZXRyeSk7dGhpcy52ZXJ0aWNlc05lZWRVcGRhdGU9Z2VvbWV0cnkudmVydGljZXNOZWVkVXBkYXRlO3RoaXMubm9ybWFsc05lZWRVcGRhdGU9Z2VvbWV0cnkubm9ybWFsc05lZWRVcGRhdGU7dGhpcy5jb2xvcnNOZWVkVXBkYXRlPWdlb21ldHJ5LmNvbG9yc05lZWRVcGRhdGU7dGhpcy51dnNOZWVkVXBkYXRlPWdlb21ldHJ5LnV2c05lZWRVcGRhdGU7dGhpcy5ncm91cHNOZWVkVXBkYXRlPWdlb21ldHJ5Lmdyb3Vwc05lZWRVcGRhdGU7cmV0dXJuIHRoaXM7fX0pOy8qKgogKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tLwogKi9mdW5jdGlvbiBhcnJheU1heChhcnJheSl7aWYoYXJyYXkubGVuZ3RoPT09MClyZXR1cm4tSW5maW5pdHk7dmFyIG1heD1hcnJheVswXTtmb3IodmFyIGk9MSxsPWFycmF5Lmxlbmd0aDtpPGw7KytpKXtpZihhcnJheVtpXT5tYXgpbWF4PWFycmF5W2ldO31yZXR1cm4gbWF4O30vKioKICogQGF1dGhvciBhbHRlcmVkcSAvIGh0dHA6Ly9hbHRlcmVkcXVhbGlhLmNvbS8KICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS8KICovdmFyIGJ1ZmZlckdlb21ldHJ5SWQ9MTsvLyBCdWZmZXJHZW9tZXRyeSB1c2VzIG9kZCBudW1iZXJzIGFzIElkCmZ1bmN0aW9uIEJ1ZmZlckdlb21ldHJ5KCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsJ2lkJyx7dmFsdWU6YnVmZmVyR2VvbWV0cnlJZCs9Mn0pO3RoaXMudXVpZD1fTWF0aC5nZW5lcmF0ZVVVSUQoKTt0aGlzLm5hbWU9Jyc7dGhpcy50eXBlPSdCdWZmZXJHZW9tZXRyeSc7dGhpcy5pbmRleD1udWxsO3RoaXMuYXR0cmlidXRlcz17fTt0aGlzLm1vcnBoQXR0cmlidXRlcz17fTt0aGlzLmdyb3Vwcz1bXTt0aGlzLmJvdW5kaW5nQm94PW51bGw7dGhpcy5ib3VuZGluZ1NwaGVyZT1udWxsO3RoaXMuZHJhd1JhbmdlPXtzdGFydDowLGNvdW50OkluZmluaXR5fTt9QnVmZmVyR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShFdmVudERpc3BhdGNoZXIucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6QnVmZmVyR2VvbWV0cnksaXNCdWZmZXJHZW9tZXRyeTp0cnVlLGdldEluZGV4OmZ1bmN0aW9uIGdldEluZGV4KCl7cmV0dXJuIHRoaXMuaW5kZXg7fSxzZXRJbmRleDpmdW5jdGlvbiBzZXRJbmRleChpbmRleCl7aWYoQXJyYXkuaXNBcnJheShpbmRleCkpe3RoaXMuaW5kZXg9bmV3KGFycmF5TWF4KGluZGV4KT42NTUzNT9VaW50MzJCdWZmZXJBdHRyaWJ1dGU6VWludDE2QnVmZmVyQXR0cmlidXRlKShpbmRleCwxKTt9ZWxzZXt0aGlzLmluZGV4PWluZGV4O319LGFkZEF0dHJpYnV0ZTpmdW5jdGlvbiBhZGRBdHRyaWJ1dGUobmFtZSxhdHRyaWJ1dGUpe2lmKCEoYXR0cmlidXRlJiZhdHRyaWJ1dGUuaXNCdWZmZXJBdHRyaWJ1dGUpJiYhKGF0dHJpYnV0ZSYmYXR0cmlidXRlLmlzSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGUpKXtjb25zb2xlLndhcm4oJ1RIUkVFLkJ1ZmZlckdlb21ldHJ5OiAuYWRkQXR0cmlidXRlKCkgbm93IGV4cGVjdHMgKCBuYW1lLCBhdHRyaWJ1dGUgKS4nKTt0aGlzLmFkZEF0dHJpYnV0ZShuYW1lLG5ldyBCdWZmZXJBdHRyaWJ1dGUoYXJndW1lbnRzWzFdLGFyZ3VtZW50c1syXSkpO3JldHVybjt9aWYobmFtZT09PSdpbmRleCcpe2NvbnNvbGUud2FybignVEhSRUUuQnVmZmVyR2VvbWV0cnkuYWRkQXR0cmlidXRlOiBVc2UgLnNldEluZGV4KCkgZm9yIGluZGV4IGF0dHJpYnV0ZS4nKTt0aGlzLnNldEluZGV4KGF0dHJpYnV0ZSk7cmV0dXJuO310aGlzLmF0dHJpYnV0ZXNbbmFtZV09YXR0cmlidXRlO3JldHVybiB0aGlzO30sZ2V0QXR0cmlidXRlOmZ1bmN0aW9uIGdldEF0dHJpYnV0ZShuYW1lKXtyZXR1cm4gdGhpcy5hdHRyaWJ1dGVzW25hbWVdO30scmVtb3ZlQXR0cmlidXRlOmZ1bmN0aW9uIHJlbW92ZUF0dHJpYnV0ZShuYW1lKXtkZWxldGUgdGhpcy5hdHRyaWJ1dGVzW25hbWVdO3JldHVybiB0aGlzO30sYWRkR3JvdXA6ZnVuY3Rpb24gYWRkR3JvdXAoc3RhcnQsY291bnQsbWF0ZXJpYWxJbmRleCl7dGhpcy5ncm91cHMucHVzaCh7c3RhcnQ6c3RhcnQsY291bnQ6Y291bnQsbWF0ZXJpYWxJbmRleDptYXRlcmlhbEluZGV4IT09dW5kZWZpbmVkP21hdGVyaWFsSW5kZXg6MH0pO30sY2xlYXJHcm91cHM6ZnVuY3Rpb24gY2xlYXJHcm91cHMoKXt0aGlzLmdyb3Vwcz1bXTt9LHNldERyYXdSYW5nZTpmdW5jdGlvbiBzZXREcmF3UmFuZ2Uoc3RhcnQsY291bnQpe3RoaXMuZHJhd1JhbmdlLnN0YXJ0PXN0YXJ0O3RoaXMuZHJhd1JhbmdlLmNvdW50PWNvdW50O30sYXBwbHlNYXRyaXg6ZnVuY3Rpb24gYXBwbHlNYXRyaXgobWF0cml4KXt2YXIgcG9zaXRpb249dGhpcy5hdHRyaWJ1dGVzLnBvc2l0aW9uO2lmKHBvc2l0aW9uIT09dW5kZWZpbmVkKXttYXRyaXguYXBwbHlUb0J1ZmZlckF0dHJpYnV0ZShwb3NpdGlvbik7cG9zaXRpb24ubmVlZHNVcGRhdGU9dHJ1ZTt9dmFyIG5vcm1hbD10aGlzLmF0dHJpYnV0ZXMubm9ybWFsO2lmKG5vcm1hbCE9PXVuZGVmaW5lZCl7dmFyIG5vcm1hbE1hdHJpeD1uZXcgTWF0cml4MygpLmdldE5vcm1hbE1hdHJpeChtYXRyaXgpO25vcm1hbE1hdHJpeC5hcHBseVRvQnVmZmVyQXR0cmlidXRlKG5vcm1hbCk7bm9ybWFsLm5lZWRzVXBkYXRlPXRydWU7fWlmKHRoaXMuYm91bmRpbmdCb3ghPT1udWxsKXt0aGlzLmNvbXB1dGVCb3VuZGluZ0JveCgpO31pZih0aGlzLmJvdW5kaW5nU3BoZXJlIT09bnVsbCl7dGhpcy5jb21wdXRlQm91bmRpbmdTcGhlcmUoKTt9cmV0dXJuIHRoaXM7fSxyb3RhdGVYOmZ1bmN0aW9uKCl7Ly8gcm90YXRlIGdlb21ldHJ5IGFyb3VuZCB3b3JsZCB4LWF4aXMKdmFyIG0xPW5ldyBNYXRyaXg0KCk7cmV0dXJuIGZ1bmN0aW9uIHJvdGF0ZVgoYW5nbGUpe20xLm1ha2VSb3RhdGlvblgoYW5nbGUpO3RoaXMuYXBwbHlNYXRyaXgobTEpO3JldHVybiB0aGlzO307fSgpLHJvdGF0ZVk6ZnVuY3Rpb24oKXsvLyByb3RhdGUgZ2VvbWV0cnkgYXJvdW5kIHdvcmxkIHktYXhpcwp2YXIgbTE9bmV3IE1hdHJpeDQoKTtyZXR1cm4gZnVuY3Rpb24gcm90YXRlWShhbmdsZSl7bTEubWFrZVJvdGF0aW9uWShhbmdsZSk7dGhpcy5hcHBseU1hdHJpeChtMSk7cmV0dXJuIHRoaXM7fTt9KCkscm90YXRlWjpmdW5jdGlvbigpey8vIHJvdGF0ZSBnZW9tZXRyeSBhcm91bmQgd29ybGQgei1heGlzCnZhciBtMT1uZXcgTWF0cml4NCgpO3JldHVybiBmdW5jdGlvbiByb3RhdGVaKGFuZ2xlKXttMS5tYWtlUm90YXRpb25aKGFuZ2xlKTt0aGlzLmFwcGx5TWF0cml4KG0xKTtyZXR1cm4gdGhpczt9O30oKSx0cmFuc2xhdGU6ZnVuY3Rpb24oKXsvLyB0cmFuc2xhdGUgZ2VvbWV0cnkKdmFyIG0xPW5ldyBNYXRyaXg0KCk7cmV0dXJuIGZ1bmN0aW9uIHRyYW5zbGF0ZSh4LHkseil7bTEubWFrZVRyYW5zbGF0aW9uKHgseSx6KTt0aGlzLmFwcGx5TWF0cml4KG0xKTtyZXR1cm4gdGhpczt9O30oKSxzY2FsZTpmdW5jdGlvbigpey8vIHNjYWxlIGdlb21ldHJ5CnZhciBtMT1uZXcgTWF0cml4NCgpO3JldHVybiBmdW5jdGlvbiBzY2FsZSh4LHkseil7bTEubWFrZVNjYWxlKHgseSx6KTt0aGlzLmFwcGx5TWF0cml4KG0xKTtyZXR1cm4gdGhpczt9O30oKSxsb29rQXQ6ZnVuY3Rpb24oKXt2YXIgb2JqPW5ldyBPYmplY3QzRCgpO3JldHVybiBmdW5jdGlvbiBsb29rQXQodmVjdG9yKXtvYmoubG9va0F0KHZlY3Rvcik7b2JqLnVwZGF0ZU1hdHJpeCgpO3RoaXMuYXBwbHlNYXRyaXgob2JqLm1hdHJpeCk7fTt9KCksY2VudGVyOmZ1bmN0aW9uIGNlbnRlcigpe3RoaXMuY29tcHV0ZUJvdW5kaW5nQm94KCk7dmFyIG9mZnNldD10aGlzLmJvdW5kaW5nQm94LmdldENlbnRlcigpLm5lZ2F0ZSgpO3RoaXMudHJhbnNsYXRlKG9mZnNldC54LG9mZnNldC55LG9mZnNldC56KTtyZXR1cm4gb2Zmc2V0O30sc2V0RnJvbU9iamVjdDpmdW5jdGlvbiBzZXRGcm9tT2JqZWN0KG9iamVjdCl7Ly8gY29uc29sZS5sb2coICdUSFJFRS5CdWZmZXJHZW9tZXRyeS5zZXRGcm9tT2JqZWN0KCkuIENvbnZlcnRpbmcnLCBvYmplY3QsIHRoaXMgKTsKdmFyIGdlb21ldHJ5PW9iamVjdC5nZW9tZXRyeTtpZihvYmplY3QuaXNQb2ludHN8fG9iamVjdC5pc0xpbmUpe3ZhciBwb3NpdGlvbnM9bmV3IEZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUoZ2VvbWV0cnkudmVydGljZXMubGVuZ3RoKjMsMyk7dmFyIGNvbG9ycz1uZXcgRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZShnZW9tZXRyeS5jb2xvcnMubGVuZ3RoKjMsMyk7dGhpcy5hZGRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJyxwb3NpdGlvbnMuY29weVZlY3RvcjNzQXJyYXkoZ2VvbWV0cnkudmVydGljZXMpKTt0aGlzLmFkZEF0dHJpYnV0ZSgnY29sb3InLGNvbG9ycy5jb3B5Q29sb3JzQXJyYXkoZ2VvbWV0cnkuY29sb3JzKSk7aWYoZ2VvbWV0cnkubGluZURpc3RhbmNlcyYmZ2VvbWV0cnkubGluZURpc3RhbmNlcy5sZW5ndGg9PT1nZW9tZXRyeS52ZXJ0aWNlcy5sZW5ndGgpe3ZhciBsaW5lRGlzdGFuY2VzPW5ldyBGbG9hdDMyQnVmZmVyQXR0cmlidXRlKGdlb21ldHJ5LmxpbmVEaXN0YW5jZXMubGVuZ3RoLDEpO3RoaXMuYWRkQXR0cmlidXRlKCdsaW5lRGlzdGFuY2UnLGxpbmVEaXN0YW5jZXMuY29weUFycmF5KGdlb21ldHJ5LmxpbmVEaXN0YW5jZXMpKTt9aWYoZ2VvbWV0cnkuYm91bmRpbmdTcGhlcmUhPT1udWxsKXt0aGlzLmJvdW5kaW5nU3BoZXJlPWdlb21ldHJ5LmJvdW5kaW5nU3BoZXJlLmNsb25lKCk7fWlmKGdlb21ldHJ5LmJvdW5kaW5nQm94IT09bnVsbCl7dGhpcy5ib3VuZGluZ0JveD1nZW9tZXRyeS5ib3VuZGluZ0JveC5jbG9uZSgpO319ZWxzZSBpZihvYmplY3QuaXNNZXNoKXtpZihnZW9tZXRyeSYmZ2VvbWV0cnkuaXNHZW9tZXRyeSl7dGhpcy5mcm9tR2VvbWV0cnkoZ2VvbWV0cnkpO319cmV0dXJuIHRoaXM7fSxzZXRGcm9tUG9pbnRzOmZ1bmN0aW9uIHNldEZyb21Qb2ludHMocG9pbnRzKXt2YXIgcG9zaXRpb249W107Zm9yKHZhciBpPTAsbD1wb2ludHMubGVuZ3RoO2k8bDtpKyspe3ZhciBwb2ludD1wb2ludHNbaV07cG9zaXRpb24ucHVzaChwb2ludC54LHBvaW50LnkscG9pbnQuenx8MCk7fXRoaXMuYWRkQXR0cmlidXRlKCdwb3NpdGlvbicsbmV3IEZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUocG9zaXRpb24sMykpO3JldHVybiB0aGlzO30sdXBkYXRlRnJvbU9iamVjdDpmdW5jdGlvbiB1cGRhdGVGcm9tT2JqZWN0KG9iamVjdCl7dmFyIGdlb21ldHJ5PW9iamVjdC5nZW9tZXRyeTtpZihvYmplY3QuaXNNZXNoKXt2YXIgZGlyZWN0PWdlb21ldHJ5Ll9fZGlyZWN0R2VvbWV0cnk7aWYoZ2VvbWV0cnkuZWxlbWVudHNOZWVkVXBkYXRlPT09dHJ1ZSl7ZGlyZWN0PXVuZGVmaW5lZDtnZW9tZXRyeS5lbGVtZW50c05lZWRVcGRhdGU9ZmFsc2U7fWlmKGRpcmVjdD09PXVuZGVmaW5lZCl7cmV0dXJuIHRoaXMuZnJvbUdlb21ldHJ5KGdlb21ldHJ5KTt9ZGlyZWN0LnZlcnRpY2VzTmVlZFVwZGF0ZT1nZW9tZXRyeS52ZXJ0aWNlc05lZWRVcGRhdGU7ZGlyZWN0Lm5vcm1hbHNOZWVkVXBkYXRlPWdlb21ldHJ5Lm5vcm1hbHNOZWVkVXBkYXRlO2RpcmVjdC5jb2xvcnNOZWVkVXBkYXRlPWdlb21ldHJ5LmNvbG9yc05lZWRVcGRhdGU7ZGlyZWN0LnV2c05lZWRVcGRhdGU9Z2VvbWV0cnkudXZzTmVlZFVwZGF0ZTtkaXJlY3QuZ3JvdXBzTmVlZFVwZGF0ZT1nZW9tZXRyeS5ncm91cHNOZWVkVXBkYXRlO2dlb21ldHJ5LnZlcnRpY2VzTmVlZFVwZGF0ZT1mYWxzZTtnZW9tZXRyeS5ub3JtYWxzTmVlZFVwZGF0ZT1mYWxzZTtnZW9tZXRyeS5jb2xvcnNOZWVkVXBkYXRlPWZhbHNlO2dlb21ldHJ5LnV2c05lZWRVcGRhdGU9ZmFsc2U7Z2VvbWV0cnkuZ3JvdXBzTmVlZFVwZGF0ZT1mYWxzZTtnZW9tZXRyeT1kaXJlY3Q7fXZhciBhdHRyaWJ1dGU7aWYoZ2VvbWV0cnkudmVydGljZXNOZWVkVXBkYXRlPT09dHJ1ZSl7YXR0cmlidXRlPXRoaXMuYXR0cmlidXRlcy5wb3NpdGlvbjtpZihhdHRyaWJ1dGUhPT11bmRlZmluZWQpe2F0dHJpYnV0ZS5jb3B5VmVjdG9yM3NBcnJheShnZW9tZXRyeS52ZXJ0aWNlcyk7YXR0cmlidXRlLm5lZWRzVXBkYXRlPXRydWU7fWdlb21ldHJ5LnZlcnRpY2VzTmVlZFVwZGF0ZT1mYWxzZTt9aWYoZ2VvbWV0cnkubm9ybWFsc05lZWRVcGRhdGU9PT10cnVlKXthdHRyaWJ1dGU9dGhpcy5hdHRyaWJ1dGVzLm5vcm1hbDtpZihhdHRyaWJ1dGUhPT11bmRlZmluZWQpe2F0dHJpYnV0ZS5jb3B5VmVjdG9yM3NBcnJheShnZW9tZXRyeS5ub3JtYWxzKTthdHRyaWJ1dGUubmVlZHNVcGRhdGU9dHJ1ZTt9Z2VvbWV0cnkubm9ybWFsc05lZWRVcGRhdGU9ZmFsc2U7fWlmKGdlb21ldHJ5LmNvbG9yc05lZWRVcGRhdGU9PT10cnVlKXthdHRyaWJ1dGU9dGhpcy5hdHRyaWJ1dGVzLmNvbG9yO2lmKGF0dHJpYnV0ZSE9PXVuZGVmaW5lZCl7YXR0cmlidXRlLmNvcHlDb2xvcnNBcnJheShnZW9tZXRyeS5jb2xvcnMpO2F0dHJpYnV0ZS5uZWVkc1VwZGF0ZT10cnVlO31nZW9tZXRyeS5jb2xvcnNOZWVkVXBkYXRlPWZhbHNlO31pZihnZW9tZXRyeS51dnNOZWVkVXBkYXRlKXthdHRyaWJ1dGU9dGhpcy5hdHRyaWJ1dGVzLnV2O2lmKGF0dHJpYnV0ZSE9PXVuZGVmaW5lZCl7YXR0cmlidXRlLmNvcHlWZWN0b3Iyc0FycmF5KGdlb21ldHJ5LnV2cyk7YXR0cmlidXRlLm5lZWRzVXBkYXRlPXRydWU7fWdlb21ldHJ5LnV2c05lZWRVcGRhdGU9ZmFsc2U7fWlmKGdlb21ldHJ5LmxpbmVEaXN0YW5jZXNOZWVkVXBkYXRlKXthdHRyaWJ1dGU9dGhpcy5hdHRyaWJ1dGVzLmxpbmVEaXN0YW5jZTtpZihhdHRyaWJ1dGUhPT11bmRlZmluZWQpe2F0dHJpYnV0ZS5jb3B5QXJyYXkoZ2VvbWV0cnkubGluZURpc3RhbmNlcyk7YXR0cmlidXRlLm5lZWRzVXBkYXRlPXRydWU7fWdlb21ldHJ5LmxpbmVEaXN0YW5jZXNOZWVkVXBkYXRlPWZhbHNlO31pZihnZW9tZXRyeS5ncm91cHNOZWVkVXBkYXRlKXtnZW9tZXRyeS5jb21wdXRlR3JvdXBzKG9iamVjdC5nZW9tZXRyeSk7dGhpcy5ncm91cHM9Z2VvbWV0cnkuZ3JvdXBzO2dlb21ldHJ5Lmdyb3Vwc05lZWRVcGRhdGU9ZmFsc2U7fXJldHVybiB0aGlzO30sZnJvbUdlb21ldHJ5OmZ1bmN0aW9uIGZyb21HZW9tZXRyeShnZW9tZXRyeSl7Z2VvbWV0cnkuX19kaXJlY3RHZW9tZXRyeT1uZXcgRGlyZWN0R2VvbWV0cnkoKS5mcm9tR2VvbWV0cnkoZ2VvbWV0cnkpO3JldHVybiB0aGlzLmZyb21EaXJlY3RHZW9tZXRyeShnZW9tZXRyeS5fX2RpcmVjdEdlb21ldHJ5KTt9LGZyb21EaXJlY3RHZW9tZXRyeTpmdW5jdGlvbiBmcm9tRGlyZWN0R2VvbWV0cnkoZ2VvbWV0cnkpe3ZhciBwb3NpdGlvbnM9bmV3IEZsb2F0MzJBcnJheShnZW9tZXRyeS52ZXJ0aWNlcy5sZW5ndGgqMyk7dGhpcy5hZGRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJyxuZXcgQnVmZmVyQXR0cmlidXRlKHBvc2l0aW9ucywzKS5jb3B5VmVjdG9yM3NBcnJheShnZW9tZXRyeS52ZXJ0aWNlcykpO2lmKGdlb21ldHJ5Lm5vcm1hbHMubGVuZ3RoPjApe3ZhciBub3JtYWxzPW5ldyBGbG9hdDMyQXJyYXkoZ2VvbWV0cnkubm9ybWFscy5sZW5ndGgqMyk7dGhpcy5hZGRBdHRyaWJ1dGUoJ25vcm1hbCcsbmV3IEJ1ZmZlckF0dHJpYnV0ZShub3JtYWxzLDMpLmNvcHlWZWN0b3Izc0FycmF5KGdlb21ldHJ5Lm5vcm1hbHMpKTt9aWYoZ2VvbWV0cnkuY29sb3JzLmxlbmd0aD4wKXt2YXIgY29sb3JzPW5ldyBGbG9hdDMyQXJyYXkoZ2VvbWV0cnkuY29sb3JzLmxlbmd0aCozKTt0aGlzLmFkZEF0dHJpYnV0ZSgnY29sb3InLG5ldyBCdWZmZXJBdHRyaWJ1dGUoY29sb3JzLDMpLmNvcHlDb2xvcnNBcnJheShnZW9tZXRyeS5jb2xvcnMpKTt9aWYoZ2VvbWV0cnkudXZzLmxlbmd0aD4wKXt2YXIgdXZzPW5ldyBGbG9hdDMyQXJyYXkoZ2VvbWV0cnkudXZzLmxlbmd0aCoyKTt0aGlzLmFkZEF0dHJpYnV0ZSgndXYnLG5ldyBCdWZmZXJBdHRyaWJ1dGUodXZzLDIpLmNvcHlWZWN0b3Iyc0FycmF5KGdlb21ldHJ5LnV2cykpO31pZihnZW9tZXRyeS51dnMyLmxlbmd0aD4wKXt2YXIgdXZzMj1uZXcgRmxvYXQzMkFycmF5KGdlb21ldHJ5LnV2czIubGVuZ3RoKjIpO3RoaXMuYWRkQXR0cmlidXRlKCd1djInLG5ldyBCdWZmZXJBdHRyaWJ1dGUodXZzMiwyKS5jb3B5VmVjdG9yMnNBcnJheShnZW9tZXRyeS51dnMyKSk7fWlmKGdlb21ldHJ5LmluZGljZXMubGVuZ3RoPjApe3ZhciBUeXBlQXJyYXk9YXJyYXlNYXgoZ2VvbWV0cnkuaW5kaWNlcyk+NjU1MzU/VWludDMyQXJyYXk6VWludDE2QXJyYXk7dmFyIGluZGljZXM9bmV3IFR5cGVBcnJheShnZW9tZXRyeS5pbmRpY2VzLmxlbmd0aCozKTt0aGlzLnNldEluZGV4KG5ldyBCdWZmZXJBdHRyaWJ1dGUoaW5kaWNlcywxKS5jb3B5SW5kaWNlc0FycmF5KGdlb21ldHJ5LmluZGljZXMpKTt9Ly8gZ3JvdXBzCnRoaXMuZ3JvdXBzPWdlb21ldHJ5Lmdyb3VwczsvLyBtb3JwaHMKZm9yKHZhciBuYW1lIGluIGdlb21ldHJ5Lm1vcnBoVGFyZ2V0cyl7dmFyIGFycmF5PVtdO3ZhciBtb3JwaFRhcmdldHM9Z2VvbWV0cnkubW9ycGhUYXJnZXRzW25hbWVdO2Zvcih2YXIgaT0wLGw9bW9ycGhUYXJnZXRzLmxlbmd0aDtpPGw7aSsrKXt2YXIgbW9ycGhUYXJnZXQ9bW9ycGhUYXJnZXRzW2ldO3ZhciBhdHRyaWJ1dGU9bmV3IEZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUobW9ycGhUYXJnZXQubGVuZ3RoKjMsMyk7YXJyYXkucHVzaChhdHRyaWJ1dGUuY29weVZlY3RvcjNzQXJyYXkobW9ycGhUYXJnZXQpKTt9dGhpcy5tb3JwaEF0dHJpYnV0ZXNbbmFtZV09YXJyYXk7fS8vIHNraW5uaW5nCmlmKGdlb21ldHJ5LnNraW5JbmRpY2VzLmxlbmd0aD4wKXt2YXIgc2tpbkluZGljZXM9bmV3IEZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUoZ2VvbWV0cnkuc2tpbkluZGljZXMubGVuZ3RoKjQsNCk7dGhpcy5hZGRBdHRyaWJ1dGUoJ3NraW5JbmRleCcsc2tpbkluZGljZXMuY29weVZlY3RvcjRzQXJyYXkoZ2VvbWV0cnkuc2tpbkluZGljZXMpKTt9aWYoZ2VvbWV0cnkuc2tpbldlaWdodHMubGVuZ3RoPjApe3ZhciBza2luV2VpZ2h0cz1uZXcgRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZShnZW9tZXRyeS5za2luV2VpZ2h0cy5sZW5ndGgqNCw0KTt0aGlzLmFkZEF0dHJpYnV0ZSgnc2tpbldlaWdodCcsc2tpbldlaWdodHMuY29weVZlY3RvcjRzQXJyYXkoZ2VvbWV0cnkuc2tpbldlaWdodHMpKTt9Ly8KaWYoZ2VvbWV0cnkuYm91bmRpbmdTcGhlcmUhPT1udWxsKXt0aGlzLmJvdW5kaW5nU3BoZXJlPWdlb21ldHJ5LmJvdW5kaW5nU3BoZXJlLmNsb25lKCk7fWlmKGdlb21ldHJ5LmJvdW5kaW5nQm94IT09bnVsbCl7dGhpcy5ib3VuZGluZ0JveD1nZW9tZXRyeS5ib3VuZGluZ0JveC5jbG9uZSgpO31yZXR1cm4gdGhpczt9LGNvbXB1dGVCb3VuZGluZ0JveDpmdW5jdGlvbiBjb21wdXRlQm91bmRpbmdCb3goKXtpZih0aGlzLmJvdW5kaW5nQm94PT09bnVsbCl7dGhpcy5ib3VuZGluZ0JveD1uZXcgQm94MygpO312YXIgcG9zaXRpb249dGhpcy5hdHRyaWJ1dGVzLnBvc2l0aW9uO2lmKHBvc2l0aW9uIT09dW5kZWZpbmVkKXt0aGlzLmJvdW5kaW5nQm94LnNldEZyb21CdWZmZXJBdHRyaWJ1dGUocG9zaXRpb24pO31lbHNle3RoaXMuYm91bmRpbmdCb3gubWFrZUVtcHR5KCk7fWlmKGlzTmFOKHRoaXMuYm91bmRpbmdCb3gubWluLngpfHxpc05hTih0aGlzLmJvdW5kaW5nQm94Lm1pbi55KXx8aXNOYU4odGhpcy5ib3VuZGluZ0JveC5taW4ueikpe2NvbnNvbGUuZXJyb3IoJ1RIUkVFLkJ1ZmZlckdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ0JveDogQ29tcHV0ZWQgbWluL21heCBoYXZlIE5hTiB2YWx1ZXMuIFRoZSAicG9zaXRpb24iIGF0dHJpYnV0ZSBpcyBsaWtlbHkgdG8gaGF2ZSBOYU4gdmFsdWVzLicsdGhpcyk7fX0sY29tcHV0ZUJvdW5kaW5nU3BoZXJlOmZ1bmN0aW9uKCl7dmFyIGJveD1uZXcgQm94MygpO3ZhciB2ZWN0b3I9bmV3IFZlY3RvcjMoKTtyZXR1cm4gZnVuY3Rpb24gY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCl7aWYodGhpcy5ib3VuZGluZ1NwaGVyZT09PW51bGwpe3RoaXMuYm91bmRpbmdTcGhlcmU9bmV3IFNwaGVyZSgpO312YXIgcG9zaXRpb249dGhpcy5hdHRyaWJ1dGVzLnBvc2l0aW9uO2lmKHBvc2l0aW9uKXt2YXIgY2VudGVyPXRoaXMuYm91bmRpbmdTcGhlcmUuY2VudGVyO2JveC5zZXRGcm9tQnVmZmVyQXR0cmlidXRlKHBvc2l0aW9uKTtib3guZ2V0Q2VudGVyKGNlbnRlcik7Ly8gaG9waW5nIHRvIGZpbmQgYSBib3VuZGluZ1NwaGVyZSB3aXRoIGEgcmFkaXVzIHNtYWxsZXIgdGhhbiB0aGUKLy8gYm91bmRpbmdTcGhlcmUgb2YgdGhlIGJvdW5kaW5nQm94OiBzcXJ0KDMpIHNtYWxsZXIgaW4gdGhlIGJlc3QgY2FzZQp2YXIgbWF4UmFkaXVzU3E9MDtmb3IodmFyIGk9MCxpbD1wb3NpdGlvbi5jb3VudDtpPGlsO2krKyl7dmVjdG9yLng9cG9zaXRpb24uZ2V0WChpKTt2ZWN0b3IueT1wb3NpdGlvbi5nZXRZKGkpO3ZlY3Rvci56PXBvc2l0aW9uLmdldFooaSk7bWF4UmFkaXVzU3E9TWF0aC5tYXgobWF4UmFkaXVzU3EsY2VudGVyLmRpc3RhbmNlVG9TcXVhcmVkKHZlY3RvcikpO310aGlzLmJvdW5kaW5nU3BoZXJlLnJhZGl1cz1NYXRoLnNxcnQobWF4UmFkaXVzU3EpO2lmKGlzTmFOKHRoaXMuYm91bmRpbmdTcGhlcmUucmFkaXVzKSl7Y29uc29sZS5lcnJvcignVEhSRUUuQnVmZmVyR2VvbWV0cnkuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCk6IENvbXB1dGVkIHJhZGl1cyBpcyBOYU4uIFRoZSAicG9zaXRpb24iIGF0dHJpYnV0ZSBpcyBsaWtlbHkgdG8gaGF2ZSBOYU4gdmFsdWVzLicsdGhpcyk7fX19O30oKSxjb21wdXRlRmFjZU5vcm1hbHM6ZnVuY3Rpb24gY29tcHV0ZUZhY2VOb3JtYWxzKCl7Ly8gYmFja3dhcmRzIGNvbXBhdGliaWxpdHkKfSxjb21wdXRlVmVydGV4Tm9ybWFsczpmdW5jdGlvbiBjb21wdXRlVmVydGV4Tm9ybWFscygpe3ZhciBpbmRleD10aGlzLmluZGV4O3ZhciBhdHRyaWJ1dGVzPXRoaXMuYXR0cmlidXRlczt2YXIgZ3JvdXBzPXRoaXMuZ3JvdXBzO2lmKGF0dHJpYnV0ZXMucG9zaXRpb24pe3ZhciBwb3NpdGlvbnM9YXR0cmlidXRlcy5wb3NpdGlvbi5hcnJheTtpZihhdHRyaWJ1dGVzLm5vcm1hbD09PXVuZGVmaW5lZCl7dGhpcy5hZGRBdHRyaWJ1dGUoJ25vcm1hbCcsbmV3IEJ1ZmZlckF0dHJpYnV0ZShuZXcgRmxvYXQzMkFycmF5KHBvc2l0aW9ucy5sZW5ndGgpLDMpKTt9ZWxzZXsvLyByZXNldCBleGlzdGluZyBub3JtYWxzIHRvIHplcm8KdmFyIGFycmF5PWF0dHJpYnV0ZXMubm9ybWFsLmFycmF5O2Zvcih2YXIgaT0wLGlsPWFycmF5Lmxlbmd0aDtpPGlsO2krKyl7YXJyYXlbaV09MDt9fXZhciBub3JtYWxzPWF0dHJpYnV0ZXMubm9ybWFsLmFycmF5O3ZhciB2QSx2Qix2Qzt2YXIgcEE9bmV3IFZlY3RvcjMoKSxwQj1uZXcgVmVjdG9yMygpLHBDPW5ldyBWZWN0b3IzKCk7dmFyIGNiPW5ldyBWZWN0b3IzKCksYWI9bmV3IFZlY3RvcjMoKTsvLyBpbmRleGVkIGVsZW1lbnRzCmlmKGluZGV4KXt2YXIgaW5kaWNlcz1pbmRleC5hcnJheTtpZihncm91cHMubGVuZ3RoPT09MCl7dGhpcy5hZGRHcm91cCgwLGluZGljZXMubGVuZ3RoKTt9Zm9yKHZhciBqPTAsamw9Z3JvdXBzLmxlbmd0aDtqPGpsOysrail7dmFyIGdyb3VwPWdyb3Vwc1tqXTt2YXIgc3RhcnQ9Z3JvdXAuc3RhcnQ7dmFyIGNvdW50PWdyb3VwLmNvdW50O2Zvcih2YXIgaT1zdGFydCxpbD1zdGFydCtjb3VudDtpPGlsO2krPTMpe3ZBPWluZGljZXNbaSswXSozO3ZCPWluZGljZXNbaSsxXSozO3ZDPWluZGljZXNbaSsyXSozO3BBLmZyb21BcnJheShwb3NpdGlvbnMsdkEpO3BCLmZyb21BcnJheShwb3NpdGlvbnMsdkIpO3BDLmZyb21BcnJheShwb3NpdGlvbnMsdkMpO2NiLnN1YlZlY3RvcnMocEMscEIpO2FiLnN1YlZlY3RvcnMocEEscEIpO2NiLmNyb3NzKGFiKTtub3JtYWxzW3ZBXSs9Y2IueDtub3JtYWxzW3ZBKzFdKz1jYi55O25vcm1hbHNbdkErMl0rPWNiLno7bm9ybWFsc1t2Ql0rPWNiLng7bm9ybWFsc1t2QisxXSs9Y2IueTtub3JtYWxzW3ZCKzJdKz1jYi56O25vcm1hbHNbdkNdKz1jYi54O25vcm1hbHNbdkMrMV0rPWNiLnk7bm9ybWFsc1t2QysyXSs9Y2Iuejt9fX1lbHNley8vIG5vbi1pbmRleGVkIGVsZW1lbnRzICh1bmNvbm5lY3RlZCB0cmlhbmdsZSBzb3VwKQpmb3IodmFyIGk9MCxpbD1wb3NpdGlvbnMubGVuZ3RoO2k8aWw7aSs9OSl7cEEuZnJvbUFycmF5KHBvc2l0aW9ucyxpKTtwQi5mcm9tQXJyYXkocG9zaXRpb25zLGkrMyk7cEMuZnJvbUFycmF5KHBvc2l0aW9ucyxpKzYpO2NiLnN1YlZlY3RvcnMocEMscEIpO2FiLnN1YlZlY3RvcnMocEEscEIpO2NiLmNyb3NzKGFiKTtub3JtYWxzW2ldPWNiLng7bm9ybWFsc1tpKzFdPWNiLnk7bm9ybWFsc1tpKzJdPWNiLno7bm9ybWFsc1tpKzNdPWNiLng7bm9ybWFsc1tpKzRdPWNiLnk7bm9ybWFsc1tpKzVdPWNiLno7bm9ybWFsc1tpKzZdPWNiLng7bm9ybWFsc1tpKzddPWNiLnk7bm9ybWFsc1tpKzhdPWNiLno7fX10aGlzLm5vcm1hbGl6ZU5vcm1hbHMoKTthdHRyaWJ1dGVzLm5vcm1hbC5uZWVkc1VwZGF0ZT10cnVlO319LG1lcmdlOmZ1bmN0aW9uIG1lcmdlKGdlb21ldHJ5LG9mZnNldCl7aWYoIShnZW9tZXRyeSYmZ2VvbWV0cnkuaXNCdWZmZXJHZW9tZXRyeSkpe2NvbnNvbGUuZXJyb3IoJ1RIUkVFLkJ1ZmZlckdlb21ldHJ5Lm1lcmdlKCk6IGdlb21ldHJ5IG5vdCBhbiBpbnN0YW5jZSBvZiBUSFJFRS5CdWZmZXJHZW9tZXRyeS4nLGdlb21ldHJ5KTtyZXR1cm47fWlmKG9mZnNldD09PXVuZGVmaW5lZClvZmZzZXQ9MDt2YXIgYXR0cmlidXRlcz10aGlzLmF0dHJpYnV0ZXM7Zm9yKHZhciBrZXkgaW4gYXR0cmlidXRlcyl7aWYoZ2VvbWV0cnkuYXR0cmlidXRlc1trZXldPT09dW5kZWZpbmVkKWNvbnRpbnVlO3ZhciBhdHRyaWJ1dGUxPWF0dHJpYnV0ZXNba2V5XTt2YXIgYXR0cmlidXRlQXJyYXkxPWF0dHJpYnV0ZTEuYXJyYXk7dmFyIGF0dHJpYnV0ZTI9Z2VvbWV0cnkuYXR0cmlidXRlc1trZXldO3ZhciBhdHRyaWJ1dGVBcnJheTI9YXR0cmlidXRlMi5hcnJheTt2YXIgYXR0cmlidXRlU2l6ZT1hdHRyaWJ1dGUyLml0ZW1TaXplO2Zvcih2YXIgaT0wLGo9YXR0cmlidXRlU2l6ZSpvZmZzZXQ7aTxhdHRyaWJ1dGVBcnJheTIubGVuZ3RoO2krKyxqKyspe2F0dHJpYnV0ZUFycmF5MVtqXT1hdHRyaWJ1dGVBcnJheTJbaV07fX1yZXR1cm4gdGhpczt9LG5vcm1hbGl6ZU5vcm1hbHM6ZnVuY3Rpb24oKXt2YXIgdmVjdG9yPW5ldyBWZWN0b3IzKCk7cmV0dXJuIGZ1bmN0aW9uIG5vcm1hbGl6ZU5vcm1hbHMoKXt2YXIgbm9ybWFscz10aGlzLmF0dHJpYnV0ZXMubm9ybWFsO2Zvcih2YXIgaT0wLGlsPW5vcm1hbHMuY291bnQ7aTxpbDtpKyspe3ZlY3Rvci54PW5vcm1hbHMuZ2V0WChpKTt2ZWN0b3IueT1ub3JtYWxzLmdldFkoaSk7dmVjdG9yLno9bm9ybWFscy5nZXRaKGkpO3ZlY3Rvci5ub3JtYWxpemUoKTtub3JtYWxzLnNldFhZWihpLHZlY3Rvci54LHZlY3Rvci55LHZlY3Rvci56KTt9fTt9KCksdG9Ob25JbmRleGVkOmZ1bmN0aW9uIHRvTm9uSW5kZXhlZCgpe2lmKHRoaXMuaW5kZXg9PT1udWxsKXtjb25zb2xlLndhcm4oJ1RIUkVFLkJ1ZmZlckdlb21ldHJ5LnRvTm9uSW5kZXhlZCgpOiBHZW9tZXRyeSBpcyBhbHJlYWR5IG5vbi1pbmRleGVkLicpO3JldHVybiB0aGlzO312YXIgZ2VvbWV0cnkyPW5ldyBCdWZmZXJHZW9tZXRyeSgpO3ZhciBpbmRpY2VzPXRoaXMuaW5kZXguYXJyYXk7dmFyIGF0dHJpYnV0ZXM9dGhpcy5hdHRyaWJ1dGVzO2Zvcih2YXIgbmFtZSBpbiBhdHRyaWJ1dGVzKXt2YXIgYXR0cmlidXRlPWF0dHJpYnV0ZXNbbmFtZV07dmFyIGFycmF5PWF0dHJpYnV0ZS5hcnJheTt2YXIgaXRlbVNpemU9YXR0cmlidXRlLml0ZW1TaXplO3ZhciBhcnJheTI9bmV3IGFycmF5LmNvbnN0cnVjdG9yKGluZGljZXMubGVuZ3RoKml0ZW1TaXplKTt2YXIgaW5kZXg9MCxpbmRleDI9MDtmb3IodmFyIGk9MCxsPWluZGljZXMubGVuZ3RoO2k8bDtpKyspe2luZGV4PWluZGljZXNbaV0qaXRlbVNpemU7Zm9yKHZhciBqPTA7ajxpdGVtU2l6ZTtqKyspe2FycmF5MltpbmRleDIrK109YXJyYXlbaW5kZXgrK107fX1nZW9tZXRyeTIuYWRkQXR0cmlidXRlKG5hbWUsbmV3IEJ1ZmZlckF0dHJpYnV0ZShhcnJheTIsaXRlbVNpemUpKTt9cmV0dXJuIGdlb21ldHJ5Mjt9LHRvSlNPTjpmdW5jdGlvbiB0b0pTT04oKXt2YXIgZGF0YT17bWV0YWRhdGE6e3ZlcnNpb246NC41LHR5cGU6J0J1ZmZlckdlb21ldHJ5JyxnZW5lcmF0b3I6J0J1ZmZlckdlb21ldHJ5LnRvSlNPTid9fTsvLyBzdGFuZGFyZCBCdWZmZXJHZW9tZXRyeSBzZXJpYWxpemF0aW9uCmRhdGEudXVpZD10aGlzLnV1aWQ7ZGF0YS50eXBlPXRoaXMudHlwZTtpZih0aGlzLm5hbWUhPT0nJylkYXRhLm5hbWU9dGhpcy5uYW1lO2lmKHRoaXMucGFyYW1ldGVycyE9PXVuZGVmaW5lZCl7dmFyIHBhcmFtZXRlcnM9dGhpcy5wYXJhbWV0ZXJzO2Zvcih2YXIga2V5IGluIHBhcmFtZXRlcnMpe2lmKHBhcmFtZXRlcnNba2V5XSE9PXVuZGVmaW5lZClkYXRhW2tleV09cGFyYW1ldGVyc1trZXldO31yZXR1cm4gZGF0YTt9ZGF0YS5kYXRhPXthdHRyaWJ1dGVzOnt9fTt2YXIgaW5kZXg9dGhpcy5pbmRleDtpZihpbmRleCE9PW51bGwpe3ZhciBhcnJheT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChpbmRleC5hcnJheSk7ZGF0YS5kYXRhLmluZGV4PXt0eXBlOmluZGV4LmFycmF5LmNvbnN0cnVjdG9yLm5hbWUsYXJyYXk6YXJyYXl9O312YXIgYXR0cmlidXRlcz10aGlzLmF0dHJpYnV0ZXM7Zm9yKHZhciBrZXkgaW4gYXR0cmlidXRlcyl7dmFyIGF0dHJpYnV0ZT1hdHRyaWJ1dGVzW2tleV07dmFyIGFycmF5PUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGF0dHJpYnV0ZS5hcnJheSk7ZGF0YS5kYXRhLmF0dHJpYnV0ZXNba2V5XT17aXRlbVNpemU6YXR0cmlidXRlLml0ZW1TaXplLHR5cGU6YXR0cmlidXRlLmFycmF5LmNvbnN0cnVjdG9yLm5hbWUsYXJyYXk6YXJyYXksbm9ybWFsaXplZDphdHRyaWJ1dGUubm9ybWFsaXplZH07fXZhciBncm91cHM9dGhpcy5ncm91cHM7aWYoZ3JvdXBzLmxlbmd0aD4wKXtkYXRhLmRhdGEuZ3JvdXBzPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZ3JvdXBzKSk7fXZhciBib3VuZGluZ1NwaGVyZT10aGlzLmJvdW5kaW5nU3BoZXJlO2lmKGJvdW5kaW5nU3BoZXJlIT09bnVsbCl7ZGF0YS5kYXRhLmJvdW5kaW5nU3BoZXJlPXtjZW50ZXI6Ym91bmRpbmdTcGhlcmUuY2VudGVyLnRvQXJyYXkoKSxyYWRpdXM6Ym91bmRpbmdTcGhlcmUucmFkaXVzfTt9cmV0dXJuIGRhdGE7fSxjbG9uZTpmdW5jdGlvbiBjbG9uZSgpey8qCgkJIC8vIEhhbmRsZSBwcmltaXRpdmVzCgoJCSB2YXIgcGFyYW1ldGVycyA9IHRoaXMucGFyYW1ldGVyczsKCgkJIGlmICggcGFyYW1ldGVycyAhPT0gdW5kZWZpbmVkICkgewoKCQkgdmFyIHZhbHVlcyA9IFtdOwoKCQkgZm9yICggdmFyIGtleSBpbiBwYXJhbWV0ZXJzICkgewoKCQkgdmFsdWVzLnB1c2goIHBhcmFtZXRlcnNbIGtleSBdICk7CgoJCSB9CgoJCSB2YXIgZ2VvbWV0cnkgPSBPYmplY3QuY3JlYXRlKCB0aGlzLmNvbnN0cnVjdG9yLnByb3RvdHlwZSApOwoJCSB0aGlzLmNvbnN0cnVjdG9yLmFwcGx5KCBnZW9tZXRyeSwgdmFsdWVzICk7CgkJIHJldHVybiBnZW9tZXRyeTsKCgkJIH0KCgkJIHJldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3RvcigpLmNvcHkoIHRoaXMgKTsKCQkgKi9yZXR1cm4gbmV3IEJ1ZmZlckdlb21ldHJ5KCkuY29weSh0aGlzKTt9LGNvcHk6ZnVuY3Rpb24gY29weShzb3VyY2Upe3ZhciBuYW1lLGksbDsvLyByZXNldAp0aGlzLmluZGV4PW51bGw7dGhpcy5hdHRyaWJ1dGVzPXt9O3RoaXMubW9ycGhBdHRyaWJ1dGVzPXt9O3RoaXMuZ3JvdXBzPVtdO3RoaXMuYm91bmRpbmdCb3g9bnVsbDt0aGlzLmJvdW5kaW5nU3BoZXJlPW51bGw7Ly8gbmFtZQp0aGlzLm5hbWU9c291cmNlLm5hbWU7Ly8gaW5kZXgKdmFyIGluZGV4PXNvdXJjZS5pbmRleDtpZihpbmRleCE9PW51bGwpe3RoaXMuc2V0SW5kZXgoaW5kZXguY2xvbmUoKSk7fS8vIGF0dHJpYnV0ZXMKdmFyIGF0dHJpYnV0ZXM9c291cmNlLmF0dHJpYnV0ZXM7Zm9yKG5hbWUgaW4gYXR0cmlidXRlcyl7dmFyIGF0dHJpYnV0ZT1hdHRyaWJ1dGVzW25hbWVdO3RoaXMuYWRkQXR0cmlidXRlKG5hbWUsYXR0cmlidXRlLmNsb25lKCkpO30vLyBtb3JwaCBhdHRyaWJ1dGVzCnZhciBtb3JwaEF0dHJpYnV0ZXM9c291cmNlLm1vcnBoQXR0cmlidXRlcztmb3IobmFtZSBpbiBtb3JwaEF0dHJpYnV0ZXMpe3ZhciBhcnJheT1bXTt2YXIgbW9ycGhBdHRyaWJ1dGU9bW9ycGhBdHRyaWJ1dGVzW25hbWVdOy8vIG1vcnBoQXR0cmlidXRlOiBhcnJheSBvZiBGbG9hdDMyQnVmZmVyQXR0cmlidXRlcwpmb3IoaT0wLGw9bW9ycGhBdHRyaWJ1dGUubGVuZ3RoO2k8bDtpKyspe2FycmF5LnB1c2gobW9ycGhBdHRyaWJ1dGVbaV0uY2xvbmUoKSk7fXRoaXMubW9ycGhBdHRyaWJ1dGVzW25hbWVdPWFycmF5O30vLyBncm91cHMKdmFyIGdyb3Vwcz1zb3VyY2UuZ3JvdXBzO2ZvcihpPTAsbD1ncm91cHMubGVuZ3RoO2k8bDtpKyspe3ZhciBncm91cD1ncm91cHNbaV07dGhpcy5hZGRHcm91cChncm91cC5zdGFydCxncm91cC5jb3VudCxncm91cC5tYXRlcmlhbEluZGV4KTt9Ly8gYm91bmRpbmcgYm94CnZhciBib3VuZGluZ0JveD1zb3VyY2UuYm91bmRpbmdCb3g7aWYoYm91bmRpbmdCb3ghPT1udWxsKXt0aGlzLmJvdW5kaW5nQm94PWJvdW5kaW5nQm94LmNsb25lKCk7fS8vIGJvdW5kaW5nIHNwaGVyZQp2YXIgYm91bmRpbmdTcGhlcmU9c291cmNlLmJvdW5kaW5nU3BoZXJlO2lmKGJvdW5kaW5nU3BoZXJlIT09bnVsbCl7dGhpcy5ib3VuZGluZ1NwaGVyZT1ib3VuZGluZ1NwaGVyZS5jbG9uZSgpO30vLyBkcmF3IHJhbmdlCnRoaXMuZHJhd1JhbmdlLnN0YXJ0PXNvdXJjZS5kcmF3UmFuZ2Uuc3RhcnQ7dGhpcy5kcmF3UmFuZ2UuY291bnQ9c291cmNlLmRyYXdSYW5nZS5jb3VudDtyZXR1cm4gdGhpczt9LGRpc3Bvc2U6ZnVuY3Rpb24gZGlzcG9zZSgpe3RoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTonZGlzcG9zZSd9KTt9fSk7LyoqCiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vCiAqIEBhdXRob3IgTXVnZW44NyAvIGh0dHBzOi8vZ2l0aHViLmNvbS9NdWdlbjg3CiAqLyAvLyBCb3hHZW9tZXRyeQpmdW5jdGlvbiBCb3hHZW9tZXRyeSh3aWR0aCxoZWlnaHQsZGVwdGgsd2lkdGhTZWdtZW50cyxoZWlnaHRTZWdtZW50cyxkZXB0aFNlZ21lbnRzKXtHZW9tZXRyeS5jYWxsKHRoaXMpO3RoaXMudHlwZT0nQm94R2VvbWV0cnknO3RoaXMucGFyYW1ldGVycz17d2lkdGg6d2lkdGgsaGVpZ2h0OmhlaWdodCxkZXB0aDpkZXB0aCx3aWR0aFNlZ21lbnRzOndpZHRoU2VnbWVudHMsaGVpZ2h0U2VnbWVudHM6aGVpZ2h0U2VnbWVudHMsZGVwdGhTZWdtZW50czpkZXB0aFNlZ21lbnRzfTt0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgQm94QnVmZmVyR2VvbWV0cnkod2lkdGgsaGVpZ2h0LGRlcHRoLHdpZHRoU2VnbWVudHMsaGVpZ2h0U2VnbWVudHMsZGVwdGhTZWdtZW50cykpO3RoaXMubWVyZ2VWZXJ0aWNlcygpO31Cb3hHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShHZW9tZXRyeS5wcm90b3R5cGUpO0JveEdlb21ldHJ5LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1Cb3hHZW9tZXRyeTsvLyBCb3hCdWZmZXJHZW9tZXRyeQpmdW5jdGlvbiBCb3hCdWZmZXJHZW9tZXRyeSh3aWR0aCxoZWlnaHQsZGVwdGgsd2lkdGhTZWdtZW50cyxoZWlnaHRTZWdtZW50cyxkZXB0aFNlZ21lbnRzKXtCdWZmZXJHZW9tZXRyeS5jYWxsKHRoaXMpO3RoaXMudHlwZT0nQm94QnVmZmVyR2VvbWV0cnknO3RoaXMucGFyYW1ldGVycz17d2lkdGg6d2lkdGgsaGVpZ2h0OmhlaWdodCxkZXB0aDpkZXB0aCx3aWR0aFNlZ21lbnRzOndpZHRoU2VnbWVudHMsaGVpZ2h0U2VnbWVudHM6aGVpZ2h0U2VnbWVudHMsZGVwdGhTZWdtZW50czpkZXB0aFNlZ21lbnRzfTt2YXIgc2NvcGU9dGhpczt3aWR0aD13aWR0aHx8MTtoZWlnaHQ9aGVpZ2h0fHwxO2RlcHRoPWRlcHRofHwxOy8vIHNlZ21lbnRzCndpZHRoU2VnbWVudHM9TWF0aC5mbG9vcih3aWR0aFNlZ21lbnRzKXx8MTtoZWlnaHRTZWdtZW50cz1NYXRoLmZsb29yKGhlaWdodFNlZ21lbnRzKXx8MTtkZXB0aFNlZ21lbnRzPU1hdGguZmxvb3IoZGVwdGhTZWdtZW50cyl8fDE7Ly8gYnVmZmVycwp2YXIgaW5kaWNlcz1bXTt2YXIgdmVydGljZXM9W107dmFyIG5vcm1hbHM9W107dmFyIHV2cz1bXTsvLyBoZWxwZXIgdmFyaWFibGVzCnZhciBudW1iZXJPZlZlcnRpY2VzPTA7dmFyIGdyb3VwU3RhcnQ9MDsvLyBidWlsZCBlYWNoIHNpZGUgb2YgdGhlIGJveCBnZW9tZXRyeQpidWlsZFBsYW5lKCd6JywneScsJ3gnLC0xLC0xLGRlcHRoLGhlaWdodCx3aWR0aCxkZXB0aFNlZ21lbnRzLGhlaWdodFNlZ21lbnRzLDApOy8vIHB4CmJ1aWxkUGxhbmUoJ3onLCd5JywneCcsMSwtMSxkZXB0aCxoZWlnaHQsLXdpZHRoLGRlcHRoU2VnbWVudHMsaGVpZ2h0U2VnbWVudHMsMSk7Ly8gbngKYnVpbGRQbGFuZSgneCcsJ3onLCd5JywxLDEsd2lkdGgsZGVwdGgsaGVpZ2h0LHdpZHRoU2VnbWVudHMsZGVwdGhTZWdtZW50cywyKTsvLyBweQpidWlsZFBsYW5lKCd4JywneicsJ3knLDEsLTEsd2lkdGgsZGVwdGgsLWhlaWdodCx3aWR0aFNlZ21lbnRzLGRlcHRoU2VnbWVudHMsMyk7Ly8gbnkKYnVpbGRQbGFuZSgneCcsJ3knLCd6JywxLC0xLHdpZHRoLGhlaWdodCxkZXB0aCx3aWR0aFNlZ21lbnRzLGhlaWdodFNlZ21lbnRzLDQpOy8vIHB6CmJ1aWxkUGxhbmUoJ3gnLCd5JywneicsLTEsLTEsd2lkdGgsaGVpZ2h0LC1kZXB0aCx3aWR0aFNlZ21lbnRzLGhlaWdodFNlZ21lbnRzLDUpOy8vIG56Ci8vIGJ1aWxkIGdlb21ldHJ5CnRoaXMuc2V0SW5kZXgoaW5kaWNlcyk7dGhpcy5hZGRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJyxuZXcgRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSh2ZXJ0aWNlcywzKSk7dGhpcy5hZGRBdHRyaWJ1dGUoJ25vcm1hbCcsbmV3IEZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUobm9ybWFscywzKSk7dGhpcy5hZGRBdHRyaWJ1dGUoJ3V2JyxuZXcgRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSh1dnMsMikpO2Z1bmN0aW9uIGJ1aWxkUGxhbmUodSx2LHcsdWRpcix2ZGlyLHdpZHRoLGhlaWdodCxkZXB0aCxncmlkWCxncmlkWSxtYXRlcmlhbEluZGV4KXt2YXIgc2VnbWVudFdpZHRoPXdpZHRoL2dyaWRYO3ZhciBzZWdtZW50SGVpZ2h0PWhlaWdodC9ncmlkWTt2YXIgd2lkdGhIYWxmPXdpZHRoLzI7dmFyIGhlaWdodEhhbGY9aGVpZ2h0LzI7dmFyIGRlcHRoSGFsZj1kZXB0aC8yO3ZhciBncmlkWDE9Z3JpZFgrMTt2YXIgZ3JpZFkxPWdyaWRZKzE7dmFyIHZlcnRleENvdW50ZXI9MDt2YXIgZ3JvdXBDb3VudD0wO3ZhciBpeCxpeTt2YXIgdmVjdG9yPW5ldyBWZWN0b3IzKCk7Ly8gZ2VuZXJhdGUgdmVydGljZXMsIG5vcm1hbHMgYW5kIHV2cwpmb3IoaXk9MDtpeTxncmlkWTE7aXkrKyl7dmFyIHk9aXkqc2VnbWVudEhlaWdodC1oZWlnaHRIYWxmO2ZvcihpeD0wO2l4PGdyaWRYMTtpeCsrKXt2YXIgeD1peCpzZWdtZW50V2lkdGgtd2lkdGhIYWxmOy8vIHNldCB2YWx1ZXMgdG8gY29ycmVjdCB2ZWN0b3IgY29tcG9uZW50CnZlY3Rvclt1XT14KnVkaXI7dmVjdG9yW3ZdPXkqdmRpcjt2ZWN0b3Jbd109ZGVwdGhIYWxmOy8vIG5vdyBhcHBseSB2ZWN0b3IgdG8gdmVydGV4IGJ1ZmZlcgp2ZXJ0aWNlcy5wdXNoKHZlY3Rvci54LHZlY3Rvci55LHZlY3Rvci56KTsvLyBzZXQgdmFsdWVzIHRvIGNvcnJlY3QgdmVjdG9yIGNvbXBvbmVudAp2ZWN0b3JbdV09MDt2ZWN0b3Jbdl09MDt2ZWN0b3Jbd109ZGVwdGg+MD8xOi0xOy8vIG5vdyBhcHBseSB2ZWN0b3IgdG8gbm9ybWFsIGJ1ZmZlcgpub3JtYWxzLnB1c2godmVjdG9yLngsdmVjdG9yLnksdmVjdG9yLnopOy8vIHV2cwp1dnMucHVzaChpeC9ncmlkWCk7dXZzLnB1c2goMS1peS9ncmlkWSk7Ly8gY291bnRlcnMKdmVydGV4Q291bnRlcis9MTt9fS8vIGluZGljZXMKLy8gMS4geW91IG5lZWQgdGhyZWUgaW5kaWNlcyB0byBkcmF3IGEgc2luZ2xlIGZhY2UKLy8gMi4gYSBzaW5nbGUgc2VnbWVudCBjb25zaXN0cyBvZiB0d28gZmFjZXMKLy8gMy4gc28gd2UgbmVlZCB0byBnZW5lcmF0ZSBzaXggKDIqMykgaW5kaWNlcyBwZXIgc2VnbWVudApmb3IoaXk9MDtpeTxncmlkWTtpeSsrKXtmb3IoaXg9MDtpeDxncmlkWDtpeCsrKXt2YXIgYT1udW1iZXJPZlZlcnRpY2VzK2l4K2dyaWRYMSppeTt2YXIgYj1udW1iZXJPZlZlcnRpY2VzK2l4K2dyaWRYMSooaXkrMSk7dmFyIGM9bnVtYmVyT2ZWZXJ0aWNlcysoaXgrMSkrZ3JpZFgxKihpeSsxKTt2YXIgZD1udW1iZXJPZlZlcnRpY2VzKyhpeCsxKStncmlkWDEqaXk7Ly8gZmFjZXMKaW5kaWNlcy5wdXNoKGEsYixkKTtpbmRpY2VzLnB1c2goYixjLGQpOy8vIGluY3JlYXNlIGNvdW50ZXIKZ3JvdXBDb3VudCs9Njt9fS8vIGFkZCBhIGdyb3VwIHRvIHRoZSBnZW9tZXRyeS4gdGhpcyB3aWxsIGVuc3VyZSBtdWx0aSBtYXRlcmlhbCBzdXBwb3J0CnNjb3BlLmFkZEdyb3VwKGdyb3VwU3RhcnQsZ3JvdXBDb3VudCxtYXRlcmlhbEluZGV4KTsvLyBjYWxjdWxhdGUgbmV3IHN0YXJ0IHZhbHVlIGZvciBncm91cHMKZ3JvdXBTdGFydCs9Z3JvdXBDb3VudDsvLyB1cGRhdGUgdG90YWwgbnVtYmVyIG9mIHZlcnRpY2VzCm51bWJlck9mVmVydGljZXMrPXZlcnRleENvdW50ZXI7fX1Cb3hCdWZmZXJHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShCdWZmZXJHZW9tZXRyeS5wcm90b3R5cGUpO0JveEJ1ZmZlckdlb21ldHJ5LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1Cb3hCdWZmZXJHZW9tZXRyeTsvKioKICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS8KICogQGF1dGhvciBNdWdlbjg3IC8gaHR0cHM6Ly9naXRodWIuY29tL011Z2VuODcKICovIC8vIFBsYW5lR2VvbWV0cnkKZnVuY3Rpb24gUGxhbmVHZW9tZXRyeSh3aWR0aCxoZWlnaHQsd2lkdGhTZWdtZW50cyxoZWlnaHRTZWdtZW50cyl7R2VvbWV0cnkuY2FsbCh0aGlzKTt0aGlzLnR5cGU9J1BsYW5lR2VvbWV0cnknO3RoaXMucGFyYW1ldGVycz17d2lkdGg6d2lkdGgsaGVpZ2h0OmhlaWdodCx3aWR0aFNlZ21lbnRzOndpZHRoU2VnbWVudHMsaGVpZ2h0U2VnbWVudHM6aGVpZ2h0U2VnbWVudHN9O3RoaXMuZnJvbUJ1ZmZlckdlb21ldHJ5KG5ldyBQbGFuZUJ1ZmZlckdlb21ldHJ5KHdpZHRoLGhlaWdodCx3aWR0aFNlZ21lbnRzLGhlaWdodFNlZ21lbnRzKSk7dGhpcy5tZXJnZVZlcnRpY2VzKCk7fVBsYW5lR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoR2VvbWV0cnkucHJvdG90eXBlKTtQbGFuZUdlb21ldHJ5LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1QbGFuZUdlb21ldHJ5Oy8vIFBsYW5lQnVmZmVyR2VvbWV0cnkKZnVuY3Rpb24gUGxhbmVCdWZmZXJHZW9tZXRyeSh3aWR0aCxoZWlnaHQsd2lkdGhTZWdtZW50cyxoZWlnaHRTZWdtZW50cyl7QnVmZmVyR2VvbWV0cnkuY2FsbCh0aGlzKTt0aGlzLnR5cGU9J1BsYW5lQnVmZmVyR2VvbWV0cnknO3RoaXMucGFyYW1ldGVycz17d2lkdGg6d2lkdGgsaGVpZ2h0OmhlaWdodCx3aWR0aFNlZ21lbnRzOndpZHRoU2VnbWVudHMsaGVpZ2h0U2VnbWVudHM6aGVpZ2h0U2VnbWVudHN9O3dpZHRoPXdpZHRofHwxO2hlaWdodD1oZWlnaHR8fDE7dmFyIHdpZHRoX2hhbGY9d2lkdGgvMjt2YXIgaGVpZ2h0X2hhbGY9aGVpZ2h0LzI7dmFyIGdyaWRYPU1hdGguZmxvb3Iod2lkdGhTZWdtZW50cyl8fDE7dmFyIGdyaWRZPU1hdGguZmxvb3IoaGVpZ2h0U2VnbWVudHMpfHwxO3ZhciBncmlkWDE9Z3JpZFgrMTt2YXIgZ3JpZFkxPWdyaWRZKzE7dmFyIHNlZ21lbnRfd2lkdGg9d2lkdGgvZ3JpZFg7dmFyIHNlZ21lbnRfaGVpZ2h0PWhlaWdodC9ncmlkWTt2YXIgaXgsaXk7Ly8gYnVmZmVycwp2YXIgaW5kaWNlcz1bXTt2YXIgdmVydGljZXM9W107dmFyIG5vcm1hbHM9W107dmFyIHV2cz1bXTsvLyBnZW5lcmF0ZSB2ZXJ0aWNlcywgbm9ybWFscyBhbmQgdXZzCmZvcihpeT0wO2l5PGdyaWRZMTtpeSsrKXt2YXIgeT1peSpzZWdtZW50X2hlaWdodC1oZWlnaHRfaGFsZjtmb3IoaXg9MDtpeDxncmlkWDE7aXgrKyl7dmFyIHg9aXgqc2VnbWVudF93aWR0aC13aWR0aF9oYWxmO3ZlcnRpY2VzLnB1c2goeCwteSwwKTtub3JtYWxzLnB1c2goMCwwLDEpO3V2cy5wdXNoKGl4L2dyaWRYKTt1dnMucHVzaCgxLWl5L2dyaWRZKTt9fS8vIGluZGljZXMKZm9yKGl5PTA7aXk8Z3JpZFk7aXkrKyl7Zm9yKGl4PTA7aXg8Z3JpZFg7aXgrKyl7dmFyIGE9aXgrZ3JpZFgxKml5O3ZhciBiPWl4K2dyaWRYMSooaXkrMSk7dmFyIGM9aXgrMStncmlkWDEqKGl5KzEpO3ZhciBkPWl4KzErZ3JpZFgxKml5Oy8vIGZhY2VzCmluZGljZXMucHVzaChhLGIsZCk7aW5kaWNlcy5wdXNoKGIsYyxkKTt9fS8vIGJ1aWxkIGdlb21ldHJ5CnRoaXMuc2V0SW5kZXgoaW5kaWNlcyk7dGhpcy5hZGRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJyxuZXcgRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSh2ZXJ0aWNlcywzKSk7dGhpcy5hZGRBdHRyaWJ1dGUoJ25vcm1hbCcsbmV3IEZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUobm9ybWFscywzKSk7dGhpcy5hZGRBdHRyaWJ1dGUoJ3V2JyxuZXcgRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSh1dnMsMikpO31QbGFuZUJ1ZmZlckdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEJ1ZmZlckdlb21ldHJ5LnByb3RvdHlwZSk7UGxhbmVCdWZmZXJHZW9tZXRyeS5wcm90b3R5cGUuY29uc3RydWN0b3I9UGxhbmVCdWZmZXJHZW9tZXRyeTsvKioKICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS8KICogQGF1dGhvciBhbHRlcmVkcSAvIGh0dHA6Ly9hbHRlcmVkcXVhbGlhLmNvbS8KICoKICogcGFyYW1ldGVycyA9IHsKICogIGNvbG9yOiA8aGV4PiwKICogIG9wYWNpdHk6IDxmbG9hdD4sCiAqICBtYXA6IG5ldyBUSFJFRS5UZXh0dXJlKCA8SW1hZ2U+ICksCiAqCiAqICBsaWdodE1hcDogbmV3IFRIUkVFLlRleHR1cmUoIDxJbWFnZT4gKSwKICogIGxpZ2h0TWFwSW50ZW5zaXR5OiA8ZmxvYXQ+CiAqCiAqICBhb01hcDogbmV3IFRIUkVFLlRleHR1cmUoIDxJbWFnZT4gKSwKICogIGFvTWFwSW50ZW5zaXR5OiA8ZmxvYXQ+CiAqCiAqICBzcGVjdWxhck1hcDogbmV3IFRIUkVFLlRleHR1cmUoIDxJbWFnZT4gKSwKICoKICogIGFscGhhTWFwOiBuZXcgVEhSRUUuVGV4dHVyZSggPEltYWdlPiApLAogKgogKiAgZW52TWFwOiBuZXcgVEhSRUUuVGV4dHVyZUN1YmUoIFtwb3N4LCBuZWd4LCBwb3N5LCBuZWd5LCBwb3N6LCBuZWd6XSApLAogKiAgY29tYmluZTogVEhSRUUuTXVsdGlwbHksCiAqICByZWZsZWN0aXZpdHk6IDxmbG9hdD4sCiAqICByZWZyYWN0aW9uUmF0aW86IDxmbG9hdD4sCiAqCiAqICBkZXB0aFRlc3Q6IDxib29sPiwKICogIGRlcHRoV3JpdGU6IDxib29sPiwKICoKICogIHdpcmVmcmFtZTogPGJvb2xlYW4+LAogKiAgd2lyZWZyYW1lTGluZXdpZHRoOiA8ZmxvYXQ+LAogKgogKiAgc2tpbm5pbmc6IDxib29sPiwKICogIG1vcnBoVGFyZ2V0czogPGJvb2w+CiAqIH0KICovZnVuY3Rpb24gTWVzaEJhc2ljTWF0ZXJpYWwocGFyYW1ldGVycyl7TWF0ZXJpYWwuY2FsbCh0aGlzKTt0aGlzLnR5cGU9J01lc2hCYXNpY01hdGVyaWFsJzt0aGlzLmNvbG9yPW5ldyBDb2xvcigweGZmZmZmZik7Ly8gZW1pc3NpdmUKdGhpcy5tYXA9bnVsbDt0aGlzLmxpZ2h0TWFwPW51bGw7dGhpcy5saWdodE1hcEludGVuc2l0eT0xLjA7dGhpcy5hb01hcD1udWxsO3RoaXMuYW9NYXBJbnRlbnNpdHk9MS4wO3RoaXMuc3BlY3VsYXJNYXA9bnVsbDt0aGlzLmFscGhhTWFwPW51bGw7dGhpcy5lbnZNYXA9bnVsbDt0aGlzLmNvbWJpbmU9TXVsdGlwbHlPcGVyYXRpb247dGhpcy5yZWZsZWN0aXZpdHk9MTt0aGlzLnJlZnJhY3Rpb25SYXRpbz0wLjk4O3RoaXMud2lyZWZyYW1lPWZhbHNlO3RoaXMud2lyZWZyYW1lTGluZXdpZHRoPTE7dGhpcy53aXJlZnJhbWVMaW5lY2FwPSdyb3VuZCc7dGhpcy53aXJlZnJhbWVMaW5lam9pbj0ncm91bmQnO3RoaXMuc2tpbm5pbmc9ZmFsc2U7dGhpcy5tb3JwaFRhcmdldHM9ZmFsc2U7dGhpcy5saWdodHM9ZmFsc2U7dGhpcy5zZXRWYWx1ZXMocGFyYW1ldGVycyk7fU1lc2hCYXNpY01hdGVyaWFsLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKE1hdGVyaWFsLnByb3RvdHlwZSk7TWVzaEJhc2ljTWF0ZXJpYWwucHJvdG90eXBlLmNvbnN0cnVjdG9yPU1lc2hCYXNpY01hdGVyaWFsO01lc2hCYXNpY01hdGVyaWFsLnByb3RvdHlwZS5pc01lc2hCYXNpY01hdGVyaWFsPXRydWU7TWVzaEJhc2ljTWF0ZXJpYWwucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oc291cmNlKXtNYXRlcmlhbC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsc291cmNlKTt0aGlzLmNvbG9yLmNvcHkoc291cmNlLmNvbG9yKTt0aGlzLm1hcD1zb3VyY2UubWFwO3RoaXMubGlnaHRNYXA9c291cmNlLmxpZ2h0TWFwO3RoaXMubGlnaHRNYXBJbnRlbnNpdHk9c291cmNlLmxpZ2h0TWFwSW50ZW5zaXR5O3RoaXMuYW9NYXA9c291cmNlLmFvTWFwO3RoaXMuYW9NYXBJbnRlbnNpdHk9c291cmNlLmFvTWFwSW50ZW5zaXR5O3RoaXMuc3BlY3VsYXJNYXA9c291cmNlLnNwZWN1bGFyTWFwO3RoaXMuYWxwaGFNYXA9c291cmNlLmFscGhhTWFwO3RoaXMuZW52TWFwPXNvdXJjZS5lbnZNYXA7dGhpcy5jb21iaW5lPXNvdXJjZS5jb21iaW5lO3RoaXMucmVmbGVjdGl2aXR5PXNvdXJjZS5yZWZsZWN0aXZpdHk7dGhpcy5yZWZyYWN0aW9uUmF0aW89c291cmNlLnJlZnJhY3Rpb25SYXRpbzt0aGlzLndpcmVmcmFtZT1zb3VyY2Uud2lyZWZyYW1lO3RoaXMud2lyZWZyYW1lTGluZXdpZHRoPXNvdXJjZS53aXJlZnJhbWVMaW5ld2lkdGg7dGhpcy53aXJlZnJhbWVMaW5lY2FwPXNvdXJjZS53aXJlZnJhbWVMaW5lY2FwO3RoaXMud2lyZWZyYW1lTGluZWpvaW49c291cmNlLndpcmVmcmFtZUxpbmVqb2luO3RoaXMuc2tpbm5pbmc9c291cmNlLnNraW5uaW5nO3RoaXMubW9ycGhUYXJnZXRzPXNvdXJjZS5tb3JwaFRhcmdldHM7cmV0dXJuIHRoaXM7fTsvKioKICogQGF1dGhvciBhbHRlcmVkcSAvIGh0dHA6Ly9hbHRlcmVkcXVhbGlhLmNvbS8KICoKICogcGFyYW1ldGVycyA9IHsKICogIGRlZmluZXM6IHsgImxhYmVsIiA6ICJ2YWx1ZSIgfSwKICogIHVuaWZvcm1zOiB7ICJwYXJhbWV0ZXIxIjogeyB2YWx1ZTogMS4wIH0sICJwYXJhbWV0ZXIyIjogeyB2YWx1ZTI6IDIgfSB9LAogKgogKiAgZnJhZ21lbnRTaGFkZXI6IDxzdHJpbmc+LAogKiAgdmVydGV4U2hhZGVyOiA8c3RyaW5nPiwKICoKICogIHdpcmVmcmFtZTogPGJvb2xlYW4+LAogKiAgd2lyZWZyYW1lTGluZXdpZHRoOiA8ZmxvYXQ+LAogKgogKiAgbGlnaHRzOiA8Ym9vbD4sCiAqCiAqICBza2lubmluZzogPGJvb2w+LAogKiAgbW9ycGhUYXJnZXRzOiA8Ym9vbD4sCiAqICBtb3JwaE5vcm1hbHM6IDxib29sPgogKiB9CiAqL2Z1bmN0aW9uIFNoYWRlck1hdGVyaWFsKHBhcmFtZXRlcnMpe01hdGVyaWFsLmNhbGwodGhpcyk7dGhpcy50eXBlPSdTaGFkZXJNYXRlcmlhbCc7dGhpcy5kZWZpbmVzPXt9O3RoaXMudW5pZm9ybXM9e307dGhpcy52ZXJ0ZXhTaGFkZXI9J3ZvaWQgbWFpbigpIHtcblx0Z2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbW9kZWxWaWV3TWF0cml4ICogdmVjNCggcG9zaXRpb24sIDEuMCApO1xufSc7dGhpcy5mcmFnbWVudFNoYWRlcj0ndm9pZCBtYWluKCkge1xuXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCAxLjAsIDAuMCwgMC4wLCAxLjAgKTtcbn0nO3RoaXMubGluZXdpZHRoPTE7dGhpcy53aXJlZnJhbWU9ZmFsc2U7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9MTt0aGlzLmZvZz1mYWxzZTsvLyBzZXQgdG8gdXNlIHNjZW5lIGZvZwp0aGlzLmxpZ2h0cz1mYWxzZTsvLyBzZXQgdG8gdXNlIHNjZW5lIGxpZ2h0cwp0aGlzLmNsaXBwaW5nPWZhbHNlOy8vIHNldCB0byB1c2UgdXNlci1kZWZpbmVkIGNsaXBwaW5nIHBsYW5lcwp0aGlzLnNraW5uaW5nPWZhbHNlOy8vIHNldCB0byB1c2Ugc2tpbm5pbmcgYXR0cmlidXRlIHN0cmVhbXMKdGhpcy5tb3JwaFRhcmdldHM9ZmFsc2U7Ly8gc2V0IHRvIHVzZSBtb3JwaCB0YXJnZXRzCnRoaXMubW9ycGhOb3JtYWxzPWZhbHNlOy8vIHNldCB0byB1c2UgbW9ycGggbm9ybWFscwp0aGlzLmV4dGVuc2lvbnM9e2Rlcml2YXRpdmVzOmZhbHNlLC8vIHNldCB0byB1c2UgZGVyaXZhdGl2ZXMKZnJhZ0RlcHRoOmZhbHNlLC8vIHNldCB0byB1c2UgZnJhZ21lbnQgZGVwdGggdmFsdWVzCmRyYXdCdWZmZXJzOmZhbHNlLC8vIHNldCB0byB1c2UgZHJhdyBidWZmZXJzCnNoYWRlclRleHR1cmVMT0Q6ZmFsc2UvLyBzZXQgdG8gdXNlIHNoYWRlciB0ZXh0dXJlIExPRAp9Oy8vIFdoZW4gcmVuZGVyZWQgZ2VvbWV0cnkgZG9lc24ndCBpbmNsdWRlIHRoZXNlIGF0dHJpYnV0ZXMgYnV0IHRoZSBtYXRlcmlhbCBkb2VzLAovLyB1c2UgdGhlc2UgZGVmYXVsdCB2YWx1ZXMgaW4gV2ViR0wuIFRoaXMgYXZvaWRzIGVycm9ycyB3aGVuIGJ1ZmZlciBkYXRhIGlzIG1pc3NpbmcuCnRoaXMuZGVmYXVsdEF0dHJpYnV0ZVZhbHVlcz17J2NvbG9yJzpbMSwxLDFdLCd1dic6WzAsMF0sJ3V2Mic6WzAsMF19O3RoaXMuaW5kZXgwQXR0cmlidXRlTmFtZT11bmRlZmluZWQ7aWYocGFyYW1ldGVycyE9PXVuZGVmaW5lZCl7aWYocGFyYW1ldGVycy5hdHRyaWJ1dGVzIT09dW5kZWZpbmVkKXtjb25zb2xlLmVycm9yKCdUSFJFRS5TaGFkZXJNYXRlcmlhbDogYXR0cmlidXRlcyBzaG91bGQgbm93IGJlIGRlZmluZWQgaW4gVEhSRUUuQnVmZmVyR2VvbWV0cnkgaW5zdGVhZC4nKTt9dGhpcy5zZXRWYWx1ZXMocGFyYW1ldGVycyk7fX1TaGFkZXJNYXRlcmlhbC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShNYXRlcmlhbC5wcm90b3R5cGUpO1NoYWRlck1hdGVyaWFsLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1TaGFkZXJNYXRlcmlhbDtTaGFkZXJNYXRlcmlhbC5wcm90b3R5cGUuaXNTaGFkZXJNYXRlcmlhbD10cnVlO1NoYWRlck1hdGVyaWFsLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHNvdXJjZSl7TWF0ZXJpYWwucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHNvdXJjZSk7dGhpcy5mcmFnbWVudFNoYWRlcj1zb3VyY2UuZnJhZ21lbnRTaGFkZXI7dGhpcy52ZXJ0ZXhTaGFkZXI9c291cmNlLnZlcnRleFNoYWRlcjt0aGlzLnVuaWZvcm1zPVVuaWZvcm1zVXRpbHMuY2xvbmUoc291cmNlLnVuaWZvcm1zKTt0aGlzLmRlZmluZXM9c291cmNlLmRlZmluZXM7dGhpcy53aXJlZnJhbWU9c291cmNlLndpcmVmcmFtZTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD1zb3VyY2Uud2lyZWZyYW1lTGluZXdpZHRoO3RoaXMubGlnaHRzPXNvdXJjZS5saWdodHM7dGhpcy5jbGlwcGluZz1zb3VyY2UuY2xpcHBpbmc7dGhpcy5za2lubmluZz1zb3VyY2Uuc2tpbm5pbmc7dGhpcy5tb3JwaFRhcmdldHM9c291cmNlLm1vcnBoVGFyZ2V0czt0aGlzLm1vcnBoTm9ybWFscz1zb3VyY2UubW9ycGhOb3JtYWxzO3RoaXMuZXh0ZW5zaW9ucz1zb3VyY2UuZXh0ZW5zaW9ucztyZXR1cm4gdGhpczt9O1NoYWRlck1hdGVyaWFsLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24obWV0YSl7dmFyIGRhdGE9TWF0ZXJpYWwucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMsbWV0YSk7ZGF0YS51bmlmb3Jtcz10aGlzLnVuaWZvcm1zO2RhdGEudmVydGV4U2hhZGVyPXRoaXMudmVydGV4U2hhZGVyO2RhdGEuZnJhZ21lbnRTaGFkZXI9dGhpcy5mcmFnbWVudFNoYWRlcjtyZXR1cm4gZGF0YTt9Oy8qKgogKiBAYXV0aG9yIGJob3VzdG9uIC8gaHR0cDovL2NsYXJhLmlvCiAqL2Z1bmN0aW9uIFJheShvcmlnaW4sZGlyZWN0aW9uKXt0aGlzLm9yaWdpbj1vcmlnaW4hPT11bmRlZmluZWQ/b3JpZ2luOm5ldyBWZWN0b3IzKCk7dGhpcy5kaXJlY3Rpb249ZGlyZWN0aW9uIT09dW5kZWZpbmVkP2RpcmVjdGlvbjpuZXcgVmVjdG9yMygpO31PYmplY3QuYXNzaWduKFJheS5wcm90b3R5cGUse3NldDpmdW5jdGlvbiBzZXQob3JpZ2luLGRpcmVjdGlvbil7dGhpcy5vcmlnaW4uY29weShvcmlnaW4pO3RoaXMuZGlyZWN0aW9uLmNvcHkoZGlyZWN0aW9uKTtyZXR1cm4gdGhpczt9LGNsb25lOmZ1bmN0aW9uIGNsb25lKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKCkuY29weSh0aGlzKTt9LGNvcHk6ZnVuY3Rpb24gY29weShyYXkpe3RoaXMub3JpZ2luLmNvcHkocmF5Lm9yaWdpbik7dGhpcy5kaXJlY3Rpb24uY29weShyYXkuZGlyZWN0aW9uKTtyZXR1cm4gdGhpczt9LGF0OmZ1bmN0aW9uIGF0KHQsb3B0aW9uYWxUYXJnZXQpe3ZhciByZXN1bHQ9b3B0aW9uYWxUYXJnZXR8fG5ldyBWZWN0b3IzKCk7cmV0dXJuIHJlc3VsdC5jb3B5KHRoaXMuZGlyZWN0aW9uKS5tdWx0aXBseVNjYWxhcih0KS5hZGQodGhpcy5vcmlnaW4pO30sbG9va0F0OmZ1bmN0aW9uIGxvb2tBdCh2KXt0aGlzLmRpcmVjdGlvbi5jb3B5KHYpLnN1Yih0aGlzLm9yaWdpbikubm9ybWFsaXplKCk7cmV0dXJuIHRoaXM7fSxyZWNhc3Q6ZnVuY3Rpb24oKXt2YXIgdjE9bmV3IFZlY3RvcjMoKTtyZXR1cm4gZnVuY3Rpb24gcmVjYXN0KHQpe3RoaXMub3JpZ2luLmNvcHkodGhpcy5hdCh0LHYxKSk7cmV0dXJuIHRoaXM7fTt9KCksY2xvc2VzdFBvaW50VG9Qb2ludDpmdW5jdGlvbiBjbG9zZXN0UG9pbnRUb1BvaW50KHBvaW50LG9wdGlvbmFsVGFyZ2V0KXt2YXIgcmVzdWx0PW9wdGlvbmFsVGFyZ2V0fHxuZXcgVmVjdG9yMygpO3Jlc3VsdC5zdWJWZWN0b3JzKHBvaW50LHRoaXMub3JpZ2luKTt2YXIgZGlyZWN0aW9uRGlzdGFuY2U9cmVzdWx0LmRvdCh0aGlzLmRpcmVjdGlvbik7aWYoZGlyZWN0aW9uRGlzdGFuY2U8MCl7cmV0dXJuIHJlc3VsdC5jb3B5KHRoaXMub3JpZ2luKTt9cmV0dXJuIHJlc3VsdC5jb3B5KHRoaXMuZGlyZWN0aW9uKS5tdWx0aXBseVNjYWxhcihkaXJlY3Rpb25EaXN0YW5jZSkuYWRkKHRoaXMub3JpZ2luKTt9LGRpc3RhbmNlVG9Qb2ludDpmdW5jdGlvbiBkaXN0YW5jZVRvUG9pbnQocG9pbnQpe3JldHVybiBNYXRoLnNxcnQodGhpcy5kaXN0YW5jZVNxVG9Qb2ludChwb2ludCkpO30sZGlzdGFuY2VTcVRvUG9pbnQ6ZnVuY3Rpb24oKXt2YXIgdjE9bmV3IFZlY3RvcjMoKTtyZXR1cm4gZnVuY3Rpb24gZGlzdGFuY2VTcVRvUG9pbnQocG9pbnQpe3ZhciBkaXJlY3Rpb25EaXN0YW5jZT12MS5zdWJWZWN0b3JzKHBvaW50LHRoaXMub3JpZ2luKS5kb3QodGhpcy5kaXJlY3Rpb24pOy8vIHBvaW50IGJlaGluZCB0aGUgcmF5CmlmKGRpcmVjdGlvbkRpc3RhbmNlPDApe3JldHVybiB0aGlzLm9yaWdpbi5kaXN0YW5jZVRvU3F1YXJlZChwb2ludCk7fXYxLmNvcHkodGhpcy5kaXJlY3Rpb24pLm11bHRpcGx5U2NhbGFyKGRpcmVjdGlvbkRpc3RhbmNlKS5hZGQodGhpcy5vcmlnaW4pO3JldHVybiB2MS5kaXN0YW5jZVRvU3F1YXJlZChwb2ludCk7fTt9KCksZGlzdGFuY2VTcVRvU2VnbWVudDpmdW5jdGlvbigpe3ZhciBzZWdDZW50ZXI9bmV3IFZlY3RvcjMoKTt2YXIgc2VnRGlyPW5ldyBWZWN0b3IzKCk7dmFyIGRpZmY9bmV3IFZlY3RvcjMoKTtyZXR1cm4gZnVuY3Rpb24gZGlzdGFuY2VTcVRvU2VnbWVudCh2MCx2MSxvcHRpb25hbFBvaW50T25SYXksb3B0aW9uYWxQb2ludE9uU2VnbWVudCl7Ly8gZnJvbSBodHRwOi8vd3d3Lmdlb21ldHJpY3Rvb2xzLmNvbS9HVEVuZ2luZS9JbmNsdWRlL01hdGhlbWF0aWNzL0d0ZURpc3RSYXlTZWdtZW50LmgKLy8gSXQgcmV0dXJucyB0aGUgbWluIGRpc3RhbmNlIGJldHdlZW4gdGhlIHJheSBhbmQgdGhlIHNlZ21lbnQKLy8gZGVmaW5lZCBieSB2MCBhbmQgdjEKLy8gSXQgY2FuIGFsc28gc2V0IHR3byBvcHRpb25hbCB0YXJnZXRzIDoKLy8gLSBUaGUgY2xvc2VzdCBwb2ludCBvbiB0aGUgcmF5Ci8vIC0gVGhlIGNsb3Nlc3QgcG9pbnQgb24gdGhlIHNlZ21lbnQKc2VnQ2VudGVyLmNvcHkodjApLmFkZCh2MSkubXVsdGlwbHlTY2FsYXIoMC41KTtzZWdEaXIuY29weSh2MSkuc3ViKHYwKS5ub3JtYWxpemUoKTtkaWZmLmNvcHkodGhpcy5vcmlnaW4pLnN1YihzZWdDZW50ZXIpO3ZhciBzZWdFeHRlbnQ9djAuZGlzdGFuY2VUbyh2MSkqMC41O3ZhciBhMDE9LXRoaXMuZGlyZWN0aW9uLmRvdChzZWdEaXIpO3ZhciBiMD1kaWZmLmRvdCh0aGlzLmRpcmVjdGlvbik7dmFyIGIxPS1kaWZmLmRvdChzZWdEaXIpO3ZhciBjPWRpZmYubGVuZ3RoU3EoKTt2YXIgZGV0PU1hdGguYWJzKDEtYTAxKmEwMSk7dmFyIHMwLHMxLHNxckRpc3QsZXh0RGV0O2lmKGRldD4wKXsvLyBUaGUgcmF5IGFuZCBzZWdtZW50IGFyZSBub3QgcGFyYWxsZWwuCnMwPWEwMSpiMS1iMDtzMT1hMDEqYjAtYjE7ZXh0RGV0PXNlZ0V4dGVudCpkZXQ7aWYoczA+PTApe2lmKHMxPj0tZXh0RGV0KXtpZihzMTw9ZXh0RGV0KXsvLyByZWdpb24gMAovLyBNaW5pbXVtIGF0IGludGVyaW9yIHBvaW50cyBvZiByYXkgYW5kIHNlZ21lbnQuCnZhciBpbnZEZXQ9MS9kZXQ7czAqPWludkRldDtzMSo9aW52RGV0O3NxckRpc3Q9czAqKHMwK2EwMSpzMSsyKmIwKStzMSooYTAxKnMwK3MxKzIqYjEpK2M7fWVsc2V7Ly8gcmVnaW9uIDEKczE9c2VnRXh0ZW50O3MwPU1hdGgubWF4KDAsLShhMDEqczErYjApKTtzcXJEaXN0PS1zMCpzMCtzMSooczErMipiMSkrYzt9fWVsc2V7Ly8gcmVnaW9uIDUKczE9LXNlZ0V4dGVudDtzMD1NYXRoLm1heCgwLC0oYTAxKnMxK2IwKSk7c3FyRGlzdD0tczAqczArczEqKHMxKzIqYjEpK2M7fX1lbHNle2lmKHMxPD0tZXh0RGV0KXsvLyByZWdpb24gNApzMD1NYXRoLm1heCgwLC0oLWEwMSpzZWdFeHRlbnQrYjApKTtzMT1zMD4wPy1zZWdFeHRlbnQ6TWF0aC5taW4oTWF0aC5tYXgoLXNlZ0V4dGVudCwtYjEpLHNlZ0V4dGVudCk7c3FyRGlzdD0tczAqczArczEqKHMxKzIqYjEpK2M7fWVsc2UgaWYoczE8PWV4dERldCl7Ly8gcmVnaW9uIDMKczA9MDtzMT1NYXRoLm1pbihNYXRoLm1heCgtc2VnRXh0ZW50LC1iMSksc2VnRXh0ZW50KTtzcXJEaXN0PXMxKihzMSsyKmIxKStjO31lbHNley8vIHJlZ2lvbiAyCnMwPU1hdGgubWF4KDAsLShhMDEqc2VnRXh0ZW50K2IwKSk7czE9czA+MD9zZWdFeHRlbnQ6TWF0aC5taW4oTWF0aC5tYXgoLXNlZ0V4dGVudCwtYjEpLHNlZ0V4dGVudCk7c3FyRGlzdD0tczAqczArczEqKHMxKzIqYjEpK2M7fX19ZWxzZXsvLyBSYXkgYW5kIHNlZ21lbnQgYXJlIHBhcmFsbGVsLgpzMT1hMDE+MD8tc2VnRXh0ZW50OnNlZ0V4dGVudDtzMD1NYXRoLm1heCgwLC0oYTAxKnMxK2IwKSk7c3FyRGlzdD0tczAqczArczEqKHMxKzIqYjEpK2M7fWlmKG9wdGlvbmFsUG9pbnRPblJheSl7b3B0aW9uYWxQb2ludE9uUmF5LmNvcHkodGhpcy5kaXJlY3Rpb24pLm11bHRpcGx5U2NhbGFyKHMwKS5hZGQodGhpcy5vcmlnaW4pO31pZihvcHRpb25hbFBvaW50T25TZWdtZW50KXtvcHRpb25hbFBvaW50T25TZWdtZW50LmNvcHkoc2VnRGlyKS5tdWx0aXBseVNjYWxhcihzMSkuYWRkKHNlZ0NlbnRlcik7fXJldHVybiBzcXJEaXN0O307fSgpLGludGVyc2VjdFNwaGVyZTpmdW5jdGlvbigpe3ZhciB2MT1uZXcgVmVjdG9yMygpO3JldHVybiBmdW5jdGlvbiBpbnRlcnNlY3RTcGhlcmUoc3BoZXJlLG9wdGlvbmFsVGFyZ2V0KXt2MS5zdWJWZWN0b3JzKHNwaGVyZS5jZW50ZXIsdGhpcy5vcmlnaW4pO3ZhciB0Y2E9djEuZG90KHRoaXMuZGlyZWN0aW9uKTt2YXIgZDI9djEuZG90KHYxKS10Y2EqdGNhO3ZhciByYWRpdXMyPXNwaGVyZS5yYWRpdXMqc3BoZXJlLnJhZGl1cztpZihkMj5yYWRpdXMyKXJldHVybiBudWxsO3ZhciB0aGM9TWF0aC5zcXJ0KHJhZGl1czItZDIpOy8vIHQwID0gZmlyc3QgaW50ZXJzZWN0IHBvaW50IC0gZW50cmFuY2Ugb24gZnJvbnQgb2Ygc3BoZXJlCnZhciB0MD10Y2EtdGhjOy8vIHQxID0gc2Vjb25kIGludGVyc2VjdCBwb2ludCAtIGV4aXQgcG9pbnQgb24gYmFjayBvZiBzcGhlcmUKdmFyIHQxPXRjYSt0aGM7Ly8gdGVzdCB0byBzZWUgaWYgYm90aCB0MCBhbmQgdDEgYXJlIGJlaGluZCB0aGUgcmF5IC0gaWYgc28sIHJldHVybiBudWxsCmlmKHQwPDAmJnQxPDApcmV0dXJuIG51bGw7Ly8gdGVzdCB0byBzZWUgaWYgdDAgaXMgYmVoaW5kIHRoZSByYXk6Ci8vIGlmIGl0IGlzLCB0aGUgcmF5IGlzIGluc2lkZSB0aGUgc3BoZXJlLCBzbyByZXR1cm4gdGhlIHNlY29uZCBleGl0IHBvaW50IHNjYWxlZCBieSB0MSwKLy8gaW4gb3JkZXIgdG8gYWx3YXlzIHJldHVybiBhbiBpbnRlcnNlY3QgcG9pbnQgdGhhdCBpcyBpbiBmcm9udCBvZiB0aGUgcmF5LgppZih0MDwwKXJldHVybiB0aGlzLmF0KHQxLG9wdGlvbmFsVGFyZ2V0KTsvLyBlbHNlIHQwIGlzIGluIGZyb250IG9mIHRoZSByYXksIHNvIHJldHVybiB0aGUgZmlyc3QgY29sbGlzaW9uIHBvaW50IHNjYWxlZCBieSB0MApyZXR1cm4gdGhpcy5hdCh0MCxvcHRpb25hbFRhcmdldCk7fTt9KCksaW50ZXJzZWN0c1NwaGVyZTpmdW5jdGlvbiBpbnRlcnNlY3RzU3BoZXJlKHNwaGVyZSl7cmV0dXJuIHRoaXMuZGlzdGFuY2VUb1BvaW50KHNwaGVyZS5jZW50ZXIpPD1zcGhlcmUucmFkaXVzO30sZGlzdGFuY2VUb1BsYW5lOmZ1bmN0aW9uIGRpc3RhbmNlVG9QbGFuZShwbGFuZSl7dmFyIGRlbm9taW5hdG9yPXBsYW5lLm5vcm1hbC5kb3QodGhpcy5kaXJlY3Rpb24pO2lmKGRlbm9taW5hdG9yPT09MCl7Ly8gbGluZSBpcyBjb3BsYW5hciwgcmV0dXJuIG9yaWdpbgppZihwbGFuZS5kaXN0YW5jZVRvUG9pbnQodGhpcy5vcmlnaW4pPT09MCl7cmV0dXJuIDA7fS8vIE51bGwgaXMgcHJlZmVyYWJsZSB0byB1bmRlZmluZWQgc2luY2UgdW5kZWZpbmVkIG1lYW5zLi4uLiBpdCBpcyB1bmRlZmluZWQKcmV0dXJuIG51bGw7fXZhciB0PS0odGhpcy5vcmlnaW4uZG90KHBsYW5lLm5vcm1hbCkrcGxhbmUuY29uc3RhbnQpL2Rlbm9taW5hdG9yOy8vIFJldHVybiBpZiB0aGUgcmF5IG5ldmVyIGludGVyc2VjdHMgdGhlIHBsYW5lCnJldHVybiB0Pj0wP3Q6bnVsbDt9LGludGVyc2VjdFBsYW5lOmZ1bmN0aW9uIGludGVyc2VjdFBsYW5lKHBsYW5lLG9wdGlvbmFsVGFyZ2V0KXt2YXIgdD10aGlzLmRpc3RhbmNlVG9QbGFuZShwbGFuZSk7aWYodD09PW51bGwpe3JldHVybiBudWxsO31yZXR1cm4gdGhpcy5hdCh0LG9wdGlvbmFsVGFyZ2V0KTt9LGludGVyc2VjdHNQbGFuZTpmdW5jdGlvbiBpbnRlcnNlY3RzUGxhbmUocGxhbmUpey8vIGNoZWNrIGlmIHRoZSByYXkgbGllcyBvbiB0aGUgcGxhbmUgZmlyc3QKdmFyIGRpc3RUb1BvaW50PXBsYW5lLmRpc3RhbmNlVG9Qb2ludCh0aGlzLm9yaWdpbik7aWYoZGlzdFRvUG9pbnQ9PT0wKXtyZXR1cm4gdHJ1ZTt9dmFyIGRlbm9taW5hdG9yPXBsYW5lLm5vcm1hbC5kb3QodGhpcy5kaXJlY3Rpb24pO2lmKGRlbm9taW5hdG9yKmRpc3RUb1BvaW50PDApe3JldHVybiB0cnVlO30vLyByYXkgb3JpZ2luIGlzIGJlaGluZCB0aGUgcGxhbmUgKGFuZCBpcyBwb2ludGluZyBiZWhpbmQgaXQpCnJldHVybiBmYWxzZTt9LGludGVyc2VjdEJveDpmdW5jdGlvbiBpbnRlcnNlY3RCb3goYm94LG9wdGlvbmFsVGFyZ2V0KXt2YXIgdG1pbix0bWF4LHR5bWluLHR5bWF4LHR6bWluLHR6bWF4O3ZhciBpbnZkaXJ4PTEvdGhpcy5kaXJlY3Rpb24ueCxpbnZkaXJ5PTEvdGhpcy5kaXJlY3Rpb24ueSxpbnZkaXJ6PTEvdGhpcy5kaXJlY3Rpb24uejt2YXIgb3JpZ2luPXRoaXMub3JpZ2luO2lmKGludmRpcng+PTApe3RtaW49KGJveC5taW4ueC1vcmlnaW4ueCkqaW52ZGlyeDt0bWF4PShib3gubWF4Lngtb3JpZ2luLngpKmludmRpcng7fWVsc2V7dG1pbj0oYm94Lm1heC54LW9yaWdpbi54KSppbnZkaXJ4O3RtYXg9KGJveC5taW4ueC1vcmlnaW4ueCkqaW52ZGlyeDt9aWYoaW52ZGlyeT49MCl7dHltaW49KGJveC5taW4ueS1vcmlnaW4ueSkqaW52ZGlyeTt0eW1heD0oYm94Lm1heC55LW9yaWdpbi55KSppbnZkaXJ5O31lbHNle3R5bWluPShib3gubWF4Lnktb3JpZ2luLnkpKmludmRpcnk7dHltYXg9KGJveC5taW4ueS1vcmlnaW4ueSkqaW52ZGlyeTt9aWYodG1pbj50eW1heHx8dHltaW4+dG1heClyZXR1cm4gbnVsbDsvLyBUaGVzZSBsaW5lcyBhbHNvIGhhbmRsZSB0aGUgY2FzZSB3aGVyZSB0bWluIG9yIHRtYXggaXMgTmFOCi8vIChyZXN1bHQgb2YgMCAqIEluZmluaXR5KS4geCAhPT0geCByZXR1cm5zIHRydWUgaWYgeCBpcyBOYU4KaWYodHltaW4+dG1pbnx8dG1pbiE9PXRtaW4pdG1pbj10eW1pbjtpZih0eW1heDx0bWF4fHx0bWF4IT09dG1heCl0bWF4PXR5bWF4O2lmKGludmRpcno+PTApe3R6bWluPShib3gubWluLnotb3JpZ2luLnopKmludmRpcno7dHptYXg9KGJveC5tYXguei1vcmlnaW4ueikqaW52ZGlyejt9ZWxzZXt0em1pbj0oYm94Lm1heC56LW9yaWdpbi56KSppbnZkaXJ6O3R6bWF4PShib3gubWluLnotb3JpZ2luLnopKmludmRpcno7fWlmKHRtaW4+dHptYXh8fHR6bWluPnRtYXgpcmV0dXJuIG51bGw7aWYodHptaW4+dG1pbnx8dG1pbiE9PXRtaW4pdG1pbj10em1pbjtpZih0em1heDx0bWF4fHx0bWF4IT09dG1heCl0bWF4PXR6bWF4Oy8vcmV0dXJuIHBvaW50IGNsb3Nlc3QgdG8gdGhlIHJheSAocG9zaXRpdmUgc2lkZSkKaWYodG1heDwwKXJldHVybiBudWxsO3JldHVybiB0aGlzLmF0KHRtaW4+PTA/dG1pbjp0bWF4LG9wdGlvbmFsVGFyZ2V0KTt9LGludGVyc2VjdHNCb3g6ZnVuY3Rpb24oKXt2YXIgdj1uZXcgVmVjdG9yMygpO3JldHVybiBmdW5jdGlvbiBpbnRlcnNlY3RzQm94KGJveCl7cmV0dXJuIHRoaXMuaW50ZXJzZWN0Qm94KGJveCx2KSE9PW51bGw7fTt9KCksaW50ZXJzZWN0VHJpYW5nbGU6ZnVuY3Rpb24oKXsvLyBDb21wdXRlIHRoZSBvZmZzZXQgb3JpZ2luLCBlZGdlcywgYW5kIG5vcm1hbC4KdmFyIGRpZmY9bmV3IFZlY3RvcjMoKTt2YXIgZWRnZTE9bmV3IFZlY3RvcjMoKTt2YXIgZWRnZTI9bmV3IFZlY3RvcjMoKTt2YXIgbm9ybWFsPW5ldyBWZWN0b3IzKCk7cmV0dXJuIGZ1bmN0aW9uIGludGVyc2VjdFRyaWFuZ2xlKGEsYixjLGJhY2tmYWNlQ3VsbGluZyxvcHRpb25hbFRhcmdldCl7Ly8gZnJvbSBodHRwOi8vd3d3Lmdlb21ldHJpY3Rvb2xzLmNvbS9HVEVuZ2luZS9JbmNsdWRlL01hdGhlbWF0aWNzL0d0ZUludHJSYXkzVHJpYW5nbGUzLmgKZWRnZTEuc3ViVmVjdG9ycyhiLGEpO2VkZ2UyLnN1YlZlY3RvcnMoYyxhKTtub3JtYWwuY3Jvc3NWZWN0b3JzKGVkZ2UxLGVkZ2UyKTsvLyBTb2x2ZSBRICsgdCpEID0gYjEqRTEgKyBiMipFMiAoUSA9IGtEaWZmLCBEID0gcmF5IGRpcmVjdGlvbiwKLy8gRTEgPSBrRWRnZTEsIEUyID0ga0VkZ2UyLCBOID0gQ3Jvc3MoRTEsRTIpKSBieQovLyAgIHxEb3QoRCxOKXwqYjEgPSBzaWduKERvdChELE4pKSpEb3QoRCxDcm9zcyhRLEUyKSkKLy8gICB8RG90KEQsTil8KmIyID0gc2lnbihEb3QoRCxOKSkqRG90KEQsQ3Jvc3MoRTEsUSkpCi8vICAgfERvdChELE4pfCp0ID0gLXNpZ24oRG90KEQsTikpKkRvdChRLE4pCnZhciBEZE49dGhpcy5kaXJlY3Rpb24uZG90KG5vcm1hbCk7dmFyIHNpZ247aWYoRGROPjApe2lmKGJhY2tmYWNlQ3VsbGluZylyZXR1cm4gbnVsbDtzaWduPTE7fWVsc2UgaWYoRGROPDApe3NpZ249LTE7RGROPS1EZE47fWVsc2V7cmV0dXJuIG51bGw7fWRpZmYuc3ViVmVjdG9ycyh0aGlzLm9yaWdpbixhKTt2YXIgRGRReEUyPXNpZ24qdGhpcy5kaXJlY3Rpb24uZG90KGVkZ2UyLmNyb3NzVmVjdG9ycyhkaWZmLGVkZ2UyKSk7Ly8gYjEgPCAwLCBubyBpbnRlcnNlY3Rpb24KaWYoRGRReEUyPDApe3JldHVybiBudWxsO312YXIgRGRFMXhRPXNpZ24qdGhpcy5kaXJlY3Rpb24uZG90KGVkZ2UxLmNyb3NzKGRpZmYpKTsvLyBiMiA8IDAsIG5vIGludGVyc2VjdGlvbgppZihEZEUxeFE8MCl7cmV0dXJuIG51bGw7fS8vIGIxK2IyID4gMSwgbm8gaW50ZXJzZWN0aW9uCmlmKERkUXhFMitEZEUxeFE+RGROKXtyZXR1cm4gbnVsbDt9Ly8gTGluZSBpbnRlcnNlY3RzIHRyaWFuZ2xlLCBjaGVjayBpZiByYXkgZG9lcy4KdmFyIFFkTj0tc2lnbipkaWZmLmRvdChub3JtYWwpOy8vIHQgPCAwLCBubyBpbnRlcnNlY3Rpb24KaWYoUWROPDApe3JldHVybiBudWxsO30vLyBSYXkgaW50ZXJzZWN0cyB0cmlhbmdsZS4KcmV0dXJuIHRoaXMuYXQoUWROL0RkTixvcHRpb25hbFRhcmdldCk7fTt9KCksYXBwbHlNYXRyaXg0OmZ1bmN0aW9uIGFwcGx5TWF0cml4NChtYXRyaXg0KXt0aGlzLm9yaWdpbi5hcHBseU1hdHJpeDQobWF0cml4NCk7dGhpcy5kaXJlY3Rpb24udHJhbnNmb3JtRGlyZWN0aW9uKG1hdHJpeDQpO3JldHVybiB0aGlzO30sZXF1YWxzOmZ1bmN0aW9uIGVxdWFscyhyYXkpe3JldHVybiByYXkub3JpZ2luLmVxdWFscyh0aGlzLm9yaWdpbikmJnJheS5kaXJlY3Rpb24uZXF1YWxzKHRoaXMuZGlyZWN0aW9uKTt9fSk7LyoqCiAqIEBhdXRob3IgYmhvdXN0b24gLyBodHRwOi8vY2xhcmEuaW8KICovZnVuY3Rpb24gTGluZTMoc3RhcnQsZW5kKXt0aGlzLnN0YXJ0PXN0YXJ0IT09dW5kZWZpbmVkP3N0YXJ0Om5ldyBWZWN0b3IzKCk7dGhpcy5lbmQ9ZW5kIT09dW5kZWZpbmVkP2VuZDpuZXcgVmVjdG9yMygpO31PYmplY3QuYXNzaWduKExpbmUzLnByb3RvdHlwZSx7c2V0OmZ1bmN0aW9uIHNldChzdGFydCxlbmQpe3RoaXMuc3RhcnQuY29weShzdGFydCk7dGhpcy5lbmQuY29weShlbmQpO3JldHVybiB0aGlzO30sY2xvbmU6ZnVuY3Rpb24gY2xvbmUoKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IoKS5jb3B5KHRoaXMpO30sY29weTpmdW5jdGlvbiBjb3B5KGxpbmUpe3RoaXMuc3RhcnQuY29weShsaW5lLnN0YXJ0KTt0aGlzLmVuZC5jb3B5KGxpbmUuZW5kKTtyZXR1cm4gdGhpczt9LGdldENlbnRlcjpmdW5jdGlvbiBnZXRDZW50ZXIob3B0aW9uYWxUYXJnZXQpe3ZhciByZXN1bHQ9b3B0aW9uYWxUYXJnZXR8fG5ldyBWZWN0b3IzKCk7cmV0dXJuIHJlc3VsdC5hZGRWZWN0b3JzKHRoaXMuc3RhcnQsdGhpcy5lbmQpLm11bHRpcGx5U2NhbGFyKDAuNSk7fSxkZWx0YTpmdW5jdGlvbiBkZWx0YShvcHRpb25hbFRhcmdldCl7dmFyIHJlc3VsdD1vcHRpb25hbFRhcmdldHx8bmV3IFZlY3RvcjMoKTtyZXR1cm4gcmVzdWx0LnN1YlZlY3RvcnModGhpcy5lbmQsdGhpcy5zdGFydCk7fSxkaXN0YW5jZVNxOmZ1bmN0aW9uIGRpc3RhbmNlU3EoKXtyZXR1cm4gdGhpcy5zdGFydC5kaXN0YW5jZVRvU3F1YXJlZCh0aGlzLmVuZCk7fSxkaXN0YW5jZTpmdW5jdGlvbiBkaXN0YW5jZSgpe3JldHVybiB0aGlzLnN0YXJ0LmRpc3RhbmNlVG8odGhpcy5lbmQpO30sYXQ6ZnVuY3Rpb24gYXQodCxvcHRpb25hbFRhcmdldCl7dmFyIHJlc3VsdD1vcHRpb25hbFRhcmdldHx8bmV3IFZlY3RvcjMoKTtyZXR1cm4gdGhpcy5kZWx0YShyZXN1bHQpLm11bHRpcGx5U2NhbGFyKHQpLmFkZCh0aGlzLnN0YXJ0KTt9LGNsb3Nlc3RQb2ludFRvUG9pbnRQYXJhbWV0ZXI6ZnVuY3Rpb24oKXt2YXIgc3RhcnRQPW5ldyBWZWN0b3IzKCk7dmFyIHN0YXJ0RW5kPW5ldyBWZWN0b3IzKCk7cmV0dXJuIGZ1bmN0aW9uIGNsb3Nlc3RQb2ludFRvUG9pbnRQYXJhbWV0ZXIocG9pbnQsY2xhbXBUb0xpbmUpe3N0YXJ0UC5zdWJWZWN0b3JzKHBvaW50LHRoaXMuc3RhcnQpO3N0YXJ0RW5kLnN1YlZlY3RvcnModGhpcy5lbmQsdGhpcy5zdGFydCk7dmFyIHN0YXJ0RW5kMj1zdGFydEVuZC5kb3Qoc3RhcnRFbmQpO3ZhciBzdGFydEVuZF9zdGFydFA9c3RhcnRFbmQuZG90KHN0YXJ0UCk7dmFyIHQ9c3RhcnRFbmRfc3RhcnRQL3N0YXJ0RW5kMjtpZihjbGFtcFRvTGluZSl7dD1fTWF0aC5jbGFtcCh0LDAsMSk7fXJldHVybiB0O307fSgpLGNsb3Nlc3RQb2ludFRvUG9pbnQ6ZnVuY3Rpb24gY2xvc2VzdFBvaW50VG9Qb2ludChwb2ludCxjbGFtcFRvTGluZSxvcHRpb25hbFRhcmdldCl7dmFyIHQ9dGhpcy5jbG9zZXN0UG9pbnRUb1BvaW50UGFyYW1ldGVyKHBvaW50LGNsYW1wVG9MaW5lKTt2YXIgcmVzdWx0PW9wdGlvbmFsVGFyZ2V0fHxuZXcgVmVjdG9yMygpO3JldHVybiB0aGlzLmRlbHRhKHJlc3VsdCkubXVsdGlwbHlTY2FsYXIodCkuYWRkKHRoaXMuc3RhcnQpO30sYXBwbHlNYXRyaXg0OmZ1bmN0aW9uIGFwcGx5TWF0cml4NChtYXRyaXgpe3RoaXMuc3RhcnQuYXBwbHlNYXRyaXg0KG1hdHJpeCk7dGhpcy5lbmQuYXBwbHlNYXRyaXg0KG1hdHJpeCk7cmV0dXJuIHRoaXM7fSxlcXVhbHM6ZnVuY3Rpb24gZXF1YWxzKGxpbmUpe3JldHVybiBsaW5lLnN0YXJ0LmVxdWFscyh0aGlzLnN0YXJ0KSYmbGluZS5lbmQuZXF1YWxzKHRoaXMuZW5kKTt9fSk7LyoqCiAqIEBhdXRob3IgYmhvdXN0b24gLyBodHRwOi8vY2xhcmEuaW8KICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS8KICovZnVuY3Rpb24gVHJpYW5nbGUoYSxiLGMpe3RoaXMuYT1hIT09dW5kZWZpbmVkP2E6bmV3IFZlY3RvcjMoKTt0aGlzLmI9YiE9PXVuZGVmaW5lZD9iOm5ldyBWZWN0b3IzKCk7dGhpcy5jPWMhPT11bmRlZmluZWQ/YzpuZXcgVmVjdG9yMygpO31PYmplY3QuYXNzaWduKFRyaWFuZ2xlLHtub3JtYWw6ZnVuY3Rpb24oKXt2YXIgdjA9bmV3IFZlY3RvcjMoKTtyZXR1cm4gZnVuY3Rpb24gbm9ybWFsKGEsYixjLG9wdGlvbmFsVGFyZ2V0KXt2YXIgcmVzdWx0PW9wdGlvbmFsVGFyZ2V0fHxuZXcgVmVjdG9yMygpO3Jlc3VsdC5zdWJWZWN0b3JzKGMsYik7djAuc3ViVmVjdG9ycyhhLGIpO3Jlc3VsdC5jcm9zcyh2MCk7dmFyIHJlc3VsdExlbmd0aFNxPXJlc3VsdC5sZW5ndGhTcSgpO2lmKHJlc3VsdExlbmd0aFNxPjApe3JldHVybiByZXN1bHQubXVsdGlwbHlTY2FsYXIoMS9NYXRoLnNxcnQocmVzdWx0TGVuZ3RoU3EpKTt9cmV0dXJuIHJlc3VsdC5zZXQoMCwwLDApO307fSgpLC8vIHN0YXRpYy9pbnN0YW5jZSBtZXRob2QgdG8gY2FsY3VsYXRlIGJhcnljZW50cmljIGNvb3JkaW5hdGVzCi8vIGJhc2VkIG9uOiBodHRwOi8vd3d3LmJsYWNrcGF3bi5jb20vdGV4dHMvcG9pbnRpbnBvbHkvZGVmYXVsdC5odG1sCmJhcnljb29yZEZyb21Qb2ludDpmdW5jdGlvbigpe3ZhciB2MD1uZXcgVmVjdG9yMygpO3ZhciB2MT1uZXcgVmVjdG9yMygpO3ZhciB2Mj1uZXcgVmVjdG9yMygpO3JldHVybiBmdW5jdGlvbiBiYXJ5Y29vcmRGcm9tUG9pbnQocG9pbnQsYSxiLGMsb3B0aW9uYWxUYXJnZXQpe3YwLnN1YlZlY3RvcnMoYyxhKTt2MS5zdWJWZWN0b3JzKGIsYSk7djIuc3ViVmVjdG9ycyhwb2ludCxhKTt2YXIgZG90MDA9djAuZG90KHYwKTt2YXIgZG90MDE9djAuZG90KHYxKTt2YXIgZG90MDI9djAuZG90KHYyKTt2YXIgZG90MTE9djEuZG90KHYxKTt2YXIgZG90MTI9djEuZG90KHYyKTt2YXIgZGVub209ZG90MDAqZG90MTEtZG90MDEqZG90MDE7dmFyIHJlc3VsdD1vcHRpb25hbFRhcmdldHx8bmV3IFZlY3RvcjMoKTsvLyBjb2xsaW5lYXIgb3Igc2luZ3VsYXIgdHJpYW5nbGUKaWYoZGVub209PT0wKXsvLyBhcmJpdHJhcnkgbG9jYXRpb24gb3V0c2lkZSBvZiB0cmlhbmdsZT8KLy8gbm90IHN1cmUgaWYgdGhpcyBpcyB0aGUgYmVzdCBpZGVhLCBtYXliZSBzaG91bGQgYmUgcmV0dXJuaW5nIHVuZGVmaW5lZApyZXR1cm4gcmVzdWx0LnNldCgtMiwtMSwtMSk7fXZhciBpbnZEZW5vbT0xL2Rlbm9tO3ZhciB1PShkb3QxMSpkb3QwMi1kb3QwMSpkb3QxMikqaW52RGVub207dmFyIHY9KGRvdDAwKmRvdDEyLWRvdDAxKmRvdDAyKSppbnZEZW5vbTsvLyBiYXJ5Y2VudHJpYyBjb29yZGluYXRlcyBtdXN0IGFsd2F5cyBzdW0gdG8gMQpyZXR1cm4gcmVzdWx0LnNldCgxLXUtdix2LHUpO307fSgpLGNvbnRhaW5zUG9pbnQ6ZnVuY3Rpb24oKXt2YXIgdjE9bmV3IFZlY3RvcjMoKTtyZXR1cm4gZnVuY3Rpb24gY29udGFpbnNQb2ludChwb2ludCxhLGIsYyl7dmFyIHJlc3VsdD1UcmlhbmdsZS5iYXJ5Y29vcmRGcm9tUG9pbnQocG9pbnQsYSxiLGMsdjEpO3JldHVybiByZXN1bHQueD49MCYmcmVzdWx0Lnk+PTAmJnJlc3VsdC54K3Jlc3VsdC55PD0xO307fSgpfSk7T2JqZWN0LmFzc2lnbihUcmlhbmdsZS5wcm90b3R5cGUse3NldDpmdW5jdGlvbiBzZXQoYSxiLGMpe3RoaXMuYS5jb3B5KGEpO3RoaXMuYi5jb3B5KGIpO3RoaXMuYy5jb3B5KGMpO3JldHVybiB0aGlzO30sc2V0RnJvbVBvaW50c0FuZEluZGljZXM6ZnVuY3Rpb24gc2V0RnJvbVBvaW50c0FuZEluZGljZXMocG9pbnRzLGkwLGkxLGkyKXt0aGlzLmEuY29weShwb2ludHNbaTBdKTt0aGlzLmIuY29weShwb2ludHNbaTFdKTt0aGlzLmMuY29weShwb2ludHNbaTJdKTtyZXR1cm4gdGhpczt9LGNsb25lOmZ1bmN0aW9uIGNsb25lKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKCkuY29weSh0aGlzKTt9LGNvcHk6ZnVuY3Rpb24gY29weSh0cmlhbmdsZSl7dGhpcy5hLmNvcHkodHJpYW5nbGUuYSk7dGhpcy5iLmNvcHkodHJpYW5nbGUuYik7dGhpcy5jLmNvcHkodHJpYW5nbGUuYyk7cmV0dXJuIHRoaXM7fSxhcmVhOmZ1bmN0aW9uKCl7dmFyIHYwPW5ldyBWZWN0b3IzKCk7dmFyIHYxPW5ldyBWZWN0b3IzKCk7cmV0dXJuIGZ1bmN0aW9uIGFyZWEoKXt2MC5zdWJWZWN0b3JzKHRoaXMuYyx0aGlzLmIpO3YxLnN1YlZlY3RvcnModGhpcy5hLHRoaXMuYik7cmV0dXJuIHYwLmNyb3NzKHYxKS5sZW5ndGgoKSowLjU7fTt9KCksbWlkcG9pbnQ6ZnVuY3Rpb24gbWlkcG9pbnQob3B0aW9uYWxUYXJnZXQpe3ZhciByZXN1bHQ9b3B0aW9uYWxUYXJnZXR8fG5ldyBWZWN0b3IzKCk7cmV0dXJuIHJlc3VsdC5hZGRWZWN0b3JzKHRoaXMuYSx0aGlzLmIpLmFkZCh0aGlzLmMpLm11bHRpcGx5U2NhbGFyKDEvMyk7fSxub3JtYWw6ZnVuY3Rpb24gbm9ybWFsKG9wdGlvbmFsVGFyZ2V0KXtyZXR1cm4gVHJpYW5nbGUubm9ybWFsKHRoaXMuYSx0aGlzLmIsdGhpcy5jLG9wdGlvbmFsVGFyZ2V0KTt9LHBsYW5lOmZ1bmN0aW9uIHBsYW5lKG9wdGlvbmFsVGFyZ2V0KXt2YXIgcmVzdWx0PW9wdGlvbmFsVGFyZ2V0fHxuZXcgUGxhbmUoKTtyZXR1cm4gcmVzdWx0LnNldEZyb21Db3BsYW5hclBvaW50cyh0aGlzLmEsdGhpcy5iLHRoaXMuYyk7fSxiYXJ5Y29vcmRGcm9tUG9pbnQ6ZnVuY3Rpb24gYmFyeWNvb3JkRnJvbVBvaW50KHBvaW50LG9wdGlvbmFsVGFyZ2V0KXtyZXR1cm4gVHJpYW5nbGUuYmFyeWNvb3JkRnJvbVBvaW50KHBvaW50LHRoaXMuYSx0aGlzLmIsdGhpcy5jLG9wdGlvbmFsVGFyZ2V0KTt9LGNvbnRhaW5zUG9pbnQ6ZnVuY3Rpb24gY29udGFpbnNQb2ludChwb2ludCl7cmV0dXJuIFRyaWFuZ2xlLmNvbnRhaW5zUG9pbnQocG9pbnQsdGhpcy5hLHRoaXMuYix0aGlzLmMpO30sY2xvc2VzdFBvaW50VG9Qb2ludDpmdW5jdGlvbigpe3ZhciBwbGFuZT1uZXcgUGxhbmUoKTt2YXIgZWRnZUxpc3Q9W25ldyBMaW5lMygpLG5ldyBMaW5lMygpLG5ldyBMaW5lMygpXTt2YXIgcHJvamVjdGVkUG9pbnQ9bmV3IFZlY3RvcjMoKTt2YXIgY2xvc2VzdFBvaW50PW5ldyBWZWN0b3IzKCk7cmV0dXJuIGZ1bmN0aW9uIGNsb3Nlc3RQb2ludFRvUG9pbnQocG9pbnQsb3B0aW9uYWxUYXJnZXQpe3ZhciByZXN1bHQ9b3B0aW9uYWxUYXJnZXR8fG5ldyBWZWN0b3IzKCk7dmFyIG1pbkRpc3RhbmNlPUluZmluaXR5Oy8vIHByb2plY3QgdGhlIHBvaW50IG9udG8gdGhlIHBsYW5lIG9mIHRoZSB0cmlhbmdsZQpwbGFuZS5zZXRGcm9tQ29wbGFuYXJQb2ludHModGhpcy5hLHRoaXMuYix0aGlzLmMpO3BsYW5lLnByb2plY3RQb2ludChwb2ludCxwcm9qZWN0ZWRQb2ludCk7Ly8gY2hlY2sgaWYgdGhlIHByb2plY3Rpb24gbGllcyB3aXRoaW4gdGhlIHRyaWFuZ2xlCmlmKHRoaXMuY29udGFpbnNQb2ludChwcm9qZWN0ZWRQb2ludCk9PT10cnVlKXsvLyBpZiBzbywgdGhpcyBpcyB0aGUgY2xvc2VzdCBwb2ludApyZXN1bHQuY29weShwcm9qZWN0ZWRQb2ludCk7fWVsc2V7Ly8gaWYgbm90LCB0aGUgcG9pbnQgZmFsbHMgb3V0c2lkZSB0aGUgdHJpYW5nbGUuIHRoZSByZXN1bHQgaXMgdGhlIGNsb3Nlc3QgcG9pbnQgdG8gdGhlIHRyaWFuZ2xlJ3MgZWRnZXMgb3IgdmVydGljZXMKZWRnZUxpc3RbMF0uc2V0KHRoaXMuYSx0aGlzLmIpO2VkZ2VMaXN0WzFdLnNldCh0aGlzLmIsdGhpcy5jKTtlZGdlTGlzdFsyXS5zZXQodGhpcy5jLHRoaXMuYSk7Zm9yKHZhciBpPTA7aTxlZGdlTGlzdC5sZW5ndGg7aSsrKXtlZGdlTGlzdFtpXS5jbG9zZXN0UG9pbnRUb1BvaW50KHByb2plY3RlZFBvaW50LHRydWUsY2xvc2VzdFBvaW50KTt2YXIgZGlzdGFuY2U9cHJvamVjdGVkUG9pbnQuZGlzdGFuY2VUb1NxdWFyZWQoY2xvc2VzdFBvaW50KTtpZihkaXN0YW5jZTxtaW5EaXN0YW5jZSl7bWluRGlzdGFuY2U9ZGlzdGFuY2U7cmVzdWx0LmNvcHkoY2xvc2VzdFBvaW50KTt9fX1yZXR1cm4gcmVzdWx0O307fSgpLGVxdWFsczpmdW5jdGlvbiBlcXVhbHModHJpYW5nbGUpe3JldHVybiB0cmlhbmdsZS5hLmVxdWFscyh0aGlzLmEpJiZ0cmlhbmdsZS5iLmVxdWFscyh0aGlzLmIpJiZ0cmlhbmdsZS5jLmVxdWFscyh0aGlzLmMpO319KTsvKioKICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS8KICogQGF1dGhvciBhbHRlcmVkcSAvIGh0dHA6Ly9hbHRlcmVkcXVhbGlhLmNvbS8KICogQGF1dGhvciBtaWthZWwgZW10aW5nZXIgLyBodHRwOi8vZ29tby5zZS8KICogQGF1dGhvciBqb25vYnIxIC8gaHR0cDovL2pvbm9icjEuY29tLwogKi9mdW5jdGlvbiBNZXNoKGdlb21ldHJ5LG1hdGVyaWFsKXtPYmplY3QzRC5jYWxsKHRoaXMpO3RoaXMudHlwZT0nTWVzaCc7dGhpcy5nZW9tZXRyeT1nZW9tZXRyeSE9PXVuZGVmaW5lZD9nZW9tZXRyeTpuZXcgQnVmZmVyR2VvbWV0cnkoKTt0aGlzLm1hdGVyaWFsPW1hdGVyaWFsIT09dW5kZWZpbmVkP21hdGVyaWFsOm5ldyBNZXNoQmFzaWNNYXRlcmlhbCh7Y29sb3I6TWF0aC5yYW5kb20oKSoweGZmZmZmZn0pO3RoaXMuZHJhd01vZGU9VHJpYW5nbGVzRHJhd01vZGU7dGhpcy51cGRhdGVNb3JwaFRhcmdldHMoKTt9TWVzaC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKE9iamVjdDNELnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOk1lc2gsaXNNZXNoOnRydWUsc2V0RHJhd01vZGU6ZnVuY3Rpb24gc2V0RHJhd01vZGUodmFsdWUpe3RoaXMuZHJhd01vZGU9dmFsdWU7fSxjb3B5OmZ1bmN0aW9uIGNvcHkoc291cmNlKXtPYmplY3QzRC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsc291cmNlKTt0aGlzLmRyYXdNb2RlPXNvdXJjZS5kcmF3TW9kZTtpZihzb3VyY2UubW9ycGhUYXJnZXRJbmZsdWVuY2VzIT09dW5kZWZpbmVkKXt0aGlzLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcz1zb3VyY2UubW9ycGhUYXJnZXRJbmZsdWVuY2VzLnNsaWNlKCk7fWlmKHNvdXJjZS5tb3JwaFRhcmdldERpY3Rpb25hcnkhPT11bmRlZmluZWQpe3RoaXMubW9ycGhUYXJnZXREaWN0aW9uYXJ5PU9iamVjdC5hc3NpZ24oe30sc291cmNlLm1vcnBoVGFyZ2V0RGljdGlvbmFyeSk7fXJldHVybiB0aGlzO30sdXBkYXRlTW9ycGhUYXJnZXRzOmZ1bmN0aW9uIHVwZGF0ZU1vcnBoVGFyZ2V0cygpe3ZhciBnZW9tZXRyeT10aGlzLmdlb21ldHJ5O3ZhciBtLG1sLG5hbWU7aWYoZ2VvbWV0cnkuaXNCdWZmZXJHZW9tZXRyeSl7dmFyIG1vcnBoQXR0cmlidXRlcz1nZW9tZXRyeS5tb3JwaEF0dHJpYnV0ZXM7dmFyIGtleXM9T2JqZWN0LmtleXMobW9ycGhBdHRyaWJ1dGVzKTtpZihrZXlzLmxlbmd0aD4wKXt2YXIgbW9ycGhBdHRyaWJ1dGU9bW9ycGhBdHRyaWJ1dGVzW2tleXNbMF1dO2lmKG1vcnBoQXR0cmlidXRlIT09dW5kZWZpbmVkKXt0aGlzLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcz1bXTt0aGlzLm1vcnBoVGFyZ2V0RGljdGlvbmFyeT17fTtmb3IobT0wLG1sPW1vcnBoQXR0cmlidXRlLmxlbmd0aDttPG1sO20rKyl7bmFtZT1tb3JwaEF0dHJpYnV0ZVttXS5uYW1lfHxTdHJpbmcobSk7dGhpcy5tb3JwaFRhcmdldEluZmx1ZW5jZXMucHVzaCgwKTt0aGlzLm1vcnBoVGFyZ2V0RGljdGlvbmFyeVtuYW1lXT1tO319fX1lbHNle3ZhciBtb3JwaFRhcmdldHM9Z2VvbWV0cnkubW9ycGhUYXJnZXRzO2lmKG1vcnBoVGFyZ2V0cyE9PXVuZGVmaW5lZCYmbW9ycGhUYXJnZXRzLmxlbmd0aD4wKXt0aGlzLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcz1bXTt0aGlzLm1vcnBoVGFyZ2V0RGljdGlvbmFyeT17fTtmb3IobT0wLG1sPW1vcnBoVGFyZ2V0cy5sZW5ndGg7bTxtbDttKyspe25hbWU9bW9ycGhUYXJnZXRzW21dLm5hbWV8fFN0cmluZyhtKTt0aGlzLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcy5wdXNoKDApO3RoaXMubW9ycGhUYXJnZXREaWN0aW9uYXJ5W25hbWVdPW07fX19fSxyYXljYXN0OmZ1bmN0aW9uKCl7dmFyIGludmVyc2VNYXRyaXg9bmV3IE1hdHJpeDQoKTt2YXIgcmF5PW5ldyBSYXkoKTt2YXIgc3BoZXJlPW5ldyBTcGhlcmUoKTt2YXIgdkE9bmV3IFZlY3RvcjMoKTt2YXIgdkI9bmV3IFZlY3RvcjMoKTt2YXIgdkM9bmV3IFZlY3RvcjMoKTt2YXIgdGVtcEE9bmV3IFZlY3RvcjMoKTt2YXIgdGVtcEI9bmV3IFZlY3RvcjMoKTt2YXIgdGVtcEM9bmV3IFZlY3RvcjMoKTt2YXIgdXZBPW5ldyBWZWN0b3IyKCk7dmFyIHV2Qj1uZXcgVmVjdG9yMigpO3ZhciB1dkM9bmV3IFZlY3RvcjIoKTt2YXIgYmFyeWNvb3JkPW5ldyBWZWN0b3IzKCk7dmFyIGludGVyc2VjdGlvblBvaW50PW5ldyBWZWN0b3IzKCk7dmFyIGludGVyc2VjdGlvblBvaW50V29ybGQ9bmV3IFZlY3RvcjMoKTtmdW5jdGlvbiB1dkludGVyc2VjdGlvbihwb2ludCxwMSxwMixwMyx1djEsdXYyLHV2Myl7VHJpYW5nbGUuYmFyeWNvb3JkRnJvbVBvaW50KHBvaW50LHAxLHAyLHAzLGJhcnljb29yZCk7dXYxLm11bHRpcGx5U2NhbGFyKGJhcnljb29yZC54KTt1djIubXVsdGlwbHlTY2FsYXIoYmFyeWNvb3JkLnkpO3V2My5tdWx0aXBseVNjYWxhcihiYXJ5Y29vcmQueik7dXYxLmFkZCh1djIpLmFkZCh1djMpO3JldHVybiB1djEuY2xvbmUoKTt9ZnVuY3Rpb24gY2hlY2tJbnRlcnNlY3Rpb24ob2JqZWN0LG1hdGVyaWFsLHJheWNhc3RlcixyYXkscEEscEIscEMscG9pbnQpe3ZhciBpbnRlcnNlY3Q7aWYobWF0ZXJpYWwuc2lkZT09PUJhY2tTaWRlKXtpbnRlcnNlY3Q9cmF5LmludGVyc2VjdFRyaWFuZ2xlKHBDLHBCLHBBLHRydWUscG9pbnQpO31lbHNle2ludGVyc2VjdD1yYXkuaW50ZXJzZWN0VHJpYW5nbGUocEEscEIscEMsbWF0ZXJpYWwuc2lkZSE9PURvdWJsZVNpZGUscG9pbnQpO31pZihpbnRlcnNlY3Q9PT1udWxsKXJldHVybiBudWxsO2ludGVyc2VjdGlvblBvaW50V29ybGQuY29weShwb2ludCk7aW50ZXJzZWN0aW9uUG9pbnRXb3JsZC5hcHBseU1hdHJpeDQob2JqZWN0Lm1hdHJpeFdvcmxkKTt2YXIgZGlzdGFuY2U9cmF5Y2FzdGVyLnJheS5vcmlnaW4uZGlzdGFuY2VUbyhpbnRlcnNlY3Rpb25Qb2ludFdvcmxkKTtpZihkaXN0YW5jZTxyYXljYXN0ZXIubmVhcnx8ZGlzdGFuY2U+cmF5Y2FzdGVyLmZhcilyZXR1cm4gbnVsbDtyZXR1cm57ZGlzdGFuY2U6ZGlzdGFuY2UscG9pbnQ6aW50ZXJzZWN0aW9uUG9pbnRXb3JsZC5jbG9uZSgpLG9iamVjdDpvYmplY3R9O31mdW5jdGlvbiBjaGVja0J1ZmZlckdlb21ldHJ5SW50ZXJzZWN0aW9uKG9iamVjdCxyYXljYXN0ZXIscmF5LHBvc2l0aW9uLHV2LGEsYixjKXt2QS5mcm9tQnVmZmVyQXR0cmlidXRlKHBvc2l0aW9uLGEpO3ZCLmZyb21CdWZmZXJBdHRyaWJ1dGUocG9zaXRpb24sYik7dkMuZnJvbUJ1ZmZlckF0dHJpYnV0ZShwb3NpdGlvbixjKTt2YXIgaW50ZXJzZWN0aW9uPWNoZWNrSW50ZXJzZWN0aW9uKG9iamVjdCxvYmplY3QubWF0ZXJpYWwscmF5Y2FzdGVyLHJheSx2QSx2Qix2QyxpbnRlcnNlY3Rpb25Qb2ludCk7aWYoaW50ZXJzZWN0aW9uKXtpZih1dil7dXZBLmZyb21CdWZmZXJBdHRyaWJ1dGUodXYsYSk7dXZCLmZyb21CdWZmZXJBdHRyaWJ1dGUodXYsYik7dXZDLmZyb21CdWZmZXJBdHRyaWJ1dGUodXYsYyk7aW50ZXJzZWN0aW9uLnV2PXV2SW50ZXJzZWN0aW9uKGludGVyc2VjdGlvblBvaW50LHZBLHZCLHZDLHV2QSx1dkIsdXZDKTt9aW50ZXJzZWN0aW9uLmZhY2U9bmV3IEZhY2UzKGEsYixjLFRyaWFuZ2xlLm5vcm1hbCh2QSx2Qix2QykpO2ludGVyc2VjdGlvbi5mYWNlSW5kZXg9YTt9cmV0dXJuIGludGVyc2VjdGlvbjt9cmV0dXJuIGZ1bmN0aW9uIHJheWNhc3QocmF5Y2FzdGVyLGludGVyc2VjdHMpe3ZhciBnZW9tZXRyeT10aGlzLmdlb21ldHJ5O3ZhciBtYXRlcmlhbD10aGlzLm1hdGVyaWFsO3ZhciBtYXRyaXhXb3JsZD10aGlzLm1hdHJpeFdvcmxkO2lmKG1hdGVyaWFsPT09dW5kZWZpbmVkKXJldHVybjsvLyBDaGVja2luZyBib3VuZGluZ1NwaGVyZSBkaXN0YW5jZSB0byByYXkKaWYoZ2VvbWV0cnkuYm91bmRpbmdTcGhlcmU9PT1udWxsKWdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpO3NwaGVyZS5jb3B5KGdlb21ldHJ5LmJvdW5kaW5nU3BoZXJlKTtzcGhlcmUuYXBwbHlNYXRyaXg0KG1hdHJpeFdvcmxkKTtpZihyYXljYXN0ZXIucmF5LmludGVyc2VjdHNTcGhlcmUoc3BoZXJlKT09PWZhbHNlKXJldHVybjsvLwppbnZlcnNlTWF0cml4LmdldEludmVyc2UobWF0cml4V29ybGQpO3JheS5jb3B5KHJheWNhc3Rlci5yYXkpLmFwcGx5TWF0cml4NChpbnZlcnNlTWF0cml4KTsvLyBDaGVjayBib3VuZGluZ0JveCBiZWZvcmUgY29udGludWluZwppZihnZW9tZXRyeS5ib3VuZGluZ0JveCE9PW51bGwpe2lmKHJheS5pbnRlcnNlY3RzQm94KGdlb21ldHJ5LmJvdW5kaW5nQm94KT09PWZhbHNlKXJldHVybjt9dmFyIGludGVyc2VjdGlvbjtpZihnZW9tZXRyeS5pc0J1ZmZlckdlb21ldHJ5KXt2YXIgYSxiLGM7dmFyIGluZGV4PWdlb21ldHJ5LmluZGV4O3ZhciBwb3NpdGlvbj1nZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uO3ZhciB1dj1nZW9tZXRyeS5hdHRyaWJ1dGVzLnV2O3ZhciBpLGw7aWYoaW5kZXghPT1udWxsKXsvLyBpbmRleGVkIGJ1ZmZlciBnZW9tZXRyeQpmb3IoaT0wLGw9aW5kZXguY291bnQ7aTxsO2krPTMpe2E9aW5kZXguZ2V0WChpKTtiPWluZGV4LmdldFgoaSsxKTtjPWluZGV4LmdldFgoaSsyKTtpbnRlcnNlY3Rpb249Y2hlY2tCdWZmZXJHZW9tZXRyeUludGVyc2VjdGlvbih0aGlzLHJheWNhc3RlcixyYXkscG9zaXRpb24sdXYsYSxiLGMpO2lmKGludGVyc2VjdGlvbil7aW50ZXJzZWN0aW9uLmZhY2VJbmRleD1NYXRoLmZsb29yKGkvMyk7Ly8gdHJpYW5nbGUgbnVtYmVyIGluIGluZGljZXMgYnVmZmVyIHNlbWFudGljcwppbnRlcnNlY3RzLnB1c2goaW50ZXJzZWN0aW9uKTt9fX1lbHNlIGlmKHBvc2l0aW9uIT09dW5kZWZpbmVkKXsvLyBub24taW5kZXhlZCBidWZmZXIgZ2VvbWV0cnkKZm9yKGk9MCxsPXBvc2l0aW9uLmNvdW50O2k8bDtpKz0zKXthPWk7Yj1pKzE7Yz1pKzI7aW50ZXJzZWN0aW9uPWNoZWNrQnVmZmVyR2VvbWV0cnlJbnRlcnNlY3Rpb24odGhpcyxyYXljYXN0ZXIscmF5LHBvc2l0aW9uLHV2LGEsYixjKTtpZihpbnRlcnNlY3Rpb24pe2ludGVyc2VjdGlvbi5pbmRleD1hOy8vIHRyaWFuZ2xlIG51bWJlciBpbiBwb3NpdGlvbnMgYnVmZmVyIHNlbWFudGljcwppbnRlcnNlY3RzLnB1c2goaW50ZXJzZWN0aW9uKTt9fX19ZWxzZSBpZihnZW9tZXRyeS5pc0dlb21ldHJ5KXt2YXIgZnZBLGZ2QixmdkM7dmFyIGlzTXVsdGlNYXRlcmlhbD1BcnJheS5pc0FycmF5KG1hdGVyaWFsKTt2YXIgdmVydGljZXM9Z2VvbWV0cnkudmVydGljZXM7dmFyIGZhY2VzPWdlb21ldHJ5LmZhY2VzO3ZhciB1dnM7dmFyIGZhY2VWZXJ0ZXhVdnM9Z2VvbWV0cnkuZmFjZVZlcnRleFV2c1swXTtpZihmYWNlVmVydGV4VXZzLmxlbmd0aD4wKXV2cz1mYWNlVmVydGV4VXZzO2Zvcih2YXIgZj0wLGZsPWZhY2VzLmxlbmd0aDtmPGZsO2YrKyl7dmFyIGZhY2U9ZmFjZXNbZl07dmFyIGZhY2VNYXRlcmlhbD1pc011bHRpTWF0ZXJpYWw/bWF0ZXJpYWxbZmFjZS5tYXRlcmlhbEluZGV4XTptYXRlcmlhbDtpZihmYWNlTWF0ZXJpYWw9PT11bmRlZmluZWQpY29udGludWU7ZnZBPXZlcnRpY2VzW2ZhY2UuYV07ZnZCPXZlcnRpY2VzW2ZhY2UuYl07ZnZDPXZlcnRpY2VzW2ZhY2UuY107aWYoZmFjZU1hdGVyaWFsLm1vcnBoVGFyZ2V0cz09PXRydWUpe3ZhciBtb3JwaFRhcmdldHM9Z2VvbWV0cnkubW9ycGhUYXJnZXRzO3ZhciBtb3JwaEluZmx1ZW5jZXM9dGhpcy5tb3JwaFRhcmdldEluZmx1ZW5jZXM7dkEuc2V0KDAsMCwwKTt2Qi5zZXQoMCwwLDApO3ZDLnNldCgwLDAsMCk7Zm9yKHZhciB0PTAsdGw9bW9ycGhUYXJnZXRzLmxlbmd0aDt0PHRsO3QrKyl7dmFyIGluZmx1ZW5jZT1tb3JwaEluZmx1ZW5jZXNbdF07aWYoaW5mbHVlbmNlPT09MCljb250aW51ZTt2YXIgdGFyZ2V0cz1tb3JwaFRhcmdldHNbdF0udmVydGljZXM7dkEuYWRkU2NhbGVkVmVjdG9yKHRlbXBBLnN1YlZlY3RvcnModGFyZ2V0c1tmYWNlLmFdLGZ2QSksaW5mbHVlbmNlKTt2Qi5hZGRTY2FsZWRWZWN0b3IodGVtcEIuc3ViVmVjdG9ycyh0YXJnZXRzW2ZhY2UuYl0sZnZCKSxpbmZsdWVuY2UpO3ZDLmFkZFNjYWxlZFZlY3Rvcih0ZW1wQy5zdWJWZWN0b3JzKHRhcmdldHNbZmFjZS5jXSxmdkMpLGluZmx1ZW5jZSk7fXZBLmFkZChmdkEpO3ZCLmFkZChmdkIpO3ZDLmFkZChmdkMpO2Z2QT12QTtmdkI9dkI7ZnZDPXZDO31pbnRlcnNlY3Rpb249Y2hlY2tJbnRlcnNlY3Rpb24odGhpcyxmYWNlTWF0ZXJpYWwscmF5Y2FzdGVyLHJheSxmdkEsZnZCLGZ2QyxpbnRlcnNlY3Rpb25Qb2ludCk7aWYoaW50ZXJzZWN0aW9uKXtpZih1dnMmJnV2c1tmXSl7dmFyIHV2c19mPXV2c1tmXTt1dkEuY29weSh1dnNfZlswXSk7dXZCLmNvcHkodXZzX2ZbMV0pO3V2Qy5jb3B5KHV2c19mWzJdKTtpbnRlcnNlY3Rpb24udXY9dXZJbnRlcnNlY3Rpb24oaW50ZXJzZWN0aW9uUG9pbnQsZnZBLGZ2QixmdkMsdXZBLHV2Qix1dkMpO31pbnRlcnNlY3Rpb24uZmFjZT1mYWNlO2ludGVyc2VjdGlvbi5mYWNlSW5kZXg9ZjtpbnRlcnNlY3RzLnB1c2goaW50ZXJzZWN0aW9uKTt9fX19O30oKSxjbG9uZTpmdW5jdGlvbiBjbG9uZSgpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLmdlb21ldHJ5LHRoaXMubWF0ZXJpYWwpLmNvcHkodGhpcyk7fX0pOy8qKgogKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tLwogKi9mdW5jdGlvbiBXZWJHTEJhY2tncm91bmQocmVuZGVyZXIsc3RhdGUsZ2VvbWV0cmllcyxwcmVtdWx0aXBsaWVkQWxwaGEpe3ZhciBjbGVhckNvbG9yPW5ldyBDb2xvcigweDAwMDAwMCk7dmFyIGNsZWFyQWxwaGE9MDt2YXIgcGxhbmVDYW1lcmEscGxhbmVNZXNoO3ZhciBib3hNZXNoO2Z1bmN0aW9uIHJlbmRlcihyZW5kZXJMaXN0LHNjZW5lLGNhbWVyYSxmb3JjZUNsZWFyKXt2YXIgYmFja2dyb3VuZD1zY2VuZS5iYWNrZ3JvdW5kO2lmKGJhY2tncm91bmQ9PT1udWxsKXtzZXRDbGVhcihjbGVhckNvbG9yLGNsZWFyQWxwaGEpO31lbHNlIGlmKGJhY2tncm91bmQmJmJhY2tncm91bmQuaXNDb2xvcil7c2V0Q2xlYXIoYmFja2dyb3VuZCwxKTtmb3JjZUNsZWFyPXRydWU7fWlmKHJlbmRlcmVyLmF1dG9DbGVhcnx8Zm9yY2VDbGVhcil7cmVuZGVyZXIuY2xlYXIocmVuZGVyZXIuYXV0b0NsZWFyQ29sb3IscmVuZGVyZXIuYXV0b0NsZWFyRGVwdGgscmVuZGVyZXIuYXV0b0NsZWFyU3RlbmNpbCk7fWlmKGJhY2tncm91bmQmJmJhY2tncm91bmQuaXNDdWJlVGV4dHVyZSl7aWYoYm94TWVzaD09PXVuZGVmaW5lZCl7Ym94TWVzaD1uZXcgTWVzaChuZXcgQm94QnVmZmVyR2VvbWV0cnkoMSwxLDEpLG5ldyBTaGFkZXJNYXRlcmlhbCh7dW5pZm9ybXM6U2hhZGVyTGliLmN1YmUudW5pZm9ybXMsdmVydGV4U2hhZGVyOlNoYWRlckxpYi5jdWJlLnZlcnRleFNoYWRlcixmcmFnbWVudFNoYWRlcjpTaGFkZXJMaWIuY3ViZS5mcmFnbWVudFNoYWRlcixzaWRlOkJhY2tTaWRlLGRlcHRoVGVzdDp0cnVlLGRlcHRoV3JpdGU6ZmFsc2UsZm9nOmZhbHNlfSkpO2JveE1lc2guZ2VvbWV0cnkucmVtb3ZlQXR0cmlidXRlKCdub3JtYWwnKTtib3hNZXNoLmdlb21ldHJ5LnJlbW92ZUF0dHJpYnV0ZSgndXYnKTtib3hNZXNoLm9uQmVmb3JlUmVuZGVyPWZ1bmN0aW9uKHJlbmRlcmVyLHNjZW5lLGNhbWVyYSl7dGhpcy5tYXRyaXhXb3JsZC5jb3B5UG9zaXRpb24oY2FtZXJhLm1hdHJpeFdvcmxkKTt9O2dlb21ldHJpZXMudXBkYXRlKGJveE1lc2guZ2VvbWV0cnkpO31ib3hNZXNoLm1hdGVyaWFsLnVuaWZvcm1zLnRDdWJlLnZhbHVlPWJhY2tncm91bmQ7cmVuZGVyTGlzdC5wdXNoKGJveE1lc2gsYm94TWVzaC5nZW9tZXRyeSxib3hNZXNoLm1hdGVyaWFsLDAsbnVsbCk7fWVsc2UgaWYoYmFja2dyb3VuZCYmYmFja2dyb3VuZC5pc1RleHR1cmUpe2lmKHBsYW5lQ2FtZXJhPT09dW5kZWZpbmVkKXtwbGFuZUNhbWVyYT1uZXcgT3J0aG9ncmFwaGljQ2FtZXJhKC0xLDEsMSwtMSwwLDEpO3BsYW5lTWVzaD1uZXcgTWVzaChuZXcgUGxhbmVCdWZmZXJHZW9tZXRyeSgyLDIpLG5ldyBNZXNoQmFzaWNNYXRlcmlhbCh7ZGVwdGhUZXN0OmZhbHNlLGRlcHRoV3JpdGU6ZmFsc2UsZm9nOmZhbHNlfSkpO2dlb21ldHJpZXMudXBkYXRlKHBsYW5lTWVzaC5nZW9tZXRyeSk7fXBsYW5lTWVzaC5tYXRlcmlhbC5tYXA9YmFja2dyb3VuZDsvLyBUT0RPIFB1c2ggdGhpcyB0byByZW5kZXJMaXN0CnJlbmRlcmVyLnJlbmRlckJ1ZmZlckRpcmVjdChwbGFuZUNhbWVyYSxudWxsLHBsYW5lTWVzaC5nZW9tZXRyeSxwbGFuZU1lc2gubWF0ZXJpYWwscGxhbmVNZXNoLG51bGwpO319ZnVuY3Rpb24gc2V0Q2xlYXIoY29sb3IsYWxwaGEpe3N0YXRlLmJ1ZmZlcnMuY29sb3Iuc2V0Q2xlYXIoY29sb3Iucixjb2xvci5nLGNvbG9yLmIsYWxwaGEscHJlbXVsdGlwbGllZEFscGhhKTt9cmV0dXJue2dldENsZWFyQ29sb3I6ZnVuY3Rpb24gZ2V0Q2xlYXJDb2xvcigpe3JldHVybiBjbGVhckNvbG9yO30sc2V0Q2xlYXJDb2xvcjpmdW5jdGlvbiBzZXRDbGVhckNvbG9yKGNvbG9yLGFscGhhKXtjbGVhckNvbG9yLnNldChjb2xvcik7Y2xlYXJBbHBoYT1hbHBoYSE9PXVuZGVmaW5lZD9hbHBoYToxO3NldENsZWFyKGNsZWFyQ29sb3IsY2xlYXJBbHBoYSk7fSxnZXRDbGVhckFscGhhOmZ1bmN0aW9uIGdldENsZWFyQWxwaGEoKXtyZXR1cm4gY2xlYXJBbHBoYTt9LHNldENsZWFyQWxwaGE6ZnVuY3Rpb24gc2V0Q2xlYXJBbHBoYShhbHBoYSl7Y2xlYXJBbHBoYT1hbHBoYTtzZXRDbGVhcihjbGVhckNvbG9yLGNsZWFyQWxwaGEpO30scmVuZGVyOnJlbmRlcn07fS8qKgogKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tLwogKi9mdW5jdGlvbiBwYWludGVyU29ydFN0YWJsZShhLGIpe2lmKGEucmVuZGVyT3JkZXIhPT1iLnJlbmRlck9yZGVyKXtyZXR1cm4gYS5yZW5kZXJPcmRlci1iLnJlbmRlck9yZGVyO31lbHNlIGlmKGEucHJvZ3JhbSYmYi5wcm9ncmFtJiZhLnByb2dyYW0hPT1iLnByb2dyYW0pe3JldHVybiBhLnByb2dyYW0uaWQtYi5wcm9ncmFtLmlkO31lbHNlIGlmKGEubWF0ZXJpYWwuaWQhPT1iLm1hdGVyaWFsLmlkKXtyZXR1cm4gYS5tYXRlcmlhbC5pZC1iLm1hdGVyaWFsLmlkO31lbHNlIGlmKGEueiE9PWIueil7cmV0dXJuIGEuei1iLno7fWVsc2V7cmV0dXJuIGEuaWQtYi5pZDt9fWZ1bmN0aW9uIHJldmVyc2VQYWludGVyU29ydFN0YWJsZShhLGIpe2lmKGEucmVuZGVyT3JkZXIhPT1iLnJlbmRlck9yZGVyKXtyZXR1cm4gYS5yZW5kZXJPcmRlci1iLnJlbmRlck9yZGVyO31pZihhLnohPT1iLnope3JldHVybiBiLnotYS56O31lbHNle3JldHVybiBhLmlkLWIuaWQ7fX1mdW5jdGlvbiBXZWJHTFJlbmRlckxpc3QoKXt2YXIgcmVuZGVySXRlbXM9W107dmFyIHJlbmRlckl0ZW1zSW5kZXg9MDt2YXIgb3BhcXVlPVtdO3ZhciB0cmFuc3BhcmVudD1bXTtmdW5jdGlvbiBpbml0KCl7cmVuZGVySXRlbXNJbmRleD0wO29wYXF1ZS5sZW5ndGg9MDt0cmFuc3BhcmVudC5sZW5ndGg9MDt9ZnVuY3Rpb24gcHVzaChvYmplY3QsZ2VvbWV0cnksbWF0ZXJpYWwseixncm91cCl7dmFyIHJlbmRlckl0ZW09cmVuZGVySXRlbXNbcmVuZGVySXRlbXNJbmRleF07aWYocmVuZGVySXRlbT09PXVuZGVmaW5lZCl7cmVuZGVySXRlbT17aWQ6b2JqZWN0LmlkLG9iamVjdDpvYmplY3QsZ2VvbWV0cnk6Z2VvbWV0cnksbWF0ZXJpYWw6bWF0ZXJpYWwscHJvZ3JhbTptYXRlcmlhbC5wcm9ncmFtLHJlbmRlck9yZGVyOm9iamVjdC5yZW5kZXJPcmRlcix6OnosZ3JvdXA6Z3JvdXB9O3JlbmRlckl0ZW1zW3JlbmRlckl0ZW1zSW5kZXhdPXJlbmRlckl0ZW07fWVsc2V7cmVuZGVySXRlbS5pZD1vYmplY3QuaWQ7cmVuZGVySXRlbS5vYmplY3Q9b2JqZWN0O3JlbmRlckl0ZW0uZ2VvbWV0cnk9Z2VvbWV0cnk7cmVuZGVySXRlbS5tYXRlcmlhbD1tYXRlcmlhbDtyZW5kZXJJdGVtLnByb2dyYW09bWF0ZXJpYWwucHJvZ3JhbTtyZW5kZXJJdGVtLnJlbmRlck9yZGVyPW9iamVjdC5yZW5kZXJPcmRlcjtyZW5kZXJJdGVtLno9ejtyZW5kZXJJdGVtLmdyb3VwPWdyb3VwO30obWF0ZXJpYWwudHJhbnNwYXJlbnQ9PT10cnVlP3RyYW5zcGFyZW50Om9wYXF1ZSkucHVzaChyZW5kZXJJdGVtKTtyZW5kZXJJdGVtc0luZGV4Kys7fWZ1bmN0aW9uIHNvcnQoKXtpZihvcGFxdWUubGVuZ3RoPjEpb3BhcXVlLnNvcnQocGFpbnRlclNvcnRTdGFibGUpO2lmKHRyYW5zcGFyZW50Lmxlbmd0aD4xKXRyYW5zcGFyZW50LnNvcnQocmV2ZXJzZVBhaW50ZXJTb3J0U3RhYmxlKTt9cmV0dXJue29wYXF1ZTpvcGFxdWUsdHJhbnNwYXJlbnQ6dHJhbnNwYXJlbnQsaW5pdDppbml0LHB1c2g6cHVzaCxzb3J0OnNvcnR9O31mdW5jdGlvbiBXZWJHTFJlbmRlckxpc3RzKCl7dmFyIGxpc3RzPXt9O2Z1bmN0aW9uIGdldChzY2VuZSxjYW1lcmEpe3ZhciBoYXNoPXNjZW5lLmlkKycsJytjYW1lcmEuaWQ7dmFyIGxpc3Q9bGlzdHNbaGFzaF07aWYobGlzdD09PXVuZGVmaW5lZCl7Ly8gY29uc29sZS5sb2coICdUSFJFRS5XZWJHTFJlbmRlckxpc3RzOicsIGhhc2ggKTsKbGlzdD1uZXcgV2ViR0xSZW5kZXJMaXN0KCk7bGlzdHNbaGFzaF09bGlzdDt9cmV0dXJuIGxpc3Q7fWZ1bmN0aW9uIGRpc3Bvc2UoKXtsaXN0cz17fTt9cmV0dXJue2dldDpnZXQsZGlzcG9zZTpkaXNwb3NlfTt9LyoqCiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vCiAqL2Z1bmN0aW9uIGFic051bWVyaWNhbFNvcnQoYSxiKXtyZXR1cm4gTWF0aC5hYnMoYlsxXSktTWF0aC5hYnMoYVsxXSk7fWZ1bmN0aW9uIFdlYkdMTW9ycGh0YXJnZXRzKGdsKXt2YXIgaW5mbHVlbmNlc0xpc3Q9e307dmFyIG1vcnBoSW5mbHVlbmNlcz1uZXcgRmxvYXQzMkFycmF5KDgpO2Z1bmN0aW9uIHVwZGF0ZShvYmplY3QsZ2VvbWV0cnksbWF0ZXJpYWwscHJvZ3JhbSl7dmFyIG9iamVjdEluZmx1ZW5jZXM9b2JqZWN0Lm1vcnBoVGFyZ2V0SW5mbHVlbmNlczt2YXIgbGVuZ3RoPW9iamVjdEluZmx1ZW5jZXMubGVuZ3RoO3ZhciBpbmZsdWVuY2VzPWluZmx1ZW5jZXNMaXN0W2dlb21ldHJ5LmlkXTtpZihpbmZsdWVuY2VzPT09dW5kZWZpbmVkKXsvLyBpbml0aWFsaXNlIGxpc3QKaW5mbHVlbmNlcz1bXTtmb3IodmFyIGk9MDtpPGxlbmd0aDtpKyspe2luZmx1ZW5jZXNbaV09W2ksMF07fWluZmx1ZW5jZXNMaXN0W2dlb21ldHJ5LmlkXT1pbmZsdWVuY2VzO312YXIgbW9ycGhUYXJnZXRzPW1hdGVyaWFsLm1vcnBoVGFyZ2V0cyYmZ2VvbWV0cnkubW9ycGhBdHRyaWJ1dGVzLnBvc2l0aW9uO3ZhciBtb3JwaE5vcm1hbHM9bWF0ZXJpYWwubW9ycGhOb3JtYWxzJiZnZW9tZXRyeS5tb3JwaEF0dHJpYnV0ZXMubm9ybWFsOy8vIFJlbW92ZSBjdXJyZW50IG1vcnBoQXR0cmlidXRlcwpmb3IodmFyIGk9MDtpPGxlbmd0aDtpKyspe3ZhciBpbmZsdWVuY2U9aW5mbHVlbmNlc1tpXTtpZihpbmZsdWVuY2VbMV0hPT0wKXtpZihtb3JwaFRhcmdldHMpZ2VvbWV0cnkucmVtb3ZlQXR0cmlidXRlKCdtb3JwaFRhcmdldCcraSk7aWYobW9ycGhOb3JtYWxzKWdlb21ldHJ5LnJlbW92ZUF0dHJpYnV0ZSgnbW9ycGhOb3JtYWwnK2kpO319Ly8gQ29sbGVjdCBpbmZsdWVuY2VzCmZvcih2YXIgaT0wO2k8bGVuZ3RoO2krKyl7dmFyIGluZmx1ZW5jZT1pbmZsdWVuY2VzW2ldO2luZmx1ZW5jZVswXT1pO2luZmx1ZW5jZVsxXT1vYmplY3RJbmZsdWVuY2VzW2ldO31pbmZsdWVuY2VzLnNvcnQoYWJzTnVtZXJpY2FsU29ydCk7Ly8gQWRkIG1vcnBoQXR0cmlidXRlcwpmb3IodmFyIGk9MDtpPDg7aSsrKXt2YXIgaW5mbHVlbmNlPWluZmx1ZW5jZXNbaV07aWYoaW5mbHVlbmNlKXt2YXIgaW5kZXg9aW5mbHVlbmNlWzBdO3ZhciB2YWx1ZT1pbmZsdWVuY2VbMV07aWYodmFsdWUpe2lmKG1vcnBoVGFyZ2V0cylnZW9tZXRyeS5hZGRBdHRyaWJ1dGUoJ21vcnBoVGFyZ2V0JytpLG1vcnBoVGFyZ2V0c1tpbmRleF0pO2lmKG1vcnBoTm9ybWFscylnZW9tZXRyeS5hZGRBdHRyaWJ1dGUoJ21vcnBoTm9ybWFsJytpLG1vcnBoTm9ybWFsc1tpbmRleF0pO21vcnBoSW5mbHVlbmNlc1tpXT12YWx1ZTtjb250aW51ZTt9fW1vcnBoSW5mbHVlbmNlc1tpXT0wO31wcm9ncmFtLmdldFVuaWZvcm1zKCkuc2V0VmFsdWUoZ2wsJ21vcnBoVGFyZ2V0SW5mbHVlbmNlcycsbW9ycGhJbmZsdWVuY2VzKTt9cmV0dXJue3VwZGF0ZTp1cGRhdGV9O30vKioKICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS8KICovZnVuY3Rpb24gV2ViR0xJbmRleGVkQnVmZmVyUmVuZGVyZXIoZ2wsZXh0ZW5zaW9ucyxpbmZvUmVuZGVyKXt2YXIgbW9kZTtmdW5jdGlvbiBzZXRNb2RlKHZhbHVlKXttb2RlPXZhbHVlO312YXIgdHlwZSxieXRlc1BlckVsZW1lbnQ7ZnVuY3Rpb24gc2V0SW5kZXgodmFsdWUpe3R5cGU9dmFsdWUudHlwZTtieXRlc1BlckVsZW1lbnQ9dmFsdWUuYnl0ZXNQZXJFbGVtZW50O31mdW5jdGlvbiByZW5kZXIoc3RhcnQsY291bnQpe2dsLmRyYXdFbGVtZW50cyhtb2RlLGNvdW50LHR5cGUsc3RhcnQqYnl0ZXNQZXJFbGVtZW50KTtpbmZvUmVuZGVyLmNhbGxzKys7aW5mb1JlbmRlci52ZXJ0aWNlcys9Y291bnQ7aWYobW9kZT09PWdsLlRSSUFOR0xFUylpbmZvUmVuZGVyLmZhY2VzKz1jb3VudC8zO2Vsc2UgaWYobW9kZT09PWdsLlBPSU5UUylpbmZvUmVuZGVyLnBvaW50cys9Y291bnQ7fWZ1bmN0aW9uIHJlbmRlckluc3RhbmNlcyhnZW9tZXRyeSxzdGFydCxjb3VudCl7dmFyIGV4dGVuc2lvbj1leHRlbnNpb25zLmdldCgnQU5HTEVfaW5zdGFuY2VkX2FycmF5cycpO2lmKGV4dGVuc2lvbj09PW51bGwpe2NvbnNvbGUuZXJyb3IoJ1RIUkVFLldlYkdMSW5kZXhlZEJ1ZmZlclJlbmRlcmVyOiB1c2luZyBUSFJFRS5JbnN0YW5jZWRCdWZmZXJHZW9tZXRyeSBidXQgaGFyZHdhcmUgZG9lcyBub3Qgc3VwcG9ydCBleHRlbnNpb24gQU5HTEVfaW5zdGFuY2VkX2FycmF5cy4nKTtyZXR1cm47fWV4dGVuc2lvbi5kcmF3RWxlbWVudHNJbnN0YW5jZWRBTkdMRShtb2RlLGNvdW50LHR5cGUsc3RhcnQqYnl0ZXNQZXJFbGVtZW50LGdlb21ldHJ5Lm1heEluc3RhbmNlZENvdW50KTtpbmZvUmVuZGVyLmNhbGxzKys7aW5mb1JlbmRlci52ZXJ0aWNlcys9Y291bnQqZ2VvbWV0cnkubWF4SW5zdGFuY2VkQ291bnQ7aWYobW9kZT09PWdsLlRSSUFOR0xFUylpbmZvUmVuZGVyLmZhY2VzKz1nZW9tZXRyeS5tYXhJbnN0YW5jZWRDb3VudCpjb3VudC8zO2Vsc2UgaWYobW9kZT09PWdsLlBPSU5UUylpbmZvUmVuZGVyLnBvaW50cys9Z2VvbWV0cnkubWF4SW5zdGFuY2VkQ291bnQqY291bnQ7fS8vCnRoaXMuc2V0TW9kZT1zZXRNb2RlO3RoaXMuc2V0SW5kZXg9c2V0SW5kZXg7dGhpcy5yZW5kZXI9cmVuZGVyO3RoaXMucmVuZGVySW5zdGFuY2VzPXJlbmRlckluc3RhbmNlczt9LyoqCiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vCiAqL2Z1bmN0aW9uIFdlYkdMQnVmZmVyUmVuZGVyZXIoZ2wsZXh0ZW5zaW9ucyxpbmZvUmVuZGVyKXt2YXIgbW9kZTtmdW5jdGlvbiBzZXRNb2RlKHZhbHVlKXttb2RlPXZhbHVlO31mdW5jdGlvbiByZW5kZXIoc3RhcnQsY291bnQpe2dsLmRyYXdBcnJheXMobW9kZSxzdGFydCxjb3VudCk7aW5mb1JlbmRlci5jYWxscysrO2luZm9SZW5kZXIudmVydGljZXMrPWNvdW50O2lmKG1vZGU9PT1nbC5UUklBTkdMRVMpaW5mb1JlbmRlci5mYWNlcys9Y291bnQvMztlbHNlIGlmKG1vZGU9PT1nbC5QT0lOVFMpaW5mb1JlbmRlci5wb2ludHMrPWNvdW50O31mdW5jdGlvbiByZW5kZXJJbnN0YW5jZXMoZ2VvbWV0cnksc3RhcnQsY291bnQpe3ZhciBleHRlbnNpb249ZXh0ZW5zaW9ucy5nZXQoJ0FOR0xFX2luc3RhbmNlZF9hcnJheXMnKTtpZihleHRlbnNpb249PT1udWxsKXtjb25zb2xlLmVycm9yKCdUSFJFRS5XZWJHTEJ1ZmZlclJlbmRlcmVyOiB1c2luZyBUSFJFRS5JbnN0YW5jZWRCdWZmZXJHZW9tZXRyeSBidXQgaGFyZHdhcmUgZG9lcyBub3Qgc3VwcG9ydCBleHRlbnNpb24gQU5HTEVfaW5zdGFuY2VkX2FycmF5cy4nKTtyZXR1cm47fXZhciBwb3NpdGlvbj1nZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uO2lmKHBvc2l0aW9uLmlzSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGUpe2NvdW50PXBvc2l0aW9uLmRhdGEuY291bnQ7ZXh0ZW5zaW9uLmRyYXdBcnJheXNJbnN0YW5jZWRBTkdMRShtb2RlLDAsY291bnQsZ2VvbWV0cnkubWF4SW5zdGFuY2VkQ291bnQpO31lbHNle2V4dGVuc2lvbi5kcmF3QXJyYXlzSW5zdGFuY2VkQU5HTEUobW9kZSxzdGFydCxjb3VudCxnZW9tZXRyeS5tYXhJbnN0YW5jZWRDb3VudCk7fWluZm9SZW5kZXIuY2FsbHMrKztpbmZvUmVuZGVyLnZlcnRpY2VzKz1jb3VudCpnZW9tZXRyeS5tYXhJbnN0YW5jZWRDb3VudDtpZihtb2RlPT09Z2wuVFJJQU5HTEVTKWluZm9SZW5kZXIuZmFjZXMrPWdlb21ldHJ5Lm1heEluc3RhbmNlZENvdW50KmNvdW50LzM7ZWxzZSBpZihtb2RlPT09Z2wuUE9JTlRTKWluZm9SZW5kZXIucG9pbnRzKz1nZW9tZXRyeS5tYXhJbnN0YW5jZWRDb3VudCpjb3VudDt9Ly8KdGhpcy5zZXRNb2RlPXNldE1vZGU7dGhpcy5yZW5kZXI9cmVuZGVyO3RoaXMucmVuZGVySW5zdGFuY2VzPXJlbmRlckluc3RhbmNlczt9LyoqCiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vCiAqL2Z1bmN0aW9uIFdlYkdMR2VvbWV0cmllcyhnbCxhdHRyaWJ1dGVzLGluZm9NZW1vcnkpe3ZhciBnZW9tZXRyaWVzPXt9O3ZhciB3aXJlZnJhbWVBdHRyaWJ1dGVzPXt9O2Z1bmN0aW9uIG9uR2VvbWV0cnlEaXNwb3NlKGV2ZW50KXt2YXIgZ2VvbWV0cnk9ZXZlbnQudGFyZ2V0O3ZhciBidWZmZXJnZW9tZXRyeT1nZW9tZXRyaWVzW2dlb21ldHJ5LmlkXTtpZihidWZmZXJnZW9tZXRyeS5pbmRleCE9PW51bGwpe2F0dHJpYnV0ZXMucmVtb3ZlKGJ1ZmZlcmdlb21ldHJ5LmluZGV4KTt9Zm9yKHZhciBuYW1lIGluIGJ1ZmZlcmdlb21ldHJ5LmF0dHJpYnV0ZXMpe2F0dHJpYnV0ZXMucmVtb3ZlKGJ1ZmZlcmdlb21ldHJ5LmF0dHJpYnV0ZXNbbmFtZV0pO31nZW9tZXRyeS5yZW1vdmVFdmVudExpc3RlbmVyKCdkaXNwb3NlJyxvbkdlb21ldHJ5RGlzcG9zZSk7ZGVsZXRlIGdlb21ldHJpZXNbZ2VvbWV0cnkuaWRdOy8vIFRPRE8gUmVtb3ZlIGR1cGxpY2F0ZSBjb2RlCnZhciBhdHRyaWJ1dGU9d2lyZWZyYW1lQXR0cmlidXRlc1tnZW9tZXRyeS5pZF07aWYoYXR0cmlidXRlKXthdHRyaWJ1dGVzLnJlbW92ZShhdHRyaWJ1dGUpO2RlbGV0ZSB3aXJlZnJhbWVBdHRyaWJ1dGVzW2dlb21ldHJ5LmlkXTt9YXR0cmlidXRlPXdpcmVmcmFtZUF0dHJpYnV0ZXNbYnVmZmVyZ2VvbWV0cnkuaWRdO2lmKGF0dHJpYnV0ZSl7YXR0cmlidXRlcy5yZW1vdmUoYXR0cmlidXRlKTtkZWxldGUgd2lyZWZyYW1lQXR0cmlidXRlc1tidWZmZXJnZW9tZXRyeS5pZF07fS8vCmluZm9NZW1vcnkuZ2VvbWV0cmllcy0tO31mdW5jdGlvbiBnZXQob2JqZWN0LGdlb21ldHJ5KXt2YXIgYnVmZmVyZ2VvbWV0cnk9Z2VvbWV0cmllc1tnZW9tZXRyeS5pZF07aWYoYnVmZmVyZ2VvbWV0cnkpcmV0dXJuIGJ1ZmZlcmdlb21ldHJ5O2dlb21ldHJ5LmFkZEV2ZW50TGlzdGVuZXIoJ2Rpc3Bvc2UnLG9uR2VvbWV0cnlEaXNwb3NlKTtpZihnZW9tZXRyeS5pc0J1ZmZlckdlb21ldHJ5KXtidWZmZXJnZW9tZXRyeT1nZW9tZXRyeTt9ZWxzZSBpZihnZW9tZXRyeS5pc0dlb21ldHJ5KXtpZihnZW9tZXRyeS5fYnVmZmVyR2VvbWV0cnk9PT11bmRlZmluZWQpe2dlb21ldHJ5Ll9idWZmZXJHZW9tZXRyeT1uZXcgQnVmZmVyR2VvbWV0cnkoKS5zZXRGcm9tT2JqZWN0KG9iamVjdCk7fWJ1ZmZlcmdlb21ldHJ5PWdlb21ldHJ5Ll9idWZmZXJHZW9tZXRyeTt9Z2VvbWV0cmllc1tnZW9tZXRyeS5pZF09YnVmZmVyZ2VvbWV0cnk7aW5mb01lbW9yeS5nZW9tZXRyaWVzKys7cmV0dXJuIGJ1ZmZlcmdlb21ldHJ5O31mdW5jdGlvbiB1cGRhdGUoZ2VvbWV0cnkpe3ZhciBpbmRleD1nZW9tZXRyeS5pbmRleDt2YXIgZ2VvbWV0cnlBdHRyaWJ1dGVzPWdlb21ldHJ5LmF0dHJpYnV0ZXM7aWYoaW5kZXghPT1udWxsKXthdHRyaWJ1dGVzLnVwZGF0ZShpbmRleCxnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUik7fWZvcih2YXIgbmFtZSBpbiBnZW9tZXRyeUF0dHJpYnV0ZXMpe2F0dHJpYnV0ZXMudXBkYXRlKGdlb21ldHJ5QXR0cmlidXRlc1tuYW1lXSxnbC5BUlJBWV9CVUZGRVIpO30vLyBtb3JwaCB0YXJnZXRzCnZhciBtb3JwaEF0dHJpYnV0ZXM9Z2VvbWV0cnkubW9ycGhBdHRyaWJ1dGVzO2Zvcih2YXIgbmFtZSBpbiBtb3JwaEF0dHJpYnV0ZXMpe3ZhciBhcnJheT1tb3JwaEF0dHJpYnV0ZXNbbmFtZV07Zm9yKHZhciBpPTAsbD1hcnJheS5sZW5ndGg7aTxsO2krKyl7YXR0cmlidXRlcy51cGRhdGUoYXJyYXlbaV0sZ2wuQVJSQVlfQlVGRkVSKTt9fX1mdW5jdGlvbiBnZXRXaXJlZnJhbWVBdHRyaWJ1dGUoZ2VvbWV0cnkpe3ZhciBhdHRyaWJ1dGU9d2lyZWZyYW1lQXR0cmlidXRlc1tnZW9tZXRyeS5pZF07aWYoYXR0cmlidXRlKXJldHVybiBhdHRyaWJ1dGU7dmFyIGluZGljZXM9W107dmFyIGdlb21ldHJ5SW5kZXg9Z2VvbWV0cnkuaW5kZXg7dmFyIGdlb21ldHJ5QXR0cmlidXRlcz1nZW9tZXRyeS5hdHRyaWJ1dGVzOy8vIGNvbnNvbGUudGltZSggJ3dpcmVmcmFtZScgKTsKaWYoZ2VvbWV0cnlJbmRleCE9PW51bGwpe3ZhciBhcnJheT1nZW9tZXRyeUluZGV4LmFycmF5O2Zvcih2YXIgaT0wLGw9YXJyYXkubGVuZ3RoO2k8bDtpKz0zKXt2YXIgYT1hcnJheVtpKzBdO3ZhciBiPWFycmF5W2krMV07dmFyIGM9YXJyYXlbaSsyXTtpbmRpY2VzLnB1c2goYSxiLGIsYyxjLGEpO319ZWxzZXt2YXIgYXJyYXk9Z2VvbWV0cnlBdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5O2Zvcih2YXIgaT0wLGw9YXJyYXkubGVuZ3RoLzMtMTtpPGw7aSs9Myl7dmFyIGE9aSswO3ZhciBiPWkrMTt2YXIgYz1pKzI7aW5kaWNlcy5wdXNoKGEsYixiLGMsYyxhKTt9fS8vIGNvbnNvbGUudGltZUVuZCggJ3dpcmVmcmFtZScgKTsKYXR0cmlidXRlPW5ldyhhcnJheU1heChpbmRpY2VzKT42NTUzNT9VaW50MzJCdWZmZXJBdHRyaWJ1dGU6VWludDE2QnVmZmVyQXR0cmlidXRlKShpbmRpY2VzLDEpO2F0dHJpYnV0ZXMudXBkYXRlKGF0dHJpYnV0ZSxnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUik7d2lyZWZyYW1lQXR0cmlidXRlc1tnZW9tZXRyeS5pZF09YXR0cmlidXRlO3JldHVybiBhdHRyaWJ1dGU7fXJldHVybntnZXQ6Z2V0LHVwZGF0ZTp1cGRhdGUsZ2V0V2lyZWZyYW1lQXR0cmlidXRlOmdldFdpcmVmcmFtZUF0dHJpYnV0ZX07fS8qKgogKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tLwogKi9mdW5jdGlvbiBVbmlmb3Jtc0NhY2hlKCl7dmFyIGxpZ2h0cz17fTtyZXR1cm57Z2V0OmZ1bmN0aW9uIGdldChsaWdodCl7aWYobGlnaHRzW2xpZ2h0LmlkXSE9PXVuZGVmaW5lZCl7cmV0dXJuIGxpZ2h0c1tsaWdodC5pZF07fXZhciB1bmlmb3Jtcztzd2l0Y2gobGlnaHQudHlwZSl7Y2FzZSdEaXJlY3Rpb25hbExpZ2h0Jzp1bmlmb3Jtcz17ZGlyZWN0aW9uOm5ldyBWZWN0b3IzKCksY29sb3I6bmV3IENvbG9yKCksc2hhZG93OmZhbHNlLHNoYWRvd0JpYXM6MCxzaGFkb3dSYWRpdXM6MSxzaGFkb3dNYXBTaXplOm5ldyBWZWN0b3IyKCl9O2JyZWFrO2Nhc2UnU3BvdExpZ2h0Jzp1bmlmb3Jtcz17cG9zaXRpb246bmV3IFZlY3RvcjMoKSxkaXJlY3Rpb246bmV3IFZlY3RvcjMoKSxjb2xvcjpuZXcgQ29sb3IoKSxkaXN0YW5jZTowLGNvbmVDb3M6MCxwZW51bWJyYUNvczowLGRlY2F5OjAsc2hhZG93OmZhbHNlLHNoYWRvd0JpYXM6MCxzaGFkb3dSYWRpdXM6MSxzaGFkb3dNYXBTaXplOm5ldyBWZWN0b3IyKCl9O2JyZWFrO2Nhc2UnUG9pbnRMaWdodCc6dW5pZm9ybXM9e3Bvc2l0aW9uOm5ldyBWZWN0b3IzKCksY29sb3I6bmV3IENvbG9yKCksZGlzdGFuY2U6MCxkZWNheTowLHNoYWRvdzpmYWxzZSxzaGFkb3dCaWFzOjAsc2hhZG93UmFkaXVzOjEsc2hhZG93TWFwU2l6ZTpuZXcgVmVjdG9yMigpLHNoYWRvd0NhbWVyYU5lYXI6MSxzaGFkb3dDYW1lcmFGYXI6MTAwMH07YnJlYWs7Y2FzZSdIZW1pc3BoZXJlTGlnaHQnOnVuaWZvcm1zPXtkaXJlY3Rpb246bmV3IFZlY3RvcjMoKSxza3lDb2xvcjpuZXcgQ29sb3IoKSxncm91bmRDb2xvcjpuZXcgQ29sb3IoKX07YnJlYWs7Y2FzZSdSZWN0QXJlYUxpZ2h0Jzp1bmlmb3Jtcz17Y29sb3I6bmV3IENvbG9yKCkscG9zaXRpb246bmV3IFZlY3RvcjMoKSxoYWxmV2lkdGg6bmV3IFZlY3RvcjMoKSxoYWxmSGVpZ2h0Om5ldyBWZWN0b3IzKCkvLyBUT0RPIChhYmVsbmF0aW9uKTogc2V0IFJlY3RBcmVhTGlnaHQgc2hhZG93IHVuaWZvcm1zCn07YnJlYWs7fWxpZ2h0c1tsaWdodC5pZF09dW5pZm9ybXM7cmV0dXJuIHVuaWZvcm1zO319O31mdW5jdGlvbiBXZWJHTExpZ2h0cygpe3ZhciBjYWNoZT1uZXcgVW5pZm9ybXNDYWNoZSgpO3ZhciBzdGF0ZT17aGFzaDonJyxhbWJpZW50OlswLDAsMF0sZGlyZWN0aW9uYWw6W10sZGlyZWN0aW9uYWxTaGFkb3dNYXA6W10sZGlyZWN0aW9uYWxTaGFkb3dNYXRyaXg6W10sc3BvdDpbXSxzcG90U2hhZG93TWFwOltdLHNwb3RTaGFkb3dNYXRyaXg6W10scmVjdEFyZWE6W10scG9pbnQ6W10scG9pbnRTaGFkb3dNYXA6W10scG9pbnRTaGFkb3dNYXRyaXg6W10saGVtaTpbXX07dmFyIHZlY3RvcjM9bmV3IFZlY3RvcjMoKTt2YXIgbWF0cml4ND1uZXcgTWF0cml4NCgpO3ZhciBtYXRyaXg0Mj1uZXcgTWF0cml4NCgpO2Z1bmN0aW9uIHNldHVwKGxpZ2h0cyxzaGFkb3dzLGNhbWVyYSl7dmFyIHI9MCxnPTAsYj0wO3ZhciBkaXJlY3Rpb25hbExlbmd0aD0wO3ZhciBwb2ludExlbmd0aD0wO3ZhciBzcG90TGVuZ3RoPTA7dmFyIHJlY3RBcmVhTGVuZ3RoPTA7dmFyIGhlbWlMZW5ndGg9MDt2YXIgdmlld01hdHJpeD1jYW1lcmEubWF0cml4V29ybGRJbnZlcnNlO2Zvcih2YXIgaT0wLGw9bGlnaHRzLmxlbmd0aDtpPGw7aSsrKXt2YXIgbGlnaHQ9bGlnaHRzW2ldO3ZhciBjb2xvcj1saWdodC5jb2xvcjt2YXIgaW50ZW5zaXR5PWxpZ2h0LmludGVuc2l0eTt2YXIgZGlzdGFuY2U9bGlnaHQuZGlzdGFuY2U7dmFyIHNoYWRvd01hcD1saWdodC5zaGFkb3cmJmxpZ2h0LnNoYWRvdy5tYXA/bGlnaHQuc2hhZG93Lm1hcC50ZXh0dXJlOm51bGw7aWYobGlnaHQuaXNBbWJpZW50TGlnaHQpe3IrPWNvbG9yLnIqaW50ZW5zaXR5O2crPWNvbG9yLmcqaW50ZW5zaXR5O2IrPWNvbG9yLmIqaW50ZW5zaXR5O31lbHNlIGlmKGxpZ2h0LmlzRGlyZWN0aW9uYWxMaWdodCl7dmFyIHVuaWZvcm1zPWNhY2hlLmdldChsaWdodCk7dW5pZm9ybXMuY29sb3IuY29weShsaWdodC5jb2xvcikubXVsdGlwbHlTY2FsYXIobGlnaHQuaW50ZW5zaXR5KTt1bmlmb3Jtcy5kaXJlY3Rpb24uc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGxpZ2h0Lm1hdHJpeFdvcmxkKTt2ZWN0b3IzLnNldEZyb21NYXRyaXhQb3NpdGlvbihsaWdodC50YXJnZXQubWF0cml4V29ybGQpO3VuaWZvcm1zLmRpcmVjdGlvbi5zdWIodmVjdG9yMyk7dW5pZm9ybXMuZGlyZWN0aW9uLnRyYW5zZm9ybURpcmVjdGlvbih2aWV3TWF0cml4KTt1bmlmb3Jtcy5zaGFkb3c9bGlnaHQuY2FzdFNoYWRvdztpZihsaWdodC5jYXN0U2hhZG93KXt2YXIgc2hhZG93PWxpZ2h0LnNoYWRvdzt1bmlmb3Jtcy5zaGFkb3dCaWFzPXNoYWRvdy5iaWFzO3VuaWZvcm1zLnNoYWRvd1JhZGl1cz1zaGFkb3cucmFkaXVzO3VuaWZvcm1zLnNoYWRvd01hcFNpemU9c2hhZG93Lm1hcFNpemU7fXN0YXRlLmRpcmVjdGlvbmFsU2hhZG93TWFwW2RpcmVjdGlvbmFsTGVuZ3RoXT1zaGFkb3dNYXA7c3RhdGUuZGlyZWN0aW9uYWxTaGFkb3dNYXRyaXhbZGlyZWN0aW9uYWxMZW5ndGhdPWxpZ2h0LnNoYWRvdy5tYXRyaXg7c3RhdGUuZGlyZWN0aW9uYWxbZGlyZWN0aW9uYWxMZW5ndGhdPXVuaWZvcm1zO2RpcmVjdGlvbmFsTGVuZ3RoKys7fWVsc2UgaWYobGlnaHQuaXNTcG90TGlnaHQpe3ZhciB1bmlmb3Jtcz1jYWNoZS5nZXQobGlnaHQpO3VuaWZvcm1zLnBvc2l0aW9uLnNldEZyb21NYXRyaXhQb3NpdGlvbihsaWdodC5tYXRyaXhXb3JsZCk7dW5pZm9ybXMucG9zaXRpb24uYXBwbHlNYXRyaXg0KHZpZXdNYXRyaXgpO3VuaWZvcm1zLmNvbG9yLmNvcHkoY29sb3IpLm11bHRpcGx5U2NhbGFyKGludGVuc2l0eSk7dW5pZm9ybXMuZGlzdGFuY2U9ZGlzdGFuY2U7dW5pZm9ybXMuZGlyZWN0aW9uLnNldEZyb21NYXRyaXhQb3NpdGlvbihsaWdodC5tYXRyaXhXb3JsZCk7dmVjdG9yMy5zZXRGcm9tTWF0cml4UG9zaXRpb24obGlnaHQudGFyZ2V0Lm1hdHJpeFdvcmxkKTt1bmlmb3Jtcy5kaXJlY3Rpb24uc3ViKHZlY3RvcjMpO3VuaWZvcm1zLmRpcmVjdGlvbi50cmFuc2Zvcm1EaXJlY3Rpb24odmlld01hdHJpeCk7dW5pZm9ybXMuY29uZUNvcz1NYXRoLmNvcyhsaWdodC5hbmdsZSk7dW5pZm9ybXMucGVudW1icmFDb3M9TWF0aC5jb3MobGlnaHQuYW5nbGUqKDEtbGlnaHQucGVudW1icmEpKTt1bmlmb3Jtcy5kZWNheT1saWdodC5kaXN0YW5jZT09PTA/MC4wOmxpZ2h0LmRlY2F5O3VuaWZvcm1zLnNoYWRvdz1saWdodC5jYXN0U2hhZG93O2lmKGxpZ2h0LmNhc3RTaGFkb3cpe3ZhciBzaGFkb3c9bGlnaHQuc2hhZG93O3VuaWZvcm1zLnNoYWRvd0JpYXM9c2hhZG93LmJpYXM7dW5pZm9ybXMuc2hhZG93UmFkaXVzPXNoYWRvdy5yYWRpdXM7dW5pZm9ybXMuc2hhZG93TWFwU2l6ZT1zaGFkb3cubWFwU2l6ZTt9c3RhdGUuc3BvdFNoYWRvd01hcFtzcG90TGVuZ3RoXT1zaGFkb3dNYXA7c3RhdGUuc3BvdFNoYWRvd01hdHJpeFtzcG90TGVuZ3RoXT1saWdodC5zaGFkb3cubWF0cml4O3N0YXRlLnNwb3Rbc3BvdExlbmd0aF09dW5pZm9ybXM7c3BvdExlbmd0aCsrO31lbHNlIGlmKGxpZ2h0LmlzUmVjdEFyZWFMaWdodCl7dmFyIHVuaWZvcm1zPWNhY2hlLmdldChsaWdodCk7Ly8gKGEpIGludGVuc2l0eSBjb250cm9scyBpcnJhZGlhbmNlIG9mIGVudGlyZSBsaWdodAp1bmlmb3Jtcy5jb2xvci5jb3B5KGNvbG9yKS5tdWx0aXBseVNjYWxhcihpbnRlbnNpdHkvKGxpZ2h0LndpZHRoKmxpZ2h0LmhlaWdodCkpOy8vIChiKSBpbnRlbnNpdHkgY29udHJvbHMgdGhlIHJhZGlhbmNlIHBlciBsaWdodCBhcmVhCi8vIHVuaWZvcm1zLmNvbG9yLmNvcHkoIGNvbG9yICkubXVsdGlwbHlTY2FsYXIoIGludGVuc2l0eSApOwp1bmlmb3Jtcy5wb3NpdGlvbi5zZXRGcm9tTWF0cml4UG9zaXRpb24obGlnaHQubWF0cml4V29ybGQpO3VuaWZvcm1zLnBvc2l0aW9uLmFwcGx5TWF0cml4NCh2aWV3TWF0cml4KTsvLyBleHRyYWN0IGxvY2FsIHJvdGF0aW9uIG9mIGxpZ2h0IHRvIGRlcml2ZSB3aWR0aC9oZWlnaHQgaGFsZiB2ZWN0b3JzCm1hdHJpeDQyLmlkZW50aXR5KCk7bWF0cml4NC5jb3B5KGxpZ2h0Lm1hdHJpeFdvcmxkKTttYXRyaXg0LnByZW11bHRpcGx5KHZpZXdNYXRyaXgpO21hdHJpeDQyLmV4dHJhY3RSb3RhdGlvbihtYXRyaXg0KTt1bmlmb3Jtcy5oYWxmV2lkdGguc2V0KGxpZ2h0LndpZHRoKjAuNSwwLjAsMC4wKTt1bmlmb3Jtcy5oYWxmSGVpZ2h0LnNldCgwLjAsbGlnaHQuaGVpZ2h0KjAuNSwwLjApO3VuaWZvcm1zLmhhbGZXaWR0aC5hcHBseU1hdHJpeDQobWF0cml4NDIpO3VuaWZvcm1zLmhhbGZIZWlnaHQuYXBwbHlNYXRyaXg0KG1hdHJpeDQyKTsvLyBUT0RPIChhYmVsbmF0aW9uKTogUmVjdEFyZWFMaWdodCBkaXN0YW5jZT8KLy8gdW5pZm9ybXMuZGlzdGFuY2UgPSBkaXN0YW5jZTsKc3RhdGUucmVjdEFyZWFbcmVjdEFyZWFMZW5ndGhdPXVuaWZvcm1zO3JlY3RBcmVhTGVuZ3RoKys7fWVsc2UgaWYobGlnaHQuaXNQb2ludExpZ2h0KXt2YXIgdW5pZm9ybXM9Y2FjaGUuZ2V0KGxpZ2h0KTt1bmlmb3Jtcy5wb3NpdGlvbi5zZXRGcm9tTWF0cml4UG9zaXRpb24obGlnaHQubWF0cml4V29ybGQpO3VuaWZvcm1zLnBvc2l0aW9uLmFwcGx5TWF0cml4NCh2aWV3TWF0cml4KTt1bmlmb3Jtcy5jb2xvci5jb3B5KGxpZ2h0LmNvbG9yKS5tdWx0aXBseVNjYWxhcihsaWdodC5pbnRlbnNpdHkpO3VuaWZvcm1zLmRpc3RhbmNlPWxpZ2h0LmRpc3RhbmNlO3VuaWZvcm1zLmRlY2F5PWxpZ2h0LmRpc3RhbmNlPT09MD8wLjA6bGlnaHQuZGVjYXk7dW5pZm9ybXMuc2hhZG93PWxpZ2h0LmNhc3RTaGFkb3c7aWYobGlnaHQuY2FzdFNoYWRvdyl7dmFyIHNoYWRvdz1saWdodC5zaGFkb3c7dW5pZm9ybXMuc2hhZG93Qmlhcz1zaGFkb3cuYmlhczt1bmlmb3Jtcy5zaGFkb3dSYWRpdXM9c2hhZG93LnJhZGl1czt1bmlmb3Jtcy5zaGFkb3dNYXBTaXplPXNoYWRvdy5tYXBTaXplO3VuaWZvcm1zLnNoYWRvd0NhbWVyYU5lYXI9c2hhZG93LmNhbWVyYS5uZWFyO3VuaWZvcm1zLnNoYWRvd0NhbWVyYUZhcj1zaGFkb3cuY2FtZXJhLmZhcjt9c3RhdGUucG9pbnRTaGFkb3dNYXBbcG9pbnRMZW5ndGhdPXNoYWRvd01hcDtzdGF0ZS5wb2ludFNoYWRvd01hdHJpeFtwb2ludExlbmd0aF09bGlnaHQuc2hhZG93Lm1hdHJpeDtzdGF0ZS5wb2ludFtwb2ludExlbmd0aF09dW5pZm9ybXM7cG9pbnRMZW5ndGgrKzt9ZWxzZSBpZihsaWdodC5pc0hlbWlzcGhlcmVMaWdodCl7dmFyIHVuaWZvcm1zPWNhY2hlLmdldChsaWdodCk7dW5pZm9ybXMuZGlyZWN0aW9uLnNldEZyb21NYXRyaXhQb3NpdGlvbihsaWdodC5tYXRyaXhXb3JsZCk7dW5pZm9ybXMuZGlyZWN0aW9uLnRyYW5zZm9ybURpcmVjdGlvbih2aWV3TWF0cml4KTt1bmlmb3Jtcy5kaXJlY3Rpb24ubm9ybWFsaXplKCk7dW5pZm9ybXMuc2t5Q29sb3IuY29weShsaWdodC5jb2xvcikubXVsdGlwbHlTY2FsYXIoaW50ZW5zaXR5KTt1bmlmb3Jtcy5ncm91bmRDb2xvci5jb3B5KGxpZ2h0Lmdyb3VuZENvbG9yKS5tdWx0aXBseVNjYWxhcihpbnRlbnNpdHkpO3N0YXRlLmhlbWlbaGVtaUxlbmd0aF09dW5pZm9ybXM7aGVtaUxlbmd0aCsrO319c3RhdGUuYW1iaWVudFswXT1yO3N0YXRlLmFtYmllbnRbMV09ZztzdGF0ZS5hbWJpZW50WzJdPWI7c3RhdGUuZGlyZWN0aW9uYWwubGVuZ3RoPWRpcmVjdGlvbmFsTGVuZ3RoO3N0YXRlLnNwb3QubGVuZ3RoPXNwb3RMZW5ndGg7c3RhdGUucmVjdEFyZWEubGVuZ3RoPXJlY3RBcmVhTGVuZ3RoO3N0YXRlLnBvaW50Lmxlbmd0aD1wb2ludExlbmd0aDtzdGF0ZS5oZW1pLmxlbmd0aD1oZW1pTGVuZ3RoOy8vIFRPRE8gKHNhbS1nLXN0ZWVsKSB3aHkgYXJlbid0IHdlIHVzaW5nIGpvaW4Kc3RhdGUuaGFzaD1kaXJlY3Rpb25hbExlbmd0aCsnLCcrcG9pbnRMZW5ndGgrJywnK3Nwb3RMZW5ndGgrJywnK3JlY3RBcmVhTGVuZ3RoKycsJytoZW1pTGVuZ3RoKycsJytzaGFkb3dzLmxlbmd0aDt9cmV0dXJue3NldHVwOnNldHVwLHN0YXRlOnN0YXRlfTt9LyoqCiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vCiAqL2Z1bmN0aW9uIFdlYkdMT2JqZWN0cyhnZW9tZXRyaWVzLGluZm9SZW5kZXIpe3ZhciB1cGRhdGVMaXN0PXt9O2Z1bmN0aW9uIHVwZGF0ZShvYmplY3Qpe3ZhciBmcmFtZT1pbmZvUmVuZGVyLmZyYW1lO3ZhciBnZW9tZXRyeT1vYmplY3QuZ2VvbWV0cnk7dmFyIGJ1ZmZlcmdlb21ldHJ5PWdlb21ldHJpZXMuZ2V0KG9iamVjdCxnZW9tZXRyeSk7Ly8gVXBkYXRlIG9uY2UgcGVyIGZyYW1lCmlmKHVwZGF0ZUxpc3RbYnVmZmVyZ2VvbWV0cnkuaWRdIT09ZnJhbWUpe2lmKGdlb21ldHJ5LmlzR2VvbWV0cnkpe2J1ZmZlcmdlb21ldHJ5LnVwZGF0ZUZyb21PYmplY3Qob2JqZWN0KTt9Z2VvbWV0cmllcy51cGRhdGUoYnVmZmVyZ2VvbWV0cnkpO3VwZGF0ZUxpc3RbYnVmZmVyZ2VvbWV0cnkuaWRdPWZyYW1lO31yZXR1cm4gYnVmZmVyZ2VvbWV0cnk7fWZ1bmN0aW9uIGNsZWFyKCl7dXBkYXRlTGlzdD17fTt9cmV0dXJue3VwZGF0ZTp1cGRhdGUsY2xlYXI6Y2xlYXJ9O30vKioKICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS8KICovZnVuY3Rpb24gYWRkTGluZU51bWJlcnMoc3RyaW5nKXt2YXIgbGluZXM9c3RyaW5nLnNwbGl0KCdcbicpO2Zvcih2YXIgaT0wO2k8bGluZXMubGVuZ3RoO2krKyl7bGluZXNbaV09aSsxKyc6ICcrbGluZXNbaV07fXJldHVybiBsaW5lcy5qb2luKCdcbicpO31mdW5jdGlvbiBXZWJHTFNoYWRlcihnbCx0eXBlLHN0cmluZyl7dmFyIHNoYWRlcj1nbC5jcmVhdGVTaGFkZXIodHlwZSk7Z2wuc2hhZGVyU291cmNlKHNoYWRlcixzdHJpbmcpO2dsLmNvbXBpbGVTaGFkZXIoc2hhZGVyKTtpZihnbC5nZXRTaGFkZXJQYXJhbWV0ZXIoc2hhZGVyLGdsLkNPTVBJTEVfU1RBVFVTKT09PWZhbHNlKXtjb25zb2xlLmVycm9yKCdUSFJFRS5XZWJHTFNoYWRlcjogU2hhZGVyIGNvdWxkblwndCBjb21waWxlLicpO31pZihnbC5nZXRTaGFkZXJJbmZvTG9nKHNoYWRlcikhPT0nJyl7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFNoYWRlcjogZ2wuZ2V0U2hhZGVySW5mb0xvZygpJyx0eXBlPT09Z2wuVkVSVEVYX1NIQURFUj8ndmVydGV4JzonZnJhZ21lbnQnLGdsLmdldFNoYWRlckluZm9Mb2coc2hhZGVyKSxhZGRMaW5lTnVtYmVycyhzdHJpbmcpKTt9Ly8gLS1lbmFibGUtcHJpdmlsZWdlZC13ZWJnbC1leHRlbnNpb24KLy8gY29uc29sZS5sb2coIHR5cGUsIGdsLmdldEV4dGVuc2lvbiggJ1dFQkdMX2RlYnVnX3NoYWRlcnMnICkuZ2V0VHJhbnNsYXRlZFNoYWRlclNvdXJjZSggc2hhZGVyICkgKTsKcmV0dXJuIHNoYWRlcjt9LyoqCiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vCiAqL3ZhciBwcm9ncmFtSWRDb3VudD0wO2Z1bmN0aW9uIGdldEVuY29kaW5nQ29tcG9uZW50cyhlbmNvZGluZyl7c3dpdGNoKGVuY29kaW5nKXtjYXNlIExpbmVhckVuY29kaW5nOnJldHVyblsnTGluZWFyJywnKCB2YWx1ZSApJ107Y2FzZSBzUkdCRW5jb2Rpbmc6cmV0dXJuWydzUkdCJywnKCB2YWx1ZSApJ107Y2FzZSBSR0JFRW5jb2Rpbmc6cmV0dXJuWydSR0JFJywnKCB2YWx1ZSApJ107Y2FzZSBSR0JNN0VuY29kaW5nOnJldHVyblsnUkdCTScsJyggdmFsdWUsIDcuMCApJ107Y2FzZSBSR0JNMTZFbmNvZGluZzpyZXR1cm5bJ1JHQk0nLCcoIHZhbHVlLCAxNi4wICknXTtjYXNlIFJHQkRFbmNvZGluZzpyZXR1cm5bJ1JHQkQnLCcoIHZhbHVlLCAyNTYuMCApJ107Y2FzZSBHYW1tYUVuY29kaW5nOnJldHVyblsnR2FtbWEnLCcoIHZhbHVlLCBmbG9hdCggR0FNTUFfRkFDVE9SICkgKSddO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCd1bnN1cHBvcnRlZCBlbmNvZGluZzogJytlbmNvZGluZyk7fX1mdW5jdGlvbiBnZXRUZXhlbERlY29kaW5nRnVuY3Rpb24oZnVuY3Rpb25OYW1lLGVuY29kaW5nKXt2YXIgY29tcG9uZW50cz1nZXRFbmNvZGluZ0NvbXBvbmVudHMoZW5jb2RpbmcpO3JldHVybid2ZWM0ICcrZnVuY3Rpb25OYW1lKycoIHZlYzQgdmFsdWUgKSB7IHJldHVybiAnK2NvbXBvbmVudHNbMF0rJ1RvTGluZWFyJytjb21wb25lbnRzWzFdKyc7IH0nO31mdW5jdGlvbiBnZXRUZXhlbEVuY29kaW5nRnVuY3Rpb24oZnVuY3Rpb25OYW1lLGVuY29kaW5nKXt2YXIgY29tcG9uZW50cz1nZXRFbmNvZGluZ0NvbXBvbmVudHMoZW5jb2RpbmcpO3JldHVybid2ZWM0ICcrZnVuY3Rpb25OYW1lKycoIHZlYzQgdmFsdWUgKSB7IHJldHVybiBMaW5lYXJUbycrY29tcG9uZW50c1swXStjb21wb25lbnRzWzFdKyc7IH0nO31mdW5jdGlvbiBnZXRUb25lTWFwcGluZ0Z1bmN0aW9uKGZ1bmN0aW9uTmFtZSx0b25lTWFwcGluZyl7dmFyIHRvbmVNYXBwaW5nTmFtZTtzd2l0Y2godG9uZU1hcHBpbmcpe2Nhc2UgTGluZWFyVG9uZU1hcHBpbmc6dG9uZU1hcHBpbmdOYW1lPSdMaW5lYXInO2JyZWFrO2Nhc2UgUmVpbmhhcmRUb25lTWFwcGluZzp0b25lTWFwcGluZ05hbWU9J1JlaW5oYXJkJzticmVhaztjYXNlIFVuY2hhcnRlZDJUb25lTWFwcGluZzp0b25lTWFwcGluZ05hbWU9J1VuY2hhcnRlZDInO2JyZWFrO2Nhc2UgQ2luZW9uVG9uZU1hcHBpbmc6dG9uZU1hcHBpbmdOYW1lPSdPcHRpbWl6ZWRDaW5lb24nO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCd1bnN1cHBvcnRlZCB0b25lTWFwcGluZzogJyt0b25lTWFwcGluZyk7fXJldHVybid2ZWMzICcrZnVuY3Rpb25OYW1lKycoIHZlYzMgY29sb3IgKSB7IHJldHVybiAnK3RvbmVNYXBwaW5nTmFtZSsnVG9uZU1hcHBpbmcoIGNvbG9yICk7IH0nO31mdW5jdGlvbiBnZW5lcmF0ZUV4dGVuc2lvbnMoZXh0ZW5zaW9ucyxwYXJhbWV0ZXJzLHJlbmRlcmVyRXh0ZW5zaW9ucyl7ZXh0ZW5zaW9ucz1leHRlbnNpb25zfHx7fTt2YXIgY2h1bmtzPVtleHRlbnNpb25zLmRlcml2YXRpdmVzfHxwYXJhbWV0ZXJzLmVudk1hcEN1YmVVVnx8cGFyYW1ldGVycy5idW1wTWFwfHxwYXJhbWV0ZXJzLm5vcm1hbE1hcHx8cGFyYW1ldGVycy5mbGF0U2hhZGluZz8nI2V4dGVuc2lvbiBHTF9PRVNfc3RhbmRhcmRfZGVyaXZhdGl2ZXMgOiBlbmFibGUnOicnLChleHRlbnNpb25zLmZyYWdEZXB0aHx8cGFyYW1ldGVycy5sb2dhcml0aG1pY0RlcHRoQnVmZmVyKSYmcmVuZGVyZXJFeHRlbnNpb25zLmdldCgnRVhUX2ZyYWdfZGVwdGgnKT8nI2V4dGVuc2lvbiBHTF9FWFRfZnJhZ19kZXB0aCA6IGVuYWJsZSc6JycsZXh0ZW5zaW9ucy5kcmF3QnVmZmVycyYmcmVuZGVyZXJFeHRlbnNpb25zLmdldCgnV0VCR0xfZHJhd19idWZmZXJzJyk/JyNleHRlbnNpb24gR0xfRVhUX2RyYXdfYnVmZmVycyA6IHJlcXVpcmUnOicnLChleHRlbnNpb25zLnNoYWRlclRleHR1cmVMT0R8fHBhcmFtZXRlcnMuZW52TWFwKSYmcmVuZGVyZXJFeHRlbnNpb25zLmdldCgnRVhUX3NoYWRlcl90ZXh0dXJlX2xvZCcpPycjZXh0ZW5zaW9uIEdMX0VYVF9zaGFkZXJfdGV4dHVyZV9sb2QgOiBlbmFibGUnOicnXTtyZXR1cm4gY2h1bmtzLmZpbHRlcihmaWx0ZXJFbXB0eUxpbmUpLmpvaW4oJ1xuJyk7fWZ1bmN0aW9uIGdlbmVyYXRlRGVmaW5lcyhkZWZpbmVzKXt2YXIgY2h1bmtzPVtdO2Zvcih2YXIgbmFtZSBpbiBkZWZpbmVzKXt2YXIgdmFsdWU9ZGVmaW5lc1tuYW1lXTtpZih2YWx1ZT09PWZhbHNlKWNvbnRpbnVlO2NodW5rcy5wdXNoKCcjZGVmaW5lICcrbmFtZSsnICcrdmFsdWUpO31yZXR1cm4gY2h1bmtzLmpvaW4oJ1xuJyk7fWZ1bmN0aW9uIGZldGNoQXR0cmlidXRlTG9jYXRpb25zKGdsLHByb2dyYW0pe3ZhciBhdHRyaWJ1dGVzPXt9O3ZhciBuPWdsLmdldFByb2dyYW1QYXJhbWV0ZXIocHJvZ3JhbSxnbC5BQ1RJVkVfQVRUUklCVVRFUyk7Zm9yKHZhciBpPTA7aTxuO2krKyl7dmFyIGluZm89Z2wuZ2V0QWN0aXZlQXR0cmliKHByb2dyYW0saSk7dmFyIG5hbWU9aW5mby5uYW1lOy8vIGNvbnNvbGUubG9nKCAnVEhSRUUuV2ViR0xQcm9ncmFtOiBBQ1RJVkUgVkVSVEVYIEFUVFJJQlVURTonLCBuYW1lLCBpICk7CmF0dHJpYnV0ZXNbbmFtZV09Z2wuZ2V0QXR0cmliTG9jYXRpb24ocHJvZ3JhbSxuYW1lKTt9cmV0dXJuIGF0dHJpYnV0ZXM7fWZ1bmN0aW9uIGZpbHRlckVtcHR5TGluZShzdHJpbmcpe3JldHVybiBzdHJpbmchPT0nJzt9ZnVuY3Rpb24gcmVwbGFjZUxpZ2h0TnVtcyhzdHJpbmcscGFyYW1ldGVycyl7cmV0dXJuIHN0cmluZy5yZXBsYWNlKC9OVU1fRElSX0xJR0hUUy9nLHBhcmFtZXRlcnMubnVtRGlyTGlnaHRzKS5yZXBsYWNlKC9OVU1fU1BPVF9MSUdIVFMvZyxwYXJhbWV0ZXJzLm51bVNwb3RMaWdodHMpLnJlcGxhY2UoL05VTV9SRUNUX0FSRUFfTElHSFRTL2cscGFyYW1ldGVycy5udW1SZWN0QXJlYUxpZ2h0cykucmVwbGFjZSgvTlVNX1BPSU5UX0xJR0hUUy9nLHBhcmFtZXRlcnMubnVtUG9pbnRMaWdodHMpLnJlcGxhY2UoL05VTV9IRU1JX0xJR0hUUy9nLHBhcmFtZXRlcnMubnVtSGVtaUxpZ2h0cyk7fWZ1bmN0aW9uIHBhcnNlSW5jbHVkZXMoc3RyaW5nKXt2YXIgcGF0dGVybj0vXlsgXHRdKiNpbmNsdWRlICs8KFtcd1xkLl0rKT4vZ207ZnVuY3Rpb24gcmVwbGFjZShtYXRjaCxpbmNsdWRlKXt2YXIgcmVwbGFjZT1TaGFkZXJDaHVua1tpbmNsdWRlXTtpZihyZXBsYWNlPT09dW5kZWZpbmVkKXt0aHJvdyBuZXcgRXJyb3IoJ0NhbiBub3QgcmVzb2x2ZSAjaW5jbHVkZSA8JytpbmNsdWRlKyc+Jyk7fXJldHVybiBwYXJzZUluY2x1ZGVzKHJlcGxhY2UpO31yZXR1cm4gc3RyaW5nLnJlcGxhY2UocGF0dGVybixyZXBsYWNlKTt9ZnVuY3Rpb24gdW5yb2xsTG9vcHMoc3RyaW5nKXt2YXIgcGF0dGVybj0vZm9yIFwoIGludCBpIFw9IChcZCspXDsgaSA8IChcZCspXDsgaSBcK1wrIFwpIFx7KFtcc1xTXSs/KSg/PVx9KVx9L2c7ZnVuY3Rpb24gcmVwbGFjZShtYXRjaCxzdGFydCxlbmQsc25pcHBldCl7dmFyIHVucm9sbD0nJztmb3IodmFyIGk9cGFyc2VJbnQoc3RhcnQpO2k8cGFyc2VJbnQoZW5kKTtpKyspe3Vucm9sbCs9c25pcHBldC5yZXBsYWNlKC9cWyBpIFxdL2csJ1sgJytpKycgXScpO31yZXR1cm4gdW5yb2xsO31yZXR1cm4gc3RyaW5nLnJlcGxhY2UocGF0dGVybixyZXBsYWNlKTt9ZnVuY3Rpb24gV2ViR0xQcm9ncmFtKHJlbmRlcmVyLGV4dGVuc2lvbnMsY29kZSxtYXRlcmlhbCxzaGFkZXIscGFyYW1ldGVycyl7dmFyIGdsPXJlbmRlcmVyLmNvbnRleHQ7dmFyIGRlZmluZXM9bWF0ZXJpYWwuZGVmaW5lczt2YXIgdmVydGV4U2hhZGVyPXNoYWRlci52ZXJ0ZXhTaGFkZXI7dmFyIGZyYWdtZW50U2hhZGVyPXNoYWRlci5mcmFnbWVudFNoYWRlcjt2YXIgc2hhZG93TWFwVHlwZURlZmluZT0nU0hBRE9XTUFQX1RZUEVfQkFTSUMnO2lmKHBhcmFtZXRlcnMuc2hhZG93TWFwVHlwZT09PVBDRlNoYWRvd01hcCl7c2hhZG93TWFwVHlwZURlZmluZT0nU0hBRE9XTUFQX1RZUEVfUENGJzt9ZWxzZSBpZihwYXJhbWV0ZXJzLnNoYWRvd01hcFR5cGU9PT1QQ0ZTb2Z0U2hhZG93TWFwKXtzaGFkb3dNYXBUeXBlRGVmaW5lPSdTSEFET1dNQVBfVFlQRV9QQ0ZfU09GVCc7fXZhciBlbnZNYXBUeXBlRGVmaW5lPSdFTlZNQVBfVFlQRV9DVUJFJzt2YXIgZW52TWFwTW9kZURlZmluZT0nRU5WTUFQX01PREVfUkVGTEVDVElPTic7dmFyIGVudk1hcEJsZW5kaW5nRGVmaW5lPSdFTlZNQVBfQkxFTkRJTkdfTVVMVElQTFknO2lmKHBhcmFtZXRlcnMuZW52TWFwKXtzd2l0Y2gobWF0ZXJpYWwuZW52TWFwLm1hcHBpbmcpe2Nhc2UgQ3ViZVJlZmxlY3Rpb25NYXBwaW5nOmNhc2UgQ3ViZVJlZnJhY3Rpb25NYXBwaW5nOmVudk1hcFR5cGVEZWZpbmU9J0VOVk1BUF9UWVBFX0NVQkUnO2JyZWFrO2Nhc2UgQ3ViZVVWUmVmbGVjdGlvbk1hcHBpbmc6Y2FzZSBDdWJlVVZSZWZyYWN0aW9uTWFwcGluZzplbnZNYXBUeXBlRGVmaW5lPSdFTlZNQVBfVFlQRV9DVUJFX1VWJzticmVhaztjYXNlIEVxdWlyZWN0YW5ndWxhclJlZmxlY3Rpb25NYXBwaW5nOmNhc2UgRXF1aXJlY3Rhbmd1bGFyUmVmcmFjdGlvbk1hcHBpbmc6ZW52TWFwVHlwZURlZmluZT0nRU5WTUFQX1RZUEVfRVFVSVJFQyc7YnJlYWs7Y2FzZSBTcGhlcmljYWxSZWZsZWN0aW9uTWFwcGluZzplbnZNYXBUeXBlRGVmaW5lPSdFTlZNQVBfVFlQRV9TUEhFUkUnO2JyZWFrO31zd2l0Y2gobWF0ZXJpYWwuZW52TWFwLm1hcHBpbmcpe2Nhc2UgQ3ViZVJlZnJhY3Rpb25NYXBwaW5nOmNhc2UgRXF1aXJlY3Rhbmd1bGFyUmVmcmFjdGlvbk1hcHBpbmc6ZW52TWFwTW9kZURlZmluZT0nRU5WTUFQX01PREVfUkVGUkFDVElPTic7YnJlYWs7fXN3aXRjaChtYXRlcmlhbC5jb21iaW5lKXtjYXNlIE11bHRpcGx5T3BlcmF0aW9uOmVudk1hcEJsZW5kaW5nRGVmaW5lPSdFTlZNQVBfQkxFTkRJTkdfTVVMVElQTFknO2JyZWFrO2Nhc2UgTWl4T3BlcmF0aW9uOmVudk1hcEJsZW5kaW5nRGVmaW5lPSdFTlZNQVBfQkxFTkRJTkdfTUlYJzticmVhaztjYXNlIEFkZE9wZXJhdGlvbjplbnZNYXBCbGVuZGluZ0RlZmluZT0nRU5WTUFQX0JMRU5ESU5HX0FERCc7YnJlYWs7fX12YXIgZ2FtbWFGYWN0b3JEZWZpbmU9cmVuZGVyZXIuZ2FtbWFGYWN0b3I+MD9yZW5kZXJlci5nYW1tYUZhY3RvcjoxLjA7Ly8gY29uc29sZS5sb2coICdidWlsZGluZyBuZXcgcHJvZ3JhbSAnICk7Ci8vCnZhciBjdXN0b21FeHRlbnNpb25zPWdlbmVyYXRlRXh0ZW5zaW9ucyhtYXRlcmlhbC5leHRlbnNpb25zLHBhcmFtZXRlcnMsZXh0ZW5zaW9ucyk7dmFyIGN1c3RvbURlZmluZXM9Z2VuZXJhdGVEZWZpbmVzKGRlZmluZXMpOy8vCnZhciBwcm9ncmFtPWdsLmNyZWF0ZVByb2dyYW0oKTt2YXIgcHJlZml4VmVydGV4LHByZWZpeEZyYWdtZW50O2lmKG1hdGVyaWFsLmlzUmF3U2hhZGVyTWF0ZXJpYWwpe3ByZWZpeFZlcnRleD1bY3VzdG9tRGVmaW5lc10uZmlsdGVyKGZpbHRlckVtcHR5TGluZSkuam9pbignXG4nKTtpZihwcmVmaXhWZXJ0ZXgubGVuZ3RoPjApe3ByZWZpeFZlcnRleCs9J1xuJzt9cHJlZml4RnJhZ21lbnQ9W2N1c3RvbUV4dGVuc2lvbnMsY3VzdG9tRGVmaW5lc10uZmlsdGVyKGZpbHRlckVtcHR5TGluZSkuam9pbignXG4nKTtpZihwcmVmaXhGcmFnbWVudC5sZW5ndGg+MCl7cHJlZml4RnJhZ21lbnQrPSdcbic7fX1lbHNle3ByZWZpeFZlcnRleD1bJ3ByZWNpc2lvbiAnK3BhcmFtZXRlcnMucHJlY2lzaW9uKycgZmxvYXQ7JywncHJlY2lzaW9uICcrcGFyYW1ldGVycy5wcmVjaXNpb24rJyBpbnQ7JywnI2RlZmluZSBTSEFERVJfTkFNRSAnK3NoYWRlci5uYW1lLGN1c3RvbURlZmluZXMscGFyYW1ldGVycy5zdXBwb3J0c1ZlcnRleFRleHR1cmVzPycjZGVmaW5lIFZFUlRFWF9URVhUVVJFUyc6JycsJyNkZWZpbmUgR0FNTUFfRkFDVE9SICcrZ2FtbWFGYWN0b3JEZWZpbmUsJyNkZWZpbmUgTUFYX0JPTkVTICcrcGFyYW1ldGVycy5tYXhCb25lcyxwYXJhbWV0ZXJzLnVzZUZvZyYmcGFyYW1ldGVycy5mb2c/JyNkZWZpbmUgVVNFX0ZPRyc6JycscGFyYW1ldGVycy51c2VGb2cmJnBhcmFtZXRlcnMuZm9nRXhwPycjZGVmaW5lIEZPR19FWFAyJzonJyxwYXJhbWV0ZXJzLm1hcD8nI2RlZmluZSBVU0VfTUFQJzonJyxwYXJhbWV0ZXJzLmVudk1hcD8nI2RlZmluZSBVU0VfRU5WTUFQJzonJyxwYXJhbWV0ZXJzLmVudk1hcD8nI2RlZmluZSAnK2Vudk1hcE1vZGVEZWZpbmU6JycscGFyYW1ldGVycy5saWdodE1hcD8nI2RlZmluZSBVU0VfTElHSFRNQVAnOicnLHBhcmFtZXRlcnMuYW9NYXA/JyNkZWZpbmUgVVNFX0FPTUFQJzonJyxwYXJhbWV0ZXJzLmVtaXNzaXZlTWFwPycjZGVmaW5lIFVTRV9FTUlTU0lWRU1BUCc6JycscGFyYW1ldGVycy5idW1wTWFwPycjZGVmaW5lIFVTRV9CVU1QTUFQJzonJyxwYXJhbWV0ZXJzLm5vcm1hbE1hcD8nI2RlZmluZSBVU0VfTk9STUFMTUFQJzonJyxwYXJhbWV0ZXJzLmRpc3BsYWNlbWVudE1hcCYmcGFyYW1ldGVycy5zdXBwb3J0c1ZlcnRleFRleHR1cmVzPycjZGVmaW5lIFVTRV9ESVNQTEFDRU1FTlRNQVAnOicnLHBhcmFtZXRlcnMuc3BlY3VsYXJNYXA/JyNkZWZpbmUgVVNFX1NQRUNVTEFSTUFQJzonJyxwYXJhbWV0ZXJzLnJvdWdobmVzc01hcD8nI2RlZmluZSBVU0VfUk9VR0hORVNTTUFQJzonJyxwYXJhbWV0ZXJzLm1ldGFsbmVzc01hcD8nI2RlZmluZSBVU0VfTUVUQUxORVNTTUFQJzonJyxwYXJhbWV0ZXJzLmFscGhhTWFwPycjZGVmaW5lIFVTRV9BTFBIQU1BUCc6JycscGFyYW1ldGVycy52ZXJ0ZXhDb2xvcnM/JyNkZWZpbmUgVVNFX0NPTE9SJzonJyxwYXJhbWV0ZXJzLmZsYXRTaGFkaW5nPycjZGVmaW5lIEZMQVRfU0hBREVEJzonJyxwYXJhbWV0ZXJzLnNraW5uaW5nPycjZGVmaW5lIFVTRV9TS0lOTklORyc6JycscGFyYW1ldGVycy51c2VWZXJ0ZXhUZXh0dXJlPycjZGVmaW5lIEJPTkVfVEVYVFVSRSc6JycscGFyYW1ldGVycy5tb3JwaFRhcmdldHM/JyNkZWZpbmUgVVNFX01PUlBIVEFSR0VUUyc6JycscGFyYW1ldGVycy5tb3JwaE5vcm1hbHMmJnBhcmFtZXRlcnMuZmxhdFNoYWRpbmc9PT1mYWxzZT8nI2RlZmluZSBVU0VfTU9SUEhOT1JNQUxTJzonJyxwYXJhbWV0ZXJzLmRvdWJsZVNpZGVkPycjZGVmaW5lIERPVUJMRV9TSURFRCc6JycscGFyYW1ldGVycy5mbGlwU2lkZWQ/JyNkZWZpbmUgRkxJUF9TSURFRCc6JycsJyNkZWZpbmUgTlVNX0NMSVBQSU5HX1BMQU5FUyAnK3BhcmFtZXRlcnMubnVtQ2xpcHBpbmdQbGFuZXMscGFyYW1ldGVycy5zaGFkb3dNYXBFbmFibGVkPycjZGVmaW5lIFVTRV9TSEFET1dNQVAnOicnLHBhcmFtZXRlcnMuc2hhZG93TWFwRW5hYmxlZD8nI2RlZmluZSAnK3NoYWRvd01hcFR5cGVEZWZpbmU6JycscGFyYW1ldGVycy5zaXplQXR0ZW51YXRpb24/JyNkZWZpbmUgVVNFX1NJWkVBVFRFTlVBVElPTic6JycscGFyYW1ldGVycy5sb2dhcml0aG1pY0RlcHRoQnVmZmVyPycjZGVmaW5lIFVTRV9MT0dERVBUSEJVRic6JycscGFyYW1ldGVycy5sb2dhcml0aG1pY0RlcHRoQnVmZmVyJiZleHRlbnNpb25zLmdldCgnRVhUX2ZyYWdfZGVwdGgnKT8nI2RlZmluZSBVU0VfTE9HREVQVEhCVUZfRVhUJzonJywndW5pZm9ybSBtYXQ0IG1vZGVsTWF0cml4OycsJ3VuaWZvcm0gbWF0NCBtb2RlbFZpZXdNYXRyaXg7JywndW5pZm9ybSBtYXQ0IHByb2plY3Rpb25NYXRyaXg7JywndW5pZm9ybSBtYXQ0IHZpZXdNYXRyaXg7JywndW5pZm9ybSBtYXQzIG5vcm1hbE1hdHJpeDsnLCd1bmlmb3JtIHZlYzMgY2FtZXJhUG9zaXRpb247JywnYXR0cmlidXRlIHZlYzMgcG9zaXRpb247JywnYXR0cmlidXRlIHZlYzMgbm9ybWFsOycsJ2F0dHJpYnV0ZSB2ZWMyIHV2OycsJyNpZmRlZiBVU0VfQ09MT1InLCcJYXR0cmlidXRlIHZlYzMgY29sb3I7JywnI2VuZGlmJywnI2lmZGVmIFVTRV9NT1JQSFRBUkdFVFMnLCcJYXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQwOycsJwlhdHRyaWJ1dGUgdmVjMyBtb3JwaFRhcmdldDE7JywnCWF0dHJpYnV0ZSB2ZWMzIG1vcnBoVGFyZ2V0MjsnLCcJYXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQzOycsJwkjaWZkZWYgVVNFX01PUlBITk9STUFMUycsJwkJYXR0cmlidXRlIHZlYzMgbW9ycGhOb3JtYWwwOycsJwkJYXR0cmlidXRlIHZlYzMgbW9ycGhOb3JtYWwxOycsJwkJYXR0cmlidXRlIHZlYzMgbW9ycGhOb3JtYWwyOycsJwkJYXR0cmlidXRlIHZlYzMgbW9ycGhOb3JtYWwzOycsJwkjZWxzZScsJwkJYXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQ0OycsJwkJYXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQ1OycsJwkJYXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQ2OycsJwkJYXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQ3OycsJwkjZW5kaWYnLCcjZW5kaWYnLCcjaWZkZWYgVVNFX1NLSU5OSU5HJywnCWF0dHJpYnV0ZSB2ZWM0IHNraW5JbmRleDsnLCcJYXR0cmlidXRlIHZlYzQgc2tpbldlaWdodDsnLCcjZW5kaWYnLCdcbiddLmZpbHRlcihmaWx0ZXJFbXB0eUxpbmUpLmpvaW4oJ1xuJyk7cHJlZml4RnJhZ21lbnQ9W2N1c3RvbUV4dGVuc2lvbnMsJ3ByZWNpc2lvbiAnK3BhcmFtZXRlcnMucHJlY2lzaW9uKycgZmxvYXQ7JywncHJlY2lzaW9uICcrcGFyYW1ldGVycy5wcmVjaXNpb24rJyBpbnQ7JywnI2RlZmluZSBTSEFERVJfTkFNRSAnK3NoYWRlci5uYW1lLGN1c3RvbURlZmluZXMscGFyYW1ldGVycy5hbHBoYVRlc3Q/JyNkZWZpbmUgQUxQSEFURVNUICcrcGFyYW1ldGVycy5hbHBoYVRlc3Q6JycsJyNkZWZpbmUgR0FNTUFfRkFDVE9SICcrZ2FtbWFGYWN0b3JEZWZpbmUscGFyYW1ldGVycy51c2VGb2cmJnBhcmFtZXRlcnMuZm9nPycjZGVmaW5lIFVTRV9GT0cnOicnLHBhcmFtZXRlcnMudXNlRm9nJiZwYXJhbWV0ZXJzLmZvZ0V4cD8nI2RlZmluZSBGT0dfRVhQMic6JycscGFyYW1ldGVycy5tYXA/JyNkZWZpbmUgVVNFX01BUCc6JycscGFyYW1ldGVycy5lbnZNYXA/JyNkZWZpbmUgVVNFX0VOVk1BUCc6JycscGFyYW1ldGVycy5lbnZNYXA/JyNkZWZpbmUgJytlbnZNYXBUeXBlRGVmaW5lOicnLHBhcmFtZXRlcnMuZW52TWFwPycjZGVmaW5lICcrZW52TWFwTW9kZURlZmluZTonJyxwYXJhbWV0ZXJzLmVudk1hcD8nI2RlZmluZSAnK2Vudk1hcEJsZW5kaW5nRGVmaW5lOicnLHBhcmFtZXRlcnMubGlnaHRNYXA/JyNkZWZpbmUgVVNFX0xJR0hUTUFQJzonJyxwYXJhbWV0ZXJzLmFvTWFwPycjZGVmaW5lIFVTRV9BT01BUCc6JycscGFyYW1ldGVycy5lbWlzc2l2ZU1hcD8nI2RlZmluZSBVU0VfRU1JU1NJVkVNQVAnOicnLHBhcmFtZXRlcnMuYnVtcE1hcD8nI2RlZmluZSBVU0VfQlVNUE1BUCc6JycscGFyYW1ldGVycy5ub3JtYWxNYXA/JyNkZWZpbmUgVVNFX05PUk1BTE1BUCc6JycscGFyYW1ldGVycy5zcGVjdWxhck1hcD8nI2RlZmluZSBVU0VfU1BFQ1VMQVJNQVAnOicnLHBhcmFtZXRlcnMucm91Z2huZXNzTWFwPycjZGVmaW5lIFVTRV9ST1VHSE5FU1NNQVAnOicnLHBhcmFtZXRlcnMubWV0YWxuZXNzTWFwPycjZGVmaW5lIFVTRV9NRVRBTE5FU1NNQVAnOicnLHBhcmFtZXRlcnMuYWxwaGFNYXA/JyNkZWZpbmUgVVNFX0FMUEhBTUFQJzonJyxwYXJhbWV0ZXJzLnZlcnRleENvbG9ycz8nI2RlZmluZSBVU0VfQ09MT1InOicnLHBhcmFtZXRlcnMuZ3JhZGllbnRNYXA/JyNkZWZpbmUgVVNFX0dSQURJRU5UTUFQJzonJyxwYXJhbWV0ZXJzLmZsYXRTaGFkaW5nPycjZGVmaW5lIEZMQVRfU0hBREVEJzonJyxwYXJhbWV0ZXJzLmRvdWJsZVNpZGVkPycjZGVmaW5lIERPVUJMRV9TSURFRCc6JycscGFyYW1ldGVycy5mbGlwU2lkZWQ/JyNkZWZpbmUgRkxJUF9TSURFRCc6JycsJyNkZWZpbmUgTlVNX0NMSVBQSU5HX1BMQU5FUyAnK3BhcmFtZXRlcnMubnVtQ2xpcHBpbmdQbGFuZXMsJyNkZWZpbmUgVU5JT05fQ0xJUFBJTkdfUExBTkVTICcrKHBhcmFtZXRlcnMubnVtQ2xpcHBpbmdQbGFuZXMtcGFyYW1ldGVycy5udW1DbGlwSW50ZXJzZWN0aW9uKSxwYXJhbWV0ZXJzLnNoYWRvd01hcEVuYWJsZWQ/JyNkZWZpbmUgVVNFX1NIQURPV01BUCc6JycscGFyYW1ldGVycy5zaGFkb3dNYXBFbmFibGVkPycjZGVmaW5lICcrc2hhZG93TWFwVHlwZURlZmluZTonJyxwYXJhbWV0ZXJzLnByZW11bHRpcGxpZWRBbHBoYT8nI2RlZmluZSBQUkVNVUxUSVBMSUVEX0FMUEhBJzonJyxwYXJhbWV0ZXJzLnBoeXNpY2FsbHlDb3JyZWN0TGlnaHRzPycjZGVmaW5lIFBIWVNJQ0FMTFlfQ09SUkVDVF9MSUdIVFMnOicnLHBhcmFtZXRlcnMubG9nYXJpdGhtaWNEZXB0aEJ1ZmZlcj8nI2RlZmluZSBVU0VfTE9HREVQVEhCVUYnOicnLHBhcmFtZXRlcnMubG9nYXJpdGhtaWNEZXB0aEJ1ZmZlciYmZXh0ZW5zaW9ucy5nZXQoJ0VYVF9mcmFnX2RlcHRoJyk/JyNkZWZpbmUgVVNFX0xPR0RFUFRIQlVGX0VYVCc6JycscGFyYW1ldGVycy5lbnZNYXAmJmV4dGVuc2lvbnMuZ2V0KCdFWFRfc2hhZGVyX3RleHR1cmVfbG9kJyk/JyNkZWZpbmUgVEVYVFVSRV9MT0RfRVhUJzonJywndW5pZm9ybSBtYXQ0IHZpZXdNYXRyaXg7JywndW5pZm9ybSB2ZWMzIGNhbWVyYVBvc2l0aW9uOycscGFyYW1ldGVycy50b25lTWFwcGluZyE9PU5vVG9uZU1hcHBpbmc/JyNkZWZpbmUgVE9ORV9NQVBQSU5HJzonJyxwYXJhbWV0ZXJzLnRvbmVNYXBwaW5nIT09Tm9Ub25lTWFwcGluZz9TaGFkZXJDaHVua1sndG9uZW1hcHBpbmdfcGFyc19mcmFnbWVudCddOicnLC8vIHRoaXMgY29kZSBpcyByZXF1aXJlZCBoZXJlIGJlY2F1c2UgaXQgaXMgdXNlZCBieSB0aGUgdG9uZU1hcHBpbmcoKSBmdW5jdGlvbiBkZWZpbmVkIGJlbG93CnBhcmFtZXRlcnMudG9uZU1hcHBpbmchPT1Ob1RvbmVNYXBwaW5nP2dldFRvbmVNYXBwaW5nRnVuY3Rpb24oJ3RvbmVNYXBwaW5nJyxwYXJhbWV0ZXJzLnRvbmVNYXBwaW5nKTonJyxwYXJhbWV0ZXJzLmRpdGhlcmluZz8nI2RlZmluZSBESVRIRVJJTkcnOicnLHBhcmFtZXRlcnMub3V0cHV0RW5jb2Rpbmd8fHBhcmFtZXRlcnMubWFwRW5jb2Rpbmd8fHBhcmFtZXRlcnMuZW52TWFwRW5jb2Rpbmd8fHBhcmFtZXRlcnMuZW1pc3NpdmVNYXBFbmNvZGluZz9TaGFkZXJDaHVua1snZW5jb2RpbmdzX3BhcnNfZnJhZ21lbnQnXTonJywvLyB0aGlzIGNvZGUgaXMgcmVxdWlyZWQgaGVyZSBiZWNhdXNlIGl0IGlzIHVzZWQgYnkgdGhlIHZhcmlvdXMgZW5jb2RpbmcvZGVjb2RpbmcgZnVuY3Rpb24gZGVmaW5lZCBiZWxvdwpwYXJhbWV0ZXJzLm1hcEVuY29kaW5nP2dldFRleGVsRGVjb2RpbmdGdW5jdGlvbignbWFwVGV4ZWxUb0xpbmVhcicscGFyYW1ldGVycy5tYXBFbmNvZGluZyk6JycscGFyYW1ldGVycy5lbnZNYXBFbmNvZGluZz9nZXRUZXhlbERlY29kaW5nRnVuY3Rpb24oJ2Vudk1hcFRleGVsVG9MaW5lYXInLHBhcmFtZXRlcnMuZW52TWFwRW5jb2RpbmcpOicnLHBhcmFtZXRlcnMuZW1pc3NpdmVNYXBFbmNvZGluZz9nZXRUZXhlbERlY29kaW5nRnVuY3Rpb24oJ2VtaXNzaXZlTWFwVGV4ZWxUb0xpbmVhcicscGFyYW1ldGVycy5lbWlzc2l2ZU1hcEVuY29kaW5nKTonJyxwYXJhbWV0ZXJzLm91dHB1dEVuY29kaW5nP2dldFRleGVsRW5jb2RpbmdGdW5jdGlvbignbGluZWFyVG9PdXRwdXRUZXhlbCcscGFyYW1ldGVycy5vdXRwdXRFbmNvZGluZyk6JycscGFyYW1ldGVycy5kZXB0aFBhY2tpbmc/JyNkZWZpbmUgREVQVEhfUEFDS0lORyAnK21hdGVyaWFsLmRlcHRoUGFja2luZzonJywnXG4nXS5maWx0ZXIoZmlsdGVyRW1wdHlMaW5lKS5qb2luKCdcbicpO312ZXJ0ZXhTaGFkZXI9cGFyc2VJbmNsdWRlcyh2ZXJ0ZXhTaGFkZXIpO3ZlcnRleFNoYWRlcj1yZXBsYWNlTGlnaHROdW1zKHZlcnRleFNoYWRlcixwYXJhbWV0ZXJzKTtmcmFnbWVudFNoYWRlcj1wYXJzZUluY2x1ZGVzKGZyYWdtZW50U2hhZGVyKTtmcmFnbWVudFNoYWRlcj1yZXBsYWNlTGlnaHROdW1zKGZyYWdtZW50U2hhZGVyLHBhcmFtZXRlcnMpO2lmKCFtYXRlcmlhbC5pc1NoYWRlck1hdGVyaWFsKXt2ZXJ0ZXhTaGFkZXI9dW5yb2xsTG9vcHModmVydGV4U2hhZGVyKTtmcmFnbWVudFNoYWRlcj11bnJvbGxMb29wcyhmcmFnbWVudFNoYWRlcik7fXZhciB2ZXJ0ZXhHbHNsPXByZWZpeFZlcnRleCt2ZXJ0ZXhTaGFkZXI7dmFyIGZyYWdtZW50R2xzbD1wcmVmaXhGcmFnbWVudCtmcmFnbWVudFNoYWRlcjsvLyBjb25zb2xlLmxvZyggJypWRVJURVgqJywgdmVydGV4R2xzbCApOwovLyBjb25zb2xlLmxvZyggJypGUkFHTUVOVConLCBmcmFnbWVudEdsc2wgKTsKdmFyIGdsVmVydGV4U2hhZGVyPVdlYkdMU2hhZGVyKGdsLGdsLlZFUlRFWF9TSEFERVIsdmVydGV4R2xzbCk7dmFyIGdsRnJhZ21lbnRTaGFkZXI9V2ViR0xTaGFkZXIoZ2wsZ2wuRlJBR01FTlRfU0hBREVSLGZyYWdtZW50R2xzbCk7Z2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sZ2xWZXJ0ZXhTaGFkZXIpO2dsLmF0dGFjaFNoYWRlcihwcm9ncmFtLGdsRnJhZ21lbnRTaGFkZXIpOy8vIEZvcmNlIGEgcGFydGljdWxhciBhdHRyaWJ1dGUgdG8gaW5kZXggMC4KaWYobWF0ZXJpYWwuaW5kZXgwQXR0cmlidXRlTmFtZSE9PXVuZGVmaW5lZCl7Z2wuYmluZEF0dHJpYkxvY2F0aW9uKHByb2dyYW0sMCxtYXRlcmlhbC5pbmRleDBBdHRyaWJ1dGVOYW1lKTt9ZWxzZSBpZihwYXJhbWV0ZXJzLm1vcnBoVGFyZ2V0cz09PXRydWUpey8vIHByb2dyYW1zIHdpdGggbW9ycGhUYXJnZXRzIGRpc3BsYWNlIHBvc2l0aW9uIG91dCBvZiBhdHRyaWJ1dGUgMApnbC5iaW5kQXR0cmliTG9jYXRpb24ocHJvZ3JhbSwwLCdwb3NpdGlvbicpO31nbC5saW5rUHJvZ3JhbShwcm9ncmFtKTt2YXIgcHJvZ3JhbUxvZz1nbC5nZXRQcm9ncmFtSW5mb0xvZyhwcm9ncmFtKTt2YXIgdmVydGV4TG9nPWdsLmdldFNoYWRlckluZm9Mb2coZ2xWZXJ0ZXhTaGFkZXIpO3ZhciBmcmFnbWVudExvZz1nbC5nZXRTaGFkZXJJbmZvTG9nKGdsRnJhZ21lbnRTaGFkZXIpO3ZhciBydW5uYWJsZT10cnVlO3ZhciBoYXZlRGlhZ25vc3RpY3M9dHJ1ZTsvLyBjb25zb2xlLmxvZyggJyoqVkVSVEVYKionLCBnbC5nZXRFeHRlbnNpb24oICdXRUJHTF9kZWJ1Z19zaGFkZXJzJyApLmdldFRyYW5zbGF0ZWRTaGFkZXJTb3VyY2UoIGdsVmVydGV4U2hhZGVyICkgKTsKLy8gY29uc29sZS5sb2coICcqKkZSQUdNRU5UKionLCBnbC5nZXRFeHRlbnNpb24oICdXRUJHTF9kZWJ1Z19zaGFkZXJzJyApLmdldFRyYW5zbGF0ZWRTaGFkZXJTb3VyY2UoIGdsRnJhZ21lbnRTaGFkZXIgKSApOwppZihnbC5nZXRQcm9ncmFtUGFyYW1ldGVyKHByb2dyYW0sZ2wuTElOS19TVEFUVVMpPT09ZmFsc2Upe3J1bm5hYmxlPWZhbHNlO2NvbnNvbGUuZXJyb3IoJ1RIUkVFLldlYkdMUHJvZ3JhbTogc2hhZGVyIGVycm9yOiAnLGdsLmdldEVycm9yKCksJ2dsLlZBTElEQVRFX1NUQVRVUycsZ2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcihwcm9ncmFtLGdsLlZBTElEQVRFX1NUQVRVUyksJ2dsLmdldFByb2dyYW1JbmZvTG9nJyxwcm9ncmFtTG9nLHZlcnRleExvZyxmcmFnbWVudExvZyk7fWVsc2UgaWYocHJvZ3JhbUxvZyE9PScnKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUHJvZ3JhbTogZ2wuZ2V0UHJvZ3JhbUluZm9Mb2coKScscHJvZ3JhbUxvZyk7fWVsc2UgaWYodmVydGV4TG9nPT09Jyd8fGZyYWdtZW50TG9nPT09Jycpe2hhdmVEaWFnbm9zdGljcz1mYWxzZTt9aWYoaGF2ZURpYWdub3N0aWNzKXt0aGlzLmRpYWdub3N0aWNzPXtydW5uYWJsZTpydW5uYWJsZSxtYXRlcmlhbDptYXRlcmlhbCxwcm9ncmFtTG9nOnByb2dyYW1Mb2csdmVydGV4U2hhZGVyOntsb2c6dmVydGV4TG9nLHByZWZpeDpwcmVmaXhWZXJ0ZXh9LGZyYWdtZW50U2hhZGVyOntsb2c6ZnJhZ21lbnRMb2cscHJlZml4OnByZWZpeEZyYWdtZW50fX07fS8vIGNsZWFuIHVwCmdsLmRlbGV0ZVNoYWRlcihnbFZlcnRleFNoYWRlcik7Z2wuZGVsZXRlU2hhZGVyKGdsRnJhZ21lbnRTaGFkZXIpOy8vIHNldCB1cCBjYWNoaW5nIGZvciB1bmlmb3JtIGxvY2F0aW9ucwp2YXIgY2FjaGVkVW5pZm9ybXM7dGhpcy5nZXRVbmlmb3Jtcz1mdW5jdGlvbigpe2lmKGNhY2hlZFVuaWZvcm1zPT09dW5kZWZpbmVkKXtjYWNoZWRVbmlmb3Jtcz1uZXcgV2ViR0xVbmlmb3JtcyhnbCxwcm9ncmFtLHJlbmRlcmVyKTt9cmV0dXJuIGNhY2hlZFVuaWZvcm1zO307Ly8gc2V0IHVwIGNhY2hpbmcgZm9yIGF0dHJpYnV0ZSBsb2NhdGlvbnMKdmFyIGNhY2hlZEF0dHJpYnV0ZXM7dGhpcy5nZXRBdHRyaWJ1dGVzPWZ1bmN0aW9uKCl7aWYoY2FjaGVkQXR0cmlidXRlcz09PXVuZGVmaW5lZCl7Y2FjaGVkQXR0cmlidXRlcz1mZXRjaEF0dHJpYnV0ZUxvY2F0aW9ucyhnbCxwcm9ncmFtKTt9cmV0dXJuIGNhY2hlZEF0dHJpYnV0ZXM7fTsvLyBmcmVlIHJlc291cmNlCnRoaXMuZGVzdHJveT1mdW5jdGlvbigpe2dsLmRlbGV0ZVByb2dyYW0ocHJvZ3JhbSk7dGhpcy5wcm9ncmFtPXVuZGVmaW5lZDt9Oy8vIERFUFJFQ0FURUQKT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcyx7dW5pZm9ybXM6e2dldDpmdW5jdGlvbiBnZXQoKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUHJvZ3JhbTogLnVuaWZvcm1zIGlzIG5vdyAuZ2V0VW5pZm9ybXMoKS4nKTtyZXR1cm4gdGhpcy5nZXRVbmlmb3JtcygpO319LGF0dHJpYnV0ZXM6e2dldDpmdW5jdGlvbiBnZXQoKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUHJvZ3JhbTogLmF0dHJpYnV0ZXMgaXMgbm93IC5nZXRBdHRyaWJ1dGVzKCkuJyk7cmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlcygpO319fSk7Ly8KdGhpcy5pZD1wcm9ncmFtSWRDb3VudCsrO3RoaXMuY29kZT1jb2RlO3RoaXMudXNlZFRpbWVzPTE7dGhpcy5wcm9ncmFtPXByb2dyYW07dGhpcy52ZXJ0ZXhTaGFkZXI9Z2xWZXJ0ZXhTaGFkZXI7dGhpcy5mcmFnbWVudFNoYWRlcj1nbEZyYWdtZW50U2hhZGVyO3JldHVybiB0aGlzO30vKioKICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS8KICovZnVuY3Rpb24gV2ViR0xQcm9ncmFtcyhyZW5kZXJlcixleHRlbnNpb25zLGNhcGFiaWxpdGllcyl7dmFyIHByb2dyYW1zPVtdO3ZhciBzaGFkZXJJRHM9e01lc2hEZXB0aE1hdGVyaWFsOidkZXB0aCcsTWVzaERpc3RhbmNlTWF0ZXJpYWw6J2Rpc3RhbmNlUkdCQScsTWVzaE5vcm1hbE1hdGVyaWFsOidub3JtYWwnLE1lc2hCYXNpY01hdGVyaWFsOidiYXNpYycsTWVzaExhbWJlcnRNYXRlcmlhbDonbGFtYmVydCcsTWVzaFBob25nTWF0ZXJpYWw6J3Bob25nJyxNZXNoVG9vbk1hdGVyaWFsOidwaG9uZycsTWVzaFN0YW5kYXJkTWF0ZXJpYWw6J3BoeXNpY2FsJyxNZXNoUGh5c2ljYWxNYXRlcmlhbDoncGh5c2ljYWwnLExpbmVCYXNpY01hdGVyaWFsOidiYXNpYycsTGluZURhc2hlZE1hdGVyaWFsOidkYXNoZWQnLFBvaW50c01hdGVyaWFsOidwb2ludHMnLFNoYWRvd01hdGVyaWFsOidzaGFkb3cnfTt2YXIgcGFyYW1ldGVyTmFtZXM9WyJwcmVjaXNpb24iLCJzdXBwb3J0c1ZlcnRleFRleHR1cmVzIiwibWFwIiwibWFwRW5jb2RpbmciLCJlbnZNYXAiLCJlbnZNYXBNb2RlIiwiZW52TWFwRW5jb2RpbmciLCJsaWdodE1hcCIsImFvTWFwIiwiZW1pc3NpdmVNYXAiLCJlbWlzc2l2ZU1hcEVuY29kaW5nIiwiYnVtcE1hcCIsIm5vcm1hbE1hcCIsImRpc3BsYWNlbWVudE1hcCIsInNwZWN1bGFyTWFwIiwicm91Z2huZXNzTWFwIiwibWV0YWxuZXNzTWFwIiwiZ3JhZGllbnRNYXAiLCJhbHBoYU1hcCIsImNvbWJpbmUiLCJ2ZXJ0ZXhDb2xvcnMiLCJmb2ciLCJ1c2VGb2ciLCJmb2dFeHAiLCJmbGF0U2hhZGluZyIsInNpemVBdHRlbnVhdGlvbiIsImxvZ2FyaXRobWljRGVwdGhCdWZmZXIiLCJza2lubmluZyIsIm1heEJvbmVzIiwidXNlVmVydGV4VGV4dHVyZSIsIm1vcnBoVGFyZ2V0cyIsIm1vcnBoTm9ybWFscyIsIm1heE1vcnBoVGFyZ2V0cyIsIm1heE1vcnBoTm9ybWFscyIsInByZW11bHRpcGxpZWRBbHBoYSIsIm51bURpckxpZ2h0cyIsIm51bVBvaW50TGlnaHRzIiwibnVtU3BvdExpZ2h0cyIsIm51bUhlbWlMaWdodHMiLCJudW1SZWN0QXJlYUxpZ2h0cyIsInNoYWRvd01hcEVuYWJsZWQiLCJzaGFkb3dNYXBUeXBlIiwidG9uZU1hcHBpbmciLCdwaHlzaWNhbGx5Q29ycmVjdExpZ2h0cycsImFscGhhVGVzdCIsImRvdWJsZVNpZGVkIiwiZmxpcFNpZGVkIiwibnVtQ2xpcHBpbmdQbGFuZXMiLCJudW1DbGlwSW50ZXJzZWN0aW9uIiwiZGVwdGhQYWNraW5nIiwiZGl0aGVyaW5nIl07ZnVuY3Rpb24gYWxsb2NhdGVCb25lcyhvYmplY3Qpe3ZhciBza2VsZXRvbj1vYmplY3Quc2tlbGV0b247dmFyIGJvbmVzPXNrZWxldG9uLmJvbmVzO2lmKGNhcGFiaWxpdGllcy5mbG9hdFZlcnRleFRleHR1cmVzKXtyZXR1cm4gMTAyNDt9ZWxzZXsvLyBkZWZhdWx0IGZvciB3aGVuIG9iamVjdCBpcyBub3Qgc3BlY2lmaWVkCi8vICggZm9yIGV4YW1wbGUgd2hlbiBwcmVidWlsZGluZyBzaGFkZXIgdG8gYmUgdXNlZCB3aXRoIG11bHRpcGxlIG9iamVjdHMgKQovLwovLyAgLSBsZWF2ZSBzb21lIGV4dHJhIHNwYWNlIGZvciBvdGhlciB1bmlmb3JtcwovLyAgLSBsaW1pdCBoZXJlIGlzIEFOR0xFJ3MgMjU0IG1heCB1bmlmb3JtIHZlY3RvcnMKLy8gICAgKHVwIHRvIDU0IHNob3VsZCBiZSBzYWZlKQp2YXIgblZlcnRleFVuaWZvcm1zPWNhcGFiaWxpdGllcy5tYXhWZXJ0ZXhVbmlmb3Jtczt2YXIgblZlcnRleE1hdHJpY2VzPU1hdGguZmxvb3IoKG5WZXJ0ZXhVbmlmb3Jtcy0yMCkvNCk7dmFyIG1heEJvbmVzPU1hdGgubWluKG5WZXJ0ZXhNYXRyaWNlcyxib25lcy5sZW5ndGgpO2lmKG1heEJvbmVzPGJvbmVzLmxlbmd0aCl7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlcmVyOiBTa2VsZXRvbiBoYXMgJytib25lcy5sZW5ndGgrJyBib25lcy4gVGhpcyBHUFUgc3VwcG9ydHMgJyttYXhCb25lcysnLicpO3JldHVybiAwO31yZXR1cm4gbWF4Qm9uZXM7fX1mdW5jdGlvbiBnZXRUZXh0dXJlRW5jb2RpbmdGcm9tTWFwKG1hcCxnYW1tYU92ZXJyaWRlTGluZWFyKXt2YXIgZW5jb2Rpbmc7aWYoIW1hcCl7ZW5jb2Rpbmc9TGluZWFyRW5jb2Rpbmc7fWVsc2UgaWYobWFwLmlzVGV4dHVyZSl7ZW5jb2Rpbmc9bWFwLmVuY29kaW5nO31lbHNlIGlmKG1hcC5pc1dlYkdMUmVuZGVyVGFyZ2V0KXtjb25zb2xlLndhcm4oIlRIUkVFLldlYkdMUHJvZ3JhbXMuZ2V0VGV4dHVyZUVuY29kaW5nRnJvbU1hcDogZG9uJ3QgdXNlIHJlbmRlciB0YXJnZXRzIGFzIHRleHR1cmVzLiBVc2UgdGhlaXIgLnRleHR1cmUgcHJvcGVydHkgaW5zdGVhZC4iKTtlbmNvZGluZz1tYXAudGV4dHVyZS5lbmNvZGluZzt9Ly8gYWRkIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IGZvciBXZWJHTFJlbmRlcmVyLmdhbW1hSW5wdXQvZ2FtbWFPdXRwdXQgcGFyYW1ldGVyLCBzaG91bGQgcHJvYmFibHkgYmUgcmVtb3ZlZCBhdCBzb21lIHBvaW50LgppZihlbmNvZGluZz09PUxpbmVhckVuY29kaW5nJiZnYW1tYU92ZXJyaWRlTGluZWFyKXtlbmNvZGluZz1HYW1tYUVuY29kaW5nO31yZXR1cm4gZW5jb2Rpbmc7fXRoaXMuZ2V0UGFyYW1ldGVycz1mdW5jdGlvbihtYXRlcmlhbCxsaWdodHMsc2hhZG93cyxmb2csbkNsaXBQbGFuZXMsbkNsaXBJbnRlcnNlY3Rpb24sb2JqZWN0KXt2YXIgc2hhZGVySUQ9c2hhZGVySURzW21hdGVyaWFsLnR5cGVdOy8vIGhldXJpc3RpY3MgdG8gY3JlYXRlIHNoYWRlciBwYXJhbWV0ZXJzIGFjY29yZGluZyB0byBsaWdodHMgaW4gdGhlIHNjZW5lCi8vIChub3QgdG8gYmxvdyBvdmVyIG1heExpZ2h0cyBidWRnZXQpCnZhciBtYXhCb25lcz1vYmplY3QuaXNTa2lubmVkTWVzaD9hbGxvY2F0ZUJvbmVzKG9iamVjdCk6MDt2YXIgcHJlY2lzaW9uPWNhcGFiaWxpdGllcy5wcmVjaXNpb247aWYobWF0ZXJpYWwucHJlY2lzaW9uIT09bnVsbCl7cHJlY2lzaW9uPWNhcGFiaWxpdGllcy5nZXRNYXhQcmVjaXNpb24obWF0ZXJpYWwucHJlY2lzaW9uKTtpZihwcmVjaXNpb24hPT1tYXRlcmlhbC5wcmVjaXNpb24pe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xQcm9ncmFtLmdldFBhcmFtZXRlcnM6JyxtYXRlcmlhbC5wcmVjaXNpb24sJ25vdCBzdXBwb3J0ZWQsIHVzaW5nJyxwcmVjaXNpb24sJ2luc3RlYWQuJyk7fX12YXIgY3VycmVudFJlbmRlclRhcmdldD1yZW5kZXJlci5nZXRSZW5kZXJUYXJnZXQoKTt2YXIgcGFyYW1ldGVycz17c2hhZGVySUQ6c2hhZGVySUQscHJlY2lzaW9uOnByZWNpc2lvbixzdXBwb3J0c1ZlcnRleFRleHR1cmVzOmNhcGFiaWxpdGllcy52ZXJ0ZXhUZXh0dXJlcyxvdXRwdXRFbmNvZGluZzpnZXRUZXh0dXJlRW5jb2RpbmdGcm9tTWFwKCFjdXJyZW50UmVuZGVyVGFyZ2V0P251bGw6Y3VycmVudFJlbmRlclRhcmdldC50ZXh0dXJlLHJlbmRlcmVyLmdhbW1hT3V0cHV0KSxtYXA6ISFtYXRlcmlhbC5tYXAsbWFwRW5jb2Rpbmc6Z2V0VGV4dHVyZUVuY29kaW5nRnJvbU1hcChtYXRlcmlhbC5tYXAscmVuZGVyZXIuZ2FtbWFJbnB1dCksZW52TWFwOiEhbWF0ZXJpYWwuZW52TWFwLGVudk1hcE1vZGU6bWF0ZXJpYWwuZW52TWFwJiZtYXRlcmlhbC5lbnZNYXAubWFwcGluZyxlbnZNYXBFbmNvZGluZzpnZXRUZXh0dXJlRW5jb2RpbmdGcm9tTWFwKG1hdGVyaWFsLmVudk1hcCxyZW5kZXJlci5nYW1tYUlucHV0KSxlbnZNYXBDdWJlVVY6ISFtYXRlcmlhbC5lbnZNYXAmJihtYXRlcmlhbC5lbnZNYXAubWFwcGluZz09PUN1YmVVVlJlZmxlY3Rpb25NYXBwaW5nfHxtYXRlcmlhbC5lbnZNYXAubWFwcGluZz09PUN1YmVVVlJlZnJhY3Rpb25NYXBwaW5nKSxsaWdodE1hcDohIW1hdGVyaWFsLmxpZ2h0TWFwLGFvTWFwOiEhbWF0ZXJpYWwuYW9NYXAsZW1pc3NpdmVNYXA6ISFtYXRlcmlhbC5lbWlzc2l2ZU1hcCxlbWlzc2l2ZU1hcEVuY29kaW5nOmdldFRleHR1cmVFbmNvZGluZ0Zyb21NYXAobWF0ZXJpYWwuZW1pc3NpdmVNYXAscmVuZGVyZXIuZ2FtbWFJbnB1dCksYnVtcE1hcDohIW1hdGVyaWFsLmJ1bXBNYXAsbm9ybWFsTWFwOiEhbWF0ZXJpYWwubm9ybWFsTWFwLGRpc3BsYWNlbWVudE1hcDohIW1hdGVyaWFsLmRpc3BsYWNlbWVudE1hcCxyb3VnaG5lc3NNYXA6ISFtYXRlcmlhbC5yb3VnaG5lc3NNYXAsbWV0YWxuZXNzTWFwOiEhbWF0ZXJpYWwubWV0YWxuZXNzTWFwLHNwZWN1bGFyTWFwOiEhbWF0ZXJpYWwuc3BlY3VsYXJNYXAsYWxwaGFNYXA6ISFtYXRlcmlhbC5hbHBoYU1hcCxncmFkaWVudE1hcDohIW1hdGVyaWFsLmdyYWRpZW50TWFwLGNvbWJpbmU6bWF0ZXJpYWwuY29tYmluZSx2ZXJ0ZXhDb2xvcnM6bWF0ZXJpYWwudmVydGV4Q29sb3JzLGZvZzohIWZvZyx1c2VGb2c6bWF0ZXJpYWwuZm9nLGZvZ0V4cDpmb2cmJmZvZy5pc0ZvZ0V4cDIsZmxhdFNoYWRpbmc6bWF0ZXJpYWwuZmxhdFNoYWRpbmcsc2l6ZUF0dGVudWF0aW9uOm1hdGVyaWFsLnNpemVBdHRlbnVhdGlvbixsb2dhcml0aG1pY0RlcHRoQnVmZmVyOmNhcGFiaWxpdGllcy5sb2dhcml0aG1pY0RlcHRoQnVmZmVyLHNraW5uaW5nOm1hdGVyaWFsLnNraW5uaW5nJiZtYXhCb25lcz4wLG1heEJvbmVzOm1heEJvbmVzLHVzZVZlcnRleFRleHR1cmU6Y2FwYWJpbGl0aWVzLmZsb2F0VmVydGV4VGV4dHVyZXMsbW9ycGhUYXJnZXRzOm1hdGVyaWFsLm1vcnBoVGFyZ2V0cyxtb3JwaE5vcm1hbHM6bWF0ZXJpYWwubW9ycGhOb3JtYWxzLG1heE1vcnBoVGFyZ2V0czpyZW5kZXJlci5tYXhNb3JwaFRhcmdldHMsbWF4TW9ycGhOb3JtYWxzOnJlbmRlcmVyLm1heE1vcnBoTm9ybWFscyxudW1EaXJMaWdodHM6bGlnaHRzLmRpcmVjdGlvbmFsLmxlbmd0aCxudW1Qb2ludExpZ2h0czpsaWdodHMucG9pbnQubGVuZ3RoLG51bVNwb3RMaWdodHM6bGlnaHRzLnNwb3QubGVuZ3RoLG51bVJlY3RBcmVhTGlnaHRzOmxpZ2h0cy5yZWN0QXJlYS5sZW5ndGgsbnVtSGVtaUxpZ2h0czpsaWdodHMuaGVtaS5sZW5ndGgsbnVtQ2xpcHBpbmdQbGFuZXM6bkNsaXBQbGFuZXMsbnVtQ2xpcEludGVyc2VjdGlvbjpuQ2xpcEludGVyc2VjdGlvbixkaXRoZXJpbmc6bWF0ZXJpYWwuZGl0aGVyaW5nLHNoYWRvd01hcEVuYWJsZWQ6cmVuZGVyZXIuc2hhZG93TWFwLmVuYWJsZWQmJm9iamVjdC5yZWNlaXZlU2hhZG93JiZzaGFkb3dzLmxlbmd0aD4wLHNoYWRvd01hcFR5cGU6cmVuZGVyZXIuc2hhZG93TWFwLnR5cGUsdG9uZU1hcHBpbmc6cmVuZGVyZXIudG9uZU1hcHBpbmcscGh5c2ljYWxseUNvcnJlY3RMaWdodHM6cmVuZGVyZXIucGh5c2ljYWxseUNvcnJlY3RMaWdodHMscHJlbXVsdGlwbGllZEFscGhhOm1hdGVyaWFsLnByZW11bHRpcGxpZWRBbHBoYSxhbHBoYVRlc3Q6bWF0ZXJpYWwuYWxwaGFUZXN0LGRvdWJsZVNpZGVkOm1hdGVyaWFsLnNpZGU9PT1Eb3VibGVTaWRlLGZsaXBTaWRlZDptYXRlcmlhbC5zaWRlPT09QmFja1NpZGUsZGVwdGhQYWNraW5nOm1hdGVyaWFsLmRlcHRoUGFja2luZyE9PXVuZGVmaW5lZD9tYXRlcmlhbC5kZXB0aFBhY2tpbmc6ZmFsc2V9O3JldHVybiBwYXJhbWV0ZXJzO307dGhpcy5nZXRQcm9ncmFtQ29kZT1mdW5jdGlvbihtYXRlcmlhbCxwYXJhbWV0ZXJzKXt2YXIgYXJyYXk9W107aWYocGFyYW1ldGVycy5zaGFkZXJJRCl7YXJyYXkucHVzaChwYXJhbWV0ZXJzLnNoYWRlcklEKTt9ZWxzZXthcnJheS5wdXNoKG1hdGVyaWFsLmZyYWdtZW50U2hhZGVyKTthcnJheS5wdXNoKG1hdGVyaWFsLnZlcnRleFNoYWRlcik7fWlmKG1hdGVyaWFsLmRlZmluZXMhPT11bmRlZmluZWQpe2Zvcih2YXIgbmFtZSBpbiBtYXRlcmlhbC5kZWZpbmVzKXthcnJheS5wdXNoKG5hbWUpO2FycmF5LnB1c2gobWF0ZXJpYWwuZGVmaW5lc1tuYW1lXSk7fX1mb3IodmFyIGk9MDtpPHBhcmFtZXRlck5hbWVzLmxlbmd0aDtpKyspe2FycmF5LnB1c2gocGFyYW1ldGVyc1twYXJhbWV0ZXJOYW1lc1tpXV0pO31hcnJheS5wdXNoKG1hdGVyaWFsLm9uQmVmb3JlQ29tcGlsZS50b1N0cmluZygpKTthcnJheS5wdXNoKHJlbmRlcmVyLmdhbW1hT3V0cHV0KTtyZXR1cm4gYXJyYXkuam9pbigpO307dGhpcy5hY3F1aXJlUHJvZ3JhbT1mdW5jdGlvbihtYXRlcmlhbCxzaGFkZXIscGFyYW1ldGVycyxjb2RlKXt2YXIgcHJvZ3JhbTsvLyBDaGVjayBpZiBjb2RlIGhhcyBiZWVuIGFscmVhZHkgY29tcGlsZWQKZm9yKHZhciBwPTAscGw9cHJvZ3JhbXMubGVuZ3RoO3A8cGw7cCsrKXt2YXIgcHJvZ3JhbUluZm89cHJvZ3JhbXNbcF07aWYocHJvZ3JhbUluZm8uY29kZT09PWNvZGUpe3Byb2dyYW09cHJvZ3JhbUluZm87Kytwcm9ncmFtLnVzZWRUaW1lczticmVhazt9fWlmKHByb2dyYW09PT11bmRlZmluZWQpe3Byb2dyYW09bmV3IFdlYkdMUHJvZ3JhbShyZW5kZXJlcixleHRlbnNpb25zLGNvZGUsbWF0ZXJpYWwsc2hhZGVyLHBhcmFtZXRlcnMpO3Byb2dyYW1zLnB1c2gocHJvZ3JhbSk7fXJldHVybiBwcm9ncmFtO307dGhpcy5yZWxlYXNlUHJvZ3JhbT1mdW5jdGlvbihwcm9ncmFtKXtpZigtLXByb2dyYW0udXNlZFRpbWVzPT09MCl7Ly8gUmVtb3ZlIGZyb20gdW5vcmRlcmVkIHNldAp2YXIgaT1wcm9ncmFtcy5pbmRleE9mKHByb2dyYW0pO3Byb2dyYW1zW2ldPXByb2dyYW1zW3Byb2dyYW1zLmxlbmd0aC0xXTtwcm9ncmFtcy5wb3AoKTsvLyBGcmVlIFdlYkdMIHJlc291cmNlcwpwcm9ncmFtLmRlc3Ryb3koKTt9fTsvLyBFeHBvc2VkIGZvciByZXNvdXJjZSBtb25pdG9yaW5nICYgZXJyb3IgZmVlZGJhY2sgdmlhIHJlbmRlcmVyLmluZm86CnRoaXMucHJvZ3JhbXM9cHJvZ3JhbXM7fS8qKgogKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tLwogKi9mdW5jdGlvbiBXZWJHTFRleHR1cmVzKF9nbCxleHRlbnNpb25zLHN0YXRlLHByb3BlcnRpZXMsY2FwYWJpbGl0aWVzLHV0aWxzLGluZm9NZW1vcnkpe3ZhciBfaXNXZWJHTDI9dHlwZW9mIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQhPT0ndW5kZWZpbmVkJyYmX2dsIGluc3RhbmNlb2Ygd2luZG93LldlYkdMMlJlbmRlcmluZ0NvbnRleHQ7dmFyIF92aWRlb1RleHR1cmVzPXt9Oy8vCmZ1bmN0aW9uIGNsYW1wVG9NYXhTaXplKGltYWdlLG1heFNpemUpe2lmKGltYWdlLndpZHRoPm1heFNpemV8fGltYWdlLmhlaWdodD5tYXhTaXplKXsvLyBXYXJuaW5nOiBTY2FsaW5nIHRocm91Z2ggdGhlIGNhbnZhcyB3aWxsIG9ubHkgd29yayB3aXRoIGltYWdlcyB0aGF0IHVzZQovLyBwcmVtdWx0aXBsaWVkIGFscGhhLgp2YXIgc2NhbGU9bWF4U2l6ZS9NYXRoLm1heChpbWFnZS53aWR0aCxpbWFnZS5oZWlnaHQpO3ZhciBjYW52YXM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sJywnY2FudmFzJyk7Y2FudmFzLndpZHRoPU1hdGguZmxvb3IoaW1hZ2Uud2lkdGgqc2NhbGUpO2NhbnZhcy5oZWlnaHQ9TWF0aC5mbG9vcihpbWFnZS5oZWlnaHQqc2NhbGUpO3ZhciBjb250ZXh0PWNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO2NvbnRleHQuZHJhd0ltYWdlKGltYWdlLDAsMCxpbWFnZS53aWR0aCxpbWFnZS5oZWlnaHQsMCwwLGNhbnZhcy53aWR0aCxjYW52YXMuaGVpZ2h0KTtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyZXI6IGltYWdlIGlzIHRvbyBiaWcgKCcraW1hZ2Uud2lkdGgrJ3gnK2ltYWdlLmhlaWdodCsnKS4gUmVzaXplZCB0byAnK2NhbnZhcy53aWR0aCsneCcrY2FudmFzLmhlaWdodCxpbWFnZSk7cmV0dXJuIGNhbnZhczt9cmV0dXJuIGltYWdlO31mdW5jdGlvbiBpc1Bvd2VyT2ZUd28oaW1hZ2Upe3JldHVybiBfTWF0aC5pc1Bvd2VyT2ZUd28oaW1hZ2Uud2lkdGgpJiZfTWF0aC5pc1Bvd2VyT2ZUd28oaW1hZ2UuaGVpZ2h0KTt9ZnVuY3Rpb24gbWFrZVBvd2VyT2ZUd28oaW1hZ2Upe2lmKGltYWdlIGluc3RhbmNlb2YgSFRNTEltYWdlRWxlbWVudHx8aW1hZ2UgaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudHx8aW1hZ2UgaW5zdGFuY2VvZiBJbWFnZUJpdG1hcCl7dmFyIGNhbnZhcz1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwnLCdjYW52YXMnKTtjYW52YXMud2lkdGg9X01hdGguZmxvb3JQb3dlck9mVHdvKGltYWdlLndpZHRoKTtjYW52YXMuaGVpZ2h0PV9NYXRoLmZsb29yUG93ZXJPZlR3byhpbWFnZS5oZWlnaHQpO3ZhciBjb250ZXh0PWNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO2NvbnRleHQuZHJhd0ltYWdlKGltYWdlLDAsMCxjYW52YXMud2lkdGgsY2FudmFzLmhlaWdodCk7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlcmVyOiBpbWFnZSBpcyBub3QgcG93ZXIgb2YgdHdvICgnK2ltYWdlLndpZHRoKyd4JytpbWFnZS5oZWlnaHQrJykuIFJlc2l6ZWQgdG8gJytjYW52YXMud2lkdGgrJ3gnK2NhbnZhcy5oZWlnaHQsaW1hZ2UpO3JldHVybiBjYW52YXM7fXJldHVybiBpbWFnZTt9ZnVuY3Rpb24gdGV4dHVyZU5lZWRzUG93ZXJPZlR3byh0ZXh0dXJlKXtyZXR1cm4gdGV4dHVyZS53cmFwUyE9PUNsYW1wVG9FZGdlV3JhcHBpbmd8fHRleHR1cmUud3JhcFQhPT1DbGFtcFRvRWRnZVdyYXBwaW5nfHx0ZXh0dXJlLm1pbkZpbHRlciE9PU5lYXJlc3RGaWx0ZXImJnRleHR1cmUubWluRmlsdGVyIT09TGluZWFyRmlsdGVyO31mdW5jdGlvbiB0ZXh0dXJlTmVlZHNHZW5lcmF0ZU1pcG1hcHModGV4dHVyZSxpc1Bvd2VyT2ZUd28pe3JldHVybiB0ZXh0dXJlLmdlbmVyYXRlTWlwbWFwcyYmaXNQb3dlck9mVHdvJiZ0ZXh0dXJlLm1pbkZpbHRlciE9PU5lYXJlc3RGaWx0ZXImJnRleHR1cmUubWluRmlsdGVyIT09TGluZWFyRmlsdGVyO30vLyBGYWxsYmFjayBmaWx0ZXJzIGZvciBub24tcG93ZXItb2YtMiB0ZXh0dXJlcwpmdW5jdGlvbiBmaWx0ZXJGYWxsYmFjayhmKXtpZihmPT09TmVhcmVzdEZpbHRlcnx8Zj09PU5lYXJlc3RNaXBNYXBOZWFyZXN0RmlsdGVyfHxmPT09TmVhcmVzdE1pcE1hcExpbmVhckZpbHRlcil7cmV0dXJuIF9nbC5ORUFSRVNUO31yZXR1cm4gX2dsLkxJTkVBUjt9Ly8KZnVuY3Rpb24gb25UZXh0dXJlRGlzcG9zZShldmVudCl7dmFyIHRleHR1cmU9ZXZlbnQudGFyZ2V0O3RleHR1cmUucmVtb3ZlRXZlbnRMaXN0ZW5lcignZGlzcG9zZScsb25UZXh0dXJlRGlzcG9zZSk7ZGVhbGxvY2F0ZVRleHR1cmUodGV4dHVyZSk7aWYodGV4dHVyZS5pc1ZpZGVvVGV4dHVyZSl7ZGVsZXRlIF92aWRlb1RleHR1cmVzW3RleHR1cmUuaWRdO31pbmZvTWVtb3J5LnRleHR1cmVzLS07fWZ1bmN0aW9uIG9uUmVuZGVyVGFyZ2V0RGlzcG9zZShldmVudCl7dmFyIHJlbmRlclRhcmdldD1ldmVudC50YXJnZXQ7cmVuZGVyVGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Rpc3Bvc2UnLG9uUmVuZGVyVGFyZ2V0RGlzcG9zZSk7ZGVhbGxvY2F0ZVJlbmRlclRhcmdldChyZW5kZXJUYXJnZXQpO2luZm9NZW1vcnkudGV4dHVyZXMtLTt9Ly8KZnVuY3Rpb24gZGVhbGxvY2F0ZVRleHR1cmUodGV4dHVyZSl7dmFyIHRleHR1cmVQcm9wZXJ0aWVzPXByb3BlcnRpZXMuZ2V0KHRleHR1cmUpO2lmKHRleHR1cmUuaW1hZ2UmJnRleHR1cmVQcm9wZXJ0aWVzLl9faW1hZ2VfX3dlYmdsVGV4dHVyZUN1YmUpey8vIGN1YmUgdGV4dHVyZQpfZ2wuZGVsZXRlVGV4dHVyZSh0ZXh0dXJlUHJvcGVydGllcy5fX2ltYWdlX193ZWJnbFRleHR1cmVDdWJlKTt9ZWxzZXsvLyAyRCB0ZXh0dXJlCmlmKHRleHR1cmVQcm9wZXJ0aWVzLl9fd2ViZ2xJbml0PT09dW5kZWZpbmVkKXJldHVybjtfZ2wuZGVsZXRlVGV4dHVyZSh0ZXh0dXJlUHJvcGVydGllcy5fX3dlYmdsVGV4dHVyZSk7fS8vIHJlbW92ZSBhbGwgd2ViZ2wgcHJvcGVydGllcwpwcm9wZXJ0aWVzLnJlbW92ZSh0ZXh0dXJlKTt9ZnVuY3Rpb24gZGVhbGxvY2F0ZVJlbmRlclRhcmdldChyZW5kZXJUYXJnZXQpe3ZhciByZW5kZXJUYXJnZXRQcm9wZXJ0aWVzPXByb3BlcnRpZXMuZ2V0KHJlbmRlclRhcmdldCk7dmFyIHRleHR1cmVQcm9wZXJ0aWVzPXByb3BlcnRpZXMuZ2V0KHJlbmRlclRhcmdldC50ZXh0dXJlKTtpZighcmVuZGVyVGFyZ2V0KXJldHVybjtpZih0ZXh0dXJlUHJvcGVydGllcy5fX3dlYmdsVGV4dHVyZSE9PXVuZGVmaW5lZCl7X2dsLmRlbGV0ZVRleHR1cmUodGV4dHVyZVByb3BlcnRpZXMuX193ZWJnbFRleHR1cmUpO31pZihyZW5kZXJUYXJnZXQuZGVwdGhUZXh0dXJlKXtyZW5kZXJUYXJnZXQuZGVwdGhUZXh0dXJlLmRpc3Bvc2UoKTt9aWYocmVuZGVyVGFyZ2V0LmlzV2ViR0xSZW5kZXJUYXJnZXRDdWJlKXtmb3IodmFyIGk9MDtpPDY7aSsrKXtfZ2wuZGVsZXRlRnJhbWVidWZmZXIocmVuZGVyVGFyZ2V0UHJvcGVydGllcy5fX3dlYmdsRnJhbWVidWZmZXJbaV0pO2lmKHJlbmRlclRhcmdldFByb3BlcnRpZXMuX193ZWJnbERlcHRoYnVmZmVyKV9nbC5kZWxldGVSZW5kZXJidWZmZXIocmVuZGVyVGFyZ2V0UHJvcGVydGllcy5fX3dlYmdsRGVwdGhidWZmZXJbaV0pO319ZWxzZXtfZ2wuZGVsZXRlRnJhbWVidWZmZXIocmVuZGVyVGFyZ2V0UHJvcGVydGllcy5fX3dlYmdsRnJhbWVidWZmZXIpO2lmKHJlbmRlclRhcmdldFByb3BlcnRpZXMuX193ZWJnbERlcHRoYnVmZmVyKV9nbC5kZWxldGVSZW5kZXJidWZmZXIocmVuZGVyVGFyZ2V0UHJvcGVydGllcy5fX3dlYmdsRGVwdGhidWZmZXIpO31wcm9wZXJ0aWVzLnJlbW92ZShyZW5kZXJUYXJnZXQudGV4dHVyZSk7cHJvcGVydGllcy5yZW1vdmUocmVuZGVyVGFyZ2V0KTt9Ly8KZnVuY3Rpb24gc2V0VGV4dHVyZTJEKHRleHR1cmUsc2xvdCl7dmFyIHRleHR1cmVQcm9wZXJ0aWVzPXByb3BlcnRpZXMuZ2V0KHRleHR1cmUpO2lmKHRleHR1cmUudmVyc2lvbj4wJiZ0ZXh0dXJlUHJvcGVydGllcy5fX3ZlcnNpb24hPT10ZXh0dXJlLnZlcnNpb24pe3ZhciBpbWFnZT10ZXh0dXJlLmltYWdlO2lmKGltYWdlPT09dW5kZWZpbmVkKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyZXI6IFRleHR1cmUgbWFya2VkIGZvciB1cGRhdGUgYnV0IGltYWdlIGlzIHVuZGVmaW5lZCcsdGV4dHVyZSk7fWVsc2UgaWYoaW1hZ2UuY29tcGxldGU9PT1mYWxzZSl7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlcmVyOiBUZXh0dXJlIG1hcmtlZCBmb3IgdXBkYXRlIGJ1dCBpbWFnZSBpcyBpbmNvbXBsZXRlJyx0ZXh0dXJlKTt9ZWxzZXt1cGxvYWRUZXh0dXJlKHRleHR1cmVQcm9wZXJ0aWVzLHRleHR1cmUsc2xvdCk7cmV0dXJuO319c3RhdGUuYWN0aXZlVGV4dHVyZShfZ2wuVEVYVFVSRTArc2xvdCk7c3RhdGUuYmluZFRleHR1cmUoX2dsLlRFWFRVUkVfMkQsdGV4dHVyZVByb3BlcnRpZXMuX193ZWJnbFRleHR1cmUpO31mdW5jdGlvbiBzZXRUZXh0dXJlQ3ViZSh0ZXh0dXJlLHNsb3Qpe3ZhciB0ZXh0dXJlUHJvcGVydGllcz1wcm9wZXJ0aWVzLmdldCh0ZXh0dXJlKTtpZih0ZXh0dXJlLmltYWdlLmxlbmd0aD09PTYpe2lmKHRleHR1cmUudmVyc2lvbj4wJiZ0ZXh0dXJlUHJvcGVydGllcy5fX3ZlcnNpb24hPT10ZXh0dXJlLnZlcnNpb24pe2lmKCF0ZXh0dXJlUHJvcGVydGllcy5fX2ltYWdlX193ZWJnbFRleHR1cmVDdWJlKXt0ZXh0dXJlLmFkZEV2ZW50TGlzdGVuZXIoJ2Rpc3Bvc2UnLG9uVGV4dHVyZURpc3Bvc2UpO3RleHR1cmVQcm9wZXJ0aWVzLl9faW1hZ2VfX3dlYmdsVGV4dHVyZUN1YmU9X2dsLmNyZWF0ZVRleHR1cmUoKTtpbmZvTWVtb3J5LnRleHR1cmVzKys7fXN0YXRlLmFjdGl2ZVRleHR1cmUoX2dsLlRFWFRVUkUwK3Nsb3QpO3N0YXRlLmJpbmRUZXh0dXJlKF9nbC5URVhUVVJFX0NVQkVfTUFQLHRleHR1cmVQcm9wZXJ0aWVzLl9faW1hZ2VfX3dlYmdsVGV4dHVyZUN1YmUpO19nbC5waXhlbFN0b3JlaShfZ2wuVU5QQUNLX0ZMSVBfWV9XRUJHTCx0ZXh0dXJlLmZsaXBZKTt2YXIgaXNDb21wcmVzc2VkPXRleHR1cmUmJnRleHR1cmUuaXNDb21wcmVzc2VkVGV4dHVyZTt2YXIgaXNEYXRhVGV4dHVyZT10ZXh0dXJlLmltYWdlWzBdJiZ0ZXh0dXJlLmltYWdlWzBdLmlzRGF0YVRleHR1cmU7dmFyIGN1YmVJbWFnZT1bXTtmb3IodmFyIGk9MDtpPDY7aSsrKXtpZighaXNDb21wcmVzc2VkJiYhaXNEYXRhVGV4dHVyZSl7Y3ViZUltYWdlW2ldPWNsYW1wVG9NYXhTaXplKHRleHR1cmUuaW1hZ2VbaV0sY2FwYWJpbGl0aWVzLm1heEN1YmVtYXBTaXplKTt9ZWxzZXtjdWJlSW1hZ2VbaV09aXNEYXRhVGV4dHVyZT90ZXh0dXJlLmltYWdlW2ldLmltYWdlOnRleHR1cmUuaW1hZ2VbaV07fX12YXIgaW1hZ2U9Y3ViZUltYWdlWzBdLGlzUG93ZXJPZlR3b0ltYWdlPWlzUG93ZXJPZlR3byhpbWFnZSksZ2xGb3JtYXQ9dXRpbHMuY29udmVydCh0ZXh0dXJlLmZvcm1hdCksZ2xUeXBlPXV0aWxzLmNvbnZlcnQodGV4dHVyZS50eXBlKTtzZXRUZXh0dXJlUGFyYW1ldGVycyhfZ2wuVEVYVFVSRV9DVUJFX01BUCx0ZXh0dXJlLGlzUG93ZXJPZlR3b0ltYWdlKTtmb3IodmFyIGk9MDtpPDY7aSsrKXtpZighaXNDb21wcmVzc2VkKXtpZihpc0RhdGFUZXh0dXJlKXtzdGF0ZS50ZXhJbWFnZTJEKF9nbC5URVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1graSwwLGdsRm9ybWF0LGN1YmVJbWFnZVtpXS53aWR0aCxjdWJlSW1hZ2VbaV0uaGVpZ2h0LDAsZ2xGb3JtYXQsZ2xUeXBlLGN1YmVJbWFnZVtpXS5kYXRhKTt9ZWxzZXtzdGF0ZS50ZXhJbWFnZTJEKF9nbC5URVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1graSwwLGdsRm9ybWF0LGdsRm9ybWF0LGdsVHlwZSxjdWJlSW1hZ2VbaV0pO319ZWxzZXt2YXIgbWlwbWFwLG1pcG1hcHM9Y3ViZUltYWdlW2ldLm1pcG1hcHM7Zm9yKHZhciBqPTAsamw9bWlwbWFwcy5sZW5ndGg7ajxqbDtqKyspe21pcG1hcD1taXBtYXBzW2pdO2lmKHRleHR1cmUuZm9ybWF0IT09UkdCQUZvcm1hdCYmdGV4dHVyZS5mb3JtYXQhPT1SR0JGb3JtYXQpe2lmKHN0YXRlLmdldENvbXByZXNzZWRUZXh0dXJlRm9ybWF0cygpLmluZGV4T2YoZ2xGb3JtYXQpPi0xKXtzdGF0ZS5jb21wcmVzc2VkVGV4SW1hZ2UyRChfZ2wuVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9YK2ksaixnbEZvcm1hdCxtaXBtYXAud2lkdGgsbWlwbWFwLmhlaWdodCwwLG1pcG1hcC5kYXRhKTt9ZWxzZXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyZXI6IEF0dGVtcHQgdG8gbG9hZCB1bnN1cHBvcnRlZCBjb21wcmVzc2VkIHRleHR1cmUgZm9ybWF0IGluIC5zZXRUZXh0dXJlQ3ViZSgpJyk7fX1lbHNle3N0YXRlLnRleEltYWdlMkQoX2dsLlRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWCtpLGosZ2xGb3JtYXQsbWlwbWFwLndpZHRoLG1pcG1hcC5oZWlnaHQsMCxnbEZvcm1hdCxnbFR5cGUsbWlwbWFwLmRhdGEpO319fX1pZih0ZXh0dXJlTmVlZHNHZW5lcmF0ZU1pcG1hcHModGV4dHVyZSxpc1Bvd2VyT2ZUd29JbWFnZSkpe19nbC5nZW5lcmF0ZU1pcG1hcChfZ2wuVEVYVFVSRV9DVUJFX01BUCk7fXRleHR1cmVQcm9wZXJ0aWVzLl9fdmVyc2lvbj10ZXh0dXJlLnZlcnNpb247aWYodGV4dHVyZS5vblVwZGF0ZSl0ZXh0dXJlLm9uVXBkYXRlKHRleHR1cmUpO31lbHNle3N0YXRlLmFjdGl2ZVRleHR1cmUoX2dsLlRFWFRVUkUwK3Nsb3QpO3N0YXRlLmJpbmRUZXh0dXJlKF9nbC5URVhUVVJFX0NVQkVfTUFQLHRleHR1cmVQcm9wZXJ0aWVzLl9faW1hZ2VfX3dlYmdsVGV4dHVyZUN1YmUpO319fWZ1bmN0aW9uIHNldFRleHR1cmVDdWJlRHluYW1pYyh0ZXh0dXJlLHNsb3Qpe3N0YXRlLmFjdGl2ZVRleHR1cmUoX2dsLlRFWFRVUkUwK3Nsb3QpO3N0YXRlLmJpbmRUZXh0dXJlKF9nbC5URVhUVVJFX0NVQkVfTUFQLHByb3BlcnRpZXMuZ2V0KHRleHR1cmUpLl9fd2ViZ2xUZXh0dXJlKTt9ZnVuY3Rpb24gc2V0VGV4dHVyZVBhcmFtZXRlcnModGV4dHVyZVR5cGUsdGV4dHVyZSxpc1Bvd2VyT2ZUd29JbWFnZSl7dmFyIGV4dGVuc2lvbjtpZihpc1Bvd2VyT2ZUd29JbWFnZSl7X2dsLnRleFBhcmFtZXRlcmkodGV4dHVyZVR5cGUsX2dsLlRFWFRVUkVfV1JBUF9TLHV0aWxzLmNvbnZlcnQodGV4dHVyZS53cmFwUykpO19nbC50ZXhQYXJhbWV0ZXJpKHRleHR1cmVUeXBlLF9nbC5URVhUVVJFX1dSQVBfVCx1dGlscy5jb252ZXJ0KHRleHR1cmUud3JhcFQpKTtfZ2wudGV4UGFyYW1ldGVyaSh0ZXh0dXJlVHlwZSxfZ2wuVEVYVFVSRV9NQUdfRklMVEVSLHV0aWxzLmNvbnZlcnQodGV4dHVyZS5tYWdGaWx0ZXIpKTtfZ2wudGV4UGFyYW1ldGVyaSh0ZXh0dXJlVHlwZSxfZ2wuVEVYVFVSRV9NSU5fRklMVEVSLHV0aWxzLmNvbnZlcnQodGV4dHVyZS5taW5GaWx0ZXIpKTt9ZWxzZXtfZ2wudGV4UGFyYW1ldGVyaSh0ZXh0dXJlVHlwZSxfZ2wuVEVYVFVSRV9XUkFQX1MsX2dsLkNMQU1QX1RPX0VER0UpO19nbC50ZXhQYXJhbWV0ZXJpKHRleHR1cmVUeXBlLF9nbC5URVhUVVJFX1dSQVBfVCxfZ2wuQ0xBTVBfVE9fRURHRSk7aWYodGV4dHVyZS53cmFwUyE9PUNsYW1wVG9FZGdlV3JhcHBpbmd8fHRleHR1cmUud3JhcFQhPT1DbGFtcFRvRWRnZVdyYXBwaW5nKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyZXI6IFRleHR1cmUgaXMgbm90IHBvd2VyIG9mIHR3by4gVGV4dHVyZS53cmFwUyBhbmQgVGV4dHVyZS53cmFwVCBzaG91bGQgYmUgc2V0IHRvIFRIUkVFLkNsYW1wVG9FZGdlV3JhcHBpbmcuJyx0ZXh0dXJlKTt9X2dsLnRleFBhcmFtZXRlcmkodGV4dHVyZVR5cGUsX2dsLlRFWFRVUkVfTUFHX0ZJTFRFUixmaWx0ZXJGYWxsYmFjayh0ZXh0dXJlLm1hZ0ZpbHRlcikpO19nbC50ZXhQYXJhbWV0ZXJpKHRleHR1cmVUeXBlLF9nbC5URVhUVVJFX01JTl9GSUxURVIsZmlsdGVyRmFsbGJhY2sodGV4dHVyZS5taW5GaWx0ZXIpKTtpZih0ZXh0dXJlLm1pbkZpbHRlciE9PU5lYXJlc3RGaWx0ZXImJnRleHR1cmUubWluRmlsdGVyIT09TGluZWFyRmlsdGVyKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyZXI6IFRleHR1cmUgaXMgbm90IHBvd2VyIG9mIHR3by4gVGV4dHVyZS5taW5GaWx0ZXIgc2hvdWxkIGJlIHNldCB0byBUSFJFRS5OZWFyZXN0RmlsdGVyIG9yIFRIUkVFLkxpbmVhckZpbHRlci4nLHRleHR1cmUpO319ZXh0ZW5zaW9uPWV4dGVuc2lvbnMuZ2V0KCdFWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWMnKTtpZihleHRlbnNpb24pe2lmKHRleHR1cmUudHlwZT09PUZsb2F0VHlwZSYmZXh0ZW5zaW9ucy5nZXQoJ09FU190ZXh0dXJlX2Zsb2F0X2xpbmVhcicpPT09bnVsbClyZXR1cm47aWYodGV4dHVyZS50eXBlPT09SGFsZkZsb2F0VHlwZSYmZXh0ZW5zaW9ucy5nZXQoJ09FU190ZXh0dXJlX2hhbGZfZmxvYXRfbGluZWFyJyk9PT1udWxsKXJldHVybjtpZih0ZXh0dXJlLmFuaXNvdHJvcHk+MXx8cHJvcGVydGllcy5nZXQodGV4dHVyZSkuX19jdXJyZW50QW5pc290cm9weSl7X2dsLnRleFBhcmFtZXRlcmYodGV4dHVyZVR5cGUsZXh0ZW5zaW9uLlRFWFRVUkVfTUFYX0FOSVNPVFJPUFlfRVhULE1hdGgubWluKHRleHR1cmUuYW5pc290cm9weSxjYXBhYmlsaXRpZXMuZ2V0TWF4QW5pc290cm9weSgpKSk7cHJvcGVydGllcy5nZXQodGV4dHVyZSkuX19jdXJyZW50QW5pc290cm9weT10ZXh0dXJlLmFuaXNvdHJvcHk7fX19ZnVuY3Rpb24gdXBsb2FkVGV4dHVyZSh0ZXh0dXJlUHJvcGVydGllcyx0ZXh0dXJlLHNsb3Qpe2lmKHRleHR1cmVQcm9wZXJ0aWVzLl9fd2ViZ2xJbml0PT09dW5kZWZpbmVkKXt0ZXh0dXJlUHJvcGVydGllcy5fX3dlYmdsSW5pdD10cnVlO3RleHR1cmUuYWRkRXZlbnRMaXN0ZW5lcignZGlzcG9zZScsb25UZXh0dXJlRGlzcG9zZSk7dGV4dHVyZVByb3BlcnRpZXMuX193ZWJnbFRleHR1cmU9X2dsLmNyZWF0ZVRleHR1cmUoKTtpZih0ZXh0dXJlLmlzVmlkZW9UZXh0dXJlKXtfdmlkZW9UZXh0dXJlc1t0ZXh0dXJlLmlkXT10ZXh0dXJlO31pbmZvTWVtb3J5LnRleHR1cmVzKys7fXN0YXRlLmFjdGl2ZVRleHR1cmUoX2dsLlRFWFRVUkUwK3Nsb3QpO3N0YXRlLmJpbmRUZXh0dXJlKF9nbC5URVhUVVJFXzJELHRleHR1cmVQcm9wZXJ0aWVzLl9fd2ViZ2xUZXh0dXJlKTtfZ2wucGl4ZWxTdG9yZWkoX2dsLlVOUEFDS19GTElQX1lfV0VCR0wsdGV4dHVyZS5mbGlwWSk7X2dsLnBpeGVsU3RvcmVpKF9nbC5VTlBBQ0tfUFJFTVVMVElQTFlfQUxQSEFfV0VCR0wsdGV4dHVyZS5wcmVtdWx0aXBseUFscGhhKTtfZ2wucGl4ZWxTdG9yZWkoX2dsLlVOUEFDS19BTElHTk1FTlQsdGV4dHVyZS51bnBhY2tBbGlnbm1lbnQpO3ZhciBpbWFnZT1jbGFtcFRvTWF4U2l6ZSh0ZXh0dXJlLmltYWdlLGNhcGFiaWxpdGllcy5tYXhUZXh0dXJlU2l6ZSk7aWYodGV4dHVyZU5lZWRzUG93ZXJPZlR3byh0ZXh0dXJlKSYmaXNQb3dlck9mVHdvKGltYWdlKT09PWZhbHNlKXtpbWFnZT1tYWtlUG93ZXJPZlR3byhpbWFnZSk7fXZhciBpc1Bvd2VyT2ZUd29JbWFnZT1pc1Bvd2VyT2ZUd28oaW1hZ2UpLGdsRm9ybWF0PXV0aWxzLmNvbnZlcnQodGV4dHVyZS5mb3JtYXQpLGdsVHlwZT11dGlscy5jb252ZXJ0KHRleHR1cmUudHlwZSk7c2V0VGV4dHVyZVBhcmFtZXRlcnMoX2dsLlRFWFRVUkVfMkQsdGV4dHVyZSxpc1Bvd2VyT2ZUd29JbWFnZSk7dmFyIG1pcG1hcCxtaXBtYXBzPXRleHR1cmUubWlwbWFwcztpZih0ZXh0dXJlLmlzRGVwdGhUZXh0dXJlKXsvLyBwb3B1bGF0ZSBkZXB0aCB0ZXh0dXJlIHdpdGggZHVtbXkgZGF0YQp2YXIgaW50ZXJuYWxGb3JtYXQ9X2dsLkRFUFRIX0NPTVBPTkVOVDtpZih0ZXh0dXJlLnR5cGU9PT1GbG9hdFR5cGUpe2lmKCFfaXNXZWJHTDIpdGhyb3cgbmV3IEVycm9yKCdGbG9hdCBEZXB0aCBUZXh0dXJlIG9ubHkgc3VwcG9ydGVkIGluIFdlYkdMMi4wJyk7aW50ZXJuYWxGb3JtYXQ9X2dsLkRFUFRIX0NPTVBPTkVOVDMyRjt9ZWxzZSBpZihfaXNXZWJHTDIpey8vIFdlYkdMIDIuMCByZXF1aXJlcyBzaWduZWQgaW50ZXJuYWxmb3JtYXQgZm9yIGdsVGV4SW1hZ2UyRAppbnRlcm5hbEZvcm1hdD1fZ2wuREVQVEhfQ09NUE9ORU5UMTY7fWlmKHRleHR1cmUuZm9ybWF0PT09RGVwdGhGb3JtYXQmJmludGVybmFsRm9ybWF0PT09X2dsLkRFUFRIX0NPTVBPTkVOVCl7Ly8gVGhlIGVycm9yIElOVkFMSURfT1BFUkFUSU9OIGlzIGdlbmVyYXRlZCBieSB0ZXhJbWFnZTJEIGlmIGZvcm1hdCBhbmQgaW50ZXJuYWxmb3JtYXQgYXJlCi8vIERFUFRIX0NPTVBPTkVOVCBhbmQgdHlwZSBpcyBub3QgVU5TSUdORURfU0hPUlQgb3IgVU5TSUdORURfSU5UCi8vIChodHRwczovL3d3dy5raHJvbm9zLm9yZy9yZWdpc3RyeS93ZWJnbC9leHRlbnNpb25zL1dFQkdMX2RlcHRoX3RleHR1cmUvKQppZih0ZXh0dXJlLnR5cGUhPT1VbnNpZ25lZFNob3J0VHlwZSYmdGV4dHVyZS50eXBlIT09VW5zaWduZWRJbnRUeXBlKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyZXI6IFVzZSBVbnNpZ25lZFNob3J0VHlwZSBvciBVbnNpZ25lZEludFR5cGUgZm9yIERlcHRoRm9ybWF0IERlcHRoVGV4dHVyZS4nKTt0ZXh0dXJlLnR5cGU9VW5zaWduZWRTaG9ydFR5cGU7Z2xUeXBlPXV0aWxzLmNvbnZlcnQodGV4dHVyZS50eXBlKTt9fS8vIERlcHRoIHN0ZW5jaWwgdGV4dHVyZXMgbmVlZCB0aGUgREVQVEhfU1RFTkNJTCBpbnRlcm5hbCBmb3JtYXQKLy8gKGh0dHBzOi8vd3d3Lmtocm9ub3Mub3JnL3JlZ2lzdHJ5L3dlYmdsL2V4dGVuc2lvbnMvV0VCR0xfZGVwdGhfdGV4dHVyZS8pCmlmKHRleHR1cmUuZm9ybWF0PT09RGVwdGhTdGVuY2lsRm9ybWF0KXtpbnRlcm5hbEZvcm1hdD1fZ2wuREVQVEhfU1RFTkNJTDsvLyBUaGUgZXJyb3IgSU5WQUxJRF9PUEVSQVRJT04gaXMgZ2VuZXJhdGVkIGJ5IHRleEltYWdlMkQgaWYgZm9ybWF0IGFuZCBpbnRlcm5hbGZvcm1hdCBhcmUKLy8gREVQVEhfU1RFTkNJTCBhbmQgdHlwZSBpcyBub3QgVU5TSUdORURfSU5UXzI0XzhfV0VCR0wuCi8vIChodHRwczovL3d3dy5raHJvbm9zLm9yZy9yZWdpc3RyeS93ZWJnbC9leHRlbnNpb25zL1dFQkdMX2RlcHRoX3RleHR1cmUvKQppZih0ZXh0dXJlLnR5cGUhPT1VbnNpZ25lZEludDI0OFR5cGUpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJlcjogVXNlIFVuc2lnbmVkSW50MjQ4VHlwZSBmb3IgRGVwdGhTdGVuY2lsRm9ybWF0IERlcHRoVGV4dHVyZS4nKTt0ZXh0dXJlLnR5cGU9VW5zaWduZWRJbnQyNDhUeXBlO2dsVHlwZT11dGlscy5jb252ZXJ0KHRleHR1cmUudHlwZSk7fX1zdGF0ZS50ZXhJbWFnZTJEKF9nbC5URVhUVVJFXzJELDAsaW50ZXJuYWxGb3JtYXQsaW1hZ2Uud2lkdGgsaW1hZ2UuaGVpZ2h0LDAsZ2xGb3JtYXQsZ2xUeXBlLG51bGwpO31lbHNlIGlmKHRleHR1cmUuaXNEYXRhVGV4dHVyZSl7Ly8gdXNlIG1hbnVhbGx5IGNyZWF0ZWQgbWlwbWFwcyBpZiBhdmFpbGFibGUKLy8gaWYgdGhlcmUgYXJlIG5vIG1hbnVhbCBtaXBtYXBzCi8vIHNldCAwIGxldmVsIG1pcG1hcCBhbmQgdGhlbiB1c2UgR0wgdG8gZ2VuZXJhdGUgb3RoZXIgbWlwbWFwIGxldmVscwppZihtaXBtYXBzLmxlbmd0aD4wJiZpc1Bvd2VyT2ZUd29JbWFnZSl7Zm9yKHZhciBpPTAsaWw9bWlwbWFwcy5sZW5ndGg7aTxpbDtpKyspe21pcG1hcD1taXBtYXBzW2ldO3N0YXRlLnRleEltYWdlMkQoX2dsLlRFWFRVUkVfMkQsaSxnbEZvcm1hdCxtaXBtYXAud2lkdGgsbWlwbWFwLmhlaWdodCwwLGdsRm9ybWF0LGdsVHlwZSxtaXBtYXAuZGF0YSk7fXRleHR1cmUuZ2VuZXJhdGVNaXBtYXBzPWZhbHNlO31lbHNle3N0YXRlLnRleEltYWdlMkQoX2dsLlRFWFRVUkVfMkQsMCxnbEZvcm1hdCxpbWFnZS53aWR0aCxpbWFnZS5oZWlnaHQsMCxnbEZvcm1hdCxnbFR5cGUsaW1hZ2UuZGF0YSk7fX1lbHNlIGlmKHRleHR1cmUuaXNDb21wcmVzc2VkVGV4dHVyZSl7Zm9yKHZhciBpPTAsaWw9bWlwbWFwcy5sZW5ndGg7aTxpbDtpKyspe21pcG1hcD1taXBtYXBzW2ldO2lmKHRleHR1cmUuZm9ybWF0IT09UkdCQUZvcm1hdCYmdGV4dHVyZS5mb3JtYXQhPT1SR0JGb3JtYXQpe2lmKHN0YXRlLmdldENvbXByZXNzZWRUZXh0dXJlRm9ybWF0cygpLmluZGV4T2YoZ2xGb3JtYXQpPi0xKXtzdGF0ZS5jb21wcmVzc2VkVGV4SW1hZ2UyRChfZ2wuVEVYVFVSRV8yRCxpLGdsRm9ybWF0LG1pcG1hcC53aWR0aCxtaXBtYXAuaGVpZ2h0LDAsbWlwbWFwLmRhdGEpO31lbHNle2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJlcjogQXR0ZW1wdCB0byBsb2FkIHVuc3VwcG9ydGVkIGNvbXByZXNzZWQgdGV4dHVyZSBmb3JtYXQgaW4gLnVwbG9hZFRleHR1cmUoKScpO319ZWxzZXtzdGF0ZS50ZXhJbWFnZTJEKF9nbC5URVhUVVJFXzJELGksZ2xGb3JtYXQsbWlwbWFwLndpZHRoLG1pcG1hcC5oZWlnaHQsMCxnbEZvcm1hdCxnbFR5cGUsbWlwbWFwLmRhdGEpO319fWVsc2V7Ly8gcmVndWxhciBUZXh0dXJlIChpbWFnZSwgdmlkZW8sIGNhbnZhcykKLy8gdXNlIG1hbnVhbGx5IGNyZWF0ZWQgbWlwbWFwcyBpZiBhdmFpbGFibGUKLy8gaWYgdGhlcmUgYXJlIG5vIG1hbnVhbCBtaXBtYXBzCi8vIHNldCAwIGxldmVsIG1pcG1hcCBhbmQgdGhlbiB1c2UgR0wgdG8gZ2VuZXJhdGUgb3RoZXIgbWlwbWFwIGxldmVscwppZihtaXBtYXBzLmxlbmd0aD4wJiZpc1Bvd2VyT2ZUd29JbWFnZSl7Zm9yKHZhciBpPTAsaWw9bWlwbWFwcy5sZW5ndGg7aTxpbDtpKyspe21pcG1hcD1taXBtYXBzW2ldO3N0YXRlLnRleEltYWdlMkQoX2dsLlRFWFRVUkVfMkQsaSxnbEZvcm1hdCxnbEZvcm1hdCxnbFR5cGUsbWlwbWFwKTt9dGV4dHVyZS5nZW5lcmF0ZU1pcG1hcHM9ZmFsc2U7fWVsc2V7c3RhdGUudGV4SW1hZ2UyRChfZ2wuVEVYVFVSRV8yRCwwLGdsRm9ybWF0LGdsRm9ybWF0LGdsVHlwZSxpbWFnZSk7fX1pZih0ZXh0dXJlTmVlZHNHZW5lcmF0ZU1pcG1hcHModGV4dHVyZSxpc1Bvd2VyT2ZUd29JbWFnZSkpX2dsLmdlbmVyYXRlTWlwbWFwKF9nbC5URVhUVVJFXzJEKTt0ZXh0dXJlUHJvcGVydGllcy5fX3ZlcnNpb249dGV4dHVyZS52ZXJzaW9uO2lmKHRleHR1cmUub25VcGRhdGUpdGV4dHVyZS5vblVwZGF0ZSh0ZXh0dXJlKTt9Ly8gUmVuZGVyIHRhcmdldHMKLy8gU2V0dXAgc3RvcmFnZSBmb3IgdGFyZ2V0IHRleHR1cmUgYW5kIGJpbmQgaXQgdG8gY29ycmVjdCBmcmFtZWJ1ZmZlcgpmdW5jdGlvbiBzZXR1cEZyYW1lQnVmZmVyVGV4dHVyZShmcmFtZWJ1ZmZlcixyZW5kZXJUYXJnZXQsYXR0YWNobWVudCx0ZXh0dXJlVGFyZ2V0KXt2YXIgZ2xGb3JtYXQ9dXRpbHMuY29udmVydChyZW5kZXJUYXJnZXQudGV4dHVyZS5mb3JtYXQpO3ZhciBnbFR5cGU9dXRpbHMuY29udmVydChyZW5kZXJUYXJnZXQudGV4dHVyZS50eXBlKTtzdGF0ZS50ZXhJbWFnZTJEKHRleHR1cmVUYXJnZXQsMCxnbEZvcm1hdCxyZW5kZXJUYXJnZXQud2lkdGgscmVuZGVyVGFyZ2V0LmhlaWdodCwwLGdsRm9ybWF0LGdsVHlwZSxudWxsKTtfZ2wuYmluZEZyYW1lYnVmZmVyKF9nbC5GUkFNRUJVRkZFUixmcmFtZWJ1ZmZlcik7X2dsLmZyYW1lYnVmZmVyVGV4dHVyZTJEKF9nbC5GUkFNRUJVRkZFUixhdHRhY2htZW50LHRleHR1cmVUYXJnZXQscHJvcGVydGllcy5nZXQocmVuZGVyVGFyZ2V0LnRleHR1cmUpLl9fd2ViZ2xUZXh0dXJlLDApO19nbC5iaW5kRnJhbWVidWZmZXIoX2dsLkZSQU1FQlVGRkVSLG51bGwpO30vLyBTZXR1cCBzdG9yYWdlIGZvciBpbnRlcm5hbCBkZXB0aC9zdGVuY2lsIGJ1ZmZlcnMgYW5kIGJpbmQgdG8gY29ycmVjdCBmcmFtZWJ1ZmZlcgpmdW5jdGlvbiBzZXR1cFJlbmRlckJ1ZmZlclN0b3JhZ2UocmVuZGVyYnVmZmVyLHJlbmRlclRhcmdldCl7X2dsLmJpbmRSZW5kZXJidWZmZXIoX2dsLlJFTkRFUkJVRkZFUixyZW5kZXJidWZmZXIpO2lmKHJlbmRlclRhcmdldC5kZXB0aEJ1ZmZlciYmIXJlbmRlclRhcmdldC5zdGVuY2lsQnVmZmVyKXtfZ2wucmVuZGVyYnVmZmVyU3RvcmFnZShfZ2wuUkVOREVSQlVGRkVSLF9nbC5ERVBUSF9DT01QT05FTlQxNixyZW5kZXJUYXJnZXQud2lkdGgscmVuZGVyVGFyZ2V0LmhlaWdodCk7X2dsLmZyYW1lYnVmZmVyUmVuZGVyYnVmZmVyKF9nbC5GUkFNRUJVRkZFUixfZ2wuREVQVEhfQVRUQUNITUVOVCxfZ2wuUkVOREVSQlVGRkVSLHJlbmRlcmJ1ZmZlcik7fWVsc2UgaWYocmVuZGVyVGFyZ2V0LmRlcHRoQnVmZmVyJiZyZW5kZXJUYXJnZXQuc3RlbmNpbEJ1ZmZlcil7X2dsLnJlbmRlcmJ1ZmZlclN0b3JhZ2UoX2dsLlJFTkRFUkJVRkZFUixfZ2wuREVQVEhfU1RFTkNJTCxyZW5kZXJUYXJnZXQud2lkdGgscmVuZGVyVGFyZ2V0LmhlaWdodCk7X2dsLmZyYW1lYnVmZmVyUmVuZGVyYnVmZmVyKF9nbC5GUkFNRUJVRkZFUixfZ2wuREVQVEhfU1RFTkNJTF9BVFRBQ0hNRU5ULF9nbC5SRU5ERVJCVUZGRVIscmVuZGVyYnVmZmVyKTt9ZWxzZXsvLyBGSVhNRTogV2UgZG9uJ3Qgc3VwcG9ydCAhZGVwdGggIXN0ZW5jaWwKX2dsLnJlbmRlcmJ1ZmZlclN0b3JhZ2UoX2dsLlJFTkRFUkJVRkZFUixfZ2wuUkdCQTQscmVuZGVyVGFyZ2V0LndpZHRoLHJlbmRlclRhcmdldC5oZWlnaHQpO31fZ2wuYmluZFJlbmRlcmJ1ZmZlcihfZ2wuUkVOREVSQlVGRkVSLG51bGwpO30vLyBTZXR1cCByZXNvdXJjZXMgZm9yIGEgRGVwdGggVGV4dHVyZSBmb3IgYSBGQk8gKG5lZWRzIGFuIGV4dGVuc2lvbikKZnVuY3Rpb24gc2V0dXBEZXB0aFRleHR1cmUoZnJhbWVidWZmZXIscmVuZGVyVGFyZ2V0KXt2YXIgaXNDdWJlPXJlbmRlclRhcmdldCYmcmVuZGVyVGFyZ2V0LmlzV2ViR0xSZW5kZXJUYXJnZXRDdWJlO2lmKGlzQ3ViZSl0aHJvdyBuZXcgRXJyb3IoJ0RlcHRoIFRleHR1cmUgd2l0aCBjdWJlIHJlbmRlciB0YXJnZXRzIGlzIG5vdCBzdXBwb3J0ZWQnKTtfZ2wuYmluZEZyYW1lYnVmZmVyKF9nbC5GUkFNRUJVRkZFUixmcmFtZWJ1ZmZlcik7aWYoIShyZW5kZXJUYXJnZXQuZGVwdGhUZXh0dXJlJiZyZW5kZXJUYXJnZXQuZGVwdGhUZXh0dXJlLmlzRGVwdGhUZXh0dXJlKSl7dGhyb3cgbmV3IEVycm9yKCdyZW5kZXJUYXJnZXQuZGVwdGhUZXh0dXJlIG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgVEhSRUUuRGVwdGhUZXh0dXJlJyk7fS8vIHVwbG9hZCBhbiBlbXB0eSBkZXB0aCB0ZXh0dXJlIHdpdGggZnJhbWVidWZmZXIgc2l6ZQppZighcHJvcGVydGllcy5nZXQocmVuZGVyVGFyZ2V0LmRlcHRoVGV4dHVyZSkuX193ZWJnbFRleHR1cmV8fHJlbmRlclRhcmdldC5kZXB0aFRleHR1cmUuaW1hZ2Uud2lkdGghPT1yZW5kZXJUYXJnZXQud2lkdGh8fHJlbmRlclRhcmdldC5kZXB0aFRleHR1cmUuaW1hZ2UuaGVpZ2h0IT09cmVuZGVyVGFyZ2V0LmhlaWdodCl7cmVuZGVyVGFyZ2V0LmRlcHRoVGV4dHVyZS5pbWFnZS53aWR0aD1yZW5kZXJUYXJnZXQud2lkdGg7cmVuZGVyVGFyZ2V0LmRlcHRoVGV4dHVyZS5pbWFnZS5oZWlnaHQ9cmVuZGVyVGFyZ2V0LmhlaWdodDtyZW5kZXJUYXJnZXQuZGVwdGhUZXh0dXJlLm5lZWRzVXBkYXRlPXRydWU7fXNldFRleHR1cmUyRChyZW5kZXJUYXJnZXQuZGVwdGhUZXh0dXJlLDApO3ZhciB3ZWJnbERlcHRoVGV4dHVyZT1wcm9wZXJ0aWVzLmdldChyZW5kZXJUYXJnZXQuZGVwdGhUZXh0dXJlKS5fX3dlYmdsVGV4dHVyZTtpZihyZW5kZXJUYXJnZXQuZGVwdGhUZXh0dXJlLmZvcm1hdD09PURlcHRoRm9ybWF0KXtfZ2wuZnJhbWVidWZmZXJUZXh0dXJlMkQoX2dsLkZSQU1FQlVGRkVSLF9nbC5ERVBUSF9BVFRBQ0hNRU5ULF9nbC5URVhUVVJFXzJELHdlYmdsRGVwdGhUZXh0dXJlLDApO31lbHNlIGlmKHJlbmRlclRhcmdldC5kZXB0aFRleHR1cmUuZm9ybWF0PT09RGVwdGhTdGVuY2lsRm9ybWF0KXtfZ2wuZnJhbWVidWZmZXJUZXh0dXJlMkQoX2dsLkZSQU1FQlVGRkVSLF9nbC5ERVBUSF9TVEVOQ0lMX0FUVEFDSE1FTlQsX2dsLlRFWFRVUkVfMkQsd2ViZ2xEZXB0aFRleHR1cmUsMCk7fWVsc2V7dGhyb3cgbmV3IEVycm9yKCdVbmtub3duIGRlcHRoVGV4dHVyZSBmb3JtYXQnKTt9fS8vIFNldHVwIEdMIHJlc291cmNlcyBmb3IgYSBub24tdGV4dHVyZSBkZXB0aCBidWZmZXIKZnVuY3Rpb24gc2V0dXBEZXB0aFJlbmRlcmJ1ZmZlcihyZW5kZXJUYXJnZXQpe3ZhciByZW5kZXJUYXJnZXRQcm9wZXJ0aWVzPXByb3BlcnRpZXMuZ2V0KHJlbmRlclRhcmdldCk7dmFyIGlzQ3ViZT1yZW5kZXJUYXJnZXQuaXNXZWJHTFJlbmRlclRhcmdldEN1YmU9PT10cnVlO2lmKHJlbmRlclRhcmdldC5kZXB0aFRleHR1cmUpe2lmKGlzQ3ViZSl0aHJvdyBuZXcgRXJyb3IoJ3RhcmdldC5kZXB0aFRleHR1cmUgbm90IHN1cHBvcnRlZCBpbiBDdWJlIHJlbmRlciB0YXJnZXRzJyk7c2V0dXBEZXB0aFRleHR1cmUocmVuZGVyVGFyZ2V0UHJvcGVydGllcy5fX3dlYmdsRnJhbWVidWZmZXIscmVuZGVyVGFyZ2V0KTt9ZWxzZXtpZihpc0N1YmUpe3JlbmRlclRhcmdldFByb3BlcnRpZXMuX193ZWJnbERlcHRoYnVmZmVyPVtdO2Zvcih2YXIgaT0wO2k8NjtpKyspe19nbC5iaW5kRnJhbWVidWZmZXIoX2dsLkZSQU1FQlVGRkVSLHJlbmRlclRhcmdldFByb3BlcnRpZXMuX193ZWJnbEZyYW1lYnVmZmVyW2ldKTtyZW5kZXJUYXJnZXRQcm9wZXJ0aWVzLl9fd2ViZ2xEZXB0aGJ1ZmZlcltpXT1fZ2wuY3JlYXRlUmVuZGVyYnVmZmVyKCk7c2V0dXBSZW5kZXJCdWZmZXJTdG9yYWdlKHJlbmRlclRhcmdldFByb3BlcnRpZXMuX193ZWJnbERlcHRoYnVmZmVyW2ldLHJlbmRlclRhcmdldCk7fX1lbHNle19nbC5iaW5kRnJhbWVidWZmZXIoX2dsLkZSQU1FQlVGRkVSLHJlbmRlclRhcmdldFByb3BlcnRpZXMuX193ZWJnbEZyYW1lYnVmZmVyKTtyZW5kZXJUYXJnZXRQcm9wZXJ0aWVzLl9fd2ViZ2xEZXB0aGJ1ZmZlcj1fZ2wuY3JlYXRlUmVuZGVyYnVmZmVyKCk7c2V0dXBSZW5kZXJCdWZmZXJTdG9yYWdlKHJlbmRlclRhcmdldFByb3BlcnRpZXMuX193ZWJnbERlcHRoYnVmZmVyLHJlbmRlclRhcmdldCk7fX1fZ2wuYmluZEZyYW1lYnVmZmVyKF9nbC5GUkFNRUJVRkZFUixudWxsKTt9Ly8gU2V0IHVwIEdMIHJlc291cmNlcyBmb3IgdGhlIHJlbmRlciB0YXJnZXQKZnVuY3Rpb24gc2V0dXBSZW5kZXJUYXJnZXQocmVuZGVyVGFyZ2V0KXt2YXIgcmVuZGVyVGFyZ2V0UHJvcGVydGllcz1wcm9wZXJ0aWVzLmdldChyZW5kZXJUYXJnZXQpO3ZhciB0ZXh0dXJlUHJvcGVydGllcz1wcm9wZXJ0aWVzLmdldChyZW5kZXJUYXJnZXQudGV4dHVyZSk7cmVuZGVyVGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoJ2Rpc3Bvc2UnLG9uUmVuZGVyVGFyZ2V0RGlzcG9zZSk7dGV4dHVyZVByb3BlcnRpZXMuX193ZWJnbFRleHR1cmU9X2dsLmNyZWF0ZVRleHR1cmUoKTtpbmZvTWVtb3J5LnRleHR1cmVzKys7dmFyIGlzQ3ViZT1yZW5kZXJUYXJnZXQuaXNXZWJHTFJlbmRlclRhcmdldEN1YmU9PT10cnVlO3ZhciBpc1RhcmdldFBvd2VyT2ZUd289aXNQb3dlck9mVHdvKHJlbmRlclRhcmdldCk7Ly8gU2V0dXAgZnJhbWVidWZmZXIKaWYoaXNDdWJlKXtyZW5kZXJUYXJnZXRQcm9wZXJ0aWVzLl9fd2ViZ2xGcmFtZWJ1ZmZlcj1bXTtmb3IodmFyIGk9MDtpPDY7aSsrKXtyZW5kZXJUYXJnZXRQcm9wZXJ0aWVzLl9fd2ViZ2xGcmFtZWJ1ZmZlcltpXT1fZ2wuY3JlYXRlRnJhbWVidWZmZXIoKTt9fWVsc2V7cmVuZGVyVGFyZ2V0UHJvcGVydGllcy5fX3dlYmdsRnJhbWVidWZmZXI9X2dsLmNyZWF0ZUZyYW1lYnVmZmVyKCk7fS8vIFNldHVwIGNvbG9yIGJ1ZmZlcgppZihpc0N1YmUpe3N0YXRlLmJpbmRUZXh0dXJlKF9nbC5URVhUVVJFX0NVQkVfTUFQLHRleHR1cmVQcm9wZXJ0aWVzLl9fd2ViZ2xUZXh0dXJlKTtzZXRUZXh0dXJlUGFyYW1ldGVycyhfZ2wuVEVYVFVSRV9DVUJFX01BUCxyZW5kZXJUYXJnZXQudGV4dHVyZSxpc1RhcmdldFBvd2VyT2ZUd28pO2Zvcih2YXIgaT0wO2k8NjtpKyspe3NldHVwRnJhbWVCdWZmZXJUZXh0dXJlKHJlbmRlclRhcmdldFByb3BlcnRpZXMuX193ZWJnbEZyYW1lYnVmZmVyW2ldLHJlbmRlclRhcmdldCxfZ2wuQ09MT1JfQVRUQUNITUVOVDAsX2dsLlRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWCtpKTt9aWYodGV4dHVyZU5lZWRzR2VuZXJhdGVNaXBtYXBzKHJlbmRlclRhcmdldC50ZXh0dXJlLGlzVGFyZ2V0UG93ZXJPZlR3bykpX2dsLmdlbmVyYXRlTWlwbWFwKF9nbC5URVhUVVJFX0NVQkVfTUFQKTtzdGF0ZS5iaW5kVGV4dHVyZShfZ2wuVEVYVFVSRV9DVUJFX01BUCxudWxsKTt9ZWxzZXtzdGF0ZS5iaW5kVGV4dHVyZShfZ2wuVEVYVFVSRV8yRCx0ZXh0dXJlUHJvcGVydGllcy5fX3dlYmdsVGV4dHVyZSk7c2V0VGV4dHVyZVBhcmFtZXRlcnMoX2dsLlRFWFRVUkVfMkQscmVuZGVyVGFyZ2V0LnRleHR1cmUsaXNUYXJnZXRQb3dlck9mVHdvKTtzZXR1cEZyYW1lQnVmZmVyVGV4dHVyZShyZW5kZXJUYXJnZXRQcm9wZXJ0aWVzLl9fd2ViZ2xGcmFtZWJ1ZmZlcixyZW5kZXJUYXJnZXQsX2dsLkNPTE9SX0FUVEFDSE1FTlQwLF9nbC5URVhUVVJFXzJEKTtpZih0ZXh0dXJlTmVlZHNHZW5lcmF0ZU1pcG1hcHMocmVuZGVyVGFyZ2V0LnRleHR1cmUsaXNUYXJnZXRQb3dlck9mVHdvKSlfZ2wuZ2VuZXJhdGVNaXBtYXAoX2dsLlRFWFRVUkVfMkQpO3N0YXRlLmJpbmRUZXh0dXJlKF9nbC5URVhUVVJFXzJELG51bGwpO30vLyBTZXR1cCBkZXB0aCBhbmQgc3RlbmNpbCBidWZmZXJzCmlmKHJlbmRlclRhcmdldC5kZXB0aEJ1ZmZlcil7c2V0dXBEZXB0aFJlbmRlcmJ1ZmZlcihyZW5kZXJUYXJnZXQpO319ZnVuY3Rpb24gdXBkYXRlUmVuZGVyVGFyZ2V0TWlwbWFwKHJlbmRlclRhcmdldCl7dmFyIHRleHR1cmU9cmVuZGVyVGFyZ2V0LnRleHR1cmU7dmFyIGlzVGFyZ2V0UG93ZXJPZlR3bz1pc1Bvd2VyT2ZUd28ocmVuZGVyVGFyZ2V0KTtpZih0ZXh0dXJlTmVlZHNHZW5lcmF0ZU1pcG1hcHModGV4dHVyZSxpc1RhcmdldFBvd2VyT2ZUd28pKXt2YXIgdGFyZ2V0PXJlbmRlclRhcmdldC5pc1dlYkdMUmVuZGVyVGFyZ2V0Q3ViZT9fZ2wuVEVYVFVSRV9DVUJFX01BUDpfZ2wuVEVYVFVSRV8yRDt2YXIgd2ViZ2xUZXh0dXJlPXByb3BlcnRpZXMuZ2V0KHRleHR1cmUpLl9fd2ViZ2xUZXh0dXJlO3N0YXRlLmJpbmRUZXh0dXJlKHRhcmdldCx3ZWJnbFRleHR1cmUpO19nbC5nZW5lcmF0ZU1pcG1hcCh0YXJnZXQpO3N0YXRlLmJpbmRUZXh0dXJlKHRhcmdldCxudWxsKTt9fWZ1bmN0aW9uIHVwZGF0ZVZpZGVvVGV4dHVyZXMoKXtmb3IodmFyIGlkIGluIF92aWRlb1RleHR1cmVzKXtfdmlkZW9UZXh0dXJlc1tpZF0udXBkYXRlKCk7fX10aGlzLnNldFRleHR1cmUyRD1zZXRUZXh0dXJlMkQ7dGhpcy5zZXRUZXh0dXJlQ3ViZT1zZXRUZXh0dXJlQ3ViZTt0aGlzLnNldFRleHR1cmVDdWJlRHluYW1pYz1zZXRUZXh0dXJlQ3ViZUR5bmFtaWM7dGhpcy5zZXR1cFJlbmRlclRhcmdldD1zZXR1cFJlbmRlclRhcmdldDt0aGlzLnVwZGF0ZVJlbmRlclRhcmdldE1pcG1hcD11cGRhdGVSZW5kZXJUYXJnZXRNaXBtYXA7dGhpcy51cGRhdGVWaWRlb1RleHR1cmVzPXVwZGF0ZVZpZGVvVGV4dHVyZXM7fS8qKgogKiBAYXV0aG9yIGZvcmRhY2lvdXMgLyBmb3JkYWNpb3VzLmdpdGh1Yi5pbwogKi9mdW5jdGlvbiBXZWJHTFByb3BlcnRpZXMoKXt2YXIgcHJvcGVydGllcz17fTtmdW5jdGlvbiBnZXQob2JqZWN0KXt2YXIgdXVpZD1vYmplY3QudXVpZDt2YXIgbWFwPXByb3BlcnRpZXNbdXVpZF07aWYobWFwPT09dW5kZWZpbmVkKXttYXA9e307cHJvcGVydGllc1t1dWlkXT1tYXA7fXJldHVybiBtYXA7fWZ1bmN0aW9uIHJlbW92ZShvYmplY3Qpe2RlbGV0ZSBwcm9wZXJ0aWVzW29iamVjdC51dWlkXTt9ZnVuY3Rpb24gY2xlYXIoKXtwcm9wZXJ0aWVzPXt9O31yZXR1cm57Z2V0OmdldCxyZW1vdmU6cmVtb3ZlLGNsZWFyOmNsZWFyfTt9LyoqCiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vCiAqL2Z1bmN0aW9uIFdlYkdMU3RhdGUoZ2wsZXh0ZW5zaW9ucyx1dGlscyl7ZnVuY3Rpb24gQ29sb3JCdWZmZXIoKXt2YXIgbG9ja2VkPWZhbHNlO3ZhciBjb2xvcj1uZXcgVmVjdG9yNCgpO3ZhciBjdXJyZW50Q29sb3JNYXNrPW51bGw7dmFyIGN1cnJlbnRDb2xvckNsZWFyPW5ldyBWZWN0b3I0KDAsMCwwLDApO3JldHVybntzZXRNYXNrOmZ1bmN0aW9uIHNldE1hc2soY29sb3JNYXNrKXtpZihjdXJyZW50Q29sb3JNYXNrIT09Y29sb3JNYXNrJiYhbG9ja2VkKXtnbC5jb2xvck1hc2soY29sb3JNYXNrLGNvbG9yTWFzayxjb2xvck1hc2ssY29sb3JNYXNrKTtjdXJyZW50Q29sb3JNYXNrPWNvbG9yTWFzazt9fSxzZXRMb2NrZWQ6ZnVuY3Rpb24gc2V0TG9ja2VkKGxvY2spe2xvY2tlZD1sb2NrO30sc2V0Q2xlYXI6ZnVuY3Rpb24gc2V0Q2xlYXIocixnLGIsYSxwcmVtdWx0aXBsaWVkQWxwaGEpe2lmKHByZW11bHRpcGxpZWRBbHBoYT09PXRydWUpe3IqPWE7Zyo9YTtiKj1hO31jb2xvci5zZXQocixnLGIsYSk7aWYoY3VycmVudENvbG9yQ2xlYXIuZXF1YWxzKGNvbG9yKT09PWZhbHNlKXtnbC5jbGVhckNvbG9yKHIsZyxiLGEpO2N1cnJlbnRDb2xvckNsZWFyLmNvcHkoY29sb3IpO319LHJlc2V0OmZ1bmN0aW9uIHJlc2V0KCl7bG9ja2VkPWZhbHNlO2N1cnJlbnRDb2xvck1hc2s9bnVsbDtjdXJyZW50Q29sb3JDbGVhci5zZXQoLTEsMCwwLDApOy8vIHNldCB0byBpbnZhbGlkIHN0YXRlCn19O31mdW5jdGlvbiBEZXB0aEJ1ZmZlcigpe3ZhciBsb2NrZWQ9ZmFsc2U7dmFyIGN1cnJlbnREZXB0aE1hc2s9bnVsbDt2YXIgY3VycmVudERlcHRoRnVuYz1udWxsO3ZhciBjdXJyZW50RGVwdGhDbGVhcj1udWxsO3JldHVybntzZXRUZXN0OmZ1bmN0aW9uIHNldFRlc3QoZGVwdGhUZXN0KXtpZihkZXB0aFRlc3Qpe2VuYWJsZShnbC5ERVBUSF9URVNUKTt9ZWxzZXtkaXNhYmxlKGdsLkRFUFRIX1RFU1QpO319LHNldE1hc2s6ZnVuY3Rpb24gc2V0TWFzayhkZXB0aE1hc2spe2lmKGN1cnJlbnREZXB0aE1hc2shPT1kZXB0aE1hc2smJiFsb2NrZWQpe2dsLmRlcHRoTWFzayhkZXB0aE1hc2spO2N1cnJlbnREZXB0aE1hc2s9ZGVwdGhNYXNrO319LHNldEZ1bmM6ZnVuY3Rpb24gc2V0RnVuYyhkZXB0aEZ1bmMpe2lmKGN1cnJlbnREZXB0aEZ1bmMhPT1kZXB0aEZ1bmMpe2lmKGRlcHRoRnVuYyl7c3dpdGNoKGRlcHRoRnVuYyl7Y2FzZSBOZXZlckRlcHRoOmdsLmRlcHRoRnVuYyhnbC5ORVZFUik7YnJlYWs7Y2FzZSBBbHdheXNEZXB0aDpnbC5kZXB0aEZ1bmMoZ2wuQUxXQVlTKTticmVhaztjYXNlIExlc3NEZXB0aDpnbC5kZXB0aEZ1bmMoZ2wuTEVTUyk7YnJlYWs7Y2FzZSBMZXNzRXF1YWxEZXB0aDpnbC5kZXB0aEZ1bmMoZ2wuTEVRVUFMKTticmVhaztjYXNlIEVxdWFsRGVwdGg6Z2wuZGVwdGhGdW5jKGdsLkVRVUFMKTticmVhaztjYXNlIEdyZWF0ZXJFcXVhbERlcHRoOmdsLmRlcHRoRnVuYyhnbC5HRVFVQUwpO2JyZWFrO2Nhc2UgR3JlYXRlckRlcHRoOmdsLmRlcHRoRnVuYyhnbC5HUkVBVEVSKTticmVhaztjYXNlIE5vdEVxdWFsRGVwdGg6Z2wuZGVwdGhGdW5jKGdsLk5PVEVRVUFMKTticmVhaztkZWZhdWx0OmdsLmRlcHRoRnVuYyhnbC5MRVFVQUwpO319ZWxzZXtnbC5kZXB0aEZ1bmMoZ2wuTEVRVUFMKTt9Y3VycmVudERlcHRoRnVuYz1kZXB0aEZ1bmM7fX0sc2V0TG9ja2VkOmZ1bmN0aW9uIHNldExvY2tlZChsb2NrKXtsb2NrZWQ9bG9jazt9LHNldENsZWFyOmZ1bmN0aW9uIHNldENsZWFyKGRlcHRoKXtpZihjdXJyZW50RGVwdGhDbGVhciE9PWRlcHRoKXtnbC5jbGVhckRlcHRoKGRlcHRoKTtjdXJyZW50RGVwdGhDbGVhcj1kZXB0aDt9fSxyZXNldDpmdW5jdGlvbiByZXNldCgpe2xvY2tlZD1mYWxzZTtjdXJyZW50RGVwdGhNYXNrPW51bGw7Y3VycmVudERlcHRoRnVuYz1udWxsO2N1cnJlbnREZXB0aENsZWFyPW51bGw7fX07fWZ1bmN0aW9uIFN0ZW5jaWxCdWZmZXIoKXt2YXIgbG9ja2VkPWZhbHNlO3ZhciBjdXJyZW50U3RlbmNpbE1hc2s9bnVsbDt2YXIgY3VycmVudFN0ZW5jaWxGdW5jPW51bGw7dmFyIGN1cnJlbnRTdGVuY2lsUmVmPW51bGw7dmFyIGN1cnJlbnRTdGVuY2lsRnVuY01hc2s9bnVsbDt2YXIgY3VycmVudFN0ZW5jaWxGYWlsPW51bGw7dmFyIGN1cnJlbnRTdGVuY2lsWkZhaWw9bnVsbDt2YXIgY3VycmVudFN0ZW5jaWxaUGFzcz1udWxsO3ZhciBjdXJyZW50U3RlbmNpbENsZWFyPW51bGw7cmV0dXJue3NldFRlc3Q6ZnVuY3Rpb24gc2V0VGVzdChzdGVuY2lsVGVzdCl7aWYoc3RlbmNpbFRlc3Qpe2VuYWJsZShnbC5TVEVOQ0lMX1RFU1QpO31lbHNle2Rpc2FibGUoZ2wuU1RFTkNJTF9URVNUKTt9fSxzZXRNYXNrOmZ1bmN0aW9uIHNldE1hc2soc3RlbmNpbE1hc2spe2lmKGN1cnJlbnRTdGVuY2lsTWFzayE9PXN0ZW5jaWxNYXNrJiYhbG9ja2VkKXtnbC5zdGVuY2lsTWFzayhzdGVuY2lsTWFzayk7Y3VycmVudFN0ZW5jaWxNYXNrPXN0ZW5jaWxNYXNrO319LHNldEZ1bmM6ZnVuY3Rpb24gc2V0RnVuYyhzdGVuY2lsRnVuYyxzdGVuY2lsUmVmLHN0ZW5jaWxNYXNrKXtpZihjdXJyZW50U3RlbmNpbEZ1bmMhPT1zdGVuY2lsRnVuY3x8Y3VycmVudFN0ZW5jaWxSZWYhPT1zdGVuY2lsUmVmfHxjdXJyZW50U3RlbmNpbEZ1bmNNYXNrIT09c3RlbmNpbE1hc2spe2dsLnN0ZW5jaWxGdW5jKHN0ZW5jaWxGdW5jLHN0ZW5jaWxSZWYsc3RlbmNpbE1hc2spO2N1cnJlbnRTdGVuY2lsRnVuYz1zdGVuY2lsRnVuYztjdXJyZW50U3RlbmNpbFJlZj1zdGVuY2lsUmVmO2N1cnJlbnRTdGVuY2lsRnVuY01hc2s9c3RlbmNpbE1hc2s7fX0sc2V0T3A6ZnVuY3Rpb24gc2V0T3Aoc3RlbmNpbEZhaWwsc3RlbmNpbFpGYWlsLHN0ZW5jaWxaUGFzcyl7aWYoY3VycmVudFN0ZW5jaWxGYWlsIT09c3RlbmNpbEZhaWx8fGN1cnJlbnRTdGVuY2lsWkZhaWwhPT1zdGVuY2lsWkZhaWx8fGN1cnJlbnRTdGVuY2lsWlBhc3MhPT1zdGVuY2lsWlBhc3Mpe2dsLnN0ZW5jaWxPcChzdGVuY2lsRmFpbCxzdGVuY2lsWkZhaWwsc3RlbmNpbFpQYXNzKTtjdXJyZW50U3RlbmNpbEZhaWw9c3RlbmNpbEZhaWw7Y3VycmVudFN0ZW5jaWxaRmFpbD1zdGVuY2lsWkZhaWw7Y3VycmVudFN0ZW5jaWxaUGFzcz1zdGVuY2lsWlBhc3M7fX0sc2V0TG9ja2VkOmZ1bmN0aW9uIHNldExvY2tlZChsb2NrKXtsb2NrZWQ9bG9jazt9LHNldENsZWFyOmZ1bmN0aW9uIHNldENsZWFyKHN0ZW5jaWwpe2lmKGN1cnJlbnRTdGVuY2lsQ2xlYXIhPT1zdGVuY2lsKXtnbC5jbGVhclN0ZW5jaWwoc3RlbmNpbCk7Y3VycmVudFN0ZW5jaWxDbGVhcj1zdGVuY2lsO319LHJlc2V0OmZ1bmN0aW9uIHJlc2V0KCl7bG9ja2VkPWZhbHNlO2N1cnJlbnRTdGVuY2lsTWFzaz1udWxsO2N1cnJlbnRTdGVuY2lsRnVuYz1udWxsO2N1cnJlbnRTdGVuY2lsUmVmPW51bGw7Y3VycmVudFN0ZW5jaWxGdW5jTWFzaz1udWxsO2N1cnJlbnRTdGVuY2lsRmFpbD1udWxsO2N1cnJlbnRTdGVuY2lsWkZhaWw9bnVsbDtjdXJyZW50U3RlbmNpbFpQYXNzPW51bGw7Y3VycmVudFN0ZW5jaWxDbGVhcj1udWxsO319O30vLwp2YXIgY29sb3JCdWZmZXI9bmV3IENvbG9yQnVmZmVyKCk7dmFyIGRlcHRoQnVmZmVyPW5ldyBEZXB0aEJ1ZmZlcigpO3ZhciBzdGVuY2lsQnVmZmVyPW5ldyBTdGVuY2lsQnVmZmVyKCk7dmFyIG1heFZlcnRleEF0dHJpYnV0ZXM9Z2wuZ2V0UGFyYW1ldGVyKGdsLk1BWF9WRVJURVhfQVRUUklCUyk7dmFyIG5ld0F0dHJpYnV0ZXM9bmV3IFVpbnQ4QXJyYXkobWF4VmVydGV4QXR0cmlidXRlcyk7dmFyIGVuYWJsZWRBdHRyaWJ1dGVzPW5ldyBVaW50OEFycmF5KG1heFZlcnRleEF0dHJpYnV0ZXMpO3ZhciBhdHRyaWJ1dGVEaXZpc29ycz1uZXcgVWludDhBcnJheShtYXhWZXJ0ZXhBdHRyaWJ1dGVzKTt2YXIgY2FwYWJpbGl0aWVzPXt9O3ZhciBjb21wcmVzc2VkVGV4dHVyZUZvcm1hdHM9bnVsbDt2YXIgY3VycmVudFByb2dyYW09bnVsbDt2YXIgY3VycmVudEJsZW5kaW5nPW51bGw7dmFyIGN1cnJlbnRCbGVuZEVxdWF0aW9uPW51bGw7dmFyIGN1cnJlbnRCbGVuZFNyYz1udWxsO3ZhciBjdXJyZW50QmxlbmREc3Q9bnVsbDt2YXIgY3VycmVudEJsZW5kRXF1YXRpb25BbHBoYT1udWxsO3ZhciBjdXJyZW50QmxlbmRTcmNBbHBoYT1udWxsO3ZhciBjdXJyZW50QmxlbmREc3RBbHBoYT1udWxsO3ZhciBjdXJyZW50UHJlbXVsdGlwbGVkQWxwaGE9ZmFsc2U7dmFyIGN1cnJlbnRGbGlwU2lkZWQ9bnVsbDt2YXIgY3VycmVudEN1bGxGYWNlPW51bGw7dmFyIGN1cnJlbnRMaW5lV2lkdGg9bnVsbDt2YXIgY3VycmVudFBvbHlnb25PZmZzZXRGYWN0b3I9bnVsbDt2YXIgY3VycmVudFBvbHlnb25PZmZzZXRVbml0cz1udWxsO3ZhciBtYXhUZXh0dXJlcz1nbC5nZXRQYXJhbWV0ZXIoZ2wuTUFYX0NPTUJJTkVEX1RFWFRVUkVfSU1BR0VfVU5JVFMpO3ZhciB2ZXJzaW9uPXBhcnNlRmxvYXQoL15XZWJHTFwgKFswLTldKS8uZXhlYyhnbC5nZXRQYXJhbWV0ZXIoZ2wuVkVSU0lPTikpWzFdKTt2YXIgbGluZVdpZHRoQXZhaWxhYmxlPXBhcnNlRmxvYXQodmVyc2lvbik+PTEuMDt2YXIgY3VycmVudFRleHR1cmVTbG90PW51bGw7dmFyIGN1cnJlbnRCb3VuZFRleHR1cmVzPXt9O3ZhciBjdXJyZW50U2Npc3Nvcj1uZXcgVmVjdG9yNCgpO3ZhciBjdXJyZW50Vmlld3BvcnQ9bmV3IFZlY3RvcjQoKTtmdW5jdGlvbiBjcmVhdGVUZXh0dXJlKHR5cGUsdGFyZ2V0LGNvdW50KXt2YXIgZGF0YT1uZXcgVWludDhBcnJheSg0KTsvLyA0IGlzIHJlcXVpcmVkIHRvIG1hdGNoIGRlZmF1bHQgdW5wYWNrIGFsaWdubWVudCBvZiA0Lgp2YXIgdGV4dHVyZT1nbC5jcmVhdGVUZXh0dXJlKCk7Z2wuYmluZFRleHR1cmUodHlwZSx0ZXh0dXJlKTtnbC50ZXhQYXJhbWV0ZXJpKHR5cGUsZ2wuVEVYVFVSRV9NSU5fRklMVEVSLGdsLk5FQVJFU1QpO2dsLnRleFBhcmFtZXRlcmkodHlwZSxnbC5URVhUVVJFX01BR19GSUxURVIsZ2wuTkVBUkVTVCk7Zm9yKHZhciBpPTA7aTxjb3VudDtpKyspe2dsLnRleEltYWdlMkQodGFyZ2V0K2ksMCxnbC5SR0JBLDEsMSwwLGdsLlJHQkEsZ2wuVU5TSUdORURfQllURSxkYXRhKTt9cmV0dXJuIHRleHR1cmU7fXZhciBlbXB0eVRleHR1cmVzPXt9O2VtcHR5VGV4dHVyZXNbZ2wuVEVYVFVSRV8yRF09Y3JlYXRlVGV4dHVyZShnbC5URVhUVVJFXzJELGdsLlRFWFRVUkVfMkQsMSk7ZW1wdHlUZXh0dXJlc1tnbC5URVhUVVJFX0NVQkVfTUFQXT1jcmVhdGVUZXh0dXJlKGdsLlRFWFRVUkVfQ1VCRV9NQVAsZ2wuVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9YLDYpOy8vIGluaXQKY29sb3JCdWZmZXIuc2V0Q2xlYXIoMCwwLDAsMSk7ZGVwdGhCdWZmZXIuc2V0Q2xlYXIoMSk7c3RlbmNpbEJ1ZmZlci5zZXRDbGVhcigwKTtlbmFibGUoZ2wuREVQVEhfVEVTVCk7ZGVwdGhCdWZmZXIuc2V0RnVuYyhMZXNzRXF1YWxEZXB0aCk7c2V0RmxpcFNpZGVkKGZhbHNlKTtzZXRDdWxsRmFjZShDdWxsRmFjZUJhY2spO2VuYWJsZShnbC5DVUxMX0ZBQ0UpO2VuYWJsZShnbC5CTEVORCk7c2V0QmxlbmRpbmcoTm9ybWFsQmxlbmRpbmcpOy8vCmZ1bmN0aW9uIGluaXRBdHRyaWJ1dGVzKCl7Zm9yKHZhciBpPTAsbD1uZXdBdHRyaWJ1dGVzLmxlbmd0aDtpPGw7aSsrKXtuZXdBdHRyaWJ1dGVzW2ldPTA7fX1mdW5jdGlvbiBlbmFibGVBdHRyaWJ1dGUoYXR0cmlidXRlKXtuZXdBdHRyaWJ1dGVzW2F0dHJpYnV0ZV09MTtpZihlbmFibGVkQXR0cmlidXRlc1thdHRyaWJ1dGVdPT09MCl7Z2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoYXR0cmlidXRlKTtlbmFibGVkQXR0cmlidXRlc1thdHRyaWJ1dGVdPTE7fWlmKGF0dHJpYnV0ZURpdmlzb3JzW2F0dHJpYnV0ZV0hPT0wKXt2YXIgZXh0ZW5zaW9uPWV4dGVuc2lvbnMuZ2V0KCdBTkdMRV9pbnN0YW5jZWRfYXJyYXlzJyk7ZXh0ZW5zaW9uLnZlcnRleEF0dHJpYkRpdmlzb3JBTkdMRShhdHRyaWJ1dGUsMCk7YXR0cmlidXRlRGl2aXNvcnNbYXR0cmlidXRlXT0wO319ZnVuY3Rpb24gZW5hYmxlQXR0cmlidXRlQW5kRGl2aXNvcihhdHRyaWJ1dGUsbWVzaFBlckF0dHJpYnV0ZSl7bmV3QXR0cmlidXRlc1thdHRyaWJ1dGVdPTE7aWYoZW5hYmxlZEF0dHJpYnV0ZXNbYXR0cmlidXRlXT09PTApe2dsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGF0dHJpYnV0ZSk7ZW5hYmxlZEF0dHJpYnV0ZXNbYXR0cmlidXRlXT0xO31pZihhdHRyaWJ1dGVEaXZpc29yc1thdHRyaWJ1dGVdIT09bWVzaFBlckF0dHJpYnV0ZSl7dmFyIGV4dGVuc2lvbj1leHRlbnNpb25zLmdldCgnQU5HTEVfaW5zdGFuY2VkX2FycmF5cycpO2V4dGVuc2lvbi52ZXJ0ZXhBdHRyaWJEaXZpc29yQU5HTEUoYXR0cmlidXRlLG1lc2hQZXJBdHRyaWJ1dGUpO2F0dHJpYnV0ZURpdmlzb3JzW2F0dHJpYnV0ZV09bWVzaFBlckF0dHJpYnV0ZTt9fWZ1bmN0aW9uIGRpc2FibGVVbnVzZWRBdHRyaWJ1dGVzKCl7Zm9yKHZhciBpPTAsbD1lbmFibGVkQXR0cmlidXRlcy5sZW5ndGg7aSE9PWw7KytpKXtpZihlbmFibGVkQXR0cmlidXRlc1tpXSE9PW5ld0F0dHJpYnV0ZXNbaV0pe2dsLmRpc2FibGVWZXJ0ZXhBdHRyaWJBcnJheShpKTtlbmFibGVkQXR0cmlidXRlc1tpXT0wO319fWZ1bmN0aW9uIGVuYWJsZShpZCl7aWYoY2FwYWJpbGl0aWVzW2lkXSE9PXRydWUpe2dsLmVuYWJsZShpZCk7Y2FwYWJpbGl0aWVzW2lkXT10cnVlO319ZnVuY3Rpb24gZGlzYWJsZShpZCl7aWYoY2FwYWJpbGl0aWVzW2lkXSE9PWZhbHNlKXtnbC5kaXNhYmxlKGlkKTtjYXBhYmlsaXRpZXNbaWRdPWZhbHNlO319ZnVuY3Rpb24gZ2V0Q29tcHJlc3NlZFRleHR1cmVGb3JtYXRzKCl7aWYoY29tcHJlc3NlZFRleHR1cmVGb3JtYXRzPT09bnVsbCl7Y29tcHJlc3NlZFRleHR1cmVGb3JtYXRzPVtdO2lmKGV4dGVuc2lvbnMuZ2V0KCdXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfcHZydGMnKXx8ZXh0ZW5zaW9ucy5nZXQoJ1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjJyl8fGV4dGVuc2lvbnMuZ2V0KCdXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfZXRjMScpKXt2YXIgZm9ybWF0cz1nbC5nZXRQYXJhbWV0ZXIoZ2wuQ09NUFJFU1NFRF9URVhUVVJFX0ZPUk1BVFMpO2Zvcih2YXIgaT0wO2k8Zm9ybWF0cy5sZW5ndGg7aSsrKXtjb21wcmVzc2VkVGV4dHVyZUZvcm1hdHMucHVzaChmb3JtYXRzW2ldKTt9fX1yZXR1cm4gY29tcHJlc3NlZFRleHR1cmVGb3JtYXRzO31mdW5jdGlvbiB1c2VQcm9ncmFtKHByb2dyYW0pe2lmKGN1cnJlbnRQcm9ncmFtIT09cHJvZ3JhbSl7Z2wudXNlUHJvZ3JhbShwcm9ncmFtKTtjdXJyZW50UHJvZ3JhbT1wcm9ncmFtO3JldHVybiB0cnVlO31yZXR1cm4gZmFsc2U7fWZ1bmN0aW9uIHNldEJsZW5kaW5nKGJsZW5kaW5nLGJsZW5kRXF1YXRpb24sYmxlbmRTcmMsYmxlbmREc3QsYmxlbmRFcXVhdGlvbkFscGhhLGJsZW5kU3JjQWxwaGEsYmxlbmREc3RBbHBoYSxwcmVtdWx0aXBsaWVkQWxwaGEpe2lmKGJsZW5kaW5nIT09Tm9CbGVuZGluZyl7ZW5hYmxlKGdsLkJMRU5EKTt9ZWxzZXtkaXNhYmxlKGdsLkJMRU5EKTt9aWYoYmxlbmRpbmchPT1DdXN0b21CbGVuZGluZyl7aWYoYmxlbmRpbmchPT1jdXJyZW50QmxlbmRpbmd8fHByZW11bHRpcGxpZWRBbHBoYSE9PWN1cnJlbnRQcmVtdWx0aXBsZWRBbHBoYSl7c3dpdGNoKGJsZW5kaW5nKXtjYXNlIEFkZGl0aXZlQmxlbmRpbmc6aWYocHJlbXVsdGlwbGllZEFscGhhKXtnbC5ibGVuZEVxdWF0aW9uU2VwYXJhdGUoZ2wuRlVOQ19BREQsZ2wuRlVOQ19BREQpO2dsLmJsZW5kRnVuY1NlcGFyYXRlKGdsLk9ORSxnbC5PTkUsZ2wuT05FLGdsLk9ORSk7fWVsc2V7Z2wuYmxlbmRFcXVhdGlvbihnbC5GVU5DX0FERCk7Z2wuYmxlbmRGdW5jKGdsLlNSQ19BTFBIQSxnbC5PTkUpO31icmVhaztjYXNlIFN1YnRyYWN0aXZlQmxlbmRpbmc6aWYocHJlbXVsdGlwbGllZEFscGhhKXtnbC5ibGVuZEVxdWF0aW9uU2VwYXJhdGUoZ2wuRlVOQ19BREQsZ2wuRlVOQ19BREQpO2dsLmJsZW5kRnVuY1NlcGFyYXRlKGdsLlpFUk8sZ2wuWkVSTyxnbC5PTkVfTUlOVVNfU1JDX0NPTE9SLGdsLk9ORV9NSU5VU19TUkNfQUxQSEEpO31lbHNle2dsLmJsZW5kRXF1YXRpb24oZ2wuRlVOQ19BREQpO2dsLmJsZW5kRnVuYyhnbC5aRVJPLGdsLk9ORV9NSU5VU19TUkNfQ09MT1IpO31icmVhaztjYXNlIE11bHRpcGx5QmxlbmRpbmc6aWYocHJlbXVsdGlwbGllZEFscGhhKXtnbC5ibGVuZEVxdWF0aW9uU2VwYXJhdGUoZ2wuRlVOQ19BREQsZ2wuRlVOQ19BREQpO2dsLmJsZW5kRnVuY1NlcGFyYXRlKGdsLlpFUk8sZ2wuU1JDX0NPTE9SLGdsLlpFUk8sZ2wuU1JDX0FMUEhBKTt9ZWxzZXtnbC5ibGVuZEVxdWF0aW9uKGdsLkZVTkNfQUREKTtnbC5ibGVuZEZ1bmMoZ2wuWkVSTyxnbC5TUkNfQ09MT1IpO31icmVhaztkZWZhdWx0OmlmKHByZW11bHRpcGxpZWRBbHBoYSl7Z2wuYmxlbmRFcXVhdGlvblNlcGFyYXRlKGdsLkZVTkNfQURELGdsLkZVTkNfQUREKTtnbC5ibGVuZEZ1bmNTZXBhcmF0ZShnbC5PTkUsZ2wuT05FX01JTlVTX1NSQ19BTFBIQSxnbC5PTkUsZ2wuT05FX01JTlVTX1NSQ19BTFBIQSk7fWVsc2V7Z2wuYmxlbmRFcXVhdGlvblNlcGFyYXRlKGdsLkZVTkNfQURELGdsLkZVTkNfQUREKTtnbC5ibGVuZEZ1bmNTZXBhcmF0ZShnbC5TUkNfQUxQSEEsZ2wuT05FX01JTlVTX1NSQ19BTFBIQSxnbC5PTkUsZ2wuT05FX01JTlVTX1NSQ19BTFBIQSk7fX19Y3VycmVudEJsZW5kRXF1YXRpb249bnVsbDtjdXJyZW50QmxlbmRTcmM9bnVsbDtjdXJyZW50QmxlbmREc3Q9bnVsbDtjdXJyZW50QmxlbmRFcXVhdGlvbkFscGhhPW51bGw7Y3VycmVudEJsZW5kU3JjQWxwaGE9bnVsbDtjdXJyZW50QmxlbmREc3RBbHBoYT1udWxsO31lbHNle2JsZW5kRXF1YXRpb25BbHBoYT1ibGVuZEVxdWF0aW9uQWxwaGF8fGJsZW5kRXF1YXRpb247YmxlbmRTcmNBbHBoYT1ibGVuZFNyY0FscGhhfHxibGVuZFNyYztibGVuZERzdEFscGhhPWJsZW5kRHN0QWxwaGF8fGJsZW5kRHN0O2lmKGJsZW5kRXF1YXRpb24hPT1jdXJyZW50QmxlbmRFcXVhdGlvbnx8YmxlbmRFcXVhdGlvbkFscGhhIT09Y3VycmVudEJsZW5kRXF1YXRpb25BbHBoYSl7Z2wuYmxlbmRFcXVhdGlvblNlcGFyYXRlKHV0aWxzLmNvbnZlcnQoYmxlbmRFcXVhdGlvbiksdXRpbHMuY29udmVydChibGVuZEVxdWF0aW9uQWxwaGEpKTtjdXJyZW50QmxlbmRFcXVhdGlvbj1ibGVuZEVxdWF0aW9uO2N1cnJlbnRCbGVuZEVxdWF0aW9uQWxwaGE9YmxlbmRFcXVhdGlvbkFscGhhO31pZihibGVuZFNyYyE9PWN1cnJlbnRCbGVuZFNyY3x8YmxlbmREc3QhPT1jdXJyZW50QmxlbmREc3R8fGJsZW5kU3JjQWxwaGEhPT1jdXJyZW50QmxlbmRTcmNBbHBoYXx8YmxlbmREc3RBbHBoYSE9PWN1cnJlbnRCbGVuZERzdEFscGhhKXtnbC5ibGVuZEZ1bmNTZXBhcmF0ZSh1dGlscy5jb252ZXJ0KGJsZW5kU3JjKSx1dGlscy5jb252ZXJ0KGJsZW5kRHN0KSx1dGlscy5jb252ZXJ0KGJsZW5kU3JjQWxwaGEpLHV0aWxzLmNvbnZlcnQoYmxlbmREc3RBbHBoYSkpO2N1cnJlbnRCbGVuZFNyYz1ibGVuZFNyYztjdXJyZW50QmxlbmREc3Q9YmxlbmREc3Q7Y3VycmVudEJsZW5kU3JjQWxwaGE9YmxlbmRTcmNBbHBoYTtjdXJyZW50QmxlbmREc3RBbHBoYT1ibGVuZERzdEFscGhhO319Y3VycmVudEJsZW5kaW5nPWJsZW5kaW5nO2N1cnJlbnRQcmVtdWx0aXBsZWRBbHBoYT1wcmVtdWx0aXBsaWVkQWxwaGE7fWZ1bmN0aW9uIHNldE1hdGVyaWFsKG1hdGVyaWFsLGZyb250RmFjZUNXKXttYXRlcmlhbC5zaWRlPT09RG91YmxlU2lkZT9kaXNhYmxlKGdsLkNVTExfRkFDRSk6ZW5hYmxlKGdsLkNVTExfRkFDRSk7dmFyIGZsaXBTaWRlZD1tYXRlcmlhbC5zaWRlPT09QmFja1NpZGU7aWYoZnJvbnRGYWNlQ1cpZmxpcFNpZGVkPSFmbGlwU2lkZWQ7c2V0RmxpcFNpZGVkKGZsaXBTaWRlZCk7bWF0ZXJpYWwudHJhbnNwYXJlbnQ9PT10cnVlP3NldEJsZW5kaW5nKG1hdGVyaWFsLmJsZW5kaW5nLG1hdGVyaWFsLmJsZW5kRXF1YXRpb24sbWF0ZXJpYWwuYmxlbmRTcmMsbWF0ZXJpYWwuYmxlbmREc3QsbWF0ZXJpYWwuYmxlbmRFcXVhdGlvbkFscGhhLG1hdGVyaWFsLmJsZW5kU3JjQWxwaGEsbWF0ZXJpYWwuYmxlbmREc3RBbHBoYSxtYXRlcmlhbC5wcmVtdWx0aXBsaWVkQWxwaGEpOnNldEJsZW5kaW5nKE5vQmxlbmRpbmcpO2RlcHRoQnVmZmVyLnNldEZ1bmMobWF0ZXJpYWwuZGVwdGhGdW5jKTtkZXB0aEJ1ZmZlci5zZXRUZXN0KG1hdGVyaWFsLmRlcHRoVGVzdCk7ZGVwdGhCdWZmZXIuc2V0TWFzayhtYXRlcmlhbC5kZXB0aFdyaXRlKTtjb2xvckJ1ZmZlci5zZXRNYXNrKG1hdGVyaWFsLmNvbG9yV3JpdGUpO3NldFBvbHlnb25PZmZzZXQobWF0ZXJpYWwucG9seWdvbk9mZnNldCxtYXRlcmlhbC5wb2x5Z29uT2Zmc2V0RmFjdG9yLG1hdGVyaWFsLnBvbHlnb25PZmZzZXRVbml0cyk7fS8vCmZ1bmN0aW9uIHNldEZsaXBTaWRlZChmbGlwU2lkZWQpe2lmKGN1cnJlbnRGbGlwU2lkZWQhPT1mbGlwU2lkZWQpe2lmKGZsaXBTaWRlZCl7Z2wuZnJvbnRGYWNlKGdsLkNXKTt9ZWxzZXtnbC5mcm9udEZhY2UoZ2wuQ0NXKTt9Y3VycmVudEZsaXBTaWRlZD1mbGlwU2lkZWQ7fX1mdW5jdGlvbiBzZXRDdWxsRmFjZShjdWxsRmFjZSl7aWYoY3VsbEZhY2UhPT1DdWxsRmFjZU5vbmUpe2VuYWJsZShnbC5DVUxMX0ZBQ0UpO2lmKGN1bGxGYWNlIT09Y3VycmVudEN1bGxGYWNlKXtpZihjdWxsRmFjZT09PUN1bGxGYWNlQmFjayl7Z2wuY3VsbEZhY2UoZ2wuQkFDSyk7fWVsc2UgaWYoY3VsbEZhY2U9PT1DdWxsRmFjZUZyb250KXtnbC5jdWxsRmFjZShnbC5GUk9OVCk7fWVsc2V7Z2wuY3VsbEZhY2UoZ2wuRlJPTlRfQU5EX0JBQ0spO319fWVsc2V7ZGlzYWJsZShnbC5DVUxMX0ZBQ0UpO31jdXJyZW50Q3VsbEZhY2U9Y3VsbEZhY2U7fWZ1bmN0aW9uIHNldExpbmVXaWR0aCh3aWR0aCl7aWYod2lkdGghPT1jdXJyZW50TGluZVdpZHRoKXtpZihsaW5lV2lkdGhBdmFpbGFibGUpZ2wubGluZVdpZHRoKHdpZHRoKTtjdXJyZW50TGluZVdpZHRoPXdpZHRoO319ZnVuY3Rpb24gc2V0UG9seWdvbk9mZnNldChwb2x5Z29uT2Zmc2V0LGZhY3Rvcix1bml0cyl7aWYocG9seWdvbk9mZnNldCl7ZW5hYmxlKGdsLlBPTFlHT05fT0ZGU0VUX0ZJTEwpO2lmKGN1cnJlbnRQb2x5Z29uT2Zmc2V0RmFjdG9yIT09ZmFjdG9yfHxjdXJyZW50UG9seWdvbk9mZnNldFVuaXRzIT09dW5pdHMpe2dsLnBvbHlnb25PZmZzZXQoZmFjdG9yLHVuaXRzKTtjdXJyZW50UG9seWdvbk9mZnNldEZhY3Rvcj1mYWN0b3I7Y3VycmVudFBvbHlnb25PZmZzZXRVbml0cz11bml0czt9fWVsc2V7ZGlzYWJsZShnbC5QT0xZR09OX09GRlNFVF9GSUxMKTt9fWZ1bmN0aW9uIHNldFNjaXNzb3JUZXN0KHNjaXNzb3JUZXN0KXtpZihzY2lzc29yVGVzdCl7ZW5hYmxlKGdsLlNDSVNTT1JfVEVTVCk7fWVsc2V7ZGlzYWJsZShnbC5TQ0lTU09SX1RFU1QpO319Ly8gdGV4dHVyZQpmdW5jdGlvbiBhY3RpdmVUZXh0dXJlKHdlYmdsU2xvdCl7aWYod2ViZ2xTbG90PT09dW5kZWZpbmVkKXdlYmdsU2xvdD1nbC5URVhUVVJFMCttYXhUZXh0dXJlcy0xO2lmKGN1cnJlbnRUZXh0dXJlU2xvdCE9PXdlYmdsU2xvdCl7Z2wuYWN0aXZlVGV4dHVyZSh3ZWJnbFNsb3QpO2N1cnJlbnRUZXh0dXJlU2xvdD13ZWJnbFNsb3Q7fX1mdW5jdGlvbiBiaW5kVGV4dHVyZSh3ZWJnbFR5cGUsd2ViZ2xUZXh0dXJlKXtpZihjdXJyZW50VGV4dHVyZVNsb3Q9PT1udWxsKXthY3RpdmVUZXh0dXJlKCk7fXZhciBib3VuZFRleHR1cmU9Y3VycmVudEJvdW5kVGV4dHVyZXNbY3VycmVudFRleHR1cmVTbG90XTtpZihib3VuZFRleHR1cmU9PT11bmRlZmluZWQpe2JvdW5kVGV4dHVyZT17dHlwZTp1bmRlZmluZWQsdGV4dHVyZTp1bmRlZmluZWR9O2N1cnJlbnRCb3VuZFRleHR1cmVzW2N1cnJlbnRUZXh0dXJlU2xvdF09Ym91bmRUZXh0dXJlO31pZihib3VuZFRleHR1cmUudHlwZSE9PXdlYmdsVHlwZXx8Ym91bmRUZXh0dXJlLnRleHR1cmUhPT13ZWJnbFRleHR1cmUpe2dsLmJpbmRUZXh0dXJlKHdlYmdsVHlwZSx3ZWJnbFRleHR1cmV8fGVtcHR5VGV4dHVyZXNbd2ViZ2xUeXBlXSk7Ym91bmRUZXh0dXJlLnR5cGU9d2ViZ2xUeXBlO2JvdW5kVGV4dHVyZS50ZXh0dXJlPXdlYmdsVGV4dHVyZTt9fWZ1bmN0aW9uIGNvbXByZXNzZWRUZXhJbWFnZTJEKCl7dHJ5e2dsLmNvbXByZXNzZWRUZXhJbWFnZTJELmFwcGx5KGdsLGFyZ3VtZW50cyk7fWNhdGNoKGVycm9yKXtjb25zb2xlLmVycm9yKCdUSFJFRS5XZWJHTFN0YXRlOicsZXJyb3IpO319ZnVuY3Rpb24gdGV4SW1hZ2UyRCgpe3RyeXtnbC50ZXhJbWFnZTJELmFwcGx5KGdsLGFyZ3VtZW50cyk7fWNhdGNoKGVycm9yKXtjb25zb2xlLmVycm9yKCdUSFJFRS5XZWJHTFN0YXRlOicsZXJyb3IpO319Ly8KZnVuY3Rpb24gc2Npc3NvcihzY2lzc29yKXtpZihjdXJyZW50U2Npc3Nvci5lcXVhbHMoc2Npc3Nvcik9PT1mYWxzZSl7Z2wuc2Npc3NvcihzY2lzc29yLngsc2Npc3Nvci55LHNjaXNzb3IueixzY2lzc29yLncpO2N1cnJlbnRTY2lzc29yLmNvcHkoc2Npc3Nvcik7fX1mdW5jdGlvbiB2aWV3cG9ydCh2aWV3cG9ydCl7aWYoY3VycmVudFZpZXdwb3J0LmVxdWFscyh2aWV3cG9ydCk9PT1mYWxzZSl7Z2wudmlld3BvcnQodmlld3BvcnQueCx2aWV3cG9ydC55LHZpZXdwb3J0Lnosdmlld3BvcnQudyk7Y3VycmVudFZpZXdwb3J0LmNvcHkodmlld3BvcnQpO319Ly8KZnVuY3Rpb24gcmVzZXQoKXtmb3IodmFyIGk9MDtpPGVuYWJsZWRBdHRyaWJ1dGVzLmxlbmd0aDtpKyspe2lmKGVuYWJsZWRBdHRyaWJ1dGVzW2ldPT09MSl7Z2wuZGlzYWJsZVZlcnRleEF0dHJpYkFycmF5KGkpO2VuYWJsZWRBdHRyaWJ1dGVzW2ldPTA7fX1jYXBhYmlsaXRpZXM9e307Y29tcHJlc3NlZFRleHR1cmVGb3JtYXRzPW51bGw7Y3VycmVudFRleHR1cmVTbG90PW51bGw7Y3VycmVudEJvdW5kVGV4dHVyZXM9e307Y3VycmVudFByb2dyYW09bnVsbDtjdXJyZW50QmxlbmRpbmc9bnVsbDtjdXJyZW50RmxpcFNpZGVkPW51bGw7Y3VycmVudEN1bGxGYWNlPW51bGw7Y29sb3JCdWZmZXIucmVzZXQoKTtkZXB0aEJ1ZmZlci5yZXNldCgpO3N0ZW5jaWxCdWZmZXIucmVzZXQoKTt9cmV0dXJue2J1ZmZlcnM6e2NvbG9yOmNvbG9yQnVmZmVyLGRlcHRoOmRlcHRoQnVmZmVyLHN0ZW5jaWw6c3RlbmNpbEJ1ZmZlcn0saW5pdEF0dHJpYnV0ZXM6aW5pdEF0dHJpYnV0ZXMsZW5hYmxlQXR0cmlidXRlOmVuYWJsZUF0dHJpYnV0ZSxlbmFibGVBdHRyaWJ1dGVBbmREaXZpc29yOmVuYWJsZUF0dHJpYnV0ZUFuZERpdmlzb3IsZGlzYWJsZVVudXNlZEF0dHJpYnV0ZXM6ZGlzYWJsZVVudXNlZEF0dHJpYnV0ZXMsZW5hYmxlOmVuYWJsZSxkaXNhYmxlOmRpc2FibGUsZ2V0Q29tcHJlc3NlZFRleHR1cmVGb3JtYXRzOmdldENvbXByZXNzZWRUZXh0dXJlRm9ybWF0cyx1c2VQcm9ncmFtOnVzZVByb2dyYW0sc2V0QmxlbmRpbmc6c2V0QmxlbmRpbmcsc2V0TWF0ZXJpYWw6c2V0TWF0ZXJpYWwsc2V0RmxpcFNpZGVkOnNldEZsaXBTaWRlZCxzZXRDdWxsRmFjZTpzZXRDdWxsRmFjZSxzZXRMaW5lV2lkdGg6c2V0TGluZVdpZHRoLHNldFBvbHlnb25PZmZzZXQ6c2V0UG9seWdvbk9mZnNldCxzZXRTY2lzc29yVGVzdDpzZXRTY2lzc29yVGVzdCxhY3RpdmVUZXh0dXJlOmFjdGl2ZVRleHR1cmUsYmluZFRleHR1cmU6YmluZFRleHR1cmUsY29tcHJlc3NlZFRleEltYWdlMkQ6Y29tcHJlc3NlZFRleEltYWdlMkQsdGV4SW1hZ2UyRDp0ZXhJbWFnZTJELHNjaXNzb3I6c2Npc3Nvcix2aWV3cG9ydDp2aWV3cG9ydCxyZXNldDpyZXNldH07fS8qKgogKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tLwogKi9mdW5jdGlvbiBXZWJHTENhcGFiaWxpdGllcyhnbCxleHRlbnNpb25zLHBhcmFtZXRlcnMpe3ZhciBtYXhBbmlzb3Ryb3B5O2Z1bmN0aW9uIGdldE1heEFuaXNvdHJvcHkoKXtpZihtYXhBbmlzb3Ryb3B5IT09dW5kZWZpbmVkKXJldHVybiBtYXhBbmlzb3Ryb3B5O3ZhciBleHRlbnNpb249ZXh0ZW5zaW9ucy5nZXQoJ0VYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpYycpO2lmKGV4dGVuc2lvbiE9PW51bGwpe21heEFuaXNvdHJvcHk9Z2wuZ2V0UGFyYW1ldGVyKGV4dGVuc2lvbi5NQVhfVEVYVFVSRV9NQVhfQU5JU09UUk9QWV9FWFQpO31lbHNle21heEFuaXNvdHJvcHk9MDt9cmV0dXJuIG1heEFuaXNvdHJvcHk7fWZ1bmN0aW9uIGdldE1heFByZWNpc2lvbihwcmVjaXNpb24pe2lmKHByZWNpc2lvbj09PSdoaWdocCcpe2lmKGdsLmdldFNoYWRlclByZWNpc2lvbkZvcm1hdChnbC5WRVJURVhfU0hBREVSLGdsLkhJR0hfRkxPQVQpLnByZWNpc2lvbj4wJiZnbC5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQoZ2wuRlJBR01FTlRfU0hBREVSLGdsLkhJR0hfRkxPQVQpLnByZWNpc2lvbj4wKXtyZXR1cm4naGlnaHAnO31wcmVjaXNpb249J21lZGl1bXAnO31pZihwcmVjaXNpb249PT0nbWVkaXVtcCcpe2lmKGdsLmdldFNoYWRlclByZWNpc2lvbkZvcm1hdChnbC5WRVJURVhfU0hBREVSLGdsLk1FRElVTV9GTE9BVCkucHJlY2lzaW9uPjAmJmdsLmdldFNoYWRlclByZWNpc2lvbkZvcm1hdChnbC5GUkFHTUVOVF9TSEFERVIsZ2wuTUVESVVNX0ZMT0FUKS5wcmVjaXNpb24+MCl7cmV0dXJuJ21lZGl1bXAnO319cmV0dXJuJ2xvd3AnO312YXIgcHJlY2lzaW9uPXBhcmFtZXRlcnMucHJlY2lzaW9uIT09dW5kZWZpbmVkP3BhcmFtZXRlcnMucHJlY2lzaW9uOidoaWdocCc7dmFyIG1heFByZWNpc2lvbj1nZXRNYXhQcmVjaXNpb24ocHJlY2lzaW9uKTtpZihtYXhQcmVjaXNpb24hPT1wcmVjaXNpb24pe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJlcjonLHByZWNpc2lvbiwnbm90IHN1cHBvcnRlZCwgdXNpbmcnLG1heFByZWNpc2lvbiwnaW5zdGVhZC4nKTtwcmVjaXNpb249bWF4UHJlY2lzaW9uO312YXIgbG9nYXJpdGhtaWNEZXB0aEJ1ZmZlcj1wYXJhbWV0ZXJzLmxvZ2FyaXRobWljRGVwdGhCdWZmZXI9PT10cnVlO3ZhciBtYXhUZXh0dXJlcz1nbC5nZXRQYXJhbWV0ZXIoZ2wuTUFYX1RFWFRVUkVfSU1BR0VfVU5JVFMpO3ZhciBtYXhWZXJ0ZXhUZXh0dXJlcz1nbC5nZXRQYXJhbWV0ZXIoZ2wuTUFYX1ZFUlRFWF9URVhUVVJFX0lNQUdFX1VOSVRTKTt2YXIgbWF4VGV4dHVyZVNpemU9Z2wuZ2V0UGFyYW1ldGVyKGdsLk1BWF9URVhUVVJFX1NJWkUpO3ZhciBtYXhDdWJlbWFwU2l6ZT1nbC5nZXRQYXJhbWV0ZXIoZ2wuTUFYX0NVQkVfTUFQX1RFWFRVUkVfU0laRSk7dmFyIG1heEF0dHJpYnV0ZXM9Z2wuZ2V0UGFyYW1ldGVyKGdsLk1BWF9WRVJURVhfQVRUUklCUyk7dmFyIG1heFZlcnRleFVuaWZvcm1zPWdsLmdldFBhcmFtZXRlcihnbC5NQVhfVkVSVEVYX1VOSUZPUk1fVkVDVE9SUyk7dmFyIG1heFZhcnlpbmdzPWdsLmdldFBhcmFtZXRlcihnbC5NQVhfVkFSWUlOR19WRUNUT1JTKTt2YXIgbWF4RnJhZ21lbnRVbmlmb3Jtcz1nbC5nZXRQYXJhbWV0ZXIoZ2wuTUFYX0ZSQUdNRU5UX1VOSUZPUk1fVkVDVE9SUyk7dmFyIHZlcnRleFRleHR1cmVzPW1heFZlcnRleFRleHR1cmVzPjA7dmFyIGZsb2F0RnJhZ21lbnRUZXh0dXJlcz0hIWV4dGVuc2lvbnMuZ2V0KCdPRVNfdGV4dHVyZV9mbG9hdCcpO3ZhciBmbG9hdFZlcnRleFRleHR1cmVzPXZlcnRleFRleHR1cmVzJiZmbG9hdEZyYWdtZW50VGV4dHVyZXM7cmV0dXJue2dldE1heEFuaXNvdHJvcHk6Z2V0TWF4QW5pc290cm9weSxnZXRNYXhQcmVjaXNpb246Z2V0TWF4UHJlY2lzaW9uLHByZWNpc2lvbjpwcmVjaXNpb24sbG9nYXJpdGhtaWNEZXB0aEJ1ZmZlcjpsb2dhcml0aG1pY0RlcHRoQnVmZmVyLG1heFRleHR1cmVzOm1heFRleHR1cmVzLG1heFZlcnRleFRleHR1cmVzOm1heFZlcnRleFRleHR1cmVzLG1heFRleHR1cmVTaXplOm1heFRleHR1cmVTaXplLG1heEN1YmVtYXBTaXplOm1heEN1YmVtYXBTaXplLG1heEF0dHJpYnV0ZXM6bWF4QXR0cmlidXRlcyxtYXhWZXJ0ZXhVbmlmb3JtczptYXhWZXJ0ZXhVbmlmb3JtcyxtYXhWYXJ5aW5nczptYXhWYXJ5aW5ncyxtYXhGcmFnbWVudFVuaWZvcm1zOm1heEZyYWdtZW50VW5pZm9ybXMsdmVydGV4VGV4dHVyZXM6dmVydGV4VGV4dHVyZXMsZmxvYXRGcmFnbWVudFRleHR1cmVzOmZsb2F0RnJhZ21lbnRUZXh0dXJlcyxmbG9hdFZlcnRleFRleHR1cmVzOmZsb2F0VmVydGV4VGV4dHVyZXN9O30vKioKICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS8KICogQGF1dGhvciBncmVnZ21hbiAvIGh0dHA6Ly9nYW1lcy5ncmVnZ21hbi5jb20vCiAqIEBhdXRob3Igeno4NSAvIGh0dHA6Ly93d3cubGFiNGdhbWVzLm5ldC96ejg1L2Jsb2cKICogQGF1dGhvciB0c2NodwogKi9mdW5jdGlvbiBQZXJzcGVjdGl2ZUNhbWVyYShmb3YsYXNwZWN0LG5lYXIsZmFyKXtDYW1lcmEuY2FsbCh0aGlzKTt0aGlzLnR5cGU9J1BlcnNwZWN0aXZlQ2FtZXJhJzt0aGlzLmZvdj1mb3YhPT11bmRlZmluZWQ/Zm92OjUwO3RoaXMuem9vbT0xO3RoaXMubmVhcj1uZWFyIT09dW5kZWZpbmVkP25lYXI6MC4xO3RoaXMuZmFyPWZhciE9PXVuZGVmaW5lZD9mYXI6MjAwMDt0aGlzLmZvY3VzPTEwO3RoaXMuYXNwZWN0PWFzcGVjdCE9PXVuZGVmaW5lZD9hc3BlY3Q6MTt0aGlzLnZpZXc9bnVsbDt0aGlzLmZpbG1HYXVnZT0zNTsvLyB3aWR0aCBvZiB0aGUgZmlsbSAoZGVmYXVsdCBpbiBtaWxsaW1ldGVycykKdGhpcy5maWxtT2Zmc2V0PTA7Ly8gaG9yaXpvbnRhbCBmaWxtIG9mZnNldCAoc2FtZSB1bml0IGFzIGdhdWdlKQp0aGlzLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTt9UGVyc3BlY3RpdmVDYW1lcmEucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShDYW1lcmEucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6UGVyc3BlY3RpdmVDYW1lcmEsaXNQZXJzcGVjdGl2ZUNhbWVyYTp0cnVlLGNvcHk6ZnVuY3Rpb24gY29weShzb3VyY2UscmVjdXJzaXZlKXtDYW1lcmEucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHNvdXJjZSxyZWN1cnNpdmUpO3RoaXMuZm92PXNvdXJjZS5mb3Y7dGhpcy56b29tPXNvdXJjZS56b29tO3RoaXMubmVhcj1zb3VyY2UubmVhcjt0aGlzLmZhcj1zb3VyY2UuZmFyO3RoaXMuZm9jdXM9c291cmNlLmZvY3VzO3RoaXMuYXNwZWN0PXNvdXJjZS5hc3BlY3Q7dGhpcy52aWV3PXNvdXJjZS52aWV3PT09bnVsbD9udWxsOk9iamVjdC5hc3NpZ24oe30sc291cmNlLnZpZXcpO3RoaXMuZmlsbUdhdWdlPXNvdXJjZS5maWxtR2F1Z2U7dGhpcy5maWxtT2Zmc2V0PXNvdXJjZS5maWxtT2Zmc2V0O3JldHVybiB0aGlzO30sLyoqCgkgKiBTZXRzIHRoZSBGT1YgYnkgZm9jYWwgbGVuZ3RoIGluIHJlc3BlY3QgdG8gdGhlIGN1cnJlbnQgLmZpbG1HYXVnZS4KCSAqCgkgKiBUaGUgZGVmYXVsdCBmaWxtIGdhdWdlIGlzIDM1LCBzbyB0aGF0IHRoZSBmb2NhbCBsZW5ndGggY2FuIGJlIHNwZWNpZmllZCBmb3IKCSAqIGEgMzVtbSAoZnVsbCBmcmFtZSkgY2FtZXJhLgoJICoKCSAqIFZhbHVlcyBmb3IgZm9jYWwgbGVuZ3RoIGFuZCBmaWxtIGdhdWdlIG11c3QgaGF2ZSB0aGUgc2FtZSB1bml0LgoJICovc2V0Rm9jYWxMZW5ndGg6ZnVuY3Rpb24gc2V0Rm9jYWxMZW5ndGgoZm9jYWxMZW5ndGgpey8vIHNlZSBodHRwOi8vd3d3LmJvYmF0a2lucy5jb20vcGhvdG9ncmFwaHkvdGVjaG5pY2FsL2ZpZWxkX29mX3ZpZXcuaHRtbAp2YXIgdkV4dGVudFNsb3BlPTAuNSp0aGlzLmdldEZpbG1IZWlnaHQoKS9mb2NhbExlbmd0aDt0aGlzLmZvdj1fTWF0aC5SQUQyREVHKjIqTWF0aC5hdGFuKHZFeHRlbnRTbG9wZSk7dGhpcy51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7fSwvKioKCSAqIENhbGN1bGF0ZXMgdGhlIGZvY2FsIGxlbmd0aCBmcm9tIHRoZSBjdXJyZW50IC5mb3YgYW5kIC5maWxtR2F1Z2UuCgkgKi9nZXRGb2NhbExlbmd0aDpmdW5jdGlvbiBnZXRGb2NhbExlbmd0aCgpe3ZhciB2RXh0ZW50U2xvcGU9TWF0aC50YW4oX01hdGguREVHMlJBRCowLjUqdGhpcy5mb3YpO3JldHVybiAwLjUqdGhpcy5nZXRGaWxtSGVpZ2h0KCkvdkV4dGVudFNsb3BlO30sZ2V0RWZmZWN0aXZlRk9WOmZ1bmN0aW9uIGdldEVmZmVjdGl2ZUZPVigpe3JldHVybiBfTWF0aC5SQUQyREVHKjIqTWF0aC5hdGFuKE1hdGgudGFuKF9NYXRoLkRFRzJSQUQqMC41KnRoaXMuZm92KS90aGlzLnpvb20pO30sZ2V0RmlsbVdpZHRoOmZ1bmN0aW9uIGdldEZpbG1XaWR0aCgpey8vIGZpbG0gbm90IGNvbXBsZXRlbHkgY292ZXJlZCBpbiBwb3J0cmFpdCBmb3JtYXQgKGFzcGVjdCA8IDEpCnJldHVybiB0aGlzLmZpbG1HYXVnZSpNYXRoLm1pbih0aGlzLmFzcGVjdCwxKTt9LGdldEZpbG1IZWlnaHQ6ZnVuY3Rpb24gZ2V0RmlsbUhlaWdodCgpey8vIGZpbG0gbm90IGNvbXBsZXRlbHkgY292ZXJlZCBpbiBsYW5kc2NhcGUgZm9ybWF0IChhc3BlY3QgPiAxKQpyZXR1cm4gdGhpcy5maWxtR2F1Z2UvTWF0aC5tYXgodGhpcy5hc3BlY3QsMSk7fSwvKioKCSAqIFNldHMgYW4gb2Zmc2V0IGluIGEgbGFyZ2VyIGZydXN0dW0uIFRoaXMgaXMgdXNlZnVsIGZvciBtdWx0aS13aW5kb3cgb3IKCSAqIG11bHRpLW1vbml0b3IvbXVsdGktbWFjaGluZSBzZXR1cHMuCgkgKgoJICogRm9yIGV4YW1wbGUsIGlmIHlvdSBoYXZlIDN4MiBtb25pdG9ycyBhbmQgZWFjaCBtb25pdG9yIGlzIDE5MjB4MTA4MCBhbmQKCSAqIHRoZSBtb25pdG9ycyBhcmUgaW4gZ3JpZCBsaWtlIHRoaXMKCSAqCgkgKiAgICstLS0rLS0tKy0tLSsKCSAqICAgfCBBIHwgQiB8IEMgfAoJICogICArLS0tKy0tLSstLS0rCgkgKiAgIHwgRCB8IEUgfCBGIHwKCSAqICAgKy0tLSstLS0rLS0tKwoJICoKCSAqIHRoZW4gZm9yIGVhY2ggbW9uaXRvciB5b3Ugd291bGQgY2FsbCBpdCBsaWtlIHRoaXMKCSAqCgkgKiAgIHZhciB3ID0gMTkyMDsKCSAqICAgdmFyIGggPSAxMDgwOwoJICogICB2YXIgZnVsbFdpZHRoID0gdyAqIDM7CgkgKiAgIHZhciBmdWxsSGVpZ2h0ID0gaCAqIDI7CgkgKgoJICogICAtLUEtLQoJICogICBjYW1lcmEuc2V0T2Zmc2V0KCBmdWxsV2lkdGgsIGZ1bGxIZWlnaHQsIHcgKiAwLCBoICogMCwgdywgaCApOwoJICogICAtLUItLQoJICogICBjYW1lcmEuc2V0T2Zmc2V0KCBmdWxsV2lkdGgsIGZ1bGxIZWlnaHQsIHcgKiAxLCBoICogMCwgdywgaCApOwoJICogICAtLUMtLQoJICogICBjYW1lcmEuc2V0T2Zmc2V0KCBmdWxsV2lkdGgsIGZ1bGxIZWlnaHQsIHcgKiAyLCBoICogMCwgdywgaCApOwoJICogICAtLUQtLQoJICogICBjYW1lcmEuc2V0T2Zmc2V0KCBmdWxsV2lkdGgsIGZ1bGxIZWlnaHQsIHcgKiAwLCBoICogMSwgdywgaCApOwoJICogICAtLUUtLQoJICogICBjYW1lcmEuc2V0T2Zmc2V0KCBmdWxsV2lkdGgsIGZ1bGxIZWlnaHQsIHcgKiAxLCBoICogMSwgdywgaCApOwoJICogICAtLUYtLQoJICogICBjYW1lcmEuc2V0T2Zmc2V0KCBmdWxsV2lkdGgsIGZ1bGxIZWlnaHQsIHcgKiAyLCBoICogMSwgdywgaCApOwoJICoKCSAqICAgTm90ZSB0aGVyZSBpcyBubyByZWFzb24gbW9uaXRvcnMgaGF2ZSB0byBiZSB0aGUgc2FtZSBzaXplIG9yIGluIGEgZ3JpZC4KCSAqL3NldFZpZXdPZmZzZXQ6ZnVuY3Rpb24gc2V0Vmlld09mZnNldChmdWxsV2lkdGgsZnVsbEhlaWdodCx4LHksd2lkdGgsaGVpZ2h0KXt0aGlzLmFzcGVjdD1mdWxsV2lkdGgvZnVsbEhlaWdodDtpZih0aGlzLnZpZXc9PT1udWxsKXt0aGlzLnZpZXc9e2VuYWJsZWQ6dHJ1ZSxmdWxsV2lkdGg6MSxmdWxsSGVpZ2h0OjEsb2Zmc2V0WDowLG9mZnNldFk6MCx3aWR0aDoxLGhlaWdodDoxfTt9dGhpcy52aWV3LmVuYWJsZWQ9dHJ1ZTt0aGlzLnZpZXcuZnVsbFdpZHRoPWZ1bGxXaWR0aDt0aGlzLnZpZXcuZnVsbEhlaWdodD1mdWxsSGVpZ2h0O3RoaXMudmlldy5vZmZzZXRYPXg7dGhpcy52aWV3Lm9mZnNldFk9eTt0aGlzLnZpZXcud2lkdGg9d2lkdGg7dGhpcy52aWV3LmhlaWdodD1oZWlnaHQ7dGhpcy51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7fSxjbGVhclZpZXdPZmZzZXQ6ZnVuY3Rpb24gY2xlYXJWaWV3T2Zmc2V0KCl7aWYodGhpcy52aWV3IT09bnVsbCl7dGhpcy52aWV3LmVuYWJsZWQ9ZmFsc2U7fXRoaXMudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO30sdXBkYXRlUHJvamVjdGlvbk1hdHJpeDpmdW5jdGlvbiB1cGRhdGVQcm9qZWN0aW9uTWF0cml4KCl7dmFyIG5lYXI9dGhpcy5uZWFyLHRvcD1uZWFyKk1hdGgudGFuKF9NYXRoLkRFRzJSQUQqMC41KnRoaXMuZm92KS90aGlzLnpvb20saGVpZ2h0PTIqdG9wLHdpZHRoPXRoaXMuYXNwZWN0KmhlaWdodCxsZWZ0PS0wLjUqd2lkdGgsdmlldz10aGlzLnZpZXc7aWYodGhpcy52aWV3IT09bnVsbCYmdGhpcy52aWV3LmVuYWJsZWQpe3ZhciBmdWxsV2lkdGg9dmlldy5mdWxsV2lkdGgsZnVsbEhlaWdodD12aWV3LmZ1bGxIZWlnaHQ7bGVmdCs9dmlldy5vZmZzZXRYKndpZHRoL2Z1bGxXaWR0aDt0b3AtPXZpZXcub2Zmc2V0WSpoZWlnaHQvZnVsbEhlaWdodDt3aWR0aCo9dmlldy53aWR0aC9mdWxsV2lkdGg7aGVpZ2h0Kj12aWV3LmhlaWdodC9mdWxsSGVpZ2h0O312YXIgc2tldz10aGlzLmZpbG1PZmZzZXQ7aWYoc2tldyE9PTApbGVmdCs9bmVhcipza2V3L3RoaXMuZ2V0RmlsbVdpZHRoKCk7dGhpcy5wcm9qZWN0aW9uTWF0cml4Lm1ha2VQZXJzcGVjdGl2ZShsZWZ0LGxlZnQrd2lkdGgsdG9wLHRvcC1oZWlnaHQsbmVhcix0aGlzLmZhcik7fSx0b0pTT046ZnVuY3Rpb24gdG9KU09OKG1ldGEpe3ZhciBkYXRhPU9iamVjdDNELnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzLG1ldGEpO2RhdGEub2JqZWN0LmZvdj10aGlzLmZvdjtkYXRhLm9iamVjdC56b29tPXRoaXMuem9vbTtkYXRhLm9iamVjdC5uZWFyPXRoaXMubmVhcjtkYXRhLm9iamVjdC5mYXI9dGhpcy5mYXI7ZGF0YS5vYmplY3QuZm9jdXM9dGhpcy5mb2N1cztkYXRhLm9iamVjdC5hc3BlY3Q9dGhpcy5hc3BlY3Q7aWYodGhpcy52aWV3IT09bnVsbClkYXRhLm9iamVjdC52aWV3PU9iamVjdC5hc3NpZ24oe30sdGhpcy52aWV3KTtkYXRhLm9iamVjdC5maWxtR2F1Z2U9dGhpcy5maWxtR2F1Z2U7ZGF0YS5vYmplY3QuZmlsbU9mZnNldD10aGlzLmZpbG1PZmZzZXQ7cmV0dXJuIGRhdGE7fX0pOy8qKgogKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tLwogKi9mdW5jdGlvbiBBcnJheUNhbWVyYShhcnJheSl7UGVyc3BlY3RpdmVDYW1lcmEuY2FsbCh0aGlzKTt0aGlzLmNhbWVyYXM9YXJyYXl8fFtdO31BcnJheUNhbWVyYS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFBlcnNwZWN0aXZlQ2FtZXJhLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOkFycmF5Q2FtZXJhLGlzQXJyYXlDYW1lcmE6dHJ1ZX0pOy8qKgogKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tLwogKi9mdW5jdGlvbiBXZWJWUk1hbmFnZXIocmVuZGVyZXIpe3ZhciBzY29wZT10aGlzO3ZhciBkZXZpY2U9bnVsbDt2YXIgZnJhbWVEYXRhPW51bGw7dmFyIHBvc2VUYXJnZXQ9bnVsbDtpZih0eXBlb2Ygd2luZG93IT09J3VuZGVmaW5lZCcmJidWUkZyYW1lRGF0YSdpbiB3aW5kb3cpe2ZyYW1lRGF0YT1uZXcgd2luZG93LlZSRnJhbWVEYXRhKCk7fXZhciBtYXRyaXhXb3JsZEludmVyc2U9bmV3IE1hdHJpeDQoKTt2YXIgY2FtZXJhTD1uZXcgUGVyc3BlY3RpdmVDYW1lcmEoKTtjYW1lcmFMLmJvdW5kcz1uZXcgVmVjdG9yNCgwLjAsMC4wLDAuNSwxLjApO2NhbWVyYUwubGF5ZXJzLmVuYWJsZSgxKTt2YXIgY2FtZXJhUj1uZXcgUGVyc3BlY3RpdmVDYW1lcmEoKTtjYW1lcmFSLmJvdW5kcz1uZXcgVmVjdG9yNCgwLjUsMC4wLDAuNSwxLjApO2NhbWVyYVIubGF5ZXJzLmVuYWJsZSgyKTt2YXIgY2FtZXJhVlI9bmV3IEFycmF5Q2FtZXJhKFtjYW1lcmFMLGNhbWVyYVJdKTtjYW1lcmFWUi5sYXllcnMuZW5hYmxlKDEpO2NhbWVyYVZSLmxheWVycy5lbmFibGUoMik7Ly8KdmFyIGN1cnJlbnRTaXplLGN1cnJlbnRQaXhlbFJhdGlvO2Z1bmN0aW9uIG9uVlJEaXNwbGF5UHJlc2VudENoYW5nZSgpe2lmKGRldmljZSE9PW51bGwmJmRldmljZS5pc1ByZXNlbnRpbmcpe3ZhciBleWVQYXJhbWV0ZXJzPWRldmljZS5nZXRFeWVQYXJhbWV0ZXJzKCdsZWZ0Jyk7dmFyIHJlbmRlcldpZHRoPWV5ZVBhcmFtZXRlcnMucmVuZGVyV2lkdGg7dmFyIHJlbmRlckhlaWdodD1leWVQYXJhbWV0ZXJzLnJlbmRlckhlaWdodDtjdXJyZW50UGl4ZWxSYXRpbz1yZW5kZXJlci5nZXRQaXhlbFJhdGlvKCk7Y3VycmVudFNpemU9cmVuZGVyZXIuZ2V0U2l6ZSgpO3JlbmRlcmVyLnNldERyYXdpbmdCdWZmZXJTaXplKHJlbmRlcldpZHRoKjIscmVuZGVySGVpZ2h0LDEpO31lbHNlIGlmKHNjb3BlLmVuYWJsZWQpe3JlbmRlcmVyLnNldERyYXdpbmdCdWZmZXJTaXplKGN1cnJlbnRTaXplLndpZHRoLGN1cnJlbnRTaXplLmhlaWdodCxjdXJyZW50UGl4ZWxSYXRpbyk7fX1pZih0eXBlb2Ygd2luZG93IT09J3VuZGVmaW5lZCcpe3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd2cmRpc3BsYXlwcmVzZW50Y2hhbmdlJyxvblZSRGlzcGxheVByZXNlbnRDaGFuZ2UsZmFsc2UpO30vLwp0aGlzLmVuYWJsZWQ9ZmFsc2U7dGhpcy5nZXREZXZpY2U9ZnVuY3Rpb24oKXtyZXR1cm4gZGV2aWNlO307dGhpcy5zZXREZXZpY2U9ZnVuY3Rpb24odmFsdWUpe2lmKHZhbHVlIT09dW5kZWZpbmVkKWRldmljZT12YWx1ZTt9O3RoaXMuc2V0UG9zZVRhcmdldD1mdW5jdGlvbihvYmplY3Qpe2lmKG9iamVjdCE9PXVuZGVmaW5lZClwb3NlVGFyZ2V0PW9iamVjdDt9O3RoaXMuZ2V0Q2FtZXJhPWZ1bmN0aW9uKGNhbWVyYSl7aWYoZGV2aWNlPT09bnVsbClyZXR1cm4gY2FtZXJhO2RldmljZS5kZXB0aE5lYXI9Y2FtZXJhLm5lYXI7ZGV2aWNlLmRlcHRoRmFyPWNhbWVyYS5mYXI7ZGV2aWNlLmdldEZyYW1lRGF0YShmcmFtZURhdGEpOy8vCnZhciBwb3NlPWZyYW1lRGF0YS5wb3NlO3ZhciBwb3NlT2JqZWN0PXBvc2VUYXJnZXQhPT1udWxsP3Bvc2VUYXJnZXQ6Y2FtZXJhO2lmKHBvc2UucG9zaXRpb24hPT1udWxsKXtwb3NlT2JqZWN0LnBvc2l0aW9uLmZyb21BcnJheShwb3NlLnBvc2l0aW9uKTt9ZWxzZXtwb3NlT2JqZWN0LnBvc2l0aW9uLnNldCgwLDAsMCk7fWlmKHBvc2Uub3JpZW50YXRpb24hPT1udWxsKXtwb3NlT2JqZWN0LnF1YXRlcm5pb24uZnJvbUFycmF5KHBvc2Uub3JpZW50YXRpb24pO31wb3NlT2JqZWN0LnVwZGF0ZU1hdHJpeFdvcmxkKCk7aWYoZGV2aWNlLmlzUHJlc2VudGluZz09PWZhbHNlKXJldHVybiBjYW1lcmE7Ly8KY2FtZXJhTC5uZWFyPWNhbWVyYS5uZWFyO2NhbWVyYVIubmVhcj1jYW1lcmEubmVhcjtjYW1lcmFMLmZhcj1jYW1lcmEuZmFyO2NhbWVyYVIuZmFyPWNhbWVyYS5mYXI7Y2FtZXJhVlIubWF0cml4V29ybGQuY29weShjYW1lcmEubWF0cml4V29ybGQpO2NhbWVyYVZSLm1hdHJpeFdvcmxkSW52ZXJzZS5jb3B5KGNhbWVyYS5tYXRyaXhXb3JsZEludmVyc2UpO2NhbWVyYUwubWF0cml4V29ybGRJbnZlcnNlLmZyb21BcnJheShmcmFtZURhdGEubGVmdFZpZXdNYXRyaXgpO2NhbWVyYVIubWF0cml4V29ybGRJbnZlcnNlLmZyb21BcnJheShmcmFtZURhdGEucmlnaHRWaWV3TWF0cml4KTt2YXIgcGFyZW50PXBvc2VPYmplY3QucGFyZW50O2lmKHBhcmVudCE9PW51bGwpe21hdHJpeFdvcmxkSW52ZXJzZS5nZXRJbnZlcnNlKHBhcmVudC5tYXRyaXhXb3JsZCk7Y2FtZXJhTC5tYXRyaXhXb3JsZEludmVyc2UubXVsdGlwbHkobWF0cml4V29ybGRJbnZlcnNlKTtjYW1lcmFSLm1hdHJpeFdvcmxkSW52ZXJzZS5tdWx0aXBseShtYXRyaXhXb3JsZEludmVyc2UpO30vLyBlbnZNYXAgYW5kIE1pcnJvciBuZWVkcyBjYW1lcmEubWF0cml4V29ybGQKY2FtZXJhTC5tYXRyaXhXb3JsZC5nZXRJbnZlcnNlKGNhbWVyYUwubWF0cml4V29ybGRJbnZlcnNlKTtjYW1lcmFSLm1hdHJpeFdvcmxkLmdldEludmVyc2UoY2FtZXJhUi5tYXRyaXhXb3JsZEludmVyc2UpO2NhbWVyYUwucHJvamVjdGlvbk1hdHJpeC5mcm9tQXJyYXkoZnJhbWVEYXRhLmxlZnRQcm9qZWN0aW9uTWF0cml4KTtjYW1lcmFSLnByb2plY3Rpb25NYXRyaXguZnJvbUFycmF5KGZyYW1lRGF0YS5yaWdodFByb2plY3Rpb25NYXRyaXgpOy8vIEhBQ0sgQG1yZG9vYgovLyBodHRwczovL2dpdGh1Yi5jb20vdzNjL3dlYnZyL2lzc3Vlcy8yMDMKY2FtZXJhVlIucHJvamVjdGlvbk1hdHJpeC5jb3B5KGNhbWVyYUwucHJvamVjdGlvbk1hdHJpeCk7Ly8KdmFyIGxheWVycz1kZXZpY2UuZ2V0TGF5ZXJzKCk7aWYobGF5ZXJzLmxlbmd0aCl7dmFyIGxheWVyPWxheWVyc1swXTtpZihsYXllci5sZWZ0Qm91bmRzIT09bnVsbCYmbGF5ZXIubGVmdEJvdW5kcy5sZW5ndGg9PT00KXtjYW1lcmFMLmJvdW5kcy5mcm9tQXJyYXkobGF5ZXIubGVmdEJvdW5kcyk7fWlmKGxheWVyLnJpZ2h0Qm91bmRzIT09bnVsbCYmbGF5ZXIucmlnaHRCb3VuZHMubGVuZ3RoPT09NCl7Y2FtZXJhUi5ib3VuZHMuZnJvbUFycmF5KGxheWVyLnJpZ2h0Qm91bmRzKTt9fXJldHVybiBjYW1lcmFWUjt9O3RoaXMuc3VibWl0RnJhbWU9ZnVuY3Rpb24oKXtpZihkZXZpY2UmJmRldmljZS5pc1ByZXNlbnRpbmcpZGV2aWNlLnN1Ym1pdEZyYW1lKCk7fTt0aGlzLmRpc3Bvc2U9ZnVuY3Rpb24oKXtpZih0eXBlb2Ygd2luZG93IT09J3VuZGVmaW5lZCcpe3dpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCd2cmRpc3BsYXlwcmVzZW50Y2hhbmdlJyxvblZSRGlzcGxheVByZXNlbnRDaGFuZ2UpO319O30vKioKICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS8KICovZnVuY3Rpb24gV2ViR0xFeHRlbnNpb25zKGdsKXt2YXIgZXh0ZW5zaW9ucz17fTtyZXR1cm57Z2V0OmZ1bmN0aW9uIGdldChuYW1lKXtpZihleHRlbnNpb25zW25hbWVdIT09dW5kZWZpbmVkKXtyZXR1cm4gZXh0ZW5zaW9uc1tuYW1lXTt9dmFyIGV4dGVuc2lvbjtzd2l0Y2gobmFtZSl7Y2FzZSdXRUJHTF9kZXB0aF90ZXh0dXJlJzpleHRlbnNpb249Z2wuZ2V0RXh0ZW5zaW9uKCdXRUJHTF9kZXB0aF90ZXh0dXJlJyl8fGdsLmdldEV4dGVuc2lvbignTU9aX1dFQkdMX2RlcHRoX3RleHR1cmUnKXx8Z2wuZ2V0RXh0ZW5zaW9uKCdXRUJLSVRfV0VCR0xfZGVwdGhfdGV4dHVyZScpO2JyZWFrO2Nhc2UnRVhUX3RleHR1cmVfZmlsdGVyX2FuaXNvdHJvcGljJzpleHRlbnNpb249Z2wuZ2V0RXh0ZW5zaW9uKCdFWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWMnKXx8Z2wuZ2V0RXh0ZW5zaW9uKCdNT1pfRVhUX3RleHR1cmVfZmlsdGVyX2FuaXNvdHJvcGljJyl8fGdsLmdldEV4dGVuc2lvbignV0VCS0lUX0VYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpYycpO2JyZWFrO2Nhc2UnV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGMnOmV4dGVuc2lvbj1nbC5nZXRFeHRlbnNpb24oJ1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjJyl8fGdsLmdldEV4dGVuc2lvbignTU9aX1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjJyl8fGdsLmdldEV4dGVuc2lvbignV0VCS0lUX1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjJyk7YnJlYWs7Y2FzZSdXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfcHZydGMnOmV4dGVuc2lvbj1nbC5nZXRFeHRlbnNpb24oJ1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9wdnJ0YycpfHxnbC5nZXRFeHRlbnNpb24oJ1dFQktJVF9XRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfcHZydGMnKTticmVhaztjYXNlJ1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9ldGMxJzpleHRlbnNpb249Z2wuZ2V0RXh0ZW5zaW9uKCdXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfZXRjMScpO2JyZWFrO2RlZmF1bHQ6ZXh0ZW5zaW9uPWdsLmdldEV4dGVuc2lvbihuYW1lKTt9aWYoZXh0ZW5zaW9uPT09bnVsbCl7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlcmVyOiAnK25hbWUrJyBleHRlbnNpb24gbm90IHN1cHBvcnRlZC4nKTt9ZXh0ZW5zaW9uc1tuYW1lXT1leHRlbnNpb247cmV0dXJuIGV4dGVuc2lvbjt9fTt9LyoqCiAqIEBhdXRob3IgdHNjaHcKICovZnVuY3Rpb24gV2ViR0xDbGlwcGluZygpe3ZhciBzY29wZT10aGlzLGdsb2JhbFN0YXRlPW51bGwsbnVtR2xvYmFsUGxhbmVzPTAsbG9jYWxDbGlwcGluZ0VuYWJsZWQ9ZmFsc2UscmVuZGVyaW5nU2hhZG93cz1mYWxzZSxwbGFuZT1uZXcgUGxhbmUoKSx2aWV3Tm9ybWFsTWF0cml4PW5ldyBNYXRyaXgzKCksdW5pZm9ybT17dmFsdWU6bnVsbCxuZWVkc1VwZGF0ZTpmYWxzZX07dGhpcy51bmlmb3JtPXVuaWZvcm07dGhpcy5udW1QbGFuZXM9MDt0aGlzLm51bUludGVyc2VjdGlvbj0wO3RoaXMuaW5pdD1mdW5jdGlvbihwbGFuZXMsZW5hYmxlTG9jYWxDbGlwcGluZyxjYW1lcmEpe3ZhciBlbmFibGVkPXBsYW5lcy5sZW5ndGghPT0wfHxlbmFibGVMb2NhbENsaXBwaW5nfHwvLyBlbmFibGUgc3RhdGUgb2YgcHJldmlvdXMgZnJhbWUgLSB0aGUgY2xpcHBpbmcgY29kZSBoYXMgdG8KLy8gcnVuIGFub3RoZXIgZnJhbWUgaW4gb3JkZXIgdG8gcmVzZXQgdGhlIHN0YXRlOgpudW1HbG9iYWxQbGFuZXMhPT0wfHxsb2NhbENsaXBwaW5nRW5hYmxlZDtsb2NhbENsaXBwaW5nRW5hYmxlZD1lbmFibGVMb2NhbENsaXBwaW5nO2dsb2JhbFN0YXRlPXByb2plY3RQbGFuZXMocGxhbmVzLGNhbWVyYSwwKTtudW1HbG9iYWxQbGFuZXM9cGxhbmVzLmxlbmd0aDtyZXR1cm4gZW5hYmxlZDt9O3RoaXMuYmVnaW5TaGFkb3dzPWZ1bmN0aW9uKCl7cmVuZGVyaW5nU2hhZG93cz10cnVlO3Byb2plY3RQbGFuZXMobnVsbCk7fTt0aGlzLmVuZFNoYWRvd3M9ZnVuY3Rpb24oKXtyZW5kZXJpbmdTaGFkb3dzPWZhbHNlO3Jlc2V0R2xvYmFsU3RhdGUoKTt9O3RoaXMuc2V0U3RhdGU9ZnVuY3Rpb24ocGxhbmVzLGNsaXBJbnRlcnNlY3Rpb24sY2xpcFNoYWRvd3MsY2FtZXJhLGNhY2hlLGZyb21DYWNoZSl7aWYoIWxvY2FsQ2xpcHBpbmdFbmFibGVkfHxwbGFuZXM9PT1udWxsfHxwbGFuZXMubGVuZ3RoPT09MHx8cmVuZGVyaW5nU2hhZG93cyYmIWNsaXBTaGFkb3dzKXsvLyB0aGVyZSdzIG5vIGxvY2FsIGNsaXBwaW5nCmlmKHJlbmRlcmluZ1NoYWRvd3Mpey8vIHRoZXJlJ3Mgbm8gZ2xvYmFsIGNsaXBwaW5nCnByb2plY3RQbGFuZXMobnVsbCk7fWVsc2V7cmVzZXRHbG9iYWxTdGF0ZSgpO319ZWxzZXt2YXIgbkdsb2JhbD1yZW5kZXJpbmdTaGFkb3dzPzA6bnVtR2xvYmFsUGxhbmVzLGxHbG9iYWw9bkdsb2JhbCo0LGRzdEFycmF5PWNhY2hlLmNsaXBwaW5nU3RhdGV8fG51bGw7dW5pZm9ybS52YWx1ZT1kc3RBcnJheTsvLyBlbnN1cmUgdW5pcXVlIHN0YXRlCmRzdEFycmF5PXByb2plY3RQbGFuZXMocGxhbmVzLGNhbWVyYSxsR2xvYmFsLGZyb21DYWNoZSk7Zm9yKHZhciBpPTA7aSE9PWxHbG9iYWw7KytpKXtkc3RBcnJheVtpXT1nbG9iYWxTdGF0ZVtpXTt9Y2FjaGUuY2xpcHBpbmdTdGF0ZT1kc3RBcnJheTt0aGlzLm51bUludGVyc2VjdGlvbj1jbGlwSW50ZXJzZWN0aW9uP3RoaXMubnVtUGxhbmVzOjA7dGhpcy5udW1QbGFuZXMrPW5HbG9iYWw7fX07ZnVuY3Rpb24gcmVzZXRHbG9iYWxTdGF0ZSgpe2lmKHVuaWZvcm0udmFsdWUhPT1nbG9iYWxTdGF0ZSl7dW5pZm9ybS52YWx1ZT1nbG9iYWxTdGF0ZTt1bmlmb3JtLm5lZWRzVXBkYXRlPW51bUdsb2JhbFBsYW5lcz4wO31zY29wZS5udW1QbGFuZXM9bnVtR2xvYmFsUGxhbmVzO3Njb3BlLm51bUludGVyc2VjdGlvbj0wO31mdW5jdGlvbiBwcm9qZWN0UGxhbmVzKHBsYW5lcyxjYW1lcmEsZHN0T2Zmc2V0LHNraXBUcmFuc2Zvcm0pe3ZhciBuUGxhbmVzPXBsYW5lcyE9PW51bGw/cGxhbmVzLmxlbmd0aDowLGRzdEFycmF5PW51bGw7aWYoblBsYW5lcyE9PTApe2RzdEFycmF5PXVuaWZvcm0udmFsdWU7aWYoc2tpcFRyYW5zZm9ybSE9PXRydWV8fGRzdEFycmF5PT09bnVsbCl7dmFyIGZsYXRTaXplPWRzdE9mZnNldCtuUGxhbmVzKjQsdmlld01hdHJpeD1jYW1lcmEubWF0cml4V29ybGRJbnZlcnNlO3ZpZXdOb3JtYWxNYXRyaXguZ2V0Tm9ybWFsTWF0cml4KHZpZXdNYXRyaXgpO2lmKGRzdEFycmF5PT09bnVsbHx8ZHN0QXJyYXkubGVuZ3RoPGZsYXRTaXplKXtkc3RBcnJheT1uZXcgRmxvYXQzMkFycmF5KGZsYXRTaXplKTt9Zm9yKHZhciBpPTAsaTQ9ZHN0T2Zmc2V0O2khPT1uUGxhbmVzOysraSxpNCs9NCl7cGxhbmUuY29weShwbGFuZXNbaV0pLmFwcGx5TWF0cml4NCh2aWV3TWF0cml4LHZpZXdOb3JtYWxNYXRyaXgpO3BsYW5lLm5vcm1hbC50b0FycmF5KGRzdEFycmF5LGk0KTtkc3RBcnJheVtpNCszXT1wbGFuZS5jb25zdGFudDt9fXVuaWZvcm0udmFsdWU9ZHN0QXJyYXk7dW5pZm9ybS5uZWVkc1VwZGF0ZT10cnVlO31zY29wZS5udW1QbGFuZXM9blBsYW5lcztyZXR1cm4gZHN0QXJyYXk7fX0vKioKICogQGF1dGhvciB0aGVzcGl0ZSAvIGh0dHA6Ly93d3cudHdpdHRlci5jb20vdGhlc3BpdGUKICovZnVuY3Rpb24gV2ViR0xVdGlscyhnbCxleHRlbnNpb25zKXtmdW5jdGlvbiBjb252ZXJ0KHApe3ZhciBleHRlbnNpb247aWYocD09PVJlcGVhdFdyYXBwaW5nKXJldHVybiBnbC5SRVBFQVQ7aWYocD09PUNsYW1wVG9FZGdlV3JhcHBpbmcpcmV0dXJuIGdsLkNMQU1QX1RPX0VER0U7aWYocD09PU1pcnJvcmVkUmVwZWF0V3JhcHBpbmcpcmV0dXJuIGdsLk1JUlJPUkVEX1JFUEVBVDtpZihwPT09TmVhcmVzdEZpbHRlcilyZXR1cm4gZ2wuTkVBUkVTVDtpZihwPT09TmVhcmVzdE1pcE1hcE5lYXJlc3RGaWx0ZXIpcmV0dXJuIGdsLk5FQVJFU1RfTUlQTUFQX05FQVJFU1Q7aWYocD09PU5lYXJlc3RNaXBNYXBMaW5lYXJGaWx0ZXIpcmV0dXJuIGdsLk5FQVJFU1RfTUlQTUFQX0xJTkVBUjtpZihwPT09TGluZWFyRmlsdGVyKXJldHVybiBnbC5MSU5FQVI7aWYocD09PUxpbmVhck1pcE1hcE5lYXJlc3RGaWx0ZXIpcmV0dXJuIGdsLkxJTkVBUl9NSVBNQVBfTkVBUkVTVDtpZihwPT09TGluZWFyTWlwTWFwTGluZWFyRmlsdGVyKXJldHVybiBnbC5MSU5FQVJfTUlQTUFQX0xJTkVBUjtpZihwPT09VW5zaWduZWRCeXRlVHlwZSlyZXR1cm4gZ2wuVU5TSUdORURfQllURTtpZihwPT09VW5zaWduZWRTaG9ydDQ0NDRUeXBlKXJldHVybiBnbC5VTlNJR05FRF9TSE9SVF80XzRfNF80O2lmKHA9PT1VbnNpZ25lZFNob3J0NTU1MVR5cGUpcmV0dXJuIGdsLlVOU0lHTkVEX1NIT1JUXzVfNV81XzE7aWYocD09PVVuc2lnbmVkU2hvcnQ1NjVUeXBlKXJldHVybiBnbC5VTlNJR05FRF9TSE9SVF81XzZfNTtpZihwPT09Qnl0ZVR5cGUpcmV0dXJuIGdsLkJZVEU7aWYocD09PVNob3J0VHlwZSlyZXR1cm4gZ2wuU0hPUlQ7aWYocD09PVVuc2lnbmVkU2hvcnRUeXBlKXJldHVybiBnbC5VTlNJR05FRF9TSE9SVDtpZihwPT09SW50VHlwZSlyZXR1cm4gZ2wuSU5UO2lmKHA9PT1VbnNpZ25lZEludFR5cGUpcmV0dXJuIGdsLlVOU0lHTkVEX0lOVDtpZihwPT09RmxvYXRUeXBlKXJldHVybiBnbC5GTE9BVDtpZihwPT09SGFsZkZsb2F0VHlwZSl7ZXh0ZW5zaW9uPWV4dGVuc2lvbnMuZ2V0KCdPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0Jyk7aWYoZXh0ZW5zaW9uIT09bnVsbClyZXR1cm4gZXh0ZW5zaW9uLkhBTEZfRkxPQVRfT0VTO31pZihwPT09QWxwaGFGb3JtYXQpcmV0dXJuIGdsLkFMUEhBO2lmKHA9PT1SR0JGb3JtYXQpcmV0dXJuIGdsLlJHQjtpZihwPT09UkdCQUZvcm1hdClyZXR1cm4gZ2wuUkdCQTtpZihwPT09THVtaW5hbmNlRm9ybWF0KXJldHVybiBnbC5MVU1JTkFOQ0U7aWYocD09PUx1bWluYW5jZUFscGhhRm9ybWF0KXJldHVybiBnbC5MVU1JTkFOQ0VfQUxQSEE7aWYocD09PURlcHRoRm9ybWF0KXJldHVybiBnbC5ERVBUSF9DT01QT05FTlQ7aWYocD09PURlcHRoU3RlbmNpbEZvcm1hdClyZXR1cm4gZ2wuREVQVEhfU1RFTkNJTDtpZihwPT09QWRkRXF1YXRpb24pcmV0dXJuIGdsLkZVTkNfQUREO2lmKHA9PT1TdWJ0cmFjdEVxdWF0aW9uKXJldHVybiBnbC5GVU5DX1NVQlRSQUNUO2lmKHA9PT1SZXZlcnNlU3VidHJhY3RFcXVhdGlvbilyZXR1cm4gZ2wuRlVOQ19SRVZFUlNFX1NVQlRSQUNUO2lmKHA9PT1aZXJvRmFjdG9yKXJldHVybiBnbC5aRVJPO2lmKHA9PT1PbmVGYWN0b3IpcmV0dXJuIGdsLk9ORTtpZihwPT09U3JjQ29sb3JGYWN0b3IpcmV0dXJuIGdsLlNSQ19DT0xPUjtpZihwPT09T25lTWludXNTcmNDb2xvckZhY3RvcilyZXR1cm4gZ2wuT05FX01JTlVTX1NSQ19DT0xPUjtpZihwPT09U3JjQWxwaGFGYWN0b3IpcmV0dXJuIGdsLlNSQ19BTFBIQTtpZihwPT09T25lTWludXNTcmNBbHBoYUZhY3RvcilyZXR1cm4gZ2wuT05FX01JTlVTX1NSQ19BTFBIQTtpZihwPT09RHN0QWxwaGFGYWN0b3IpcmV0dXJuIGdsLkRTVF9BTFBIQTtpZihwPT09T25lTWludXNEc3RBbHBoYUZhY3RvcilyZXR1cm4gZ2wuT05FX01JTlVTX0RTVF9BTFBIQTtpZihwPT09RHN0Q29sb3JGYWN0b3IpcmV0dXJuIGdsLkRTVF9DT0xPUjtpZihwPT09T25lTWludXNEc3RDb2xvckZhY3RvcilyZXR1cm4gZ2wuT05FX01JTlVTX0RTVF9DT0xPUjtpZihwPT09U3JjQWxwaGFTYXR1cmF0ZUZhY3RvcilyZXR1cm4gZ2wuU1JDX0FMUEhBX1NBVFVSQVRFO2lmKHA9PT1SR0JfUzNUQ19EWFQxX0Zvcm1hdHx8cD09PVJHQkFfUzNUQ19EWFQxX0Zvcm1hdHx8cD09PVJHQkFfUzNUQ19EWFQzX0Zvcm1hdHx8cD09PVJHQkFfUzNUQ19EWFQ1X0Zvcm1hdCl7ZXh0ZW5zaW9uPWV4dGVuc2lvbnMuZ2V0KCdXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0YycpO2lmKGV4dGVuc2lvbiE9PW51bGwpe2lmKHA9PT1SR0JfUzNUQ19EWFQxX0Zvcm1hdClyZXR1cm4gZXh0ZW5zaW9uLkNPTVBSRVNTRURfUkdCX1MzVENfRFhUMV9FWFQ7aWYocD09PVJHQkFfUzNUQ19EWFQxX0Zvcm1hdClyZXR1cm4gZXh0ZW5zaW9uLkNPTVBSRVNTRURfUkdCQV9TM1RDX0RYVDFfRVhUO2lmKHA9PT1SR0JBX1MzVENfRFhUM19Gb3JtYXQpcmV0dXJuIGV4dGVuc2lvbi5DT01QUkVTU0VEX1JHQkFfUzNUQ19EWFQzX0VYVDtpZihwPT09UkdCQV9TM1RDX0RYVDVfRm9ybWF0KXJldHVybiBleHRlbnNpb24uQ09NUFJFU1NFRF9SR0JBX1MzVENfRFhUNV9FWFQ7fX1pZihwPT09UkdCX1BWUlRDXzRCUFBWMV9Gb3JtYXR8fHA9PT1SR0JfUFZSVENfMkJQUFYxX0Zvcm1hdHx8cD09PVJHQkFfUFZSVENfNEJQUFYxX0Zvcm1hdHx8cD09PVJHQkFfUFZSVENfMkJQUFYxX0Zvcm1hdCl7ZXh0ZW5zaW9uPWV4dGVuc2lvbnMuZ2V0KCdXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfcHZydGMnKTtpZihleHRlbnNpb24hPT1udWxsKXtpZihwPT09UkdCX1BWUlRDXzRCUFBWMV9Gb3JtYXQpcmV0dXJuIGV4dGVuc2lvbi5DT01QUkVTU0VEX1JHQl9QVlJUQ180QlBQVjFfSU1HO2lmKHA9PT1SR0JfUFZSVENfMkJQUFYxX0Zvcm1hdClyZXR1cm4gZXh0ZW5zaW9uLkNPTVBSRVNTRURfUkdCX1BWUlRDXzJCUFBWMV9JTUc7aWYocD09PVJHQkFfUFZSVENfNEJQUFYxX0Zvcm1hdClyZXR1cm4gZXh0ZW5zaW9uLkNPTVBSRVNTRURfUkdCQV9QVlJUQ180QlBQVjFfSU1HO2lmKHA9PT1SR0JBX1BWUlRDXzJCUFBWMV9Gb3JtYXQpcmV0dXJuIGV4dGVuc2lvbi5DT01QUkVTU0VEX1JHQkFfUFZSVENfMkJQUFYxX0lNRzt9fWlmKHA9PT1SR0JfRVRDMV9Gb3JtYXQpe2V4dGVuc2lvbj1leHRlbnNpb25zLmdldCgnV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX2V0YzEnKTtpZihleHRlbnNpb24hPT1udWxsKXJldHVybiBleHRlbnNpb24uQ09NUFJFU1NFRF9SR0JfRVRDMV9XRUJHTDt9aWYocD09PU1pbkVxdWF0aW9ufHxwPT09TWF4RXF1YXRpb24pe2V4dGVuc2lvbj1leHRlbnNpb25zLmdldCgnRVhUX2JsZW5kX21pbm1heCcpO2lmKGV4dGVuc2lvbiE9PW51bGwpe2lmKHA9PT1NaW5FcXVhdGlvbilyZXR1cm4gZXh0ZW5zaW9uLk1JTl9FWFQ7aWYocD09PU1heEVxdWF0aW9uKXJldHVybiBleHRlbnNpb24uTUFYX0VYVDt9fWlmKHA9PT1VbnNpZ25lZEludDI0OFR5cGUpe2V4dGVuc2lvbj1leHRlbnNpb25zLmdldCgnV0VCR0xfZGVwdGhfdGV4dHVyZScpO2lmKGV4dGVuc2lvbiE9PW51bGwpcmV0dXJuIGV4dGVuc2lvbi5VTlNJR05FRF9JTlRfMjRfOF9XRUJHTDt9cmV0dXJuIDA7fXJldHVybntjb252ZXJ0OmNvbnZlcnR9O30vKioKICogQGF1dGhvciBzdXBlcmVnZ2JlcnQgLyBodHRwOi8vd3d3LnBhdWxicnVudC5jby51ay8KICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS8KICogQGF1dGhvciBhbHRlcmVkcSAvIGh0dHA6Ly9hbHRlcmVkcXVhbGlhLmNvbS8KICogQGF1dGhvciBzemltZWsgLyBodHRwczovL2dpdGh1Yi5jb20vc3ppbWVrLwogKiBAYXV0aG9yIHRzY2h3CiAqL2Z1bmN0aW9uIFdlYkdMUmVuZGVyZXIocGFyYW1ldGVycyl7Y29uc29sZS5sb2coJ1RIUkVFLldlYkdMUmVuZGVyZXInLFJFVklTSU9OKTtwYXJhbWV0ZXJzPXBhcmFtZXRlcnN8fHt9O3ZhciBfY2FudmFzPXBhcmFtZXRlcnMuY2FudmFzIT09dW5kZWZpbmVkP3BhcmFtZXRlcnMuY2FudmFzOmRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCcsJ2NhbnZhcycpLF9jb250ZXh0PXBhcmFtZXRlcnMuY29udGV4dCE9PXVuZGVmaW5lZD9wYXJhbWV0ZXJzLmNvbnRleHQ6bnVsbCxfYWxwaGE9cGFyYW1ldGVycy5hbHBoYSE9PXVuZGVmaW5lZD9wYXJhbWV0ZXJzLmFscGhhOmZhbHNlLF9kZXB0aD1wYXJhbWV0ZXJzLmRlcHRoIT09dW5kZWZpbmVkP3BhcmFtZXRlcnMuZGVwdGg6dHJ1ZSxfc3RlbmNpbD1wYXJhbWV0ZXJzLnN0ZW5jaWwhPT11bmRlZmluZWQ/cGFyYW1ldGVycy5zdGVuY2lsOnRydWUsX2FudGlhbGlhcz1wYXJhbWV0ZXJzLmFudGlhbGlhcyE9PXVuZGVmaW5lZD9wYXJhbWV0ZXJzLmFudGlhbGlhczpmYWxzZSxfcHJlbXVsdGlwbGllZEFscGhhPXBhcmFtZXRlcnMucHJlbXVsdGlwbGllZEFscGhhIT09dW5kZWZpbmVkP3BhcmFtZXRlcnMucHJlbXVsdGlwbGllZEFscGhhOnRydWUsX3ByZXNlcnZlRHJhd2luZ0J1ZmZlcj1wYXJhbWV0ZXJzLnByZXNlcnZlRHJhd2luZ0J1ZmZlciE9PXVuZGVmaW5lZD9wYXJhbWV0ZXJzLnByZXNlcnZlRHJhd2luZ0J1ZmZlcjpmYWxzZSxfcG93ZXJQcmVmZXJlbmNlPXBhcmFtZXRlcnMucG93ZXJQcmVmZXJlbmNlIT09dW5kZWZpbmVkP3BhcmFtZXRlcnMucG93ZXJQcmVmZXJlbmNlOidkZWZhdWx0Jzt2YXIgbGlnaHRzQXJyYXk9W107dmFyIHNoYWRvd3NBcnJheT1bXTt2YXIgY3VycmVudFJlbmRlckxpc3Q9bnVsbDt2YXIgc3ByaXRlc0FycmF5PVtdO3ZhciBmbGFyZXNBcnJheT1bXTsvLyBwdWJsaWMgcHJvcGVydGllcwp0aGlzLmRvbUVsZW1lbnQ9X2NhbnZhczt0aGlzLmNvbnRleHQ9bnVsbDsvLyBjbGVhcmluZwp0aGlzLmF1dG9DbGVhcj10cnVlO3RoaXMuYXV0b0NsZWFyQ29sb3I9dHJ1ZTt0aGlzLmF1dG9DbGVhckRlcHRoPXRydWU7dGhpcy5hdXRvQ2xlYXJTdGVuY2lsPXRydWU7Ly8gc2NlbmUgZ3JhcGgKdGhpcy5zb3J0T2JqZWN0cz10cnVlOy8vIHVzZXItZGVmaW5lZCBjbGlwcGluZwp0aGlzLmNsaXBwaW5nUGxhbmVzPVtdO3RoaXMubG9jYWxDbGlwcGluZ0VuYWJsZWQ9ZmFsc2U7Ly8gcGh5c2ljYWxseSBiYXNlZCBzaGFkaW5nCnRoaXMuZ2FtbWFGYWN0b3I9Mi4wOy8vIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eQp0aGlzLmdhbW1hSW5wdXQ9ZmFsc2U7dGhpcy5nYW1tYU91dHB1dD1mYWxzZTsvLyBwaHlzaWNhbCBsaWdodHMKdGhpcy5waHlzaWNhbGx5Q29ycmVjdExpZ2h0cz1mYWxzZTsvLyB0b25lIG1hcHBpbmcKdGhpcy50b25lTWFwcGluZz1MaW5lYXJUb25lTWFwcGluZzt0aGlzLnRvbmVNYXBwaW5nRXhwb3N1cmU9MS4wO3RoaXMudG9uZU1hcHBpbmdXaGl0ZVBvaW50PTEuMDsvLyBtb3JwaHMKdGhpcy5tYXhNb3JwaFRhcmdldHM9ODt0aGlzLm1heE1vcnBoTm9ybWFscz00Oy8vIGludGVybmFsIHByb3BlcnRpZXMKdmFyIF90aGlzPXRoaXMsX2lzQ29udGV4dExvc3Q9ZmFsc2UsLy8gaW50ZXJuYWwgc3RhdGUgY2FjaGUKX2N1cnJlbnRSZW5kZXJUYXJnZXQ9bnVsbCxfY3VycmVudEZyYW1lYnVmZmVyPW51bGwsX2N1cnJlbnRNYXRlcmlhbElkPS0xLF9jdXJyZW50R2VvbWV0cnlQcm9ncmFtPScnLF9jdXJyZW50Q2FtZXJhPW51bGwsX2N1cnJlbnRBcnJheUNhbWVyYT1udWxsLF9jdXJyZW50Vmlld3BvcnQ9bmV3IFZlY3RvcjQoKSxfY3VycmVudFNjaXNzb3I9bmV3IFZlY3RvcjQoKSxfY3VycmVudFNjaXNzb3JUZXN0PW51bGwsLy8KX3VzZWRUZXh0dXJlVW5pdHM9MCwvLwpfd2lkdGg9X2NhbnZhcy53aWR0aCxfaGVpZ2h0PV9jYW52YXMuaGVpZ2h0LF9waXhlbFJhdGlvPTEsX3ZpZXdwb3J0PW5ldyBWZWN0b3I0KDAsMCxfd2lkdGgsX2hlaWdodCksX3NjaXNzb3I9bmV3IFZlY3RvcjQoMCwwLF93aWR0aCxfaGVpZ2h0KSxfc2Npc3NvclRlc3Q9ZmFsc2UsLy8gZnJ1c3R1bQpfZnJ1c3R1bT1uZXcgRnJ1c3R1bSgpLC8vIGNsaXBwaW5nCl9jbGlwcGluZz1uZXcgV2ViR0xDbGlwcGluZygpLF9jbGlwcGluZ0VuYWJsZWQ9ZmFsc2UsX2xvY2FsQ2xpcHBpbmdFbmFibGVkPWZhbHNlLC8vIGNhbWVyYSBtYXRyaWNlcyBjYWNoZQpfcHJvalNjcmVlbk1hdHJpeD1uZXcgTWF0cml4NCgpLF92ZWN0b3IzPW5ldyBWZWN0b3IzKCksLy8gaW5mbwpfaW5mb01lbW9yeT17Z2VvbWV0cmllczowLHRleHR1cmVzOjB9LF9pbmZvUmVuZGVyPXtmcmFtZTowLGNhbGxzOjAsdmVydGljZXM6MCxmYWNlczowLHBvaW50czowfTt0aGlzLmluZm89e3JlbmRlcjpfaW5mb1JlbmRlcixtZW1vcnk6X2luZm9NZW1vcnkscHJvZ3JhbXM6bnVsbH07ZnVuY3Rpb24gZ2V0VGFyZ2V0UGl4ZWxSYXRpbygpe3JldHVybiBfY3VycmVudFJlbmRlclRhcmdldD09PW51bGw/X3BpeGVsUmF0aW86MTt9Ly8gaW5pdGlhbGl6ZQp2YXIgX2dsO3RyeXt2YXIgY29udGV4dEF0dHJpYnV0ZXM9e2FscGhhOl9hbHBoYSxkZXB0aDpfZGVwdGgsc3RlbmNpbDpfc3RlbmNpbCxhbnRpYWxpYXM6X2FudGlhbGlhcyxwcmVtdWx0aXBsaWVkQWxwaGE6X3ByZW11bHRpcGxpZWRBbHBoYSxwcmVzZXJ2ZURyYXdpbmdCdWZmZXI6X3ByZXNlcnZlRHJhd2luZ0J1ZmZlcixwb3dlclByZWZlcmVuY2U6X3Bvd2VyUHJlZmVyZW5jZX07Ly8gZXZlbnQgbGlzdGVuZXJzIG11c3QgYmUgcmVnaXN0ZXJlZCBiZWZvcmUgV2ViR0wgY29udGV4dCBpcyBjcmVhdGVkLCBzZWUgIzEyNzUzCl9jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignd2ViZ2xjb250ZXh0bG9zdCcsb25Db250ZXh0TG9zdCxmYWxzZSk7X2NhbnZhcy5hZGRFdmVudExpc3RlbmVyKCd3ZWJnbGNvbnRleHRyZXN0b3JlZCcsb25Db250ZXh0UmVzdG9yZSxmYWxzZSk7X2dsPV9jb250ZXh0fHxfY2FudmFzLmdldENvbnRleHQoJ3dlYmdsJyxjb250ZXh0QXR0cmlidXRlcyl8fF9jYW52YXMuZ2V0Q29udGV4dCgnZXhwZXJpbWVudGFsLXdlYmdsJyxjb250ZXh0QXR0cmlidXRlcyk7aWYoX2dsPT09bnVsbCl7aWYoX2NhbnZhcy5nZXRDb250ZXh0KCd3ZWJnbCcpIT09bnVsbCl7dGhyb3cgbmV3IEVycm9yKCdFcnJvciBjcmVhdGluZyBXZWJHTCBjb250ZXh0IHdpdGggeW91ciBzZWxlY3RlZCBhdHRyaWJ1dGVzLicpO31lbHNle3Rocm93IG5ldyBFcnJvcignRXJyb3IgY3JlYXRpbmcgV2ViR0wgY29udGV4dC4nKTt9fS8vIFNvbWUgZXhwZXJpbWVudGFsLXdlYmdsIGltcGxlbWVudGF0aW9ucyBkbyBub3QgaGF2ZSBnZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQKaWYoX2dsLmdldFNoYWRlclByZWNpc2lvbkZvcm1hdD09PXVuZGVmaW5lZCl7X2dsLmdldFNoYWRlclByZWNpc2lvbkZvcm1hdD1mdW5jdGlvbigpe3JldHVybnsncmFuZ2VNaW4nOjEsJ3JhbmdlTWF4JzoxLCdwcmVjaXNpb24nOjF9O307fX1jYXRjaChlcnJvcil7Y29uc29sZS5lcnJvcignVEhSRUUuV2ViR0xSZW5kZXJlcjogJytlcnJvci5tZXNzYWdlKTt9dmFyIGV4dGVuc2lvbnMsY2FwYWJpbGl0aWVzLHN0YXRlO3ZhciBwcm9wZXJ0aWVzLHRleHR1cmVzLGF0dHJpYnV0ZXMsZ2VvbWV0cmllcyxvYmplY3RzLGxpZ2h0czt2YXIgcHJvZ3JhbUNhY2hlLHJlbmRlckxpc3RzO3ZhciBiYWNrZ3JvdW5kLG1vcnBodGFyZ2V0cyxidWZmZXJSZW5kZXJlcixpbmRleGVkQnVmZmVyUmVuZGVyZXI7dmFyIGZsYXJlUmVuZGVyZXIsc3ByaXRlUmVuZGVyZXI7dmFyIHV0aWxzO2Z1bmN0aW9uIGluaXRHTENvbnRleHQoKXtleHRlbnNpb25zPW5ldyBXZWJHTEV4dGVuc2lvbnMoX2dsKTtleHRlbnNpb25zLmdldCgnV0VCR0xfZGVwdGhfdGV4dHVyZScpO2V4dGVuc2lvbnMuZ2V0KCdPRVNfdGV4dHVyZV9mbG9hdCcpO2V4dGVuc2lvbnMuZ2V0KCdPRVNfdGV4dHVyZV9mbG9hdF9saW5lYXInKTtleHRlbnNpb25zLmdldCgnT0VTX3RleHR1cmVfaGFsZl9mbG9hdCcpO2V4dGVuc2lvbnMuZ2V0KCdPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0X2xpbmVhcicpO2V4dGVuc2lvbnMuZ2V0KCdPRVNfc3RhbmRhcmRfZGVyaXZhdGl2ZXMnKTtleHRlbnNpb25zLmdldCgnT0VTX2VsZW1lbnRfaW5kZXhfdWludCcpO2V4dGVuc2lvbnMuZ2V0KCdBTkdMRV9pbnN0YW5jZWRfYXJyYXlzJyk7dXRpbHM9bmV3IFdlYkdMVXRpbHMoX2dsLGV4dGVuc2lvbnMpO2NhcGFiaWxpdGllcz1uZXcgV2ViR0xDYXBhYmlsaXRpZXMoX2dsLGV4dGVuc2lvbnMscGFyYW1ldGVycyk7c3RhdGU9bmV3IFdlYkdMU3RhdGUoX2dsLGV4dGVuc2lvbnMsdXRpbHMpO3N0YXRlLnNjaXNzb3IoX2N1cnJlbnRTY2lzc29yLmNvcHkoX3NjaXNzb3IpLm11bHRpcGx5U2NhbGFyKF9waXhlbFJhdGlvKSk7c3RhdGUudmlld3BvcnQoX2N1cnJlbnRWaWV3cG9ydC5jb3B5KF92aWV3cG9ydCkubXVsdGlwbHlTY2FsYXIoX3BpeGVsUmF0aW8pKTtwcm9wZXJ0aWVzPW5ldyBXZWJHTFByb3BlcnRpZXMoKTt0ZXh0dXJlcz1uZXcgV2ViR0xUZXh0dXJlcyhfZ2wsZXh0ZW5zaW9ucyxzdGF0ZSxwcm9wZXJ0aWVzLGNhcGFiaWxpdGllcyx1dGlscyxfaW5mb01lbW9yeSk7YXR0cmlidXRlcz1uZXcgV2ViR0xBdHRyaWJ1dGVzKF9nbCk7Z2VvbWV0cmllcz1uZXcgV2ViR0xHZW9tZXRyaWVzKF9nbCxhdHRyaWJ1dGVzLF9pbmZvTWVtb3J5KTtvYmplY3RzPW5ldyBXZWJHTE9iamVjdHMoZ2VvbWV0cmllcyxfaW5mb1JlbmRlcik7bW9ycGh0YXJnZXRzPW5ldyBXZWJHTE1vcnBodGFyZ2V0cyhfZ2wpO3Byb2dyYW1DYWNoZT1uZXcgV2ViR0xQcm9ncmFtcyhfdGhpcyxleHRlbnNpb25zLGNhcGFiaWxpdGllcyk7bGlnaHRzPW5ldyBXZWJHTExpZ2h0cygpO3JlbmRlckxpc3RzPW5ldyBXZWJHTFJlbmRlckxpc3RzKCk7YmFja2dyb3VuZD1uZXcgV2ViR0xCYWNrZ3JvdW5kKF90aGlzLHN0YXRlLGdlb21ldHJpZXMsX3ByZW11bHRpcGxpZWRBbHBoYSk7YnVmZmVyUmVuZGVyZXI9bmV3IFdlYkdMQnVmZmVyUmVuZGVyZXIoX2dsLGV4dGVuc2lvbnMsX2luZm9SZW5kZXIpO2luZGV4ZWRCdWZmZXJSZW5kZXJlcj1uZXcgV2ViR0xJbmRleGVkQnVmZmVyUmVuZGVyZXIoX2dsLGV4dGVuc2lvbnMsX2luZm9SZW5kZXIpO2ZsYXJlUmVuZGVyZXI9bmV3IFdlYkdMRmxhcmVSZW5kZXJlcihfdGhpcyxfZ2wsc3RhdGUsdGV4dHVyZXMsY2FwYWJpbGl0aWVzKTtzcHJpdGVSZW5kZXJlcj1uZXcgV2ViR0xTcHJpdGVSZW5kZXJlcihfdGhpcyxfZ2wsc3RhdGUsdGV4dHVyZXMsY2FwYWJpbGl0aWVzKTtfdGhpcy5pbmZvLnByb2dyYW1zPXByb2dyYW1DYWNoZS5wcm9ncmFtcztfdGhpcy5jb250ZXh0PV9nbDtfdGhpcy5jYXBhYmlsaXRpZXM9Y2FwYWJpbGl0aWVzO190aGlzLmV4dGVuc2lvbnM9ZXh0ZW5zaW9ucztfdGhpcy5wcm9wZXJ0aWVzPXByb3BlcnRpZXM7X3RoaXMucmVuZGVyTGlzdHM9cmVuZGVyTGlzdHM7X3RoaXMuc3RhdGU9c3RhdGU7fWluaXRHTENvbnRleHQoKTsvLyB2cgp2YXIgdnI9bmV3IFdlYlZSTWFuYWdlcihfdGhpcyk7dGhpcy52cj12cjsvLyBzaGFkb3cgbWFwCnZhciBzaGFkb3dNYXA9bmV3IFdlYkdMU2hhZG93TWFwKF90aGlzLG9iamVjdHMsY2FwYWJpbGl0aWVzLm1heFRleHR1cmVTaXplKTt0aGlzLnNoYWRvd01hcD1zaGFkb3dNYXA7Ly8gQVBJCnRoaXMuZ2V0Q29udGV4dD1mdW5jdGlvbigpe3JldHVybiBfZ2w7fTt0aGlzLmdldENvbnRleHRBdHRyaWJ1dGVzPWZ1bmN0aW9uKCl7cmV0dXJuIF9nbC5nZXRDb250ZXh0QXR0cmlidXRlcygpO307dGhpcy5mb3JjZUNvbnRleHRMb3NzPWZ1bmN0aW9uKCl7dmFyIGV4dGVuc2lvbj1leHRlbnNpb25zLmdldCgnV0VCR0xfbG9zZV9jb250ZXh0Jyk7aWYoZXh0ZW5zaW9uKWV4dGVuc2lvbi5sb3NlQ29udGV4dCgpO307dGhpcy5mb3JjZUNvbnRleHRSZXN0b3JlPWZ1bmN0aW9uKCl7dmFyIGV4dGVuc2lvbj1leHRlbnNpb25zLmdldCgnV0VCR0xfbG9zZV9jb250ZXh0Jyk7aWYoZXh0ZW5zaW9uKWV4dGVuc2lvbi5yZXN0b3JlQ29udGV4dCgpO307dGhpcy5nZXRQaXhlbFJhdGlvPWZ1bmN0aW9uKCl7cmV0dXJuIF9waXhlbFJhdGlvO307dGhpcy5zZXRQaXhlbFJhdGlvPWZ1bmN0aW9uKHZhbHVlKXtpZih2YWx1ZT09PXVuZGVmaW5lZClyZXR1cm47X3BpeGVsUmF0aW89dmFsdWU7dGhpcy5zZXRTaXplKF93aWR0aCxfaGVpZ2h0LGZhbHNlKTt9O3RoaXMuZ2V0U2l6ZT1mdW5jdGlvbigpe3JldHVybnt3aWR0aDpfd2lkdGgsaGVpZ2h0Ol9oZWlnaHR9O307dGhpcy5zZXRTaXplPWZ1bmN0aW9uKHdpZHRoLGhlaWdodCx1cGRhdGVTdHlsZSl7dmFyIGRldmljZT12ci5nZXREZXZpY2UoKTtpZihkZXZpY2UmJmRldmljZS5pc1ByZXNlbnRpbmcpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJlcjogQ2FuXCd0IGNoYW5nZSBzaXplIHdoaWxlIFZSIGRldmljZSBpcyBwcmVzZW50aW5nLicpO3JldHVybjt9X3dpZHRoPXdpZHRoO19oZWlnaHQ9aGVpZ2h0O19jYW52YXMud2lkdGg9d2lkdGgqX3BpeGVsUmF0aW87X2NhbnZhcy5oZWlnaHQ9aGVpZ2h0Kl9waXhlbFJhdGlvO2lmKHVwZGF0ZVN0eWxlIT09ZmFsc2Upe19jYW52YXMuc3R5bGUud2lkdGg9d2lkdGgrJ3B4JztfY2FudmFzLnN0eWxlLmhlaWdodD1oZWlnaHQrJ3B4Jzt9dGhpcy5zZXRWaWV3cG9ydCgwLDAsd2lkdGgsaGVpZ2h0KTt9O3RoaXMuZ2V0RHJhd2luZ0J1ZmZlclNpemU9ZnVuY3Rpb24oKXtyZXR1cm57d2lkdGg6X3dpZHRoKl9waXhlbFJhdGlvLGhlaWdodDpfaGVpZ2h0Kl9waXhlbFJhdGlvfTt9O3RoaXMuc2V0RHJhd2luZ0J1ZmZlclNpemU9ZnVuY3Rpb24od2lkdGgsaGVpZ2h0LHBpeGVsUmF0aW8pe193aWR0aD13aWR0aDtfaGVpZ2h0PWhlaWdodDtfcGl4ZWxSYXRpbz1waXhlbFJhdGlvO19jYW52YXMud2lkdGg9d2lkdGgqcGl4ZWxSYXRpbztfY2FudmFzLmhlaWdodD1oZWlnaHQqcGl4ZWxSYXRpbzt0aGlzLnNldFZpZXdwb3J0KDAsMCx3aWR0aCxoZWlnaHQpO307dGhpcy5zZXRWaWV3cG9ydD1mdW5jdGlvbih4LHksd2lkdGgsaGVpZ2h0KXtfdmlld3BvcnQuc2V0KHgsX2hlaWdodC15LWhlaWdodCx3aWR0aCxoZWlnaHQpO3N0YXRlLnZpZXdwb3J0KF9jdXJyZW50Vmlld3BvcnQuY29weShfdmlld3BvcnQpLm11bHRpcGx5U2NhbGFyKF9waXhlbFJhdGlvKSk7fTt0aGlzLnNldFNjaXNzb3I9ZnVuY3Rpb24oeCx5LHdpZHRoLGhlaWdodCl7X3NjaXNzb3Iuc2V0KHgsX2hlaWdodC15LWhlaWdodCx3aWR0aCxoZWlnaHQpO3N0YXRlLnNjaXNzb3IoX2N1cnJlbnRTY2lzc29yLmNvcHkoX3NjaXNzb3IpLm11bHRpcGx5U2NhbGFyKF9waXhlbFJhdGlvKSk7fTt0aGlzLnNldFNjaXNzb3JUZXN0PWZ1bmN0aW9uKGJvb2xlYW4pe3N0YXRlLnNldFNjaXNzb3JUZXN0KF9zY2lzc29yVGVzdD1ib29sZWFuKTt9Oy8vIENsZWFyaW5nCnRoaXMuZ2V0Q2xlYXJDb2xvcj1mdW5jdGlvbigpe3JldHVybiBiYWNrZ3JvdW5kLmdldENsZWFyQ29sb3IoKTt9O3RoaXMuc2V0Q2xlYXJDb2xvcj1mdW5jdGlvbigpe2JhY2tncm91bmQuc2V0Q2xlYXJDb2xvci5hcHBseShiYWNrZ3JvdW5kLGFyZ3VtZW50cyk7fTt0aGlzLmdldENsZWFyQWxwaGE9ZnVuY3Rpb24oKXtyZXR1cm4gYmFja2dyb3VuZC5nZXRDbGVhckFscGhhKCk7fTt0aGlzLnNldENsZWFyQWxwaGE9ZnVuY3Rpb24oKXtiYWNrZ3JvdW5kLnNldENsZWFyQWxwaGEuYXBwbHkoYmFja2dyb3VuZCxhcmd1bWVudHMpO307dGhpcy5jbGVhcj1mdW5jdGlvbihjb2xvcixkZXB0aCxzdGVuY2lsKXt2YXIgYml0cz0wO2lmKGNvbG9yPT09dW5kZWZpbmVkfHxjb2xvciliaXRzfD1fZ2wuQ09MT1JfQlVGRkVSX0JJVDtpZihkZXB0aD09PXVuZGVmaW5lZHx8ZGVwdGgpYml0c3w9X2dsLkRFUFRIX0JVRkZFUl9CSVQ7aWYoc3RlbmNpbD09PXVuZGVmaW5lZHx8c3RlbmNpbCliaXRzfD1fZ2wuU1RFTkNJTF9CVUZGRVJfQklUO19nbC5jbGVhcihiaXRzKTt9O3RoaXMuY2xlYXJDb2xvcj1mdW5jdGlvbigpe3RoaXMuY2xlYXIodHJ1ZSxmYWxzZSxmYWxzZSk7fTt0aGlzLmNsZWFyRGVwdGg9ZnVuY3Rpb24oKXt0aGlzLmNsZWFyKGZhbHNlLHRydWUsZmFsc2UpO307dGhpcy5jbGVhclN0ZW5jaWw9ZnVuY3Rpb24oKXt0aGlzLmNsZWFyKGZhbHNlLGZhbHNlLHRydWUpO307dGhpcy5jbGVhclRhcmdldD1mdW5jdGlvbihyZW5kZXJUYXJnZXQsY29sb3IsZGVwdGgsc3RlbmNpbCl7dGhpcy5zZXRSZW5kZXJUYXJnZXQocmVuZGVyVGFyZ2V0KTt0aGlzLmNsZWFyKGNvbG9yLGRlcHRoLHN0ZW5jaWwpO307Ly8KdGhpcy5kaXNwb3NlPWZ1bmN0aW9uKCl7X2NhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCd3ZWJnbGNvbnRleHRsb3N0JyxvbkNvbnRleHRMb3N0LGZhbHNlKTtfY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3dlYmdsY29udGV4dHJlc3RvcmVkJyxvbkNvbnRleHRSZXN0b3JlLGZhbHNlKTtyZW5kZXJMaXN0cy5kaXNwb3NlKCk7dnIuZGlzcG9zZSgpO307Ly8gRXZlbnRzCmZ1bmN0aW9uIG9uQ29udGV4dExvc3QoZXZlbnQpe2V2ZW50LnByZXZlbnREZWZhdWx0KCk7Y29uc29sZS5sb2coJ1RIUkVFLldlYkdMUmVuZGVyZXI6IENvbnRleHQgTG9zdC4nKTtfaXNDb250ZXh0TG9zdD10cnVlO31mdW5jdGlvbiBvbkNvbnRleHRSZXN0b3JlKCl7Y29uc29sZS5sb2coJ1RIUkVFLldlYkdMUmVuZGVyZXI6IENvbnRleHQgUmVzdG9yZWQuJyk7X2lzQ29udGV4dExvc3Q9ZmFsc2U7aW5pdEdMQ29udGV4dCgpO31mdW5jdGlvbiBvbk1hdGVyaWFsRGlzcG9zZShldmVudCl7dmFyIG1hdGVyaWFsPWV2ZW50LnRhcmdldDttYXRlcmlhbC5yZW1vdmVFdmVudExpc3RlbmVyKCdkaXNwb3NlJyxvbk1hdGVyaWFsRGlzcG9zZSk7ZGVhbGxvY2F0ZU1hdGVyaWFsKG1hdGVyaWFsKTt9Ly8gQnVmZmVyIGRlYWxsb2NhdGlvbgpmdW5jdGlvbiBkZWFsbG9jYXRlTWF0ZXJpYWwobWF0ZXJpYWwpe3JlbGVhc2VNYXRlcmlhbFByb2dyYW1SZWZlcmVuY2UobWF0ZXJpYWwpO3Byb3BlcnRpZXMucmVtb3ZlKG1hdGVyaWFsKTt9ZnVuY3Rpb24gcmVsZWFzZU1hdGVyaWFsUHJvZ3JhbVJlZmVyZW5jZShtYXRlcmlhbCl7dmFyIHByb2dyYW1JbmZvPXByb3BlcnRpZXMuZ2V0KG1hdGVyaWFsKS5wcm9ncmFtO21hdGVyaWFsLnByb2dyYW09dW5kZWZpbmVkO2lmKHByb2dyYW1JbmZvIT09dW5kZWZpbmVkKXtwcm9ncmFtQ2FjaGUucmVsZWFzZVByb2dyYW0ocHJvZ3JhbUluZm8pO319Ly8gQnVmZmVyIHJlbmRlcmluZwpmdW5jdGlvbiByZW5kZXJPYmplY3RJbW1lZGlhdGUob2JqZWN0LHByb2dyYW0sbWF0ZXJpYWwpe29iamVjdC5yZW5kZXIoZnVuY3Rpb24ob2JqZWN0KXtfdGhpcy5yZW5kZXJCdWZmZXJJbW1lZGlhdGUob2JqZWN0LHByb2dyYW0sbWF0ZXJpYWwpO30pO310aGlzLnJlbmRlckJ1ZmZlckltbWVkaWF0ZT1mdW5jdGlvbihvYmplY3QscHJvZ3JhbSxtYXRlcmlhbCl7c3RhdGUuaW5pdEF0dHJpYnV0ZXMoKTt2YXIgYnVmZmVycz1wcm9wZXJ0aWVzLmdldChvYmplY3QpO2lmKG9iamVjdC5oYXNQb3NpdGlvbnMmJiFidWZmZXJzLnBvc2l0aW9uKWJ1ZmZlcnMucG9zaXRpb249X2dsLmNyZWF0ZUJ1ZmZlcigpO2lmKG9iamVjdC5oYXNOb3JtYWxzJiYhYnVmZmVycy5ub3JtYWwpYnVmZmVycy5ub3JtYWw9X2dsLmNyZWF0ZUJ1ZmZlcigpO2lmKG9iamVjdC5oYXNVdnMmJiFidWZmZXJzLnV2KWJ1ZmZlcnMudXY9X2dsLmNyZWF0ZUJ1ZmZlcigpO2lmKG9iamVjdC5oYXNDb2xvcnMmJiFidWZmZXJzLmNvbG9yKWJ1ZmZlcnMuY29sb3I9X2dsLmNyZWF0ZUJ1ZmZlcigpO3ZhciBwcm9ncmFtQXR0cmlidXRlcz1wcm9ncmFtLmdldEF0dHJpYnV0ZXMoKTtpZihvYmplY3QuaGFzUG9zaXRpb25zKXtfZ2wuYmluZEJ1ZmZlcihfZ2wuQVJSQVlfQlVGRkVSLGJ1ZmZlcnMucG9zaXRpb24pO19nbC5idWZmZXJEYXRhKF9nbC5BUlJBWV9CVUZGRVIsb2JqZWN0LnBvc2l0aW9uQXJyYXksX2dsLkRZTkFNSUNfRFJBVyk7c3RhdGUuZW5hYmxlQXR0cmlidXRlKHByb2dyYW1BdHRyaWJ1dGVzLnBvc2l0aW9uKTtfZ2wudmVydGV4QXR0cmliUG9pbnRlcihwcm9ncmFtQXR0cmlidXRlcy5wb3NpdGlvbiwzLF9nbC5GTE9BVCxmYWxzZSwwLDApO31pZihvYmplY3QuaGFzTm9ybWFscyl7X2dsLmJpbmRCdWZmZXIoX2dsLkFSUkFZX0JVRkZFUixidWZmZXJzLm5vcm1hbCk7aWYoIW1hdGVyaWFsLmlzTWVzaFBob25nTWF0ZXJpYWwmJiFtYXRlcmlhbC5pc01lc2hTdGFuZGFyZE1hdGVyaWFsJiYhbWF0ZXJpYWwuaXNNZXNoTm9ybWFsTWF0ZXJpYWwmJm1hdGVyaWFsLmZsYXRTaGFkaW5nPT09dHJ1ZSl7Zm9yKHZhciBpPTAsbD1vYmplY3QuY291bnQqMztpPGw7aSs9OSl7dmFyIGFycmF5PW9iamVjdC5ub3JtYWxBcnJheTt2YXIgbng9KGFycmF5W2krMF0rYXJyYXlbaSszXSthcnJheVtpKzZdKS8zO3ZhciBueT0oYXJyYXlbaSsxXSthcnJheVtpKzRdK2FycmF5W2krN10pLzM7dmFyIG56PShhcnJheVtpKzJdK2FycmF5W2krNV0rYXJyYXlbaSs4XSkvMzthcnJheVtpKzBdPW54O2FycmF5W2krMV09bnk7YXJyYXlbaSsyXT1uejthcnJheVtpKzNdPW54O2FycmF5W2krNF09bnk7YXJyYXlbaSs1XT1uejthcnJheVtpKzZdPW54O2FycmF5W2krN109bnk7YXJyYXlbaSs4XT1uejt9fV9nbC5idWZmZXJEYXRhKF9nbC5BUlJBWV9CVUZGRVIsb2JqZWN0Lm5vcm1hbEFycmF5LF9nbC5EWU5BTUlDX0RSQVcpO3N0YXRlLmVuYWJsZUF0dHJpYnV0ZShwcm9ncmFtQXR0cmlidXRlcy5ub3JtYWwpO19nbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHByb2dyYW1BdHRyaWJ1dGVzLm5vcm1hbCwzLF9nbC5GTE9BVCxmYWxzZSwwLDApO31pZihvYmplY3QuaGFzVXZzJiZtYXRlcmlhbC5tYXApe19nbC5iaW5kQnVmZmVyKF9nbC5BUlJBWV9CVUZGRVIsYnVmZmVycy51dik7X2dsLmJ1ZmZlckRhdGEoX2dsLkFSUkFZX0JVRkZFUixvYmplY3QudXZBcnJheSxfZ2wuRFlOQU1JQ19EUkFXKTtzdGF0ZS5lbmFibGVBdHRyaWJ1dGUocHJvZ3JhbUF0dHJpYnV0ZXMudXYpO19nbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHByb2dyYW1BdHRyaWJ1dGVzLnV2LDIsX2dsLkZMT0FULGZhbHNlLDAsMCk7fWlmKG9iamVjdC5oYXNDb2xvcnMmJm1hdGVyaWFsLnZlcnRleENvbG9ycyE9PU5vQ29sb3JzKXtfZ2wuYmluZEJ1ZmZlcihfZ2wuQVJSQVlfQlVGRkVSLGJ1ZmZlcnMuY29sb3IpO19nbC5idWZmZXJEYXRhKF9nbC5BUlJBWV9CVUZGRVIsb2JqZWN0LmNvbG9yQXJyYXksX2dsLkRZTkFNSUNfRFJBVyk7c3RhdGUuZW5hYmxlQXR0cmlidXRlKHByb2dyYW1BdHRyaWJ1dGVzLmNvbG9yKTtfZ2wudmVydGV4QXR0cmliUG9pbnRlcihwcm9ncmFtQXR0cmlidXRlcy5jb2xvciwzLF9nbC5GTE9BVCxmYWxzZSwwLDApO31zdGF0ZS5kaXNhYmxlVW51c2VkQXR0cmlidXRlcygpO19nbC5kcmF3QXJyYXlzKF9nbC5UUklBTkdMRVMsMCxvYmplY3QuY291bnQpO29iamVjdC5jb3VudD0wO307dGhpcy5yZW5kZXJCdWZmZXJEaXJlY3Q9ZnVuY3Rpb24oY2FtZXJhLGZvZyxnZW9tZXRyeSxtYXRlcmlhbCxvYmplY3QsZ3JvdXApe3ZhciBmcm9udEZhY2VDVz1vYmplY3QuaXNNZXNoJiZvYmplY3QubWF0cml4V29ybGQuZGV0ZXJtaW5hbnQoKTwwO3N0YXRlLnNldE1hdGVyaWFsKG1hdGVyaWFsLGZyb250RmFjZUNXKTt2YXIgcHJvZ3JhbT1zZXRQcm9ncmFtKGNhbWVyYSxmb2csbWF0ZXJpYWwsb2JqZWN0KTt2YXIgZ2VvbWV0cnlQcm9ncmFtPWdlb21ldHJ5LmlkKydfJytwcm9ncmFtLmlkKydfJysobWF0ZXJpYWwud2lyZWZyYW1lPT09dHJ1ZSk7dmFyIHVwZGF0ZUJ1ZmZlcnM9ZmFsc2U7aWYoZ2VvbWV0cnlQcm9ncmFtIT09X2N1cnJlbnRHZW9tZXRyeVByb2dyYW0pe19jdXJyZW50R2VvbWV0cnlQcm9ncmFtPWdlb21ldHJ5UHJvZ3JhbTt1cGRhdGVCdWZmZXJzPXRydWU7fWlmKG9iamVjdC5tb3JwaFRhcmdldEluZmx1ZW5jZXMpe21vcnBodGFyZ2V0cy51cGRhdGUob2JqZWN0LGdlb21ldHJ5LG1hdGVyaWFsLHByb2dyYW0pO3VwZGF0ZUJ1ZmZlcnM9dHJ1ZTt9Ly8KdmFyIGluZGV4PWdlb21ldHJ5LmluZGV4O3ZhciBwb3NpdGlvbj1nZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uO3ZhciByYW5nZUZhY3Rvcj0xO2lmKG1hdGVyaWFsLndpcmVmcmFtZT09PXRydWUpe2luZGV4PWdlb21ldHJpZXMuZ2V0V2lyZWZyYW1lQXR0cmlidXRlKGdlb21ldHJ5KTtyYW5nZUZhY3Rvcj0yO312YXIgYXR0cmlidXRlO3ZhciByZW5kZXJlcj1idWZmZXJSZW5kZXJlcjtpZihpbmRleCE9PW51bGwpe2F0dHJpYnV0ZT1hdHRyaWJ1dGVzLmdldChpbmRleCk7cmVuZGVyZXI9aW5kZXhlZEJ1ZmZlclJlbmRlcmVyO3JlbmRlcmVyLnNldEluZGV4KGF0dHJpYnV0ZSk7fWlmKHVwZGF0ZUJ1ZmZlcnMpe3NldHVwVmVydGV4QXR0cmlidXRlcyhtYXRlcmlhbCxwcm9ncmFtLGdlb21ldHJ5KTtpZihpbmRleCE9PW51bGwpe19nbC5iaW5kQnVmZmVyKF9nbC5FTEVNRU5UX0FSUkFZX0JVRkZFUixhdHRyaWJ1dGUuYnVmZmVyKTt9fS8vCnZhciBkYXRhQ291bnQ9MDtpZihpbmRleCE9PW51bGwpe2RhdGFDb3VudD1pbmRleC5jb3VudDt9ZWxzZSBpZihwb3NpdGlvbiE9PXVuZGVmaW5lZCl7ZGF0YUNvdW50PXBvc2l0aW9uLmNvdW50O312YXIgcmFuZ2VTdGFydD1nZW9tZXRyeS5kcmF3UmFuZ2Uuc3RhcnQqcmFuZ2VGYWN0b3I7dmFyIHJhbmdlQ291bnQ9Z2VvbWV0cnkuZHJhd1JhbmdlLmNvdW50KnJhbmdlRmFjdG9yO3ZhciBncm91cFN0YXJ0PWdyb3VwIT09bnVsbD9ncm91cC5zdGFydCpyYW5nZUZhY3RvcjowO3ZhciBncm91cENvdW50PWdyb3VwIT09bnVsbD9ncm91cC5jb3VudCpyYW5nZUZhY3RvcjpJbmZpbml0eTt2YXIgZHJhd1N0YXJ0PU1hdGgubWF4KHJhbmdlU3RhcnQsZ3JvdXBTdGFydCk7dmFyIGRyYXdFbmQ9TWF0aC5taW4oZGF0YUNvdW50LHJhbmdlU3RhcnQrcmFuZ2VDb3VudCxncm91cFN0YXJ0K2dyb3VwQ291bnQpLTE7dmFyIGRyYXdDb3VudD1NYXRoLm1heCgwLGRyYXdFbmQtZHJhd1N0YXJ0KzEpO2lmKGRyYXdDb3VudD09PTApcmV0dXJuOy8vCmlmKG9iamVjdC5pc01lc2gpe2lmKG1hdGVyaWFsLndpcmVmcmFtZT09PXRydWUpe3N0YXRlLnNldExpbmVXaWR0aChtYXRlcmlhbC53aXJlZnJhbWVMaW5ld2lkdGgqZ2V0VGFyZ2V0UGl4ZWxSYXRpbygpKTtyZW5kZXJlci5zZXRNb2RlKF9nbC5MSU5FUyk7fWVsc2V7c3dpdGNoKG9iamVjdC5kcmF3TW9kZSl7Y2FzZSBUcmlhbmdsZXNEcmF3TW9kZTpyZW5kZXJlci5zZXRNb2RlKF9nbC5UUklBTkdMRVMpO2JyZWFrO2Nhc2UgVHJpYW5nbGVTdHJpcERyYXdNb2RlOnJlbmRlcmVyLnNldE1vZGUoX2dsLlRSSUFOR0xFX1NUUklQKTticmVhaztjYXNlIFRyaWFuZ2xlRmFuRHJhd01vZGU6cmVuZGVyZXIuc2V0TW9kZShfZ2wuVFJJQU5HTEVfRkFOKTticmVhazt9fX1lbHNlIGlmKG9iamVjdC5pc0xpbmUpe3ZhciBsaW5lV2lkdGg9bWF0ZXJpYWwubGluZXdpZHRoO2lmKGxpbmVXaWR0aD09PXVuZGVmaW5lZClsaW5lV2lkdGg9MTsvLyBOb3QgdXNpbmcgTGluZSpNYXRlcmlhbApzdGF0ZS5zZXRMaW5lV2lkdGgobGluZVdpZHRoKmdldFRhcmdldFBpeGVsUmF0aW8oKSk7aWYob2JqZWN0LmlzTGluZVNlZ21lbnRzKXtyZW5kZXJlci5zZXRNb2RlKF9nbC5MSU5FUyk7fWVsc2UgaWYob2JqZWN0LmlzTGluZUxvb3Ape3JlbmRlcmVyLnNldE1vZGUoX2dsLkxJTkVfTE9PUCk7fWVsc2V7cmVuZGVyZXIuc2V0TW9kZShfZ2wuTElORV9TVFJJUCk7fX1lbHNlIGlmKG9iamVjdC5pc1BvaW50cyl7cmVuZGVyZXIuc2V0TW9kZShfZ2wuUE9JTlRTKTt9aWYoZ2VvbWV0cnkmJmdlb21ldHJ5LmlzSW5zdGFuY2VkQnVmZmVyR2VvbWV0cnkpe2lmKGdlb21ldHJ5Lm1heEluc3RhbmNlZENvdW50PjApe3JlbmRlcmVyLnJlbmRlckluc3RhbmNlcyhnZW9tZXRyeSxkcmF3U3RhcnQsZHJhd0NvdW50KTt9fWVsc2V7cmVuZGVyZXIucmVuZGVyKGRyYXdTdGFydCxkcmF3Q291bnQpO319O2Z1bmN0aW9uIHNldHVwVmVydGV4QXR0cmlidXRlcyhtYXRlcmlhbCxwcm9ncmFtLGdlb21ldHJ5LHN0YXJ0SW5kZXgpe2lmKGdlb21ldHJ5JiZnZW9tZXRyeS5pc0luc3RhbmNlZEJ1ZmZlckdlb21ldHJ5KXtpZihleHRlbnNpb25zLmdldCgnQU5HTEVfaW5zdGFuY2VkX2FycmF5cycpPT09bnVsbCl7Y29uc29sZS5lcnJvcignVEhSRUUuV2ViR0xSZW5kZXJlci5zZXR1cFZlcnRleEF0dHJpYnV0ZXM6IHVzaW5nIFRIUkVFLkluc3RhbmNlZEJ1ZmZlckdlb21ldHJ5IGJ1dCBoYXJkd2FyZSBkb2VzIG5vdCBzdXBwb3J0IGV4dGVuc2lvbiBBTkdMRV9pbnN0YW5jZWRfYXJyYXlzLicpO3JldHVybjt9fWlmKHN0YXJ0SW5kZXg9PT11bmRlZmluZWQpc3RhcnRJbmRleD0wO3N0YXRlLmluaXRBdHRyaWJ1dGVzKCk7dmFyIGdlb21ldHJ5QXR0cmlidXRlcz1nZW9tZXRyeS5hdHRyaWJ1dGVzO3ZhciBwcm9ncmFtQXR0cmlidXRlcz1wcm9ncmFtLmdldEF0dHJpYnV0ZXMoKTt2YXIgbWF0ZXJpYWxEZWZhdWx0QXR0cmlidXRlVmFsdWVzPW1hdGVyaWFsLmRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXM7Zm9yKHZhciBuYW1lIGluIHByb2dyYW1BdHRyaWJ1dGVzKXt2YXIgcHJvZ3JhbUF0dHJpYnV0ZT1wcm9ncmFtQXR0cmlidXRlc1tuYW1lXTtpZihwcm9ncmFtQXR0cmlidXRlPj0wKXt2YXIgZ2VvbWV0cnlBdHRyaWJ1dGU9Z2VvbWV0cnlBdHRyaWJ1dGVzW25hbWVdO2lmKGdlb21ldHJ5QXR0cmlidXRlIT09dW5kZWZpbmVkKXt2YXIgbm9ybWFsaXplZD1nZW9tZXRyeUF0dHJpYnV0ZS5ub3JtYWxpemVkO3ZhciBzaXplPWdlb21ldHJ5QXR0cmlidXRlLml0ZW1TaXplO3ZhciBhdHRyaWJ1dGU9YXR0cmlidXRlcy5nZXQoZ2VvbWV0cnlBdHRyaWJ1dGUpOy8vIFRPRE8gQXR0cmlidXRlIG1heSBub3QgYmUgYXZhaWxhYmxlIG9uIGNvbnRleHQgcmVzdG9yZQppZihhdHRyaWJ1dGU9PT11bmRlZmluZWQpY29udGludWU7dmFyIGJ1ZmZlcj1hdHRyaWJ1dGUuYnVmZmVyO3ZhciB0eXBlPWF0dHJpYnV0ZS50eXBlO3ZhciBieXRlc1BlckVsZW1lbnQ9YXR0cmlidXRlLmJ5dGVzUGVyRWxlbWVudDtpZihnZW9tZXRyeUF0dHJpYnV0ZS5pc0ludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlKXt2YXIgZGF0YT1nZW9tZXRyeUF0dHJpYnV0ZS5kYXRhO3ZhciBzdHJpZGU9ZGF0YS5zdHJpZGU7dmFyIG9mZnNldD1nZW9tZXRyeUF0dHJpYnV0ZS5vZmZzZXQ7aWYoZGF0YSYmZGF0YS5pc0luc3RhbmNlZEludGVybGVhdmVkQnVmZmVyKXtzdGF0ZS5lbmFibGVBdHRyaWJ1dGVBbmREaXZpc29yKHByb2dyYW1BdHRyaWJ1dGUsZGF0YS5tZXNoUGVyQXR0cmlidXRlKTtpZihnZW9tZXRyeS5tYXhJbnN0YW5jZWRDb3VudD09PXVuZGVmaW5lZCl7Z2VvbWV0cnkubWF4SW5zdGFuY2VkQ291bnQ9ZGF0YS5tZXNoUGVyQXR0cmlidXRlKmRhdGEuY291bnQ7fX1lbHNle3N0YXRlLmVuYWJsZUF0dHJpYnV0ZShwcm9ncmFtQXR0cmlidXRlKTt9X2dsLmJpbmRCdWZmZXIoX2dsLkFSUkFZX0JVRkZFUixidWZmZXIpO19nbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHByb2dyYW1BdHRyaWJ1dGUsc2l6ZSx0eXBlLG5vcm1hbGl6ZWQsc3RyaWRlKmJ5dGVzUGVyRWxlbWVudCwoc3RhcnRJbmRleCpzdHJpZGUrb2Zmc2V0KSpieXRlc1BlckVsZW1lbnQpO31lbHNle2lmKGdlb21ldHJ5QXR0cmlidXRlLmlzSW5zdGFuY2VkQnVmZmVyQXR0cmlidXRlKXtzdGF0ZS5lbmFibGVBdHRyaWJ1dGVBbmREaXZpc29yKHByb2dyYW1BdHRyaWJ1dGUsZ2VvbWV0cnlBdHRyaWJ1dGUubWVzaFBlckF0dHJpYnV0ZSk7aWYoZ2VvbWV0cnkubWF4SW5zdGFuY2VkQ291bnQ9PT11bmRlZmluZWQpe2dlb21ldHJ5Lm1heEluc3RhbmNlZENvdW50PWdlb21ldHJ5QXR0cmlidXRlLm1lc2hQZXJBdHRyaWJ1dGUqZ2VvbWV0cnlBdHRyaWJ1dGUuY291bnQ7fX1lbHNle3N0YXRlLmVuYWJsZUF0dHJpYnV0ZShwcm9ncmFtQXR0cmlidXRlKTt9X2dsLmJpbmRCdWZmZXIoX2dsLkFSUkFZX0JVRkZFUixidWZmZXIpO19nbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHByb2dyYW1BdHRyaWJ1dGUsc2l6ZSx0eXBlLG5vcm1hbGl6ZWQsMCxzdGFydEluZGV4KnNpemUqYnl0ZXNQZXJFbGVtZW50KTt9fWVsc2UgaWYobWF0ZXJpYWxEZWZhdWx0QXR0cmlidXRlVmFsdWVzIT09dW5kZWZpbmVkKXt2YXIgdmFsdWU9bWF0ZXJpYWxEZWZhdWx0QXR0cmlidXRlVmFsdWVzW25hbWVdO2lmKHZhbHVlIT09dW5kZWZpbmVkKXtzd2l0Y2godmFsdWUubGVuZ3RoKXtjYXNlIDI6X2dsLnZlcnRleEF0dHJpYjJmdihwcm9ncmFtQXR0cmlidXRlLHZhbHVlKTticmVhaztjYXNlIDM6X2dsLnZlcnRleEF0dHJpYjNmdihwcm9ncmFtQXR0cmlidXRlLHZhbHVlKTticmVhaztjYXNlIDQ6X2dsLnZlcnRleEF0dHJpYjRmdihwcm9ncmFtQXR0cmlidXRlLHZhbHVlKTticmVhaztkZWZhdWx0Ol9nbC52ZXJ0ZXhBdHRyaWIxZnYocHJvZ3JhbUF0dHJpYnV0ZSx2YWx1ZSk7fX19fX1zdGF0ZS5kaXNhYmxlVW51c2VkQXR0cmlidXRlcygpO30vLyBDb21waWxlCnRoaXMuY29tcGlsZT1mdW5jdGlvbihzY2VuZSxjYW1lcmEpe2xpZ2h0c0FycmF5Lmxlbmd0aD0wO3NoYWRvd3NBcnJheS5sZW5ndGg9MDtzY2VuZS50cmF2ZXJzZShmdW5jdGlvbihvYmplY3Qpe2lmKG9iamVjdC5pc0xpZ2h0KXtsaWdodHNBcnJheS5wdXNoKG9iamVjdCk7aWYob2JqZWN0LmNhc3RTaGFkb3cpe3NoYWRvd3NBcnJheS5wdXNoKG9iamVjdCk7fX19KTtsaWdodHMuc2V0dXAobGlnaHRzQXJyYXksc2hhZG93c0FycmF5LGNhbWVyYSk7c2NlbmUudHJhdmVyc2UoZnVuY3Rpb24ob2JqZWN0KXtpZihvYmplY3QubWF0ZXJpYWwpe2lmKEFycmF5LmlzQXJyYXkob2JqZWN0Lm1hdGVyaWFsKSl7Zm9yKHZhciBpPTA7aTxvYmplY3QubWF0ZXJpYWwubGVuZ3RoO2krKyl7aW5pdE1hdGVyaWFsKG9iamVjdC5tYXRlcmlhbFtpXSxzY2VuZS5mb2csb2JqZWN0KTt9fWVsc2V7aW5pdE1hdGVyaWFsKG9iamVjdC5tYXRlcmlhbCxzY2VuZS5mb2csb2JqZWN0KTt9fX0pO307Ly8gQW5pbWF0aW9uIExvb3AKdmFyIGlzQW5pbWF0aW5nPWZhbHNlO3ZhciBvbkFuaW1hdGlvbkZyYW1lPW51bGw7ZnVuY3Rpb24gc3RhcnQoKXtpZihpc0FuaW1hdGluZylyZXR1cm47dmFyIGRldmljZT12ci5nZXREZXZpY2UoKTtpZihkZXZpY2UmJmRldmljZS5pc1ByZXNlbnRpbmcpe2RldmljZS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcCk7fWVsc2V7d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShsb29wKTt9aXNBbmltYXRpbmc9dHJ1ZTt9ZnVuY3Rpb24gbG9vcCh0aW1lKXtpZihvbkFuaW1hdGlvbkZyYW1lIT09bnVsbClvbkFuaW1hdGlvbkZyYW1lKHRpbWUpO3ZhciBkZXZpY2U9dnIuZ2V0RGV2aWNlKCk7aWYoZGV2aWNlJiZkZXZpY2UuaXNQcmVzZW50aW5nKXtkZXZpY2UucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGxvb3ApO31lbHNle3dpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcCk7fX10aGlzLmFuaW1hdGU9ZnVuY3Rpb24oY2FsbGJhY2spe29uQW5pbWF0aW9uRnJhbWU9Y2FsbGJhY2s7c3RhcnQoKTt9Oy8vIFJlbmRlcmluZwp0aGlzLnJlbmRlcj1mdW5jdGlvbihzY2VuZSxjYW1lcmEscmVuZGVyVGFyZ2V0LGZvcmNlQ2xlYXIpe2lmKCEoY2FtZXJhJiZjYW1lcmEuaXNDYW1lcmEpKXtjb25zb2xlLmVycm9yKCdUSFJFRS5XZWJHTFJlbmRlcmVyLnJlbmRlcjogY2FtZXJhIGlzIG5vdCBhbiBpbnN0YW5jZSBvZiBUSFJFRS5DYW1lcmEuJyk7cmV0dXJuO31pZihfaXNDb250ZXh0TG9zdClyZXR1cm47Ly8gcmVzZXQgY2FjaGluZyBmb3IgdGhpcyBmcmFtZQpfY3VycmVudEdlb21ldHJ5UHJvZ3JhbT0nJztfY3VycmVudE1hdGVyaWFsSWQ9LTE7X2N1cnJlbnRDYW1lcmE9bnVsbDsvLyB1cGRhdGUgc2NlbmUgZ3JhcGgKaWYoc2NlbmUuYXV0b1VwZGF0ZT09PXRydWUpc2NlbmUudXBkYXRlTWF0cml4V29ybGQoKTsvLyB1cGRhdGUgY2FtZXJhIG1hdHJpY2VzIGFuZCBmcnVzdHVtCmlmKGNhbWVyYS5wYXJlbnQ9PT1udWxsKWNhbWVyYS51cGRhdGVNYXRyaXhXb3JsZCgpO2lmKHZyLmVuYWJsZWQpe2NhbWVyYT12ci5nZXRDYW1lcmEoY2FtZXJhKTt9X3Byb2pTY3JlZW5NYXRyaXgubXVsdGlwbHlNYXRyaWNlcyhjYW1lcmEucHJvamVjdGlvbk1hdHJpeCxjYW1lcmEubWF0cml4V29ybGRJbnZlcnNlKTtfZnJ1c3R1bS5zZXRGcm9tTWF0cml4KF9wcm9qU2NyZWVuTWF0cml4KTtsaWdodHNBcnJheS5sZW5ndGg9MDtzaGFkb3dzQXJyYXkubGVuZ3RoPTA7c3ByaXRlc0FycmF5Lmxlbmd0aD0wO2ZsYXJlc0FycmF5Lmxlbmd0aD0wO19sb2NhbENsaXBwaW5nRW5hYmxlZD10aGlzLmxvY2FsQ2xpcHBpbmdFbmFibGVkO19jbGlwcGluZ0VuYWJsZWQ9X2NsaXBwaW5nLmluaXQodGhpcy5jbGlwcGluZ1BsYW5lcyxfbG9jYWxDbGlwcGluZ0VuYWJsZWQsY2FtZXJhKTtjdXJyZW50UmVuZGVyTGlzdD1yZW5kZXJMaXN0cy5nZXQoc2NlbmUsY2FtZXJhKTtjdXJyZW50UmVuZGVyTGlzdC5pbml0KCk7cHJvamVjdE9iamVjdChzY2VuZSxjYW1lcmEsX3RoaXMuc29ydE9iamVjdHMpO2lmKF90aGlzLnNvcnRPYmplY3RzPT09dHJ1ZSl7Y3VycmVudFJlbmRlckxpc3Quc29ydCgpO30vLwp0ZXh0dXJlcy51cGRhdGVWaWRlb1RleHR1cmVzKCk7Ly8KaWYoX2NsaXBwaW5nRW5hYmxlZClfY2xpcHBpbmcuYmVnaW5TaGFkb3dzKCk7c2hhZG93TWFwLnJlbmRlcihzaGFkb3dzQXJyYXksc2NlbmUsY2FtZXJhKTtsaWdodHMuc2V0dXAobGlnaHRzQXJyYXksc2hhZG93c0FycmF5LGNhbWVyYSk7aWYoX2NsaXBwaW5nRW5hYmxlZClfY2xpcHBpbmcuZW5kU2hhZG93cygpOy8vCl9pbmZvUmVuZGVyLmZyYW1lKys7X2luZm9SZW5kZXIuY2FsbHM9MDtfaW5mb1JlbmRlci52ZXJ0aWNlcz0wO19pbmZvUmVuZGVyLmZhY2VzPTA7X2luZm9SZW5kZXIucG9pbnRzPTA7aWYocmVuZGVyVGFyZ2V0PT09dW5kZWZpbmVkKXtyZW5kZXJUYXJnZXQ9bnVsbDt9dGhpcy5zZXRSZW5kZXJUYXJnZXQocmVuZGVyVGFyZ2V0KTsvLwpiYWNrZ3JvdW5kLnJlbmRlcihjdXJyZW50UmVuZGVyTGlzdCxzY2VuZSxjYW1lcmEsZm9yY2VDbGVhcik7Ly8gcmVuZGVyIHNjZW5lCnZhciBvcGFxdWVPYmplY3RzPWN1cnJlbnRSZW5kZXJMaXN0Lm9wYXF1ZTt2YXIgdHJhbnNwYXJlbnRPYmplY3RzPWN1cnJlbnRSZW5kZXJMaXN0LnRyYW5zcGFyZW50O2lmKHNjZW5lLm92ZXJyaWRlTWF0ZXJpYWwpe3ZhciBvdmVycmlkZU1hdGVyaWFsPXNjZW5lLm92ZXJyaWRlTWF0ZXJpYWw7aWYob3BhcXVlT2JqZWN0cy5sZW5ndGgpcmVuZGVyT2JqZWN0cyhvcGFxdWVPYmplY3RzLHNjZW5lLGNhbWVyYSxvdmVycmlkZU1hdGVyaWFsKTtpZih0cmFuc3BhcmVudE9iamVjdHMubGVuZ3RoKXJlbmRlck9iamVjdHModHJhbnNwYXJlbnRPYmplY3RzLHNjZW5lLGNhbWVyYSxvdmVycmlkZU1hdGVyaWFsKTt9ZWxzZXsvLyBvcGFxdWUgcGFzcyAoZnJvbnQtdG8tYmFjayBvcmRlcikKaWYob3BhcXVlT2JqZWN0cy5sZW5ndGgpcmVuZGVyT2JqZWN0cyhvcGFxdWVPYmplY3RzLHNjZW5lLGNhbWVyYSk7Ly8gdHJhbnNwYXJlbnQgcGFzcyAoYmFjay10by1mcm9udCBvcmRlcikKaWYodHJhbnNwYXJlbnRPYmplY3RzLmxlbmd0aClyZW5kZXJPYmplY3RzKHRyYW5zcGFyZW50T2JqZWN0cyxzY2VuZSxjYW1lcmEpO30vLyBjdXN0b20gcmVuZGVyZXJzCnNwcml0ZVJlbmRlcmVyLnJlbmRlcihzcHJpdGVzQXJyYXksc2NlbmUsY2FtZXJhKTtmbGFyZVJlbmRlcmVyLnJlbmRlcihmbGFyZXNBcnJheSxzY2VuZSxjYW1lcmEsX2N1cnJlbnRWaWV3cG9ydCk7Ly8gR2VuZXJhdGUgbWlwbWFwIGlmIHdlJ3JlIHVzaW5nIGFueSBraW5kIG9mIG1pcG1hcCBmaWx0ZXJpbmcKaWYocmVuZGVyVGFyZ2V0KXt0ZXh0dXJlcy51cGRhdGVSZW5kZXJUYXJnZXRNaXBtYXAocmVuZGVyVGFyZ2V0KTt9Ly8gRW5zdXJlIGRlcHRoIGJ1ZmZlciB3cml0aW5nIGlzIGVuYWJsZWQgc28gaXQgY2FuIGJlIGNsZWFyZWQgb24gbmV4dCByZW5kZXIKc3RhdGUuYnVmZmVycy5kZXB0aC5zZXRUZXN0KHRydWUpO3N0YXRlLmJ1ZmZlcnMuZGVwdGguc2V0TWFzayh0cnVlKTtzdGF0ZS5idWZmZXJzLmNvbG9yLnNldE1hc2sodHJ1ZSk7c3RhdGUuc2V0UG9seWdvbk9mZnNldChmYWxzZSk7aWYodnIuZW5hYmxlZCl7dnIuc3VibWl0RnJhbWUoKTt9Ly8gX2dsLmZpbmlzaCgpOwp9Oy8qCgkvLyBUT0RPIER1cGxpY2F0ZWQgY29kZSAoRnJ1c3R1bSkKCgl2YXIgX3NwaGVyZSA9IG5ldyBTcGhlcmUoKTsKCglmdW5jdGlvbiBpc09iamVjdFZpZXdhYmxlKCBvYmplY3QgKSB7CgoJCXZhciBnZW9tZXRyeSA9IG9iamVjdC5nZW9tZXRyeTsKCgkJaWYgKCBnZW9tZXRyeS5ib3VuZGluZ1NwaGVyZSA9PT0gbnVsbCApCgkJCWdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpOwoKCQlfc3BoZXJlLmNvcHkoIGdlb21ldHJ5LmJvdW5kaW5nU3BoZXJlICkuCgkJYXBwbHlNYXRyaXg0KCBvYmplY3QubWF0cml4V29ybGQgKTsKCgkJcmV0dXJuIGlzU3BoZXJlVmlld2FibGUoIF9zcGhlcmUgKTsKCgl9CgoJZnVuY3Rpb24gaXNTcHJpdGVWaWV3YWJsZSggc3ByaXRlICkgewoKCQlfc3BoZXJlLmNlbnRlci5zZXQoIDAsIDAsIDAgKTsKCQlfc3BoZXJlLnJhZGl1cyA9IDAuNzA3MTA2NzgxMTg2NTQ3NjsKCQlfc3BoZXJlLmFwcGx5TWF0cml4NCggc3ByaXRlLm1hdHJpeFdvcmxkICk7CgoJCXJldHVybiBpc1NwaGVyZVZpZXdhYmxlKCBfc3BoZXJlICk7CgoJfQoKCWZ1bmN0aW9uIGlzU3BoZXJlVmlld2FibGUoIHNwaGVyZSApIHsKCgkJaWYgKCAhIF9mcnVzdHVtLmludGVyc2VjdHNTcGhlcmUoIHNwaGVyZSApICkgcmV0dXJuIGZhbHNlOwoKCQl2YXIgbnVtUGxhbmVzID0gX2NsaXBwaW5nLm51bVBsYW5lczsKCgkJaWYgKCBudW1QbGFuZXMgPT09IDAgKSByZXR1cm4gdHJ1ZTsKCgkJdmFyIHBsYW5lcyA9IF90aGlzLmNsaXBwaW5nUGxhbmVzLAoKCQkJY2VudGVyID0gc3BoZXJlLmNlbnRlciwKCQkJbmVnUmFkID0gLSBzcGhlcmUucmFkaXVzLAoJCQlpID0gMDsKCgkJZG8gewoKCQkJLy8gb3V0IHdoZW4gZGVlcGVyIHRoYW4gcmFkaXVzIGluIHRoZSBuZWdhdGl2ZSBoYWxmc3BhY2UKCQkJaWYgKCBwbGFuZXNbIGkgXS5kaXN0YW5jZVRvUG9pbnQoIGNlbnRlciApIDwgbmVnUmFkICkgcmV0dXJuIGZhbHNlOwoKCQl9IHdoaWxlICggKysgaSAhPT0gbnVtUGxhbmVzICk7CgoJCXJldHVybiB0cnVlOwoKCX0KCSovZnVuY3Rpb24gcHJvamVjdE9iamVjdChvYmplY3QsY2FtZXJhLHNvcnRPYmplY3RzKXtpZihvYmplY3QudmlzaWJsZT09PWZhbHNlKXJldHVybjt2YXIgdmlzaWJsZT1vYmplY3QubGF5ZXJzLnRlc3QoY2FtZXJhLmxheWVycyk7aWYodmlzaWJsZSl7aWYob2JqZWN0LmlzTGlnaHQpe2xpZ2h0c0FycmF5LnB1c2gob2JqZWN0KTtpZihvYmplY3QuY2FzdFNoYWRvdyl7c2hhZG93c0FycmF5LnB1c2gob2JqZWN0KTt9fWVsc2UgaWYob2JqZWN0LmlzU3ByaXRlKXtpZighb2JqZWN0LmZydXN0dW1DdWxsZWR8fF9mcnVzdHVtLmludGVyc2VjdHNTcHJpdGUob2JqZWN0KSl7c3ByaXRlc0FycmF5LnB1c2gob2JqZWN0KTt9fWVsc2UgaWYob2JqZWN0LmlzTGVuc0ZsYXJlKXtmbGFyZXNBcnJheS5wdXNoKG9iamVjdCk7fWVsc2UgaWYob2JqZWN0LmlzSW1tZWRpYXRlUmVuZGVyT2JqZWN0KXtpZihzb3J0T2JqZWN0cyl7X3ZlY3RvcjMuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKG9iamVjdC5tYXRyaXhXb3JsZCkuYXBwbHlNYXRyaXg0KF9wcm9qU2NyZWVuTWF0cml4KTt9Y3VycmVudFJlbmRlckxpc3QucHVzaChvYmplY3QsbnVsbCxvYmplY3QubWF0ZXJpYWwsX3ZlY3RvcjMueixudWxsKTt9ZWxzZSBpZihvYmplY3QuaXNNZXNofHxvYmplY3QuaXNMaW5lfHxvYmplY3QuaXNQb2ludHMpe2lmKG9iamVjdC5pc1NraW5uZWRNZXNoKXtvYmplY3Quc2tlbGV0b24udXBkYXRlKCk7fWlmKCFvYmplY3QuZnJ1c3R1bUN1bGxlZHx8X2ZydXN0dW0uaW50ZXJzZWN0c09iamVjdChvYmplY3QpKXtpZihzb3J0T2JqZWN0cyl7X3ZlY3RvcjMuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKG9iamVjdC5tYXRyaXhXb3JsZCkuYXBwbHlNYXRyaXg0KF9wcm9qU2NyZWVuTWF0cml4KTt9dmFyIGdlb21ldHJ5PW9iamVjdHMudXBkYXRlKG9iamVjdCk7dmFyIG1hdGVyaWFsPW9iamVjdC5tYXRlcmlhbDtpZihBcnJheS5pc0FycmF5KG1hdGVyaWFsKSl7dmFyIGdyb3Vwcz1nZW9tZXRyeS5ncm91cHM7Zm9yKHZhciBpPTAsbD1ncm91cHMubGVuZ3RoO2k8bDtpKyspe3ZhciBncm91cD1ncm91cHNbaV07dmFyIGdyb3VwTWF0ZXJpYWw9bWF0ZXJpYWxbZ3JvdXAubWF0ZXJpYWxJbmRleF07aWYoZ3JvdXBNYXRlcmlhbCYmZ3JvdXBNYXRlcmlhbC52aXNpYmxlKXtjdXJyZW50UmVuZGVyTGlzdC5wdXNoKG9iamVjdCxnZW9tZXRyeSxncm91cE1hdGVyaWFsLF92ZWN0b3IzLnosZ3JvdXApO319fWVsc2UgaWYobWF0ZXJpYWwudmlzaWJsZSl7Y3VycmVudFJlbmRlckxpc3QucHVzaChvYmplY3QsZ2VvbWV0cnksbWF0ZXJpYWwsX3ZlY3RvcjMueixudWxsKTt9fX19dmFyIGNoaWxkcmVuPW9iamVjdC5jaGlsZHJlbjtmb3IodmFyIGk9MCxsPWNoaWxkcmVuLmxlbmd0aDtpPGw7aSsrKXtwcm9qZWN0T2JqZWN0KGNoaWxkcmVuW2ldLGNhbWVyYSxzb3J0T2JqZWN0cyk7fX1mdW5jdGlvbiByZW5kZXJPYmplY3RzKHJlbmRlckxpc3Qsc2NlbmUsY2FtZXJhLG92ZXJyaWRlTWF0ZXJpYWwpe2Zvcih2YXIgaT0wLGw9cmVuZGVyTGlzdC5sZW5ndGg7aTxsO2krKyl7dmFyIHJlbmRlckl0ZW09cmVuZGVyTGlzdFtpXTt2YXIgb2JqZWN0PXJlbmRlckl0ZW0ub2JqZWN0O3ZhciBnZW9tZXRyeT1yZW5kZXJJdGVtLmdlb21ldHJ5O3ZhciBtYXRlcmlhbD1vdmVycmlkZU1hdGVyaWFsPT09dW5kZWZpbmVkP3JlbmRlckl0ZW0ubWF0ZXJpYWw6b3ZlcnJpZGVNYXRlcmlhbDt2YXIgZ3JvdXA9cmVuZGVySXRlbS5ncm91cDtpZihjYW1lcmEuaXNBcnJheUNhbWVyYSl7X2N1cnJlbnRBcnJheUNhbWVyYT1jYW1lcmE7dmFyIGNhbWVyYXM9Y2FtZXJhLmNhbWVyYXM7Zm9yKHZhciBqPTAsamw9Y2FtZXJhcy5sZW5ndGg7ajxqbDtqKyspe3ZhciBjYW1lcmEyPWNhbWVyYXNbal07aWYob2JqZWN0LmxheWVycy50ZXN0KGNhbWVyYTIubGF5ZXJzKSl7dmFyIGJvdW5kcz1jYW1lcmEyLmJvdW5kczt2YXIgeD1ib3VuZHMueCpfd2lkdGg7dmFyIHk9Ym91bmRzLnkqX2hlaWdodDt2YXIgd2lkdGg9Ym91bmRzLnoqX3dpZHRoO3ZhciBoZWlnaHQ9Ym91bmRzLncqX2hlaWdodDtzdGF0ZS52aWV3cG9ydChfY3VycmVudFZpZXdwb3J0LnNldCh4LHksd2lkdGgsaGVpZ2h0KS5tdWx0aXBseVNjYWxhcihfcGl4ZWxSYXRpbykpO3JlbmRlck9iamVjdChvYmplY3Qsc2NlbmUsY2FtZXJhMixnZW9tZXRyeSxtYXRlcmlhbCxncm91cCk7fX19ZWxzZXtfY3VycmVudEFycmF5Q2FtZXJhPW51bGw7cmVuZGVyT2JqZWN0KG9iamVjdCxzY2VuZSxjYW1lcmEsZ2VvbWV0cnksbWF0ZXJpYWwsZ3JvdXApO319fWZ1bmN0aW9uIHJlbmRlck9iamVjdChvYmplY3Qsc2NlbmUsY2FtZXJhLGdlb21ldHJ5LG1hdGVyaWFsLGdyb3VwKXtvYmplY3Qub25CZWZvcmVSZW5kZXIoX3RoaXMsc2NlbmUsY2FtZXJhLGdlb21ldHJ5LG1hdGVyaWFsLGdyb3VwKTtvYmplY3QubW9kZWxWaWV3TWF0cml4Lm11bHRpcGx5TWF0cmljZXMoY2FtZXJhLm1hdHJpeFdvcmxkSW52ZXJzZSxvYmplY3QubWF0cml4V29ybGQpO29iamVjdC5ub3JtYWxNYXRyaXguZ2V0Tm9ybWFsTWF0cml4KG9iamVjdC5tb2RlbFZpZXdNYXRyaXgpO2lmKG9iamVjdC5pc0ltbWVkaWF0ZVJlbmRlck9iamVjdCl7dmFyIGZyb250RmFjZUNXPW9iamVjdC5pc01lc2gmJm9iamVjdC5tYXRyaXhXb3JsZC5kZXRlcm1pbmFudCgpPDA7c3RhdGUuc2V0TWF0ZXJpYWwobWF0ZXJpYWwsZnJvbnRGYWNlQ1cpO3ZhciBwcm9ncmFtPXNldFByb2dyYW0oY2FtZXJhLHNjZW5lLmZvZyxtYXRlcmlhbCxvYmplY3QpO19jdXJyZW50R2VvbWV0cnlQcm9ncmFtPScnO3JlbmRlck9iamVjdEltbWVkaWF0ZShvYmplY3QscHJvZ3JhbSxtYXRlcmlhbCk7fWVsc2V7X3RoaXMucmVuZGVyQnVmZmVyRGlyZWN0KGNhbWVyYSxzY2VuZS5mb2csZ2VvbWV0cnksbWF0ZXJpYWwsb2JqZWN0LGdyb3VwKTt9b2JqZWN0Lm9uQWZ0ZXJSZW5kZXIoX3RoaXMsc2NlbmUsY2FtZXJhLGdlb21ldHJ5LG1hdGVyaWFsLGdyb3VwKTt9ZnVuY3Rpb24gaW5pdE1hdGVyaWFsKG1hdGVyaWFsLGZvZyxvYmplY3Qpe3ZhciBtYXRlcmlhbFByb3BlcnRpZXM9cHJvcGVydGllcy5nZXQobWF0ZXJpYWwpO3ZhciBwYXJhbWV0ZXJzPXByb2dyYW1DYWNoZS5nZXRQYXJhbWV0ZXJzKG1hdGVyaWFsLGxpZ2h0cy5zdGF0ZSxzaGFkb3dzQXJyYXksZm9nLF9jbGlwcGluZy5udW1QbGFuZXMsX2NsaXBwaW5nLm51bUludGVyc2VjdGlvbixvYmplY3QpO3ZhciBjb2RlPXByb2dyYW1DYWNoZS5nZXRQcm9ncmFtQ29kZShtYXRlcmlhbCxwYXJhbWV0ZXJzKTt2YXIgcHJvZ3JhbT1tYXRlcmlhbFByb3BlcnRpZXMucHJvZ3JhbTt2YXIgcHJvZ3JhbUNoYW5nZT10cnVlO2lmKHByb2dyYW09PT11bmRlZmluZWQpey8vIG5ldyBtYXRlcmlhbAptYXRlcmlhbC5hZGRFdmVudExpc3RlbmVyKCdkaXNwb3NlJyxvbk1hdGVyaWFsRGlzcG9zZSk7fWVsc2UgaWYocHJvZ3JhbS5jb2RlIT09Y29kZSl7Ly8gY2hhbmdlZCBnbHNsIG9yIHBhcmFtZXRlcnMKcmVsZWFzZU1hdGVyaWFsUHJvZ3JhbVJlZmVyZW5jZShtYXRlcmlhbCk7fWVsc2UgaWYocGFyYW1ldGVycy5zaGFkZXJJRCE9PXVuZGVmaW5lZCl7Ly8gc2FtZSBnbHNsIGFuZCB1bmlmb3JtIGxpc3QKcmV0dXJuO31lbHNley8vIG9ubHkgcmVidWlsZCB1bmlmb3JtIGxpc3QKcHJvZ3JhbUNoYW5nZT1mYWxzZTt9aWYocHJvZ3JhbUNoYW5nZSl7aWYocGFyYW1ldGVycy5zaGFkZXJJRCl7dmFyIHNoYWRlcj1TaGFkZXJMaWJbcGFyYW1ldGVycy5zaGFkZXJJRF07bWF0ZXJpYWxQcm9wZXJ0aWVzLnNoYWRlcj17bmFtZTptYXRlcmlhbC50eXBlLHVuaWZvcm1zOlVuaWZvcm1zVXRpbHMuY2xvbmUoc2hhZGVyLnVuaWZvcm1zKSx2ZXJ0ZXhTaGFkZXI6c2hhZGVyLnZlcnRleFNoYWRlcixmcmFnbWVudFNoYWRlcjpzaGFkZXIuZnJhZ21lbnRTaGFkZXJ9O31lbHNle21hdGVyaWFsUHJvcGVydGllcy5zaGFkZXI9e25hbWU6bWF0ZXJpYWwudHlwZSx1bmlmb3JtczptYXRlcmlhbC51bmlmb3Jtcyx2ZXJ0ZXhTaGFkZXI6bWF0ZXJpYWwudmVydGV4U2hhZGVyLGZyYWdtZW50U2hhZGVyOm1hdGVyaWFsLmZyYWdtZW50U2hhZGVyfTt9bWF0ZXJpYWwub25CZWZvcmVDb21waWxlKG1hdGVyaWFsUHJvcGVydGllcy5zaGFkZXIpO3Byb2dyYW09cHJvZ3JhbUNhY2hlLmFjcXVpcmVQcm9ncmFtKG1hdGVyaWFsLG1hdGVyaWFsUHJvcGVydGllcy5zaGFkZXIscGFyYW1ldGVycyxjb2RlKTttYXRlcmlhbFByb3BlcnRpZXMucHJvZ3JhbT1wcm9ncmFtO21hdGVyaWFsLnByb2dyYW09cHJvZ3JhbTt9dmFyIHByb2dyYW1BdHRyaWJ1dGVzPXByb2dyYW0uZ2V0QXR0cmlidXRlcygpO2lmKG1hdGVyaWFsLm1vcnBoVGFyZ2V0cyl7bWF0ZXJpYWwubnVtU3VwcG9ydGVkTW9ycGhUYXJnZXRzPTA7Zm9yKHZhciBpPTA7aTxfdGhpcy5tYXhNb3JwaFRhcmdldHM7aSsrKXtpZihwcm9ncmFtQXR0cmlidXRlc1snbW9ycGhUYXJnZXQnK2ldPj0wKXttYXRlcmlhbC5udW1TdXBwb3J0ZWRNb3JwaFRhcmdldHMrKzt9fX1pZihtYXRlcmlhbC5tb3JwaE5vcm1hbHMpe21hdGVyaWFsLm51bVN1cHBvcnRlZE1vcnBoTm9ybWFscz0wO2Zvcih2YXIgaT0wO2k8X3RoaXMubWF4TW9ycGhOb3JtYWxzO2krKyl7aWYocHJvZ3JhbUF0dHJpYnV0ZXNbJ21vcnBoTm9ybWFsJytpXT49MCl7bWF0ZXJpYWwubnVtU3VwcG9ydGVkTW9ycGhOb3JtYWxzKys7fX19dmFyIHVuaWZvcm1zPW1hdGVyaWFsUHJvcGVydGllcy5zaGFkZXIudW5pZm9ybXM7aWYoIW1hdGVyaWFsLmlzU2hhZGVyTWF0ZXJpYWwmJiFtYXRlcmlhbC5pc1Jhd1NoYWRlck1hdGVyaWFsfHxtYXRlcmlhbC5jbGlwcGluZz09PXRydWUpe21hdGVyaWFsUHJvcGVydGllcy5udW1DbGlwcGluZ1BsYW5lcz1fY2xpcHBpbmcubnVtUGxhbmVzO21hdGVyaWFsUHJvcGVydGllcy5udW1JbnRlcnNlY3Rpb249X2NsaXBwaW5nLm51bUludGVyc2VjdGlvbjt1bmlmb3Jtcy5jbGlwcGluZ1BsYW5lcz1fY2xpcHBpbmcudW5pZm9ybTt9bWF0ZXJpYWxQcm9wZXJ0aWVzLmZvZz1mb2c7Ly8gc3RvcmUgdGhlIGxpZ2h0IHNldHVwIGl0IHdhcyBjcmVhdGVkIGZvcgptYXRlcmlhbFByb3BlcnRpZXMubGlnaHRzSGFzaD1saWdodHMuc3RhdGUuaGFzaDtpZihtYXRlcmlhbC5saWdodHMpey8vIHdpcmUgdXAgdGhlIG1hdGVyaWFsIHRvIHRoaXMgcmVuZGVyZXIncyBsaWdodGluZyBzdGF0ZQp1bmlmb3Jtcy5hbWJpZW50TGlnaHRDb2xvci52YWx1ZT1saWdodHMuc3RhdGUuYW1iaWVudDt1bmlmb3Jtcy5kaXJlY3Rpb25hbExpZ2h0cy52YWx1ZT1saWdodHMuc3RhdGUuZGlyZWN0aW9uYWw7dW5pZm9ybXMuc3BvdExpZ2h0cy52YWx1ZT1saWdodHMuc3RhdGUuc3BvdDt1bmlmb3Jtcy5yZWN0QXJlYUxpZ2h0cy52YWx1ZT1saWdodHMuc3RhdGUucmVjdEFyZWE7dW5pZm9ybXMucG9pbnRMaWdodHMudmFsdWU9bGlnaHRzLnN0YXRlLnBvaW50O3VuaWZvcm1zLmhlbWlzcGhlcmVMaWdodHMudmFsdWU9bGlnaHRzLnN0YXRlLmhlbWk7dW5pZm9ybXMuZGlyZWN0aW9uYWxTaGFkb3dNYXAudmFsdWU9bGlnaHRzLnN0YXRlLmRpcmVjdGlvbmFsU2hhZG93TWFwO3VuaWZvcm1zLmRpcmVjdGlvbmFsU2hhZG93TWF0cml4LnZhbHVlPWxpZ2h0cy5zdGF0ZS5kaXJlY3Rpb25hbFNoYWRvd01hdHJpeDt1bmlmb3Jtcy5zcG90U2hhZG93TWFwLnZhbHVlPWxpZ2h0cy5zdGF0ZS5zcG90U2hhZG93TWFwO3VuaWZvcm1zLnNwb3RTaGFkb3dNYXRyaXgudmFsdWU9bGlnaHRzLnN0YXRlLnNwb3RTaGFkb3dNYXRyaXg7dW5pZm9ybXMucG9pbnRTaGFkb3dNYXAudmFsdWU9bGlnaHRzLnN0YXRlLnBvaW50U2hhZG93TWFwO3VuaWZvcm1zLnBvaW50U2hhZG93TWF0cml4LnZhbHVlPWxpZ2h0cy5zdGF0ZS5wb2ludFNoYWRvd01hdHJpeDsvLyBUT0RPIChhYmVsbmF0aW9uKTogYWRkIGFyZWEgbGlnaHRzIHNoYWRvdyBpbmZvIHRvIHVuaWZvcm1zCn12YXIgcHJvZ1VuaWZvcm1zPW1hdGVyaWFsUHJvcGVydGllcy5wcm9ncmFtLmdldFVuaWZvcm1zKCksdW5pZm9ybXNMaXN0PVdlYkdMVW5pZm9ybXMuc2VxV2l0aFZhbHVlKHByb2dVbmlmb3Jtcy5zZXEsdW5pZm9ybXMpO21hdGVyaWFsUHJvcGVydGllcy51bmlmb3Jtc0xpc3Q9dW5pZm9ybXNMaXN0O31mdW5jdGlvbiBzZXRQcm9ncmFtKGNhbWVyYSxmb2csbWF0ZXJpYWwsb2JqZWN0KXtfdXNlZFRleHR1cmVVbml0cz0wO3ZhciBtYXRlcmlhbFByb3BlcnRpZXM9cHJvcGVydGllcy5nZXQobWF0ZXJpYWwpO2lmKF9jbGlwcGluZ0VuYWJsZWQpe2lmKF9sb2NhbENsaXBwaW5nRW5hYmxlZHx8Y2FtZXJhIT09X2N1cnJlbnRDYW1lcmEpe3ZhciB1c2VDYWNoZT1jYW1lcmE9PT1fY3VycmVudENhbWVyYSYmbWF0ZXJpYWwuaWQ9PT1fY3VycmVudE1hdGVyaWFsSWQ7Ly8gd2UgbWlnaHQgd2FudCB0byBjYWxsIHRoaXMgZnVuY3Rpb24gd2l0aCBzb21lIENsaXBwaW5nR3JvdXAKLy8gb2JqZWN0IGluc3RlYWQgb2YgdGhlIG1hdGVyaWFsLCBvbmNlIGl0IGJlY29tZXMgZmVhc2libGUKLy8gKCM4NDY1LCAjODM3OSkKX2NsaXBwaW5nLnNldFN0YXRlKG1hdGVyaWFsLmNsaXBwaW5nUGxhbmVzLG1hdGVyaWFsLmNsaXBJbnRlcnNlY3Rpb24sbWF0ZXJpYWwuY2xpcFNoYWRvd3MsY2FtZXJhLG1hdGVyaWFsUHJvcGVydGllcyx1c2VDYWNoZSk7fX1pZihtYXRlcmlhbC5uZWVkc1VwZGF0ZT09PWZhbHNlKXtpZihtYXRlcmlhbFByb3BlcnRpZXMucHJvZ3JhbT09PXVuZGVmaW5lZCl7bWF0ZXJpYWwubmVlZHNVcGRhdGU9dHJ1ZTt9ZWxzZSBpZihtYXRlcmlhbC5mb2cmJm1hdGVyaWFsUHJvcGVydGllcy5mb2chPT1mb2cpe21hdGVyaWFsLm5lZWRzVXBkYXRlPXRydWU7fWVsc2UgaWYobWF0ZXJpYWwubGlnaHRzJiZtYXRlcmlhbFByb3BlcnRpZXMubGlnaHRzSGFzaCE9PWxpZ2h0cy5zdGF0ZS5oYXNoKXttYXRlcmlhbC5uZWVkc1VwZGF0ZT10cnVlO31lbHNlIGlmKG1hdGVyaWFsUHJvcGVydGllcy5udW1DbGlwcGluZ1BsYW5lcyE9PXVuZGVmaW5lZCYmKG1hdGVyaWFsUHJvcGVydGllcy5udW1DbGlwcGluZ1BsYW5lcyE9PV9jbGlwcGluZy5udW1QbGFuZXN8fG1hdGVyaWFsUHJvcGVydGllcy5udW1JbnRlcnNlY3Rpb24hPT1fY2xpcHBpbmcubnVtSW50ZXJzZWN0aW9uKSl7bWF0ZXJpYWwubmVlZHNVcGRhdGU9dHJ1ZTt9fWlmKG1hdGVyaWFsLm5lZWRzVXBkYXRlKXtpbml0TWF0ZXJpYWwobWF0ZXJpYWwsZm9nLG9iamVjdCk7bWF0ZXJpYWwubmVlZHNVcGRhdGU9ZmFsc2U7fXZhciByZWZyZXNoUHJvZ3JhbT1mYWxzZTt2YXIgcmVmcmVzaE1hdGVyaWFsPWZhbHNlO3ZhciByZWZyZXNoTGlnaHRzPWZhbHNlO3ZhciBwcm9ncmFtPW1hdGVyaWFsUHJvcGVydGllcy5wcm9ncmFtLHBfdW5pZm9ybXM9cHJvZ3JhbS5nZXRVbmlmb3JtcygpLG1fdW5pZm9ybXM9bWF0ZXJpYWxQcm9wZXJ0aWVzLnNoYWRlci51bmlmb3JtcztpZihzdGF0ZS51c2VQcm9ncmFtKHByb2dyYW0ucHJvZ3JhbSkpe3JlZnJlc2hQcm9ncmFtPXRydWU7cmVmcmVzaE1hdGVyaWFsPXRydWU7cmVmcmVzaExpZ2h0cz10cnVlO31pZihtYXRlcmlhbC5pZCE9PV9jdXJyZW50TWF0ZXJpYWxJZCl7X2N1cnJlbnRNYXRlcmlhbElkPW1hdGVyaWFsLmlkO3JlZnJlc2hNYXRlcmlhbD10cnVlO31pZihyZWZyZXNoUHJvZ3JhbXx8Y2FtZXJhIT09X2N1cnJlbnRDYW1lcmEpe3BfdW5pZm9ybXMuc2V0VmFsdWUoX2dsLCdwcm9qZWN0aW9uTWF0cml4JyxjYW1lcmEucHJvamVjdGlvbk1hdHJpeCk7aWYoY2FwYWJpbGl0aWVzLmxvZ2FyaXRobWljRGVwdGhCdWZmZXIpe3BfdW5pZm9ybXMuc2V0VmFsdWUoX2dsLCdsb2dEZXB0aEJ1ZkZDJywyLjAvKE1hdGgubG9nKGNhbWVyYS5mYXIrMS4wKS9NYXRoLkxOMikpO30vLyBBdm9pZCB1bm5lZWRlZCB1bmlmb3JtIHVwZGF0ZXMgcGVyIEFycmF5Q2FtZXJhJ3Mgc3ViLWNhbWVyYQppZihfY3VycmVudENhbWVyYSE9PShfY3VycmVudEFycmF5Q2FtZXJhfHxjYW1lcmEpKXtfY3VycmVudENhbWVyYT1fY3VycmVudEFycmF5Q2FtZXJhfHxjYW1lcmE7Ly8gbGlnaHRpbmcgdW5pZm9ybXMgZGVwZW5kIG9uIHRoZSBjYW1lcmEgc28gZW5mb3JjZSBhbiB1cGRhdGUKLy8gbm93LCBpbiBjYXNlIHRoaXMgbWF0ZXJpYWwgc3VwcG9ydHMgbGlnaHRzIC0gb3IgbGF0ZXIsIHdoZW4KLy8gdGhlIG5leHQgbWF0ZXJpYWwgdGhhdCBkb2VzIGdldHMgYWN0aXZhdGVkOgpyZWZyZXNoTWF0ZXJpYWw9dHJ1ZTsvLyBzZXQgdG8gdHJ1ZSBvbiBtYXRlcmlhbCBjaGFuZ2UKcmVmcmVzaExpZ2h0cz10cnVlOy8vIHJlbWFpbnMgc2V0IHVudGlsIHVwZGF0ZSBkb25lCn0vLyBsb2FkIG1hdGVyaWFsIHNwZWNpZmljIHVuaWZvcm1zCi8vIChzaGFkZXIgbWF0ZXJpYWwgYWxzbyBnZXRzIHRoZW0gZm9yIHRoZSBzYWtlIG9mIGdlbmVyaWNpdHkpCmlmKG1hdGVyaWFsLmlzU2hhZGVyTWF0ZXJpYWx8fG1hdGVyaWFsLmlzTWVzaFBob25nTWF0ZXJpYWx8fG1hdGVyaWFsLmlzTWVzaFN0YW5kYXJkTWF0ZXJpYWx8fG1hdGVyaWFsLmVudk1hcCl7dmFyIHVDYW1Qb3M9cF91bmlmb3Jtcy5tYXAuY2FtZXJhUG9zaXRpb247aWYodUNhbVBvcyE9PXVuZGVmaW5lZCl7dUNhbVBvcy5zZXRWYWx1ZShfZ2wsX3ZlY3RvcjMuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGNhbWVyYS5tYXRyaXhXb3JsZCkpO319aWYobWF0ZXJpYWwuaXNNZXNoUGhvbmdNYXRlcmlhbHx8bWF0ZXJpYWwuaXNNZXNoTGFtYmVydE1hdGVyaWFsfHxtYXRlcmlhbC5pc01lc2hCYXNpY01hdGVyaWFsfHxtYXRlcmlhbC5pc01lc2hTdGFuZGFyZE1hdGVyaWFsfHxtYXRlcmlhbC5pc1NoYWRlck1hdGVyaWFsfHxtYXRlcmlhbC5za2lubmluZyl7cF91bmlmb3Jtcy5zZXRWYWx1ZShfZ2wsJ3ZpZXdNYXRyaXgnLGNhbWVyYS5tYXRyaXhXb3JsZEludmVyc2UpO319Ly8gc2tpbm5pbmcgdW5pZm9ybXMgbXVzdCBiZSBzZXQgZXZlbiBpZiBtYXRlcmlhbCBkaWRuJ3QgY2hhbmdlCi8vIGF1dG8tc2V0dGluZyBvZiB0ZXh0dXJlIHVuaXQgZm9yIGJvbmUgdGV4dHVyZSBtdXN0IGdvIGJlZm9yZSBvdGhlciB0ZXh0dXJlcwovLyBub3Qgc3VyZSB3aHksIGJ1dCBvdGhlcndpc2Ugd2VpcmQgdGhpbmdzIGhhcHBlbgppZihtYXRlcmlhbC5za2lubmluZyl7cF91bmlmb3Jtcy5zZXRPcHRpb25hbChfZ2wsb2JqZWN0LCdiaW5kTWF0cml4Jyk7cF91bmlmb3Jtcy5zZXRPcHRpb25hbChfZ2wsb2JqZWN0LCdiaW5kTWF0cml4SW52ZXJzZScpO3ZhciBza2VsZXRvbj1vYmplY3Quc2tlbGV0b247aWYoc2tlbGV0b24pe3ZhciBib25lcz1za2VsZXRvbi5ib25lcztpZihjYXBhYmlsaXRpZXMuZmxvYXRWZXJ0ZXhUZXh0dXJlcyl7aWYoc2tlbGV0b24uYm9uZVRleHR1cmU9PT11bmRlZmluZWQpey8vIGxheW91dCAoMSBtYXRyaXggPSA0IHBpeGVscykKLy8gICAgICBSR0JBIFJHQkEgUkdCQSBSR0JBICg9PiBjb2x1bW4xLCBjb2x1bW4yLCBjb2x1bW4zLCBjb2x1bW40KQovLyAgd2l0aCAgOHg4ICBwaXhlbCB0ZXh0dXJlIG1heCAgIDE2IGJvbmVzICogNCBwaXhlbHMgPSAgKDggKiA4KQovLyAgICAgICAxNngxNiBwaXhlbCB0ZXh0dXJlIG1heCAgIDY0IGJvbmVzICogNCBwaXhlbHMgPSAoMTYgKiAxNikKLy8gICAgICAgMzJ4MzIgcGl4ZWwgdGV4dHVyZSBtYXggIDI1NiBib25lcyAqIDQgcGl4ZWxzID0gKDMyICogMzIpCi8vICAgICAgIDY0eDY0IHBpeGVsIHRleHR1cmUgbWF4IDEwMjQgYm9uZXMgKiA0IHBpeGVscyA9ICg2NCAqIDY0KQp2YXIgc2l6ZT1NYXRoLnNxcnQoYm9uZXMubGVuZ3RoKjQpOy8vIDQgcGl4ZWxzIG5lZWRlZCBmb3IgMSBtYXRyaXgKc2l6ZT1fTWF0aC5jZWlsUG93ZXJPZlR3byhzaXplKTtzaXplPU1hdGgubWF4KHNpemUsNCk7dmFyIGJvbmVNYXRyaWNlcz1uZXcgRmxvYXQzMkFycmF5KHNpemUqc2l6ZSo0KTsvLyA0IGZsb2F0cyBwZXIgUkdCQSBwaXhlbApib25lTWF0cmljZXMuc2V0KHNrZWxldG9uLmJvbmVNYXRyaWNlcyk7Ly8gY29weSBjdXJyZW50IHZhbHVlcwp2YXIgYm9uZVRleHR1cmU9bmV3IERhdGFUZXh0dXJlKGJvbmVNYXRyaWNlcyxzaXplLHNpemUsUkdCQUZvcm1hdCxGbG9hdFR5cGUpO3NrZWxldG9uLmJvbmVNYXRyaWNlcz1ib25lTWF0cmljZXM7c2tlbGV0b24uYm9uZVRleHR1cmU9Ym9uZVRleHR1cmU7c2tlbGV0b24uYm9uZVRleHR1cmVTaXplPXNpemU7fXBfdW5pZm9ybXMuc2V0VmFsdWUoX2dsLCdib25lVGV4dHVyZScsc2tlbGV0b24uYm9uZVRleHR1cmUpO3BfdW5pZm9ybXMuc2V0VmFsdWUoX2dsLCdib25lVGV4dHVyZVNpemUnLHNrZWxldG9uLmJvbmVUZXh0dXJlU2l6ZSk7fWVsc2V7cF91bmlmb3Jtcy5zZXRPcHRpb25hbChfZ2wsc2tlbGV0b24sJ2JvbmVNYXRyaWNlcycpO319fWlmKHJlZnJlc2hNYXRlcmlhbCl7cF91bmlmb3Jtcy5zZXRWYWx1ZShfZ2wsJ3RvbmVNYXBwaW5nRXhwb3N1cmUnLF90aGlzLnRvbmVNYXBwaW5nRXhwb3N1cmUpO3BfdW5pZm9ybXMuc2V0VmFsdWUoX2dsLCd0b25lTWFwcGluZ1doaXRlUG9pbnQnLF90aGlzLnRvbmVNYXBwaW5nV2hpdGVQb2ludCk7aWYobWF0ZXJpYWwubGlnaHRzKXsvLyB0aGUgY3VycmVudCBtYXRlcmlhbCByZXF1aXJlcyBsaWdodGluZyBpbmZvCi8vIG5vdGU6IGFsbCBsaWdodGluZyB1bmlmb3JtcyBhcmUgYWx3YXlzIHNldCBjb3JyZWN0bHkKLy8gdGhleSBzaW1wbHkgcmVmZXJlbmNlIHRoZSByZW5kZXJlcidzIHN0YXRlIGZvciB0aGVpcgovLyB2YWx1ZXMKLy8KLy8gdXNlIHRoZSBjdXJyZW50IG1hdGVyaWFsJ3MgLm5lZWRzVXBkYXRlIGZsYWdzIHRvIHNldAovLyB0aGUgR0wgc3RhdGUgd2hlbiByZXF1aXJlZAptYXJrVW5pZm9ybXNMaWdodHNOZWVkc1VwZGF0ZShtX3VuaWZvcm1zLHJlZnJlc2hMaWdodHMpO30vLyByZWZyZXNoIHVuaWZvcm1zIGNvbW1vbiB0byBzZXZlcmFsIG1hdGVyaWFscwppZihmb2cmJm1hdGVyaWFsLmZvZyl7cmVmcmVzaFVuaWZvcm1zRm9nKG1fdW5pZm9ybXMsZm9nKTt9aWYobWF0ZXJpYWwuaXNNZXNoQmFzaWNNYXRlcmlhbCl7cmVmcmVzaFVuaWZvcm1zQ29tbW9uKG1fdW5pZm9ybXMsbWF0ZXJpYWwpO31lbHNlIGlmKG1hdGVyaWFsLmlzTWVzaExhbWJlcnRNYXRlcmlhbCl7cmVmcmVzaFVuaWZvcm1zQ29tbW9uKG1fdW5pZm9ybXMsbWF0ZXJpYWwpO3JlZnJlc2hVbmlmb3Jtc0xhbWJlcnQobV91bmlmb3JtcyxtYXRlcmlhbCk7fWVsc2UgaWYobWF0ZXJpYWwuaXNNZXNoUGhvbmdNYXRlcmlhbCl7cmVmcmVzaFVuaWZvcm1zQ29tbW9uKG1fdW5pZm9ybXMsbWF0ZXJpYWwpO2lmKG1hdGVyaWFsLmlzTWVzaFRvb25NYXRlcmlhbCl7cmVmcmVzaFVuaWZvcm1zVG9vbihtX3VuaWZvcm1zLG1hdGVyaWFsKTt9ZWxzZXtyZWZyZXNoVW5pZm9ybXNQaG9uZyhtX3VuaWZvcm1zLG1hdGVyaWFsKTt9fWVsc2UgaWYobWF0ZXJpYWwuaXNNZXNoU3RhbmRhcmRNYXRlcmlhbCl7cmVmcmVzaFVuaWZvcm1zQ29tbW9uKG1fdW5pZm9ybXMsbWF0ZXJpYWwpO2lmKG1hdGVyaWFsLmlzTWVzaFBoeXNpY2FsTWF0ZXJpYWwpe3JlZnJlc2hVbmlmb3Jtc1BoeXNpY2FsKG1fdW5pZm9ybXMsbWF0ZXJpYWwpO31lbHNle3JlZnJlc2hVbmlmb3Jtc1N0YW5kYXJkKG1fdW5pZm9ybXMsbWF0ZXJpYWwpO319ZWxzZSBpZihtYXRlcmlhbC5pc01lc2hEZXB0aE1hdGVyaWFsKXtyZWZyZXNoVW5pZm9ybXNDb21tb24obV91bmlmb3JtcyxtYXRlcmlhbCk7cmVmcmVzaFVuaWZvcm1zRGVwdGgobV91bmlmb3JtcyxtYXRlcmlhbCk7fWVsc2UgaWYobWF0ZXJpYWwuaXNNZXNoRGlzdGFuY2VNYXRlcmlhbCl7cmVmcmVzaFVuaWZvcm1zQ29tbW9uKG1fdW5pZm9ybXMsbWF0ZXJpYWwpO3JlZnJlc2hVbmlmb3Jtc0Rpc3RhbmNlKG1fdW5pZm9ybXMsbWF0ZXJpYWwpO31lbHNlIGlmKG1hdGVyaWFsLmlzTWVzaE5vcm1hbE1hdGVyaWFsKXtyZWZyZXNoVW5pZm9ybXNDb21tb24obV91bmlmb3JtcyxtYXRlcmlhbCk7cmVmcmVzaFVuaWZvcm1zTm9ybWFsKG1fdW5pZm9ybXMsbWF0ZXJpYWwpO31lbHNlIGlmKG1hdGVyaWFsLmlzTGluZUJhc2ljTWF0ZXJpYWwpe3JlZnJlc2hVbmlmb3Jtc0xpbmUobV91bmlmb3JtcyxtYXRlcmlhbCk7aWYobWF0ZXJpYWwuaXNMaW5lRGFzaGVkTWF0ZXJpYWwpe3JlZnJlc2hVbmlmb3Jtc0Rhc2gobV91bmlmb3JtcyxtYXRlcmlhbCk7fX1lbHNlIGlmKG1hdGVyaWFsLmlzUG9pbnRzTWF0ZXJpYWwpe3JlZnJlc2hVbmlmb3Jtc1BvaW50cyhtX3VuaWZvcm1zLG1hdGVyaWFsKTt9ZWxzZSBpZihtYXRlcmlhbC5pc1NoYWRvd01hdGVyaWFsKXttX3VuaWZvcm1zLmNvbG9yLnZhbHVlPW1hdGVyaWFsLmNvbG9yO21fdW5pZm9ybXMub3BhY2l0eS52YWx1ZT1tYXRlcmlhbC5vcGFjaXR5O30vLyBSZWN0QXJlYUxpZ2h0IFRleHR1cmUKLy8gVE9ETyAobXJkb29iKTogRmluZCBhIG5pY2VyIGltcGxlbWVudGF0aW9uCmlmKG1fdW5pZm9ybXMubHRjTWF0IT09dW5kZWZpbmVkKW1fdW5pZm9ybXMubHRjTWF0LnZhbHVlPVVuaWZvcm1zTGliLkxUQ19NQVRfVEVYVFVSRTtpZihtX3VuaWZvcm1zLmx0Y01hZyE9PXVuZGVmaW5lZCltX3VuaWZvcm1zLmx0Y01hZy52YWx1ZT1Vbmlmb3Jtc0xpYi5MVENfTUFHX1RFWFRVUkU7V2ViR0xVbmlmb3Jtcy51cGxvYWQoX2dsLG1hdGVyaWFsUHJvcGVydGllcy51bmlmb3Jtc0xpc3QsbV91bmlmb3JtcyxfdGhpcyk7fS8vIGNvbW1vbiBtYXRyaWNlcwpwX3VuaWZvcm1zLnNldFZhbHVlKF9nbCwnbW9kZWxWaWV3TWF0cml4JyxvYmplY3QubW9kZWxWaWV3TWF0cml4KTtwX3VuaWZvcm1zLnNldFZhbHVlKF9nbCwnbm9ybWFsTWF0cml4JyxvYmplY3Qubm9ybWFsTWF0cml4KTtwX3VuaWZvcm1zLnNldFZhbHVlKF9nbCwnbW9kZWxNYXRyaXgnLG9iamVjdC5tYXRyaXhXb3JsZCk7cmV0dXJuIHByb2dyYW07fS8vIFVuaWZvcm1zIChyZWZyZXNoIHVuaWZvcm1zIG9iamVjdHMpCmZ1bmN0aW9uIHJlZnJlc2hVbmlmb3Jtc0NvbW1vbih1bmlmb3JtcyxtYXRlcmlhbCl7dW5pZm9ybXMub3BhY2l0eS52YWx1ZT1tYXRlcmlhbC5vcGFjaXR5O2lmKG1hdGVyaWFsLmNvbG9yKXt1bmlmb3Jtcy5kaWZmdXNlLnZhbHVlPW1hdGVyaWFsLmNvbG9yO31pZihtYXRlcmlhbC5lbWlzc2l2ZSl7dW5pZm9ybXMuZW1pc3NpdmUudmFsdWUuY29weShtYXRlcmlhbC5lbWlzc2l2ZSkubXVsdGlwbHlTY2FsYXIobWF0ZXJpYWwuZW1pc3NpdmVJbnRlbnNpdHkpO31pZihtYXRlcmlhbC5tYXApe3VuaWZvcm1zLm1hcC52YWx1ZT1tYXRlcmlhbC5tYXA7fWlmKG1hdGVyaWFsLmFscGhhTWFwKXt1bmlmb3Jtcy5hbHBoYU1hcC52YWx1ZT1tYXRlcmlhbC5hbHBoYU1hcDt9aWYobWF0ZXJpYWwuc3BlY3VsYXJNYXApe3VuaWZvcm1zLnNwZWN1bGFyTWFwLnZhbHVlPW1hdGVyaWFsLnNwZWN1bGFyTWFwO31pZihtYXRlcmlhbC5lbnZNYXApe3VuaWZvcm1zLmVudk1hcC52YWx1ZT1tYXRlcmlhbC5lbnZNYXA7Ly8gZG9uJ3QgZmxpcCBDdWJlVGV4dHVyZSBlbnZNYXBzLCBmbGlwIGV2ZXJ5dGhpbmcgZWxzZToKLy8gIFdlYkdMUmVuZGVyVGFyZ2V0Q3ViZSB3aWxsIGJlIGZsaXBwZWQgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5Ci8vICBXZWJHTFJlbmRlclRhcmdldEN1YmUudGV4dHVyZSB3aWxsIGJlIGZsaXBwZWQgYmVjYXVzZSBpdCdzIGEgVGV4dHVyZSBhbmQgTk9UIGEgQ3ViZVRleHR1cmUKLy8gdGhpcyBjaGVjayBtdXN0IGJlIGhhbmRsZWQgZGlmZmVyZW50bHksIG9yIHJlbW92ZWQgZW50aXJlbHksIGlmIFdlYkdMUmVuZGVyVGFyZ2V0Q3ViZSB1c2VzIGEgQ3ViZVRleHR1cmUgaW4gdGhlIGZ1dHVyZQp1bmlmb3Jtcy5mbGlwRW52TWFwLnZhbHVlPSEobWF0ZXJpYWwuZW52TWFwJiZtYXRlcmlhbC5lbnZNYXAuaXNDdWJlVGV4dHVyZSk/MTotMTt1bmlmb3Jtcy5yZWZsZWN0aXZpdHkudmFsdWU9bWF0ZXJpYWwucmVmbGVjdGl2aXR5O3VuaWZvcm1zLnJlZnJhY3Rpb25SYXRpby52YWx1ZT1tYXRlcmlhbC5yZWZyYWN0aW9uUmF0aW87fWlmKG1hdGVyaWFsLmxpZ2h0TWFwKXt1bmlmb3Jtcy5saWdodE1hcC52YWx1ZT1tYXRlcmlhbC5saWdodE1hcDt1bmlmb3Jtcy5saWdodE1hcEludGVuc2l0eS52YWx1ZT1tYXRlcmlhbC5saWdodE1hcEludGVuc2l0eTt9aWYobWF0ZXJpYWwuYW9NYXApe3VuaWZvcm1zLmFvTWFwLnZhbHVlPW1hdGVyaWFsLmFvTWFwO3VuaWZvcm1zLmFvTWFwSW50ZW5zaXR5LnZhbHVlPW1hdGVyaWFsLmFvTWFwSW50ZW5zaXR5O30vLyB1diByZXBlYXQgYW5kIG9mZnNldCBzZXR0aW5nIHByaW9yaXRpZXMKLy8gMS4gY29sb3IgbWFwCi8vIDIuIHNwZWN1bGFyIG1hcAovLyAzLiBub3JtYWwgbWFwCi8vIDQuIGJ1bXAgbWFwCi8vIDUuIGFscGhhIG1hcAovLyA2LiBlbWlzc2l2ZSBtYXAKdmFyIHV2U2NhbGVNYXA7aWYobWF0ZXJpYWwubWFwKXt1dlNjYWxlTWFwPW1hdGVyaWFsLm1hcDt9ZWxzZSBpZihtYXRlcmlhbC5zcGVjdWxhck1hcCl7dXZTY2FsZU1hcD1tYXRlcmlhbC5zcGVjdWxhck1hcDt9ZWxzZSBpZihtYXRlcmlhbC5kaXNwbGFjZW1lbnRNYXApe3V2U2NhbGVNYXA9bWF0ZXJpYWwuZGlzcGxhY2VtZW50TWFwO31lbHNlIGlmKG1hdGVyaWFsLm5vcm1hbE1hcCl7dXZTY2FsZU1hcD1tYXRlcmlhbC5ub3JtYWxNYXA7fWVsc2UgaWYobWF0ZXJpYWwuYnVtcE1hcCl7dXZTY2FsZU1hcD1tYXRlcmlhbC5idW1wTWFwO31lbHNlIGlmKG1hdGVyaWFsLnJvdWdobmVzc01hcCl7dXZTY2FsZU1hcD1tYXRlcmlhbC5yb3VnaG5lc3NNYXA7fWVsc2UgaWYobWF0ZXJpYWwubWV0YWxuZXNzTWFwKXt1dlNjYWxlTWFwPW1hdGVyaWFsLm1ldGFsbmVzc01hcDt9ZWxzZSBpZihtYXRlcmlhbC5hbHBoYU1hcCl7dXZTY2FsZU1hcD1tYXRlcmlhbC5hbHBoYU1hcDt9ZWxzZSBpZihtYXRlcmlhbC5lbWlzc2l2ZU1hcCl7dXZTY2FsZU1hcD1tYXRlcmlhbC5lbWlzc2l2ZU1hcDt9aWYodXZTY2FsZU1hcCE9PXVuZGVmaW5lZCl7Ly8gYmFja3dhcmRzIGNvbXBhdGliaWxpdHkKaWYodXZTY2FsZU1hcC5pc1dlYkdMUmVuZGVyVGFyZ2V0KXt1dlNjYWxlTWFwPXV2U2NhbGVNYXAudGV4dHVyZTt9aWYodXZTY2FsZU1hcC5tYXRyaXhBdXRvVXBkYXRlPT09dHJ1ZSl7dmFyIG9mZnNldD11dlNjYWxlTWFwLm9mZnNldDt2YXIgcmVwZWF0PXV2U2NhbGVNYXAucmVwZWF0O3ZhciByb3RhdGlvbj11dlNjYWxlTWFwLnJvdGF0aW9uO3ZhciBjZW50ZXI9dXZTY2FsZU1hcC5jZW50ZXI7dXZTY2FsZU1hcC5tYXRyaXguc2V0VXZUcmFuc2Zvcm0ob2Zmc2V0Lngsb2Zmc2V0LnkscmVwZWF0LngscmVwZWF0Lnkscm90YXRpb24sY2VudGVyLngsY2VudGVyLnkpO311bmlmb3Jtcy51dlRyYW5zZm9ybS52YWx1ZS5jb3B5KHV2U2NhbGVNYXAubWF0cml4KTt9fWZ1bmN0aW9uIHJlZnJlc2hVbmlmb3Jtc0xpbmUodW5pZm9ybXMsbWF0ZXJpYWwpe3VuaWZvcm1zLmRpZmZ1c2UudmFsdWU9bWF0ZXJpYWwuY29sb3I7dW5pZm9ybXMub3BhY2l0eS52YWx1ZT1tYXRlcmlhbC5vcGFjaXR5O31mdW5jdGlvbiByZWZyZXNoVW5pZm9ybXNEYXNoKHVuaWZvcm1zLG1hdGVyaWFsKXt1bmlmb3Jtcy5kYXNoU2l6ZS52YWx1ZT1tYXRlcmlhbC5kYXNoU2l6ZTt1bmlmb3Jtcy50b3RhbFNpemUudmFsdWU9bWF0ZXJpYWwuZGFzaFNpemUrbWF0ZXJpYWwuZ2FwU2l6ZTt1bmlmb3Jtcy5zY2FsZS52YWx1ZT1tYXRlcmlhbC5zY2FsZTt9ZnVuY3Rpb24gcmVmcmVzaFVuaWZvcm1zUG9pbnRzKHVuaWZvcm1zLG1hdGVyaWFsKXt1bmlmb3Jtcy5kaWZmdXNlLnZhbHVlPW1hdGVyaWFsLmNvbG9yO3VuaWZvcm1zLm9wYWNpdHkudmFsdWU9bWF0ZXJpYWwub3BhY2l0eTt1bmlmb3Jtcy5zaXplLnZhbHVlPW1hdGVyaWFsLnNpemUqX3BpeGVsUmF0aW87dW5pZm9ybXMuc2NhbGUudmFsdWU9X2hlaWdodCowLjU7dW5pZm9ybXMubWFwLnZhbHVlPW1hdGVyaWFsLm1hcDtpZihtYXRlcmlhbC5tYXAhPT1udWxsKXtpZihtYXRlcmlhbC5tYXAubWF0cml4QXV0b1VwZGF0ZT09PXRydWUpe3ZhciBvZmZzZXQ9bWF0ZXJpYWwubWFwLm9mZnNldDt2YXIgcmVwZWF0PW1hdGVyaWFsLm1hcC5yZXBlYXQ7dmFyIHJvdGF0aW9uPW1hdGVyaWFsLm1hcC5yb3RhdGlvbjt2YXIgY2VudGVyPW1hdGVyaWFsLm1hcC5jZW50ZXI7bWF0ZXJpYWwubWFwLm1hdHJpeC5zZXRVdlRyYW5zZm9ybShvZmZzZXQueCxvZmZzZXQueSxyZXBlYXQueCxyZXBlYXQueSxyb3RhdGlvbixjZW50ZXIueCxjZW50ZXIueSk7fXVuaWZvcm1zLnV2VHJhbnNmb3JtLnZhbHVlLmNvcHkobWF0ZXJpYWwubWFwLm1hdHJpeCk7fX1mdW5jdGlvbiByZWZyZXNoVW5pZm9ybXNGb2codW5pZm9ybXMsZm9nKXt1bmlmb3Jtcy5mb2dDb2xvci52YWx1ZT1mb2cuY29sb3I7aWYoZm9nLmlzRm9nKXt1bmlmb3Jtcy5mb2dOZWFyLnZhbHVlPWZvZy5uZWFyO3VuaWZvcm1zLmZvZ0Zhci52YWx1ZT1mb2cuZmFyO31lbHNlIGlmKGZvZy5pc0ZvZ0V4cDIpe3VuaWZvcm1zLmZvZ0RlbnNpdHkudmFsdWU9Zm9nLmRlbnNpdHk7fX1mdW5jdGlvbiByZWZyZXNoVW5pZm9ybXNMYW1iZXJ0KHVuaWZvcm1zLG1hdGVyaWFsKXtpZihtYXRlcmlhbC5lbWlzc2l2ZU1hcCl7dW5pZm9ybXMuZW1pc3NpdmVNYXAudmFsdWU9bWF0ZXJpYWwuZW1pc3NpdmVNYXA7fX1mdW5jdGlvbiByZWZyZXNoVW5pZm9ybXNQaG9uZyh1bmlmb3JtcyxtYXRlcmlhbCl7dW5pZm9ybXMuc3BlY3VsYXIudmFsdWU9bWF0ZXJpYWwuc3BlY3VsYXI7dW5pZm9ybXMuc2hpbmluZXNzLnZhbHVlPU1hdGgubWF4KG1hdGVyaWFsLnNoaW5pbmVzcywxZS00KTsvLyB0byBwcmV2ZW50IHBvdyggMC4wLCAwLjAgKQppZihtYXRlcmlhbC5lbWlzc2l2ZU1hcCl7dW5pZm9ybXMuZW1pc3NpdmVNYXAudmFsdWU9bWF0ZXJpYWwuZW1pc3NpdmVNYXA7fWlmKG1hdGVyaWFsLmJ1bXBNYXApe3VuaWZvcm1zLmJ1bXBNYXAudmFsdWU9bWF0ZXJpYWwuYnVtcE1hcDt1bmlmb3Jtcy5idW1wU2NhbGUudmFsdWU9bWF0ZXJpYWwuYnVtcFNjYWxlO31pZihtYXRlcmlhbC5ub3JtYWxNYXApe3VuaWZvcm1zLm5vcm1hbE1hcC52YWx1ZT1tYXRlcmlhbC5ub3JtYWxNYXA7dW5pZm9ybXMubm9ybWFsU2NhbGUudmFsdWUuY29weShtYXRlcmlhbC5ub3JtYWxTY2FsZSk7fWlmKG1hdGVyaWFsLmRpc3BsYWNlbWVudE1hcCl7dW5pZm9ybXMuZGlzcGxhY2VtZW50TWFwLnZhbHVlPW1hdGVyaWFsLmRpc3BsYWNlbWVudE1hcDt1bmlmb3Jtcy5kaXNwbGFjZW1lbnRTY2FsZS52YWx1ZT1tYXRlcmlhbC5kaXNwbGFjZW1lbnRTY2FsZTt1bmlmb3Jtcy5kaXNwbGFjZW1lbnRCaWFzLnZhbHVlPW1hdGVyaWFsLmRpc3BsYWNlbWVudEJpYXM7fX1mdW5jdGlvbiByZWZyZXNoVW5pZm9ybXNUb29uKHVuaWZvcm1zLG1hdGVyaWFsKXtyZWZyZXNoVW5pZm9ybXNQaG9uZyh1bmlmb3JtcyxtYXRlcmlhbCk7aWYobWF0ZXJpYWwuZ3JhZGllbnRNYXApe3VuaWZvcm1zLmdyYWRpZW50TWFwLnZhbHVlPW1hdGVyaWFsLmdyYWRpZW50TWFwO319ZnVuY3Rpb24gcmVmcmVzaFVuaWZvcm1zU3RhbmRhcmQodW5pZm9ybXMsbWF0ZXJpYWwpe3VuaWZvcm1zLnJvdWdobmVzcy52YWx1ZT1tYXRlcmlhbC5yb3VnaG5lc3M7dW5pZm9ybXMubWV0YWxuZXNzLnZhbHVlPW1hdGVyaWFsLm1ldGFsbmVzcztpZihtYXRlcmlhbC5yb3VnaG5lc3NNYXApe3VuaWZvcm1zLnJvdWdobmVzc01hcC52YWx1ZT1tYXRlcmlhbC5yb3VnaG5lc3NNYXA7fWlmKG1hdGVyaWFsLm1ldGFsbmVzc01hcCl7dW5pZm9ybXMubWV0YWxuZXNzTWFwLnZhbHVlPW1hdGVyaWFsLm1ldGFsbmVzc01hcDt9aWYobWF0ZXJpYWwuZW1pc3NpdmVNYXApe3VuaWZvcm1zLmVtaXNzaXZlTWFwLnZhbHVlPW1hdGVyaWFsLmVtaXNzaXZlTWFwO31pZihtYXRlcmlhbC5idW1wTWFwKXt1bmlmb3Jtcy5idW1wTWFwLnZhbHVlPW1hdGVyaWFsLmJ1bXBNYXA7dW5pZm9ybXMuYnVtcFNjYWxlLnZhbHVlPW1hdGVyaWFsLmJ1bXBTY2FsZTt9aWYobWF0ZXJpYWwubm9ybWFsTWFwKXt1bmlmb3Jtcy5ub3JtYWxNYXAudmFsdWU9bWF0ZXJpYWwubm9ybWFsTWFwO3VuaWZvcm1zLm5vcm1hbFNjYWxlLnZhbHVlLmNvcHkobWF0ZXJpYWwubm9ybWFsU2NhbGUpO31pZihtYXRlcmlhbC5kaXNwbGFjZW1lbnRNYXApe3VuaWZvcm1zLmRpc3BsYWNlbWVudE1hcC52YWx1ZT1tYXRlcmlhbC5kaXNwbGFjZW1lbnRNYXA7dW5pZm9ybXMuZGlzcGxhY2VtZW50U2NhbGUudmFsdWU9bWF0ZXJpYWwuZGlzcGxhY2VtZW50U2NhbGU7dW5pZm9ybXMuZGlzcGxhY2VtZW50Qmlhcy52YWx1ZT1tYXRlcmlhbC5kaXNwbGFjZW1lbnRCaWFzO31pZihtYXRlcmlhbC5lbnZNYXApey8vdW5pZm9ybXMuZW52TWFwLnZhbHVlID0gbWF0ZXJpYWwuZW52TWFwOyAvLyBwYXJ0IG9mIHVuaWZvcm1zIGNvbW1vbgp1bmlmb3Jtcy5lbnZNYXBJbnRlbnNpdHkudmFsdWU9bWF0ZXJpYWwuZW52TWFwSW50ZW5zaXR5O319ZnVuY3Rpb24gcmVmcmVzaFVuaWZvcm1zUGh5c2ljYWwodW5pZm9ybXMsbWF0ZXJpYWwpe3VuaWZvcm1zLmNsZWFyQ29hdC52YWx1ZT1tYXRlcmlhbC5jbGVhckNvYXQ7dW5pZm9ybXMuY2xlYXJDb2F0Um91Z2huZXNzLnZhbHVlPW1hdGVyaWFsLmNsZWFyQ29hdFJvdWdobmVzcztyZWZyZXNoVW5pZm9ybXNTdGFuZGFyZCh1bmlmb3JtcyxtYXRlcmlhbCk7fWZ1bmN0aW9uIHJlZnJlc2hVbmlmb3Jtc0RlcHRoKHVuaWZvcm1zLG1hdGVyaWFsKXtpZihtYXRlcmlhbC5kaXNwbGFjZW1lbnRNYXApe3VuaWZvcm1zLmRpc3BsYWNlbWVudE1hcC52YWx1ZT1tYXRlcmlhbC5kaXNwbGFjZW1lbnRNYXA7dW5pZm9ybXMuZGlzcGxhY2VtZW50U2NhbGUudmFsdWU9bWF0ZXJpYWwuZGlzcGxhY2VtZW50U2NhbGU7dW5pZm9ybXMuZGlzcGxhY2VtZW50Qmlhcy52YWx1ZT1tYXRlcmlhbC5kaXNwbGFjZW1lbnRCaWFzO319ZnVuY3Rpb24gcmVmcmVzaFVuaWZvcm1zRGlzdGFuY2UodW5pZm9ybXMsbWF0ZXJpYWwpe2lmKG1hdGVyaWFsLmRpc3BsYWNlbWVudE1hcCl7dW5pZm9ybXMuZGlzcGxhY2VtZW50TWFwLnZhbHVlPW1hdGVyaWFsLmRpc3BsYWNlbWVudE1hcDt1bmlmb3Jtcy5kaXNwbGFjZW1lbnRTY2FsZS52YWx1ZT1tYXRlcmlhbC5kaXNwbGFjZW1lbnRTY2FsZTt1bmlmb3Jtcy5kaXNwbGFjZW1lbnRCaWFzLnZhbHVlPW1hdGVyaWFsLmRpc3BsYWNlbWVudEJpYXM7fXVuaWZvcm1zLnJlZmVyZW5jZVBvc2l0aW9uLnZhbHVlLmNvcHkobWF0ZXJpYWwucmVmZXJlbmNlUG9zaXRpb24pO3VuaWZvcm1zLm5lYXJEaXN0YW5jZS52YWx1ZT1tYXRlcmlhbC5uZWFyRGlzdGFuY2U7dW5pZm9ybXMuZmFyRGlzdGFuY2UudmFsdWU9bWF0ZXJpYWwuZmFyRGlzdGFuY2U7fWZ1bmN0aW9uIHJlZnJlc2hVbmlmb3Jtc05vcm1hbCh1bmlmb3JtcyxtYXRlcmlhbCl7aWYobWF0ZXJpYWwuYnVtcE1hcCl7dW5pZm9ybXMuYnVtcE1hcC52YWx1ZT1tYXRlcmlhbC5idW1wTWFwO3VuaWZvcm1zLmJ1bXBTY2FsZS52YWx1ZT1tYXRlcmlhbC5idW1wU2NhbGU7fWlmKG1hdGVyaWFsLm5vcm1hbE1hcCl7dW5pZm9ybXMubm9ybWFsTWFwLnZhbHVlPW1hdGVyaWFsLm5vcm1hbE1hcDt1bmlmb3Jtcy5ub3JtYWxTY2FsZS52YWx1ZS5jb3B5KG1hdGVyaWFsLm5vcm1hbFNjYWxlKTt9aWYobWF0ZXJpYWwuZGlzcGxhY2VtZW50TWFwKXt1bmlmb3Jtcy5kaXNwbGFjZW1lbnRNYXAudmFsdWU9bWF0ZXJpYWwuZGlzcGxhY2VtZW50TWFwO3VuaWZvcm1zLmRpc3BsYWNlbWVudFNjYWxlLnZhbHVlPW1hdGVyaWFsLmRpc3BsYWNlbWVudFNjYWxlO3VuaWZvcm1zLmRpc3BsYWNlbWVudEJpYXMudmFsdWU9bWF0ZXJpYWwuZGlzcGxhY2VtZW50Qmlhczt9fS8vIElmIHVuaWZvcm1zIGFyZSBtYXJrZWQgYXMgY2xlYW4sIHRoZXkgZG9uJ3QgbmVlZCB0byBiZSBsb2FkZWQgdG8gdGhlIEdQVS4KZnVuY3Rpb24gbWFya1VuaWZvcm1zTGlnaHRzTmVlZHNVcGRhdGUodW5pZm9ybXMsdmFsdWUpe3VuaWZvcm1zLmFtYmllbnRMaWdodENvbG9yLm5lZWRzVXBkYXRlPXZhbHVlO3VuaWZvcm1zLmRpcmVjdGlvbmFsTGlnaHRzLm5lZWRzVXBkYXRlPXZhbHVlO3VuaWZvcm1zLnBvaW50TGlnaHRzLm5lZWRzVXBkYXRlPXZhbHVlO3VuaWZvcm1zLnNwb3RMaWdodHMubmVlZHNVcGRhdGU9dmFsdWU7dW5pZm9ybXMucmVjdEFyZWFMaWdodHMubmVlZHNVcGRhdGU9dmFsdWU7dW5pZm9ybXMuaGVtaXNwaGVyZUxpZ2h0cy5uZWVkc1VwZGF0ZT12YWx1ZTt9Ly8gR0wgc3RhdGUgc2V0dGluZwp0aGlzLnNldEZhY2VDdWxsaW5nPWZ1bmN0aW9uKGN1bGxGYWNlLGZyb250RmFjZURpcmVjdGlvbil7c3RhdGUuc2V0Q3VsbEZhY2UoY3VsbEZhY2UpO3N0YXRlLnNldEZsaXBTaWRlZChmcm9udEZhY2VEaXJlY3Rpb249PT1Gcm9udEZhY2VEaXJlY3Rpb25DVyk7fTsvLyBUZXh0dXJlcwpmdW5jdGlvbiBhbGxvY1RleHR1cmVVbml0KCl7dmFyIHRleHR1cmVVbml0PV91c2VkVGV4dHVyZVVuaXRzO2lmKHRleHR1cmVVbml0Pj1jYXBhYmlsaXRpZXMubWF4VGV4dHVyZXMpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJlcjogVHJ5aW5nIHRvIHVzZSAnK3RleHR1cmVVbml0KycgdGV4dHVyZSB1bml0cyB3aGlsZSB0aGlzIEdQVSBzdXBwb3J0cyBvbmx5ICcrY2FwYWJpbGl0aWVzLm1heFRleHR1cmVzKTt9X3VzZWRUZXh0dXJlVW5pdHMrPTE7cmV0dXJuIHRleHR1cmVVbml0O310aGlzLmFsbG9jVGV4dHVyZVVuaXQ9YWxsb2NUZXh0dXJlVW5pdDsvLyB0aGlzLnNldFRleHR1cmUyRCA9IHNldFRleHR1cmUyRDsKdGhpcy5zZXRUZXh0dXJlMkQ9ZnVuY3Rpb24oKXt2YXIgd2FybmVkPWZhbHNlOy8vIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5OiBwZWVsIHRleHR1cmUudGV4dHVyZQpyZXR1cm4gZnVuY3Rpb24gc2V0VGV4dHVyZTJEKHRleHR1cmUsc2xvdCl7aWYodGV4dHVyZSYmdGV4dHVyZS5pc1dlYkdMUmVuZGVyVGFyZ2V0KXtpZighd2FybmVkKXtjb25zb2xlLndhcm4oIlRIUkVFLldlYkdMUmVuZGVyZXIuc2V0VGV4dHVyZTJEOiBkb24ndCB1c2UgcmVuZGVyIHRhcmdldHMgYXMgdGV4dHVyZXMuIFVzZSB0aGVpciAudGV4dHVyZSBwcm9wZXJ0eSBpbnN0ZWFkLiIpO3dhcm5lZD10cnVlO310ZXh0dXJlPXRleHR1cmUudGV4dHVyZTt9dGV4dHVyZXMuc2V0VGV4dHVyZTJEKHRleHR1cmUsc2xvdCk7fTt9KCk7dGhpcy5zZXRUZXh0dXJlPWZ1bmN0aW9uKCl7dmFyIHdhcm5lZD1mYWxzZTtyZXR1cm4gZnVuY3Rpb24gc2V0VGV4dHVyZSh0ZXh0dXJlLHNsb3Qpe2lmKCF3YXJuZWQpe2NvbnNvbGUud2FybigiVEhSRUUuV2ViR0xSZW5kZXJlcjogLnNldFRleHR1cmUgaXMgZGVwcmVjYXRlZCwgdXNlIHNldFRleHR1cmUyRCBpbnN0ZWFkLiIpO3dhcm5lZD10cnVlO310ZXh0dXJlcy5zZXRUZXh0dXJlMkQodGV4dHVyZSxzbG90KTt9O30oKTt0aGlzLnNldFRleHR1cmVDdWJlPWZ1bmN0aW9uKCl7dmFyIHdhcm5lZD1mYWxzZTtyZXR1cm4gZnVuY3Rpb24gc2V0VGV4dHVyZUN1YmUodGV4dHVyZSxzbG90KXsvLyBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eTogcGVlbCB0ZXh0dXJlLnRleHR1cmUKaWYodGV4dHVyZSYmdGV4dHVyZS5pc1dlYkdMUmVuZGVyVGFyZ2V0Q3ViZSl7aWYoIXdhcm5lZCl7Y29uc29sZS53YXJuKCJUSFJFRS5XZWJHTFJlbmRlcmVyLnNldFRleHR1cmVDdWJlOiBkb24ndCB1c2UgY3ViZSByZW5kZXIgdGFyZ2V0cyBhcyB0ZXh0dXJlcy4gVXNlIHRoZWlyIC50ZXh0dXJlIHByb3BlcnR5IGluc3RlYWQuIik7d2FybmVkPXRydWU7fXRleHR1cmU9dGV4dHVyZS50ZXh0dXJlO30vLyBjdXJyZW50bHkgcmVseWluZyBvbiB0aGUgZmFjdCB0aGF0IFdlYkdMUmVuZGVyVGFyZ2V0Q3ViZS50ZXh0dXJlIGlzIGEgVGV4dHVyZSBhbmQgTk9UIGEgQ3ViZVRleHR1cmUKLy8gVE9ETzogdW5pZnkgdGhlc2UgY29kZSBwYXRocwppZih0ZXh0dXJlJiZ0ZXh0dXJlLmlzQ3ViZVRleHR1cmV8fEFycmF5LmlzQXJyYXkodGV4dHVyZS5pbWFnZSkmJnRleHR1cmUuaW1hZ2UubGVuZ3RoPT09Nil7Ly8gQ29tcHJlc3NlZFRleHR1cmUgY2FuIGhhdmUgQXJyYXkgaW4gaW1hZ2UgOi8KLy8gdGhpcyBmdW5jdGlvbiBhbG9uZSBzaG91bGQgdGFrZSBjYXJlIG9mIGN1YmUgdGV4dHVyZXMKdGV4dHVyZXMuc2V0VGV4dHVyZUN1YmUodGV4dHVyZSxzbG90KTt9ZWxzZXsvLyBhc3N1bWVkOiB0ZXh0dXJlIHByb3BlcnR5IG9mIFRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0Q3ViZQp0ZXh0dXJlcy5zZXRUZXh0dXJlQ3ViZUR5bmFtaWModGV4dHVyZSxzbG90KTt9fTt9KCk7dGhpcy5nZXRSZW5kZXJUYXJnZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gX2N1cnJlbnRSZW5kZXJUYXJnZXQ7fTt0aGlzLnNldFJlbmRlclRhcmdldD1mdW5jdGlvbihyZW5kZXJUYXJnZXQpe19jdXJyZW50UmVuZGVyVGFyZ2V0PXJlbmRlclRhcmdldDtpZihyZW5kZXJUYXJnZXQmJnByb3BlcnRpZXMuZ2V0KHJlbmRlclRhcmdldCkuX193ZWJnbEZyYW1lYnVmZmVyPT09dW5kZWZpbmVkKXt0ZXh0dXJlcy5zZXR1cFJlbmRlclRhcmdldChyZW5kZXJUYXJnZXQpO312YXIgZnJhbWVidWZmZXI9bnVsbDt2YXIgaXNDdWJlPWZhbHNlO2lmKHJlbmRlclRhcmdldCl7dmFyIF9fd2ViZ2xGcmFtZWJ1ZmZlcj1wcm9wZXJ0aWVzLmdldChyZW5kZXJUYXJnZXQpLl9fd2ViZ2xGcmFtZWJ1ZmZlcjtpZihyZW5kZXJUYXJnZXQuaXNXZWJHTFJlbmRlclRhcmdldEN1YmUpe2ZyYW1lYnVmZmVyPV9fd2ViZ2xGcmFtZWJ1ZmZlcltyZW5kZXJUYXJnZXQuYWN0aXZlQ3ViZUZhY2VdO2lzQ3ViZT10cnVlO31lbHNle2ZyYW1lYnVmZmVyPV9fd2ViZ2xGcmFtZWJ1ZmZlcjt9X2N1cnJlbnRWaWV3cG9ydC5jb3B5KHJlbmRlclRhcmdldC52aWV3cG9ydCk7X2N1cnJlbnRTY2lzc29yLmNvcHkocmVuZGVyVGFyZ2V0LnNjaXNzb3IpO19jdXJyZW50U2Npc3NvclRlc3Q9cmVuZGVyVGFyZ2V0LnNjaXNzb3JUZXN0O31lbHNle19jdXJyZW50Vmlld3BvcnQuY29weShfdmlld3BvcnQpLm11bHRpcGx5U2NhbGFyKF9waXhlbFJhdGlvKTtfY3VycmVudFNjaXNzb3IuY29weShfc2Npc3NvcikubXVsdGlwbHlTY2FsYXIoX3BpeGVsUmF0aW8pO19jdXJyZW50U2Npc3NvclRlc3Q9X3NjaXNzb3JUZXN0O31pZihfY3VycmVudEZyYW1lYnVmZmVyIT09ZnJhbWVidWZmZXIpe19nbC5iaW5kRnJhbWVidWZmZXIoX2dsLkZSQU1FQlVGRkVSLGZyYW1lYnVmZmVyKTtfY3VycmVudEZyYW1lYnVmZmVyPWZyYW1lYnVmZmVyO31zdGF0ZS52aWV3cG9ydChfY3VycmVudFZpZXdwb3J0KTtzdGF0ZS5zY2lzc29yKF9jdXJyZW50U2Npc3Nvcik7c3RhdGUuc2V0U2Npc3NvclRlc3QoX2N1cnJlbnRTY2lzc29yVGVzdCk7aWYoaXNDdWJlKXt2YXIgdGV4dHVyZVByb3BlcnRpZXM9cHJvcGVydGllcy5nZXQocmVuZGVyVGFyZ2V0LnRleHR1cmUpO19nbC5mcmFtZWJ1ZmZlclRleHR1cmUyRChfZ2wuRlJBTUVCVUZGRVIsX2dsLkNPTE9SX0FUVEFDSE1FTlQwLF9nbC5URVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1grcmVuZGVyVGFyZ2V0LmFjdGl2ZUN1YmVGYWNlLHRleHR1cmVQcm9wZXJ0aWVzLl9fd2ViZ2xUZXh0dXJlLHJlbmRlclRhcmdldC5hY3RpdmVNaXBNYXBMZXZlbCk7fX07dGhpcy5yZWFkUmVuZGVyVGFyZ2V0UGl4ZWxzPWZ1bmN0aW9uKHJlbmRlclRhcmdldCx4LHksd2lkdGgsaGVpZ2h0LGJ1ZmZlcil7aWYoIShyZW5kZXJUYXJnZXQmJnJlbmRlclRhcmdldC5pc1dlYkdMUmVuZGVyVGFyZ2V0KSl7Y29uc29sZS5lcnJvcignVEhSRUUuV2ViR0xSZW5kZXJlci5yZWFkUmVuZGVyVGFyZ2V0UGl4ZWxzOiByZW5kZXJUYXJnZXQgaXMgbm90IFRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0LicpO3JldHVybjt9dmFyIGZyYW1lYnVmZmVyPXByb3BlcnRpZXMuZ2V0KHJlbmRlclRhcmdldCkuX193ZWJnbEZyYW1lYnVmZmVyO2lmKGZyYW1lYnVmZmVyKXt2YXIgcmVzdG9yZT1mYWxzZTtpZihmcmFtZWJ1ZmZlciE9PV9jdXJyZW50RnJhbWVidWZmZXIpe19nbC5iaW5kRnJhbWVidWZmZXIoX2dsLkZSQU1FQlVGRkVSLGZyYW1lYnVmZmVyKTtyZXN0b3JlPXRydWU7fXRyeXt2YXIgdGV4dHVyZT1yZW5kZXJUYXJnZXQudGV4dHVyZTt2YXIgdGV4dHVyZUZvcm1hdD10ZXh0dXJlLmZvcm1hdDt2YXIgdGV4dHVyZVR5cGU9dGV4dHVyZS50eXBlO2lmKHRleHR1cmVGb3JtYXQhPT1SR0JBRm9ybWF0JiZ1dGlscy5jb252ZXJ0KHRleHR1cmVGb3JtYXQpIT09X2dsLmdldFBhcmFtZXRlcihfZ2wuSU1QTEVNRU5UQVRJT05fQ09MT1JfUkVBRF9GT1JNQVQpKXtjb25zb2xlLmVycm9yKCdUSFJFRS5XZWJHTFJlbmRlcmVyLnJlYWRSZW5kZXJUYXJnZXRQaXhlbHM6IHJlbmRlclRhcmdldCBpcyBub3QgaW4gUkdCQSBvciBpbXBsZW1lbnRhdGlvbiBkZWZpbmVkIGZvcm1hdC4nKTtyZXR1cm47fWlmKHRleHR1cmVUeXBlIT09VW5zaWduZWRCeXRlVHlwZSYmdXRpbHMuY29udmVydCh0ZXh0dXJlVHlwZSkhPT1fZ2wuZ2V0UGFyYW1ldGVyKF9nbC5JTVBMRU1FTlRBVElPTl9DT0xPUl9SRUFEX1RZUEUpJiYvLyBJRTExLCBFZGdlIGFuZCBDaHJvbWUgTWFjIDwgNTIgKCM5NTEzKQohKHRleHR1cmVUeXBlPT09RmxvYXRUeXBlJiYoZXh0ZW5zaW9ucy5nZXQoJ09FU190ZXh0dXJlX2Zsb2F0Jyl8fGV4dGVuc2lvbnMuZ2V0KCdXRUJHTF9jb2xvcl9idWZmZXJfZmxvYXQnKSkpJiYvLyBDaHJvbWUgTWFjID49IDUyIGFuZCBGaXJlZm94CiEodGV4dHVyZVR5cGU9PT1IYWxmRmxvYXRUeXBlJiZleHRlbnNpb25zLmdldCgnRVhUX2NvbG9yX2J1ZmZlcl9oYWxmX2Zsb2F0JykpKXtjb25zb2xlLmVycm9yKCdUSFJFRS5XZWJHTFJlbmRlcmVyLnJlYWRSZW5kZXJUYXJnZXRQaXhlbHM6IHJlbmRlclRhcmdldCBpcyBub3QgaW4gVW5zaWduZWRCeXRlVHlwZSBvciBpbXBsZW1lbnRhdGlvbiBkZWZpbmVkIHR5cGUuJyk7cmV0dXJuO31pZihfZ2wuY2hlY2tGcmFtZWJ1ZmZlclN0YXR1cyhfZ2wuRlJBTUVCVUZGRVIpPT09X2dsLkZSQU1FQlVGRkVSX0NPTVBMRVRFKXsvLyB0aGUgZm9sbG93aW5nIGlmIHN0YXRlbWVudCBlbnN1cmVzIHZhbGlkIHJlYWQgcmVxdWVzdHMgKG5vIG91dC1vZi1ib3VuZHMgcGl4ZWxzLCBzZWUgIzg2MDQpCmlmKHg+PTAmJng8PXJlbmRlclRhcmdldC53aWR0aC13aWR0aCYmeT49MCYmeTw9cmVuZGVyVGFyZ2V0LmhlaWdodC1oZWlnaHQpe19nbC5yZWFkUGl4ZWxzKHgseSx3aWR0aCxoZWlnaHQsdXRpbHMuY29udmVydCh0ZXh0dXJlRm9ybWF0KSx1dGlscy5jb252ZXJ0KHRleHR1cmVUeXBlKSxidWZmZXIpO319ZWxzZXtjb25zb2xlLmVycm9yKCdUSFJFRS5XZWJHTFJlbmRlcmVyLnJlYWRSZW5kZXJUYXJnZXRQaXhlbHM6IHJlYWRQaXhlbHMgZnJvbSByZW5kZXJUYXJnZXQgZmFpbGVkLiBGcmFtZWJ1ZmZlciBub3QgY29tcGxldGUuJyk7fX1maW5hbGx5e2lmKHJlc3RvcmUpe19nbC5iaW5kRnJhbWVidWZmZXIoX2dsLkZSQU1FQlVGRkVSLF9jdXJyZW50RnJhbWVidWZmZXIpO319fX07fS8qKgogKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tLwogKi9mdW5jdGlvbiBTY2VuZSgpe09iamVjdDNELmNhbGwodGhpcyk7dGhpcy50eXBlPSdTY2VuZSc7dGhpcy5iYWNrZ3JvdW5kPW51bGw7dGhpcy5mb2c9bnVsbDt0aGlzLm92ZXJyaWRlTWF0ZXJpYWw9bnVsbDt0aGlzLmF1dG9VcGRhdGU9dHJ1ZTsvLyBjaGVja2VkIGJ5IHRoZSByZW5kZXJlcgp9U2NlbmUucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShPYmplY3QzRC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpTY2VuZSxjb3B5OmZ1bmN0aW9uIGNvcHkoc291cmNlLHJlY3Vyc2l2ZSl7T2JqZWN0M0QucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHNvdXJjZSxyZWN1cnNpdmUpO2lmKHNvdXJjZS5iYWNrZ3JvdW5kIT09bnVsbCl0aGlzLmJhY2tncm91bmQ9c291cmNlLmJhY2tncm91bmQuY2xvbmUoKTtpZihzb3VyY2UuZm9nIT09bnVsbCl0aGlzLmZvZz1zb3VyY2UuZm9nLmNsb25lKCk7aWYoc291cmNlLm92ZXJyaWRlTWF0ZXJpYWwhPT1udWxsKXRoaXMub3ZlcnJpZGVNYXRlcmlhbD1zb3VyY2Uub3ZlcnJpZGVNYXRlcmlhbC5jbG9uZSgpO3RoaXMuYXV0b1VwZGF0ZT1zb3VyY2UuYXV0b1VwZGF0ZTt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9c291cmNlLm1hdHJpeEF1dG9VcGRhdGU7cmV0dXJuIHRoaXM7fSx0b0pTT046ZnVuY3Rpb24gdG9KU09OKG1ldGEpe3ZhciBkYXRhPU9iamVjdDNELnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzLG1ldGEpO2lmKHRoaXMuYmFja2dyb3VuZCE9PW51bGwpZGF0YS5vYmplY3QuYmFja2dyb3VuZD10aGlzLmJhY2tncm91bmQudG9KU09OKG1ldGEpO2lmKHRoaXMuZm9nIT09bnVsbClkYXRhLm9iamVjdC5mb2c9dGhpcy5mb2cudG9KU09OKCk7cmV0dXJuIGRhdGE7fX0pOy8qKgogKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tLwogKi92YXIgQ2FjaGU9e2VuYWJsZWQ6ZmFsc2UsZmlsZXM6e30sYWRkOmZ1bmN0aW9uIGFkZChrZXksZmlsZSl7aWYodGhpcy5lbmFibGVkPT09ZmFsc2UpcmV0dXJuOy8vIGNvbnNvbGUubG9nKCAnVEhSRUUuQ2FjaGUnLCAnQWRkaW5nIGtleTonLCBrZXkgKTsKdGhpcy5maWxlc1trZXldPWZpbGU7fSxnZXQ6ZnVuY3Rpb24gZ2V0KGtleSl7aWYodGhpcy5lbmFibGVkPT09ZmFsc2UpcmV0dXJuOy8vIGNvbnNvbGUubG9nKCAnVEhSRUUuQ2FjaGUnLCAnQ2hlY2tpbmcga2V5OicsIGtleSApOwpyZXR1cm4gdGhpcy5maWxlc1trZXldO30scmVtb3ZlOmZ1bmN0aW9uIHJlbW92ZShrZXkpe2RlbGV0ZSB0aGlzLmZpbGVzW2tleV07fSxjbGVhcjpmdW5jdGlvbiBjbGVhcigpe3RoaXMuZmlsZXM9e307fX07LyoqCiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vCiAqL2Z1bmN0aW9uIExvYWRpbmdNYW5hZ2VyKG9uTG9hZCxvblByb2dyZXNzLG9uRXJyb3Ipe3ZhciBzY29wZT10aGlzO3ZhciBpc0xvYWRpbmc9ZmFsc2U7dmFyIGl0ZW1zTG9hZGVkPTA7dmFyIGl0ZW1zVG90YWw9MDt2YXIgdXJsTW9kaWZpZXI9dW5kZWZpbmVkO3RoaXMub25TdGFydD11bmRlZmluZWQ7dGhpcy5vbkxvYWQ9b25Mb2FkO3RoaXMub25Qcm9ncmVzcz1vblByb2dyZXNzO3RoaXMub25FcnJvcj1vbkVycm9yO3RoaXMuaXRlbVN0YXJ0PWZ1bmN0aW9uKHVybCl7aXRlbXNUb3RhbCsrO2lmKGlzTG9hZGluZz09PWZhbHNlKXtpZihzY29wZS5vblN0YXJ0IT09dW5kZWZpbmVkKXtzY29wZS5vblN0YXJ0KHVybCxpdGVtc0xvYWRlZCxpdGVtc1RvdGFsKTt9fWlzTG9hZGluZz10cnVlO307dGhpcy5pdGVtRW5kPWZ1bmN0aW9uKHVybCl7aXRlbXNMb2FkZWQrKztpZihzY29wZS5vblByb2dyZXNzIT09dW5kZWZpbmVkKXtzY29wZS5vblByb2dyZXNzKHVybCxpdGVtc0xvYWRlZCxpdGVtc1RvdGFsKTt9aWYoaXRlbXNMb2FkZWQ9PT1pdGVtc1RvdGFsKXtpc0xvYWRpbmc9ZmFsc2U7aWYoc2NvcGUub25Mb2FkIT09dW5kZWZpbmVkKXtzY29wZS5vbkxvYWQoKTt9fX07dGhpcy5pdGVtRXJyb3I9ZnVuY3Rpb24odXJsKXtpZihzY29wZS5vbkVycm9yIT09dW5kZWZpbmVkKXtzY29wZS5vbkVycm9yKHVybCk7fX07dGhpcy5yZXNvbHZlVVJMPWZ1bmN0aW9uKHVybCl7aWYodXJsTW9kaWZpZXIpe3JldHVybiB1cmxNb2RpZmllcih1cmwpO31yZXR1cm4gdXJsO307dGhpcy5zZXRVUkxNb2RpZmllcj1mdW5jdGlvbih0cmFuc2Zvcm0pe3VybE1vZGlmaWVyPXRyYW5zZm9ybTtyZXR1cm4gdGhpczt9O312YXIgRGVmYXVsdExvYWRpbmdNYW5hZ2VyPW5ldyBMb2FkaW5nTWFuYWdlcigpOy8qKgogKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tLwogKi9mdW5jdGlvbiBJbWFnZUxvYWRlcihtYW5hZ2VyKXt0aGlzLm1hbmFnZXI9bWFuYWdlciE9PXVuZGVmaW5lZD9tYW5hZ2VyOkRlZmF1bHRMb2FkaW5nTWFuYWdlcjt9T2JqZWN0LmFzc2lnbihJbWFnZUxvYWRlci5wcm90b3R5cGUse2Nyb3NzT3JpZ2luOidBbm9ueW1vdXMnLGxvYWQ6ZnVuY3Rpb24gbG9hZCh1cmwsb25Mb2FkLG9uUHJvZ3Jlc3Msb25FcnJvcil7aWYodXJsPT09dW5kZWZpbmVkKXVybD0nJztpZih0aGlzLnBhdGghPT11bmRlZmluZWQpdXJsPXRoaXMucGF0aCt1cmw7dXJsPXRoaXMubWFuYWdlci5yZXNvbHZlVVJMKHVybCk7dmFyIHNjb3BlPXRoaXM7dmFyIGNhY2hlZD1DYWNoZS5nZXQodXJsKTtpZihjYWNoZWQhPT11bmRlZmluZWQpe3Njb3BlLm1hbmFnZXIuaXRlbVN0YXJ0KHVybCk7c2V0VGltZW91dChmdW5jdGlvbigpe2lmKG9uTG9hZClvbkxvYWQoY2FjaGVkKTtzY29wZS5tYW5hZ2VyLml0ZW1FbmQodXJsKTt9LDApO3JldHVybiBjYWNoZWQ7fXZhciBpbWFnZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwnLCdpbWcnKTtpbWFnZS5hZGRFdmVudExpc3RlbmVyKCdsb2FkJyxmdW5jdGlvbigpe0NhY2hlLmFkZCh1cmwsdGhpcyk7aWYob25Mb2FkKW9uTG9hZCh0aGlzKTtzY29wZS5tYW5hZ2VyLml0ZW1FbmQodXJsKTt9LGZhbHNlKTsvKgoJCWltYWdlLmFkZEV2ZW50TGlzdGVuZXIoICdwcm9ncmVzcycsIGZ1bmN0aW9uICggZXZlbnQgKSB7CgoJCQlpZiAoIG9uUHJvZ3Jlc3MgKSBvblByb2dyZXNzKCBldmVudCApOwoKCQl9LCBmYWxzZSApOwoJCSovaW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLGZ1bmN0aW9uKGV2ZW50KXtpZihvbkVycm9yKW9uRXJyb3IoZXZlbnQpO3Njb3BlLm1hbmFnZXIuaXRlbUVuZCh1cmwpO3Njb3BlLm1hbmFnZXIuaXRlbUVycm9yKHVybCk7fSxmYWxzZSk7aWYodXJsLnN1YnN0cigwLDUpIT09J2RhdGE6Jyl7aWYodGhpcy5jcm9zc09yaWdpbiE9PXVuZGVmaW5lZClpbWFnZS5jcm9zc09yaWdpbj10aGlzLmNyb3NzT3JpZ2luO31zY29wZS5tYW5hZ2VyLml0ZW1TdGFydCh1cmwpO2ltYWdlLnNyYz11cmw7cmV0dXJuIGltYWdlO30sc2V0Q3Jvc3NPcmlnaW46ZnVuY3Rpb24gc2V0Q3Jvc3NPcmlnaW4odmFsdWUpe3RoaXMuY3Jvc3NPcmlnaW49dmFsdWU7cmV0dXJuIHRoaXM7fSxzZXRQYXRoOmZ1bmN0aW9uIHNldFBhdGgodmFsdWUpe3RoaXMucGF0aD12YWx1ZTtyZXR1cm4gdGhpczt9fSk7LyoqCiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vCiAqL2Z1bmN0aW9uIFRleHR1cmVMb2FkZXIobWFuYWdlcil7dGhpcy5tYW5hZ2VyPW1hbmFnZXIhPT11bmRlZmluZWQ/bWFuYWdlcjpEZWZhdWx0TG9hZGluZ01hbmFnZXI7fU9iamVjdC5hc3NpZ24oVGV4dHVyZUxvYWRlci5wcm90b3R5cGUse2Nyb3NzT3JpZ2luOidBbm9ueW1vdXMnLGxvYWQ6ZnVuY3Rpb24gbG9hZCh1cmwsb25Mb2FkLG9uUHJvZ3Jlc3Msb25FcnJvcil7dmFyIHRleHR1cmU9bmV3IFRleHR1cmUoKTt2YXIgbG9hZGVyPW5ldyBJbWFnZUxvYWRlcih0aGlzLm1hbmFnZXIpO2xvYWRlci5zZXRDcm9zc09yaWdpbih0aGlzLmNyb3NzT3JpZ2luKTtsb2FkZXIuc2V0UGF0aCh0aGlzLnBhdGgpO2xvYWRlci5sb2FkKHVybCxmdW5jdGlvbihpbWFnZSl7dGV4dHVyZS5pbWFnZT1pbWFnZTsvLyBKUEVHcyBjYW4ndCBoYXZlIGFuIGFscGhhIGNoYW5uZWwsIHNvIG1lbW9yeSBjYW4gYmUgc2F2ZWQgYnkgc3RvcmluZyB0aGVtIGFzIFJHQi4KdmFyIGlzSlBFRz11cmwuc2VhcmNoKC9cLihqcGd8anBlZykkLyk+MHx8dXJsLnNlYXJjaCgvXmRhdGFcOmltYWdlXC9qcGVnLyk9PT0wO3RleHR1cmUuZm9ybWF0PWlzSlBFRz9SR0JGb3JtYXQ6UkdCQUZvcm1hdDt0ZXh0dXJlLm5lZWRzVXBkYXRlPXRydWU7aWYob25Mb2FkIT09dW5kZWZpbmVkKXtvbkxvYWQodGV4dHVyZSk7fX0sb25Qcm9ncmVzcyxvbkVycm9yKTtyZXR1cm4gdGV4dHVyZTt9LHNldENyb3NzT3JpZ2luOmZ1bmN0aW9uIHNldENyb3NzT3JpZ2luKHZhbHVlKXt0aGlzLmNyb3NzT3JpZ2luPXZhbHVlO3JldHVybiB0aGlzO30sc2V0UGF0aDpmdW5jdGlvbiBzZXRQYXRoKHZhbHVlKXt0aGlzLnBhdGg9dmFsdWU7cmV0dXJuIHRoaXM7fX0pO2V4cG9ydHMuV2ViR0xSZW5kZXJUYXJnZXQ9V2ViR0xSZW5kZXJUYXJnZXQ7ZXhwb3J0cy5XZWJHTFJlbmRlcmVyPVdlYkdMUmVuZGVyZXI7ZXhwb3J0cy5TY2VuZT1TY2VuZTtleHBvcnRzLk1lc2g9TWVzaDtleHBvcnRzLkRhdGFUZXh0dXJlPURhdGFUZXh0dXJlO2V4cG9ydHMuUGxhbmVHZW9tZXRyeT1QbGFuZUdlb21ldHJ5O2V4cG9ydHMuU2hhZGVyTWF0ZXJpYWw9U2hhZGVyTWF0ZXJpYWw7ZXhwb3J0cy5NZXNoQmFzaWNNYXRlcmlhbD1NZXNoQmFzaWNNYXRlcmlhbDtleHBvcnRzLk1hdGVyaWFsPU1hdGVyaWFsO2V4cG9ydHMuVGV4dHVyZUxvYWRlcj1UZXh0dXJlTG9hZGVyO2V4cG9ydHMuT3J0aG9ncmFwaGljQ2FtZXJhPU9ydGhvZ3JhcGhpY0NhbWVyYTtleHBvcnRzLkNsYW1wVG9FZGdlV3JhcHBpbmc9Q2xhbXBUb0VkZ2VXcmFwcGluZztleHBvcnRzLkZsb2F0VHlwZT1GbG9hdFR5cGU7ZXhwb3J0cy5MaW5lYXJGaWx0ZXI9TGluZWFyRmlsdGVyO2V4cG9ydHMuTmVhcmVzdEZpbHRlcj1OZWFyZXN0RmlsdGVyO2V4cG9ydHMuTmVhcmVzdE1pcE1hcE5lYXJlc3RGaWx0ZXI9TmVhcmVzdE1pcE1hcE5lYXJlc3RGaWx0ZXI7ZXhwb3J0cy5SZXBlYXRXcmFwcGluZz1SZXBlYXRXcmFwcGluZztleHBvcnRzLlJHQkFGb3JtYXQ9UkdCQUZvcm1hdDtleHBvcnRzLlVuc2lnbmVkQnl0ZVR5cGU9VW5zaWduZWRCeXRlVHlwZTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywnX19lc01vZHVsZScse3ZhbHVlOnRydWV9KTt9KTtyZXF1aXJlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9ImZ1bmN0aW9uIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitpKyInIik7dGhyb3cgYS5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixhO312YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cik7fSxwLHAuZXhwb3J0cyxyLGUsbix0KTt9cmV0dXJuIG5baV0uZXhwb3J0czt9Zm9yKHZhciB1PSJmdW5jdGlvbiI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKyl7byh0W2ldKTt9cmV0dXJuIG87fXJldHVybiByO30oKSh7MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7KGZ1bmN0aW9uKGdsb2JhbCl7Z2xvYmFsLlRIUkVFPXJlcXVpcmUoJ3RocmVlJyk7VEhSRUU9e0NsYW1wVG9FZGdlV3JhcHBpbmc6VEhSRUUuQ2xhbXBUb0VkZ2VXcmFwcGluZyxEYXRhVGV4dHVyZTpUSFJFRS5EYXRhVGV4dHVyZSxGbG9hdFR5cGU6VEhSRUUuRmxvYXRUeXBlLExpbmVhckZpbHRlcjpUSFJFRS5MaW5lYXJGaWx0ZXIsTWF0ZXJpYWw6VEhSRUUuTWF0ZXJpYWwsTWVzaDpUSFJFRS5NZXNoLE1lc2hCYXNpY01hdGVyaWFsOlRIUkVFLk1lc2hCYXNpY01hdGVyaWFsLE5lYXJlc3RGaWx0ZXI6VEhSRUUuTmVhcmVzdEZpbHRlcixOZWFyZXN0TWlwTWFwTmVhcmVzdEZpbHRlcjpUSFJFRS5OZWFyZXN0TWlwTWFwTmVhcmVzdEZpbHRlcixPcnRob2dyYXBoaWNDYW1lcmE6VEhSRUUuT3J0aG9ncmFwaGljQ2FtZXJhLFBsYW5lR2VvbWV0cnk6VEhSRUUuUGxhbmVHZW9tZXRyeSxSZXBlYXRXcmFwcGluZzpUSFJFRS5SZXBlYXRXcmFwcGluZyxSR0JBRm9ybWF0OlRIUkVFLlJHQkFGb3JtYXQsU2NlbmU6VEhSRUUuU2NlbmUsU2hhZGVyTWF0ZXJpYWw6VEhSRUUuU2hhZGVyTWF0ZXJpYWwsVGV4dHVyZUxvYWRlcjpUSFJFRS5UZXh0dXJlTG9hZGVyLFVuc2lnbmVkQnl0ZVR5cGU6VEhSRUUuVW5zaWduZWRCeXRlVHlwZSxXZWJHTFJlbmRlcmVyOlRIUkVFLldlYkdMUmVuZGVyZXIsV2ViR0xSZW5kZXJUYXJnZXQ6VEhSRUUuV2ViR0xSZW5kZXJUYXJnZXR9O30pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsIT09InVuZGVmaW5lZCI/Z2xvYmFsOnR5cGVvZiBzZWxmIT09InVuZGVmaW5lZCI/c2VsZjp0eXBlb2Ygd2luZG93IT09InVuZGVmaW5lZCI/d2luZG93Ont9KTt9LHsidGhyZWUiOiJ0aHJlZSJ9XSwidGhyZWUiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXttb2R1bGUuZXhwb3J0cz13aW5kb3cuVEhSRUU7fSx7fV19LHt9LFsxXSk7LyoqCiAqIEBhdXRob3IgYWx0ZXJlZHEgLyBodHRwOi8vYWx0ZXJlZHF1YWxpYS5jb20vCiAqIEBhdXRob3IgbXIuZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tLwogKi92YXIgRGV0ZWN0b3I9e2NhbnZhczohIXdpbmRvdy5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsd2ViZ2w6ZnVuY3Rpb24oKXt0cnl7dmFyIGNhbnZhcz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtyZXR1cm4hISh3aW5kb3cuV2ViR0xSZW5kZXJpbmdDb250ZXh0JiYoY2FudmFzLmdldENvbnRleHQoJ3dlYmdsJyl8fGNhbnZhcy5nZXRDb250ZXh0KCdleHBlcmltZW50YWwtd2ViZ2wnKSkpO31jYXRjaChlKXtyZXR1cm4gZmFsc2U7fX0oKSx3b3JrZXJzOiEhd2luZG93LldvcmtlcixmaWxlYXBpOndpbmRvdy5GaWxlJiZ3aW5kb3cuRmlsZVJlYWRlciYmd2luZG93LkZpbGVMaXN0JiZ3aW5kb3cuQmxvYixnZXRXZWJHTEVycm9yTWVzc2FnZTpmdW5jdGlvbiBnZXRXZWJHTEVycm9yTWVzc2FnZSgpe3ZhciBlbGVtZW50PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO2VsZW1lbnQuaWQ9J3dlYmdsLWVycm9yLW1lc3NhZ2UnO2VsZW1lbnQuc3R5bGUuZm9udEZhbWlseT0nbW9ub3NwYWNlJztlbGVtZW50LnN0eWxlLmZvbnRTaXplPScxM3B4JztlbGVtZW50LnN0eWxlLmZvbnRXZWlnaHQ9J25vcm1hbCc7ZWxlbWVudC5zdHlsZS50ZXh0QWxpZ249J2NlbnRlcic7ZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kPScjZmZmJztlbGVtZW50LnN0eWxlLmNvbG9yPScjMDAwJztlbGVtZW50LnN0eWxlLnBhZGRpbmc9JzEuNWVtJztlbGVtZW50LnN0eWxlLndpZHRoPSc0MDBweCc7ZWxlbWVudC5zdHlsZS5tYXJnaW49JzVlbSBhdXRvIDAnO2lmKCF0aGlzLndlYmdsKXtlbGVtZW50LmlubmVySFRNTD13aW5kb3cuV2ViR0xSZW5kZXJpbmdDb250ZXh0P1snWW91ciBncmFwaGljcyBjYXJkIGRvZXMgbm90IHNlZW0gdG8gc3VwcG9ydCA8YSBocmVmPSJodHRwOi8va2hyb25vcy5vcmcvd2ViZ2wvd2lraS9HZXR0aW5nX2FfV2ViR0xfSW1wbGVtZW50YXRpb24iIHN0eWxlPSJjb2xvcjojMDAwIj5XZWJHTDwvYT4uPGJyIC8+JywnRmluZCBvdXQgaG93IHRvIGdldCBpdCA8YSBocmVmPSJodHRwOi8vZ2V0LndlYmdsLm9yZy8iIHN0eWxlPSJjb2xvcjojMDAwIj5oZXJlPC9hPi4nXS5qb2luKCdcbicpOlsnWW91ciBicm93c2VyIGRvZXMgbm90IHNlZW0gdG8gc3VwcG9ydCA8YSBocmVmPSJodHRwOi8va2hyb25vcy5vcmcvd2ViZ2wvd2lraS9HZXR0aW5nX2FfV2ViR0xfSW1wbGVtZW50YXRpb24iIHN0eWxlPSJjb2xvcjojMDAwIj5XZWJHTDwvYT4uPGJyLz4nLCdGaW5kIG91dCBob3cgdG8gZ2V0IGl0IDxhIGhyZWY9Imh0dHA6Ly9nZXQud2ViZ2wub3JnLyIgc3R5bGU9ImNvbG9yOiMwMDAiPmhlcmU8L2E+LiddLmpvaW4oJ1xuJyk7fXJldHVybiBlbGVtZW50O30sYWRkR2V0V2ViR0xNZXNzYWdlOmZ1bmN0aW9uIGFkZEdldFdlYkdMTWVzc2FnZShwYXJhbWV0ZXJzKXt2YXIgcGFyZW50LGlkLGVsZW1lbnQ7cGFyYW1ldGVycz1wYXJhbWV0ZXJzfHx7fTtwYXJlbnQ9cGFyYW1ldGVycy5wYXJlbnQhPT11bmRlZmluZWQ/cGFyYW1ldGVycy5wYXJlbnQ6ZG9jdW1lbnQuYm9keTtpZD1wYXJhbWV0ZXJzLmlkIT09dW5kZWZpbmVkP3BhcmFtZXRlcnMuaWQ6J29sZGllJztlbGVtZW50PURldGVjdG9yLmdldFdlYkdMRXJyb3JNZXNzYWdlKCk7ZWxlbWVudC5pZD1pZDtwYXJlbnQuYXBwZW5kQ2hpbGQoZWxlbWVudCk7fX07Ly8gYnJvd3NlcmlmeSBzdXBwb3J0CmlmKCh0eXBlb2YgbW9kdWxlPT09InVuZGVmaW5lZCI/InVuZGVmaW5lZCI6X3R5cGVvZihtb2R1bGUpKT09PSdvYmplY3QnKXttb2R1bGUuZXhwb3J0cz1EZXRlY3Rvcjt9LyoganNoaW50IC1XMDY3ICovIC8qIGpzaGludCB1bnVzZWQ6IGZhbHNlICovKGZ1bmN0aW9uKGdsb2JhbCx1bmRlZmluZWQpeyd1c2Ugc3RyaWN0JztpZighbm90VXNlTmF0aXZlKCkmJihnbG9iYWwubXNTZXRJbW1lZGlhdGV8fGdsb2JhbC5zZXRJbW1lZGlhdGUpKXtpZighZ2xvYmFsLnNldEltbWVkaWF0ZSl7Z2xvYmFsLnNldEltbWVkaWF0ZT1nbG9iYWwubXNTZXRJbW1lZGlhdGU7Z2xvYmFsLmNsZWFySW1tZWRpYXRlPWdsb2JhbC5tc0NsZWFySW1tZWRpYXRlO31yZXR1cm47fXZhciBkb2M9Z2xvYmFsLmRvY3VtZW50O3ZhciBzbGljZT1BcnJheS5wcm90b3R5cGUuc2xpY2U7dmFyIHRvU3RyaW5nPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7dmFyIFRpbWVyPXt9O1RpbWVyLnBvbGlmaWxsPXt9O1RpbWVyLm5leHRJZD0xO1RpbWVyLnRhc2tzPXt9O1RpbWVyLmxvY2s9ZmFsc2U7VGltZXIucnVuPWZ1bmN0aW9uKGhhbmRsZUlkKXtpZihUaW1lci5sb2NrKXtnbG9iYWwuc2V0VGltZW91dChUaW1lci53cmFwKFRpbWVyLnJ1bixoYW5kbGVJZCksMCk7fWVsc2V7dmFyIHRhc2s9VGltZXIudGFza3NbaGFuZGxlSWRdO2lmKHRhc2spe1RpbWVyLmxvY2s9dHJ1ZTt0cnl7dGFzaygpO31maW5hbGx5e1RpbWVyLmNsZWFyKGhhbmRsZUlkKTtUaW1lci5sb2NrPWZhbHNlO319fX07VGltZXIud3JhcD1mdW5jdGlvbihoYW5kbGVyKXt2YXIgYXJncz1zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gZnVuY3Rpb24oKXtoYW5kbGVyLmFwcGx5KHVuZGVmaW5lZCxhcmdzKTt9O307VGltZXIuY3JlYXRlPWZ1bmN0aW9uKGFyZ3Mpe1RpbWVyLnRhc2tzW1RpbWVyLm5leHRJZF09VGltZXIud3JhcC5hcHBseSh1bmRlZmluZWQsYXJncyk7cmV0dXJuIFRpbWVyLm5leHRJZCsrO307VGltZXIuY2xlYXI9ZnVuY3Rpb24oaGFuZGxlSWQpe2RlbGV0ZSBUaW1lci50YXNrc1toYW5kbGVJZF07fTsvKiBwb2xpZmlsbC9tZXNzYWdlQ2hhbm5lbC5qcyBiZWdpbiAqLyAvKiBnbG9iYWwgZ2xvYmFsLCBUaW1lciAqL1RpbWVyLnBvbGlmaWxsLm1lc3NhZ2VDaGFubmVsPWZ1bmN0aW9uKCl7dmFyIGNoYW5uZWw9bmV3IGdsb2JhbC5NZXNzYWdlQ2hhbm5lbCgpO2NoYW5uZWwucG9ydDEub25tZXNzYWdlPWZ1bmN0aW9uKGV2ZW50KXtUaW1lci5ydW4oTnVtYmVyKGV2ZW50LmRhdGEpKTt9O3JldHVybiBmdW5jdGlvbigpe3ZhciBoYW5kbGVJZD1UaW1lci5jcmVhdGUoYXJndW1lbnRzKTtjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKGhhbmRsZUlkKTtyZXR1cm4gaGFuZGxlSWQ7fTt9Oy8qIHBvbGlmaWxsL21lc3NhZ2VDaGFubmVsLmpzIGVuZCAqLyAvKiBwb2xpZmlsbC9uZXh0VGljay5qcyBiZWdpbiAqLyAvKiBnbG9iYWwgZ2xvYmFsLCBUaW1lciAqL1RpbWVyLnBvbGlmaWxsLm5leHRUaWNrPWZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGhhbmRsZUlkPVRpbWVyLmNyZWF0ZShhcmd1bWVudHMpO2dsb2JhbC5wcm9jZXNzLm5leHRUaWNrKFRpbWVyLndyYXAoVGltZXIucnVuLGhhbmRsZUlkKSk7cmV0dXJuIGhhbmRsZUlkO307fTsvKiBwb2xpZmlsbC9uZXh0VGljay5qcyBlbmQgKi8gLyogcG9saWZpbGwvcG9zdE1lc3NhZ2UuanMgYmVnaW4gKi8gLyogZ2xvYmFsIGdsb2JhbCwgVGltZXIgKi9UaW1lci5wb2xpZmlsbC5wb3N0TWVzc2FnZT1mdW5jdGlvbigpe3ZhciBtZXNzYWdlUHJlZml4PSdzZXRJbW1lZGlhdGUkJytNYXRoLnJhbmRvbSgpKyckJzt2YXIgb25HbG9iYWxNZXNzYWdlPWZ1bmN0aW9uIG9uR2xvYmFsTWVzc2FnZShldmVudCl7aWYoZXZlbnQuc291cmNlPT09Z2xvYmFsJiZ0eXBlb2YgZXZlbnQuZGF0YT09PSdzdHJpbmcnJiZldmVudC5kYXRhLmluZGV4T2YobWVzc2FnZVByZWZpeCk9PT0wKXtUaW1lci5ydW4oTnVtYmVyKGV2ZW50LmRhdGEuc2xpY2UobWVzc2FnZVByZWZpeC5sZW5ndGgpKSk7fX07aWYoZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIpe2dsb2JhbC5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJyxvbkdsb2JhbE1lc3NhZ2UsZmFsc2UpO31lbHNle2dsb2JhbC5hdHRhY2hFdmVudCgnb25tZXNzYWdlJyxvbkdsb2JhbE1lc3NhZ2UpO31yZXR1cm4gZnVuY3Rpb24oKXt2YXIgaGFuZGxlSWQ9VGltZXIuY3JlYXRlKGFyZ3VtZW50cyk7Z2xvYmFsLnBvc3RNZXNzYWdlKG1lc3NhZ2VQcmVmaXgraGFuZGxlSWQsJyonKTtyZXR1cm4gaGFuZGxlSWQ7fTt9Oy8qIHBvbGlmaWxsL3Bvc3RNZXNzYWdlLmpzIGVuZCAqLyAvKiBwb2xpZmlsbC9yZWFkeVN0YXRlQ2hhbmdlLmpzIGJlZ2luICovIC8qIGdsb2JhbCBUaW1lciwgZG9jICovVGltZXIucG9saWZpbGwucmVhZHlTdGF0ZUNoYW5nZT1mdW5jdGlvbigpe3ZhciBodG1sPWRvYy5kb2N1bWVudEVsZW1lbnQ7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGhhbmRsZUlkPVRpbWVyLmNyZWF0ZShhcmd1bWVudHMpO3ZhciBzY3JpcHQ9ZG9jLmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO3NjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtUaW1lci5ydW4oaGFuZGxlSWQpO3NjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbDtodG1sLnJlbW92ZUNoaWxkKHNjcmlwdCk7c2NyaXB0PW51bGw7fTtodG1sLmFwcGVuZENoaWxkKHNjcmlwdCk7cmV0dXJuIGhhbmRsZUlkO307fTsvKiBwb2xpZmlsbC9yZWFkeVN0YXRlQ2hhbmdlLmpzIGVuZCAqLyAvKiBwb2xpZmlsbC9zZXRUaW1lb3V0LmpzIGJlZ2luICovIC8qIGdsb2JhbCBnbG9iYWwsIFRpbWVyICovVGltZXIucG9saWZpbGwuc2V0VGltZW91dD1mdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbigpe3ZhciBoYW5kbGVJZD1UaW1lci5jcmVhdGUoYXJndW1lbnRzKTtnbG9iYWwuc2V0VGltZW91dChUaW1lci53cmFwKFRpbWVyLnJ1bixoYW5kbGVJZCksMCk7cmV0dXJuIGhhbmRsZUlkO307fTsvKiBwb2xpZmlsbC9zZXRUaW1lb3V0LmpzIGVuZCAqL2Z1bmN0aW9uIGNhblVzZVBvc3RNZXNzYWdlKCl7aWYoZ2xvYmFsLnBvc3RNZXNzYWdlJiYhZ2xvYmFsLmltcG9ydFNjcmlwdHMpe3ZhciBhc3luY2g9dHJ1ZTt2YXIgb2xkT25NZXNzYWdlPWdsb2JhbC5vbm1lc3NhZ2U7Z2xvYmFsLm9ubWVzc2FnZT1mdW5jdGlvbigpe2FzeW5jaD1mYWxzZTt9O2dsb2JhbC5wb3N0TWVzc2FnZSgnJywnKicpO2dsb2JhbC5vbm1lc3NhZ2U9b2xkT25NZXNzYWdlO3JldHVybiBhc3luY2g7fX1mdW5jdGlvbiBub3RVc2VOYXRpdmUoKXsvLyBAc2VlIGh0dHA6Ly9jb2RlZm9yaGlyZS5jb20vMjAxMy8wOS8yMS9zZXRpbW1lZGlhdGUtYW5kLW1lc3NhZ2VjaGFubmVsLWJyb2tlbi1vbi1pbnRlcm5ldC1leHBsb3Jlci0xMC8KcmV0dXJuIGdsb2JhbC5uYXZpZ2F0b3ImJi9UcmlkZW50Ly50ZXN0KGdsb2JhbC5uYXZpZ2F0b3IudXNlckFnZW50KTt9dmFyIHBvbGlmaWxsO2lmKG5vdFVzZU5hdGl2ZSgpKXtwb2xpZmlsbD0nc2V0VGltZW91dCc7Ly8gRG9uJ3QgZ2V0IGZvb2xlZCBieSBlLmcuIGJyb3dzZXJpZnkgZW52aXJvbm1lbnRzLgovLyBGb3IgTm9kZS5qcyBiZWZvcmUgMC45Cn1lbHNlIGlmKHRvU3RyaW5nLmNhbGwoZ2xvYmFsLnByb2Nlc3MpPT09J1tvYmplY3QgcHJvY2Vzc10nKXtwb2xpZmlsbD0nbmV4dFRpY2snOy8vIEZvciBub24tSUUxMCBtb2Rlcm4gYnJvd3NlcnMKfWVsc2UgaWYoY2FuVXNlUG9zdE1lc3NhZ2UoKSl7cG9saWZpbGw9J3Bvc3RNZXNzYWdlJzsvLyBGb3Igd2ViIHdvcmtlcnMsIHdoZXJlIHN1cHBvcnRlZAp9ZWxzZSBpZihnbG9iYWwuTWVzc2FnZUNoYW5uZWwpe3BvbGlmaWxsPSdtZXNzYWdlQ2hhbm5lbCc7Ly8gRm9yIElFIDbigJM4Cn1lbHNlIGlmKGRvYyYmJ29ucmVhZHlzdGF0ZWNoYW5nZSdpbiBkb2MuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jykpe3BvbGlmaWxsPSdyZWFkeVN0YXRlQ2hhbmdlJzsvLyBGb3Igb2xkZXIgYnJvd3NlcnMKfWVsc2V7cG9saWZpbGw9J3NldFRpbWVvdXQnO30vLyBJZiBzdXBwb3J0ZWQsIHdlIHNob3VsZCBhdHRhY2ggdG8gdGhlIHByb3RvdHlwZSBvZiBnbG9iYWwsIHNpbmNlIHRoYXQgaXMgd2hlcmUgc2V0VGltZW91dCBldCBhbC4gbGl2ZS4KdmFyIGF0dGFjaFRvPU9iamVjdC5nZXRQcm90b3R5cGVPZiYmT2JqZWN0LmdldFByb3RvdHlwZU9mKGdsb2JhbCk7YXR0YWNoVG89YXR0YWNoVG8mJmF0dGFjaFRvLnNldFRpbWVvdXQ/YXR0YWNoVG86Z2xvYmFsO2F0dGFjaFRvLnNldEltbWVkaWF0ZT1UaW1lci5wb2xpZmlsbFtwb2xpZmlsbF0oKTthdHRhY2hUby5zZXRJbW1lZGlhdGUudXNlUG9saWZpbGw9cG9saWZpbGw7YXR0YWNoVG8ubXNTZXRJbW1lZGlhdGU9YXR0YWNoVG8uc2V0SW1tZWRpYXRlO2F0dGFjaFRvLmNsZWFySW1tZWRpYXRlPVRpbWVyLmNsZWFyO2F0dGFjaFRvLm1zQ2xlYXJJbW1lZGlhdGU9VGltZXIuY2xlYXI7fSkoZnVuY3Rpb24oKXtyZXR1cm4gdGhpc3x8KDEsZXZhbCkoJ3RoaXMnKTt9KCkpOy8qIQogKiBFdmVudEVtaXR0ZXIgdjQuMi4xMSAtIGdpdC5pby9lZQogKiBVbmxpY2Vuc2UgLSBodHRwOi8vdW5saWNlbnNlLm9yZy8KICogT2xpdmVyIENhbGR3ZWxsIC0gaHR0cDovL29saS5tZS51ay8KICogQHByZXNlcnZlCiAqLzsoZnVuY3Rpb24oKXsndXNlIHN0cmljdCc7LyoqCiAgICAgKiBDbGFzcyBmb3IgbWFuYWdpbmcgZXZlbnRzLgogICAgICogQ2FuIGJlIGV4dGVuZGVkIHRvIHByb3ZpZGUgZXZlbnQgZnVuY3Rpb25hbGl0eSBpbiBvdGhlciBjbGFzc2VzLgogICAgICoKICAgICAqIEBjbGFzcyBFdmVudEVtaXR0ZXIgTWFuYWdlcyBldmVudCByZWdpc3RlcmluZyBhbmQgZW1pdHRpbmcuCiAgICAgKi9mdW5jdGlvbiBFdmVudEVtaXR0ZXIoKXt9Ly8gU2hvcnRjdXRzIHRvIGltcHJvdmUgc3BlZWQgYW5kIHNpemUKdmFyIHByb3RvPUV2ZW50RW1pdHRlci5wcm90b3R5cGU7dmFyIGV4cG9ydHM9dGhpczt2YXIgb3JpZ2luYWxHbG9iYWxWYWx1ZT1leHBvcnRzLkV2ZW50RW1pdHRlcjsvKioKICAgICAqIEZpbmRzIHRoZSBpbmRleCBvZiB0aGUgbGlzdGVuZXIgZm9yIHRoZSBldmVudCBpbiBpdHMgc3RvcmFnZSBhcnJheS4KICAgICAqCiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9uW119IGxpc3RlbmVycyBBcnJheSBvZiBsaXN0ZW5lcnMgdG8gc2VhcmNoIHRocm91Z2guCiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaXN0ZW5lciBNZXRob2QgdG8gbG9vayBmb3IuCiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IEluZGV4IG9mIHRoZSBzcGVjaWZpZWQgbGlzdGVuZXIsIC0xIGlmIG5vdCBmb3VuZAogICAgICogQGFwaSBwcml2YXRlCiAgICAgKi9mdW5jdGlvbiBpbmRleE9mTGlzdGVuZXIobGlzdGVuZXJzLGxpc3RlbmVyKXt2YXIgaT1saXN0ZW5lcnMubGVuZ3RoO3doaWxlKGktLSl7aWYobGlzdGVuZXJzW2ldLmxpc3RlbmVyPT09bGlzdGVuZXIpe3JldHVybiBpO319cmV0dXJuLTE7fS8qKgogICAgICogQWxpYXMgYSBtZXRob2Qgd2hpbGUga2VlcGluZyB0aGUgY29udGV4dCBjb3JyZWN0LCB0byBhbGxvdyBmb3Igb3ZlcndyaXRpbmcgb2YgdGFyZ2V0IG1ldGhvZC4KICAgICAqCiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgdGFyZ2V0IG1ldGhvZC4KICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBUaGUgYWxpYXNlZCBtZXRob2QKICAgICAqIEBhcGkgcHJpdmF0ZQogICAgICovZnVuY3Rpb24gYWxpYXMobmFtZSl7cmV0dXJuIGZ1bmN0aW9uIGFsaWFzQ2xvc3VyZSgpe3JldHVybiB0aGlzW25hbWVdLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9O30vKioKICAgICAqIFJldHVybnMgdGhlIGxpc3RlbmVyIGFycmF5IGZvciB0aGUgc3BlY2lmaWVkIGV2ZW50LgogICAgICogV2lsbCBpbml0aWFsaXNlIHRoZSBldmVudCBvYmplY3QgYW5kIGxpc3RlbmVyIGFycmF5cyBpZiByZXF1aXJlZC4KICAgICAqIFdpbGwgcmV0dXJuIGFuIG9iamVjdCBpZiB5b3UgdXNlIGEgcmVnZXggc2VhcmNoLiBUaGUgb2JqZWN0IGNvbnRhaW5zIGtleXMgZm9yIGVhY2ggbWF0Y2hlZCBldmVudC4gU28gL2JhW3J6XS8gbWlnaHQgcmV0dXJuIGFuIG9iamVjdCBjb250YWluaW5nIGJhciBhbmQgYmF6LiBCdXQgb25seSBpZiB5b3UgaGF2ZSBlaXRoZXIgZGVmaW5lZCB0aGVtIHdpdGggZGVmaW5lRXZlbnQgb3IgYWRkZWQgc29tZSBsaXN0ZW5lcnMgdG8gdGhlbS4KICAgICAqIEVhY2ggcHJvcGVydHkgaW4gdGhlIG9iamVjdCByZXNwb25zZSBpcyBhbiBhcnJheSBvZiBsaXN0ZW5lciBmdW5jdGlvbnMuCiAgICAgKgogICAgICogQHBhcmFtIHtTdHJpbmd8UmVnRXhwfSBldnQgTmFtZSBvZiB0aGUgZXZlbnQgdG8gcmV0dXJuIHRoZSBsaXN0ZW5lcnMgZnJvbS4KICAgICAqIEByZXR1cm4ge0Z1bmN0aW9uW118T2JqZWN0fSBBbGwgbGlzdGVuZXIgZnVuY3Rpb25zIGZvciB0aGUgZXZlbnQuCiAgICAgKi9wcm90by5nZXRMaXN0ZW5lcnM9ZnVuY3Rpb24gZ2V0TGlzdGVuZXJzKGV2dCl7dmFyIGV2ZW50cz10aGlzLl9nZXRFdmVudHMoKTt2YXIgcmVzcG9uc2U7dmFyIGtleTsvLyBSZXR1cm4gYSBjb25jYXRlbmF0ZWQgYXJyYXkgb2YgYWxsIG1hdGNoaW5nIGV2ZW50cyBpZgovLyB0aGUgc2VsZWN0b3IgaXMgYSByZWd1bGFyIGV4cHJlc3Npb24uCmlmKGV2dCBpbnN0YW5jZW9mIFJlZ0V4cCl7cmVzcG9uc2U9e307Zm9yKGtleSBpbiBldmVudHMpe2lmKGV2ZW50cy5oYXNPd25Qcm9wZXJ0eShrZXkpJiZldnQudGVzdChrZXkpKXtyZXNwb25zZVtrZXldPWV2ZW50c1trZXldO319fWVsc2V7cmVzcG9uc2U9ZXZlbnRzW2V2dF18fChldmVudHNbZXZ0XT1bXSk7fXJldHVybiByZXNwb25zZTt9Oy8qKgogICAgICogVGFrZXMgYSBsaXN0IG9mIGxpc3RlbmVyIG9iamVjdHMgYW5kIGZsYXR0ZW5zIGl0IGludG8gYSBsaXN0IG9mIGxpc3RlbmVyIGZ1bmN0aW9ucy4KICAgICAqCiAgICAgKiBAcGFyYW0ge09iamVjdFtdfSBsaXN0ZW5lcnMgUmF3IGxpc3RlbmVyIG9iamVjdHMuCiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbltdfSBKdXN0IHRoZSBsaXN0ZW5lciBmdW5jdGlvbnMuCiAgICAgKi9wcm90by5mbGF0dGVuTGlzdGVuZXJzPWZ1bmN0aW9uIGZsYXR0ZW5MaXN0ZW5lcnMobGlzdGVuZXJzKXt2YXIgZmxhdExpc3RlbmVycz1bXTt2YXIgaTtmb3IoaT0wO2k8bGlzdGVuZXJzLmxlbmd0aDtpKz0xKXtmbGF0TGlzdGVuZXJzLnB1c2gobGlzdGVuZXJzW2ldLmxpc3RlbmVyKTt9cmV0dXJuIGZsYXRMaXN0ZW5lcnM7fTsvKioKICAgICAqIEZldGNoZXMgdGhlIHJlcXVlc3RlZCBsaXN0ZW5lcnMgdmlhIGdldExpc3RlbmVycyBidXQgd2lsbCBhbHdheXMgcmV0dXJuIHRoZSByZXN1bHRzIGluc2lkZSBhbiBvYmplY3QuIFRoaXMgaXMgbWFpbmx5IGZvciBpbnRlcm5hbCB1c2UgYnV0IG90aGVycyBtYXkgZmluZCBpdCB1c2VmdWwuCiAgICAgKgogICAgICogQHBhcmFtIHtTdHJpbmd8UmVnRXhwfSBldnQgTmFtZSBvZiB0aGUgZXZlbnQgdG8gcmV0dXJuIHRoZSBsaXN0ZW5lcnMgZnJvbS4KICAgICAqIEByZXR1cm4ge09iamVjdH0gQWxsIGxpc3RlbmVyIGZ1bmN0aW9ucyBmb3IgYW4gZXZlbnQgaW4gYW4gb2JqZWN0LgogICAgICovcHJvdG8uZ2V0TGlzdGVuZXJzQXNPYmplY3Q9ZnVuY3Rpb24gZ2V0TGlzdGVuZXJzQXNPYmplY3QoZXZ0KXt2YXIgbGlzdGVuZXJzPXRoaXMuZ2V0TGlzdGVuZXJzKGV2dCk7dmFyIHJlc3BvbnNlO2lmKGxpc3RlbmVycyBpbnN0YW5jZW9mIEFycmF5KXtyZXNwb25zZT17fTtyZXNwb25zZVtldnRdPWxpc3RlbmVyczt9cmV0dXJuIHJlc3BvbnNlfHxsaXN0ZW5lcnM7fTsvKioKICAgICAqIEFkZHMgYSBsaXN0ZW5lciBmdW5jdGlvbiB0byB0aGUgc3BlY2lmaWVkIGV2ZW50LgogICAgICogVGhlIGxpc3RlbmVyIHdpbGwgbm90IGJlIGFkZGVkIGlmIGl0IGlzIGEgZHVwbGljYXRlLgogICAgICogSWYgdGhlIGxpc3RlbmVyIHJldHVybnMgdHJ1ZSB0aGVuIGl0IHdpbGwgYmUgcmVtb3ZlZCBhZnRlciBpdCBpcyBjYWxsZWQuCiAgICAgKiBJZiB5b3UgcGFzcyBhIHJlZ3VsYXIgZXhwcmVzc2lvbiBhcyB0aGUgZXZlbnQgbmFtZSB0aGVuIHRoZSBsaXN0ZW5lciB3aWxsIGJlIGFkZGVkIHRvIGFsbCBldmVudHMgdGhhdCBtYXRjaCBpdC4KICAgICAqCiAgICAgKiBAcGFyYW0ge1N0cmluZ3xSZWdFeHB9IGV2dCBOYW1lIG9mIHRoZSBldmVudCB0byBhdHRhY2ggdGhlIGxpc3RlbmVyIHRvLgogICAgICogQHBhcmFtIHtGdW5jdGlvbn0gbGlzdGVuZXIgTWV0aG9kIHRvIGJlIGNhbGxlZCB3aGVuIHRoZSBldmVudCBpcyBlbWl0dGVkLiBJZiB0aGUgZnVuY3Rpb24gcmV0dXJucyB0cnVlIHRoZW4gaXQgd2lsbCBiZSByZW1vdmVkIGFmdGVyIGNhbGxpbmcuCiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IEN1cnJlbnQgaW5zdGFuY2Ugb2YgRXZlbnRFbWl0dGVyIGZvciBjaGFpbmluZy4KICAgICAqL3Byb3RvLmFkZExpc3RlbmVyPWZ1bmN0aW9uIGFkZExpc3RlbmVyKGV2dCxsaXN0ZW5lcil7dmFyIGxpc3RlbmVycz10aGlzLmdldExpc3RlbmVyc0FzT2JqZWN0KGV2dCk7dmFyIGxpc3RlbmVySXNXcmFwcGVkPV90eXBlb2YobGlzdGVuZXIpPT09J29iamVjdCc7dmFyIGtleTtmb3Ioa2V5IGluIGxpc3RlbmVycyl7aWYobGlzdGVuZXJzLmhhc093blByb3BlcnR5KGtleSkmJmluZGV4T2ZMaXN0ZW5lcihsaXN0ZW5lcnNba2V5XSxsaXN0ZW5lcik9PT0tMSl7bGlzdGVuZXJzW2tleV0ucHVzaChsaXN0ZW5lcklzV3JhcHBlZD9saXN0ZW5lcjp7bGlzdGVuZXI6bGlzdGVuZXIsb25jZTpmYWxzZX0pO319cmV0dXJuIHRoaXM7fTsvKioKICAgICAqIEFsaWFzIG9mIGFkZExpc3RlbmVyCiAgICAgKi9wcm90by5vbj1hbGlhcygnYWRkTGlzdGVuZXInKTsvKioKICAgICAqIFNlbWktYWxpYXMgb2YgYWRkTGlzdGVuZXIuIEl0IHdpbGwgYWRkIGEgbGlzdGVuZXIgdGhhdCB3aWxsIGJlCiAgICAgKiBhdXRvbWF0aWNhbGx5IHJlbW92ZWQgYWZ0ZXIgaXRzIGZpcnN0IGV4ZWN1dGlvbi4KICAgICAqCiAgICAgKiBAcGFyYW0ge1N0cmluZ3xSZWdFeHB9IGV2dCBOYW1lIG9mIHRoZSBldmVudCB0byBhdHRhY2ggdGhlIGxpc3RlbmVyIHRvLgogICAgICogQHBhcmFtIHtGdW5jdGlvbn0gbGlzdGVuZXIgTWV0aG9kIHRvIGJlIGNhbGxlZCB3aGVuIHRoZSBldmVudCBpcyBlbWl0dGVkLiBJZiB0aGUgZnVuY3Rpb24gcmV0dXJucyB0cnVlIHRoZW4gaXQgd2lsbCBiZSByZW1vdmVkIGFmdGVyIGNhbGxpbmcuCiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IEN1cnJlbnQgaW5zdGFuY2Ugb2YgRXZlbnRFbWl0dGVyIGZvciBjaGFpbmluZy4KICAgICAqL3Byb3RvLmFkZE9uY2VMaXN0ZW5lcj1mdW5jdGlvbiBhZGRPbmNlTGlzdGVuZXIoZXZ0LGxpc3RlbmVyKXtyZXR1cm4gdGhpcy5hZGRMaXN0ZW5lcihldnQse2xpc3RlbmVyOmxpc3RlbmVyLG9uY2U6dHJ1ZX0pO307LyoqCiAgICAgKiBBbGlhcyBvZiBhZGRPbmNlTGlzdGVuZXIuCiAgICAgKi9wcm90by5vbmNlPWFsaWFzKCdhZGRPbmNlTGlzdGVuZXInKTsvKioKICAgICAqIERlZmluZXMgYW4gZXZlbnQgbmFtZS4gVGhpcyBpcyByZXF1aXJlZCBpZiB5b3Ugd2FudCB0byB1c2UgYSByZWdleCB0byBhZGQgYSBsaXN0ZW5lciB0byBtdWx0aXBsZSBldmVudHMgYXQgb25jZS4gSWYgeW91IGRvbid0IGRvIHRoaXMgdGhlbiBob3cgZG8geW91IGV4cGVjdCBpdCB0byBrbm93IHdoYXQgZXZlbnQgdG8gYWRkIHRvPyBTaG91bGQgaXQganVzdCBhZGQgdG8gZXZlcnkgcG9zc2libGUgbWF0Y2ggZm9yIGEgcmVnZXg/IE5vLiBUaGF0IGlzIHNjYXJ5IGFuZCBiYWQuCiAgICAgKiBZb3UgbmVlZCB0byB0ZWxsIGl0IHdoYXQgZXZlbnQgbmFtZXMgc2hvdWxkIGJlIG1hdGNoZWQgYnkgYSByZWdleC4KICAgICAqCiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXZ0IE5hbWUgb2YgdGhlIGV2ZW50IHRvIGNyZWF0ZS4KICAgICAqIEByZXR1cm4ge09iamVjdH0gQ3VycmVudCBpbnN0YW5jZSBvZiBFdmVudEVtaXR0ZXIgZm9yIGNoYWluaW5nLgogICAgICovcHJvdG8uZGVmaW5lRXZlbnQ9ZnVuY3Rpb24gZGVmaW5lRXZlbnQoZXZ0KXt0aGlzLmdldExpc3RlbmVycyhldnQpO3JldHVybiB0aGlzO307LyoqCiAgICAgKiBVc2VzIGRlZmluZUV2ZW50IHRvIGRlZmluZSBtdWx0aXBsZSBldmVudHMuCiAgICAgKgogICAgICogQHBhcmFtIHtTdHJpbmdbXX0gZXZ0cyBBbiBhcnJheSBvZiBldmVudCBuYW1lcyB0byBkZWZpbmUuCiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IEN1cnJlbnQgaW5zdGFuY2Ugb2YgRXZlbnRFbWl0dGVyIGZvciBjaGFpbmluZy4KICAgICAqL3Byb3RvLmRlZmluZUV2ZW50cz1mdW5jdGlvbiBkZWZpbmVFdmVudHMoZXZ0cyl7Zm9yKHZhciBpPTA7aTxldnRzLmxlbmd0aDtpKz0xKXt0aGlzLmRlZmluZUV2ZW50KGV2dHNbaV0pO31yZXR1cm4gdGhpczt9Oy8qKgogICAgICogUmVtb3ZlcyBhIGxpc3RlbmVyIGZ1bmN0aW9uIGZyb20gdGhlIHNwZWNpZmllZCBldmVudC4KICAgICAqIFdoZW4gcGFzc2VkIGEgcmVndWxhciBleHByZXNzaW9uIGFzIHRoZSBldmVudCBuYW1lLCBpdCB3aWxsIHJlbW92ZSB0aGUgbGlzdGVuZXIgZnJvbSBhbGwgZXZlbnRzIHRoYXQgbWF0Y2ggaXQuCiAgICAgKgogICAgICogQHBhcmFtIHtTdHJpbmd8UmVnRXhwfSBldnQgTmFtZSBvZiB0aGUgZXZlbnQgdG8gcmVtb3ZlIHRoZSBsaXN0ZW5lciBmcm9tLgogICAgICogQHBhcmFtIHtGdW5jdGlvbn0gbGlzdGVuZXIgTWV0aG9kIHRvIHJlbW92ZSBmcm9tIHRoZSBldmVudC4KICAgICAqIEByZXR1cm4ge09iamVjdH0gQ3VycmVudCBpbnN0YW5jZSBvZiBFdmVudEVtaXR0ZXIgZm9yIGNoYWluaW5nLgogICAgICovcHJvdG8ucmVtb3ZlTGlzdGVuZXI9ZnVuY3Rpb24gcmVtb3ZlTGlzdGVuZXIoZXZ0LGxpc3RlbmVyKXt2YXIgbGlzdGVuZXJzPXRoaXMuZ2V0TGlzdGVuZXJzQXNPYmplY3QoZXZ0KTt2YXIgaW5kZXg7dmFyIGtleTtmb3Ioa2V5IGluIGxpc3RlbmVycyl7aWYobGlzdGVuZXJzLmhhc093blByb3BlcnR5KGtleSkpe2luZGV4PWluZGV4T2ZMaXN0ZW5lcihsaXN0ZW5lcnNba2V5XSxsaXN0ZW5lcik7aWYoaW5kZXghPT0tMSl7bGlzdGVuZXJzW2tleV0uc3BsaWNlKGluZGV4LDEpO319fXJldHVybiB0aGlzO307LyoqCiAgICAgKiBBbGlhcyBvZiByZW1vdmVMaXN0ZW5lcgogICAgICovcHJvdG8ub2ZmPWFsaWFzKCdyZW1vdmVMaXN0ZW5lcicpOy8qKgogICAgICogQWRkcyBsaXN0ZW5lcnMgaW4gYnVsayB1c2luZyB0aGUgbWFuaXB1bGF0ZUxpc3RlbmVycyBtZXRob2QuCiAgICAgKiBJZiB5b3UgcGFzcyBhbiBvYmplY3QgYXMgdGhlIHNlY29uZCBhcmd1bWVudCB5b3UgY2FuIGFkZCB0byBtdWx0aXBsZSBldmVudHMgYXQgb25jZS4gVGhlIG9iamVjdCBzaG91bGQgY29udGFpbiBrZXkgdmFsdWUgcGFpcnMgb2YgZXZlbnRzIGFuZCBsaXN0ZW5lcnMgb3IgbGlzdGVuZXIgYXJyYXlzLiBZb3UgY2FuIGFsc28gcGFzcyBpdCBhbiBldmVudCBuYW1lIGFuZCBhbiBhcnJheSBvZiBsaXN0ZW5lcnMgdG8gYmUgYWRkZWQuCiAgICAgKiBZb3UgY2FuIGFsc28gcGFzcyBpdCBhIHJlZ3VsYXIgZXhwcmVzc2lvbiB0byBhZGQgdGhlIGFycmF5IG9mIGxpc3RlbmVycyB0byBhbGwgZXZlbnRzIHRoYXQgbWF0Y2ggaXQuCiAgICAgKiBZZWFoLCB0aGlzIGZ1bmN0aW9uIGRvZXMgcXVpdGUgYSBiaXQuIFRoYXQncyBwcm9iYWJseSBhIGJhZCB0aGluZy4KICAgICAqCiAgICAgKiBAcGFyYW0ge1N0cmluZ3xPYmplY3R8UmVnRXhwfSBldnQgQW4gZXZlbnQgbmFtZSBpZiB5b3Ugd2lsbCBwYXNzIGFuIGFycmF5IG9mIGxpc3RlbmVycyBuZXh0LiBBbiBvYmplY3QgaWYgeW91IHdpc2ggdG8gYWRkIHRvIG11bHRpcGxlIGV2ZW50cyBhdCBvbmNlLgogICAgICogQHBhcmFtIHtGdW5jdGlvbltdfSBbbGlzdGVuZXJzXSBBbiBvcHRpb25hbCBhcnJheSBvZiBsaXN0ZW5lciBmdW5jdGlvbnMgdG8gYWRkLgogICAgICogQHJldHVybiB7T2JqZWN0fSBDdXJyZW50IGluc3RhbmNlIG9mIEV2ZW50RW1pdHRlciBmb3IgY2hhaW5pbmcuCiAgICAgKi9wcm90by5hZGRMaXN0ZW5lcnM9ZnVuY3Rpb24gYWRkTGlzdGVuZXJzKGV2dCxsaXN0ZW5lcnMpey8vIFBhc3MgdGhyb3VnaCB0byBtYW5pcHVsYXRlTGlzdGVuZXJzCnJldHVybiB0aGlzLm1hbmlwdWxhdGVMaXN0ZW5lcnMoZmFsc2UsZXZ0LGxpc3RlbmVycyk7fTsvKioKICAgICAqIFJlbW92ZXMgbGlzdGVuZXJzIGluIGJ1bGsgdXNpbmcgdGhlIG1hbmlwdWxhdGVMaXN0ZW5lcnMgbWV0aG9kLgogICAgICogSWYgeW91IHBhc3MgYW4gb2JqZWN0IGFzIHRoZSBzZWNvbmQgYXJndW1lbnQgeW91IGNhbiByZW1vdmUgZnJvbSBtdWx0aXBsZSBldmVudHMgYXQgb25jZS4gVGhlIG9iamVjdCBzaG91bGQgY29udGFpbiBrZXkgdmFsdWUgcGFpcnMgb2YgZXZlbnRzIGFuZCBsaXN0ZW5lcnMgb3IgbGlzdGVuZXIgYXJyYXlzLgogICAgICogWW91IGNhbiBhbHNvIHBhc3MgaXQgYW4gZXZlbnQgbmFtZSBhbmQgYW4gYXJyYXkgb2YgbGlzdGVuZXJzIHRvIGJlIHJlbW92ZWQuCiAgICAgKiBZb3UgY2FuIGFsc28gcGFzcyBpdCBhIHJlZ3VsYXIgZXhwcmVzc2lvbiB0byByZW1vdmUgdGhlIGxpc3RlbmVycyBmcm9tIGFsbCBldmVudHMgdGhhdCBtYXRjaCBpdC4KICAgICAqCiAgICAgKiBAcGFyYW0ge1N0cmluZ3xPYmplY3R8UmVnRXhwfSBldnQgQW4gZXZlbnQgbmFtZSBpZiB5b3Ugd2lsbCBwYXNzIGFuIGFycmF5IG9mIGxpc3RlbmVycyBuZXh0LiBBbiBvYmplY3QgaWYgeW91IHdpc2ggdG8gcmVtb3ZlIGZyb20gbXVsdGlwbGUgZXZlbnRzIGF0IG9uY2UuCiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9uW119IFtsaXN0ZW5lcnNdIEFuIG9wdGlvbmFsIGFycmF5IG9mIGxpc3RlbmVyIGZ1bmN0aW9ucyB0byByZW1vdmUuCiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IEN1cnJlbnQgaW5zdGFuY2Ugb2YgRXZlbnRFbWl0dGVyIGZvciBjaGFpbmluZy4KICAgICAqL3Byb3RvLnJlbW92ZUxpc3RlbmVycz1mdW5jdGlvbiByZW1vdmVMaXN0ZW5lcnMoZXZ0LGxpc3RlbmVycyl7Ly8gUGFzcyB0aHJvdWdoIHRvIG1hbmlwdWxhdGVMaXN0ZW5lcnMKcmV0dXJuIHRoaXMubWFuaXB1bGF0ZUxpc3RlbmVycyh0cnVlLGV2dCxsaXN0ZW5lcnMpO307LyoqCiAgICAgKiBFZGl0cyBsaXN0ZW5lcnMgaW4gYnVsay4gVGhlIGFkZExpc3RlbmVycyBhbmQgcmVtb3ZlTGlzdGVuZXJzIG1ldGhvZHMgYm90aCB1c2UgdGhpcyB0byBkbyB0aGVpciBqb2IuIFlvdSBzaG91bGQgcmVhbGx5IHVzZSB0aG9zZSBpbnN0ZWFkLCB0aGlzIGlzIGEgbGl0dGxlIGxvd2VyIGxldmVsLgogICAgICogVGhlIGZpcnN0IGFyZ3VtZW50IHdpbGwgZGV0ZXJtaW5lIGlmIHRoZSBsaXN0ZW5lcnMgYXJlIHJlbW92ZWQgKHRydWUpIG9yIGFkZGVkIChmYWxzZSkuCiAgICAgKiBJZiB5b3UgcGFzcyBhbiBvYmplY3QgYXMgdGhlIHNlY29uZCBhcmd1bWVudCB5b3UgY2FuIGFkZC9yZW1vdmUgZnJvbSBtdWx0aXBsZSBldmVudHMgYXQgb25jZS4gVGhlIG9iamVjdCBzaG91bGQgY29udGFpbiBrZXkgdmFsdWUgcGFpcnMgb2YgZXZlbnRzIGFuZCBsaXN0ZW5lcnMgb3IgbGlzdGVuZXIgYXJyYXlzLgogICAgICogWW91IGNhbiBhbHNvIHBhc3MgaXQgYW4gZXZlbnQgbmFtZSBhbmQgYW4gYXJyYXkgb2YgbGlzdGVuZXJzIHRvIGJlIGFkZGVkL3JlbW92ZWQuCiAgICAgKiBZb3UgY2FuIGFsc28gcGFzcyBpdCBhIHJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYW5pcHVsYXRlIHRoZSBsaXN0ZW5lcnMgb2YgYWxsIGV2ZW50cyB0aGF0IG1hdGNoIGl0LgogICAgICoKICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gcmVtb3ZlIFRydWUgaWYgeW91IHdhbnQgdG8gcmVtb3ZlIGxpc3RlbmVycywgZmFsc2UgaWYgeW91IHdhbnQgdG8gYWRkLgogICAgICogQHBhcmFtIHtTdHJpbmd8T2JqZWN0fFJlZ0V4cH0gZXZ0IEFuIGV2ZW50IG5hbWUgaWYgeW91IHdpbGwgcGFzcyBhbiBhcnJheSBvZiBsaXN0ZW5lcnMgbmV4dC4gQW4gb2JqZWN0IGlmIHlvdSB3aXNoIHRvIGFkZC9yZW1vdmUgZnJvbSBtdWx0aXBsZSBldmVudHMgYXQgb25jZS4KICAgICAqIEBwYXJhbSB7RnVuY3Rpb25bXX0gW2xpc3RlbmVyc10gQW4gb3B0aW9uYWwgYXJyYXkgb2YgbGlzdGVuZXIgZnVuY3Rpb25zIHRvIGFkZC9yZW1vdmUuCiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IEN1cnJlbnQgaW5zdGFuY2Ugb2YgRXZlbnRFbWl0dGVyIGZvciBjaGFpbmluZy4KICAgICAqL3Byb3RvLm1hbmlwdWxhdGVMaXN0ZW5lcnM9ZnVuY3Rpb24gbWFuaXB1bGF0ZUxpc3RlbmVycyhyZW1vdmUsZXZ0LGxpc3RlbmVycyl7dmFyIGk7dmFyIHZhbHVlO3ZhciBzaW5nbGU9cmVtb3ZlP3RoaXMucmVtb3ZlTGlzdGVuZXI6dGhpcy5hZGRMaXN0ZW5lcjt2YXIgbXVsdGlwbGU9cmVtb3ZlP3RoaXMucmVtb3ZlTGlzdGVuZXJzOnRoaXMuYWRkTGlzdGVuZXJzOy8vIElmIGV2dCBpcyBhbiBvYmplY3QgdGhlbiBwYXNzIGVhY2ggb2YgaXRzIHByb3BlcnRpZXMgdG8gdGhpcyBtZXRob2QKaWYoX3R5cGVvZihldnQpPT09J29iamVjdCcmJiEoZXZ0IGluc3RhbmNlb2YgUmVnRXhwKSl7Zm9yKGkgaW4gZXZ0KXtpZihldnQuaGFzT3duUHJvcGVydHkoaSkmJih2YWx1ZT1ldnRbaV0pKXsvLyBQYXNzIHRoZSBzaW5nbGUgbGlzdGVuZXIgc3RyYWlnaHQgdGhyb3VnaCB0byB0aGUgc2luZ3VsYXIgbWV0aG9kCmlmKHR5cGVvZiB2YWx1ZT09PSdmdW5jdGlvbicpe3NpbmdsZS5jYWxsKHRoaXMsaSx2YWx1ZSk7fWVsc2V7Ly8gT3RoZXJ3aXNlIHBhc3MgYmFjayB0byB0aGUgbXVsdGlwbGUgZnVuY3Rpb24KbXVsdGlwbGUuY2FsbCh0aGlzLGksdmFsdWUpO319fX1lbHNley8vIFNvIGV2dCBtdXN0IGJlIGEgc3RyaW5nCi8vIEFuZCBsaXN0ZW5lcnMgbXVzdCBiZSBhbiBhcnJheSBvZiBsaXN0ZW5lcnMKLy8gTG9vcCBvdmVyIGl0IGFuZCBwYXNzIGVhY2ggb25lIHRvIHRoZSBtdWx0aXBsZSBtZXRob2QKaT1saXN0ZW5lcnMubGVuZ3RoO3doaWxlKGktLSl7c2luZ2xlLmNhbGwodGhpcyxldnQsbGlzdGVuZXJzW2ldKTt9fXJldHVybiB0aGlzO307LyoqCiAgICAgKiBSZW1vdmVzIGFsbCBsaXN0ZW5lcnMgZnJvbSBhIHNwZWNpZmllZCBldmVudC4KICAgICAqIElmIHlvdSBkbyBub3Qgc3BlY2lmeSBhbiBldmVudCB0aGVuIGFsbCBsaXN0ZW5lcnMgd2lsbCBiZSByZW1vdmVkLgogICAgICogVGhhdCBtZWFucyBldmVyeSBldmVudCB3aWxsIGJlIGVtcHRpZWQuCiAgICAgKiBZb3UgY2FuIGFsc28gcGFzcyBhIHJlZ2V4IHRvIHJlbW92ZSBhbGwgZXZlbnRzIHRoYXQgbWF0Y2ggaXQuCiAgICAgKgogICAgICogQHBhcmFtIHtTdHJpbmd8UmVnRXhwfSBbZXZ0XSBPcHRpb25hbCBuYW1lIG9mIHRoZSBldmVudCB0byByZW1vdmUgYWxsIGxpc3RlbmVycyBmb3IuIFdpbGwgcmVtb3ZlIGZyb20gZXZlcnkgZXZlbnQgaWYgbm90IHBhc3NlZC4KICAgICAqIEByZXR1cm4ge09iamVjdH0gQ3VycmVudCBpbnN0YW5jZSBvZiBFdmVudEVtaXR0ZXIgZm9yIGNoYWluaW5nLgogICAgICovcHJvdG8ucmVtb3ZlRXZlbnQ9ZnVuY3Rpb24gcmVtb3ZlRXZlbnQoZXZ0KXt2YXIgdHlwZT1fdHlwZW9mKGV2dCk7dmFyIGV2ZW50cz10aGlzLl9nZXRFdmVudHMoKTt2YXIga2V5Oy8vIFJlbW92ZSBkaWZmZXJlbnQgdGhpbmdzIGRlcGVuZGluZyBvbiB0aGUgc3RhdGUgb2YgZXZ0CmlmKHR5cGU9PT0nc3RyaW5nJyl7Ly8gUmVtb3ZlIGFsbCBsaXN0ZW5lcnMgZm9yIHRoZSBzcGVjaWZpZWQgZXZlbnQKZGVsZXRlIGV2ZW50c1tldnRdO31lbHNlIGlmKGV2dCBpbnN0YW5jZW9mIFJlZ0V4cCl7Ly8gUmVtb3ZlIGFsbCBldmVudHMgbWF0Y2hpbmcgdGhlIHJlZ2V4Lgpmb3Ioa2V5IGluIGV2ZW50cyl7aWYoZXZlbnRzLmhhc093blByb3BlcnR5KGtleSkmJmV2dC50ZXN0KGtleSkpe2RlbGV0ZSBldmVudHNba2V5XTt9fX1lbHNley8vIFJlbW92ZSBhbGwgbGlzdGVuZXJzIGluIGFsbCBldmVudHMKZGVsZXRlIHRoaXMuX2V2ZW50czt9cmV0dXJuIHRoaXM7fTsvKioKICAgICAqIEFsaWFzIG9mIHJlbW92ZUV2ZW50LgogICAgICoKICAgICAqIEFkZGVkIHRvIG1pcnJvciB0aGUgbm9kZSBBUEkuCiAgICAgKi9wcm90by5yZW1vdmVBbGxMaXN0ZW5lcnM9YWxpYXMoJ3JlbW92ZUV2ZW50Jyk7LyoqCiAgICAgKiBFbWl0cyBhbiBldmVudCBvZiB5b3VyIGNob2ljZS4KICAgICAqIFdoZW4gZW1pdHRlZCwgZXZlcnkgbGlzdGVuZXIgYXR0YWNoZWQgdG8gdGhhdCBldmVudCB3aWxsIGJlIGV4ZWN1dGVkLgogICAgICogSWYgeW91IHBhc3MgdGhlIG9wdGlvbmFsIGFyZ3VtZW50IGFycmF5IHRoZW4gdGhvc2UgYXJndW1lbnRzIHdpbGwgYmUgcGFzc2VkIHRvIGV2ZXJ5IGxpc3RlbmVyIHVwb24gZXhlY3V0aW9uLgogICAgICogQmVjYXVzZSBpdCB1c2VzIGBhcHBseWAsIHlvdXIgYXJyYXkgb2YgYXJndW1lbnRzIHdpbGwgYmUgcGFzc2VkIGFzIGlmIHlvdSB3cm90ZSB0aGVtIG91dCBzZXBhcmF0ZWx5LgogICAgICogU28gdGhleSB3aWxsIG5vdCBhcnJpdmUgd2l0aGluIHRoZSBhcnJheSBvbiB0aGUgb3RoZXIgc2lkZSwgdGhleSB3aWxsIGJlIHNlcGFyYXRlLgogICAgICogWW91IGNhbiBhbHNvIHBhc3MgYSByZWd1bGFyIGV4cHJlc3Npb24gdG8gZW1pdCB0byBhbGwgZXZlbnRzIHRoYXQgbWF0Y2ggaXQuCiAgICAgKgogICAgICogQHBhcmFtIHtTdHJpbmd8UmVnRXhwfSBldnQgTmFtZSBvZiB0aGUgZXZlbnQgdG8gZW1pdCBhbmQgZXhlY3V0ZSBsaXN0ZW5lcnMgZm9yLgogICAgICogQHBhcmFtIHtBcnJheX0gW2FyZ3NdIE9wdGlvbmFsIGFycmF5IG9mIGFyZ3VtZW50cyB0byBiZSBwYXNzZWQgdG8gZWFjaCBsaXN0ZW5lci4KICAgICAqIEByZXR1cm4ge09iamVjdH0gQ3VycmVudCBpbnN0YW5jZSBvZiBFdmVudEVtaXR0ZXIgZm9yIGNoYWluaW5nLgogICAgICovcHJvdG8uZW1pdEV2ZW50PWZ1bmN0aW9uIGVtaXRFdmVudChldnQsYXJncyl7dmFyIGxpc3RlbmVyc01hcD10aGlzLmdldExpc3RlbmVyc0FzT2JqZWN0KGV2dCk7dmFyIGxpc3RlbmVyczt2YXIgbGlzdGVuZXI7dmFyIGk7dmFyIGtleTt2YXIgcmVzcG9uc2U7Zm9yKGtleSBpbiBsaXN0ZW5lcnNNYXApe2lmKGxpc3RlbmVyc01hcC5oYXNPd25Qcm9wZXJ0eShrZXkpKXtsaXN0ZW5lcnM9bGlzdGVuZXJzTWFwW2tleV0uc2xpY2UoMCk7aT1saXN0ZW5lcnMubGVuZ3RoO3doaWxlKGktLSl7Ly8gSWYgdGhlIGxpc3RlbmVyIHJldHVybnMgdHJ1ZSB0aGVuIGl0IHNoYWxsIGJlIHJlbW92ZWQgZnJvbSB0aGUgZXZlbnQKLy8gVGhlIGZ1bmN0aW9uIGlzIGV4ZWN1dGVkIGVpdGhlciB3aXRoIGEgYmFzaWMgY2FsbCBvciBhbiBhcHBseSBpZiB0aGVyZSBpcyBhbiBhcmdzIGFycmF5Cmxpc3RlbmVyPWxpc3RlbmVyc1tpXTtpZihsaXN0ZW5lci5vbmNlPT09dHJ1ZSl7dGhpcy5yZW1vdmVMaXN0ZW5lcihldnQsbGlzdGVuZXIubGlzdGVuZXIpO31yZXNwb25zZT1saXN0ZW5lci5saXN0ZW5lci5hcHBseSh0aGlzLGFyZ3N8fFtdKTtpZihyZXNwb25zZT09PXRoaXMuX2dldE9uY2VSZXR1cm5WYWx1ZSgpKXt0aGlzLnJlbW92ZUxpc3RlbmVyKGV2dCxsaXN0ZW5lci5saXN0ZW5lcik7fX19fXJldHVybiB0aGlzO307LyoqCiAgICAgKiBBbGlhcyBvZiBlbWl0RXZlbnQKICAgICAqL3Byb3RvLnRyaWdnZXI9YWxpYXMoJ2VtaXRFdmVudCcpOy8qKgogICAgICogU3VidGx5IGRpZmZlcmVudCBmcm9tIGVtaXRFdmVudCBpbiB0aGF0IGl0IHdpbGwgcGFzcyBpdHMgYXJndW1lbnRzIG9uIHRvIHRoZSBsaXN0ZW5lcnMsIGFzIG9wcG9zZWQgdG8gdGFraW5nIGEgc2luZ2xlIGFycmF5IG9mIGFyZ3VtZW50cyB0byBwYXNzIG9uLgogICAgICogQXMgd2l0aCBlbWl0RXZlbnQsIHlvdSBjYW4gcGFzcyBhIHJlZ2V4IGluIHBsYWNlIG9mIHRoZSBldmVudCBuYW1lIHRvIGVtaXQgdG8gYWxsIGV2ZW50cyB0aGF0IG1hdGNoIGl0LgogICAgICoKICAgICAqIEBwYXJhbSB7U3RyaW5nfFJlZ0V4cH0gZXZ0IE5hbWUgb2YgdGhlIGV2ZW50IHRvIGVtaXQgYW5kIGV4ZWN1dGUgbGlzdGVuZXJzIGZvci4KICAgICAqIEBwYXJhbSB7Li4uKn0gT3B0aW9uYWwgYWRkaXRpb25hbCBhcmd1bWVudHMgdG8gYmUgcGFzc2VkIHRvIGVhY2ggbGlzdGVuZXIuCiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IEN1cnJlbnQgaW5zdGFuY2Ugb2YgRXZlbnRFbWl0dGVyIGZvciBjaGFpbmluZy4KICAgICAqL3Byb3RvLmVtaXQ9ZnVuY3Rpb24gZW1pdChldnQpe3ZhciBhcmdzPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gdGhpcy5lbWl0RXZlbnQoZXZ0LGFyZ3MpO307LyoqCiAgICAgKiBTZXRzIHRoZSBjdXJyZW50IHZhbHVlIHRvIGNoZWNrIGFnYWluc3Qgd2hlbiBleGVjdXRpbmcgbGlzdGVuZXJzLiBJZiBhCiAgICAgKiBsaXN0ZW5lcnMgcmV0dXJuIHZhbHVlIG1hdGNoZXMgdGhlIG9uZSBzZXQgaGVyZSB0aGVuIGl0IHdpbGwgYmUgcmVtb3ZlZAogICAgICogYWZ0ZXIgZXhlY3V0aW9uLiBUaGlzIHZhbHVlIGRlZmF1bHRzIHRvIHRydWUuCiAgICAgKgogICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgbmV3IHZhbHVlIHRvIGNoZWNrIGZvciB3aGVuIGV4ZWN1dGluZyBsaXN0ZW5lcnMuCiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IEN1cnJlbnQgaW5zdGFuY2Ugb2YgRXZlbnRFbWl0dGVyIGZvciBjaGFpbmluZy4KICAgICAqL3Byb3RvLnNldE9uY2VSZXR1cm5WYWx1ZT1mdW5jdGlvbiBzZXRPbmNlUmV0dXJuVmFsdWUodmFsdWUpe3RoaXMuX29uY2VSZXR1cm5WYWx1ZT12YWx1ZTtyZXR1cm4gdGhpczt9Oy8qKgogICAgICogRmV0Y2hlcyB0aGUgY3VycmVudCB2YWx1ZSB0byBjaGVjayBhZ2FpbnN0IHdoZW4gZXhlY3V0aW5nIGxpc3RlbmVycy4gSWYKICAgICAqIHRoZSBsaXN0ZW5lcnMgcmV0dXJuIHZhbHVlIG1hdGNoZXMgdGhpcyBvbmUgdGhlbiBpdCBzaG91bGQgYmUgcmVtb3ZlZAogICAgICogYXV0b21hdGljYWxseS4gSXQgd2lsbCByZXR1cm4gdHJ1ZSBieSBkZWZhdWx0LgogICAgICoKICAgICAqIEByZXR1cm4geyp8Qm9vbGVhbn0gVGhlIGN1cnJlbnQgdmFsdWUgdG8gY2hlY2sgZm9yIG9yIHRoZSBkZWZhdWx0LCB0cnVlLgogICAgICogQGFwaSBwcml2YXRlCiAgICAgKi9wcm90by5fZ2V0T25jZVJldHVyblZhbHVlPWZ1bmN0aW9uIF9nZXRPbmNlUmV0dXJuVmFsdWUoKXtpZih0aGlzLmhhc093blByb3BlcnR5KCdfb25jZVJldHVyblZhbHVlJykpe3JldHVybiB0aGlzLl9vbmNlUmV0dXJuVmFsdWU7fWVsc2V7cmV0dXJuIHRydWU7fX07LyoqCiAgICAgKiBGZXRjaGVzIHRoZSBldmVudHMgb2JqZWN0IGFuZCBjcmVhdGVzIG9uZSBpZiByZXF1aXJlZC4KICAgICAqCiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IFRoZSBldmVudHMgc3RvcmFnZSBvYmplY3QuCiAgICAgKiBAYXBpIHByaXZhdGUKICAgICAqL3Byb3RvLl9nZXRFdmVudHM9ZnVuY3Rpb24gX2dldEV2ZW50cygpe3JldHVybiB0aGlzLl9ldmVudHN8fCh0aGlzLl9ldmVudHM9e30pO307LyoqCiAgICAgKiBSZXZlcnRzIHRoZSBnbG9iYWwge0BsaW5rIEV2ZW50RW1pdHRlcn0gdG8gaXRzIHByZXZpb3VzIHZhbHVlIGFuZCByZXR1cm5zIGEgcmVmZXJlbmNlIHRvIHRoaXMgdmVyc2lvbi4KICAgICAqCiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gTm9uIGNvbmZsaWN0aW5nIEV2ZW50RW1pdHRlciBjbGFzcy4KICAgICAqL0V2ZW50RW1pdHRlci5ub0NvbmZsaWN0PWZ1bmN0aW9uIG5vQ29uZmxpY3QoKXtleHBvcnRzLkV2ZW50RW1pdHRlcj1vcmlnaW5hbEdsb2JhbFZhbHVlO3JldHVybiBFdmVudEVtaXR0ZXI7fTsvLyBFeHBvc2UgdGhlIGNsYXNzIGVpdGhlciB2aWEgQU1ELCBDb21tb25KUyBvciB0aGUgZ2xvYmFsIG9iamVjdAppZih0eXBlb2YgZGVmaW5lPT09J2Z1bmN0aW9uJyYmZGVmaW5lLmFtZCl7ZGVmaW5lKGZ1bmN0aW9uKCl7cmV0dXJuIEV2ZW50RW1pdHRlcjt9KTt9ZWxzZSBpZigodHlwZW9mIG1vZHVsZT09PSJ1bmRlZmluZWQiPyJ1bmRlZmluZWQiOl90eXBlb2YobW9kdWxlKSk9PT0nb2JqZWN0JyYmbW9kdWxlLmV4cG9ydHMpe21vZHVsZS5leHBvcnRzPUV2ZW50RW1pdHRlcjt9ZWxzZXtleHBvcnRzLkV2ZW50RW1pdHRlcj1FdmVudEVtaXR0ZXI7fX0pLmNhbGwodGhpcyk7LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgoKVGhpcyBpcyBhIGJpbmFyeSB0cmVlIGJhc2VkIGJpbiBwYWNraW5nIGFsZ29yaXRobSB0aGF0IGlzIG1vcmUgY29tcGxleCB0aGFuCnRoZSBzaW1wbGUgUGFja2VyIChwYWNrZXIuanMpLiBJbnN0ZWFkIG9mIHN0YXJ0aW5nIG9mZiB3aXRoIGEgZml4ZWQgd2lkdGggYW5kCmhlaWdodCwgaXQgc3RhcnRzIHdpdGggdGhlIHdpZHRoIGFuZCBoZWlnaHQgb2YgdGhlIGZpcnN0IGJsb2NrIHBhc3NlZCBhbmQgdGhlbgpncm93cyBhcyBuZWNlc3NhcnkgdG8gYWNjb21vZGF0ZSBlYWNoIHN1YnNlcXVlbnQgYmxvY2suIEFzIGl0IGdyb3dzIGl0IGF0dGVtcHRzCnRvIG1haW50YWluIGEgcm91Z2hseSBzcXVhcmUgcmF0aW8gYnkgbWFraW5nICdzbWFydCcgY2hvaWNlcyBhYm91dCB3aGV0aGVyIHRvCmdyb3cgcmlnaHQgb3IgZG93bi4KCldoZW4gZ3Jvd2luZywgdGhlIGFsZ29yaXRobSBjYW4gb25seSBncm93IHRvIHRoZSByaWdodCBPUiBkb3duLiBUaGVyZWZvcmUsIGlmCnRoZSBuZXcgYmxvY2sgaXMgQk9USCB3aWRlciBhbmQgdGFsbGVyIHRoYW4gdGhlIGN1cnJlbnQgdGFyZ2V0IHRoZW4gaXQgd2lsbCBiZQpyZWplY3RlZC4gVGhpcyBtYWtlcyBpdCB2ZXJ5IGltcG9ydGFudCB0byBpbml0aWFsaXplIHdpdGggYSBzZW5zaWJsZSBzdGFydGluZwp3aWR0aCBhbmQgaGVpZ2h0LiBJZiB5b3UgYXJlIHByb3ZpZGluZyBzb3J0ZWQgaW5wdXQgKGxhcmdlc3QgZmlyc3QpIHRoZW4gdGhpcwp3aWxsIG5vdCBiZSBhbiBpc3N1ZS4KCkEgcG90ZW50aWFsIHdheSB0byBzb2x2ZSB0aGlzIGxpbWl0YXRpb24gd291bGQgYmUgdG8gYWxsb3cgZ3Jvd3RoIGluIEJPVEgKZGlyZWN0aW9ucyBhdCBvbmNlLCBidXQgdGhpcyByZXF1aXJlcyBtYWludGFpbmluZyBhIG1vcmUgY29tcGxleCB0cmVlCndpdGggMyBjaGlsZHJlbiAoZG93biwgcmlnaHQgYW5kIGNlbnRlcikgYW5kIHRoYXQgY29tcGxleGl0eSBjYW4gYmUgYXZvaWRlZApieSBzaW1wbHkgY2hvc2luZyBhIHNlbnNpYmxlIHN0YXJ0aW5nIGJsb2NrLgoKQmVzdCByZXN1bHRzIG9jY3VyIHdoZW4gdGhlIGlucHV0IGJsb2NrcyBhcmUgc29ydGVkIGJ5IGhlaWdodCwgb3IgZXZlbiBiZXR0ZXIKd2hlbiBzb3J0ZWQgYnkgbWF4KHdpZHRoLGhlaWdodCkuCgpJbnB1dHM6Ci0tLS0tLQoKICBibG9ja3M6IGFycmF5IG9mIGFueSBvYmplY3RzIHRoYXQgaGF2ZSAudyBhbmQgLmggYXR0cmlidXRlcwoKT3V0cHV0czoKLS0tLS0tLQoKICBtYXJrcyBlYWNoIGJsb2NrIHRoYXQgZml0cyB3aXRoIGEgLmZpdCBhdHRyaWJ1dGUgcG9pbnRpbmcgdG8gYQogIG5vZGUgd2l0aCAueCBhbmQgLnkgY29vcmRpbmF0ZXMKCkV4YW1wbGU6Ci0tLS0tLS0KCiAgdmFyIGJsb2NrcyA9IFsKICAgIHsgdzogMTAwLCBoOiAxMDAgfSwKICAgIHsgdzogMTAwLCBoOiAxMDAgfSwKICAgIHsgdzogIDgwLCBoOiAgODAgfSwKICAgIHsgdzogIDgwLCBoOiAgODAgfSwKICAgIGV0YwogICAgZXRjCiAgXTsKCiAgdmFyIHBhY2tlciA9IG5ldyBHcm93aW5nUGFja2VyKCk7CiAgcGFja2VyLmZpdChibG9ja3MpOwoKICBmb3IodmFyIG4gPSAwIDsgbiA8IGJsb2Nrcy5sZW5ndGggOyBuKyspIHsKICAgIHZhciBibG9jayA9IGJsb2Nrc1tuXTsKICAgIGlmIChibG9jay5maXQpIHsKICAgICAgRHJhdyhibG9jay5maXQueCwgYmxvY2suZml0LnksIGJsb2NrLncsIGJsb2NrLmgpOwogICAgfQogIH0KCgoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovR3Jvd2luZ1BhY2tlcj1mdW5jdGlvbiBHcm93aW5nUGFja2VyKCl7fTtHcm93aW5nUGFja2VyLnByb3RvdHlwZT17Zml0OmZ1bmN0aW9uIGZpdChibG9ja3Mpe3ZhciBuLG5vZGUsYmxvY2ssbGVuPWJsb2Nrcy5sZW5ndGg7dmFyIHc9bGVuPjA/YmxvY2tzWzBdLnc6MDt2YXIgaD1sZW4+MD9ibG9ja3NbMF0uaDowO3RoaXMucm9vdD17eDowLHk6MCx3OncsaDpofTtmb3Iobj0wO248bGVuO24rKyl7YmxvY2s9YmxvY2tzW25dO2lmKG5vZGU9dGhpcy5maW5kTm9kZSh0aGlzLnJvb3QsYmxvY2sudyxibG9jay5oKSlibG9jay5maXQ9dGhpcy5zcGxpdE5vZGUobm9kZSxibG9jay53LGJsb2NrLmgpO2Vsc2UgYmxvY2suZml0PXRoaXMuZ3Jvd05vZGUoYmxvY2sudyxibG9jay5oKTt9fSxmaW5kTm9kZTpmdW5jdGlvbiBmaW5kTm9kZShyb290LHcsaCl7aWYocm9vdC51c2VkKXJldHVybiB0aGlzLmZpbmROb2RlKHJvb3QucmlnaHQsdyxoKXx8dGhpcy5maW5kTm9kZShyb290LmRvd24sdyxoKTtlbHNlIGlmKHc8PXJvb3QudyYmaDw9cm9vdC5oKXJldHVybiByb290O2Vsc2UgcmV0dXJuIG51bGw7fSxzcGxpdE5vZGU6ZnVuY3Rpb24gc3BsaXROb2RlKG5vZGUsdyxoKXtub2RlLnVzZWQ9dHJ1ZTtub2RlLmRvd249e3g6bm9kZS54LHk6bm9kZS55K2gsdzpub2RlLncsaDpub2RlLmgtaH07bm9kZS5yaWdodD17eDpub2RlLngrdyx5Om5vZGUueSx3Om5vZGUudy13LGg6aH07cmV0dXJuIG5vZGU7fSxncm93Tm9kZTpmdW5jdGlvbiBncm93Tm9kZSh3LGgpe3ZhciBjYW5Hcm93RG93bj13PD10aGlzLnJvb3Qudzt2YXIgY2FuR3Jvd1JpZ2h0PWg8PXRoaXMucm9vdC5oO3ZhciBzaG91bGRHcm93UmlnaHQ9Y2FuR3Jvd1JpZ2h0JiZ0aGlzLnJvb3QuaD49dGhpcy5yb290LncrdzsvLyBhdHRlbXB0IHRvIGtlZXAgc3F1YXJlLWlzaCBieSBncm93aW5nIHJpZ2h0IHdoZW4gaGVpZ2h0IGlzIG11Y2ggZ3JlYXRlciB0aGFuIHdpZHRoCnZhciBzaG91bGRHcm93RG93bj1jYW5Hcm93RG93biYmdGhpcy5yb290Lnc+PXRoaXMucm9vdC5oK2g7Ly8gYXR0ZW1wdCB0byBrZWVwIHNxdWFyZS1pc2ggYnkgZ3Jvd2luZyBkb3duICB3aGVuIHdpZHRoICBpcyBtdWNoIGdyZWF0ZXIgdGhhbiBoZWlnaHQKaWYoc2hvdWxkR3Jvd1JpZ2h0KXJldHVybiB0aGlzLmdyb3dSaWdodCh3LGgpO2Vsc2UgaWYoc2hvdWxkR3Jvd0Rvd24pcmV0dXJuIHRoaXMuZ3Jvd0Rvd24odyxoKTtlbHNlIGlmKGNhbkdyb3dSaWdodClyZXR1cm4gdGhpcy5ncm93UmlnaHQodyxoKTtlbHNlIGlmKGNhbkdyb3dEb3duKXJldHVybiB0aGlzLmdyb3dEb3duKHcsaCk7ZWxzZSByZXR1cm4gbnVsbDsvLyBuZWVkIHRvIGVuc3VyZSBzZW5zaWJsZSByb290IHN0YXJ0aW5nIHNpemUgdG8gYXZvaWQgdGhpcyBoYXBwZW5pbmcKfSxncm93UmlnaHQ6ZnVuY3Rpb24gZ3Jvd1JpZ2h0KHcsaCl7dGhpcy5yb290PXt1c2VkOnRydWUseDowLHk6MCx3OnRoaXMucm9vdC53K3csaDp0aGlzLnJvb3QuaCxkb3duOnRoaXMucm9vdCxyaWdodDp7eDp0aGlzLnJvb3Qudyx5OjAsdzp3LGg6dGhpcy5yb290Lmh9fTt2YXIgbm9kZT10aGlzLmZpbmROb2RlKHRoaXMucm9vdCx3LGgpO2lmKG5vZGUpcmV0dXJuIHRoaXMuc3BsaXROb2RlKG5vZGUsdyxoKTtlbHNlIHJldHVybiBudWxsO30sZ3Jvd0Rvd246ZnVuY3Rpb24gZ3Jvd0Rvd24odyxoKXt0aGlzLnJvb3Q9e3VzZWQ6dHJ1ZSx4OjAseTowLHc6dGhpcy5yb290LncsaDp0aGlzLnJvb3QuaCtoLGRvd246e3g6MCx5OnRoaXMucm9vdC5oLHc6dGhpcy5yb290LncsaDpofSxyaWdodDp0aGlzLnJvb3R9O3ZhciBub2RlPXRoaXMuZmluZE5vZGUodGhpcy5yb290LHcsaCk7aWYobm9kZSlyZXR1cm4gdGhpcy5zcGxpdE5vZGUobm9kZSx3LGgpO2Vsc2UgcmV0dXJuIG51bGw7fX07LyoqCiAqIGh0dHA6Ly9wYXVsaXJpc2guY29tLzIwMTEvcmVxdWVzdGFuaW1hdGlvbmZyYW1lLWZvci1zbWFydC1hbmltYXRpbmcvCiAqIEFuZCBtb2RpZmllZCB0byB3b3JrIHdpdGggbm9kZS5qcwogKi8oZnVuY3Rpb24oKXt2YXIgcm9vdD10aGlzO3ZhciBsYXN0VGltZT0wO3ZhciB2ZW5kb3JzPVsnbXMnLCdtb3onLCd3ZWJraXQnLCdvJ107Zm9yKHZhciB4PTA7eDx2ZW5kb3JzLmxlbmd0aCYmIXJvb3QucmVxdWVzdEFuaW1hdGlvbkZyYW1lOysreCl7cm9vdC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU9cm9vdFt2ZW5kb3JzW3hdKydSZXF1ZXN0QW5pbWF0aW9uRnJhbWUnXTtyb290LmNhbmNlbEFuaW1hdGlvbkZyYW1lPXJvb3RbdmVuZG9yc1t4XSsnQ2FuY2VsQW5pbWF0aW9uRnJhbWUnXXx8cm9vdFt2ZW5kb3JzW3hdKydDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWUnXTt9aWYoIXJvb3QucmVxdWVzdEFuaW1hdGlvbkZyYW1lKXJvb3QucmVxdWVzdEFuaW1hdGlvbkZyYW1lPXJhZjtpZighcm9vdC5jYW5jZWxBbmltYXRpb25GcmFtZSlyb290LmNhbmNlbEFuaW1hdGlvbkZyYW1lPWZ1bmN0aW9uKGlkKXtjbGVhclRpbWVvdXQoaWQpO307aWYodHlwZW9mIGV4cG9ydHMhPT0ndW5kZWZpbmVkJyl7aWYodHlwZW9mIG1vZHVsZSE9PSd1bmRlZmluZWQnJiZtb2R1bGUuZXhwb3J0cyl7ZXhwb3J0cz1tb2R1bGUuZXhwb3J0cz1yb290LnJlcXVlc3RBbmltYXRpb25GcmFtZTt9ZXhwb3J0cy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU9cm9vdC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU7fWVsc2V7cm9vdC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU9cm9vdC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU7fWlmKHR5cGVvZiBkZWZpbmU9PT0nZnVuY3Rpb24nJiZkZWZpbmUuYW1kKXtkZWZpbmUoJ3JlcXVlc3RBbmltYXRpb25GcmFtZScsW10sZnVuY3Rpb24oKXtyZXR1cm4gcm9vdC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU7fSk7fWZ1bmN0aW9uIHJhZihjYWxsYmFjayxlbGVtZW50KXt2YXIgY3VyclRpbWU9bmV3IERhdGUoKS5nZXRUaW1lKCk7dmFyIHRpbWVUb0NhbGw9TWF0aC5tYXgoMCwxNi0oY3VyclRpbWUtbGFzdFRpbWUpKTt2YXIgaWQ9cm9vdC5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Y2FsbGJhY2soY3VyclRpbWUrdGltZVRvQ2FsbCk7fSx0aW1lVG9DYWxsKTtsYXN0VGltZT1jdXJyVGltZSt0aW1lVG9DYWxsO3JldHVybiBpZDt9fSkoKTsoZnVuY3Rpb24ocHJldmlvdXNCbG90dGVyLF8sVEhSRUUsRGV0ZWN0b3IsRXZlbnRFbWl0dGVyKXt2YXIgcm9vdD10aGlzO3ZhciBCbG90dGVyPXJvb3QuQmxvdHRlcj1wcmV2aW91c0Jsb3R0ZXI9ZnVuY3Rpb24gcHJldmlvdXNCbG90dGVyKG1hdGVyaWFsLG9wdGlvbnMpe2lmKCFEZXRlY3Rvci53ZWJnbCl7QmxvdHRlci5NZXNzYWdpbmcudGhyb3dFcnJvcigiQmxvdHRlciIsZmFsc2UsImRldmljZSBkb2VzIG5vdCBzdXBwb3J0IHdlYmdsIik7fXRoaXMuX3RleHRzPVtdO3RoaXMuX3RleHRFdmVudEJpbmRpbmdzPXt9O3RoaXMuX3Njb3Blcz17fTt0aGlzLl9zY29wZUV2ZW50QmluZGluZ3M9e307dGhpcy5fcmVuZGVyZXI9bmV3IEJsb3R0ZXIuUmVuZGVyZXIoKTt0aGlzLl9zdGFydFRpbWU9MDt0aGlzLl9sYXN0RHJhd1RpbWU9MDt0aGlzLmluaXQuYXBwbHkodGhpcyxhcmd1bWVudHMpO307QmxvdHRlci5wcm90b3R5cGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBfdXBkYXRlTWF0ZXJpYWxVbmlmb3Jtcygpe3ZhciBub3c9RGF0ZS5ub3coKTt0aGlzLl9tYXRlcmlhbC51bmlmb3Jtcy51VGltZURlbHRhLnZhbHVlPShub3ctKHRoaXMuX2xhc3REcmF3VGltZXx8bm93KSkvMTAwMDt0aGlzLl9tYXRlcmlhbC51bmlmb3Jtcy51R2xvYmFsVGltZS52YWx1ZT0obm93LXRoaXMuX3N0YXJ0VGltZSkvMTAwMDt0aGlzLl9sYXN0RHJhd1RpbWU9bm93O31mdW5jdGlvbiBfcmVuZGVyZXJSZW5kZXJlZCgpe191cGRhdGVNYXRlcmlhbFVuaWZvcm1zLmNhbGwodGhpcyk7Xy5lYWNoKHRoaXMuX3Njb3BlcyxfLmJpbmQoZnVuY3Rpb24oc2NvcGUpe2lmKHNjb3BlLnBsYXlpbmcpe3Njb3BlLnJlbmRlcigpO310aGlzLnRyaWdnZXIoInJlbmRlciIpO30sdGhpcykpO31mdW5jdGlvbiBfdXBkYXRlVW5pZm9ybVZhbHVlKHVuaWZvcm1OYW1lKXtpZih0aGlzLm1hcHBpbmdNYXRlcmlhbCl7dmFyIHZhbHVlPXRoaXMuX21hdGVyaWFsLnVuaWZvcm1zW3VuaWZvcm1OYW1lXS52YWx1ZTt0aGlzLm1hcHBpbmdNYXRlcmlhbC51bmlmb3JtSW50ZXJmYWNlW3VuaWZvcm1OYW1lXS52YWx1ZT12YWx1ZTt9fWZ1bmN0aW9uIF91cGRhdGVUZXh0VW5pZm9ybVZhbHVlKHRleHRJZCx1bmlmb3JtTmFtZSl7aWYodGhpcy5tYXBwaW5nTWF0ZXJpYWwpe3ZhciBzY29wZT10aGlzLl9zY29wZXNbdGV4dElkXSx2YWx1ZT1zY29wZS5tYXRlcmlhbC51bmlmb3Jtc1t1bmlmb3JtTmFtZV0udmFsdWU7dGhpcy5tYXBwaW5nTWF0ZXJpYWwudGV4dFVuaWZvcm1JbnRlcmZhY2VbdGV4dElkXVt1bmlmb3JtTmFtZV0udmFsdWU9dmFsdWU7fX1mdW5jdGlvbiBfdXBkYXRlKCl7dmFyIGJ1aWxkTWFwcGluZyxidWlsZE1hcHBpbmdNYXRlcmlhbCxtYXBwaW5nTWF0ZXJpYWwsYnVpbGRTdGFnZXM7YnVpbGRNYXBwaW5nPV8uYmluZChmdW5jdGlvbigpe3JldHVybiBfLmJpbmQoZnVuY3Rpb24obmV4dCl7QmxvdHRlci5NYXBwaW5nQnVpbGRlci5idWlsZCh0aGlzLl90ZXh0cyxfLmJpbmQoZnVuY3Rpb24obmV3TWFwcGluZyl7dGhpcy5fbWFwcGluZz1uZXdNYXBwaW5nO3RoaXMuX21hcHBpbmcucmF0aW89dGhpcy5yYXRpbztuZXh0KCk7fSx0aGlzKSk7fSx0aGlzKTt9LHRoaXMpO2J1aWxkTWFwcGluZ01hdGVyaWFsPV8uYmluZChmdW5jdGlvbigpe3JldHVybiBfLmJpbmQoZnVuY3Rpb24obmV4dCl7QmxvdHRlci5NYXBwaW5nTWF0ZXJpYWxCdWlsZGVyLmJ1aWxkKHRoaXMuX21hcHBpbmcsdGhpcy5fbWF0ZXJpYWwsXy5iaW5kKGZ1bmN0aW9uKG5ld01hcHBpbmdNYXRlcmlhbCl7dGhpcy5tYXBwaW5nTWF0ZXJpYWw9bmV3TWFwcGluZ01hdGVyaWFsO25leHQoKTt9LHRoaXMpKTt9LHRoaXMpO30sdGhpcyk7YnVpbGRTdGFnZXM9W2J1aWxkTWFwcGluZygpLGJ1aWxkTWFwcGluZ01hdGVyaWFsKCldO18oYnVpbGRTdGFnZXMpLnJlZHVjZVJpZ2h0KF8ud3JhcCxfLmJpbmQoZnVuY3Rpb24oKXt0aGlzLl9yZW5kZXJlci5zdG9wKCk7Xy5lYWNoKHRoaXMuX3Njb3BlcyxfLmJpbmQoZnVuY3Rpb24oc2NvcGUsdGV4dElkKXtzY29wZS5tYXBwaW5nTWF0ZXJpYWw9dGhpcy5tYXBwaW5nTWF0ZXJpYWw7c2NvcGUubmVlZHNVcGRhdGU9dHJ1ZTt9LHRoaXMpKTt0aGlzLl9yZW5kZXJlci5tYXRlcmlhbD10aGlzLm1hcHBpbmdNYXRlcmlhbC5zaGFkZXJNYXRlcmlhbDt0aGlzLl9yZW5kZXJlci53aWR0aD10aGlzLl9tYXBwaW5nLndpZHRoO3RoaXMuX3JlbmRlcmVyLmhlaWdodD10aGlzLl9tYXBwaW5nLmhlaWdodDtpZih0aGlzLmF1dG9zdGFydCl7dGhpcy5zdGFydCgpO310aGlzLnRyaWdnZXIodGhpcy5sYXN0VXBkYXRlZD8idXBkYXRlIjoicmVhZHkiKTt0aGlzLmxhc3RVcGRhdGVkPURhdGUubm93KCk7fSx0aGlzKSkoKTt9cmV0dXJue2NvbnN0cnVjdG9yOkJsb3R0ZXIsZ2V0IG5lZWRzVXBkYXRlKCl7fSwvLyBqc2hpbnQKc2V0IG5lZWRzVXBkYXRlKHZhbHVlKXtpZih2YWx1ZT09PXRydWUpe191cGRhdGUuY2FsbCh0aGlzKTt9fSxnZXQgbWF0ZXJpYWwoKXtyZXR1cm4gdGhpcy5fbWF0ZXJpYWw7fSxzZXQgbWF0ZXJpYWwobWF0ZXJpYWwpe3RoaXMuc2V0TWF0ZXJpYWwobWF0ZXJpYWwpO30sZ2V0IHRleHRzKCl7cmV0dXJuIHRoaXMuX3RleHRzO30sc2V0IHRleHRzKHRleHRzKXt0aGlzLnJlbW92ZVRleHRzKHRoaXMuX3RleHRzKTt0aGlzLmFkZFRleHRzKHRleHRzKTt9LGdldCBpbWFnZURhdGEoKXtyZXR1cm4gdGhpcy5fcmVuZGVyZXIuaW1hZ2VEYXRhO30saW5pdDpmdW5jdGlvbiBpbml0KG1hdGVyaWFsLG9wdGlvbnMpe29wdGlvbnM9b3B0aW9uc3x8e307Xy5kZWZhdWx0cyh0aGlzLG9wdGlvbnMse3JhdGlvOkJsb3R0ZXIuQ2FudmFzVXRpbHMucGl4ZWxSYXRpbyxhdXRvYnVpbGQ6dHJ1ZSxhdXRvc3RhcnQ6dHJ1ZSxhdXRvcGxheTp0cnVlfSk7dGhpcy5zZXRNYXRlcmlhbChtYXRlcmlhbCk7dGhpcy5hZGRUZXh0cyhvcHRpb25zLnRleHRzKTt0aGlzLl9yZW5kZXJlci5vbigicmVuZGVyIixfLmJpbmQoX3JlbmRlcmVyUmVuZGVyZWQsdGhpcykpO2lmKHRoaXMuYXV0b2J1aWxkKXt0aGlzLm5lZWRzVXBkYXRlPXRydWU7fWlmKHRoaXMuYXV0b3N0YXJ0KXt0aGlzLnN0YXJ0KCk7fX0sc3RhcnQ6ZnVuY3Rpb24gc3RhcnQoKXt0aGlzLmF1dG9zdGFydD10cnVlO3RoaXMuX3N0YXJ0VGltZT1EYXRlLm5vdygpO3RoaXMuX3JlbmRlcmVyLnN0YXJ0KCk7fSxzdG9wOmZ1bmN0aW9uIHN0b3AoKXt0aGlzLmF1dG9zdGFydD1mYWxzZTt0aGlzLl9yZW5kZXJlci5zdG9wKCk7fSx0ZWFyZG93bjpmdW5jdGlvbiB0ZWFyZG93bigpe3RoaXMuX3JlbmRlcmVyLnRlYXJkb3duKCk7fSxzZXRNYXRlcmlhbDpmdW5jdGlvbiBzZXRNYXRlcmlhbChtYXRlcmlhbCl7QmxvdHRlci5NZXNzYWdpbmcuZW5zdXJlSW5zdGFuY2VPZihtYXRlcmlhbCxCbG90dGVyLk1hdGVyaWFsLCJCbG90dGVyLk1hdGVyaWFsIiwiQmxvdHRlciIsInNldE1hdGVyaWFsIik7dGhpcy5fbWF0ZXJpYWw9bWF0ZXJpYWw7aWYodGhpcy5fbWF0ZXJpYWxFdmVudEJpbmRpbmcpe3RoaXMuX21hdGVyaWFsRXZlbnRCaW5kaW5nLnVuc2V0RXZlbnRDYWxsYmFja3MoKTt9dGhpcy5fbWF0ZXJpYWxFdmVudEJpbmRpbmc9bmV3IEJsb3R0ZXIuTW9kZWxFdmVudEJpbmRpbmcobWF0ZXJpYWwse3VwZGF0ZTpfLmJpbmQoZnVuY3Rpb24oKXtfdXBkYXRlLmNhbGwodGhpcyk7fSx0aGlzKSx1cGRhdGVVbmlmb3JtOl8uYmluZChmdW5jdGlvbih1bmlmb3JtTmFtZSl7X3VwZGF0ZVVuaWZvcm1WYWx1ZS5jYWxsKHRoaXMsdW5pZm9ybU5hbWUpO30sdGhpcyl9KTttYXRlcmlhbC5vbigidXBkYXRlIix0aGlzLl9tYXRlcmlhbEV2ZW50QmluZGluZy5ldmVudENhbGxiYWNrcy51cGRhdGUpO21hdGVyaWFsLm9uKCJ1cGRhdGU6dW5pZm9ybSIsdGhpcy5fbWF0ZXJpYWxFdmVudEJpbmRpbmcuZXZlbnRDYWxsYmFja3MudXBkYXRlVW5pZm9ybSk7fSxhZGRUZXh0OmZ1bmN0aW9uIGFkZFRleHQodGV4dCl7dGhpcy5hZGRUZXh0cyh0ZXh0KTt9LGFkZFRleHRzOmZ1bmN0aW9uIGFkZFRleHRzKHRleHRzKXt2YXIgZmlsdGVyZWRUZXh0cz1CbG90dGVyLlRleHRVdGlscy5maWx0ZXJUZXh0cyh0ZXh0cyksbmV3VGV4dHM9Xy5kaWZmZXJlbmNlKGZpbHRlcmVkVGV4dHMsdGhpcy5fdGV4dHMpO18uZWFjaChuZXdUZXh0cyxfLmJpbmQoZnVuY3Rpb24odGV4dCl7dGhpcy5fdGV4dHMucHVzaCh0ZXh0KTt0aGlzLl90ZXh0RXZlbnRCaW5kaW5nc1t0ZXh0LmlkXT1uZXcgQmxvdHRlci5Nb2RlbEV2ZW50QmluZGluZyh0ZXh0LHt1cGRhdGU6Xy5iaW5kKGZ1bmN0aW9uKCl7X3VwZGF0ZS5jYWxsKHRoaXMpO30sdGhpcyl9KTt0ZXh0Lm9uKCJ1cGRhdGUiLHRoaXMuX3RleHRFdmVudEJpbmRpbmdzW3RleHQuaWRdLmV2ZW50Q2FsbGJhY2tzLnVwZGF0ZSk7dGhpcy5fc2NvcGVzW3RleHQuaWRdPW5ldyBCbG90dGVyLlJlbmRlclNjb3BlKHRleHQsdGhpcyk7dGhpcy5fc2NvcGVFdmVudEJpbmRpbmdzW3RleHQuaWRdPW5ldyBCbG90dGVyLk1vZGVsRXZlbnRCaW5kaW5nKHRoaXMuX3Njb3Blc1t0ZXh0LmlkXSx7dXBkYXRlVW5pZm9ybTpfLmJpbmQoZnVuY3Rpb24odW5pZm9ybU5hbWUpe191cGRhdGVUZXh0VW5pZm9ybVZhbHVlLmNhbGwodGhpcyx0ZXh0LmlkLHVuaWZvcm1OYW1lKTt9LHRoaXMpfSk7dGhpcy5fc2NvcGVzW3RleHQuaWRdLm9uKCJ1cGRhdGU6dW5pZm9ybSIsdGhpcy5fc2NvcGVFdmVudEJpbmRpbmdzW3RleHQuaWRdLmV2ZW50Q2FsbGJhY2tzLnVwZGF0ZVVuaWZvcm0pO30sdGhpcykpO30scmVtb3ZlVGV4dDpmdW5jdGlvbiByZW1vdmVUZXh0KHRleHQpe3RoaXMucmVtb3ZlVGV4dHModGV4dCk7fSxyZW1vdmVUZXh0czpmdW5jdGlvbiByZW1vdmVUZXh0cyh0ZXh0cyl7dmFyIGZpbHRlcmVkVGV4dHM9QmxvdHRlci5UZXh0VXRpbHMuZmlsdGVyVGV4dHModGV4dHMpLHJlbW92ZWRUZXh0cz1fLmludGVyc2VjdGlvbih0aGlzLl90ZXh0cyxmaWx0ZXJlZFRleHRzKTtfLmVhY2gocmVtb3ZlZFRleHRzLF8uYmluZChmdW5jdGlvbih0ZXh0KXt0aGlzLl90ZXh0cz1fLndpdGhvdXQodGhpcy5fdGV4dHMsdGV4dCk7dGhpcy5fdGV4dEV2ZW50QmluZGluZ3NbdGV4dC5pZF0udW5zZXRFdmVudENhbGxiYWNrcygpO3RoaXMuX3Njb3BlRXZlbnRCaW5kaW5nc1t0ZXh0LmlkXS51bnNldEV2ZW50Q2FsbGJhY2tzKCk7ZGVsZXRlIHRoaXMuX3RleHRFdmVudEJpbmRpbmdzW3RleHQuaWRdO2RlbGV0ZSB0aGlzLl9zY29wZUV2ZW50QmluZGluZ3NbdGV4dC5pZF07ZGVsZXRlIHRoaXMuX3Njb3Blc1t0ZXh0LmlkXTt9LHRoaXMpKTt9LGZvclRleHQ6ZnVuY3Rpb24gZm9yVGV4dCh0ZXh0KXtCbG90dGVyLk1lc3NhZ2luZy5lbnN1cmVJbnN0YW5jZU9mKHRleHQsQmxvdHRlci5UZXh0LCJCbG90dGVyLlRleHQiLCJCbG90dGVyIiwiZm9yVGV4dCIpO2lmKCF0aGlzLl9zY29wZXNbdGV4dC5pZF0pe0Jsb3R0ZXIuTWVzc2FnaW5nLmxvZ0Vycm9yKCJCbG90dGVyIiwiZm9yVGV4dCIsIkJsb3R0ZXIuVGV4dCBvYmplY3Qgbm90IGZvdW5kIGluIGJsb3R0ZXIiKTtyZXR1cm47fXJldHVybiB0aGlzLl9zY29wZXNbdGV4dC5pZF07fSxib3VuZHNGb3JUZXh0OmZ1bmN0aW9uIGJvdW5kc0ZvclRleHQodGV4dCl7QmxvdHRlci5NZXNzYWdpbmcuZW5zdXJlSW5zdGFuY2VPZih0ZXh0LEJsb3R0ZXIuVGV4dCwiQmxvdHRlci5UZXh0IiwiQmxvdHRlciIsImJvdW5kc0ZvclRleHQiKTtpZighdGhpcy5fc2NvcGVzW3RleHQuaWRdKXtCbG90dGVyLk1lc3NhZ2luZy5sb2dFcnJvcigiQmxvdHRlciIsImJvdW5kc0ZvclRleHQiLCJCbG90dGVyLlRleHQgb2JqZWN0IG5vdCBmb3VuZCBpbiBibG90dGVyIik7cmV0dXJuO31pZih0aGlzLl9tYXBwaW5nKXtyZXR1cm4gdGhpcy5tYXBwaW5nTWF0ZXJpYWwuYm91bmRzRm9yVGV4dCh0ZXh0KTt9fX07fSgpO18uZXh0ZW5kKEJsb3R0ZXIucHJvdG90eXBlLEV2ZW50RW1pdHRlci5wcm90b3R5cGUpO0Jsb3R0ZXIuVmVyc2lvbj0idjAuMS4wIjsvLyBVc2UgYSBzaW5nbGUgd2ViZ2wgY29udGV4dCByZWdhcmRsZXNzIG9mIG51bWJlciBvZiBibG90dGVyIGluc3RhbmNlcy4KQmxvdHRlci53ZWJnbFJlbmRlcmVyPUJsb3R0ZXIud2ViZ2xSZW5kZXJlcnx8bmV3IFRIUkVFLldlYkdMUmVuZGVyZXIoe2FudGlhbGlhczp0cnVlLGFscGhhOnRydWUscHJlbXVsdGlwbGllZEFscGhhOmZhbHNlfSk7QmxvdHRlci5Bc3NldHM9QmxvdHRlci5Bc3NldHN8fHt9O0Jsb3R0ZXIuQXNzZXRzLlNoYWRlcnM9QmxvdHRlci5Bc3NldHMuU2hhZGVyc3x8e307fSkodGhpcy5CbG90dGVyLHRoaXMuXyx0aGlzLlRIUkVFLHRoaXMuRGV0ZWN0b3IsdGhpcy5FdmVudEVtaXR0ZXIpOyhmdW5jdGlvbihCbG90dGVyKXtCbG90dGVyLk1hdGg9e2dlbmVyYXRlVVVJRDpmdW5jdGlvbigpey8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTA1MDM0L2hvdy10by1jcmVhdGUtYS1ndWlkLXV1aWQtaW4tamF2YXNjcmlwdC8yMTk2MzEzNiMyMTk2MzEzNgp2YXIgbHV0PVtdO2Zvcih2YXIgaT0wO2k8MjU2O2krKyl7bHV0W2ldPShpPDE2PycwJzonJykraS50b1N0cmluZygxNikudG9VcHBlckNhc2UoKTt9cmV0dXJuIGZ1bmN0aW9uIGdlbmVyYXRlVVVJRCgpe3ZhciBkMD1NYXRoLnJhbmRvbSgpKjB4ZmZmZmZmZmZ8MDt2YXIgZDE9TWF0aC5yYW5kb20oKSoweGZmZmZmZmZmfDA7dmFyIGQyPU1hdGgucmFuZG9tKCkqMHhmZmZmZmZmZnwwO3ZhciBkMz1NYXRoLnJhbmRvbSgpKjB4ZmZmZmZmZmZ8MDtyZXR1cm4gbHV0W2QwJjB4ZmZdK2x1dFtkMD4+OCYweGZmXStsdXRbZDA+PjE2JjB4ZmZdK2x1dFtkMD4+MjQmMHhmZl0rJy0nK2x1dFtkMSYweGZmXStsdXRbZDE+PjgmMHhmZl0rJy0nK2x1dFtkMT4+MTYmMHgwZnwweDQwXStsdXRbZDE+PjI0JjB4ZmZdKyctJytsdXRbZDImMHgzZnwweDgwXStsdXRbZDI+PjgmMHhmZl0rJy0nK2x1dFtkMj4+MTYmMHhmZl0rbHV0W2QyPj4yNCYweGZmXStsdXRbZDMmMHhmZl0rbHV0W2QzPj44JjB4ZmZdK2x1dFtkMz4+MTYmMHhmZl0rbHV0W2QzPj4yNCYweGZmXTt9O30oKX07fSkodGhpcy5CbG90dGVyKTsoZnVuY3Rpb24oQmxvdHRlcil7QmxvdHRlci5NZXNzYWdpbmc9ZnVuY3Rpb24oKXtmdW5jdGlvbiBfZm9ybWF0dGVkTWVzc2FnZShkb21haW4sbWV0aG9kLG1lc3NhZ2Upe3JldHVybiBkb21haW4rKG1ldGhvZD8iIyIrbWV0aG9kOiIiKSsiOiAiK21lc3NhZ2U7fXJldHVybntlbnN1cmVJbnN0YW5jZU9mOmZ1bmN0aW9uIGVuc3VyZUluc3RhbmNlT2Yob2JqZWN0LGNvbnN0cnVjdG9yLGNvbnN0cnVjdG9yU3RyLGRvbWFpbixtZXRob2Qpe2lmKCEob2JqZWN0IGluc3RhbmNlb2YgY29uc3RydWN0b3IpKXt0aGlzLmxvZ0Vycm9yKGRvbWFpbixtZXRob2QsImFyZ3VtZW50IG11c3QgYmUgaW5zdGFuY2VvZiAiK2NvbnN0cnVjdG9yU3RyKTtyZXR1cm47fX0sbG9nRXJyb3I6ZnVuY3Rpb24gbG9nRXJyb3IoZG9tYWluLG1ldGhvZCxtZXNzYWdlKXt2YXIgZm9ybWF0dGVkPV9mb3JtYXR0ZWRNZXNzYWdlKGRvbWFpbixtZXRob2QsbWVzc2FnZSk7Y29uc29sZS5lcnJvcihmb3JtYXR0ZWQpO30sbG9nV2FybmluZzpmdW5jdGlvbiBsb2dXYXJuaW5nKGRvbWFpbixtZXRob2QsbWVzc2FnZSl7dmFyIGZvcm1hdHRlZD1fZm9ybWF0dGVkTWVzc2FnZShkb21haW4sbWV0aG9kLG1lc3NhZ2UpO2NvbnNvbGUud2Fybihmb3JtYXR0ZWQpO30sdGhyb3dFcnJvcjpmdW5jdGlvbiB0aHJvd0Vycm9yKGRvbWFpbixtZXRob2QsbWVzc2FnZSl7dmFyIGZvcm1hdHRlZD1fZm9ybWF0dGVkTWVzc2FnZShkb21haW4sbWV0aG9kLG1lc3NhZ2UpO3Rocm93IGZvcm1hdHRlZDt9fTt9KCk7fSkodGhpcy5CbG90dGVyKTsoZnVuY3Rpb24oQmxvdHRlcixfKXtCbG90dGVyLl9leHRlbmRXaXRoR2V0dGVyc1NldHRlcnM9ZnVuY3Rpb24ob2JqKXtfLmVhY2goQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpLGZ1bmN0aW9uKHNvdXJjZSl7aWYoc291cmNlKXtmb3IodmFyIHByb3AgaW4gc291cmNlKXtpZihvYmpbcHJvcF0mJk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLHByb3ApJiZPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaixwcm9wKS5zZXQpe09iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLHByb3ApLnNldChzb3VyY2VbcHJvcF0pO31lbHNle29ialtwcm9wXT1zb3VyY2VbcHJvcF07fX19fSk7cmV0dXJuIG9iajt9O30pKHRoaXMuQmxvdHRlcix0aGlzLl8pOyhmdW5jdGlvbihCbG90dGVyKXtCbG90dGVyLlZlbmRvclByZWZpeGVzPVsibXMiLCJtb3oiLCJ3ZWJraXQiLCJvIl07fSkodGhpcy5CbG90dGVyKTsoZnVuY3Rpb24oQmxvdHRlcixfKXtCbG90dGVyLk1vZGVsRXZlbnRCaW5kaW5nPWZ1bmN0aW9uKG1vZGVsLGV2ZW50Q2FsbGJhY2tzKXt0aGlzLm1vZGVsPW1vZGVsO3RoaXMuZXZlbnRDYWxsYmFja3M9ZXZlbnRDYWxsYmFja3N8fHt9O307QmxvdHRlci5Nb2RlbEV2ZW50QmluZGluZy5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOkJsb3R0ZXIuTW9kZWxFdmVudEJpbmRpbmcsdW5zZXRFdmVudENhbGxiYWNrczpmdW5jdGlvbiB1bnNldEV2ZW50Q2FsbGJhY2tzKCl7Xy5lYWNoKHRoaXMuZXZlbnRDYWxsYmFja3MsXy5iaW5kKGZ1bmN0aW9uKGNhbGxiYWNrLGV2ZW50S2V5KXt0aGlzLm1vZGVsLm9mZihldmVudEtleSxjYWxsYmFjayk7fSx0aGlzKSk7fX07fSkodGhpcy5CbG90dGVyLHRoaXMuXyk7KGZ1bmN0aW9uKEJsb3R0ZXIpe0Jsb3R0ZXIuQ2FudmFzVXRpbHM9ey8vIENyZWF0ZXMgYW5kIHJldHVybnMgYSBoaWdoIGEgY2FudmFzCmNhbnZhczpmdW5jdGlvbiBjYW52YXModyxoLG9wdGlvbnMpe29wdGlvbnM9b3B0aW9uc3x8e307dmFyIGNhbnZhcz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKTtjYW52YXMuY2xhc3NOYW1lPW9wdGlvbnMuY2xhc3M7Y2FudmFzLmlubmVySFRNTD1vcHRpb25zLmh0bWw7Y2FudmFzLndpZHRoPXc7Y2FudmFzLmhlaWdodD1oO3JldHVybiBjYW52YXM7fSwvLyBDcmVhdGVzIGFuZCByZXR1cm5zIGEgaGlnaCBEUEkgY2FudmFzIGJhc2VkIG9uIGEgZGV2aWNlIHNwZWNpZmljIHBpeGVsIHJhdGlvCmhpRHBpQ2FudmFzOmZ1bmN0aW9uIGhpRHBpQ2FudmFzKHcsaCxyYXRpbyxvcHRpb25zKXtyYXRpbz1yYXRpb3x8dGhpcy5waXhlbFJhdGlvO29wdGlvbnM9b3B0aW9uc3x8e307dmFyIGNhbnZhcz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKTtjYW52YXMuY2xhc3NOYW1lPW9wdGlvbnMuY2xhc3M7Y2FudmFzLmlubmVySFRNTD1vcHRpb25zLmh0bWw7dGhpcy51cGRhdGVDYW52YXNTaXplKGNhbnZhcyx3LGgscmF0aW8pO3JldHVybiBjYW52YXM7fSx1cGRhdGVDYW52YXNTaXplOmZ1bmN0aW9uIHVwZGF0ZUNhbnZhc1NpemUoY2FudmFzLHcsaCxyYXRpbyl7cmF0aW89cmF0aW98fDE7Y2FudmFzLndpZHRoPXcqcmF0aW87Y2FudmFzLmhlaWdodD1oKnJhdGlvO2NhbnZhcy5zdHlsZS53aWR0aD13KyJweCI7Y2FudmFzLnN0eWxlLmhlaWdodD1oKyJweCI7Y2FudmFzLmdldENvbnRleHQoIjJkIikuc2V0VHJhbnNmb3JtKHJhdGlvLDAsMCxyYXRpbywwLDApO30sLy8gUmV0dXJucyB0aGUgZGV2aWNlJ3MgcGl4ZWwgcmF0aW8KcGl4ZWxSYXRpbzpmdW5jdGlvbigpe3ZhciBjdHg9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIikuZ2V0Q29udGV4dCgiMmQiKSxkcHI9d2luZG93LmRldmljZVBpeGVsUmF0aW98fDEsYnNyPWN0eC5iYWNraW5nU3RvcmVQaXhlbFJhdGlvO2Zvcih2YXIgeD0wO3g8QmxvdHRlci5WZW5kb3JQcmVmaXhlcy5sZW5ndGgmJiFic3I7Kyt4KXtic3I9Y3R4W0Jsb3R0ZXIuVmVuZG9yUHJlZml4ZXNbeF0rIkJhY2tpbmdTdG9yZVBpeGVsUmF0aW8iXTt9YnNyPWJzcnx8MTtyZXR1cm4gZHByL2Jzcjt9KCksLy8gUmV0dXJucyB0aGUgbW91c2UgcG9zaXRpb24gd2l0aGluIGEgY2FudmFzCm1vdXNlUG9zaXRpb246ZnVuY3Rpb24gbW91c2VQb3NpdGlvbihjYW52YXMsZXZlbnQpe3ZhciByZWN0PWNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtyZXR1cm57eDpldmVudC5jbGllbnRYLXJlY3QubGVmdCx5OmV2ZW50LmNsaWVudFktcmVjdC50b3B9O30sLy8gUmV0dXJucyB0aGUgbW91c2UgcG9zaXRpb24gd2l0aGluIGEgY2FudmFzLCBub3JtYWxpemVkIHRvIGEgdmFsdWUgYmV0d2VlbiAwIGFuZCAxCm5vcm1hbGl6ZWRNb3VzZVBvc2l0aW9uOmZ1bmN0aW9uIG5vcm1hbGl6ZWRNb3VzZVBvc2l0aW9uKGNhbnZhcyxldmVudCl7dmFyIHJlY3Q9Y2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLHBvc2l0aW9uPXRoaXMubW91c2VQb3NpdGlvbihjYW52YXMsZXZlbnQpO3JldHVybnt4OnBvc2l0aW9uLngvcmVjdC53aWR0aCx5OnBvc2l0aW9uLnkvcmVjdC5oZWlnaHR9O319O30pKHRoaXMuQmxvdHRlcik7KGZ1bmN0aW9uKEJsb3R0ZXIsXyl7QmxvdHRlci5Qcm9wZXJ0eURlZmF1bHRzPXtmYW1pbHk6J3NhbnMtc2VyaWYnLHNpemU6MTIsbGVhZGluZzoxLjUsZmlsbDonIzAwMCcsc3R5bGU6J25vcm1hbCcsd2VpZ2h0OjQwMCxwYWRkaW5nOjAscGFkZGluZ1RvcDowLHBhZGRpbmdSaWdodDowLHBhZGRpbmdCb3R0b206MCxwYWRkaW5nTGVmdDowfTtCbG90dGVyLlRleHRVdGlscz17UHJvcGVydGllczpfLmtleXMoQmxvdHRlci5Qcm9wZXJ0eURlZmF1bHRzKSwvLyBSZWNpZXZlcyBwcm9wZXJ0eSB2YWx1ZXMgKG9wdGlvbmFsKSBhbmQgZmlsbHMgaW4gYW55IG1pc3NpbmcgdmFsdWVzIHdpdGggZGVmYXVsdCB2YWx1ZXMKZW5zdXJlUHJvcGVydHlWYWx1ZXM6ZnVuY3Rpb24gZW5zdXJlUHJvcGVydHlWYWx1ZXMocHJvcGVydGllcyl7cHJvcGVydGllcz1fLmRlZmF1bHRzKHByb3BlcnRpZXN8fHt9LEJsb3R0ZXIuUHJvcGVydHlEZWZhdWx0cyk7cmV0dXJuIHByb3BlcnRpZXM7fSxmaWx0ZXJUZXh0czpmdW5jdGlvbiBmaWx0ZXJUZXh0cyh0ZXh0cyl7aWYodGV4dHMgaW5zdGFuY2VvZiBCbG90dGVyLlRleHQpe3RleHRzPVt0ZXh0c107fWVsc2V7dGV4dHM9Xy50b0FycmF5KHRleHRzKTt9cmV0dXJuIF8uZmlsdGVyKHRleHRzLF8uYmluZChmdW5jdGlvbih0ZXh0KXt2YXIgaXNUZXh0PXRleHQgaW5zdGFuY2VvZiBCbG90dGVyLlRleHQ7aWYoIWlzVGV4dCl7QmxvdHRlci5NZXNzYWdpbmcubG9nV2FybmluZygiQmxvdHRlci5UZXh0VXRpbHMiLCJmaWx0ZXJUZXh0cyIsIm9iamVjdCBtdXN0IGJlIGluc3RhbmNlIG9mIEJsb3R0ZXIuVGV4dCIpO31yZXR1cm4gaXNUZXh0O30sdGhpcykpO30sLy8gRm9ybWF0IHBhZGRpbmcgdmFsdWVzIGZyb20gc3R5bGUgcHJvcGVydGllcyBmb3IgcGFzc2luZyB0byBkb2N1bWVudApzdHJpbmdpZmllZFBhZGRpbmc6ZnVuY3Rpb24gc3RyaW5naWZpZWRQYWRkaW5nKHByb3BlcnRpZXMpe3ZhciBfcHJvcGVydGllcz1wcm9wZXJ0aWVzfHx0aGlzLmVuc3VyZVByb3BlcnR5VmFsdWVzKCkscFRvcD1wcm9wZXJ0aWVzLnBhZGRpbmdUb3B8fF9wcm9wZXJ0aWVzLnBhZGRpbmcscFJpZ2h0PV9wcm9wZXJ0aWVzLnBhZGRpbmdSaWdodHx8X3Byb3BlcnRpZXMucGFkZGluZyxwQm90dG9tPV9wcm9wZXJ0aWVzLnBhZGRpbmdCb3R0b218fF9wcm9wZXJ0aWVzLnBhZGRpbmcscExlZnQ9X3Byb3BlcnRpZXMucGFkZGluZ0xlZnR8fF9wcm9wZXJ0aWVzLnBhZGRpbmc7cmV0dXJuIHBUb3ArInB4ICIrcFJpZ2h0KyJweCAiK3BCb3R0b20rInB4ICIrcExlZnQrInB4Ijt9LC8vIERldGVybWluZXMgc2l6ZSBvZiB0ZXh0IHdpdGhpbiB0aGUgZG9jdW1lbnQgZ2l2ZW4gY2VydGFpbiBzdHlsZSBwcm9wZXJ0aWVzCnNpemVGb3JUZXh0OmZ1bmN0aW9uIHNpemVGb3JUZXh0KHRleHRWYWx1ZSxwcm9wZXJ0aWVzKXsvLyBVc2luZyBhIDxzcGFuPiBoZXJlIG1heSBub3QgYmUgdGhlIGJlc3QgYXBwcm9hY2guIEluIHRoZW9yeSBhIHVzZXIncyBzdHlsZXNoZWV0Ci8vICAgY291bGQgb3ZlcnJpZGUgdGhlIG5lY2Vzc2FyeSBzdHlsaW5nIGZvciBkZXRlcm1pbmluZyBzaXplcyBiZWxvdy4gV2l0aCBncm93aW5nCi8vICAgc3VwcG9ydCBmb3IgY3VzdG9tIHRhZ3MgaW4gaHRtbCwgd2UgbWF5IGNvbnNpZGVyIHVzaW5nIHRoZW0gaWYgdGhpcyByYWlzZXMgcHJvYmxlbXMuCnZhciBlbD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIiksc2l6ZTtwcm9wZXJ0aWVzPXRoaXMuZW5zdXJlUHJvcGVydHlWYWx1ZXMocHJvcGVydGllcyk7ZWwuaW5uZXJIVE1MPXRleHRWYWx1ZTtlbC5zdHlsZS5kaXNwbGF5PSJpbmxpbmUtYmxvY2siO2VsLnN0eWxlLmZvbnRGYW1pbHk9cHJvcGVydGllcy5mYW1pbHk7ZWwuc3R5bGUuZm9udFNpemU9cHJvcGVydGllcy5zaXplKyJweCI7ZWwuc3R5bGUuZm9udFdlaWdodD1wcm9wZXJ0aWVzLndlaWdodDtlbC5zdHlsZS5mb250U3R5bGU9cHJvcGVydGllcy5zdHlsZTtlbC5zdHlsZS5saW5lSGVpZ2h0PXByb3BlcnRpZXMubGVhZGluZztlbC5zdHlsZS5tYXhXaWR0aD0ibm9uZSI7ZWwuc3R5bGUucGFkZGluZz10aGlzLnN0cmluZ2lmaWVkUGFkZGluZyhwcm9wZXJ0aWVzKTtlbC5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiO2VsLnN0eWxlLndpZHRoPSJhdXRvIjtlbC5zdHlsZS52aXNpYmlsaXR5PSJoaWRkZW4iO2RvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZWwpO3NpemU9e3c6ZWwub2Zmc2V0V2lkdGgsaDplbC5vZmZzZXRIZWlnaHR9O2RvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZWwpO3JldHVybiBzaXplO319O30pKHRoaXMuQmxvdHRlcix0aGlzLl8pOyhmdW5jdGlvbihCbG90dGVyLF8pe0Jsb3R0ZXIuVW5pZm9ybVV0aWxzPXsvLyBVbmlmb3JtIHR5cGUgdmFsdWVzIHdlIGFjY2VwdCBmb3IgcHVibGljIHVuaWZvcm1zClVuaWZvcm1UeXBlczpbIjFmIiwiMmYiLCIzZiIsIjRmIl0sLy8gRGVmYXVsdCB1bmlmb3JtcyAocmVxdWlyZWQpIHByb3ZpZGVkIHRvIGFsbCBtYXRlcmlhbHMKZGVmYXVsdFVuaWZvcm1zOnt1UmVzb2x1dGlvbjp7dHlwZToiMmYiLHZhbHVlOlswLjAsMC4wXX0sLy8gUmVzb2x1dGlvbiBvZiBpbmRpdmlkdWFsIHRleHQgYXJlYXMgd2l0aGluIG1hcHBpbmcgdGV4dHVyZQp1R2xvYmFsVGltZTp7dHlwZToiMWYiLHZhbHVlOjAuMH0sLy8gVGhlIGdsb2JhbCB0aW1lIGluIHNlY29uZHMKdVRpbWVEZWx0YTp7dHlwZToiMWYiLHZhbHVlOjAuMH0sLy8gVGhlIHJlbmRlciB0aW1lIGluIHNlY29uZHMKdUJsZW5kQ29sb3I6e3R5cGU6IjRmIix2YWx1ZTpbMS4wLDEuMCwxLjAsMS4wXX0sdVBpeGVsUmF0aW86e3R5cGU6IjFmIix2YWx1ZTpCbG90dGVyLkNhbnZhc1V0aWxzLnBpeGVsUmF0aW99Ly8gVGhlIHBpeGVsIHJhdGlvIG9mIHRoZSB1c2VyJ3MgZGV2aWNlCn0sLy8gRGV0ZXJtaW5lIGlmIHZhbHVlIGlzIHZhbGlkIGZvciBwdWJsaWMgdW5pZm9ybSB0eXBlCnZhbGlkVmFsdWVGb3JVbmlmb3JtVHlwZTpmdW5jdGlvbiB2YWxpZFZhbHVlRm9yVW5pZm9ybVR5cGUodHlwZSx2YWx1ZSl7dmFyIHZhbGlkPWZhbHNlLGlzVmFsaWQ9ZnVuY3Rpb24gaXNWYWxpZChlbGVtZW50KXtyZXR1cm4haXNOYU4oZWxlbWVudCk7fTtzd2l0Y2godHlwZSl7Y2FzZSIxZiI6dmFsaWQ9IWlzTmFOKHZhbHVlKSYmW3ZhbHVlXS5ldmVyeShpc1ZhbGlkKTticmVhaztjYXNlIjJmIjp2YWxpZD1fLmlzQXJyYXkodmFsdWUpJiZ2YWx1ZS5sZW5ndGg9PTImJnZhbHVlLmV2ZXJ5KGlzVmFsaWQpO2JyZWFrO2Nhc2UiM2YiOnZhbGlkPV8uaXNBcnJheSh2YWx1ZSkmJnZhbHVlLmxlbmd0aD09MyYmdmFsdWUuZXZlcnkoaXNWYWxpZCk7YnJlYWs7Y2FzZSI0ZiI6dmFsaWQ9Xy5pc0FycmF5KHZhbHVlKSYmdmFsdWUubGVuZ3RoPT00JiZ2YWx1ZS5ldmVyeShpc1ZhbGlkKTticmVhaztkZWZhdWx0OmJyZWFrO31yZXR1cm4gdmFsaWQ7fSxnbHNsRGF0YVR5cGVGb3JVbmlmb3JtVHlwZTpmdW5jdGlvbiBnbHNsRGF0YVR5cGVGb3JVbmlmb3JtVHlwZSh0eXBlKXt2YXIgZGF0YVR5cGU7c3dpdGNoKHR5cGUpe2Nhc2UiMWYiOmRhdGFUeXBlPSJmbG9hdCI7YnJlYWs7Y2FzZSIyZiI6ZGF0YVR5cGU9InZlYzIiO2JyZWFrO2Nhc2UiM2YiOmRhdGFUeXBlPSJ2ZWMzIjticmVhaztjYXNlIjRmIjpkYXRhVHlwZT0idmVjNCI7YnJlYWs7ZGVmYXVsdDpicmVhazt9cmV0dXJuIGRhdGFUeXBlO30sZnVsbFN3aXp6bGVTdHJpbmdGb3JVbmlmb3JtVHlwZTpmdW5jdGlvbiBmdWxsU3dpenpsZVN0cmluZ0ZvclVuaWZvcm1UeXBlKHR5cGUpe3ZhciBzd2l6emxlU3RyaW5nO3N3aXRjaCh0eXBlKXtjYXNlIjFmIjpzd2l6emxlU3RyaW5nPSJ4IjticmVhaztjYXNlIjJmIjpzd2l6emxlU3RyaW5nPSJ4eSI7YnJlYWs7Y2FzZSIzZiI6c3dpenpsZVN0cmluZz0ieHl6IjticmVhaztjYXNlIjRmIjpzd2l6emxlU3RyaW5nPSJ4eXp3IjticmVhaztkZWZhdWx0OmJyZWFrO31yZXR1cm4gc3dpenpsZVN0cmluZzt9LC8vIEdpdmVuIGFuIG9iamVjdCBjb250YWluaW5nIHVuaWZvcm0gZGVzY3JpcHRpb25zLCByZXR1cm4gYW4gb2JqZWN0IGNvbnRhaW5pbmcgb25seSB2YWxpZCB1bmlmb3JtcyBiYXNlZCBvbiB0aGUgdW5pZm9ybSdzIHR5cGUgYW5kIHZhbHVlCmV4dHJhY3RWYWxpZFVuaWZvcm1zOmZ1bmN0aW9uIGV4dHJhY3RWYWxpZFVuaWZvcm1zKHVuaWZvcm1zKXt1bmlmb3Jtcz11bmlmb3Jtc3x8e307cmV0dXJuIF8ucmVkdWNlKHVuaWZvcm1zLGZ1bmN0aW9uKG1lbW8sdW5pZm9ybURlc2NyaXB0aW9uLHVuaWZvcm1OYW1lKXtpZihCbG90dGVyLlVuaWZvcm1VdGlscy5Vbmlmb3JtVHlwZXMuaW5kZXhPZih1bmlmb3JtRGVzY3JpcHRpb24udHlwZSk9PS0xKXtCbG90dGVyLk1lc3NhZ2luZy5sb2dFcnJvcigiQmxvdHRlci5Vbmlmb3JtVXRpbHMiLCJleHRyYWN0VmFsaWRVbmlmb3JtcyIsInVuaWZvcm1zIG11c3QgYmUgb25lIG9mIHR5cGU6ICIrQmxvdHRlci5Vbmlmb3JtVXRpbHMuVW5pZm9ybVR5cGVzLmpvaW4oIiwgIikpO3JldHVybiBtZW1vO31pZighQmxvdHRlci5Vbmlmb3JtVXRpbHMudmFsaWRWYWx1ZUZvclVuaWZvcm1UeXBlKHVuaWZvcm1EZXNjcmlwdGlvbi50eXBlLHVuaWZvcm1EZXNjcmlwdGlvbi52YWx1ZSkpe0Jsb3R0ZXIuTWVzc2FnaW5nLmxvZ0Vycm9yKCJCbG90dGVyLlVuaWZvcm1VdGlscyIsImV4dHJhY3RWYWxpZFVuaWZvcm1zIiwidW5pZm9ybSB2YWx1ZSBmb3IgIit1bmlmb3JtTmFtZSsiIGlzIGluY29ycmVjdCBmb3IgdHlwZTogIit1bmlmb3JtRGVzY3JpcHRpb24udHlwZSk7cmV0dXJuIG1lbW87fW1lbW9bdW5pZm9ybU5hbWVdPV8ucGljayh1bmlmb3JtRGVzY3JpcHRpb24sInR5cGUiLCJ2YWx1ZSIpO3JldHVybiBtZW1vO30se30pO30sZW5zdXJlSGFzUmVxdWlyZWREZWZhdWx0VW5pZm9ybXM6ZnVuY3Rpb24gZW5zdXJlSGFzUmVxdWlyZWREZWZhdWx0VW5pZm9ybXModW5pZm9ybXMsZG9tYWluLG1ldGhvZCl7aWYoIUJsb3R0ZXIuVW5pZm9ybVV0aWxzLmhhc1JlcXVpcmVkRGVmYXVsdFVuaWZvcm1zKHVuaWZvcm1zKSl7dGhpcy5sb2dFcnJvcihkb21haW4sbWV0aG9kLCJ1bmlmb3JtcyBvYmplY3QgaXMgbWlzc2luZyByZXF1aXJlZCBkZWZhdWx0IHVuaWZvcm1zIGRlZmluZWQgaW4gQmxvdHRlci5Vbmlmb3JtVXRpbHMuZGVmYXVsdFVuaWZvcm1zIik7cmV0dXJuO319LGhhc1JlcXVpcmVkRGVmYXVsdFVuaWZvcm1zOmZ1bmN0aW9uIGhhc1JlcXVpcmVkRGVmYXVsdFVuaWZvcm1zKHVuaWZvcm1zKXt2YXIgbWlzc2luZ0tleXM9Xy5kaWZmZXJlbmNlKF8uYWxsS2V5cyhCbG90dGVyLlVuaWZvcm1VdGlscy5kZWZhdWx0VW5pZm9ybXMpLF8uYWxsS2V5cyh1bmlmb3JtcykpO3JldHVybiEhIW1pc3NpbmdLZXlzLmxlbmd0aDt9fTt9KSh0aGlzLkJsb3R0ZXIsdGhpcy5fKTsoZnVuY3Rpb24oQmxvdHRlcixfLFRIUkVFLEV2ZW50RW1pdHRlcil7QmxvdHRlci5UZXh0PWZ1bmN0aW9uKHZhbHVlLHByb3BlcnRpZXMpe3RoaXMuaWQ9QmxvdHRlci5NYXRoLmdlbmVyYXRlVVVJRCgpO3RoaXMudmFsdWU9dmFsdWU7dGhpcy5wcm9wZXJ0aWVzPXByb3BlcnRpZXM7fTtCbG90dGVyLlRleHQucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpCbG90dGVyLlRleHQsZ2V0IG5lZWRzVXBkYXRlKCl7fSwvLyBqc2hpbnQKc2V0IG5lZWRzVXBkYXRlKHZhbHVlKXtpZih2YWx1ZT09PXRydWUpe3RoaXMudHJpZ2dlcigidXBkYXRlIik7fX0sZ2V0IHByb3BlcnRpZXMoKXtyZXR1cm4gdGhpcy5fcHJvcGVydGllczt9LHNldCBwcm9wZXJ0aWVzKHByb3BlcnRpZXMpe3RoaXMuX3Byb3BlcnRpZXM9QmxvdHRlci5UZXh0VXRpbHMuZW5zdXJlUHJvcGVydHlWYWx1ZXMocHJvcGVydGllcyk7fX07QmxvdHRlci5fZXh0ZW5kV2l0aEdldHRlcnNTZXR0ZXJzKEJsb3R0ZXIuVGV4dC5wcm90b3R5cGUsRXZlbnRFbWl0dGVyLnByb3RvdHlwZSk7fSkodGhpcy5CbG90dGVyLHRoaXMuXyx0aGlzLlRIUkVFLHRoaXMuRXZlbnRFbWl0dGVyKTsoZnVuY3Rpb24oQmxvdHRlcixfKXtCbG90dGVyLkFzc2V0cy5TaGFkZXJzLkJsZW5kaW5nPVsiLy8iLCIvLyBBdXRob3IgOiBCcmFkbGV5IEdyaWZmaXRoIiwiLy8gTGljZW5zZSA6IERpc3RyaWJ1dGVkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4iLCIvLyIsIiIsIi8vIFJldHVybnMgdGhlIHJlc3VsdGluZyBibGVuZCBjb2xvciBieSBibGVuZGluZyBhIHRvcCBjb2xvciBvdmVyIGEgYmFzZSBjb2xvciIsImhpZ2hwIHZlYzQgbm9ybWFsQmxlbmQoaGlnaHAgdmVjNCB0b3BDb2xvciwgaGlnaHAgdmVjNCBiYXNlQ29sb3IpIHsiLCIgIGhpZ2hwIHZlYzQgYmxlbmQgPSB2ZWM0KDAuMCk7IiwiICAvLyBIQUNLIiwiICAvLyBDYW50IGRpdmlkZSBieSAwIChzZWUgdGhlICdlbHNlJyBhbHBoYSkgYW5kIGFmdGVyIGEgbG90IG9mIGF0dGVtcHRzIiwiICAvLyB0aGlzIHNpbXBseSBzZWVtcyBsaWtlIHRoZSBvbmx5IHNvbHV0aW9uIEltIGdvaW5nIHRvIGJlIGFibGUgdG8gY29tZSB1cCB3aXRoIHRvIGdldCBhbHBoYSBiYWNrLiIsIiAgaWYgKGJhc2VDb2xvci5hID09IDEuMCkgeyIsIiAgICBiYXNlQ29sb3IuYSA9IDAuOTk5OTk5OTsiLCIgIH07IiwiICBpZiAodG9wQ29sb3IuYSA+PSAxLjApIHsiLCIgICAgYmxlbmQuYSA9IHRvcENvbG9yLmE7IiwiICAgIGJsZW5kLnIgPSB0b3BDb2xvci5yOyIsIiAgICBibGVuZC5nID0gdG9wQ29sb3IuZzsiLCIgICAgYmxlbmQuYiA9IHRvcENvbG9yLmI7IiwiICB9IGVsc2UgaWYgKHRvcENvbG9yLmEgPT0gMC4wKSB7IiwiICAgIGJsZW5kLmEgPSBiYXNlQ29sb3IuYTsiLCIgICAgYmxlbmQuciA9IGJhc2VDb2xvci5yOyIsIiAgICBibGVuZC5nID0gYmFzZUNvbG9yLmc7IiwiICAgIGJsZW5kLmIgPSBiYXNlQ29sb3IuYjsiLCIgIH0gZWxzZSB7IiwiICAgIGJsZW5kLmEgPSAxLjAgLSAoMS4wIC0gdG9wQ29sb3IuYSkgKiAoMS4wIC0gYmFzZUNvbG9yLmEpOyAvLyBhbHBoYSIsIiAgICBibGVuZC5yID0gKHRvcENvbG9yLnIgKiB0b3BDb2xvci5hIC8gYmxlbmQuYSkgKyAoYmFzZUNvbG9yLnIgKiBiYXNlQ29sb3IuYSAqICgxLjAgLSB0b3BDb2xvci5hKSAvIGJsZW5kLmEpOyIsIiAgICBibGVuZC5nID0gKHRvcENvbG9yLmcgKiB0b3BDb2xvci5hIC8gYmxlbmQuYSkgKyAoYmFzZUNvbG9yLmcgKiBiYXNlQ29sb3IuYSAqICgxLjAgLSB0b3BDb2xvci5hKSAvIGJsZW5kLmEpOyIsIiAgICBibGVuZC5iID0gKHRvcENvbG9yLmIgKiB0b3BDb2xvci5hIC8gYmxlbmQuYSkgKyAoYmFzZUNvbG9yLmIgKiBiYXNlQ29sb3IuYSAqICgxLjAgLSB0b3BDb2xvci5hKSAvIGJsZW5kLmEpOyIsIiAgfSIsIiAgcmV0dXJuIGJsZW5kOyIsIn0iLCIvLyBSZXR1cm5zIGEgdmVjNCByZXByZXNlbnRpbmcgdGhlIG9yaWdpbmFsIHRvcCBjb2xvciB0aGF0IHdvdWxkIGhhdmUgYmVlbiBuZWVkZWQgdG8gYmxlbmQiLCIvLyAgYWdhaW5zdCBhIHBhc3NlZCBpbiBiYXNlIGNvbG9yIGluIG9yZGVyIHRvIHJlc3VsdCBpbiB0aGUgcGFzc2VkIGluIGJsZW5kIGNvbG9yLiIsImhpZ2hwIHZlYzQgbm9ybWFsVW5ibGVuZChoaWdocCB2ZWM0IGJsZW5kQ29sb3IsIGhpZ2hwIHZlYzQgYmFzZUNvbG9yKSB7IiwiICBoaWdocCB2ZWM0IHVuYmxlbmQgPSB2ZWM0KDAuMCk7IiwiICAvLyBIQUNLWSIsIiAgLy8gQ2FudCBkaXZpZGUgYnkgMCAoc2VlIGFscGhhKSBhbmQgYWZ0ZXIgYSBsb3Qgb2YgYXR0ZW1wdHMiLCIgIC8vIHRoaXMgc2ltcGx5IHNlZW1zIGxpa2UgdGhlIG9ubHkgc29sdXRpb24gSW0gZ29pbmcgdG8gYmUgYWJsZSB0byBjb21lIHVwIHdpdGggdG8gZ2V0IGFscGhhIGJhY2suIiwiICBpZiAoYmFzZUNvbG9yLmEgPT0gMS4wKSB7IiwiICAgIGJhc2VDb2xvci5hID0gMC45OTk5OTk5OyIsIiAgfSIsIiAgdW5ibGVuZC5hID0gMS4wIC0gKCgxLjAgLSBibGVuZENvbG9yLmEpIC8gKDEuMCAtIGJhc2VDb2xvci5hKSk7IiwiICAvLyBSb3VuZCB0byB0d28gZGVjaW1hbCBwbGFjZXMiLCIgIHVuYmxlbmQuYSA9IChzaWduKDEwMC4wICogdW5ibGVuZC5hKSAqIGZsb29yKGFicygxMDAuMCAqIHVuYmxlbmQuYSkgKyAwLjUpKSAvIDEwMC4wOyIsIiAgaWYgKHVuYmxlbmQuYSA+PSAxLjApIHsiLCIgICAgdW5ibGVuZC5yID0gYmxlbmRDb2xvci5yOyIsIiAgICB1bmJsZW5kLmcgPSBibGVuZENvbG9yLmc7IiwiICAgIHVuYmxlbmQuYiA9IGJsZW5kQ29sb3IuYjsiLCIgIH0gZWxzZSBpZiAodW5ibGVuZC5hID09IDAuMCkgeyIsIiAgICB1bmJsZW5kLnIgPSBiYXNlQ29sb3IucjsiLCIgICAgdW5ibGVuZC5nID0gYmFzZUNvbG9yLmc7IiwiICAgIHVuYmxlbmQuYiA9IGJhc2VDb2xvci5iOyIsIiAgfSBlbHNlIHsiLCIgICAgdW5ibGVuZC5yID0gKGJsZW5kQ29sb3IuciAtIChiYXNlQ29sb3IuciAqIGJhc2VDb2xvci5hICogKDEuMCAtIHVuYmxlbmQuYSkgLyBibGVuZENvbG9yLmEpKSAvICh1bmJsZW5kLmEgLyBibGVuZENvbG9yLmEpOyIsIiAgICB1bmJsZW5kLmcgPSAoYmxlbmRDb2xvci5nIC0gKGJhc2VDb2xvci5nICogYmFzZUNvbG9yLmEgKiAoMS4wIC0gdW5ibGVuZC5hKSAvIGJsZW5kQ29sb3IuYSkpIC8gKHVuYmxlbmQuYSAvIGJsZW5kQ29sb3IuYSk7IiwiICAgIHVuYmxlbmQuYiA9IChibGVuZENvbG9yLmIgLSAoYmFzZUNvbG9yLmIgKiBiYXNlQ29sb3IuYSAqICgxLjAgLSB1bmJsZW5kLmEpIC8gYmxlbmRDb2xvci5hKSkgLyAodW5ibGVuZC5hIC8gYmxlbmRDb2xvci5hKTsiLCIgIH0iLCIgIHJldHVybiB1bmJsZW5kOyIsIn0iXS5qb2luKCJcbiIpO30pKHRoaXMuQmxvdHRlcix0aGlzLl8pOyhmdW5jdGlvbihCbG90dGVyLF8pe0Jsb3R0ZXIuQXNzZXRzLlNoYWRlcnMuSW5mPVsiLy8iLCIvLyBBdXRob3IgOiBCcmFkbGV5IEdyaWZmaXRoIiwiLy8gTGljZW5zZSA6IERpc3RyaWJ1dGVkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4iLCIvLyIsImJvb2wgaXNpbmYoZmxvYXQgdmFsKSB7IiwiICAgIHJldHVybiAodmFsICE9IDAuMCAmJiB2YWwgKiAyLjAgPT0gdmFsKSA/IHRydWUgOiBmYWxzZTsiLCJ9Il0uam9pbigiXG4iKTt9KSh0aGlzLkJsb3R0ZXIsdGhpcy5fKTsoZnVuY3Rpb24oQmxvdHRlcixfKXtCbG90dGVyLkFzc2V0cy5TaGFkZXJzLkxpbmVNYXRoPVtCbG90dGVyLkFzc2V0cy5TaGFkZXJzLkluZiwiIiwiLy8iLCIvLyBBdXRob3IgOiBCcmFkbGV5IEdyaWZmaXRoIiwiLy8gTGljZW5zZSA6IERpc3RyaWJ1dGVkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4iLCIvLyIsIiIsIi8vIFJldHVybnMgdGhlIHNsb3BlIG9mIGEgbGluZSBnaXZlbiB0aGUgZGVncmVlcyBvZiB0aGUgYW5nbGUgb24gd2hpY2ggdGhhdCBsaW5lIGlzIHJvdGF0ZWQ7IiwiZmxvYXQgc2xvcGVGb3JEZWdyZWVzKGZsb2F0IGRlZykgeyIsIiAgICAvLyBFbnN1cmUgZGVncmVlcyBzdGF5IHdpdGhpbmcgMC4wIC0gMzYwLjAiLCIgICAgZGVnID0gbW9kKGRlZywgMzYwLjApOyIsIiAgICBmbG9hdCByYWRpYW5zID0gZGVnICogKFBJIC8gMTgwLjApOyIsIiAgICByZXR1cm4gdGFuKHJhZGlhbnMpOyIsIn0iLCIvLyBHaXZlbiB4LCBhIHNsb3BlLCBhbmQgYW5vdGhlciBwb2ludCwgZmluZCB5IGZvciB4LiIsImZsb2F0IHlGb3JYT25TbG9wZShmbG9hdCB4LCBmbG9hdCBzbG9wZSwgdmVjMiBwMikgeyIsIiAgICByZXR1cm4gLTEuMCAqICgoc2xvcGUgKiAocDIueCAtIHgpKSAtIHAyLnkpOyIsIn0iLCIvLyBHaXZlbiB5LCBhIHNsb3BlLCBhbmQgYW5vdGhlciBwb2ludCwgZmluZCB4IGZvciB5LiIsImZsb2F0IHhGb3JZT25TbG9wZShmbG9hdCB5LCBmbG9hdCBzbG9wZSwgdmVjMiBwMikgeyIsIiAgICByZXR1cm4gKCh5IC0gcDIueSkgKyAoc2xvcGUgKiBwMi54KSkgLyBzbG9wZTsiLCJ9IiwiLy8gUmV0dXJucyBzbG9wZSBhZGp1c3RlZCBmb3Igc2NyZWVuIHJhdGlvLiIsImZsb2F0IG5vcm1hbGl6ZWRTbG9wZShmbG9hdCBzbG9wZSwgdmVjMiByZXNvbHV0aW9uKSB7IiwiICAgIHZlYzIgcCA9IHZlYzIoMS4wKSAvIHJlc29sdXRpb247IiwiICAgIHJldHVybiAoKHNsb3BlICogMTAwLjApIC8gcC54KSAvICgxMDAuMCAvIHAueCk7IiwifSIsIi8vIFJldHVybnMgb2Zmc2V0cyAoKy8tKSBmb3IgYW55IGNvb3JkaW5hdGUgYXQgZGlzdGFuY2UgZ2l2ZW4gc2xvcGUuIiwiLy8gICBOb3RlOiBUaGlzIGZ1bmN0aW9uIGRvZXMgbm90IG5vcm1hbGl6ZSBkaXN0YW5jZS4iLCIvLyAgIE5vdGU6IFRoaXMgZnVuY3Rpb24gZG9lcyBub3QgYWRqdXN0IHNsb3BlIGZvciBzY3JlZW4gcmF0aW8uIiwidmVjMiBvZmZzZXRzRm9yQ29vcmRBdERpc3RhbmNlT25TbG9wZShmbG9hdCBkLCBmbG9hdCBzbG9wZSkgeyIsIiAgICByZXR1cm4gdmVjMigiLCIgICAgICAgIChkICogY29zKGF0YW4oc2xvcGUpKSksIiwiICAgICAgICAoZCAqIHNpbihhdGFuKHNsb3BlKSkpIiwiICAgICk7IiwifSIsIi8vIFJldHVybnMgYSBib29sZWFuIGRlc2lnbmF0aW5nIHdoZXRoZXIgb3Igbm90IGFuIGluZmluaXRlIGxpbmUgaW50ZXJzZWN0cyB3aXRoIGFuIGluZmluaXRlIGxpbmUsIGFuZCBzZXRzIGFuIGBvdXRgIHZhcmlhYmxlIGZvciB0aGUgaW50ZXJzZWN0aW9uIHBvaW50IGlmIGl0IGlzIGZvdW5kLiIsIi8vICAgTm90ZTogVGhpcyBmdW5jdGlvbiBkb2VzIG5vdCBhZGp1c3Qgc2xvcGUgZm9yIHNjcmVlbiByYXRpby4iLCJib29sIGxpbmVMaW5lSW50ZXJzZWN0aW9uIChvdXQgdmVjMiBpbnRlcnNlY3QsIGluIHZlYzIgcDEsIGluIGZsb2F0IG0xLCBpbiB2ZWMyIHAyLCBpbiBmbG9hdCBtMikgeyIsIiAgICAvLyBTZWU6IGh0dHA6Ly9nYW1lZGV2LnN0YWNrZXhjaGFuZ2UuY29tL3F1ZXN0aW9ucy80NDcyMC9saW5lLWludGVyc2VjdGlvbi1mcm9tLXBhcmFtZXRyaWMtZXF1YXRpb24iLCIgICAgLy8gICAgICBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzQxNjg3MDgzL2Zvcm11bGEtdG8tZGV0ZXJtaW5lLWlmLWFuLWluZmluaXRlLWxpbmUtYW5kLWEtbGluZS1zZWdtZW50LWludGVyc2VjdC80MTY4NzkwNCM0MTY4NzkwNCIsIiAgICBib29sIGlzSW50ZXJzZWN0aW5nID0gZmFsc2U7IiwiICAgIGZsb2F0IGR4ID0gMS4wOyIsIiAgICBmbG9hdCBkeSA9IG0xOyIsIiAgICBmbG9hdCBkeHggPSAxLjA7IiwiICAgIGZsb2F0IGR5eSA9IG0yOyIsIiAgICBmbG9hdCBkZW5vbWluYXRvciA9ICgoZHh4ICogZHkpIC0gKGR5eSAqIGR4KSk7IiwiICAgIGlmIChkZW5vbWluYXRvciA9PSAwLjApIHsiLCIgICAgICAgIC8vIExpbmVzIGFyZSBwYXJhbGxlbCIsIiAgICAgICAgcmV0dXJuIGlzSW50ZXJzZWN0aW5nOyIsIiAgICB9IiwiICAgIGlmIChpc2luZihkeSkpIHsiLCIgICAgICAgIGZsb2F0IHkgPSB5Rm9yWE9uU2xvcGUocDEueCwgbTIsIHAyKTsiLCIgICAgICAgIGlzSW50ZXJzZWN0aW5nID0gdHJ1ZTsiLCIgICAgICAgIGludGVyc2VjdCA9IHZlYzIocDEueCwgeSk7IiwiICAgICAgICByZXR1cm4gaXNJbnRlcnNlY3Rpbmc7IiwiICAgIH0iLCIgICAgaWYgKGlzaW5mKGR5eSkpIHsiLCIgICAgICAgIGZsb2F0IHkgPSB5Rm9yWE9uU2xvcGUocDIueCwgbTEsIHAxKTsiLCIgICAgICAgIGlzSW50ZXJzZWN0aW5nID0gdHJ1ZTsiLCIgICAgICAgIGludGVyc2VjdCA9IHZlYzIocDIueCwgeSk7IiwiICAgICAgICByZXR1cm4gaXNJbnRlcnNlY3Rpbmc7IiwiICAgIH0iLCIgICAgZmxvYXQgdSA9ICgoZHggKiAocDIueSAtIHAxLnkpKSArIChkeSAqIChwMS54IC0gcDIueCkpKSAvIGRlbm9taW5hdG9yOyIsIiAgICBpc0ludGVyc2VjdGluZyA9IHRydWU7IiwiICAgIGludGVyc2VjdCA9IHAyICsgKHUgKiB2ZWMyKGR4eCwgZHl5KSk7IiwiICAgIHJldHVybiBpc0ludGVyc2VjdGluZzsiLCJ9IiwiLy8gUmV0dXJucyBhIGJvb2xlYW4gZGVzaWduYXRpbmcgd2hldGhlciBvciBub3QgYW4gaW5maW5pdGUgbGluZSBpbnRlcnNlY3RzIHdpdGggYSBsaW5lIHNlZ21lbnQsIGFuZCBzZXRzIGFuIGBvdXRgIHZhcmlhYmxlIGZvciB0aGUgaW50ZXJzZWN0aW9uIHBvaW50IGlmIGl0IGlzIGZvdW5kLiIsIi8vICAgTm90ZTogVGhpcyBmdW5jdGlvbiBkb2VzIG5vdCBhZGp1c3Qgc2xvcGUgZm9yIHNjcmVlbiByYXRpby4iLCJib29sIGxpbmVMaW5lU2VnbWVudEludGVyc2VjdGlvbiAob3V0IHZlYzIgaW50ZXJzZWN0LCBpbiB2ZWMyIHBvaW50LCBpbiBmbG9hdCBtLCBpbiB2ZWMyIHBBLCBpbiB2ZWMyIHBCKSB7IiwiICAgIC8vIFNlZTogaHR0cDovL2dhbWVkZXYuc3RhY2tleGNoYW5nZS5jb20vcXVlc3Rpb25zLzQ0NzIwL2xpbmUtaW50ZXJzZWN0aW9uLWZyb20tcGFyYW1ldHJpYy1lcXVhdGlvbiIsIiAgICAvLyAgICAgIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNDE2ODcwODMvZm9ybXVsYS10by1kZXRlcm1pbmUtaWYtYW4taW5maW5pdGUtbGluZS1hbmQtYS1saW5lLXNlZ21lbnQtaW50ZXJzZWN0LzQxNjg3OTA0IzQxNjg3OTA0IiwiICAgIGJvb2wgaXNJbnRlcnNlY3RpbmcgPSBmYWxzZTsiLCIgICAgZmxvYXQgZHggPSAxLjA7IiwiICAgIGZsb2F0IGR5ID0gbTsiLCIgICAgZmxvYXQgZHh4ID0gcEIueCAtIHBBLng7IiwiICAgIGZsb2F0IGR5eSA9IHBCLnkgLSBwQS55OyIsIiAgICBmbG9hdCBkZW5vbWluYXRvciA9ICgoZHh4ICogZHkpIC0gKGR5eSAqIGR4KSk7IiwiICAgIGlmIChkZW5vbWluYXRvciA9PSAwLjAgfHwgKGlzaW5mKGR5eSAvIGR4eCkgJiYgaXNpbmYoZHkpKSkgeyIsIiAgICAgICAgLy8gTGluZXMgYXJlIHBhcmFsbGVsIiwiICAgICAgICByZXR1cm4gaXNJbnRlcnNlY3Rpbmc7IiwiICAgIH0iLCIgICAgaWYgKGlzaW5mKGR5KSkgeyIsIiAgICAgICAgZmxvYXQgbTIgPSBkeXkgLyBkeHg7IiwiICAgICAgICBmbG9hdCB5ID0geUZvclhPblNsb3BlKHBvaW50LngsIG0yLCBwQik7IiwiICAgICAgICBpc0ludGVyc2VjdGluZyA9IHRydWU7IiwiICAgICAgICBpbnRlcnNlY3QgPSB2ZWMyKHBvaW50LngsIHkpOyIsIiAgICAgICAgcmV0dXJuIGlzSW50ZXJzZWN0aW5nOyIsIiAgICB9IiwiICAgIGZsb2F0IHUgPSAoKGR4ICogKHBBLnkgLSBwb2ludC55KSkgKyAoZHkgKiAocG9pbnQueCAtIHBBLngpKSkgLyBkZW5vbWluYXRvcjsiLCIgICAgaWYgKHUgPj0gMC4wICYmIHUgPD0gMS4wKSB7IiwiICAgICAgICAvLyBJbnRlcnNlY3Rpb24gb2NjdXJlZCBvbiBsaW5lIHNlZ21lbnQiLCIgICAgICAgIGlzSW50ZXJzZWN0aW5nID0gdHJ1ZTsiLCIgICAgICAgIGludGVyc2VjdCA9IHBBICsgKHUgKiB2ZWMyKGR4eCwgZHl5KSk7IiwiICAgIH0iLCIgICAgcmV0dXJuIGlzSW50ZXJzZWN0aW5nOyIsIn0iLCIvLyBEZXYgTm90ZTogVGVycmlibGUgY29kZS4gTmVlZHMgcmVmYWN0b3IuIEp1c3QgdHJ5aW5nIHRvIGZpbmQgIiwiLy8gICB3aGljaCB0d28gZWRnZXMgb2YgdGhlIHJlY3QgdGhlIGludGVyc2VjdGlvbnMgb2NjdXIgYXQuIiwidm9pZCBpbnRlcnNlY3RzT25SZWN0Rm9yTGluZShvdXQgdmVjMiBpQSwgb3V0IHZlYzIgaUIsIGluIHZlYzIgck1pblhZLCBpbiB2ZWMyIHJNYXhYWSwgaW4gdmVjMiBwb2ludCwgaW4gZmxvYXQgc2xvcGUpIHsiLCIgICAgYm9vbCBmaXJzdEludGVyc2VjdEZvdW5kID0gZmFsc2U7IiwiICAgIHZlYzIgaW50ZXJzZWN0TGVmdCA9IHZlYzIoMC4wKTsiLCIgICAgdmVjMiBpbnRlcnNlY3RUb3AgPSB2ZWMyKDAuMCk7IiwiICAgIHZlYzIgaW50ZXJzZWN0UmlnaHQgPSB2ZWMyKDAuMCk7IiwiICAgIHZlYzIgaW50ZXJzZWN0Qm90dG9tID0gdmVjMigwLjApOyIsIiAgICBib29sIGludGVyc2VjdHNMZWZ0ID0gbGluZUxpbmVTZWdtZW50SW50ZXJzZWN0aW9uKGludGVyc2VjdExlZnQsIHBvaW50LCBzbG9wZSwgck1pblhZLCB2ZWMyKHJNaW5YWS54LCByTWF4WFkueSkpOyIsIiAgICBib29sIGludGVyc2VjdHNUb3AgPSBsaW5lTGluZVNlZ21lbnRJbnRlcnNlY3Rpb24oaW50ZXJzZWN0VG9wLCBwb2ludCwgc2xvcGUsIHZlYzIock1pblhZLngsIHJNYXhYWS55KSwgck1heFhZKTsiLCIgICAgYm9vbCBpbnRlcnNlY3RzUmlnaHQgPSBsaW5lTGluZVNlZ21lbnRJbnRlcnNlY3Rpb24oaW50ZXJzZWN0UmlnaHQsIHBvaW50LCBzbG9wZSwgck1heFhZLCB2ZWMyKHJNYXhYWS54LCByTWluWFkueSkpOyIsIiAgICBib29sIGludGVyc2VjdHNCb3R0b20gPSBsaW5lTGluZVNlZ21lbnRJbnRlcnNlY3Rpb24oaW50ZXJzZWN0Qm90dG9tLCBwb2ludCwgc2xvcGUsIHJNaW5YWSwgdmVjMihyTWF4WFkueCwgck1pblhZLnkpKTsiLCIgICAgaWYgKGludGVyc2VjdHNMZWZ0KSB7IiwiICAgICAgICBpZiAoZmlyc3RJbnRlcnNlY3RGb3VuZCkgeyIsIiAgICAgICAgICAgIGlCID0gaW50ZXJzZWN0TGVmdDsiLCIgICAgICAgIH0iLCIgICAgICAgIGVsc2UgeyIsIiAgICAgICAgICAgIGlBID0gaW50ZXJzZWN0TGVmdDsiLCIgICAgICAgICAgICBmaXJzdEludGVyc2VjdEZvdW5kID0gdHJ1ZTsiLCIgICAgICAgIH0iLCIgICAgfSIsIiAgICBpZiAoaW50ZXJzZWN0c1RvcCkgeyIsIiAgICAgICAgaWYgKGZpcnN0SW50ZXJzZWN0Rm91bmQpIHsiLCIgICAgICAgICAgICBpQiA9IGludGVyc2VjdFRvcDsiLCIgICAgICAgIH0iLCIgICAgICAgIGVsc2UgeyIsIiAgICAgICAgICAgIGlBID0gaW50ZXJzZWN0VG9wOyIsIiAgICAgICAgICAgIGZpcnN0SW50ZXJzZWN0Rm91bmQgPSB0cnVlOyIsIiAgICAgICAgfSIsIiAgICB9IiwiICAgIGlmIChpbnRlcnNlY3RzUmlnaHQpIHsiLCIgICAgICAgIGlmIChmaXJzdEludGVyc2VjdEZvdW5kKSB7IiwiICAgICAgICAgICAgaUIgPSBpbnRlcnNlY3RSaWdodDsiLCIgICAgICAgIH0iLCIgICAgICAgIGVsc2UgeyIsIiAgICAgICAgICAgIGlBID0gaW50ZXJzZWN0UmlnaHQ7IiwiICAgICAgICAgICAgZmlyc3RJbnRlcnNlY3RGb3VuZCA9IHRydWU7IiwiICAgICAgICB9IiwiICAgIH0iLCIgICAgaWYgKGludGVyc2VjdHNCb3R0b20pIHsiLCIgICAgICAgIGlmIChmaXJzdEludGVyc2VjdEZvdW5kKSB7IiwiICAgICAgICAgICAgaUIgPSBpbnRlcnNlY3RCb3R0b207IiwiICAgICAgICB9IiwiICAgICAgICBlbHNlIHsiLCIgICAgICAgICAgICBpQSA9IGludGVyc2VjdEJvdHRvbTsiLCIgICAgICAgIH0iLCIgICAgfSIsIn0iXS5qb2luKCJcbiIpO30pKHRoaXMuQmxvdHRlcix0aGlzLl8pOy8vIFNlZSBMaWNlbnNlIGNvbW1lbnRzIGluIHNoYWRlciBzdHJpbmcKKGZ1bmN0aW9uKEJsb3R0ZXIsXyl7QmxvdHRlci5Bc3NldHMuU2hhZGVycy5CbGlublBob25nU3BlY3VsYXI9WyIvLyIsIi8vIEF1dGhvciA6IFJlemEgQWxpIiwiLy8gTGljZW5zZSA6IERpc3RyaWJ1dGVkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4iLCIvLyIsIiIsImZsb2F0IGJsaW5uUGhvbmdTcGVjdWxhciggdmVjMyBsaWdodERpcmVjdGlvbiwgdmVjMyB2aWV3RGlyZWN0aW9uLCB2ZWMzIHN1cmZhY2VOb3JtYWwsIGZsb2F0IHNoaW5pbmVzcyApIHsiLCIiLCIgIC8vQ2FsY3VsYXRlIEJsaW5uLVBob25nIHBvd2VyIiwiICB2ZWMzIEggPSBub3JtYWxpemUodmlld0RpcmVjdGlvbiArIGxpZ2h0RGlyZWN0aW9uKTsiLCIgIHJldHVybiBwb3cobWF4KDAuMCwgZG90KHN1cmZhY2VOb3JtYWwsIEgpKSwgc2hpbmluZXNzKTsiLCJ9Il0uam9pbigiXG4iKTt9KSh0aGlzLkJsb3R0ZXIsdGhpcy5fKTsvLyBTZWUgTGljZW5zZSBjb21tZW50cyBpbiBzaGFkZXIgc3RyaW5nCihmdW5jdGlvbihCbG90dGVyLF8pe0Jsb3R0ZXIuQXNzZXRzLlNoYWRlcnMuRWFzaW5nPVsiLy8iLCIvLyBBdXRob3IgOiBSZXphIEFsaSIsIi8vIExpY2Vuc2UgOiBEaXN0cmlidXRlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIiwiLy8iLCIiLCJmbG9hdCBsaW5lYXIoIGZsb2F0IHQsIGZsb2F0IGIsIGZsb2F0IGMsIGZsb2F0IGQgKSIsInsiLCIgICAgcmV0dXJuIHQgKiAoIGMgLyBkICkgKyBiOyIsIn0iLCIiLCJmbG9hdCBsaW5lYXIoIGZsb2F0IHQgKSIsInsiLCIgICAgcmV0dXJuIHQ7IiwifSIsIiIsImZsb2F0IGluUXVhZCggZmxvYXQgdCwgZmxvYXQgYiwgZmxvYXQgYywgZmxvYXQgZCApIiwieyIsIiAgICByZXR1cm4gYyAqICggdCAvPSBkICkgKiB0ICsgYjsiLCJ9IiwiIiwiZmxvYXQgaW5RdWFkKCBmbG9hdCB0ICkiLCJ7IiwiICAgIHJldHVybiB0ICogdDsiLCJ9IiwiIiwiZmxvYXQgb3V0UXVhZCggZmxvYXQgdCwgZmxvYXQgYiwgZmxvYXQgYywgZmxvYXQgZCApIiwieyIsIiAgICByZXR1cm4gLWMgKiAoIHQgLz0gZCApICogKCB0IC0gMi4wICkgKyBiOyIsIn0iLCIiLCJmbG9hdCBvdXRRdWFkKCBmbG9hdCB0ICkiLCJ7IiwiICAgIHJldHVybiAtICggdCAtPSAxLjAgKSAqIHQgKyAxLjA7IiwifSIsIiIsImZsb2F0IGluT3V0UXVhZCggZmxvYXQgdCwgZmxvYXQgYiwgZmxvYXQgYywgZmxvYXQgZCApIiwieyIsIiAgICBpZiggKCB0IC89IGQgLyAyLjAgKSA8IDEuMCApIHsiLCIgICAgICByZXR1cm4gYyAvIDIuMCAqIHQgKiB0ICsgYjsiLCIgICAgfSIsIiAgICByZXR1cm4gLSBjIC8gMi4wICogKCAoIC0tdCApICogKCB0IC0gMi4wICkgLSAxLjAgKSArIGI7IiwifSIsIiIsImZsb2F0IGluT3V0UXVhZCggZmxvYXQgdCApIiwieyIsIiAgICBpZiggKCB0IC89IDAuNSApIDwgMS4wICkgcmV0dXJuIDAuNSAqIHQgKiB0OyIsIiAgICByZXR1cm4gLTAuNSAqICggKCAtLXQgKSAqICggdC0yICkgLSAxICk7IiwifSIsIiIsImZsb2F0IGluQ3ViaWMoIGZsb2F0IHQsIGZsb2F0IGIsIGZsb2F0IGMsIGZsb2F0IGQgKSIsInsiLCIgICAgcmV0dXJuIGMgKiAoIHQgLz0gZCApICogdCAqIHQgKyBiOyIsIn0iLCIiLCJmbG9hdCBpbkN1YmljKCBmbG9hdCB0ICkiLCJ7IiwiICAgIHJldHVybiB0ICogdCAqIHQ7IiwifSIsIiIsImZsb2F0IG91dEN1YmljKCBmbG9hdCB0LCBmbG9hdCBiLCBmbG9hdCBjLCBmbG9hdCBkICkiLCJ7IiwiICAgIHJldHVybiBjICogKCAoIHQgPSB0L2QgLSAxLjAgKSAqIHQgKiB0ICsgMS4wICkgKyBiOyIsIn0iLCIiLCJmbG9hdCBvdXRDdWJpYyggZmxvYXQgdCApIiwieyIsIiAgICByZXR1cm4gKCAoIC0tdCApICogdCAqIHQgKyAxLjAgKTsiLCJ9IiwiIiwiZmxvYXQgaW5PdXRDdWJpYyggZmxvYXQgdCwgZmxvYXQgYiwgZmxvYXQgYywgZmxvYXQgZCApIiwieyIsIiAgICBpZiggKCB0IC89IGQgLyAyLjAgKSA8IDEuMCApIHJldHVybiAgYyAvIDIuMCAqIHQgKiB0ICogdCArIGI7IiwiICAgIHJldHVybiBjIC8gMi4wICogKCAoIHQgLT0gMi4wICkgKiB0ICogdCArIDIuMCApICsgYjsiLCJ9IiwiIiwiZmxvYXQgaW5PdXRDdWJpYyggZmxvYXQgdCApIiwieyIsIiAgICBpZiggKCB0IC89IDAuNSApIDwgMS4wICkgcmV0dXJuIDAuNSAqIHQgKiB0ICogdDsiLCIgICAgcmV0dXJuIDAuNSAqICggKCB0IC09IDIuMCApICogdCAqIHQgKyAyLjAgKTsiLCJ9IiwiIiwiZmxvYXQgaW5RdWFydCggZmxvYXQgdCwgZmxvYXQgYiwgZmxvYXQgYywgZmxvYXQgZCApIiwieyIsIiAgICByZXR1cm4gYyAqICggdCAvPSBkICkgKiB0ICogdCAqIHQgKyBiOyIsIn0iLCIiLCJmbG9hdCBpblF1YXJ0KCBmbG9hdCB0ICkiLCJ7IiwiICAgIHJldHVybiB0ICogdCAqIHQgKiB0OyIsIn0iLCIiLCJmbG9hdCBvdXRRdWFydCggZmxvYXQgdCwgZmxvYXQgYiwgZmxvYXQgYywgZmxvYXQgZCApIiwieyIsIiAgICByZXR1cm4gLWMgKiAoICggdCA9IHQvZCAtIDEuMCApICogdCAqIHQgKiB0IC0gMS4wICkgKyBiOyIsIn0iLCIiLCJmbG9hdCBvdXRRdWFydCggZmxvYXQgdCApIiwieyIsIiAgICByZXR1cm4gLSAoICggLS10ICkgKiB0ICogdCAqIHQgLSAxLjAgKTsiLCJ9IiwiIiwiZmxvYXQgaW5PdXRRdWFydCggZmxvYXQgdCwgZmxvYXQgYiwgZmxvYXQgYywgZmxvYXQgZCApIiwieyIsIiAgICBpZiAoICggdCAvPSBkIC8gMi4wICkgPCAxLjAgKSByZXR1cm4gYyAvIDIuMCAqIHQgKiB0ICogdCAqIHQgKyBiOyIsIiAgICByZXR1cm4gLWMgLyAyLjAgKiAoICggdCAtPSAyLjAgKSAqIHQgKiB0ICogdCAtIDIuMCApICsgYjsiLCJ9IiwiIiwiZmxvYXQgaW5PdXRRdWFydCggZmxvYXQgdCApIiwieyIsIiAgICBpZiAoICh0IC89IDAuNSApIDwgMS4wICkgcmV0dXJuIDAuNSAqIHQgKiB0ICogdCAqIHQ7IiwiICAgIHJldHVybiAtMC41ICogKCAoIHQgLT0gMi4wICkgKiB0ICogdCAqIHQgLSAyLjAgKTsiLCJ9IiwiIiwiZmxvYXQgaW5RdWludCggZmxvYXQgdCwgZmxvYXQgYiwgZmxvYXQgYywgZmxvYXQgZCApIiwieyIsIiAgICByZXR1cm4gYyAqICggdCAvPSBkICkgKiB0ICogdCAqIHQgKiB0ICsgYjsiLCJ9IiwiIiwiZmxvYXQgaW5RdWludCggZmxvYXQgdCApIiwieyIsIiAgICByZXR1cm4gdCAqIHQgKiB0ICogdCAqIHQ7IiwifSIsIiIsImZsb2F0IG91dFF1aW50KCBmbG9hdCB0LCBmbG9hdCBiLCBmbG9hdCBjLCBmbG9hdCBkICkiLCJ7IiwiICAgIHJldHVybiBjICogKCAoIHQgPSB0L2QgLSAxLjApICogdCAqIHQgKiB0ICogdCArIDEuMCApICsgYjsiLCJ9IiwiIiwiZmxvYXQgb3V0UXVpbnQoIGZsb2F0IHQgKSIsInsiLCIgICAgcmV0dXJuICggKCAtLXQgKSAqIHQgKiB0ICogdCAqIHQgKyAxLjAgKTsiLCJ9IiwiIiwiZmxvYXQgaW5PdXRRdWludCggZmxvYXQgdCwgZmxvYXQgYiwgZmxvYXQgYywgZmxvYXQgZCApIiwieyIsIiAgICBpZiggKCB0IC89IGQgLzIuMCApIDwgMS4wICkgcmV0dXJuICBjIC8gMi4wICogdCAqIHQgKiB0ICogdCAqIHQgKyBiOyIsIiAgICByZXR1cm4gYyAvIDIuMCAqICggKCB0IC09IDIuMCApICogdCAqIHQgKiB0ICogdCArIDIuMCkgKyBiOyIsIn0iLCIiLCJmbG9hdCBpbk91dFF1aW50KCBmbG9hdCB0ICkiLCJ7IiwiICAgIGlmICggKCB0IC89IDAuNSApIDwgMS4wICkgcmV0dXJuIDAuNSAqIHQgKiB0ICogdCAqIHQgKiB0OyIsIiAgICByZXR1cm4gMC41ICogKCAoIHQgLT0gMiApICogdCAqIHQgKiB0ICogdCArIDIuMCApOyIsIn0iLCIiLCJmbG9hdCBpblNpbmUoIGZsb2F0IHQsIGZsb2F0IGIsIGZsb2F0IGMsIGZsb2F0IGQgKSIsInsiLCIgICAgcmV0dXJuIC1jICogY29zKCB0IC8gZCAqICggMS41NzA3OTYzMjY4ICkgKSArIGMgKyBiOyIsIn0iLCIiLCJmbG9hdCBpblNpbmUoIGZsb2F0IHQgKSIsInsiLCIgICAgcmV0dXJuIC0xLjAgKiBjb3MoIHQgKiAoIDEuNTcwNzk2MzI2OCApICkgKyAxLjA7IiwifSIsIiIsImZsb2F0IG91dFNpbmUoIGZsb2F0IHQsIGZsb2F0IGIsIGZsb2F0IGMsIGZsb2F0IGQgKSIsInsiLCIgICAgcmV0dXJuIGMgKiBzaW4oIHQgLyBkICogKCAxLjU3MDc5NjMyNjggKSApICsgYjsiLCJ9IiwiIiwiZmxvYXQgb3V0U2luZSggZmxvYXQgdCApIiwieyIsIiAgICByZXR1cm4gc2luKCB0ICogKCAxLjU3MDc5NjMyNjggKSApOyIsIn0iLCIiLCJmbG9hdCBpbk91dFNpbmUoIGZsb2F0IHQsIGZsb2F0IGIsIGZsb2F0IGMsIGZsb2F0IGQgKSIsInsiLCIgICAgcmV0dXJuIC0gYyAvIDIuMCAqICggY29zKCAzLjE0MTU5MjY1MzYgKiB0IC8gZCApIC0gMS4wICkgKyBiOyIsIn0iLCIiLCJmbG9hdCBpbk91dFNpbmUoIGZsb2F0IHQgKSIsInsiLCIgICAgcmV0dXJuIC0wLjUgKiAoIGNvcyggMy4xNDE1OTI2NTM2ICogdCApIC0gMS4wICk7IiwifSIsIiIsImZsb2F0IGluRXhwbyggZmxvYXQgdCwgZmxvYXQgYiwgZmxvYXQgYywgZmxvYXQgZCApIiwieyIsIiAgICByZXR1cm4gKCB0ID09IDAuMCApID8gYiA6IGMgKiBwb3coIDIuMCwgMTAuMCAqICggdCAvIGQgLSAxLjAgKSApICsgYjsiLCJ9IiwiIiwiZmxvYXQgaW5FeHBvKCBmbG9hdCB0ICkiLCJ7IiwiICAgIHJldHVybiAoIHQgPT0gMCApID8gMC4wIDogcG93KCAyLjAsIDEwLjAgKiAoIHQgLSAxLjAgKSApOyIsIn0iLCIiLCJmbG9hdCBvdXRFeHBvKCBmbG9hdCB0LCBmbG9hdCBiLCBmbG9hdCBjLCBmbG9hdCBkICkiLCJ7IiwiICAgIHJldHVybiAoIHQgPT0gZCApID8gYiArIGMgOiBjICogKCAtIHBvdyggMi4wLCAtMTAuMCAqIHQgLyBkICkgKyAxLjAgKSArIGI7IiwifSIsIiIsImZsb2F0IG91dEV4cG8oIGZsb2F0IHQgKSIsInsiLCIgICAgcmV0dXJuICggdCA9PSAxLjAgKSA/IDEuMCA6ICggLSBwb3coIDIuMCwgLTEwLjAgKiB0ICkgKyAxLjAgKTsiLCJ9IiwiIiwiZmxvYXQgaW5PdXRFeHBvKCBmbG9hdCB0LCBmbG9hdCBiLCBmbG9hdCBjLCBmbG9hdCBkICkiLCJ7IiwiICAgIGlmKCB0ID09IDAgKSByZXR1cm4gYjsiLCIgICAgaWYoIHQgPT0gZCApIHJldHVybiBiICsgYzsiLCIgICAgaWYoKCB0IC89IGQgLyAyLjAgKSA8IDEuMCApIHJldHVybiBjIC8gMi4wICogcG93KCAyLjAsIDEwLjAgKiAoIHQgLSAxLjAgKSApICsgYjsiLCIgICAgcmV0dXJuIGMgLyAyLjAgKiAoIC0gcG93KCAyLjAsIC0xMC4wICogLS10ICkgKyAyLjAgKSArIGI7IiwifSIsIiIsImZsb2F0IGluT3V0RXhwbyggZmxvYXQgdCApIiwieyIsIiAgICBpZiggdCA9PSAwLjAgKSByZXR1cm4gMC4wOyIsIiAgICBpZiggdCA9PSAxLjAgKSByZXR1cm4gMS4wOyIsIiAgICBpZiggKCB0IC89IDAuNSApIDwgMS4wICkgcmV0dXJuIDAuNSAqIHBvdyggMi4wLCAxMC4wICogKCB0IC0gMS4wICkgKTsiLCIgICAgcmV0dXJuIDAuNSAqICggLSBwb3coIDIuMCwgLTEwLjAgKiAtLXQgKSArIDIuMCApOyIsIn0iLCIiLCJmbG9hdCBpbkNpcmMoIGZsb2F0IHQsIGZsb2F0IGIsIGZsb2F0IGMsIGZsb2F0IGQgKSIsInsiLCIgICAgcmV0dXJuIC1jICogKCBzcXJ0KCAxLjAgLSAodC89ZCkqdCkgLSAxKSArIGI7IiwifSIsIiIsImZsb2F0IGluQ2lyYyggZmxvYXQgdCApIiwieyIsIiAgICByZXR1cm4gLSAoIHNxcnQoIDEuMCAtIHQqdCkgLSAxKTsiLCJ9IiwiIiwiZmxvYXQgb3V0Q2lyYyggZmxvYXQgdCwgZmxvYXQgYiwgZmxvYXQgYywgZmxvYXQgZCApIiwieyIsIiAgICByZXR1cm4gYyAqIHNxcnQoIDEuMCAtICh0PXQvZC0xKSp0KSArIGI7IiwifSIsIiIsImZsb2F0IG91dENpcmMoIGZsb2F0IHQgKSIsInsiLCIgICAgcmV0dXJuIHNxcnQoIDEuMCAtICgtLXQpKnQpOyIsIn0iLCIiLCJmbG9hdCBpbk91dENpcmMoIGZsb2F0IHQsIGZsb2F0IGIsIGZsb2F0IGMsIGZsb2F0IGQgKSIsInsiLCIgICAgaWYgKCAoIHQgLz0gZCAvIDIuMCApIDwgMSApIHJldHVybiAtIGMgLyAyLjAgKiAoIHNxcnQoIDEuMCAtIHQgKiB0ICkgLSAxLjAgKSArIGI7IiwiICAgIHJldHVybiBjIC8gMi4wICogKCBzcXJ0KCAxLjAgLSAoIHQgLT0gMi4wICkgKiB0ICkgKyAxLjAgKSArIGI7IiwifSIsIiIsImZsb2F0IGluT3V0Q2lyYyggZmxvYXQgdCApIiwieyIsIiAgICBpZiggKCB0IC89IDAuNSApIDwgMS4wICkgcmV0dXJuIC0wLjUgKiAoIHNxcnQoIDEuMCAtIHQgKiB0ICkgLSAxLjAgKTsiLCIgICAgcmV0dXJuIDAuNSAqICggc3FydCggMS4wIC0gKCB0IC09IDIuMCApICogdCApICsgMS4wICk7IiwifSIsIiIsImZsb2F0IGluRWxhc3RpYyggZmxvYXQgdCwgZmxvYXQgYiwgZmxvYXQgYywgZmxvYXQgZCApIiwieyIsIiAgICBmbG9hdCBzID0gMS43MDE1ODsgZmxvYXQgcCA9IDAuMDsgZmxvYXQgYSA9IGM7IiwiICAgIGlmKCB0ID09IDAgKSByZXR1cm4gYjsgIGlmKCAoIHQgLz0gZCApID09IDEgKSByZXR1cm4gYiArIGM7IiwiICAgIHAgPSBkICogMC4zOyIsIiAgICBpZiggYSA8IGFicyggYyApICkgeyBhID0gYzsgZmxvYXQgcyA9IHAgLyA0LjA7IH0iLCIgICAgZWxzZSBzID0gMC4xNTkxNTQ5NDMxICogcCAvICggNi4yODMxODUzMDcyICkgKiBhc2luKCBjIC8gYSApOyIsIiAgICByZXR1cm4gLSggYSAqIHBvdyggMi4wLCAxMC4wICogKCB0IC09IDEuMCApICkgKiBzaW4oICggdCAqIGQgLSBzICkgKiAoIDYuMjgzMTg1MzA3MiApIC8gcCApICkgICsgYjsiLCJ9IiwiIiwiZmxvYXQgaW5FbGFzdGljKCBmbG9hdCB0ICkiLCJ7IiwiICAgIGZsb2F0IHMgPSAxLjcwMTU4OyBmbG9hdCBwID0gMC4wOyBmbG9hdCBhID0gMS4wOyIsIiAgICBpZiggdCA9PSAwLjAgKSByZXR1cm4gMC4wOyIsIiAgICBpZiggdCA9PSAxLjAgKSByZXR1cm4gMS4wOyIsIiAgICBwID0gMC4zOyIsIiAgICBzID0gcCAvICggNi4yODMxODUzMDcyICkgKiBhc2luKCAxLjAgLyBhICk7IiwiICAgIHJldHVybiAtKCBhICogcG93KCAyLjAsIDEwLjAgKiAoIHQgLT0gMS4wICkgKSAqIHNpbiggKCB0IC0gcyApICogKCA2LjI4MzE4NTMwNzIgKSAvIHAgKSApOyIsIn0iLCIiLCJmbG9hdCBvdXRFbGFzdGljKCBmbG9hdCB0LCBmbG9hdCBiLCBmbG9hdCBjLCBmbG9hdCBkICkiLCJ7IiwiICAgIGZsb2F0IHMgPSAxLjcwMTU4OyBmbG9hdCBwID0gMC4wOyBmbG9hdCBhID0gYzsiLCIgICAgaWYoIHQgPT0gMC4wICkgcmV0dXJuIGI7IiwiICAgIGlmKCAodCAvPSBkICkgPT0gMS4wICkgcmV0dXJuIGIgKyBjOyIsIiAgICBwID0gZCAqIDAuMzsiLCIgICAgaWYoIGEgPCBhYnMoIGMgKSApIHsgYSA9IGM7IHMgPSBwIC8gNC4wOyB9IiwiICAgIGVsc2UgeyBzID0gcCAvICggNi4yODMxODUzMDcyICkgKiBhc2luKCBjIC8gYSApOyB9IiwiICAgIHJldHVybiBhICogcG93KCAyLjAsIC0xMC4wICogdCApICogc2luKCAoIHQgKiBkIC0gcyApICogKCA2LjI4MzE4NTMwNzIgKSAvIHAgKSArIGMgKyBiOyIsIn0iLCIiLCJmbG9hdCBvdXRFbGFzdGljKCBmbG9hdCB0ICkiLCJ7IiwiICAgIGZsb2F0IHMgPSAxLjcwMTU4OyBmbG9hdCBwID0gMC4wIDsgZmxvYXQgYSA9IDEuMDsiLCIgICAgaWYoIHQgPT0gMC4wICkgcmV0dXJuIDAuMDsgIGlmKCB0ID09IDEuMCApIHJldHVybiAxLjA7IiwiICAgIHAgPSAwLjM7IiwiICAgIHMgPSBwIC8gKCA2LjI4MzE4NTMwNzIgKSAqIGFzaW4oIDEuMCAvIGEgKTsiLCIgICAgcmV0dXJuIGEgKiBwb3coIDIuMCwgLTEwLjAgKiB0ICkgKiBzaW4oICggdCAtIHMgKSAqICggNi4yODMxODUzMDcyICkgLyBwICkgKyAxLjA7IiwifSIsIiIsImZsb2F0IGluT3V0RWxhc3RpYyggZmxvYXQgdCwgZmxvYXQgYiwgZmxvYXQgYywgZmxvYXQgZCApIiwieyIsIiAgICBmbG9hdCBzID0gMS43MDE1ODsgZmxvYXQgcCA9IDAuMDsgZmxvYXQgYSA9IGM7IiwiICAgIGlmKCB0ID09IDAuMCApIHJldHVybiBiOyIsIiAgICBpZiggKCB0IC89IGQgLyAyLjAgKSA9PSAyLjAgKSByZXR1cm4gYiArIGM7IiwiICAgIHAgPSBkICogKCAwLjMgKiAxLjUgKTsiLCIgICAgaWYoIGEgPCBhYnMoIGMgKSApIHsgYSA9IGM7IHMgPSBwIC8gNC4wOyB9IiwiICAgIGVsc2UgeyBzID0gcCAvICggNi4yODMxODUzMDcyICkgKiBhc2luKCBjIC8gYSApOyB9IiwiICAgIGlmKCB0IDwgMS4wICkgcmV0dXJuIC0wLjUgKiAoIGEgKiBwb3coIDIuMCwgMTAuMCAqICggdCAtPSAxLjAgKSApICogc2luKCAoIHQgKiBkIC0gcyApICogKCA2LjI4MzE4NTMwNzIgKSAvIHAgKSApICsgYjsiLCIgICAgcmV0dXJuIGEgKiBwb3coIDIuMCwgLTEwLjAgKiAoIHQgLT0gMS4wICkgKSAqIHNpbiggKCB0ICogZCAtIHMgKSAqICggNi4yODMxODUzMDcyICkgLyBwICkgKiAwLjUgKyBjICsgYjsiLCJ9IiwiIiwiZmxvYXQgaW5PdXRFbGFzdGljKCBmbG9hdCB0ICkiLCJ7IiwiICAgIGZsb2F0IHMgPSAxLjcwMTU4OyBmbG9hdCBwID0gMDsgZmxvYXQgYSA9IDEuMDsiLCIgICAgaWYoIHQgPT0gMCApIHJldHVybiAwLjA7IiwiICAgIGlmKCAoIHQgLz0gMC41ICkgPT0gMi4wICkgcmV0dXJuIDEuMDsiLCIgICAgcCA9ICggMC4zICogMS41ICk7IiwiICAgIHMgPSBwIC8gKCA2LjI4MzE4NTMwNzIgKSAqIGFzaW4oIDEuMCAvIGEgKTsiLCIgICAgaWYoIHQgPCAxLjAgKSByZXR1cm4gLTAuNSAqICggYSAqIHBvdyggMi4wLCAxMC4wICogKCB0IC09IDEuMCApICkgKiBzaW4oICggdCAtIHMgKSAqICggNi4yODMxODUzMDcyICkgLyBwICkgKTsiLCIgICAgcmV0dXJuIGEgKiBwb3coIDIuMCwgLTEwLjAgKiAoIHQgLT0gMS4wICkgKSAqIHNpbiggKCB0IC0gcyApICogKCA2LjI4MzE4NTMwNzIgKSAvIHAgKSAqIDAuNSArIDEuMDsiLCJ9IiwiIiwiZmxvYXQgaW5CYWNrKCBmbG9hdCB0LCBmbG9hdCBiLCBmbG9hdCBjLCBmbG9hdCBkICkiLCJ7IiwiICAgIGZsb2F0IHMgPSAxLjcwMTU4OyIsIiAgICByZXR1cm4gYyAqICggdCAvPSBkICkgKiB0ICogKCAoIHMgKyAxLjAgKSAqIHQgLSBzICkgKyBiOyIsIn0iLCIiLCJmbG9hdCBpbkJhY2soIGZsb2F0IHQgKSIsInsiLCIgICAgZmxvYXQgcyA9IDEuNzAxNTg7IiwiICAgIHJldHVybiB0ICogdCAqICggKCBzICsgMS4wICkgKiB0IC0gcyk7IiwifSIsIiIsImZsb2F0IG91dEJhY2soIGZsb2F0IHQsICBmbG9hdCBiLCAgZmxvYXQgYywgIGZsb2F0IGQgKSIsInsiLCIgICAgZmxvYXQgcyA9IDEuNzAxNTg7IiwiICAgIHJldHVybiBjICogKCAoIHQgPSB0IC8gZCAtIDEuMCApICogdCAqICggKCBzICsgMS4wICkgKiB0ICsgcyApICsgMS4wICkgKyBiOyIsIn0iLCIiLCJmbG9hdCBvdXRCYWNrKCBmbG9hdCB0ICkiLCJ7IiwiICAgIGZsb2F0IHMgPSAxLjcwMTU4OyIsIiAgICByZXR1cm4gKCAoIC0tdCApICogdCAqICggKCBzICsgMS4wICkgKiB0ICsgcyApICsgMS4wKTsiLCJ9IiwiIiwiZmxvYXQgaW5PdXRCYWNrKCBmbG9hdCB0LCBmbG9hdCBiLCBmbG9hdCBjLCBmbG9hdCBkICkiLCJ7IiwiICAgIGZsb2F0IHMgPSAxLjcwMTU4OyIsIiAgICBpZiggKCB0IC89IGQgLyAyLjAgKSA8IDEuMCApIHJldHVybiBjIC8gMi4wICogKCB0ICogdCAqICggKCAoIHMgKj0gMS41MjUgKSArIDEuMCApICogdCAtIHMgKSApICsgYjsiLCIgICAgcmV0dXJuIGMgLyAyLjAgKiAoICggdCAtPSAyLjAgKSAqIHQgKiAoICggKCBzICo9ICggMS41MjUgKSApICsgMS4wICkgKiB0ICsgcyApICsgMi4wICkgKyBiOyIsIn0iLCIiLCJmbG9hdCBpbk91dEJhY2soIGZsb2F0IHQgKSIsInsiLCIgICAgZmxvYXQgcyA9IDEuNzAxNTg7IiwiICAgIGlmKCAoIHQgLz0gMC41ICkgPCAxLjAgKSByZXR1cm4gMC41ICogKCB0ICogdCAqICggKCAoIHMgKj0gMS41MjUgKSArIDEuMCApICogdCAtIHMgKSApOyIsIiAgICByZXR1cm4gMC41ICogKCAoIHQgLT0gMiApICogdCAqICggKCAoIHMgKj0gKCAxLjUyNSApICkgKyAxLjAgKSAqIHQgKyBzICkgKyAyLjAgKTsiLCJ9IiwiIiwiZmxvYXQgb3V0Qm91bmNlKCBmbG9hdCB0LCBmbG9hdCBiLCBmbG9hdCBjLCBmbG9hdCBkICkiLCJ7IiwiICAgIGlmKCAoIHQgLz0gZCApIDwgKCAxLjAgLyAyLjc1ICkgKSB7IiwiICAgICAgICByZXR1cm4gYyAqICggNy41NjI1ICogdCAqIHQgKSArIGI7IiwiICAgIH0gZWxzZSBpZiAoIHQgPCAoIDIuMCAvIDIuNzUgKSApIHsiLCIgICAgICAgIHJldHVybiBjICogKCA3LjU2MjUgKiAoIHQgLT0gKCAxLjUgLyAyLjc1ICkgKSAqIHQgKyAwLjc1ICkgKyBiOyIsIiAgICB9IGVsc2UgaWYgKCB0IDwgKCAyLjUgLyAyLjc1ICkgKSB7IiwiICAgICAgICByZXR1cm4gYyAqICggNy41NjI1ICogKCB0IC09ICggMi4yNSAvIDIuNzUgKSApICogdCArIDAuOTM3NSApICsgYjsiLCIgICAgfSBlbHNlIHsiLCIgICAgICAgIHJldHVybiBjICogKCA3LjU2MjUgKiAoIHQgLT0gKCAyLjYyNSAvIDIuNzUgKSApICogdCArIDAuOTg0Mzc1ICkgKyBiOyIsIiAgICB9IiwifSIsIiIsImZsb2F0IG91dEJvdW5jZSggZmxvYXQgdCApIiwieyIsIiAgICBpZiggdCA8ICggMS4wIC8gMi43NSApICkgeyIsIiAgICAgICAgcmV0dXJuICggNy41NjI1ICogdCAqIHQgKTsiLCIgICAgfSBlbHNlIGlmICggdCA8ICggMi4wIC8gMi43NSApICkgeyIsIiAgICAgICAgcmV0dXJuICggNy41NjI1ICogKCB0LT0gKCAxLjUgLyAyLjc1ICkgKSAqIHQgKyAuNzUgKTsiLCIgICAgfSBlbHNlIGlmICggdCA8ICggMi41IC8gMi43NSApICkgeyIsIiAgICAgICAgcmV0dXJuICggNy41NjI1ICogKCB0IC09ICggMi4yNSAvIDIuNzUgKSApICogdCArIDAuOTM3NSApOyIsIiAgICB9IGVsc2UgeyIsIiAgICAgICAgcmV0dXJuICggNy41NjI1ICogKCB0IC09ICggMi42MjUgLyAyLjc1ICkgKSAqIHQgKyAwLjk4NDM3NSApOyIsIiAgICB9IiwifSIsIiIsImZsb2F0IGluQm91bmNlKCBmbG9hdCB0LCBmbG9hdCBiLCBmbG9hdCBjLCBmbG9hdCBkICkiLCJ7IiwiICAgIHJldHVybiBjIC0gb3V0Qm91bmNlKCBkIC0gdCwgMC4wLCBjLCBkICkgKyBiOyIsIn0iLCIiLCJmbG9hdCBpbkJvdW5jZSggZmxvYXQgdCApIiwieyIsIiAgICByZXR1cm4gMS4wIC0gb3V0Qm91bmNlKCAxLjAgLSB0KTsiLCJ9IiwiIiwiZmxvYXQgaW5PdXRCb3VuY2UoIGZsb2F0IHQsIGZsb2F0IGIsIGZsb2F0IGMsIGZsb2F0IGQgKSIsInsiLCIgICAgaWYgKCB0IDwgZCAvMi4wICkgcmV0dXJuIGluQm91bmNlICggdCAqIDIuMCwgMC4wLCBjLCBkICkgKiAwLjUgKyBiOyIsIiAgICByZXR1cm4gb3V0Qm91bmNlICggdCAqIDIuMCAtIGQsIDAsIGMsIGQgKSAqIDAuNSArIGMgKiAwLjUgKyBiOyIsIn0iLCIiLCJmbG9hdCBpbk91dEJvdW5jZSggZmxvYXQgdCApIiwieyIsIiAgICBpZiAoIHQgPCAwLjUgKSByZXR1cm4gaW5Cb3VuY2UoIHQgKiAyLjAgKSAqIDAuNTsiLCIgICAgcmV0dXJuIG91dEJvdW5jZSggdCAqIDIuMCAtIDEuMCApICogMC41ICsgMC41OyIsIn0iXS5qb2luKCJcbiIpO30pKHRoaXMuQmxvdHRlcix0aGlzLl8pOy8vIFNlZSBMaWNlbnNlIGNvbW1lbnRzIGluIHNoYWRlciBzdHJpbmcKKGZ1bmN0aW9uKEJsb3R0ZXIsXyl7QmxvdHRlci5Bc3NldHMuU2hhZGVycy5HYW1tYT1bIi8vIiwiLy8gQXV0aG9yIDogUmV6YSBBbGkiLCIvLyBMaWNlbnNlIDogRGlzdHJpYnV0ZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiIsIi8vIiwiIiwiY29uc3QgdmVjMyBjR2FtbWFDb3JyZWN0aW9uID0gdmVjMyggMC40NTQ1NDU0NTQ1ICk7IiwiIiwidmVjMyBnYW1tYSggaW4gdmVjMyBjb2xvciApIiwieyIsIiAgcmV0dXJuIHBvdyggY29sb3IsIGNHYW1tYUNvcnJlY3Rpb24gKTsiLCJ9IiwiIiwidmVjNCBnYW1tYSggaW4gdmVjNCBjb2xvciApIiwieyIsIiAgcmV0dXJuIHZlYzQoIGdhbW1hKCBjb2xvci5yZ2IgKSwgY29sb3IuYSApOyIsIn0iXS5qb2luKCJcbiIpO30pKHRoaXMuQmxvdHRlcix0aGlzLl8pOy8vIFNlZSBMaWNlbnNlIGNvbW1lbnRzIGluIHNoYWRlciBzdHJpbmcKKGZ1bmN0aW9uKEJsb3R0ZXIsXyl7QmxvdHRlci5Bc3NldHMuU2hhZGVycy5NYXA9WyIvLyIsIi8vIEF1dGhvciA6IFJlemEgQWxpIiwiLy8gTGljZW5zZSA6IERpc3RyaWJ1dGVkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4iLCIvLyIsIiIsImZsb2F0IG1hcCggZmxvYXQgdmFsdWUsIGZsb2F0IGluTWluLCBmbG9hdCBpbk1heCwgZmxvYXQgb3V0TWluLCBmbG9hdCBvdXRNYXggKSIsInsiLCIgICAgcmV0dXJuICggKHZhbHVlIC0gaW5NaW4pIC8gKCBpbk1heCAtIGluTWluICkgKiAoIG91dE1heCAtIG91dE1pbiApICkgKyBvdXRNaW47IiwifSJdLmpvaW4oIlxuIik7fSkodGhpcy5CbG90dGVyLHRoaXMuXyk7Ly8gU2VlIExpY2Vuc2UgY29tbWVudHMgaW4gc2hhZGVyIHN0cmluZwooZnVuY3Rpb24oQmxvdHRlcixfKXtCbG90dGVyLkFzc2V0cy5TaGFkZXJzLk5vaXNlPVsiLy8iLCIvLyBBdXRob3IgOiBQYXRyaWNpbyBHb256YWxleiBWaXZvIGFuZCBKZW4gTG93ZSIsIi8vIExpY2Vuc2UgOiBEaXN0cmlidXRlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIiwiLy8gU291cmNlIDogaHR0cHM6Ly9naXRodWIuY29tL3BhdHJpY2lvZ29uemFsZXp2aXZvL3RoZWJvb2tvZnNoYWRlcnMiLCIvLyIsImZsb2F0IHJhbmRvbSAoaW4gZmxvYXQgX3gpIHsiLCIgICAgcmV0dXJuIGZyYWN0KHNpbihfeCkqMWU0KTsiLCJ9IiwiIiwiZmxvYXQgcmFuZG9tIChpbiB2ZWMyIGNvKSB7IiwiICAgIHJldHVybiBmcmFjdChzaW4oZG90KGNvLnh5LHZlYzIoMTIuOTg5OCw3OC4yMzMpKSkqNDM3NTguNTQ1Myk7IiwifSIsIiIsImZsb2F0IG5vaXNlIChpbiBmbG9hdCBfeCkgeyIsIiAgICBmbG9hdCBpID0gZmxvb3IoX3gpOyIsIiAgICBmbG9hdCBmID0gZnJhY3QoX3gpOyIsIiAgICBmbG9hdCB1ID0gZiAqIGYgKiAoMy4wIC0gMi4wICogZik7IiwiICAgIHJldHVybiBtaXgocmFuZG9tKGkpLCByYW5kb20oaSArIDEuMCksIHUpOyIsIn0iLCIiLCJmbG9hdCBub2lzZSAoaW4gdmVjMiBfc3QpIHsiLCIgICAgdmVjMiBpID0gZmxvb3IoX3N0KTsiLCIgICAgdmVjMiBmID0gZnJhY3QoX3N0KTsiLCIgICAgLy8gRm91ciBjb3JuZXJzIGluIDJEIG9mIGEgdGlsZSIsIiAgICBmbG9hdCBhID0gcmFuZG9tKGkpOyIsIiAgICBmbG9hdCBiID0gcmFuZG9tKGkgKyB2ZWMyKDEuMCwgMC4wKSk7IiwiICAgIGZsb2F0IGMgPSByYW5kb20oaSArIHZlYzIoMC4wLCAxLjApKTsiLCIgICAgZmxvYXQgZCA9IHJhbmRvbShpICsgdmVjMigxLjAsIDEuMCkpOyIsIiAgICB2ZWMyIHUgPSBmICogZiAqICgzLjAgLSAyLjAgKiBmKTsiLCIgICAgcmV0dXJuIG1peChhLCBiLCB1LngpICsgIiwiICAgICAgICAgICAgKGMgLSBhKSogdS55ICogKDEuMCAtIHUueCkgKyAiLCIgICAgICAgICAgICAoZCAtIGIpICogdS54ICogdS55OyIsIn0iXS5qb2luKCJcbiIpO30pKHRoaXMuQmxvdHRlcix0aGlzLl8pOy8vIFNlZSBMaWNlbnNlIGNvbW1lbnRzIGluIHNoYWRlciBzdHJpbmcKKGZ1bmN0aW9uKEJsb3R0ZXIsXyl7QmxvdHRlci5Bc3NldHMuU2hhZGVycy5Ob2lzZTJEPVsiLy8iLCIvLyBEZXNjcmlwdGlvbiA6IEFycmF5IGFuZCB0ZXh0dXJlbGVzcyBHTFNMIDJEIHNpbXBsZXggbm9pc2UgZnVuY3Rpb24uIiwiLy8gICAgICBBdXRob3IgOiBJYW4gTWNFd2FuLCBBc2hpbWEgQXJ0cy4iLCIvLyAgTWFpbnRhaW5lciA6IGlqbSIsIi8vICAgICBMYXN0bW9kIDogMjAxMTA4MjIgKGlqbSkiLCIvLyAgICAgTGljZW5zZSA6IENvcHlyaWdodCAoQykgMjAxMSBBc2hpbWEgQXJ0cy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4iLCIvLyAgICAgICAgICAgICAgIERpc3RyaWJ1dGVkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExJQ0VOU0UgZmlsZS4iLCIvLyAgICAgICAgICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9hc2hpbWEvd2ViZ2wtbm9pc2UiLCIvLyIsIiIsInZlYzIgbjJtb2QyODkodmVjMiB4KSB7IiwiICByZXR1cm4geCAtIGZsb29yKHggKiAoMS4wIC8gMjg5LjApKSAqIDI4OS4wOyIsIn0iLCIiLCJ2ZWMzIG4ybW9kMjg5KHZlYzMgeCkgeyIsIiAgcmV0dXJuIHggLSBmbG9vcih4ICogKDEuMCAvIDI4OS4wKSkgKiAyODkuMDsiLCJ9IiwiIiwidmVjNCBuMm1vZDI4OSh2ZWM0IHgpIHsiLCIgIHJldHVybiB4IC0gZmxvb3IoeCAqICgxLjAgLyAyODkuMCkpICogMjg5LjA7IiwifSIsIiIsInZlYzMgcGVybXV0ZSh2ZWMzIHgpIHsiLCIgIHJldHVybiBuMm1vZDI4OSgoKHgqMzQuMCkrMS4wKSp4KTsiLCJ9IiwiIiwiZmxvYXQgc25vaXNlKHZlYzIgdikiLCIgIHsiLCIgIGNvbnN0IHZlYzQgQyA9IHZlYzQoMC4yMTEzMjQ4NjU0MDUxODcsICAvLyAoMy4wLXNxcnQoMy4wKSkvNi4wIiwiICAgICAgICAgICAgICAgICAgICAgIDAuMzY2MDI1NDAzNzg0NDM5LCAgLy8gMC41KihzcXJ0KDMuMCktMS4wKSIsIiAgICAgICAgICAgICAgICAgICAgIC0wLjU3NzM1MDI2OTE4OTYyNiwgIC8vIC0xLjAgKyAyLjAgKiBDLngiLCIgICAgICAgICAgICAgICAgICAgICAgMC4wMjQzOTAyNDM5MDI0MzkpOyAvLyAxLjAgLyA0MS4wIiwiLy8gRmlyc3QgY29ybmVyIiwiICB2ZWMyIGkgID0gZmxvb3IodiArIGRvdCh2LCBDLnl5KSApOyIsIiAgdmVjMiB4MCA9IHYgLSAgIGkgKyBkb3QoaSwgQy54eCk7IiwiIiwiLy8gT3RoZXIgY29ybmVycyIsIiAgdmVjMiBpMTsiLCIgIC8vaTEueCA9IHN0ZXAoIHgwLnksIHgwLnggKTsgLy8geDAueCA+IHgwLnkgPyAxLjAgOiAwLjAiLCIgIC8vaTEueSA9IDEuMCAtIGkxLng7IiwiICBpMSA9ICh4MC54ID4geDAueSkgPyB2ZWMyKDEuMCwgMC4wKSA6IHZlYzIoMC4wLCAxLjApOyIsIiAgLy8geDAgPSB4MCAtIDAuMCArIDAuMCAqIEMueHggOyIsIiAgLy8geDEgPSB4MCAtIGkxICsgMS4wICogQy54eCA7IiwiICAvLyB4MiA9IHgwIC0gMS4wICsgMi4wICogQy54eCA7IiwiICB2ZWM0IHgxMiA9IHgwLnh5eHkgKyBDLnh4eno7IiwiICB4MTIueHkgLT0gaTE7IiwiIiwiLy8gUGVybXV0YXRpb25zIiwiICBpID0gbjJtb2QyODkoaSk7IC8vIEF2b2lkIHRydW5jYXRpb24gZWZmZWN0cyBpbiBwZXJtdXRhdGlvbiIsIiAgdmVjMyBwID0gcGVybXV0ZSggcGVybXV0ZSggaS55ICsgdmVjMygwLjAsIGkxLnksIDEuMCApKSIsIiAgICsgaS54ICsgdmVjMygwLjAsIGkxLngsIDEuMCApKTsiLCIiLCIgIHZlYzMgbSA9IG1heCgwLjUgLSB2ZWMzKGRvdCh4MCx4MCksIGRvdCh4MTIueHkseDEyLnh5KSwgZG90KHgxMi56dyx4MTIuencpKSwgMC4wKTsiLCIgIG0gPSBtKm0gOyIsIiAgbSA9IG0qbSA7IiwiIiwiLy8gR3JhZGllbnRzOiA0MSBwb2ludHMgdW5pZm9ybWx5IG92ZXIgYSBsaW5lLCBtYXBwZWQgb250byBhIGRpYW1vbmQuIiwiLy8gVGhlIHJpbmcgc2l6ZSAxNyoxNyA9IDI4OSBpcyBjbG9zZSB0byBhIG11bHRpcGxlIG9mIDQxICg0MSo3ID0gMjg3KSIsIiIsIiAgdmVjMyB4ID0gMi4wICogZnJhY3QocCAqIEMud3d3KSAtIDEuMDsiLCIgIHZlYzMgaCA9IGFicyh4KSAtIDAuNTsiLCIgIHZlYzMgb3ggPSBmbG9vcih4ICsgMC41KTsiLCIgIHZlYzMgYTAgPSB4IC0gb3g7IiwiIiwiLy8gTm9ybWFsaXNlIGdyYWRpZW50cyBpbXBsaWNpdGx5IGJ5IHNjYWxpbmcgbSIsIi8vIEFwcHJveGltYXRpb24gb2Y6IG0gKj0gaW52ZXJzZXNxcnQoIGEwKmEwICsgaCpoICk7IiwiICBtICo9IDEuNzkyODQyOTE0MDAxNTkgLSAwLjg1MzczNDcyMDk1MzE0ICogKCBhMCphMCArIGgqaCApOyIsIiIsIi8vIENvbXB1dGUgZmluYWwgbm9pc2UgdmFsdWUgYXQgUCIsIiAgdmVjMyBnOyIsIiAgZy54ICA9IGEwLnggICogeDAueCAgKyBoLnggICogeDAueTsiLCIgIGcueXogPSBhMC55eiAqIHgxMi54eiArIGgueXogKiB4MTIueXc7IiwiICByZXR1cm4gMTMwLjAgKiBkb3QobSwgZyk7IiwifSJdLmpvaW4oIlxuIik7fSkodGhpcy5CbG90dGVyLHRoaXMuXyk7Ly8gU2VlIExpY2Vuc2UgY29tbWVudHMgaW4gc2hhZGVyIHN0cmluZwooZnVuY3Rpb24oQmxvdHRlcixfKXtCbG90dGVyLkFzc2V0cy5TaGFkZXJzLk5vaXNlM0Q9WyIvLyIsIi8vIERlc2NyaXB0aW9uIDogQXJyYXkgYW5kIHRleHR1cmVsZXNzIEdMU0wgMkQvM0QvNEQgc2ltcGxleCIsIi8vICAgICAgICAgICAgICAgbm9pc2UgZnVuY3Rpb25zLiIsIi8vICAgICAgQXV0aG9yIDogSWFuIE1jRXdhbiwgQXNoaW1hIEFydHMuIiwiLy8gIE1haW50YWluZXIgOiBpam0iLCIvLyAgICAgTGFzdG1vZCA6IDIwMTEwODIyIChpam0pIiwiLy8gICAgIExpY2Vuc2UgOiBDb3B5cmlnaHQgKEMpIDIwMTEgQXNoaW1hIEFydHMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuIiwiLy8gICAgICAgICAgICAgICBEaXN0cmlidXRlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMSUNFTlNFIGZpbGUuIiwiLy8gICAgICAgICAgICAgICBodHRwczovL2dpdGh1Yi5jb20vYXNoaW1hL3dlYmdsLW5vaXNlIiwiLy8iLCIiLCJ2ZWMyIG4zbW9kMjg5KHZlYzIgeCkgeyIsIiAgcmV0dXJuIHggLSBmbG9vcih4ICogKDEuMCAvIDI4OS4wKSkgKiAyODkuMDsiLCJ9IiwiIiwidmVjMyBuM21vZDI4OSh2ZWMzIHgpIHsiLCIgIHJldHVybiB4IC0gZmxvb3IoeCAqICgxLjAgLyAyODkuMCkpICogMjg5LjA7IiwifSIsIiIsInZlYzQgbjNtb2QyODkodmVjNCB4KSB7IiwiICByZXR1cm4geCAtIGZsb29yKHggKiAoMS4wIC8gMjg5LjApKSAqIDI4OS4wOyIsIn0iLCIiLCJ2ZWM0IHBlcm11dGUodmVjNCB4KSB7IiwiICAgICByZXR1cm4gbjNtb2QyODkoKCh4KjM0LjApKzEuMCkqeCk7IiwifSIsIiIsInZlYzQgdGF5bG9ySW52U3FydCh2ZWM0IHIpIiwieyIsIiAgcmV0dXJuIDEuNzkyODQyOTE0MDAxNTkgLSAwLjg1MzczNDcyMDk1MzE0ICogcjsiLCJ9IiwiIiwiZmxvYXQgc25vaXNlKHZlYzMgdikiLCIgIHsiLCIgIGNvbnN0IHZlYzIgIEMgPSB2ZWMyKDEuMC82LjAsIDEuMC8zLjApIDsiLCIgIGNvbnN0IHZlYzQgIEQgPSB2ZWM0KDAuMCwgMC41LCAxLjAsIDIuMCk7IiwiIiwiLy8gRmlyc3QgY29ybmVyIiwiICB2ZWMzIGkgID0gZmxvb3IodiArIGRvdCh2LCBDLnl5eSkgKTsiLCIgIHZlYzMgeDAgPSAgIHYgLSBpICsgZG90KGksIEMueHh4KSA7IiwiIiwiLy8gT3RoZXIgY29ybmVycyIsIiAgdmVjMyBnID0gc3RlcCh4MC55engsIHgwLnh5eik7IiwiICB2ZWMzIGwgPSAxLjAgLSBnOyIsIiAgdmVjMyBpMSA9IG1pbiggZy54eXosIGwuenh5ICk7IiwiICB2ZWMzIGkyID0gbWF4KCBnLnh5eiwgbC56eHkgKTsiLCIiLCIgIC8vICAgeDAgPSB4MCAtIDAuMCArIDAuMCAqIEMueHh4OyIsIiAgLy8gICB4MSA9IHgwIC0gaTEgICsgMS4wICogQy54eHg7IiwiICAvLyAgIHgyID0geDAgLSBpMiAgKyAyLjAgKiBDLnh4eDsiLCIgIC8vICAgeDMgPSB4MCAtIDEuMCArIDMuMCAqIEMueHh4OyIsIiAgdmVjMyB4MSA9IHgwIC0gaTEgKyBDLnh4eDsiLCIgIHZlYzMgeDIgPSB4MCAtIGkyICsgQy55eXk7IC8vIDIuMCpDLnggPSAxLzMgPSBDLnkiLCIgIHZlYzMgeDMgPSB4MCAtIEQueXl5OyAgICAgIC8vIC0xLjArMy4wKkMueCA9IC0wLjUgPSAtRC55IiwiIiwiLy8gUGVybXV0YXRpb25zIiwiICBpID0gbjNtb2QyODkoaSk7IiwiICB2ZWM0IHAgPSBwZXJtdXRlKCBwZXJtdXRlKCBwZXJtdXRlKCIsIiAgICAgICAgICAgICBpLnogKyB2ZWM0KDAuMCwgaTEueiwgaTIueiwgMS4wICkpIiwiICAgICAgICAgICArIGkueSArIHZlYzQoMC4wLCBpMS55LCBpMi55LCAxLjAgKSkiLCIgICAgICAgICAgICsgaS54ICsgdmVjNCgwLjAsIGkxLngsIGkyLngsIDEuMCApKTsiLCIiLCIvLyBHcmFkaWVudHM6IDd4NyBwb2ludHMgb3ZlciBhIHNxdWFyZSwgbWFwcGVkIG9udG8gYW4gb2N0YWhlZHJvbi4iLCIvLyBUaGUgcmluZyBzaXplIDE3KjE3ID0gMjg5IGlzIGNsb3NlIHRvIGEgbXVsdGlwbGUgb2YgNDkgKDQ5KjYgPSAyOTQpIiwiICBmbG9hdCBuXyA9IDAuMTQyODU3MTQyODU3OyAvLyAxLjAvNy4wIiwiICB2ZWMzICBucyA9IG5fICogRC53eXogLSBELnh6eDsiLCIiLCIgIHZlYzQgaiA9IHAgLSA0OS4wICogZmxvb3IocCAqIG5zLnogKiBucy56KTsgIC8vICBtb2QocCw3KjcpIiwiIiwiICB2ZWM0IHhfID0gZmxvb3IoaiAqIG5zLnopOyIsIiAgdmVjNCB5XyA9IGZsb29yKGogLSA3LjAgKiB4XyApOyAgICAvLyBtb2QoaixOKSIsIiIsIiAgdmVjNCB4ID0geF8gKm5zLnggKyBucy55eXl5OyIsIiAgdmVjNCB5ID0geV8gKm5zLnggKyBucy55eXl5OyIsIiAgdmVjNCBoID0gMS4wIC0gYWJzKHgpIC0gYWJzKHkpOyIsIiIsIiAgdmVjNCBiMCA9IHZlYzQoIHgueHksIHkueHkgKTsiLCIgIHZlYzQgYjEgPSB2ZWM0KCB4Lnp3LCB5Lnp3ICk7IiwiIiwiICAvL3ZlYzQgczAgPSB2ZWM0KGxlc3NUaGFuKGIwLDAuMCkpKjIuMCAtIDEuMDsiLCIgIC8vdmVjNCBzMSA9IHZlYzQobGVzc1RoYW4oYjEsMC4wKSkqMi4wIC0gMS4wOyIsIiAgdmVjNCBzMCA9IGZsb29yKGIwKSoyLjAgKyAxLjA7IiwiICB2ZWM0IHMxID0gZmxvb3IoYjEpKjIuMCArIDEuMDsiLCIgIHZlYzQgc2ggPSAtc3RlcChoLCB2ZWM0KDAuMCkpOyIsIiIsIiAgdmVjNCBhMCA9IGIwLnh6eXcgKyBzMC54enl3KnNoLnh4eXkgOyIsIiAgdmVjNCBhMSA9IGIxLnh6eXcgKyBzMS54enl3KnNoLnp6d3cgOyIsIiIsIiAgdmVjMyBwMCA9IHZlYzMoYTAueHksaC54KTsiLCIgIHZlYzMgcDEgPSB2ZWMzKGEwLnp3LGgueSk7IiwiICB2ZWMzIHAyID0gdmVjMyhhMS54eSxoLnopOyIsIiAgdmVjMyBwMyA9IHZlYzMoYTEuencsaC53KTsiLCIiLCIvL05vcm1hbGlzZSBncmFkaWVudHMiLCIgIHZlYzQgbm9ybSA9IHRheWxvckludlNxcnQodmVjNChkb3QocDAscDApLCBkb3QocDEscDEpLCBkb3QocDIsIHAyKSwgZG90KHAzLHAzKSkpOyIsIiAgcDAgKj0gbm9ybS54OyIsIiAgcDEgKj0gbm9ybS55OyIsIiAgcDIgKj0gbm9ybS56OyIsIiAgcDMgKj0gbm9ybS53OyIsIiIsIi8vIE1peCBmaW5hbCBub2lzZSB2YWx1ZSIsIiAgdmVjNCBtID0gbWF4KDAuNiAtIHZlYzQoZG90KHgwLHgwKSwgZG90KHgxLHgxKSwgZG90KHgyLHgyKSwgZG90KHgzLHgzKSksIDAuMCk7IiwiICBtID0gbSAqIG07IiwiICByZXR1cm4gNDIuMCAqIGRvdCggbSptLCB2ZWM0KCBkb3QocDAseDApLCBkb3QocDEseDEpLCIsIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG90KHAyLHgyKSwgZG90KHAzLHgzKSApICk7IiwiICB9Il0uam9pbigiXG4iKTt9KSh0aGlzLkJsb3R0ZXIsdGhpcy5fKTsvLyBTZWUgTGljZW5zZSBjb21tZW50cyBpbiBzaGFkZXIgc3RyaW5nCihmdW5jdGlvbihCbG90dGVyLF8pe0Jsb3R0ZXIuQXNzZXRzLlNoYWRlcnMuTm9pc2U0RD1bIi8vIiwiLy8gRGVzY3JpcHRpb24gOiBBcnJheSBhbmQgdGV4dHVyZWxlc3MgR0xTTCAyRC8zRC80RCBzaW1wbGV4IiwiLy8gICAgICAgICAgICAgICBub2lzZSBmdW5jdGlvbnMuIiwiLy8gICAgICBBdXRob3IgOiBJYW4gTWNFd2FuLCBBc2hpbWEgQXJ0cy4iLCIvLyAgTWFpbnRhaW5lciA6IGlqbSIsIi8vICAgICBMYXN0bW9kIDogMjAxMTA4MjIgKGlqbSkiLCIvLyAgICAgTGljZW5zZSA6IENvcHlyaWdodCAoQykgMjAxMSBBc2hpbWEgQXJ0cy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4iLCIvLyAgICAgICAgICAgICAgIERpc3RyaWJ1dGVkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExJQ0VOU0UgZmlsZS4iLCIvLyAgICAgICAgICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9hc2hpbWEvd2ViZ2wtbm9pc2UiLCIvLyIsIiIsInZlYzQgbW9kMjg5KHZlYzQgeCkgeyIsIiAgcmV0dXJuIHggLSBmbG9vcih4ICogKDEuMCAvIDI4OS4wKSkgKiAyODkuMDsgfSIsIiIsImZsb2F0IG1vZDI4OShmbG9hdCB4KSB7IiwiICByZXR1cm4geCAtIGZsb29yKHggKiAoMS4wIC8gMjg5LjApKSAqIDI4OS4wOyB9IiwiIiwidmVjNCBwZXJtdXRlKHZlYzQgeCkgeyIsIiAgICAgcmV0dXJuIG1vZDI4OSgoKHgqMzQuMCkrMS4wKSp4KTsiLCJ9IiwiIiwiZmxvYXQgcGVybXV0ZShmbG9hdCB4KSB7IiwiICAgICByZXR1cm4gbW9kMjg5KCgoeCozNC4wKSsxLjApKngpOyIsIn0iLCIiLCJ2ZWM0IHRheWxvckludlNxcnQodmVjNCByKSIsInsiLCIgIHJldHVybiAxLjc5Mjg0MjkxNDAwMTU5IC0gMC44NTM3MzQ3MjA5NTMxNCAqIHI7IiwifSIsIiIsImZsb2F0IHRheWxvckludlNxcnQoZmxvYXQgcikiLCJ7IiwiICByZXR1cm4gMS43OTI4NDI5MTQwMDE1OSAtIDAuODUzNzM0NzIwOTUzMTQgKiByOyIsIn0iLCIiLCJ2ZWM0IGdyYWQ0KGZsb2F0IGosIHZlYzQgaXApIiwiICB7IiwiICBjb25zdCB2ZWM0IG9uZXMgPSB2ZWM0KDEuMCwgMS4wLCAxLjAsIC0xLjApOyIsIiAgdmVjNCBwLHM7IiwiIiwiICBwLnh5eiA9IGZsb29yKCBmcmFjdCAodmVjMyhqKSAqIGlwLnh5eikgKiA3LjApICogaXAueiAtIDEuMDsiLCIgIHAudyA9IDEuNSAtIGRvdChhYnMocC54eXopLCBvbmVzLnh5eik7IiwiICBzID0gdmVjNChsZXNzVGhhbihwLCB2ZWM0KDAuMCkpKTsiLCIgIHAueHl6ID0gcC54eXogKyAocy54eXoqMi4wIC0gMS4wKSAqIHMud3d3OyIsIiIsIiAgcmV0dXJuIHA7IiwiICB9IiwiIiwiLy8gKHNxcnQoNSkgLSAxKS80ID0gRjQsIHVzZWQgb25jZSBiZWxvdyIsIiNkZWZpbmUgRjQgMC4zMDkwMTY5OTQzNzQ5NDc0NTEiLCIiLCJmbG9hdCBzbm9pc2UodmVjNCB2KSIsIiAgeyIsIiAgY29uc3QgdmVjNCAgQyA9IHZlYzQoIDAuMTM4MTk2NjAxMTI1MDExLCAgLy8gKDUgLSBzcXJ0KDUpKS8yMCAgRzQiLCIgICAgICAgICAgICAgICAgICAgICAgICAwLjI3NjM5MzIwMjI1MDAyMSwgIC8vIDIgKiBHNCIsIiAgICAgICAgICAgICAgICAgICAgICAgIDAuNDE0NTg5ODAzMzc1MDMyLCAgLy8gMyAqIEc0IiwiICAgICAgICAgICAgICAgICAgICAgICAtMC40NDcyMTM1OTU0OTk5NTgpOyAvLyAtMSArIDQgKiBHNCIsIiIsIi8vIEZpcnN0IGNvcm5lciIsIiAgdmVjNCBpICA9IGZsb29yKHYgKyBkb3QodiwgdmVjNChGNCkpICk7IiwiICB2ZWM0IHgwID0gdiAtICAgaSArIGRvdChpLCBDLnh4eHgpOyIsIiIsIi8vIE90aGVyIGNvcm5lcnMiLCIiLCIvLyBSYW5rIHNvcnRpbmcgb3JpZ2luYWxseSBjb250cmlidXRlZCBieSBCaWxsIExpY2VhLUthbmUsIEFNRCAoZm9ybWVybHkgQVRJKSIsIiAgdmVjNCBpMDsiLCIgIHZlYzMgaXNYID0gc3RlcCggeDAueXp3LCB4MC54eHggKTsiLCIgIHZlYzMgaXNZWiA9IHN0ZXAoIHgwLnp3dywgeDAueXl6ICk7IiwiLy8gIGkwLnggPSBkb3QoIGlzWCwgdmVjMyggMS4wICkgKTsiLCIgIGkwLnggPSBpc1gueCArIGlzWC55ICsgaXNYLno7IiwiICBpMC55encgPSAxLjAgLSBpc1g7IiwiLy8gIGkwLnkgKz0gZG90KCBpc1laLnh5LCB2ZWMyKCAxLjAgKSApOyIsIiAgaTAueSArPSBpc1laLnggKyBpc1laLnk7IiwiICBpMC56dyArPSAxLjAgLSBpc1laLnh5OyIsIiAgaTAueiArPSBpc1laLno7IiwiICBpMC53ICs9IDEuMCAtIGlzWVouejsiLCIiLCIgIC8vIGkwIG5vdyBjb250YWlucyB0aGUgdW5pcXVlIHZhbHVlcyAwLDEsMiwzIGluIGVhY2ggY2hhbm5lbCIsIiAgdmVjNCBpMyA9IGNsYW1wKCBpMCwgMC4wLCAxLjAgKTsiLCIgIHZlYzQgaTIgPSBjbGFtcCggaTAtMS4wLCAwLjAsIDEuMCApOyIsIiAgdmVjNCBpMSA9IGNsYW1wKCBpMC0yLjAsIDAuMCwgMS4wICk7IiwiIiwiICAvLyAgeDAgPSB4MCAtIDAuMCArIDAuMCAqIEMueHh4eCIsIiAgLy8gIHgxID0geDAgLSBpMSAgKyAxLjAgKiBDLnh4eHgiLCIgIC8vICB4MiA9IHgwIC0gaTIgICsgMi4wICogQy54eHh4IiwiICAvLyAgeDMgPSB4MCAtIGkzICArIDMuMCAqIEMueHh4eCIsIiAgLy8gIHg0ID0geDAgLSAxLjAgKyA0LjAgKiBDLnh4eHgiLCIgIHZlYzQgeDEgPSB4MCAtIGkxICsgQy54eHh4OyIsIiAgdmVjNCB4MiA9IHgwIC0gaTIgKyBDLnl5eXk7IiwiICB2ZWM0IHgzID0geDAgLSBpMyArIEMuenp6ejsiLCIgIHZlYzQgeDQgPSB4MCArIEMud3d3dzsiLCIiLCIvLyBQZXJtdXRhdGlvbnMiLCIgIGkgPSBtb2QyODkoaSk7IiwiICBmbG9hdCBqMCA9IHBlcm11dGUoIHBlcm11dGUoIHBlcm11dGUoIHBlcm11dGUoaS53KSArIGkueikgKyBpLnkpICsgaS54KTsiLCIgIHZlYzQgajEgPSBwZXJtdXRlKCBwZXJtdXRlKCBwZXJtdXRlKCBwZXJtdXRlICgiLCIgICAgICAgICAgICAgaS53ICsgdmVjNChpMS53LCBpMi53LCBpMy53LCAxLjAgKSkiLCIgICAgICAgICAgICsgaS56ICsgdmVjNChpMS56LCBpMi56LCBpMy56LCAxLjAgKSkiLCIgICAgICAgICAgICsgaS55ICsgdmVjNChpMS55LCBpMi55LCBpMy55LCAxLjAgKSkiLCIgICAgICAgICAgICsgaS54ICsgdmVjNChpMS54LCBpMi54LCBpMy54LCAxLjAgKSk7IiwiIiwiLy8gR3JhZGllbnRzOiA3eDd4NiBwb2ludHMgb3ZlciBhIGN1YmUsIG1hcHBlZCBvbnRvIGEgNC1jcm9zcyBwb2x5dG9wZSIsIi8vIDcqNyo2ID0gMjk0LCB3aGljaCBpcyBjbG9zZSB0byB0aGUgcmluZyBzaXplIDE3KjE3ID0gMjg5LiIsIiAgdmVjNCBpcCA9IHZlYzQoMS4wLzI5NC4wLCAxLjAvNDkuMCwgMS4wLzcuMCwgMC4wKSA7IiwiIiwiICB2ZWM0IHAwID0gZ3JhZDQoajAsICAgaXApOyIsIiAgdmVjNCBwMSA9IGdyYWQ0KGoxLngsIGlwKTsiLCIgIHZlYzQgcDIgPSBncmFkNChqMS55LCBpcCk7IiwiICB2ZWM0IHAzID0gZ3JhZDQoajEueiwgaXApOyIsIiAgdmVjNCBwNCA9IGdyYWQ0KGoxLncsIGlwKTsiLCIiLCIvLyBOb3JtYWxpc2UgZ3JhZGllbnRzIiwiICB2ZWM0IG5vcm0gPSB0YXlsb3JJbnZTcXJ0KHZlYzQoZG90KHAwLHAwKSwgZG90KHAxLHAxKSwgZG90KHAyLCBwMiksIGRvdChwMyxwMykpKTsiLCIgIHAwICo9IG5vcm0ueDsiLCIgIHAxICo9IG5vcm0ueTsiLCIgIHAyICo9IG5vcm0uejsiLCIgIHAzICo9IG5vcm0udzsiLCIgIHA0ICo9IHRheWxvckludlNxcnQoZG90KHA0LHA0KSk7IiwiIiwiLy8gTWl4IGNvbnRyaWJ1dGlvbnMgZnJvbSB0aGUgZml2ZSBjb3JuZXJzIiwiICB2ZWMzIG0wID0gbWF4KDAuNiAtIHZlYzMoZG90KHgwLHgwKSwgZG90KHgxLHgxKSwgZG90KHgyLHgyKSksIDAuMCk7IiwiICB2ZWMyIG0xID0gbWF4KDAuNiAtIHZlYzIoZG90KHgzLHgzKSwgZG90KHg0LHg0KSAgICAgICAgICAgICksIDAuMCk7IiwiICBtMCA9IG0wICogbTA7IiwiICBtMSA9IG0xICogbTE7IiwiICByZXR1cm4gNDkuMCAqICggZG90KG0wKm0wLCB2ZWMzKCBkb3QoIHAwLCB4MCApLCBkb3QoIHAxLCB4MSApLCBkb3QoIHAyLCB4MiApKSkiLCIgICAgICAgICAgICAgICArIGRvdChtMSptMSwgdmVjMiggZG90KCBwMywgeDMgKSwgZG90KCBwNCwgeDQgKSApICkgKSA7IiwiIiwiICB9Il0uam9pbigiXG4iKTt9KSh0aGlzLkJsb3R0ZXIsdGhpcy5fKTsvLyBTZWUgTGljZW5zZSBjb21tZW50cyBpbiBzaGFkZXIgc3RyaW5nCihmdW5jdGlvbihCbG90dGVyLF8pe0Jsb3R0ZXIuQXNzZXRzLlNoYWRlcnMuUEk9WyIvLyIsIi8vIEF1dGhvciA6IFJlemEgQWxpIiwiLy8gTGljZW5zZSA6IERpc3RyaWJ1dGVkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4iLCIvLyIsIiIsIiNkZWZpbmUgVFdPX1BJIDYuMjgzMTg1MzA3MiIsIiNkZWZpbmUgUEkgMy4xNDE1OTI2NTM1OSIsIiNkZWZpbmUgSEFMRl9QSSAxLjU3MDc5NjMyNjc5Il0uam9pbigiXG4iKTt9KSh0aGlzLkJsb3R0ZXIsdGhpcy5fKTsvLyBTZWUgTGljZW5zZSBjb21tZW50cyBpbiBzaGFkZXIgc3RyaW5nCihmdW5jdGlvbihCbG90dGVyLF8pe0Jsb3R0ZXIuQXNzZXRzLlNoYWRlcnMuUmFuZG9tPVsiLy8iLCIvLyBBdXRob3IgOiBQYXRyaWNpbyBHb256YWxleiBWaXZvIGFuZCBKZW4gTG93ZSIsIi8vIExpY2Vuc2UgOiBEaXN0cmlidXRlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIiwiLy8gU291cmNlIDogaHR0cHM6Ly9naXRodWIuY29tL3BhdHJpY2lvZ29uemFsZXp2aXZvL3RoZWJvb2tvZnNoYWRlcnMiLCIvLyIsIiIsImZsb2F0IHJhbmRvbSAoaW4gZmxvYXQgX3gpIHsiLCIgICAgcmV0dXJuIGZyYWN0KHNpbihfeCkqMWU0KTsiLCJ9IiwiIiwiZmxvYXQgcmFuZG9tIChpbiB2ZWMyIGNvKSB7IiwiICAgIHJldHVybiBmcmFjdChzaW4oZG90KGNvLnh5LHZlYzIoMTIuOTg5OCw3OC4yMzMpKSkqNDM3NTguNTQ1Myk7IiwifSJdLmpvaW4oIlxuIik7fSkodGhpcy5CbG90dGVyLHRoaXMuXyk7KGZ1bmN0aW9uKEJsb3R0ZXIsXyl7QmxvdHRlci5NYXBwaW5nPWZ1bmN0aW9uKHRleHRzLHRleHRCb3VuZHMsd2lkdGgsaGVpZ2h0KXt0aGlzLnRleHRzPXRleHRzO3RoaXMuX3RleHRCb3VuZHM9dGV4dEJvdW5kczt0aGlzLl93aWR0aD13aWR0aDt0aGlzLl9oZWlnaHQ9aGVpZ2h0O3RoaXMuX3JhdGlvPTE7fTtCbG90dGVyLk1hcHBpbmcucHJvdG90eXBlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gX2dldExpbmVIZWlnaHRQaXhlbHMoc2l6ZSxsaW5lSGVpZ2h0KXtsaW5lSGVpZ2h0PWxpbmVIZWlnaHR8fEJsb3R0ZXIuVGV4dFV0aWxzLmVuc3VyZVByb3BlcnR5VmFsdWVzKCkubGVhZGluZztpZighaXNOYU4obGluZUhlaWdodCkpe2xpbmVIZWlnaHQ9c2l6ZSpsaW5lSGVpZ2h0O31lbHNlIGlmKGxpbmVIZWlnaHQudG9TdHJpbmcoKS5pbmRleE9mKCJweCIpIT09LTEpe2xpbmVIZWlnaHQ9cGFyc2VJbnQobGluZUhlaWdodCk7fWVsc2UgaWYobGluZUhlaWdodC50b1N0cmluZygpLmluZGV4T2YoIiUiKSE9PS0xKXtsaW5lSGVpZ2h0PXBhcnNlSW50KGxpbmVIZWlnaHQpLzEwMCpzaXplO31yZXR1cm4gbGluZUhlaWdodDt9cmV0dXJue2NvbnN0cnVjdG9yOkJsb3R0ZXIuTWFwcGluZyxnZXQgcmF0aW8oKXtyZXR1cm4gdGhpcy5fcmF0aW87fSxzZXQgcmF0aW8ocmF0aW8pe3RoaXMuX3JhdGlvPXJhdGlvfHwxO30sZ2V0IHdpZHRoKCl7cmV0dXJuIHRoaXMuX3dpZHRoKnRoaXMuX3JhdGlvO30sZ2V0IGhlaWdodCgpe3JldHVybiB0aGlzLl9oZWlnaHQqdGhpcy5fcmF0aW87fSxib3VuZHNGb3JUZXh0OmZ1bmN0aW9uIGJvdW5kc0ZvclRleHQodGV4dCl7QmxvdHRlci5NZXNzYWdpbmcuZW5zdXJlSW5zdGFuY2VPZih0ZXh0LEJsb3R0ZXIuVGV4dCwiQmxvdHRlci5UZXh0IiwiQmxvdHRlci5NYXBwaW5nIiwiYm91bmRzRm9yVGV4dCIpO3ZhciBib3VuZHM9dGhpcy5fdGV4dEJvdW5kc1t0ZXh0LmlkXTtpZihib3VuZHMpe2JvdW5kcz17dzpib3VuZHMudyp0aGlzLl9yYXRpbyxoOmJvdW5kcy5oKnRoaXMuX3JhdGlvLHg6Ym91bmRzLngqdGhpcy5fcmF0aW8seTpib3VuZHMueSp0aGlzLl9yYXRpb307fXJldHVybiBib3VuZHM7fSx0b0NhbnZhczpmdW5jdGlvbiB0b0NhbnZhcyhjb21wbGV0aW9uKXt2YXIgY2FudmFzPUJsb3R0ZXIuQ2FudmFzVXRpbHMuaGlEcGlDYW52YXModGhpcy5fd2lkdGgsdGhpcy5faGVpZ2h0LHRoaXMuX3JhdGlvKSxjdHg9Y2FudmFzLmdldENvbnRleHQoIjJkIix7YWxwaGE6ZmFsc2V9KSxpbWc9bmV3IEltYWdlKCk7Y3R4LnRleHRCYXNlbGluZT0ibWlkZGxlIjtmb3IodmFyIGk9MDtpPHRoaXMudGV4dHMubGVuZ3RoO2krKyl7dmFyIHRleHQ9dGhpcy50ZXh0c1tpXSxib3VuZHM9dGhpcy5fdGV4dEJvdW5kc1t0ZXh0LmlkXSxoYWxmTEg9X2dldExpbmVIZWlnaHRQaXhlbHMuY2FsbCh0aGlzLHRleHQucHJvcGVydGllcy5zaXplLHRleHQucHJvcGVydGllcy5sZWFkaW5nKS8yO2N0eC5mb250PXRleHQucHJvcGVydGllcy5zdHlsZSsiICIrdGV4dC5wcm9wZXJ0aWVzLndlaWdodCsiICIrdGV4dC5wcm9wZXJ0aWVzLnNpemUrInB4IisiICIrdGV4dC5wcm9wZXJ0aWVzLmZhbWlseTtjdHguc2F2ZSgpO2N0eC50cmFuc2xhdGUoYm91bmRzLngrdGV4dC5wcm9wZXJ0aWVzLnBhZGRpbmdMZWZ0LHRoaXMuX2hlaWdodC0oYm91bmRzLnkrYm91bmRzLmgpK3RleHQucHJvcGVydGllcy5wYWRkaW5nVG9wKTtjdHguZmlsbFN0eWxlPXRleHQucHJvcGVydGllcy5maWxsO2N0eC5maWxsVGV4dCh0ZXh0LnZhbHVlLDAsTWF0aC5yb3VuZChoYWxmTEgpKTtjdHgucmVzdG9yZSgpO31pbWcub25sb2FkPV8uYmluZChmdW5jdGlvbigpey8vIEZsaXAgWSBmb3IgV2ViR0wKY3R4LnNhdmUoKTtjdHguc2NhbGUoMSwtMSk7Y3R4LmNsZWFyUmVjdCgwLHRoaXMuX2hlaWdodCotMSx0aGlzLl93aWR0aCx0aGlzLl9oZWlnaHQpO2N0eC5kcmF3SW1hZ2UoaW1nLDAsdGhpcy5faGVpZ2h0Ki0xLHRoaXMuX3dpZHRoLHRoaXMuX2hlaWdodCk7Y3R4LnJlc3RvcmUoKTtjb21wbGV0aW9uKGNhbnZhcyk7fSx0aGlzKTtpbWcuc3JjPWNhbnZhcy50b0RhdGFVUkwoImltYWdlL3BuZyIpO319O30oKTt9KSh0aGlzLkJsb3R0ZXIsdGhpcy5fKTsoZnVuY3Rpb24oQmxvdHRlcixfLEV2ZW50RW1pdHRlcil7QmxvdHRlci5NYXBwaW5nTWF0ZXJpYWw9ZnVuY3Rpb24obWFwcGluZyxtYXRlcmlhbCxzaGFkZXJNYXRlcmlhbCx1c2VyVW5pZm9ybURhdGFUZXh0dXJlT2JqZWN0cyl7dGhpcy5tYXBwaW5nPW1hcHBpbmc7dGhpcy5tYXRlcmlhbD1tYXRlcmlhbDt0aGlzLnNoYWRlck1hdGVyaWFsPXNoYWRlck1hdGVyaWFsO3RoaXMuX3VzZXJVbmlmb3JtRGF0YVRleHR1cmVPYmplY3RzPXVzZXJVbmlmb3JtRGF0YVRleHR1cmVPYmplY3RzO3RoaXMuaW5pdC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fTtCbG90dGVyLk1hcHBpbmdNYXRlcmlhbC5wcm90b3R5cGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBfc2V0VmFsdWVBdEluZGV4SW5EYXRhVGV4dHVyZU9iamVjdCh2YWx1ZSxpLGRhdGEsdXNlclVuaWZvcm0pe3ZhciB0eXBlPXVzZXJVbmlmb3JtLnR5cGU7aWYodHlwZT09IjFmIil7ZGF0YVs0KmldPXZhbHVlOy8vIHggKHIpCmRhdGFbNCppKzFdPTAuMDtkYXRhWzQqaSsyXT0wLjA7ZGF0YVs0KmkrM109MC4wO31lbHNlIGlmKHR5cGU9PSIyZiIpe2RhdGFbNCppXT12YWx1ZVswXTsvLyB4IChyKQpkYXRhWzQqaSsxXT12YWx1ZVsxXTsvLyB5IChnKQpkYXRhWzQqaSsyXT0wLjA7ZGF0YVs0KmkrM109MC4wO31lbHNlIGlmKHR5cGU9PSIzZiIpe2RhdGFbNCppXT12YWx1ZVswXTsvLyB4IChyKQpkYXRhWzQqaSsxXT12YWx1ZVsxXTsvLyB5IChnKQpkYXRhWzQqaSsyXT12YWx1ZVsyXTsvLyB6IChiKQpkYXRhWzQqaSszXT0wLjA7fWVsc2UgaWYodHlwZT09IjRmIil7ZGF0YVs0KmldPXZhbHVlWzBdOy8vIHggKHIpCmRhdGFbNCppKzFdPXZhbHVlWzFdOy8vIHkgKGcpCmRhdGFbNCppKzJdPXZhbHVlWzJdOy8vIHogKGIpCmRhdGFbNCppKzNdPXZhbHVlWzNdOy8vIHcgKGEpCn1lbHNle2RhdGFbNCppXT0wLjA7ZGF0YVs0KmkrMV09MC4wO2RhdGFbNCppKzJdPTAuMDtkYXRhWzQqaSszXT0wLjA7fX1mdW5jdGlvbiBfZ2V0VW5pZm9ybUludGVyZmFjZUZvckRhdGFUZXh0dXJlT2JqZWN0KGRhdGFUZXh0dXJlT2JqZWN0KXt2YXIgaXRmYWNlPXtfdHlwZTpkYXRhVGV4dHVyZU9iamVjdC51c2VyVW5pZm9ybS50eXBlLF92YWx1ZTpkYXRhVGV4dHVyZU9iamVjdC51c2VyVW5pZm9ybS52YWx1ZSxnZXQgdmFsdWUoKXtyZXR1cm4gdGhpcy5fdmFsdWU7fSxzZXQgdmFsdWUodil7aWYoIUJsb3R0ZXIuVW5pZm9ybVV0aWxzLnZhbGlkVmFsdWVGb3JVbmlmb3JtVHlwZSh0aGlzLl90eXBlLHYpKXtCbG90dGVyLk1lc3NhZ2luZy5sb2dFcnJvcigiQmxvdHRlci5NYXBwaW5nTWF0ZXJpYWwiLGZhbHNlLCJ1bmlmb3JtIHZhbHVlIG5vdCB2YWxpZCBmb3IgdW5pZm9ybSB0eXBlOiAiK3RoaXMuX3R5cGUpO3JldHVybjt9dGhpcy5fdmFsdWU9djt0aGlzLnRyaWdnZXIoInVwZGF0ZSIpO319O18uZXh0ZW5kKGl0ZmFjZSxFdmVudEVtaXR0ZXIucHJvdG90eXBlKTtyZXR1cm4gaXRmYWNlO31mdW5jdGlvbiBfZ2V0VGV4dFVuaWZvcm1JbnRlcmZhY2UobWFwcGluZyx1c2VyVW5pZm9ybURhdGFUZXh0dXJlT2JqZWN0cyl7cmV0dXJuIF8ucmVkdWNlKG1hcHBpbmcudGV4dHMsZnVuY3Rpb24obWVtbyx0ZXh0LHRleHRJbmRleCl7bWVtb1t0ZXh0LmlkXT1fLnJlZHVjZSh1c2VyVW5pZm9ybURhdGFUZXh0dXJlT2JqZWN0cy51c2VyVW5pZm9ybXMsZnVuY3Rpb24obWVtbyxkYXRhVGV4dHVyZU9iamVjdCx1bmlmb3JtTmFtZSl7dmFyIHVuaWZvcm1JbmRleD1kYXRhVGV4dHVyZU9iamVjdC5wb3NpdGlvbit0ZXh0SW5kZXg7bWVtb1t1bmlmb3JtTmFtZV09X2dldFVuaWZvcm1JbnRlcmZhY2VGb3JEYXRhVGV4dHVyZU9iamVjdChkYXRhVGV4dHVyZU9iamVjdCk7bWVtb1t1bmlmb3JtTmFtZV0ub24oInVwZGF0ZSIsZnVuY3Rpb24oKXtfc2V0VmFsdWVBdEluZGV4SW5EYXRhVGV4dHVyZU9iamVjdChtZW1vW3VuaWZvcm1OYW1lXS52YWx1ZSx1bmlmb3JtSW5kZXgsdXNlclVuaWZvcm1EYXRhVGV4dHVyZU9iamVjdHMuZGF0YSxkYXRhVGV4dHVyZU9iamVjdC51c2VyVW5pZm9ybSk7dXNlclVuaWZvcm1EYXRhVGV4dHVyZU9iamVjdHMudGV4dHVyZS5uZWVkc1VwZGF0ZT10cnVlO30pO21lbW9bdW5pZm9ybU5hbWVdLnZhbHVlPWRhdGFUZXh0dXJlT2JqZWN0LnVzZXJVbmlmb3JtLnZhbHVlO3JldHVybiBtZW1vO30se30pO3JldHVybiBtZW1vO30se30pO31mdW5jdGlvbiBfZ2V0VW5pZm9ybUludGVyZmFjZShtYXBwaW5nLHVzZXJVbmlmb3JtRGF0YVRleHR1cmVPYmplY3RzLHRleHRVbmlmb3JtSW50ZXJmYWNlKXtyZXR1cm4gXy5yZWR1Y2UodXNlclVuaWZvcm1EYXRhVGV4dHVyZU9iamVjdHMudXNlclVuaWZvcm1zLGZ1bmN0aW9uKG1lbW8sZGF0YVRleHR1cmVPYmplY3QsdW5pZm9ybU5hbWUpe21lbW9bdW5pZm9ybU5hbWVdPV9nZXRVbmlmb3JtSW50ZXJmYWNlRm9yRGF0YVRleHR1cmVPYmplY3QoZGF0YVRleHR1cmVPYmplY3QpO21lbW9bdW5pZm9ybU5hbWVdLm9uKCJ1cGRhdGUiLGZ1bmN0aW9uKCl7Xy5lYWNoKG1hcHBpbmcudGV4dHMsZnVuY3Rpb24odGV4dCl7dGV4dFVuaWZvcm1JbnRlcmZhY2VbdGV4dC5pZF1bdW5pZm9ybU5hbWVdLnZhbHVlPW1lbW9bdW5pZm9ybU5hbWVdLnZhbHVlO30pO3VzZXJVbmlmb3JtRGF0YVRleHR1cmVPYmplY3RzLnRleHR1cmUubmVlZHNVcGRhdGU9dHJ1ZTt9KTtyZXR1cm4gbWVtbzt9LHt9KTt9cmV0dXJue2NvbnN0cnVjdG9yOkJsb3R0ZXIuTWFwcGluZ01hdGVyaWFsLGdldCB1bmlmb3Jtcygpe3JldHVybiB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zO30sZ2V0IG1haW5JbWFnZSgpe3JldHVybiB0aGlzLm1hdGVyaWFsLm1haW5JbWFnZTt9LGdldCB3aWR0aCgpe3JldHVybiB0aGlzLm1hcHBpbmcud2lkdGg7fSxnZXQgaGVpZ2h0KCl7cmV0dXJuIHRoaXMubWFwcGluZy5oZWlnaHQ7fSxnZXQgcmF0aW8oKXtyZXR1cm4gdGhpcy5tYXBwaW5nLnJhdGlvO30saW5pdDpmdW5jdGlvbiBpbml0KG1hcHBpbmcsbWF0ZXJpYWwsc2hhZGVyTWF0ZXJpYWwsdXNlclVuaWZvcm1EYXRhVGV4dHVyZU9iamVjdHMpe3RoaXMudGV4dFVuaWZvcm1JbnRlcmZhY2U9X2dldFRleHRVbmlmb3JtSW50ZXJmYWNlKHRoaXMubWFwcGluZyx0aGlzLl91c2VyVW5pZm9ybURhdGFUZXh0dXJlT2JqZWN0cyk7dGhpcy51bmlmb3JtSW50ZXJmYWNlPV9nZXRVbmlmb3JtSW50ZXJmYWNlKHRoaXMubWFwcGluZyx0aGlzLl91c2VyVW5pZm9ybURhdGFUZXh0dXJlT2JqZWN0cyx0aGlzLnRleHRVbmlmb3JtSW50ZXJmYWNlKTt9LGJvdW5kc0ZvclRleHQ6ZnVuY3Rpb24gYm91bmRzRm9yVGV4dCh0ZXh0KXtCbG90dGVyLk1lc3NhZ2luZy5lbnN1cmVJbnN0YW5jZU9mKHRleHQsQmxvdHRlci5UZXh0LCJCbG90dGVyLlRleHQiLCJCbG90dGVyLk1hcHBpbmdNYXRlcmlhbCIsImJvdW5kc0ZvclRleHQiKTtyZXR1cm4gdGhpcy5tYXBwaW5nLmJvdW5kc0ZvclRleHQodGV4dCk7fX07fSgpO30pKHRoaXMuQmxvdHRlcix0aGlzLl8sdGhpcy5FdmVudEVtaXR0ZXIpOyhmdW5jdGlvbihCbG90dGVyLF8sRXZlbnRFbWl0dGVyKXtCbG90dGVyLk1hdGVyaWFsPWZ1bmN0aW9uKCl7dGhpcy5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9O0Jsb3R0ZXIuTWF0ZXJpYWwucHJvdG90eXBlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gX2RlZmF1bHRNYWluSW1hZ2VTcmMoKXt2YXIgbWFpbkltYWdlPVsidm9pZCBtYWluSW1hZ2UoIG91dCB2ZWM0IG1haW5JbWFnZSwgaW4gdmVjMiBmcmFnQ29vcmQgKSB7IiwibWFpbkltYWdlID0gdGV4dFRleHR1cmUoZnJhZ0Nvb3JkIC8gdVJlc29sdXRpb24pOyIsIn0iXTtyZXR1cm4gbWFpbkltYWdlLmpvaW4oIlxuIik7fWZ1bmN0aW9uIF9nZXRVbmlmb3JtSW50ZXJmYWNlRm9yVW5pZm9ybURlc2NyaXB0aW9uKHVuaWZvcm1EZXNjcmlwdGlvbil7dmFyIGl0ZmFjZT17X3R5cGU6dW5pZm9ybURlc2NyaXB0aW9uLnR5cGUsX3ZhbHVlOnVuaWZvcm1EZXNjcmlwdGlvbi52YWx1ZSxnZXQgdHlwZSgpe3JldHVybiB0aGlzLl90eXBlO30sc2V0IHR5cGUodil7dGhpcy5fdHlwZT12O30sZ2V0IHZhbHVlKCl7cmV0dXJuIHRoaXMuX3ZhbHVlO30sc2V0IHZhbHVlKHYpe2lmKCFCbG90dGVyLlVuaWZvcm1VdGlscy52YWxpZFZhbHVlRm9yVW5pZm9ybVR5cGUodGhpcy5fdHlwZSx2KSl7QmxvdHRlci5NZXNzYWdpbmcubG9nRXJyb3IoIkJsb3R0ZXIuTWF0ZXJpYWwiLGZhbHNlLCJ1bmlmb3JtIHZhbHVlIG5vdCB2YWxpZCBmb3IgdW5pZm9ybSB0eXBlOiAiK3RoaXMuX3R5cGUpO3JldHVybjt9dGhpcy5fdmFsdWU9djt0aGlzLnRyaWdnZXIoInVwZGF0ZSIpO319O18uZXh0ZW5kKGl0ZmFjZSxFdmVudEVtaXR0ZXIucHJvdG90eXBlKTtyZXR1cm4gaXRmYWNlO31mdW5jdGlvbiBfZ2V0VW5pZm9ybUludGVyZmFjZSh1bmlmb3Jtcyl7cmV0dXJuIF8ucmVkdWNlKHVuaWZvcm1zLF8uYmluZChmdW5jdGlvbihtZW1vLHVuaWZvcm1EZXNjcmlwdGlvbix1bmlmb3JtTmFtZSl7bWVtb1t1bmlmb3JtTmFtZV09X2dldFVuaWZvcm1JbnRlcmZhY2VGb3JVbmlmb3JtRGVzY3JpcHRpb24odW5pZm9ybURlc2NyaXB0aW9uKTttZW1vW3VuaWZvcm1OYW1lXS5vbigidXBkYXRlIixfLmJpbmQoZnVuY3Rpb24oKXt0aGlzLnRyaWdnZXIoInVwZGF0ZTp1bmlmb3JtIixbdW5pZm9ybU5hbWVdKTt9LHRoaXMpKTtyZXR1cm4gbWVtbzt9LHRoaXMpLHt9KTt9cmV0dXJue2NvbnN0cnVjdG9yOkJsb3R0ZXIuTWF0ZXJpYWwsZ2V0IG5lZWRzVXBkYXRlKCl7fSwvLyBqc2hpbnQKc2V0IG5lZWRzVXBkYXRlKHZhbHVlKXtpZih2YWx1ZT09PXRydWUpe3RoaXMudHJpZ2dlcigidXBkYXRlIik7fX0sZ2V0IG1haW5JbWFnZSgpe3JldHVybiB0aGlzLl9tYWluSW1hZ2U7fSxzZXQgbWFpbkltYWdlKG1haW5JbWFnZSl7dGhpcy5fbWFpbkltYWdlPW1haW5JbWFnZXx8X2RlZmF1bHRNYWluSW1hZ2VTcmMoKTt9LGdldCB1bmlmb3Jtcygpe3JldHVybiB0aGlzLl91bmlmb3Jtczt9LHNldCB1bmlmb3Jtcyh1bmlmb3Jtcyl7dGhpcy5fdW5pZm9ybXM9X2dldFVuaWZvcm1JbnRlcmZhY2UuY2FsbCh0aGlzLEJsb3R0ZXIuVW5pZm9ybVV0aWxzLmV4dHJhY3RWYWxpZFVuaWZvcm1zKF8uZXh0ZW5kKHVuaWZvcm1zLEJsb3R0ZXIuVW5pZm9ybVV0aWxzLmRlZmF1bHRVbmlmb3JtcykpKTt9LGluaXQ6ZnVuY3Rpb24gaW5pdCgpe3RoaXMubWFpbkltYWdlPV9kZWZhdWx0TWFpbkltYWdlU3JjKCk7dGhpcy51bmlmb3Jtcz17fTt9fTt9KCk7QmxvdHRlci5fZXh0ZW5kV2l0aEdldHRlcnNTZXR0ZXJzKEJsb3R0ZXIuTWF0ZXJpYWwucHJvdG90eXBlLEV2ZW50RW1pdHRlci5wcm90b3R5cGUpO30pKHRoaXMuQmxvdHRlcix0aGlzLl8sdGhpcy5FdmVudEVtaXR0ZXIpOyhmdW5jdGlvbihCbG90dGVyLF8pe0Jsb3R0ZXIuU2hhZGVyTWF0ZXJpYWw9ZnVuY3Rpb24obWFpbkltYWdlLG9wdGlvbnMpe0Jsb3R0ZXIuTWF0ZXJpYWwuYXBwbHkodGhpcyxhcmd1bWVudHMpO307QmxvdHRlci5TaGFkZXJNYXRlcmlhbC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShCbG90dGVyLk1hdGVyaWFsLnByb3RvdHlwZSk7QmxvdHRlci5fZXh0ZW5kV2l0aEdldHRlcnNTZXR0ZXJzKEJsb3R0ZXIuU2hhZGVyTWF0ZXJpYWwucHJvdG90eXBlLGZ1bmN0aW9uKCl7cmV0dXJue2NvbnN0cnVjdG9yOkJsb3R0ZXIuU2hhZGVyTWF0ZXJpYWwsaW5pdDpmdW5jdGlvbiBpbml0KG1haW5JbWFnZSxvcHRpb25zKXtfLmRlZmF1bHRzKHRoaXMsb3B0aW9ucyk7dGhpcy5tYWluSW1hZ2U9bWFpbkltYWdlO319O30oKSk7fSkodGhpcy5CbG90dGVyLHRoaXMuXyk7KGZ1bmN0aW9uKEJsb3R0ZXIsXyxFdmVudEVtaXR0ZXIpe0Jsb3R0ZXIuUmVuZGVyU2NvcGU9ZnVuY3Rpb24odGV4dCxibG90dGVyKXt0aGlzLnRleHQ9dGV4dDt0aGlzLmJsb3R0ZXI9YmxvdHRlcjt0aGlzLm1hdGVyaWFsPXttYWluSW1hZ2U6dGhpcy5ibG90dGVyLm1hdGVyaWFsLm1haW5JbWFnZX07dGhpcy5fbWFwcGluZ01hdGVyaWFsPWJsb3R0ZXIubWFwcGluZ01hdGVyaWFsO3RoaXMucGxheWluZz10aGlzLmJsb3R0ZXIuYXV0b3BsYXk7dGhpcy50aW1lRGVsdGE9MDt0aGlzLmxhc3REcmF3VGltZT1mYWxzZTt0aGlzLmZyYW1lQ291bnQ9MDt0aGlzLmRvbUVsZW1lbnQ9QmxvdHRlci5DYW52YXNVdGlscy5oaURwaUNhbnZhcygwLDAsdGhpcy5ibG90dGVyLnJhdGlvLHtjbGFzczoiYi1jYW52YXMiLGh0bWw6dGV4dC52YWx1ZX0pO3RoaXMuY29udGV4dD10aGlzLmRvbUVsZW1lbnQuZ2V0Q29udGV4dCgiMmQiKTt9O0Jsb3R0ZXIuUmVuZGVyU2NvcGUucHJvdG90eXBlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gX3NldE1vdXNlRXZlbnRMaXN0ZW5lcnMoKXt2YXIgc2VsZj10aGlzLGV2ZW50TmFtZXM9WyJtb3VzZWRvd24iLCJtb3VzZXVwIiwibW91c2Vtb3ZlIiwibW91c2VlbnRlciIsIm1vdXNlbGVhdmUiXTtmdW5jdGlvbiBzZXRNb3VzZUxpc3RlbmVyKGV2ZW50TmFtZSl7c2VsZi5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLGZ1bmN0aW9uKGUpe3ZhciBwb3NpdGlvbj1CbG90dGVyLkNhbnZhc1V0aWxzLm5vcm1hbGl6ZWRNb3VzZVBvc2l0aW9uKHNlbGYuZG9tRWxlbWVudCxlKTtzZWxmLmVtaXQoZXZlbnROYW1lLHBvc2l0aW9uKTt9LGZhbHNlKTt9Zm9yKHZhciBpPTA7aTxldmVudE5hbWVzLmxlbmd0aDtpKyspe3ZhciBldmVudE5hbWU9ZXZlbnROYW1lc1tpXTtzZXRNb3VzZUxpc3RlbmVyKGV2ZW50TmFtZSk7fX1mdW5jdGlvbiBfZ2V0Qm91bmRzRm9yTWFwcGluZ01hdGVyaWFsQW5kVGV4dChtYXBwaW5nTWF0ZXJpYWwsdGV4dCl7dmFyIGJvdW5kcz1tYXBwaW5nTWF0ZXJpYWwuYm91bmRzRm9yVGV4dCh0ZXh0KTtpZihib3VuZHMpe3JldHVybnt3OmJvdW5kcy53LGg6Ym91bmRzLmgseDotMSpNYXRoLmZsb29yKGJvdW5kcy54KSx5Oi0xKk1hdGguZmxvb3IobWFwcGluZ01hdGVyaWFsLmhlaWdodC0oYm91bmRzLnkrYm91bmRzLmgpKX07fX1mdW5jdGlvbiBfdHJhbnNmZXJJbmZlcmZhY2VWYWx1ZXMob2xkSW50ZXJmYWNlLG5ld0ludGVyZmFjZSl7Xy5lYWNoKG9sZEludGVyZmFjZSxmdW5jdGlvbihpbnRlcmZhY2VPYmplY3QsdW5pZm9ybU5hbWUpe3ZhciBuZXdJbnRlcmZhY2VPYmplY3Q9bmV3SW50ZXJmYWNlW3VuaWZvcm1OYW1lXTtpZihuZXdJbnRlcmZhY2VPYmplY3Qpe3ZhciB0eXBlc01hdGNoPW5ld0ludGVyZmFjZU9iamVjdC50eXBlPT1pbnRlcmZhY2VPYmplY3QudHlwZSx2YWx1ZXNNYXRjaD1uZXdJbnRlcmZhY2VPYmplY3QudmFsdWU9PWludGVyZmFjZU9iamVjdC52YWx1ZTtpZih0eXBlc01hdGNoJiYhdmFsdWVzTWF0Y2gpe25ld0ludGVyZmFjZU9iamVjdC52YWx1ZT1pbnRlcmZhY2VPYmplY3QudmFsdWU7fX19KTt9ZnVuY3Rpb24gX2dldFVuaWZvcm1JbnRlcmZhY2VGb3JVbmlmb3JtRGVzY3JpcHRpb24odW5pZm9ybURlc2NyaXB0aW9uKXt2YXIgaXRmYWNlPXtfdHlwZTp1bmlmb3JtRGVzY3JpcHRpb24udHlwZSxfdmFsdWU6dW5pZm9ybURlc2NyaXB0aW9uLnZhbHVlLGdldCB0eXBlKCl7cmV0dXJuIHRoaXMuX3R5cGU7fSxzZXQgdHlwZSh2KXtCbG90dGVyLk1lc3NhZ2luZy5sb2dFcnJvcigiQmxvdHRlci5SZW5kZXJTY29wZSIsZmFsc2UsInVuaWZvcm0gdHlwZXMgbWF5IG5vdCBiZSB1cGRhdGVkIHRocm91Z2ggYSB0ZXh0IHNjb3BlIik7fSxnZXQgdmFsdWUoKXtyZXR1cm4gdGhpcy5fdmFsdWU7fSxzZXQgdmFsdWUodil7aWYoIUJsb3R0ZXIuVW5pZm9ybVV0aWxzLnZhbGlkVmFsdWVGb3JVbmlmb3JtVHlwZSh0aGlzLl90eXBlLHYpKXtCbG90dGVyLk1lc3NhZ2luZy5sb2dFcnJvcigiQmxvdHRlci5SZW5kZXJTY29wZSIsZmFsc2UsInVuaWZvcm0gdmFsdWUgbm90IHZhbGlkIGZvciB1bmlmb3JtIHR5cGU6ICIrdGhpcy5fdHlwZSk7cmV0dXJuO310aGlzLl92YWx1ZT12O3RoaXMudHJpZ2dlcigidXBkYXRlIik7fX07Xy5leHRlbmQoaXRmYWNlLEV2ZW50RW1pdHRlci5wcm90b3R5cGUpO3JldHVybiBpdGZhY2U7fWZ1bmN0aW9uIF9nZXRVbmlmb3JtSW50ZXJmYWNlRm9yTWF0ZXJpYWxVbmlmb3Jtcyh1bmlmb3Jtcyl7cmV0dXJuIF8ucmVkdWNlKHVuaWZvcm1zLF8uYmluZChmdW5jdGlvbihtZW1vLHVuaWZvcm1EZXNjcmlwdGlvbix1bmlmb3JtTmFtZSl7bWVtb1t1bmlmb3JtTmFtZV09X2dldFVuaWZvcm1JbnRlcmZhY2VGb3JVbmlmb3JtRGVzY3JpcHRpb24odW5pZm9ybURlc2NyaXB0aW9uKTttZW1vW3VuaWZvcm1OYW1lXS5vbigidXBkYXRlIixfLmJpbmQoZnVuY3Rpb24oKXt0aGlzLnRyaWdnZXIoInVwZGF0ZTp1bmlmb3JtIixbdW5pZm9ybU5hbWVdKTt9LHRoaXMpKTtyZXR1cm4gbWVtbzt9LHRoaXMpLHt9KTt9ZnVuY3Rpb24gX3VwZGF0ZSgpe3ZhciBtYXBwaW5nTWF0ZXJpYWw9dGhpcy5fbWFwcGluZ01hdGVyaWFsLGJvdW5kcz1tYXBwaW5nTWF0ZXJpYWwmJl9nZXRCb3VuZHNGb3JNYXBwaW5nTWF0ZXJpYWxBbmRUZXh0KG1hcHBpbmdNYXRlcmlhbCx0aGlzLnRleHQpLHByZXZpb3VzVW5pZm9ybXM9dGhpcy5tYXRlcmlhbC51bmlmb3JtcztpZihtYXBwaW5nTWF0ZXJpYWwmJmJvdW5kcyl7QmxvdHRlci5DYW52YXNVdGlscy51cGRhdGVDYW52YXNTaXplKHRoaXMuZG9tRWxlbWVudCxib3VuZHMudy90aGlzLmJsb3R0ZXIucmF0aW8sYm91bmRzLmgvdGhpcy5ibG90dGVyLnJhdGlvLHRoaXMuYmxvdHRlci5yYXRpbyk7dGhpcy5kb21FbGVtZW50LmlubmVySFRNTD10aGlzLnRleHQudmFsdWU7dGhpcy5ib3VuZHM9Ym91bmRzO3RoaXMubWF0ZXJpYWwudW5pZm9ybXM9X2dldFVuaWZvcm1JbnRlcmZhY2VGb3JNYXRlcmlhbFVuaWZvcm1zLmNhbGwodGhpcyxtYXBwaW5nTWF0ZXJpYWwudW5pZm9ybXMpO3RoaXMubWF0ZXJpYWwubWFpbkltYWdlPW1hcHBpbmdNYXRlcmlhbC5tYWluSW1hZ2U7aWYocHJldmlvdXNVbmlmb3Jtcyl7X3RyYW5zZmVySW5mZXJmYWNlVmFsdWVzKHByZXZpb3VzVW5pZm9ybXMsdGhpcy5tYXRlcmlhbC51bmlmb3Jtcyk7fXRoaXMudHJpZ2dlcih0aGlzLmxhc3RVcGRhdGVkPyJ1cGRhdGUiOiJyZWFkeSIpO3RoaXMubGFzdFVwZGF0ZWQ9RGF0ZS5ub3coKTt9fXJldHVybntjb25zdHJ1Y3RvcjpCbG90dGVyLlJlbmRlclNjb3BlLGdldCBuZWVkc1VwZGF0ZSgpe30sLy8ganNoaW50CnNldCBuZWVkc1VwZGF0ZSh2YWx1ZSl7aWYodmFsdWU9PT10cnVlKXtfdXBkYXRlLmNhbGwodGhpcyk7fX0sZ2V0IG1hcHBpbmdNYXRlcmlhbCgpe30sc2V0IG1hcHBpbmdNYXRlcmlhbChtYXBwaW5nTWF0ZXJpYWwpe3RoaXMuX21hcHBpbmdNYXRlcmlhbD1tYXBwaW5nTWF0ZXJpYWw7fSxwbGF5OmZ1bmN0aW9uIHBsYXkoKXt0aGlzLnBsYXlpbmc9dHJ1ZTt9LHBhdXNlOmZ1bmN0aW9uIHBhdXNlKCl7dGhpcy5wbGF5aW5nPWZhbHNlO30scmVuZGVyOmZ1bmN0aW9uIHJlbmRlcigpe2lmKHRoaXMuYm91bmRzKXt2YXIgbm93PURhdGUubm93KCk7dGhpcy5mcmFtZUNvdW50Kz0xO3RoaXMudGltZURlbHRhPShub3ctKHRoaXMubGFzdERyYXdUaW1lfHxub3cpKS8xMDAwO3RoaXMubGFzdERyYXdUaW1lPW5vdzt0aGlzLmNvbnRleHQuY2xlYXJSZWN0KDAsMCx0aGlzLmRvbUVsZW1lbnQud2lkdGgsdGhpcy5kb21FbGVtZW50LmhlaWdodCk7dGhpcy5jb250ZXh0LnB1dEltYWdlRGF0YSh0aGlzLmJsb3R0ZXIuaW1hZ2VEYXRhLHRoaXMuYm91bmRzLngsdGhpcy5ib3VuZHMueSk7dGhpcy50cmlnZ2VyKCJyZW5kZXIiLFt0aGlzLmZyYW1lQ291bnRdKTt9fSxhcHBlbmRUbzpmdW5jdGlvbiBhcHBlbmRUbyhlbGVtZW50KXtpZih0eXBlb2YgZWxlbWVudC5hcHBlbmQ9PT0iZnVuY3Rpb24iKXtlbGVtZW50LmFwcGVuZCh0aGlzLmRvbUVsZW1lbnQpO31lbHNle2VsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5kb21FbGVtZW50KTt9X3NldE1vdXNlRXZlbnRMaXN0ZW5lcnMuY2FsbCh0aGlzKTtyZXR1cm4gdGhpczt9fTt9KCk7QmxvdHRlci5fZXh0ZW5kV2l0aEdldHRlcnNTZXR0ZXJzKEJsb3R0ZXIuUmVuZGVyU2NvcGUucHJvdG90eXBlLEV2ZW50RW1pdHRlci5wcm90b3R5cGUpO30pKHRoaXMuQmxvdHRlcix0aGlzLl8sdGhpcy5FdmVudEVtaXR0ZXIpOyhmdW5jdGlvbihCbG90dGVyLF8sVEhSRUUsRXZlbnRFbWl0dGVyKXt2YXIgcm9vdD10aGlzO0Jsb3R0ZXIuUmVuZGVyZXI9ZnVuY3Rpb24oKXt0aGlzLl9jdXJyZW50QW5pbWF0aW9uTG9vcD1mYWxzZTt0aGlzLl9zY2VuZT1uZXcgVEhSRUUuU2NlbmUoKTt0aGlzLl9wbGFuZT1uZXcgVEhSRUUuUGxhbmVHZW9tZXRyeSgxLDEpO3RoaXMuX21hdGVyaWFsPW5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCgpOy8vIFN0dWIgbWF0ZXJpYWwuCnRoaXMuX21lc2g9bmV3IFRIUkVFLk1lc2godGhpcy5fcGxhbmUsdGhpcy5fbWF0ZXJpYWwpO3RoaXMuX3NjZW5lLmFkZCh0aGlzLl9tZXNoKTt0aGlzLl9jYW1lcmE9bmV3IFRIUkVFLk9ydGhvZ3JhcGhpY0NhbWVyYSgwLjUsMC41LDAuNSwwLjUsMCwxMDApO3RoaXMuaW5pdC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fTtCbG90dGVyLlJlbmRlcmVyLnByb3RvdHlwZT1mdW5jdGlvbigpe2Z1bmN0aW9uIF9nZXRSZW5kZXJUYXJnZXRXaXRoU2l6ZSh3aWR0aCxoZWlnaHQpe3ZhciByZW5kZXJUYXJnZXQ9bmV3IFRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0KHdpZHRoLGhlaWdodCx7bWluRmlsdGVyOlRIUkVFLkxpbmVhckZpbHRlcixtYWdGaWx0ZXI6VEhSRUUuTGluZWFyRmlsdGVyLGZvcm1hdDpUSFJFRS5SR0JBRm9ybWF0LHR5cGU6VEhSRUUuVW5zaWduZWRCeXRlVHlwZX0pO3JlbmRlclRhcmdldC50ZXh0dXJlLmdlbmVyYXRlTWlwbWFwcz1mYWxzZTtyZW5kZXJUYXJnZXQud2lkdGg9d2lkdGg7cmVuZGVyVGFyZ2V0LmhlaWdodD1oZWlnaHQ7cmV0dXJuIHJlbmRlclRhcmdldDt9ZnVuY3Rpb24gX2xvb3AoKXtCbG90dGVyLndlYmdsUmVuZGVyZXIucmVuZGVyKHRoaXMuX3NjZW5lLHRoaXMuX2NhbWVyYSx0aGlzLl9yZW5kZXJUYXJnZXQpO0Jsb3R0ZXIud2ViZ2xSZW5kZXJlci5yZWFkUmVuZGVyVGFyZ2V0UGl4ZWxzKHRoaXMuX3JlbmRlclRhcmdldCwwLDAsdGhpcy5fcmVuZGVyVGFyZ2V0LndpZHRoLHRoaXMuX3JlbmRlclRhcmdldC5oZWlnaHQsdGhpcy5faW1hZ2VEYXRhQXJyYXkpO3RoaXMudHJpZ2dlcigicmVuZGVyIik7dGhpcy5fY3VycmVudEFuaW1hdGlvbkxvb3A9cm9vdC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoXy5iaW5kKF9sb29wLHRoaXMpKTt9cmV0dXJue2NvbnN0cnVjdG9yOkJsb3R0ZXIuUmVuZGVyZXIsZ2V0IG1hdGVyaWFsKCl7fSwvLyBqc2hpbnQKc2V0IG1hdGVyaWFsKG1hdGVyaWFsKXtpZihtYXRlcmlhbCBpbnN0YW5jZW9mIFRIUkVFLk1hdGVyaWFsKXt0aGlzLl9tYXRlcmlhbD1tYXRlcmlhbDt0aGlzLl9tZXNoLm1hdGVyaWFsPW1hdGVyaWFsO319LGdldCB3aWR0aCgpe3JldHVybiB0aGlzLl93aWR0aDt9LHNldCB3aWR0aCh3aWR0aCl7dGhpcy5zZXRTaXplKHdpZHRoLHRoaXMuX2hlaWdodCk7fSxnZXQgaGVpZ2h0KCl7cmV0dXJuIHRoaXMuX2hlaWdodDt9LHNldCBoZWlnaHQoaGVpZ2h0KXt0aGlzLnNldFNpemUodGhpcy5fd2lkdGgsaGVpZ2h0KTt9LGluaXQ6ZnVuY3Rpb24gaW5pdCgpe3RoaXMuc2V0U2l6ZSgxLDEpO30sc3RhcnQ6ZnVuY3Rpb24gc3RhcnQoKXtpZighdGhpcy5fY3VycmVudEFuaW1hdGlvbkxvb3Ape19sb29wLmNhbGwodGhpcyk7fX0sc3RvcDpmdW5jdGlvbiBzdG9wKCl7aWYodGhpcy5fY3VycmVudEFuaW1hdGlvbkxvb3Ape3Jvb3QuY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5fY3VycmVudEFuaW1hdGlvbkxvb3ApO3RoaXMuX2N1cnJlbnRBbmltYXRpb25Mb29wPXVuZGVmaW5lZDt9fSxzZXRTaXplOmZ1bmN0aW9uIHNldFNpemUod2lkdGgsaGVpZ2h0KXt0aGlzLl93aWR0aD1NYXRoLnRydW5jKHdpZHRoKXx8MTt0aGlzLl9oZWlnaHQ9TWF0aC50cnVuYyhoZWlnaHQpfHwxO3RoaXMuX21lc2guc2NhbGUuc2V0KHRoaXMuX3dpZHRoLHRoaXMuX2hlaWdodCwxKTt0aGlzLl9jYW1lcmEubGVmdD10aGlzLl93aWR0aC8tMjt0aGlzLl9jYW1lcmEucmlnaHQ9dGhpcy5fd2lkdGgvMjt0aGlzLl9jYW1lcmEudG9wPXRoaXMuX2hlaWdodC8yO3RoaXMuX2NhbWVyYS5ib3R0b209dGhpcy5faGVpZ2h0Ly0yO3RoaXMuX2NhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7dGhpcy5fcmVuZGVyVGFyZ2V0PV9nZXRSZW5kZXJUYXJnZXRXaXRoU2l6ZSh0aGlzLl93aWR0aCx0aGlzLl9oZWlnaHQpO3RoaXMuX3ZpZXdCdWZmZXI9bmV3IEFycmF5QnVmZmVyKHRoaXMuX3dpZHRoKnRoaXMuX2hlaWdodCo0KTt0aGlzLl9pbWFnZURhdGFBcnJheT1uZXcgVWludDhBcnJheSh0aGlzLl92aWV3QnVmZmVyKTt0aGlzLl9jbGFtcGVkSW1hZ2VEYXRhQXJyYXk9bmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHRoaXMuX3ZpZXdCdWZmZXIpO3RoaXMuaW1hZ2VEYXRhPW5ldyBJbWFnZURhdGEodGhpcy5fY2xhbXBlZEltYWdlRGF0YUFycmF5LHRoaXMuX3dpZHRoLHRoaXMuX2hlaWdodCk7fSx0ZWFyZG93bjpmdW5jdGlvbiB0ZWFyZG93bigpe3RoaXMuc3RvcCgpO319O30oKTtCbG90dGVyLl9leHRlbmRXaXRoR2V0dGVyc1NldHRlcnMoQmxvdHRlci5SZW5kZXJlci5wcm90b3R5cGUsRXZlbnRFbWl0dGVyLnByb3RvdHlwZSk7fSkodGhpcy5CbG90dGVyLHRoaXMuXyx0aGlzLlRIUkVFLHRoaXMuRXZlbnRFbWl0dGVyKTsoZnVuY3Rpb24oQmxvdHRlcixfLFRIUkVFLHNldEltbWVkaWF0ZSl7Ly8gQ3JlYXRlIGEgRGF0YSBUZXh0dXJlIGhvbGRpbmcgdGhlIGJvdW5kYXJpZXMgKHgveSBvZmZzZXQgYW5kIHcvaCkgdGhhdCBzaG91bGQgYmUgYXZhaWxhYmxlIHRvIGFueSBnaXZlbiB0ZXhlbCBmb3IgYW55IGdpdmVuIHRleHQuCkJsb3R0ZXIuQm91bmRzRGF0YVRleHR1cmVCdWlsZGVyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gX2JvdW5kc0RhdGFGb3JNYXBwaW5nKG1hcHBpbmcpe3ZhciB0ZXh0cz1tYXBwaW5nLnRleHRzLGRhdGE9bmV3IEZsb2F0MzJBcnJheSh0ZXh0cy5sZW5ndGgqNCk7Zm9yKHZhciBpPTA7aTx0ZXh0cy5sZW5ndGg7aSsrKXt2YXIgdGV4dD10ZXh0c1tpXSxib3VuZHM9bWFwcGluZy5ib3VuZHNGb3JUZXh0KHRleHQpO2RhdGFbNCppXT1ib3VuZHMueDsvLyB4CmRhdGFbNCppKzFdPW1hcHBpbmcuaGVpZ2h0LShib3VuZHMueStib3VuZHMuaCk7Ly8geQpkYXRhWzQqaSsyXT1ib3VuZHMudzsvLyB3CmRhdGFbNCppKzNdPWJvdW5kcy5oOy8vIGgKfXJldHVybiBkYXRhO31yZXR1cm57YnVpbGQ6ZnVuY3Rpb24gYnVpbGQobWFwcGluZyxjb21wbGV0aW9uKXtzZXRJbW1lZGlhdGUoZnVuY3Rpb24oKXt2YXIgZGF0YT1fYm91bmRzRGF0YUZvck1hcHBpbmcobWFwcGluZyksdGV4dHVyZT1uZXcgVEhSRUUuRGF0YVRleHR1cmUoZGF0YSxtYXBwaW5nLnRleHRzLmxlbmd0aCwxLFRIUkVFLlJHQkFGb3JtYXQsVEhSRUUuRmxvYXRUeXBlKTt0ZXh0dXJlLm5lZWRzVXBkYXRlPXRydWU7Y29tcGxldGlvbih0ZXh0dXJlKTt9KTt9fTt9KCk7fSkodGhpcy5CbG90dGVyLHRoaXMuXyx0aGlzLlRIUkVFLHRoaXMuc2V0SW1tZWRpYXRlKTsoZnVuY3Rpb24oQmxvdHRlcixfLFRIUkVFLHNldEltbWVkaWF0ZSl7Ly8gQ3JlYXRlIGEgRGF0YSBUZXh0dXJlIHRoZSBzaXplIG9mIG91ciB0ZXh0IG1hcCB3aGVyZWluIGV2ZXJ5IHRleGVsIGhvbGRzIHRoZSBpbmRleCBvZiB0ZXh0IHdob3NlIGJvdW5kYXJpZXMgY29udGFpbiB0aGUgZ2l2ZW4gdGV4ZWwncyBwb3NpdGlvbi4KQmxvdHRlci5JbmRpY2VzRGF0YVRleHR1cmVCdWlsZGVyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gX2luZGljZXNEYXRhRm9yTWFwcGluZyhtYXBwaW5nLHdpZHRoLGhlaWdodCxzYW1wbGVBY2N1cmFjeSl7dmFyIHJhdGlvPW1hcHBpbmcucmF0aW8scG9pbnRzPW5ldyBGbG9hdDMyQXJyYXkoaGVpZ2h0KndpZHRoKjQpLHdpZHRoU3RlcE1vZGlmaWVyPXdpZHRoJTEsaW5kaWNlc09mZnNldD0xL21hcHBpbmcudGV4dHMubGVuZ3RoLzI7Ly8gVmFsdWVzIHN0b3JlZCBpbiB0aGlzIHRleHR1cmUgd2lsbCBiZSBzYW1wbGVkIGZyb20gdGhlICdtaWRkbGUnIG9mIHRoZWlyIHRleGVsIHBvc2l0aW9uLgpmb3IodmFyIGk9MTtpPHBvaW50cy5sZW5ndGgvNDtpKyspe3ZhciB5PU1hdGguY2VpbChpLyh3aWR0aC13aWR0aFN0ZXBNb2RpZmllcikpLHg9aS0od2lkdGgtd2lkdGhTdGVwTW9kaWZpZXIpKih5LTEpLHJlZkluZGV4PTAuMCxiZz0wLjAsYT0wLjA7Zm9yKHZhciBraT0wO2tpPG1hcHBpbmcudGV4dHMubGVuZ3RoO2tpKyspe3ZhciB0ZXh0PW1hcHBpbmcudGV4dHNba2ldLGJvdW5kcz1tYXBwaW5nLmJvdW5kc0ZvclRleHQodGV4dCksYlc9Ym91bmRzLncvcmF0aW8qc2FtcGxlQWNjdXJhY3ksYkg9Ym91bmRzLmgvcmF0aW8qc2FtcGxlQWNjdXJhY3ksYlg9Ym91bmRzLngvcmF0aW8qc2FtcGxlQWNjdXJhY3ksYlk9Ym91bmRzLnkvcmF0aW8qc2FtcGxlQWNjdXJhY3k7Ly8gSWYgeCBhbmQgeSBhcmUgd2l0aGluIHRoZSBmaXQgYm91bmRzIG9mIHRoZSB0ZXh0IHNwYWNlIHdpdGhpbiBvdXIgbWFwcGVkIHRleHRzIHRleHR1cmUuCmlmKHk+PWJZJiZ5PD1iWStiSCYmeD49YlgmJng8PWJYK2JXKXtyZWZJbmRleD1raS9tYXBwaW5nLnRleHRzLmxlbmd0aCtpbmRpY2VzT2Zmc2V0O2E9MS4wO2JyZWFrO319dmFyIGluZGV4PWktMTtwb2ludHNbNCppbmRleCswXT1yZWZJbmRleDtwb2ludHNbNCppbmRleCsxXT1iZztwb2ludHNbNCppbmRleCsyXT1iZztwb2ludHNbNCppbmRleCszXT1hO31yZXR1cm4gcG9pbnRzO31yZXR1cm57YnVpbGQ6ZnVuY3Rpb24gYnVpbGQobWFwcGluZyxjb21wbGV0aW9uKXsvLyBUaGVyZSBpcyBhIG5lZ2F0aXZlIGNvb3JlbGF0aW9uIGJldHdlZW4gdGhlIHNhbXBsZUFjY3VyYWN5IHZhbHVlIGFuZAovLyB0aGUgc3BlZWQgYXQgd2hpY2ggdGV4dHVyZSBnZW5lcmF0aW9uIGhhcHBlbnMuCi8vIEhvd2V2ZXIsIHRoZSBsb3dlciB0aGlzIHZhbHVlLCB0aGUgbGVzcyBzYW1wbGVBY2N1cmFjeSB5b3UgY2FuIGV4cGVjdAovLyBmb3IgaW5kZXhpbmcgaW50byB1bmlmb3JtcyBmb3IgYW55IGdpdmVuIHRleHQuCi8vIFZhbHVlIG11c3QgYmUgYmV0d2VlbiAwLjAgYW5kIDEuMCwgYW5kIHlvdSBhcmUgYWR2aXNlZCB0byBrZWVwIGl0IGFyb3VuZCAwLjUuCnZhciBzYW1wbGVBY2N1cmFjeT0wLjU7c2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7dmFyIHdpZHRoPW1hcHBpbmcud2lkdGgvbWFwcGluZy5yYXRpbypzYW1wbGVBY2N1cmFjeSxoZWlnaHQ9bWFwcGluZy5oZWlnaHQvbWFwcGluZy5yYXRpbypzYW1wbGVBY2N1cmFjeSxkYXRhPV9pbmRpY2VzRGF0YUZvck1hcHBpbmcobWFwcGluZyx3aWR0aCxoZWlnaHQsc2FtcGxlQWNjdXJhY3kpLHRleHR1cmU9bmV3IFRIUkVFLkRhdGFUZXh0dXJlKGRhdGEsd2lkdGgsaGVpZ2h0LFRIUkVFLlJHQkFGb3JtYXQsVEhSRUUuRmxvYXRUeXBlKTt0ZXh0dXJlLmZsaXBZPXRydWU7dGV4dHVyZS5uZWVkc1VwZGF0ZT10cnVlO2NvbXBsZXRpb24odGV4dHVyZSk7fSk7fX07fSgpO30pKHRoaXMuQmxvdHRlcix0aGlzLl8sdGhpcy5USFJFRSx0aGlzLnNldEltbWVkaWF0ZSk7KGZ1bmN0aW9uKEJsb3R0ZXIsXyxUSFJFRSl7QmxvdHRlci5UZXh0VGV4dHVyZUJ1aWxkZXI9ZnVuY3Rpb24oKXtyZXR1cm57YnVpbGQ6ZnVuY3Rpb24gYnVpbGQobWFwcGluZyxjb21wbGV0aW9uKXt2YXIgbG9hZGVyPW5ldyBUSFJFRS5UZXh0dXJlTG9hZGVyKCksdXJsO21hcHBpbmcudG9DYW52YXMoXy5iaW5kKGZ1bmN0aW9uKGNhbnZhcyl7dXJsPWNhbnZhcy50b0RhdGFVUkwoKTtsb2FkZXIubG9hZCh1cmwsXy5iaW5kKGZ1bmN0aW9uKHRleHR1cmUpe3RleHR1cmUubWluRmlsdGVyPVRIUkVFLkxpbmVhckZpbHRlcjt0ZXh0dXJlLm1hZ0ZpbHRlcj1USFJFRS5MaW5lYXJGaWx0ZXI7dGV4dHVyZS5nZW5lcmF0ZU1pcG1hcHM9dHJ1ZTt0ZXh0dXJlLm5lZWRzVXBkYXRlPXRydWU7Y29tcGxldGlvbih0ZXh0dXJlKTt9LHRoaXMpKTt9LHRoaXMpKTt9fTt9KCk7fSkodGhpcy5CbG90dGVyLHRoaXMuXyx0aGlzLlRIUkVFKTsoZnVuY3Rpb24oQmxvdHRlcixfLFRIUkVFLEdyb3dpbmdQYWNrZXIsc2V0SW1tZWRpYXRlKXtCbG90dGVyLk1hcHBpbmdCdWlsZGVyPWZ1bmN0aW9uKCl7Ly8gU29ydCB0ZXh0cyBiYXNlZCBvbiBhcmVhIG9mIHNwYWNlIHJlcXVpcmVkIGZvciBhbnkgZ2l2ZW4gdGV4dCwgZGVzY2VuZGluZwpmdW5jdGlvbiBfc29ydFRleHRzKHRleHRBLHRleHRCKXt2YXIgYXJlYUE9dGV4dEEudyp0ZXh0QS5oLGFyZWFCPXRleHRCLncqdGV4dEIuaDtyZXR1cm4gYXJlYUItYXJlYUE7fWZ1bmN0aW9uIF9nZXRUZXh0U2l6ZXModGV4dHMpe3JldHVybiBfLnJlZHVjZSh0ZXh0cyxmdW5jdGlvbih0ZXh0U2l6ZXMsdGV4dCl7dmFyIHNpemU9QmxvdHRlci5UZXh0VXRpbHMuc2l6ZUZvclRleHQodGV4dC52YWx1ZSx0ZXh0LnByb3BlcnRpZXMpO3RleHRTaXplc1t0ZXh0LmlkXT1zaXplO3JldHVybiB0ZXh0U2l6ZXM7fSxbXSk7fXJldHVybntidWlsZDpmdW5jdGlvbiBidWlsZCh0ZXh0cyxjb21wbGV0aW9uKXtzZXRJbW1lZGlhdGUoZnVuY3Rpb24oKXt2YXIgZmlsdGVyZWRUZXh0cz1CbG90dGVyLlRleHRVdGlscy5maWx0ZXJUZXh0cyh0ZXh0cyksdGV4dFNpemVzPV9nZXRUZXh0U2l6ZXMoZmlsdGVyZWRUZXh0cykscGFja2VyPW5ldyBHcm93aW5nUGFja2VyKCksdGVtcFRleHRCb3VuZHM9W10sdGV4dEJvdW5kcz17fSxtYXBwaW5nOy8vIEJ1aWxkIGFycmF5IG9mIG9iamVjdHMgaG9sZGluZyBhIFRleHQgb2JqZWN0J3MgaWQsIHdpZHRoLCBhbmQgaGVpZ2h0IGZvciBzb3J0aW5nLgpmb3IodmFyIHRleHRJZCBpbiB0ZXh0U2l6ZXMpe2lmKHRleHRTaXplcy5oYXNPd25Qcm9wZXJ0eSh0ZXh0SWQpKXt2YXIgdGVtcFNpemVzT2JqZWN0PXRleHRTaXplc1t0ZXh0SWRdO3RlbXBTaXplc09iamVjdC5yZWZlcmVuY2VJZD10ZXh0SWQ7dGVtcFRleHRCb3VuZHMucHVzaCh0ZW1wU2l6ZXNPYmplY3QpO319Ly8gQWRkIGZpdCBvYmplY3QgdG8gYWxsIG9iamVjdHMgaW4gdGVtcFRleHRCb3VuZHMuCnBhY2tlci5maXQodGVtcFRleHRCb3VuZHMuc29ydChfc29ydFRleHRzKSk7Ly8gQWRkIGZpdCBvYmplY3RzIGJhY2sgaW50byB0aGlzLl90ZXh0Qm91bmRzIGZvciBlYWNoIFRleHQgaWQuCmZvcih2YXIgaT0wO2k8dGVtcFRleHRCb3VuZHMubGVuZ3RoO2krKyl7dmFyIHBhY2tlZFNpemVzT2JqZWN0PXRlbXBUZXh0Qm91bmRzW2ldO3RleHRCb3VuZHNbcGFja2VkU2l6ZXNPYmplY3QucmVmZXJlbmNlSWRdPXt3OnBhY2tlZFNpemVzT2JqZWN0LncsaDpwYWNrZWRTaXplc09iamVjdC5oLHg6cGFja2VkU2l6ZXNPYmplY3QuZml0LngseTpwYWNrZXIucm9vdC5oLShwYWNrZWRTaXplc09iamVjdC5maXQueStwYWNrZWRTaXplc09iamVjdC5oKX07fWNvbXBsZXRpb24obmV3IEJsb3R0ZXIuTWFwcGluZyhmaWx0ZXJlZFRleHRzLHRleHRCb3VuZHMscGFja2VyLnJvb3QudyxwYWNrZXIucm9vdC5oKSk7fSk7fX07fSgpO30pKHRoaXMuQmxvdHRlcix0aGlzLl8sdGhpcy5USFJFRSx0aGlzLkdyb3dpbmdQYWNrZXIsdGhpcy5zZXRJbW1lZGlhdGUpOyhmdW5jdGlvbihCbG90dGVyLF8sVEhSRUUpe0Jsb3R0ZXIuTWFwcGluZ01hdGVyaWFsQnVpbGRlcj1mdW5jdGlvbigpe2Z1bmN0aW9uIF92ZXJ0ZXhTcmMoKXt2YXIgdmVydGV4U3JjPVsidmFyeWluZyB2ZWMyIF92VGV4Q29vcmQ7Iiwidm9pZCBtYWluKCkgeyIsIiAgX3ZUZXhDb29yZCA9IHV2OyIsIiAgZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbW9kZWxWaWV3TWF0cml4ICogdmVjNChwb3NpdGlvbiwgMS4wKTsiLCJ9Il07cmV0dXJuIHZlcnRleFNyYy5qb2luKCJcbiIpO31mdW5jdGlvbiBfZnJhZ21lbnRTcmModXNlclVuaWZvcm1EYXRhVGV4dHVyZU9iamVjdHMsdGV4dHNMZW5ndGgsbWFpbkltYWdlU3JjKXt2YXIgZnJhZ21lbnRTcmMsdXNlclVuaWZvcm1zPXsvLyBTdHJpbmdzIG9mIHVuaWZvcm0gZGVjbGFyYXRpb25zIGZvciBlYWNoIHB1YmxpY2x5IGZhY2luZyB2ZXJzaW9uIG9mIGVhY2ggdXNlciBkZWZpbmVkIGFuZCBkZWZhdWx0IHVuaWZvcm0uCnB1YmxpY1VuaWZvcm1EZWNsYXJhdGlvbnM6IiIsLy8gU3RyaW5ncyBvZiB1bmlmb3JtIGRlZmluaXRpb25zIGZvciBlYWNoIHB1YmxpY2x5IGZhY2luZyB2ZXJzaW9uIG9mIGVhY2ggdXNlciBkZWZpbmVkIGFuZCBkZWZhdWx0IHVuaWZvcm0uCnB1YmxpY1VuaWZvcm1EZWZpbml0aW9uczoiIn0saGFsZlBpeGVsPSgxL3VzZXJVbmlmb3JtRGF0YVRleHR1cmVPYmplY3RzLmRhdGEubGVuZ3RoLzIpLnRvRml4ZWQoMjApLHVzZXJVbmlmb3Jtc1RleHR1cmVXaWR0aD11c2VyVW5pZm9ybURhdGFUZXh0dXJlT2JqZWN0cy50ZXh0dXJlLmltYWdlLndpZHRoLnRvRml4ZWQoMSk7Xy5yZWR1Y2UodXNlclVuaWZvcm1EYXRhVGV4dHVyZU9iamVjdHMudXNlclVuaWZvcm1zLGZ1bmN0aW9uKHVzZXJVbmlmb3Jtcyx1bmlmb3JtT2JqZWN0LHVuaWZvcm1OYW1lKXt2YXIgZ2xzbFN3aXp6bGU9QmxvdHRlci5Vbmlmb3JtVXRpbHMuZnVsbFN3aXp6bGVTdHJpbmdGb3JVbmlmb3JtVHlwZSh1bmlmb3JtT2JqZWN0LnVzZXJVbmlmb3JtLnR5cGUpLGdsc2xEYXRhVHlwZT1CbG90dGVyLlVuaWZvcm1VdGlscy5nbHNsRGF0YVR5cGVGb3JVbmlmb3JtVHlwZSh1bmlmb3JtT2JqZWN0LnVzZXJVbmlmb3JtLnR5cGUpOy8vIFRoaXMgaXMgc3VwZXIgY29udm9sdXRlZC4gU29ycnkuIEFsbCB1c2VyIHVuaWZvcm1zIGFyZSBwYXNzZWQgaW4gYSBzaW5nbGUgdGV4dHVyZSwgd2hlcmUgZm9yIGVhY2ggdW5pZm9ybQovLyAgIHRoZXJlIGlzIGEgc2luZ2xlIHJnYmEgdmFsdWUgcGVyIHRleHQuIFdpdGhpbiB0aGlzIHRleHR1cmUgZGF0YSB3ZSBuZWVkIHRvIGJlIGFibGUgdG8gbG9jYXRlIHRoZSBwb3NpdGlvbgovLyAgIG9mIGFueSBnaXZlbiB0ZXh0J3MgdmFsdWUgZm9yIHRoZSBnaXZlbiB1bmlmb3JtLiBUaGUgbWF0aHMgaGVyZSB1c2UgdGhlIGB0ZXh0SW5kZXhgIHZhbHVlLCBhIHZhbHVlCi8vICAgc2FtcGxlZCB2aWEgdGhlIGBpbmRpY2VzVmFsdWVUZXh0dXJlYCwgdG8gbG9jYXRlIHRoZSB0ZXh0IHZhbHVlIGZvciB0aGUgZ2l2ZW4gdW5pZm9ybSwgYW5kIHRoZW4gb2Zmc2V0cyB0aGF0Ci8vICAgdmFsdWUgYnkgaGFsZiBhIHRleGVsIGluIHRoZSBvdmVyYWxsIF91c2VyVW5pZm9ybXNUZXh0dXJlCnZhciB1bmlmb3JtU2FtcGxlUG9zaXRpb249IigoIit1bmlmb3JtT2JqZWN0LnBvc2l0aW9uLnRvRml4ZWQoMSkrIiArICgodGV4dEluZGV4IC0gKCgxLjAgLyAiK3RleHRzTGVuZ3RoLnRvRml4ZWQoMSkrIikgLyAyLjApKSAqICIrdGV4dHNMZW5ndGgudG9GaXhlZCgxKSsiKSkgLyAiK3VzZXJVbmlmb3Jtc1RleHR1cmVXaWR0aCsiKSArICIraGFsZlBpeGVsO3VzZXJVbmlmb3Jtcy5wdWJsaWNVbmlmb3JtRGVjbGFyYXRpb25zKz1nbHNsRGF0YVR5cGUrIiAiK3VuaWZvcm1OYW1lKyI7XG4iO3VzZXJVbmlmb3Jtcy5wdWJsaWNVbmlmb3JtRGVmaW5pdGlvbnMrPSIgICAiK3VuaWZvcm1OYW1lKyIgPSB0ZXh0dXJlMkQoX3VzZXJVbmlmb3Jtc1RleHR1cmUsIHZlYzIoIit1bmlmb3JtU2FtcGxlUG9zaXRpb24rIiwgMC41KSkuIitnbHNsU3dpenpsZSsiO1xuIjtyZXR1cm4gdXNlclVuaWZvcm1zO30sdXNlclVuaWZvcm1zKTtmcmFnbWVudFNyYz1bQmxvdHRlci5Bc3NldHMuU2hhZGVycy5CbGVuZGluZyxCbG90dGVyLkFzc2V0cy5TaGFkZXJzLlRleHRUZXh0dXJlLC8vIFByaXZhdGUgYmxvdHRlciBkZWZpbmVkIHVuaWZvcm1zLgoidW5pZm9ybSBzYW1wbGVyMkQgX3VTYW1wbGVyOyIsInVuaWZvcm0gdmVjMiBfdUNhbnZhc1Jlc29sdXRpb247IiwidW5pZm9ybSBzYW1wbGVyMkQgX3VUZXh0SW5kaWNlc1RleHR1cmU7IiwidW5pZm9ybSBzYW1wbGVyMkQgX3VUZXh0Qm91bmRzVGV4dHVyZTsiLC8vIFByaXZhdGUgdGV4Q29vcmQgYW5kIGJvdW5kcyBpbmZvcm1hdGlvbi4KInZhcnlpbmcgdmVjMiBfdlRleENvb3JkOyIsInZlYzQgX3RleHRCb3VuZHM7IiwvLyBQcml2YXRlIHZlcnNpb25zIG9mIHVzZXIgZGVmaW5lZCBhbmQgZGVmYXVsdCB1bmlmb3JtIGRlY2xhcmF0aW9ucwoidW5pZm9ybSBzYW1wbGVyMkQgX3VzZXJVbmlmb3Jtc1RleHR1cmU7IiwvLyBQdWJsaWMgdmVyc2lvbnMgb2YgdXNlciBkZWZpbmVkIGFuZCBkZWZhdWx0IHVuaWZvcm0gZGVjbGFyYXRpb25zCnVzZXJVbmlmb3Jtcy5wdWJsaWNVbmlmb3JtRGVjbGFyYXRpb25zLCIvLyBIZWxwZXIgZnVuY3Rpb24gdXNlZCBieSB1c2VyIHByb2dyYW1zIHRvIHJldHJpZXZlIHRleGVsIGNvbG9yIGluZm9ybWF0aW9uIHdpdGhpbiB0aGUgYm91bmRzIG9mIiwiLy8gYW55IGdpdmVuIHRleHQuIFRoaXMgaXMgdG8gYmUgdXNlZCBpbnN0ZWFkIG9mIGB0ZXh0dXJlMkRgIGluIHRoZSBmcmFnbWVudCBzb3VyY2VzIGZvciBhbGwgQmxvdHRlciBtYXRlcmlhbHMuIiwidmVjNCB0ZXh0VGV4dHVyZSh2ZWMyIGNvb3JkKSB7IiwiICAgdmVjMiBhZGp1c3RlZEZyYWdDb29yZCA9IF90ZXh0Qm91bmRzLnh5ICsgdmVjMigoX3RleHRCb3VuZHMueiAqIGNvb3JkLngpLCAoX3RleHRCb3VuZHMudyAqIGNvb3JkLnkpKTsiLCIgICB2ZWMyIHV2ID0gYWRqdXN0ZWRGcmFnQ29vcmQueHkgLyBfdUNhbnZhc1Jlc29sdXRpb247IiwiICAgLy8gIElmIGFkanVzdGVkRnJhZ0Nvb3JkIGZhbGxzIG91dHNpZGUgdGhlIGJvdW5kcyBvZiB0aGUgY3VycmVudCB0ZXhlbCdzIHRleHQsIHJldHVybiBgdmVjNCgwLjApYC4iLCIgICBpZiAoYWRqdXN0ZWRGcmFnQ29vcmQueCA8IF90ZXh0Qm91bmRzLnggfHwiLCIgICAgICAgYWRqdXN0ZWRGcmFnQ29vcmQueCA+IF90ZXh0Qm91bmRzLnggKyBfdGV4dEJvdW5kcy56IHx8IiwiICAgICAgIGFkanVzdGVkRnJhZ0Nvb3JkLnkgPCBfdGV4dEJvdW5kcy55IHx8IiwiICAgICAgIGFkanVzdGVkRnJhZ0Nvb3JkLnkgPiBfdGV4dEJvdW5kcy55ICsgX3RleHRCb3VuZHMudykgeyIsIiAgICAgcmV0dXJuIHZlYzQoMC4wKTsiLCIgICB9IiwiICAgcmV0dXJuIHRleHR1cmUyRChfdVNhbXBsZXIsIHV2KTsiLCJ9Iiwidm9pZCBtYWluSW1hZ2Uob3V0IHZlYzQgbWFpbkltYWdlLCBpbiB2ZWMyIGZyYWdDb29yZCk7IixtYWluSW1hZ2VTcmMsInZvaWQgbWFpbih2b2lkKSB7IiwvLyAgUmV0cmlldmUgdGV4dCBpbmRleCBhbmQgdGV4dCBhbHBoYSBmb3IgdGV4dCBib3VuZHMgaW4gd2hpY2ggdGV4ZWwgaXMgY29udGFpbmVkLgoiICAgdmVjNCB0ZXh0SW5kZXhEYXRhID0gdGV4dHVyZTJEKF91VGV4dEluZGljZXNUZXh0dXJlLCBfdlRleENvb3JkKTsiLCIgICBmbG9hdCB0ZXh0SW5kZXggPSB0ZXh0SW5kZXhEYXRhLnI7IiwiICAgZmxvYXQgdGV4dEFscGhhID0gdGV4dEluZGV4RGF0YS5hOyIsLy8gIE1ha2UgYm91bmRzIGZvciB0aGUgY3VycmVudCB0ZXh0IGdsb2JhbGx5IHZpc2libGUuCiIgICBfdGV4dEJvdW5kcyA9IHRleHR1cmUyRChfdVRleHRCb3VuZHNUZXh0dXJlLCB2ZWMyKHRleHRJbmRleCwgMC41KSk7IiwvLyAgU2V0ICJ1bmlmb3JtIiB2YWx1ZXMgdmlzaWJsZSB0byB1c2VyLgp1c2VyVW5pZm9ybXMucHVibGljVW5pZm9ybURlZmluaXRpb25zLCIgICB1UmVzb2x1dGlvbiA9IF90ZXh0Qm91bmRzLnp3OyIsLy8gIFNldCBmcmFnbWVudCBjb29yZGluYXRlIGluIHJlc3BlY3QgdG8gcG9zaXRpb24gd2l0aGluIHRleHQgYm91bmRzLgoiICAgdmVjMiBmcmFnQ29vcmQgPSBnbF9GcmFnQ29vcmQueHkgLSBfdGV4dEJvdW5kcy54eTsiLC8vICBDYWxsIHVzZXIgZGVmaW5lZCBmcmFnbWVudCBmdW5jdGlvbiwgc2V0dGluZyBvdXRDb2xvciBvbiByZXR1cm4uCiIgICB2ZWM0IG91dENvbG9yOyIsIiAgIG1haW5JbWFnZShvdXRDb2xvciwgZnJhZ0Nvb3JkKTsiLC8vICBNdWx0aXBseSBhbHBoYSBieSBvcmlnaW5hbCB0ZXh0SW5kZXhEYXRhJ3MgZm91cnRoIHZhbHVlLiIKLy8gIHRoaXMgd2lsbCBiZSAwIGZvciB0ZXhlbHMgbm90IHdpdGhpbiBhbnkgJ3RleHQnIGFyZWEuIgoiICAgb3V0Q29sb3IuYSA9IG91dENvbG9yLmEgKiB0ZXh0QWxwaGE7IiwiICAgZ2xfRnJhZ0NvbG9yID0gb3V0Q29sb3I7IiwifSJdO3JldHVybiBmcmFnbWVudFNyYy5qb2luKCJcbiIpO31mdW5jdGlvbiBfYnVpbGRNYXBwZWRUZXh0c1RleHR1cmUobWFwcGluZyxjb21wbGV0aW9uKXtCbG90dGVyLlRleHRUZXh0dXJlQnVpbGRlci5idWlsZChtYXBwaW5nLGZ1bmN0aW9uKHRleHR1cmUpe2NvbXBsZXRpb24odGV4dHVyZSk7fSk7fWZ1bmN0aW9uIF9idWlsZE1hcHBpbmdEYXRhVGV4dHVyZU9iamVjdHMobWFwcGluZyxjb21wbGV0aW9uKXt2YXIgYnVpbGRJbmRpY2VzVGV4dHVyZSxidWlsZEJvdW5kc1RleHR1cmUsbWFwcGluZ0RhdGFUZXh0dXJlT2JqZWN0cz1bXSxidWlsZFN0YWdlcztidWlsZEluZGljZXNUZXh0dXJlPWZ1bmN0aW9uIGJ1aWxkSW5kaWNlc1RleHR1cmUoKXtyZXR1cm4gZnVuY3Rpb24obmV4dCl7QmxvdHRlci5JbmRpY2VzRGF0YVRleHR1cmVCdWlsZGVyLmJ1aWxkKG1hcHBpbmcsZnVuY3Rpb24odGV4dHVyZSl7bWFwcGluZ0RhdGFUZXh0dXJlT2JqZWN0cy5wdXNoKHt1bmlmb3JtTmFtZToiX3VUZXh0SW5kaWNlc1RleHR1cmUiLHRleHR1cmU6dGV4dHVyZX0pO25leHQoKTt9KTt9O307YnVpbGRCb3VuZHNUZXh0dXJlPWZ1bmN0aW9uIGJ1aWxkQm91bmRzVGV4dHVyZSgpe3JldHVybiBmdW5jdGlvbihuZXh0KXtCbG90dGVyLkJvdW5kc0RhdGFUZXh0dXJlQnVpbGRlci5idWlsZChtYXBwaW5nLGZ1bmN0aW9uKHRleHR1cmUpe21hcHBpbmdEYXRhVGV4dHVyZU9iamVjdHMucHVzaCh7dW5pZm9ybU5hbWU6Il91VGV4dEJvdW5kc1RleHR1cmUiLHRleHR1cmU6dGV4dHVyZX0pO25leHQoKTt9KTt9O307YnVpbGRTdGFnZXM9W2J1aWxkSW5kaWNlc1RleHR1cmUoKSxidWlsZEJvdW5kc1RleHR1cmUoKV07XyhidWlsZFN0YWdlcykucmVkdWNlUmlnaHQoXy53cmFwLGZ1bmN0aW9uKCl7Y29tcGxldGlvbihtYXBwaW5nRGF0YVRleHR1cmVPYmplY3RzKTt9KSgpO31mdW5jdGlvbiBfYnVpbGRVc2VyVW5pZm9ybURhdGFUZXh0dXJlT2JqZWN0cyh1c2VyVW5pZm9ybXMsdGV4dHNMZW5ndGgsY29tcGxldGlvbil7QmxvdHRlci5Vbmlmb3JtVXRpbHMuZW5zdXJlSGFzUmVxdWlyZWREZWZhdWx0VW5pZm9ybXModXNlclVuaWZvcm1zLCJCbG90dGVyLk1hcHBpbmdNYXRlcmlhbEJ1aWxkZXIiLCJfYnVpbGRVc2VyVW5pZm9ybURhdGFUZXh0dXJlT2JqZWN0cyIpO3VzZXJVbmlmb3Jtcz1CbG90dGVyLlVuaWZvcm1VdGlscy5leHRyYWN0VmFsaWRVbmlmb3Jtcyh1c2VyVW5pZm9ybXMpO3ZhciB1bmlmb3Jtc0RhdGFMZW5ndGg9T2JqZWN0LmtleXModXNlclVuaWZvcm1zKS5sZW5ndGgqdGV4dHNMZW5ndGg7dmFyIGRhdGE9bmV3IEZsb2F0MzJBcnJheSh1bmlmb3Jtc0RhdGFMZW5ndGgqNCk7dmFyIHRleHR1cmU9bmV3IFRIUkVFLkRhdGFUZXh0dXJlKGRhdGEsdW5pZm9ybXNEYXRhTGVuZ3RoLDEsVEhSRUUuUkdCQUZvcm1hdCxUSFJFRS5GbG9hdFR5cGUpO3ZhciB1c2VyVW5pZm9ybURhdGFUZXh0dXJlT2JqZWN0cz17ZGF0YTpkYXRhLHRleHR1cmU6dGV4dHVyZSx1c2VyVW5pZm9ybXM6e319O18ucmVkdWNlKHVzZXJVbmlmb3JtcyxmdW5jdGlvbihtZW1vLHVzZXJVbmlmb3JtLHVuaWZvcm1OYW1lKXt2YXIgdW5pZm9ybVBvc2l0aW9uPU9iamVjdC5rZXlzKHVzZXJVbmlmb3JtcykuaW5kZXhPZih1bmlmb3JtTmFtZSkqdGV4dHNMZW5ndGg7bWVtby51c2VyVW5pZm9ybXNbdW5pZm9ybU5hbWVdPXt1c2VyVW5pZm9ybTp1c2VyVW5pZm9ybSxwb3NpdGlvbjp1bmlmb3JtUG9zaXRpb259O3JldHVybiBtZW1vO30sdXNlclVuaWZvcm1EYXRhVGV4dHVyZU9iamVjdHMpO2NvbXBsZXRpb24odXNlclVuaWZvcm1EYXRhVGV4dHVyZU9iamVjdHMpO31mdW5jdGlvbiBfZ2V0VW5pZm9ybXNGb3JNYXBwaW5nRGF0YVRleHR1cmVPYmplY3RzKG1hcHBpbmdEYXRhVGV4dHVyZU9iamVjdHMpe3JldHVybiBfLnJlZHVjZShtYXBwaW5nRGF0YVRleHR1cmVPYmplY3RzLGZ1bmN0aW9uKG1lbW8sbWFwcGluZ0RhdGFUZXh0dXJlT2JqZWN0KXttZW1vW21hcHBpbmdEYXRhVGV4dHVyZU9iamVjdC51bmlmb3JtTmFtZV09e3R5cGU6InQiLHZhbHVlOm1hcHBpbmdEYXRhVGV4dHVyZU9iamVjdC50ZXh0dXJlfTtyZXR1cm4gbWVtbzt9LHt9KTt9ZnVuY3Rpb24gX2dldFVuaWZvcm1zRm9yVXNlclVuaWZvcm1EYXRhT2JqZWN0cyh1c2VyVW5pZm9ybURhdGFPYmplY3RzKXtyZXR1cm57X3VzZXJVbmlmb3Jtc1RleHR1cmU6e3R5cGU6InQiLHZhbHVlOnVzZXJVbmlmb3JtRGF0YU9iamVjdHMudGV4dHVyZX19O31mdW5jdGlvbiBfZ2V0VW5pZm9ybXMod2lkdGgsaGVpZ2h0LG1hcHBlZFRleHRzVGV4dHVyZSxtYXBwaW5nRGF0YVRleHR1cmVPYmplY3RzLHVzZXJVbmlmb3JtRGF0YVRleHR1cmVPYmplY3RzKXt2YXIgdW5pZm9ybXM9e191U2FtcGxlcjp7dHlwZToidCIsdmFsdWU6bWFwcGVkVGV4dHNUZXh0dXJlfSxfdUNhbnZhc1Jlc29sdXRpb246e3R5cGU6IjJmIix2YWx1ZTpbd2lkdGgsaGVpZ2h0XX19O18uZXh0ZW5kKHVuaWZvcm1zLF9nZXRVbmlmb3Jtc0Zvck1hcHBpbmdEYXRhVGV4dHVyZU9iamVjdHMobWFwcGluZ0RhdGFUZXh0dXJlT2JqZWN0cykpO18uZXh0ZW5kKHVuaWZvcm1zLF9nZXRVbmlmb3Jtc0ZvclVzZXJVbmlmb3JtRGF0YU9iamVjdHModXNlclVuaWZvcm1EYXRhVGV4dHVyZU9iamVjdHMpKTtyZXR1cm4gdW5pZm9ybXM7fWZ1bmN0aW9uIF9nZXRUaHJlZU1hdGVyaWFsKHZlcnRleFNyYyxmcmFnbWVudFNyYyx1bmlmb3Jtcyl7dmFyIHRocmVlTWF0ZXJpYWw9bmV3IFRIUkVFLlNoYWRlck1hdGVyaWFsKHt2ZXJ0ZXhTaGFkZXI6dmVydGV4U3JjLGZyYWdtZW50U2hhZGVyOmZyYWdtZW50U3JjLHVuaWZvcm1zOnVuaWZvcm1zfSk7dGhyZWVNYXRlcmlhbC5kZXB0aFRlc3Q9ZmFsc2U7dGhyZWVNYXRlcmlhbC5kZXB0aFdyaXRlPWZhbHNlO3RocmVlTWF0ZXJpYWwucHJlbXVsdGlwbGllZEFscGhhPWZhbHNlO3JldHVybiB0aHJlZU1hdGVyaWFsO31yZXR1cm57YnVpbGQ6ZnVuY3Rpb24gYnVpbGQobWFwcGluZyxtYXRlcmlhbCxjb21wbGV0aW9uKXt2YXIgYnVpbGRNYXBwZWRUZXh0c1RleHR1cmUsYnVpbGRNYXBwaW5nRGF0YVRleHR1cmVPYmplY3RzLGJ1aWxkVXNlclVuaWZvcm1EYXRhQW5kRGF0YVRleHR1cmVPYmplY3RzLG1hcHBlZFRleHRzVGV4dHVyZSxtYXBwaW5nRGF0YVRleHR1cmVPYmplY3RzLHVzZXJVbmlmb3JtRGF0YUFuZERhdGFUZXh0dXJlT2JqZWN0cyxidWlsZFN0YWdlcztidWlsZE1hcHBlZFRleHRzVGV4dHVyZT1mdW5jdGlvbiBidWlsZE1hcHBlZFRleHRzVGV4dHVyZSgpe3JldHVybiBmdW5jdGlvbihuZXh0KXtfYnVpbGRNYXBwZWRUZXh0c1RleHR1cmUobWFwcGluZyxmdW5jdGlvbih0ZXh0dXJlKXttYXBwZWRUZXh0c1RleHR1cmU9dGV4dHVyZTtuZXh0KCk7fSk7fTt9O2J1aWxkTWFwcGluZ0RhdGFUZXh0dXJlT2JqZWN0cz1mdW5jdGlvbiBidWlsZE1hcHBpbmdEYXRhVGV4dHVyZU9iamVjdHMoKXtyZXR1cm4gZnVuY3Rpb24obmV4dCl7X2J1aWxkTWFwcGluZ0RhdGFUZXh0dXJlT2JqZWN0cyhtYXBwaW5nLGZ1bmN0aW9uKG9iamVjdHMpe21hcHBpbmdEYXRhVGV4dHVyZU9iamVjdHM9b2JqZWN0cztuZXh0KCk7fSk7fTt9O2J1aWxkVXNlclVuaWZvcm1EYXRhVGV4dHVyZU9iamVjdHM9ZnVuY3Rpb24gYnVpbGRVc2VyVW5pZm9ybURhdGFUZXh0dXJlT2JqZWN0cygpe3JldHVybiBmdW5jdGlvbihuZXh0KXtfYnVpbGRVc2VyVW5pZm9ybURhdGFUZXh0dXJlT2JqZWN0cyhtYXRlcmlhbC51bmlmb3JtcyxtYXBwaW5nLnRleHRzLmxlbmd0aCxmdW5jdGlvbihvYmplY3RzKXt1c2VyVW5pZm9ybURhdGFUZXh0dXJlT2JqZWN0cz1vYmplY3RzO25leHQoKTt9KTt9O307YnVpbGRTdGFnZXM9W2J1aWxkTWFwcGVkVGV4dHNUZXh0dXJlKCksYnVpbGRNYXBwaW5nRGF0YVRleHR1cmVPYmplY3RzKCksYnVpbGRVc2VyVW5pZm9ybURhdGFUZXh0dXJlT2JqZWN0cygpXTtfKGJ1aWxkU3RhZ2VzKS5yZWR1Y2VSaWdodChfLndyYXAsZnVuY3Rpb24oKXt2YXIgdW5pZm9ybXM9X2dldFVuaWZvcm1zKG1hcHBpbmcud2lkdGgsbWFwcGluZy5oZWlnaHQsbWFwcGVkVGV4dHNUZXh0dXJlLG1hcHBpbmdEYXRhVGV4dHVyZU9iamVjdHMsdXNlclVuaWZvcm1EYXRhVGV4dHVyZU9iamVjdHMpLHVzZXJVbmlmb3Jtcz1fLm9taXQodW5pZm9ybXMsIl91Q2FudmFzUmVzb2x1dGlvbiIsIl91U2FtcGxlciIsIl91VGV4dEJvdW5kc1RleHR1cmUiLCJfdVRleHRJbmRpY2VzVGV4dHVyZSIpLHRocmVlTWF0ZXJpYWw9X2dldFRocmVlTWF0ZXJpYWwoX3ZlcnRleFNyYygpLF9mcmFnbWVudFNyYyh1c2VyVW5pZm9ybURhdGFUZXh0dXJlT2JqZWN0cyxtYXBwaW5nLnRleHRzLmxlbmd0aCxtYXRlcmlhbC5tYWluSW1hZ2UpLHVuaWZvcm1zKTtjb21wbGV0aW9uKG5ldyBCbG90dGVyLk1hcHBpbmdNYXRlcmlhbChtYXBwaW5nLG1hdGVyaWFsLHRocmVlTWF0ZXJpYWwsdXNlclVuaWZvcm1EYXRhVGV4dHVyZU9iamVjdHMpKTt9KSgpO319O30oKTt9KSh0aGlzLkJsb3R0ZXIsdGhpcy5fLHRoaXMuVEhSRUUpOw=="},{"version":3,"sources":["/Users/gunn/codespaces/keemgunn-web-v2-frontend/src/packages/blotter.js"],"names":["root","self","global","previousUnderscore","_","ArrayProto","Array","prototype","ObjProto","Object","SymbolProto","Symbol","push","slice","toString","hasOwnProperty","nativeIsArray","isArray","nativeKeys","keys","nativeCreate","create","Ctor","obj","_wrapped","exports","nodeType","module","VERSION","optimizeCb","func","context","argCount","value","call","index","collection","accumulator","apply","arguments","builtinIteratee","cb","iteratee","identity","isFunction","isObject","matcher","property","Infinity","restArgs","startIndex","length","Math","max","rest","args","baseCreate","result","key","MAX_ARRAY_INDEX","pow","getLength","isArrayLike","each","forEach","i","map","collect","results","currentKey","createReduce","dir","reducer","memo","initial","reduce","foldl","inject","reduceRight","foldr","find","detect","predicate","keyFinder","findIndex","findKey","filter","select","list","reject","negate","every","all","some","any","contains","includes","include","item","fromIndex","guard","values","indexOf","invoke","method","isFunc","pluck","where","attrs","findWhere","lastComputed","computed","v","min","shuffle","sample","n","random","clone","last","rand","temp","sortBy","criteria","sort","left","right","a","b","group","behavior","partition","groupBy","has","indexBy","countBy","reStrSymbol","toArray","isString","match","size","pass","first","head","take","array","tail","drop","compact","Boolean","flatten","input","shallow","strict","output","idx","isArguments","j","len","without","otherArrays","difference","uniq","unique","isSorted","isBoolean","seen","union","arrays","intersection","argsLength","unzip","zip","object","createPredicateIndexFinder","findLastIndex","sortedIndex","low","high","mid","floor","createIndexFinder","predicateFind","isNaN","lastIndexOf","range","start","stop","step","ceil","chunk","count","executeBound","sourceFunc","boundFunc","callingContext","bind","TypeError","bound","callArgs","concat","partial","boundArgs","placeholder","position","bindAll","Error","memoize","hasher","cache","address","delay","wait","setTimeout","defer","throttle","options","timeout","previous","later","leading","now","throttled","remaining","clearTimeout","trailing","cancel","debounce","immediate","debounced","callNow","wrap","wrapper","compose","after","times","before","once","hasEnumBug","propertyIsEnumerable","nonEnumerableProps","collectNonEnumProps","nonEnumIdx","constructor","proto","prop","allKeys","mapObject","pairs","invert","functions","methods","names","createAssigner","keysFunc","defaults","source","l","extend","extendOwn","assign","keyInObj","pick","omit","String","props","tap","interceptor","isMatch","eq","deepEq","aStack","bStack","type","className","valueOf","areArrays","aCtor","bCtor","pop","isEqual","isEmpty","isElement","name","nodelist","document","childNodes","Int8Array","isFinite","isSymbol","parseFloat","isNumber","isNull","isUndefined","noConflict","constant","noop","propertyOf","matches","accum","Date","getTime","escapeMap","unescapeMap","createEscaper","escaper","join","testRegexp","RegExp","replaceRegexp","string","test","replace","escape","unescape","fallback","idCounter","uniqueId","prefix","id","templateSettings","evaluate","interpolate","noMatch","escapes","escapeRegExp","escapeChar","template","text","settings","oldSettings","offset","variable","render","Function","e","data","argument","chain","instance","_chain","chainResult","mixin","toJSON","define","amd","factory","THREE","Number","EPSILON","undefined","isInteger","sign","x","defineProperty","get","target","nextKey","EventDispatcher","addEventListener","listener","_listeners","listeners","hasEventListener","removeEventListener","listenerArray","splice","dispatchEvent","event","REVISION","CullFaceNone","CullFaceBack","CullFaceFront","FrontFaceDirectionCW","PCFShadowMap","PCFSoftShadowMap","FrontSide","BackSide","DoubleSide","FlatShading","NoColors","NoBlending","NormalBlending","AdditiveBlending","SubtractiveBlending","MultiplyBlending","CustomBlending","AddEquation","SubtractEquation","ReverseSubtractEquation","MinEquation","MaxEquation","ZeroFactor","OneFactor","SrcColorFactor","OneMinusSrcColorFactor","SrcAlphaFactor","OneMinusSrcAlphaFactor","DstAlphaFactor","OneMinusDstAlphaFactor","DstColorFactor","OneMinusDstColorFactor","SrcAlphaSaturateFactor","NeverDepth","AlwaysDepth","LessDepth","LessEqualDepth","EqualDepth","GreaterEqualDepth","GreaterDepth","NotEqualDepth","MultiplyOperation","MixOperation","AddOperation","NoToneMapping","LinearToneMapping","ReinhardToneMapping","Uncharted2ToneMapping","CineonToneMapping","UVMapping","CubeReflectionMapping","CubeRefractionMapping","EquirectangularReflectionMapping","EquirectangularRefractionMapping","SphericalReflectionMapping","CubeUVReflectionMapping","CubeUVRefractionMapping","RepeatWrapping","ClampToEdgeWrapping","MirroredRepeatWrapping","NearestFilter","NearestMipMapNearestFilter","NearestMipMapLinearFilter","LinearFilter","LinearMipMapNearestFilter","LinearMipMapLinearFilter","UnsignedByteType","ByteType","ShortType","UnsignedShortType","IntType","UnsignedIntType","FloatType","HalfFloatType","UnsignedShort4444Type","UnsignedShort5551Type","UnsignedShort565Type","UnsignedInt248Type","AlphaFormat","RGBFormat","RGBAFormat","LuminanceFormat","LuminanceAlphaFormat","DepthFormat","DepthStencilFormat","RGB_S3TC_DXT1_Format","RGBA_S3TC_DXT1_Format","RGBA_S3TC_DXT3_Format","RGBA_S3TC_DXT5_Format","RGB_PVRTC_4BPPV1_Format","RGB_PVRTC_2BPPV1_Format","RGBA_PVRTC_4BPPV1_Format","RGBA_PVRTC_2BPPV1_Format","RGB_ETC1_Format","TrianglesDrawMode","TriangleStripDrawMode","TriangleFanDrawMode","LinearEncoding","sRGBEncoding","GammaEncoding","RGBEEncoding","RGBM7Encoding","RGBM16Encoding","RGBDEncoding","BasicDepthPacking","RGBADepthPacking","_Math","DEG2RAD","PI","RAD2DEG","generateUUID","lut","toUpperCase","d0","d1","d2","d3","clamp","euclideanModulo","m","mapLinear","a1","a2","b1","b2","lerp","y","t","smoothstep","smootherstep","randInt","randFloat","randFloatSpread","degToRad","degrees","radToDeg","radians","isPowerOfTwo","ceilPowerOfTwo","log","LN2","floorPowerOfTwo","Vector2","defineProperties","set","isVector2","setScalar","scalar","setX","setY","setComponent","getComponent","copy","add","w","console","warn","addVectors","addScalar","s","addScaledVector","sub","subVectors","subScalar","multiply","multiplyScalar","divide","divideScalar","applyMatrix3","elements","clampScalar","minVal","maxVal","clampLength","round","roundToZero","dot","lengthSq","sqrt","manhattanLength","abs","normalize","angle","atan2","distanceTo","distanceToSquared","dx","dy","manhattanDistanceTo","setLength","alpha","lerpVectors","v1","v2","equals","fromArray","fromBufferAttribute","attribute","getX","getY","rotateAround","center","c","cos","sin","Matrix4","error","isMatrix4","n11","n12","n13","n14","n21","n22","n23","n24","n31","n32","n33","n34","n41","n42","n43","n44","te","me","copyPosition","extractBasis","xAxis","yAxis","zAxis","setFromMatrixColumn","makeBasis","z","extractRotation","Vector3","scaleX","scaleY","scaleZ","makeRotationFromEuler","euler","isEuler","d","f","order","ae","af","be","bf","ce","cf","de","df","ac","ad","bc","bd","makeRotationFromQuaternion","q","_x","_y","_z","_w","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","lookAt","eye","up","crossVectors","multiplyMatrices","premultiply","a11","a12","a13","a14","a21","a22","a23","a24","a31","a32","a33","a34","a41","a42","a43","a44","b11","b12","b13","b14","b21","b22","b23","b24","b31","b32","b33","b34","b41","b42","b43","b44","applyToBufferAttribute","getZ","applyMatrix4","setXYZ","determinant","transpose","tmp","setPosition","getInverse","throwOnDegenerate","t11","t12","t13","t14","det","msg","detInv","scale","getMaxScaleOnAxis","scaleXSq","scaleYSq","scaleZSq","makeTranslation","makeRotationX","theta","makeRotationY","makeRotationZ","makeRotationAxis","axis","tx","ty","makeScale","makeShear","quaternion","decompose","vector","matrix","sx","sy","sz","invSX","invSY","invSZ","setFromRotationMatrix","makePerspective","top","bottom","near","far","makeOrthographic","h","p","Quaternion","slerp","qa","qb","qm","slerpFlat","dst","dstOffset","src0","srcOffset0","src1","srcOffset1","x0","y0","z0","w0","x1","y1","z1","w1","sqrSin","tDir","onChangeCallback","setFromEuler","update","c1","c2","c3","s1","s2","s3","setFromAxisAngle","halfAngle","m11","m12","m13","m21","m22","m23","m31","m32","m33","trace","setFromUnitVectors","r","EPS","vFrom","vTo","inverse","conjugate","multiplyQuaternions","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","cosHalfTheta","sinHalfTheta","halfTheta","ratioA","ratioB","onChange","callback","isVector3","setZ","multiplyVectors","applyEuler","applyQuaternion","applyAxisAngle","qx","qy","qz","qw","ix","iy","iz","iw","project","camera","projectionMatrix","matrixWorld","unproject","transformDirection","cross","ax","ay","az","bx","by","bz","projectOnVector","projectOnPlane","planeNormal","reflect","normal","angleTo","acos","dz","setFromSpherical","sinPhiRadius","phi","radius","setFromCylindrical","setFromMatrixPosition","setFromMatrixScale","Matrix3","isMatrix3","setFromMatrix4","g","getNormalMatrix","matrix4","transposeIntoArray","setUvTransform","rotation","cx","cy","rotate","translate","textureId","Texture","image","mapping","wrapS","wrapT","magFilter","minFilter","format","anisotropy","encoding","uuid","DEFAULT_IMAGE","mipmaps","DEFAULT_MAPPING","repeat","matrixAutoUpdate","generateMipmaps","premultiplyAlpha","flipY","unpackAlignment","version","onUpdate","isTexture","meta","isRootObject","textures","getDataURL","canvas","HTMLCanvasElement","createElementNS","width","height","getContext","ImageData","putImageData","drawImage","toDataURL","metadata","generator","images","url","dispose","transformUv","uv","Vector4","isVector4","setW","setAxisAngleFromQuaternion","setAxisAngleFromRotationMatrix","epsilon","epsilon2","getW","WebGLRenderTarget","scissor","scissorTest","viewport","texture","depthBuffer","stencilBuffer","depthTexture","isWebGLRenderTarget","setSize","DataTexture","isDataTexture","CubeTexture","isCubeTexture","emptyTexture","emptyCubeTexture","UniformContainer","seq","arrayCacheF32","arrayCacheI32","mat4array","Float32Array","mat3array","nBlocks","blockSize","firstElem","allocTexUnits","renderer","Int32Array","allocTextureUnit","setValue1f","gl","uniform1f","addr","setValue1i","uniform1i","setValue2fv","uniform2fv","uniform2f","setValue3fv","uniform3f","uniform3fv","setValue4fv","uniform4fv","uniform4f","setValue2fm","uniformMatrix2fv","setValue3fm","uniformMatrix3fv","setValue4fm","uniformMatrix4fv","setValueT1","unit","setTexture2D","setValueT6","setTextureCube","setValue2iv","uniform2iv","setValue3iv","uniform3iv","setValue4iv","uniform4iv","getSingularSetter","setValue1fv","uniform1fv","setValue1iv","uniform1iv","setValueV2a","setValueV3a","setValueV4a","setValueM2a","setValueM3a","setValueM4a","setValueT1a","units","setValueT6a","getPureArraySetter","SingleUniform","activeInfo","setValue","PureArrayUniform","StructuredUniform","u","RePathPart","addUniform","container","uniformObject","parseUniform","path","pathLength","lastIndex","exec","matchEnd","idIsIndex","subscript","next","WebGLUniforms","program","getProgramParameter","ACTIVE_UNIFORMS","info","getActiveUniform","getUniformLocation","setOptional","upload","needsUpdate","seqWithValue","ColorKeywords","Color","setRGB","isColor","setHex","setStyle","hex","setHSL","hue2rgb","style","handleAlpha","color","components","parseInt","charAt","copyGammaToLinear","gammaFactor","copyLinearToGamma","safeInverse","convertGammaToLinear","convertLinearToGamma","getHex","getHexString","getHSL","optionalTarget","hsl","hue","saturation","lightness","delta","getStyle","offsetHSL","addColors","color1","color2","UniformsLib","common","diffuse","opacity","uvTransform","alphaMap","specularmap","specularMap","envmap","envMap","flipEnvMap","reflectivity","refractionRatio","aomap","aoMap","aoMapIntensity","lightmap","lightMap","lightMapIntensity","emissivemap","emissiveMap","bumpmap","bumpMap","bumpScale","normalmap","normalMap","normalScale","displacementmap","displacementMap","displacementScale","displacementBias","roughnessmap","roughnessMap","metalnessmap","metalnessMap","gradientmap","gradientMap","fog","fogDensity","fogNear","fogFar","fogColor","lights","ambientLightColor","directionalLights","properties","direction","shadow","shadowBias","shadowRadius","shadowMapSize","directionalShadowMap","directionalShadowMatrix","spotLights","distance","coneCos","penumbraCos","decay","spotShadowMap","spotShadowMatrix","pointLights","shadowCameraNear","shadowCameraFar","pointShadowMap","pointShadowMatrix","hemisphereLights","skyColor","groundColor","rectAreaLights","points","UniformsUtils","merge","uniforms","merged","uniforms_src","uniforms_dst","parameter_src","alphamap_fragment","alphamap_pars_fragment","alphatest_fragment","aomap_fragment","aomap_pars_fragment","begin_vertex","beginnormal_vertex","bsdfs","bumpmap_pars_fragment","clipping_planes_fragment","clipping_planes_pars_fragment","clipping_planes_pars_vertex","clipping_planes_vertex","color_fragment","color_pars_fragment","color_pars_vertex","color_vertex","cube_uv_reflection_fragment","defaultnormal_vertex","displacementmap_pars_vertex","displacementmap_vertex","emissivemap_fragment","emissivemap_pars_fragment","encodings_fragment","encodings_pars_fragment","envmap_fragment","envmap_pars_fragment","envmap_pars_vertex","envmap_vertex","fog_vertex","fog_pars_vertex","fog_fragment","fog_pars_fragment","gradientmap_pars_fragment","lightmap_fragment","lightmap_pars_fragment","lights_lambert_vertex","lights_pars","lights_phong_fragment","lights_phong_pars_fragment","lights_physical_fragment","lights_physical_pars_fragment","lights_template","logdepthbuf_fragment","logdepthbuf_pars_fragment","logdepthbuf_pars_vertex","logdepthbuf_vertex","map_fragment","map_pars_fragment","map_particle_fragment","map_particle_pars_fragment","metalnessmap_fragment","metalnessmap_pars_fragment","morphnormal_vertex","morphtarget_pars_vertex","morphtarget_vertex","normal_fragment","normalmap_pars_fragment","packing","premultiplied_alpha_fragment","project_vertex","dithering_fragment","dithering_pars_fragment","roughnessmap_fragment","roughnessmap_pars_fragment","shadowmap_pars_fragment","shadowmap_pars_vertex","shadowmap_vertex","shadowmask_pars_fragment","skinbase_vertex","skinning_pars_vertex","skinning_vertex","skinnormal_vertex","specularmap_fragment","specularmap_pars_fragment","tonemapping_fragment","tonemapping_pars_fragment","uv_pars_fragment","uv_pars_vertex","uv_vertex","uv2_pars_fragment","uv2_pars_vertex","uv2_vertex","worldpos_vertex","cube_frag","cube_vert","depth_frag","depth_vert","distanceRGBA_frag","distanceRGBA_vert","equirect_frag","equirect_vert","linedashed_frag","linedashed_vert","meshbasic_frag","meshbasic_vert","meshlambert_frag","meshlambert_vert","meshphong_frag","meshphong_vert","meshphysical_frag","meshphysical_vert","normal_frag","normal_vert","points_frag","points_vert","shadow_frag","shadow_vert","ShaderChunk","ShaderLib","basic","vertexShader","fragmentShader","lambert","emissive","phong","specular","shininess","standard","roughness","metalness","envMapIntensity","dashed","dashSize","totalSize","depth","cube","tCube","tFlip","equirect","tEquirect","distanceRGBA","referencePosition","nearDistance","farDistance","physical","clearCoat","clearCoatRoughness","Box2","setFromPoints","makeEmpty","il","expandByPoint","setFromCenterAndSize","halfSize","box","getCenter","getSize","point","expandByVector","expandByScalar","containsPoint","containsBox","getParameter","intersectsBox","clampPoint","distanceToPoint","clampedPoint","intersect","WebGLFlareRenderer","state","capabilities","vertexBuffer","elementBuffer","shader","attributes","tempTexture","occlusionTexture","init","vertices","faces","Uint16Array","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","ELEMENT_ARRAY_BUFFER","createTexture","bindTexture","TEXTURE_2D","texImage2D","RGB","UNSIGNED_BYTE","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MAG_FILTER","NEAREST","TEXTURE_MIN_FILTER","RGBA","createProgram","vertex","getAttribLocation","renderType","occlusionMap","screenPosition","flares","scene","tempPosition","invAspect","halfViewportWidth","halfViewportHeight","screenPositionPixels","validArea","useProgram","initAttributes","enableAttribute","disableUnusedAttributes","vertexAttribPointer","FLOAT","disable","CULL_FACE","buffers","setMask","flare","matrixWorldInverse","activeTexture","TEXTURE0","TEXTURE1","copyTexImage2D","BLEND","enable","DEPTH_TEST","drawElements","TRIANGLES","UNSIGNED_SHORT","positionScreen","customUpdateCallback","updateLensFlares","jl","lensFlares","sprite","setBlending","blending","blendEquation","blendSrc","blendDst","reset","createShader","FRAGMENT_SHADER","VERTEX_SHADER","precision","shaderSource","compileShader","attachShader","linkProgram","CanvasTexture","WebGLSpriteRenderer","spritePosition","spriteRotation","spriteScale","uvOffset","uvScale","modelViewMatrix","fogType","fogDepth","alphaTest","fillStyle","fillRect","sprites","oldFogType","sceneFogType","isFog","isFogExp2","density","painterSortStable","material","visible","onBeforeRender","blendEquationAlpha","blendSrcAlpha","blendDstAlpha","premultipliedAlpha","setTest","depthTest","depthWrite","colorWrite","onAfterRender","renderOrder","materialId","Material","side","flatShading","vertexColors","transparent","depthFunc","clippingPlanes","clipIntersection","clipShadows","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","dithering","overdraw","userData","isMaterial","onBeforeCompile","setValues","newValue","currentValue","isRoot","emissiveIntensity","sizeAttenuation","linewidth","gapSize","wireframe","wireframeLinewidth","wireframeLinecap","wireframeLinejoin","morphTargets","skinning","JSON","stringify","extractFromCache","parse","srcPlanes","dstPlanes","MeshDepthMaterial","parameters","depthPacking","isMeshDepthMaterial","MeshDistanceMaterial","isMeshDistanceMaterial","Box3","isBox3","setFromArray","minX","minY","minZ","maxX","maxY","maxZ","setFromBufferAttribute","setFromObject","expandByObject","scope","traverse","node","geometry","isGeometry","isBufferGeometry","updateMatrixWorld","intersectsSphere","closestPoint","sphere","intersectsPlane","plane","getBoundingSphere","Sphere","optionalCenter","maxRadiusSq","empty","radiusSum","deltaLengthSq","getBoundingBox","Plane","setComponents","setFromNormalAndCoplanarPoint","setFromCoplanarPoints","inverseNormalLength","distanceToSphere","projectPoint","intersectLine","line","denominator","intersectsLine","startSign","endSign","end","coplanarPoint","m1","optionalNormalMatrix","normalMatrix","referencePoint","Frustum","p0","p1","p2","p3","p4","p5","planes","frustum","setFromMatrix","me0","me1","me2","me3","me4","me5","me6","me7","me8","me9","me10","me11","me12","me13","me14","me15","intersectsObject","boundingSphere","computeBoundingSphere","intersectsSprite","negRadius","WebGLShadowMap","_renderer","_objects","maxTextureSize","_frustum","_projScreenMatrix","_shadowMapSize","_maxShadowMapSize","_lookTarget","_lightPositionWorld","_MorphingFlag","_SkinningFlag","_NumberOfMaterialVariants","_depthMaterials","_distanceMaterials","_materialCache","cubeDirections","cubeUps","cube2DViewPorts","useMorphing","useSkinning","depthMaterial","distanceMaterial","enabled","autoUpdate","renderReverseSided","renderSingleSided","_gl","_state","setClear","setScissorTest","faceCount","light","isPointLight","shadowCamera","mapSize","vpWidth","vpHeight","pars","updateProjectionMatrix","isSpotLightShadow","shadowMap","shadowMatrix","setRenderTarget","clear","face","vpDimensions","renderObject","getDepthMaterial","lightPositionWorld","materialVariants","customMaterial","customDepthMaterial","customDistanceMaterial","morphAttributes","isSkinnedMesh","variantIndex","localClippingEnabled","keyA","keyB","materialsForVariant","cachedMaterial","layers","isMesh","isLine","isPoints","castShadow","frustumCulled","groups","k","kl","groupMaterial","materialIndex","renderBufferDirect","children","WebGLAttributes","bufferType","usage","dynamic","DYNAMIC_DRAW","buffer","onUploadCallback","Float64Array","Int16Array","SHORT","Uint32Array","UNSIGNED_INT","INT","BYTE","Uint8Array","bytesPerElement","BYTES_PER_ELEMENT","updateBuffer","updateRange","bufferSubData","subarray","isInterleavedBufferAttribute","remove","deleteBuffer","Euler","_order","DefaultOrder","RotationOrders","asin","setFromQuaternion","setFromVector3","reorder","newOrder","toVector3","optionalResult","Layers","mask","channel","toggle","object3DId","Object3D","parent","DefaultUp","onRotationChange","onQuaternionChange","enumerable","DefaultMatrixAutoUpdate","matrixWorldNeedsUpdate","receiveShadow","isObject3D","applyMatrix","setRotationFromAxisAngle","setRotationFromEuler","setRotationFromMatrix","setRotationFromQuaternion","rotateOnAxis","q1","rotateOnWorldAxis","rotateX","rotateY","rotateZ","translateOnAxis","translateX","translateY","translateZ","localToWorld","worldToLocal","isCamera","getObjectById","getObjectByProperty","getObjectByName","child","getWorldPosition","getWorldQuaternion","getWorldRotation","getWorldScale","getWorldDirection","raycast","traverseVisible","traverseAncestors","updateMatrix","force","geometries","materials","shapes","serialize","library","element","shape","uuids","recursive","Camera","OrthographicCamera","zoom","view","isOrthographicCamera","setViewOffset","fullWidth","fullHeight","offsetX","offsetY","clearViewOffset","zoomW","zoomH","scaleW","scaleH","Face3","vertexNormals","geometryId","Geometry","colors","faceVertexUvs","morphNormals","skinWeights","skinIndices","lineDistances","boundingBox","elementsNeedUpdate","verticesNeedUpdate","uvsNeedUpdate","normalsNeedUpdate","colorsNeedUpdate","lineDistancesNeedUpdate","groupsNeedUpdate","computeBoundingBox","fromBufferGeometry","indices","positions","normals","uvs","uvs2","uv2","tempNormals","tempUVs","tempUVs2","addFace","computeFaceNormals","ab","fl","vA","vB","vC","computeVertexNormals","areaWeighted","vl","computeFlatVertexNormals","computeMorphNormals","__originalFaceNormal","__originalVertexNormals","tmpGeo","faceNormals","dstNormalsFace","dstNormalsVertex","faceNormal","computeLineDistances","materialIndexOffset","vertexOffset","vertices1","vertices2","faces1","faces2","uvs1","colors1","colors2","vertexCopy","faceCopy","faceVertexNormals","faceVertexColors","uvCopy","mergeMesh","mesh","mergeVertices","verticesMap","changes","precisionPoints","faceIndicesToRemove","diff","sortFacesByMaterialIndex","_id","materialIndexSort","newUvs1","newUvs2","normalsHash","colorsHash","uvsHash","hasMaterial","hasFaceUv","hasFaceVertexUv","hasFaceNormal","hasFaceVertexNormal","hasFaceColor","hasFaceVertexColor","faceType","setBit","getUvIndex","getNormalIndex","getColorIndex","hash","uvsCopy","morphTarget","morphNormal","srcVertexNormal","destVertexNormal","BufferAttribute","itemSize","normalized","isBufferAttribute","setArray","setDynamic","copyAt","index1","index2","copyArray","copyColorsArray","copyIndicesArray","copyVector2sArray","vectors","copyVector3sArray","copyVector4sArray","setXY","setXYZW","onUpload","Int8BufferAttribute","Uint8BufferAttribute","Uint8ClampedBufferAttribute","Uint8ClampedArray","Int16BufferAttribute","Uint16BufferAttribute","Int32BufferAttribute","Uint32BufferAttribute","Float32BufferAttribute","Float64BufferAttribute","DirectGeometry","computeGroups","fromGeometry","hasFaceVertexUv2","morphTargetsLength","morphTargetsPosition","morphNormalsLength","morphTargetsNormal","hasSkinIndices","hasSkinWeights","vertexUvs","arrayMax","bufferGeometryId","BufferGeometry","drawRange","getIndex","setIndex","addAttribute","getAttribute","removeAttribute","addGroup","clearGroups","setDrawRange","updateFromObject","direct","__directGeometry","lineDistance","fromDirectGeometry","TypeArray","pA","pB","pC","normalizeNormals","attribute1","attributeArray1","attribute2","attributeArray2","attributeSize","toNonIndexed","geometry2","array2","morphAttribute","BoxGeometry","widthSegments","heightSegments","depthSegments","BoxBufferGeometry","numberOfVertices","groupStart","buildPlane","udir","vdir","gridX","gridY","segmentWidth","segmentHeight","widthHalf","heightHalf","depthHalf","gridX1","gridY1","vertexCounter","groupCount","PlaneGeometry","PlaneBufferGeometry","width_half","height_half","segment_width","segment_height","MeshBasicMaterial","combine","isMeshBasicMaterial","ShaderMaterial","defines","clipping","extensions","derivatives","fragDepth","drawBuffers","shaderTextureLOD","defaultAttributeValues","index0AttributeName","isShaderMaterial","Ray","origin","ray","at","recast","closestPointToPoint","directionDistance","distanceSqToPoint","distanceSqToSegment","segCenter","segDir","v0","optionalPointOnRay","optionalPointOnSegment","segExtent","a01","b0","s0","sqrDist","extDet","invDet","intersectSphere","tca","radius2","thc","t0","t1","distanceToPlane","intersectPlane","distToPoint","intersectBox","tmin","tmax","tymin","tymax","tzmin","tzmax","invdirx","invdiry","invdirz","intersectTriangle","edge1","edge2","backfaceCulling","DdN","DdQxE2","DdE1xQ","QdN","Line3","distanceSq","closestPointToPointParameter","startP","startEnd","clampToLine","startEnd2","startEnd_startP","Triangle","resultLengthSq","barycoordFromPoint","dot00","dot01","dot02","dot11","dot12","denom","invDenom","setFromPointsAndIndices","i0","i1","i2","triangle","area","midpoint","edgeList","projectedPoint","minDistance","Mesh","drawMode","updateMorphTargets","setDrawMode","morphTargetInfluences","morphTargetDictionary","ml","inverseMatrix","tempA","tempB","tempC","uvA","uvB","uvC","barycoord","intersectionPoint","intersectionPointWorld","uvIntersection","uv1","uv3","checkIntersection","raycaster","checkBufferGeometryIntersection","faceIndex","intersects","fvA","fvB","fvC","isMultiMaterial","faceMaterial","morphInfluences","tl","influence","targets","uvs_f","WebGLBackground","clearColor","clearAlpha","planeCamera","planeMesh","boxMesh","renderList","forceClear","background","autoClear","autoClearColor","autoClearDepth","autoClearStencil","getClearColor","setClearColor","getClearAlpha","setClearAlpha","reversePainterSortStable","WebGLRenderList","renderItems","renderItemsIndex","opaque","renderItem","WebGLRenderLists","lists","absNumericalSort","WebGLMorphtargets","influencesList","objectInfluences","influences","getUniforms","WebGLIndexedBufferRenderer","infoRender","mode","setMode","calls","POINTS","renderInstances","extension","drawElementsInstancedANGLE","maxInstancedCount","WebGLBufferRenderer","drawArrays","drawArraysInstancedANGLE","WebGLGeometries","infoMemory","wireframeAttributes","onGeometryDispose","buffergeometry","_bufferGeometry","geometryAttributes","getWireframeAttribute","geometryIndex","UniformsCache","halfWidth","halfHeight","WebGLLights","ambient","directional","spot","rectArea","hemi","vector3","matrix42","setup","shadows","directionalLength","pointLength","spotLength","rectAreaLength","hemiLength","viewMatrix","intensity","isAmbientLight","isDirectionalLight","bias","isSpotLight","penumbra","isRectAreaLight","isHemisphereLight","WebGLObjects","updateList","frame","addLineNumbers","lines","split","WebGLShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","programIdCount","getEncodingComponents","getTexelDecodingFunction","functionName","getTexelEncodingFunction","getToneMappingFunction","toneMapping","toneMappingName","generateExtensions","rendererExtensions","chunks","envMapCubeUV","logarithmicDepthBuffer","filterEmptyLine","generateDefines","fetchAttributeLocations","ACTIVE_ATTRIBUTES","getActiveAttrib","replaceLightNums","numDirLights","numSpotLights","numRectAreaLights","numPointLights","numHemiLights","parseIncludes","pattern","unrollLoops","snippet","unroll","WebGLProgram","code","shadowMapTypeDefine","shadowMapType","envMapTypeDefine","envMapModeDefine","envMapBlendingDefine","gammaFactorDefine","customExtensions","customDefines","prefixVertex","prefixFragment","isRawShaderMaterial","supportsVertexTextures","maxBones","useFog","fogExp","useVertexTexture","doubleSided","flipSided","numClippingPlanes","shadowMapEnabled","numClipIntersection","physicallyCorrectLights","outputEncoding","mapEncoding","envMapEncoding","emissiveMapEncoding","vertexGlsl","fragmentGlsl","glVertexShader","glFragmentShader","bindAttribLocation","programLog","getProgramInfoLog","vertexLog","fragmentLog","runnable","haveDiagnostics","LINK_STATUS","getError","VALIDATE_STATUS","diagnostics","deleteShader","cachedUniforms","cachedAttributes","getAttributes","destroy","deleteProgram","usedTimes","WebGLPrograms","programs","shaderIDs","MeshNormalMaterial","MeshLambertMaterial","MeshPhongMaterial","MeshToonMaterial","MeshStandardMaterial","MeshPhysicalMaterial","LineBasicMaterial","LineDashedMaterial","PointsMaterial","ShadowMaterial","parameterNames","allocateBones","skeleton","bones","floatVertexTextures","nVertexUniforms","maxVertexUniforms","nVertexMatrices","getTextureEncodingFromMap","gammaOverrideLinear","getParameters","nClipPlanes","nClipIntersection","shaderID","getMaxPrecision","currentRenderTarget","getRenderTarget","vertexTextures","gammaOutput","gammaInput","envMapMode","maxMorphTargets","maxMorphNormals","getProgramCode","acquireProgram","pl","programInfo","releaseProgram","WebGLTextures","utils","_isWebGL2","WebGL2RenderingContext","window","_videoTextures","clampToMaxSize","maxSize","makePowerOfTwo","HTMLImageElement","ImageBitmap","textureNeedsPowerOfTwo","textureNeedsGenerateMipmaps","filterFallback","LINEAR","onTextureDispose","deallocateTexture","isVideoTexture","onRenderTargetDispose","renderTarget","deallocateRenderTarget","textureProperties","__image__webglTextureCube","deleteTexture","__webglInit","__webglTexture","renderTargetProperties","isWebGLRenderTargetCube","deleteFramebuffer","__webglFramebuffer","__webglDepthbuffer","deleteRenderbuffer","slot","__version","complete","uploadTexture","TEXTURE_CUBE_MAP","pixelStorei","UNPACK_FLIP_Y_WEBGL","isCompressed","isCompressedTexture","cubeImage","maxCubemapSize","isPowerOfTwoImage","glFormat","convert","glType","setTextureParameters","TEXTURE_CUBE_MAP_POSITIVE_X","mipmap","getCompressedTextureFormats","compressedTexImage2D","generateMipmap","setTextureCubeDynamic","textureType","__currentAnisotropy","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","getMaxAnisotropy","UNPACK_PREMULTIPLY_ALPHA_WEBGL","UNPACK_ALIGNMENT","isDepthTexture","internalFormat","DEPTH_COMPONENT","DEPTH_COMPONENT32F","DEPTH_COMPONENT16","DEPTH_STENCIL","setupFrameBufferTexture","framebuffer","attachment","textureTarget","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","setupRenderBufferStorage","renderbuffer","bindRenderbuffer","RENDERBUFFER","renderbufferStorage","framebufferRenderbuffer","DEPTH_ATTACHMENT","DEPTH_STENCIL_ATTACHMENT","RGBA4","setupDepthTexture","isCube","webglDepthTexture","setupDepthRenderbuffer","createRenderbuffer","setupRenderTarget","isTargetPowerOfTwo","createFramebuffer","COLOR_ATTACHMENT0","updateRenderTargetMipmap","webglTexture","updateVideoTextures","WebGLProperties","WebGLState","ColorBuffer","locked","currentColorMask","currentColorClear","colorMask","setLocked","lock","DepthBuffer","currentDepthMask","currentDepthFunc","currentDepthClear","depthMask","setFunc","NEVER","ALWAYS","LESS","LEQUAL","EQUAL","GEQUAL","GREATER","NOTEQUAL","clearDepth","StencilBuffer","currentStencilMask","currentStencilFunc","currentStencilRef","currentStencilFuncMask","currentStencilFail","currentStencilZFail","currentStencilZPass","currentStencilClear","stencilTest","STENCIL_TEST","stencilMask","stencilFunc","stencilRef","setOp","stencilFail","stencilZFail","stencilZPass","stencilOp","stencil","clearStencil","colorBuffer","maxVertexAttributes","MAX_VERTEX_ATTRIBS","newAttributes","enabledAttributes","attributeDivisors","compressedTextureFormats","currentProgram","currentBlending","currentBlendEquation","currentBlendSrc","currentBlendDst","currentBlendEquationAlpha","currentBlendSrcAlpha","currentBlendDstAlpha","currentPremultipledAlpha","currentFlipSided","currentCullFace","currentLineWidth","currentPolygonOffsetFactor","currentPolygonOffsetUnits","maxTextures","MAX_COMBINED_TEXTURE_IMAGE_UNITS","lineWidthAvailable","currentTextureSlot","currentBoundTextures","currentScissor","currentViewport","emptyTextures","setFlipSided","setCullFace","enableVertexAttribArray","vertexAttribDivisorANGLE","enableAttributeAndDivisor","meshPerAttribute","disableVertexAttribArray","formats","COMPRESSED_TEXTURE_FORMATS","blendEquationSeparate","FUNC_ADD","blendFuncSeparate","ONE","blendFunc","SRC_ALPHA","ZERO","ONE_MINUS_SRC_COLOR","ONE_MINUS_SRC_ALPHA","SRC_COLOR","setMaterial","frontFaceCW","setPolygonOffset","frontFace","CW","CCW","cullFace","BACK","FRONT","FRONT_AND_BACK","setLineWidth","lineWidth","factor","POLYGON_OFFSET_FILL","SCISSOR_TEST","webglSlot","webglType","boundTexture","WebGLCapabilities","maxAnisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT","getShaderPrecisionFormat","HIGH_FLOAT","MEDIUM_FLOAT","maxPrecision","MAX_TEXTURE_IMAGE_UNITS","maxVertexTextures","MAX_VERTEX_TEXTURE_IMAGE_UNITS","MAX_TEXTURE_SIZE","MAX_CUBE_MAP_TEXTURE_SIZE","maxAttributes","MAX_VERTEX_UNIFORM_VECTORS","maxVaryings","MAX_VARYING_VECTORS","maxFragmentUniforms","MAX_FRAGMENT_UNIFORM_VECTORS","floatFragmentTextures","PerspectiveCamera","fov","aspect","focus","filmGauge","filmOffset","isPerspectiveCamera","setFocalLength","focalLength","vExtentSlope","getFilmHeight","atan","getFocalLength","tan","getEffectiveFOV","getFilmWidth","skew","ArrayCamera","cameras","isArrayCamera","WebVRManager","device","frameData","poseTarget","VRFrameData","cameraL","bounds","cameraR","cameraVR","currentSize","currentPixelRatio","onVRDisplayPresentChange","isPresenting","eyeParameters","getEyeParameters","renderWidth","renderHeight","getPixelRatio","setDrawingBufferSize","getDevice","setDevice","setPoseTarget","getCamera","depthNear","depthFar","getFrameData","pose","poseObject","orientation","leftViewMatrix","rightViewMatrix","leftProjectionMatrix","rightProjectionMatrix","getLayers","layer","leftBounds","rightBounds","submitFrame","WebGLExtensions","getExtension","WebGLClipping","globalState","numGlobalPlanes","renderingShadows","viewNormalMatrix","uniform","numPlanes","numIntersection","enableLocalClipping","projectPlanes","beginShadows","endShadows","resetGlobalState","setState","fromCache","nGlobal","lGlobal","dstArray","clippingState","skipTransform","nPlanes","flatSize","i4","WebGLUtils","REPEAT","MIRRORED_REPEAT","NEAREST_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_NEAREST","LINEAR_MIPMAP_LINEAR","UNSIGNED_SHORT_4_4_4_4","UNSIGNED_SHORT_5_5_5_1","UNSIGNED_SHORT_5_6_5","HALF_FLOAT_OES","ALPHA","LUMINANCE","LUMINANCE_ALPHA","FUNC_SUBTRACT","FUNC_REVERSE_SUBTRACT","DST_ALPHA","ONE_MINUS_DST_ALPHA","DST_COLOR","ONE_MINUS_DST_COLOR","SRC_ALPHA_SATURATE","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","COMPRESSED_RGB_PVRTC_4BPPV1_IMG","COMPRESSED_RGB_PVRTC_2BPPV1_IMG","COMPRESSED_RGBA_PVRTC_4BPPV1_IMG","COMPRESSED_RGBA_PVRTC_2BPPV1_IMG","COMPRESSED_RGB_ETC1_WEBGL","MIN_EXT","MAX_EXT","UNSIGNED_INT_24_8_WEBGL","WebGLRenderer","_canvas","_context","_alpha","_depth","_stencil","_antialias","antialias","_premultipliedAlpha","_preserveDrawingBuffer","preserveDrawingBuffer","_powerPreference","powerPreference","lightsArray","shadowsArray","currentRenderList","spritesArray","flaresArray","domElement","sortObjects","toneMappingExposure","toneMappingWhitePoint","_this","_isContextLost","_currentRenderTarget","_currentFramebuffer","_currentMaterialId","_currentGeometryProgram","_currentCamera","_currentArrayCamera","_currentViewport","_currentScissor","_currentScissorTest","_usedTextureUnits","_width","_height","_pixelRatio","_viewport","_scissor","_scissorTest","_clipping","_clippingEnabled","_localClippingEnabled","_vector3","_infoMemory","_infoRender","memory","getTargetPixelRatio","contextAttributes","onContextLost","onContextRestore","message","objects","programCache","renderLists","morphtargets","bufferRenderer","indexedBufferRenderer","flareRenderer","spriteRenderer","initGLContext","vr","getContextAttributes","forceContextLoss","loseContext","forceContextRestore","restoreContext","setPixelRatio","updateStyle","setViewport","getDrawingBufferSize","pixelRatio","setScissor","boolean","bits","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT","clearTarget","preventDefault","onMaterialDispose","deallocateMaterial","releaseMaterialProgramReference","renderObjectImmediate","renderBufferImmediate","hasPositions","hasNormals","hasUvs","hasColors","programAttributes","positionArray","isMeshPhongMaterial","isMeshStandardMaterial","isMeshNormalMaterial","normalArray","nx","ny","nz","uvArray","colorArray","setProgram","geometryProgram","updateBuffers","rangeFactor","setupVertexAttributes","dataCount","rangeStart","rangeCount","drawStart","drawEnd","drawCount","LINES","TRIANGLE_STRIP","TRIANGLE_FAN","isLineSegments","isLineLoop","LINE_LOOP","LINE_STRIP","isInstancedBufferGeometry","materialDefaultAttributeValues","programAttribute","geometryAttribute","stride","isInstancedInterleavedBuffer","isInstancedBufferAttribute","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttrib1fv","compile","isLight","initMaterial","isAnimating","onAnimationFrame","requestAnimationFrame","loop","time","animate","projectObject","opaqueObjects","transparentObjects","overrideMaterial","renderObjects","isSprite","isLensFlare","isImmediateRenderObject","camera2","materialProperties","programChange","numSupportedMorphTargets","numSupportedMorphNormals","lightsHash","progUniforms","uniformsList","useCache","refreshProgram","refreshMaterial","refreshLights","p_uniforms","m_uniforms","uCamPos","cameraPosition","isMeshLambertMaterial","boneTexture","boneMatrices","boneTextureSize","markUniformsLightsNeedsUpdate","refreshUniformsFog","refreshUniformsCommon","refreshUniformsLambert","isMeshToonMaterial","refreshUniformsToon","refreshUniformsPhong","isMeshPhysicalMaterial","refreshUniformsPhysical","refreshUniformsStandard","refreshUniformsDepth","refreshUniformsDistance","refreshUniformsNormal","isLineBasicMaterial","refreshUniformsLine","isLineDashedMaterial","refreshUniformsDash","isPointsMaterial","refreshUniformsPoints","isShadowMaterial","ltcMat","LTC_MAT_TEXTURE","ltcMag","LTC_MAG_TEXTURE","uvScaleMap","setFaceCulling","frontFaceDirection","textureUnit","warned","setTexture","activeCubeFace","activeMipMapLevel","readRenderTargetPixels","restore","textureFormat","IMPLEMENTATION_COLOR_READ_FORMAT","IMPLEMENTATION_COLOR_READ_TYPE","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","readPixels","Scene","Cache","files","file","LoadingManager","onLoad","onProgress","onError","isLoading","itemsLoaded","itemsTotal","urlModifier","onStart","itemStart","itemEnd","itemError","resolveURL","setURLModifier","transform","DefaultLoadingManager","ImageLoader","manager","crossOrigin","load","cached","substr","src","setCrossOrigin","setPath","TextureLoader","loader","isJPEG","search","require","o","Detector","CanvasRenderingContext2D","webgl","createElement","WebGLRenderingContext","workers","Worker","fileapi","File","FileReader","FileList","Blob","getWebGLErrorMessage","fontFamily","fontSize","fontWeight","textAlign","padding","margin","innerHTML","addGetWebGLMessage","body","appendChild","notUseNative","msSetImmediate","setImmediate","clearImmediate","msClearImmediate","doc","Timer","polifill","nextId","tasks","run","handleId","task","handler","messageChannel","MessageChannel","port1","onmessage","port2","postMessage","nextTick","process","messagePrefix","onGlobalMessage","attachEvent","readyStateChange","html","documentElement","script","onreadystatechange","removeChild","canUsePostMessage","importScripts","asynch","oldOnMessage","navigator","userAgent","attachTo","getPrototypeOf","usePolifill","eval","EventEmitter","originalGlobalValue","indexOfListener","alias","aliasClosure","getListeners","evt","events","_getEvents","response","flattenListeners","flatListeners","getListenersAsObject","addListener","listenerIsWrapped","on","addOnceListener","defineEvent","defineEvents","evts","removeListener","off","addListeners","manipulateListeners","removeListeners","single","multiple","removeEvent","_events","removeAllListeners","emitEvent","listenersMap","_getOnceReturnValue","trigger","emit","setOnceReturnValue","_onceReturnValue","GrowingPacker","fit","blocks","block","findNode","splitNode","growNode","used","down","canGrowDown","canGrowRight","shouldGrowRight","shouldGrowDown","growRight","growDown","lastTime","vendors","cancelAnimationFrame","raf","currTime","timeToCall","previousBlotter","Blotter","Messaging","throwError","_texts","_textEventBindings","_scopes","_scopeEventBindings","Renderer","_startTime","_lastDrawTime","_updateMaterialUniforms","_material","uTimeDelta","uGlobalTime","_rendererRendered","playing","_updateUniformValue","uniformName","mappingMaterial","uniformInterface","_updateTextUniformValue","textId","textUniformInterface","_update","buildMapping","buildMappingMaterial","buildStages","MappingBuilder","build","newMapping","_mapping","ratio","MappingMaterialBuilder","newMappingMaterial","shaderMaterial","autostart","lastUpdated","texts","removeTexts","addTexts","imageData","CanvasUtils","autobuild","autoplay","teardown","ensureInstanceOf","_materialEventBinding","unsetEventCallbacks","ModelEventBinding","updateUniform","eventCallbacks","addText","filteredTexts","TextUtils","filterTexts","newTexts","RenderScope","removeText","removedTexts","forText","Text","logError","boundsForText","Version","webglRenderer","Assets","Shaders","_formattedMessage","domain","constructorStr","formatted","logWarning","_extendWithGettersSetters","getOwnPropertyDescriptor","VendorPrefixes","model","eventKey","class","hiDpiCanvas","updateCanvasSize","setTransform","ctx","dpr","devicePixelRatio","bsr","backingStorePixelRatio","mousePosition","rect","getBoundingClientRect","clientX","clientY","normalizedMousePosition","PropertyDefaults","family","fill","weight","paddingTop","paddingRight","paddingBottom","paddingLeft","Properties","ensurePropertyValues","isText","stringifiedPadding","_properties","pTop","pRight","pBottom","pLeft","sizeForText","textValue","el","display","fontStyle","lineHeight","maxWidth","visibility","offsetWidth","offsetHeight","UniformUtils","UniformTypes","defaultUniforms","uResolution","uBlendColor","uPixelRatio","validValueForUniformType","valid","isValid","glslDataTypeForUniformType","dataType","fullSwizzleStringForUniformType","swizzleString","extractValidUniforms","uniformDescription","ensureHasRequiredDefaultUniforms","hasRequiredDefaultUniforms","missingKeys","Blending","Inf","LineMath","BlinnPhongSpecular","Easing","Gamma","Map","Noise","Noise2D","Noise3D","Noise4D","Random","Mapping","textBounds","_textBounds","_ratio","_getLineHeightPixels","toCanvas","completion","img","Image","textBaseline","halfLH","font","save","fillText","onload","clearRect","MappingMaterial","userUniformDataTextureObjects","_userUniformDataTextureObjects","_setValueAtIndexInDataTextureObject","userUniform","_getUniformInterfaceForDataTextureObject","dataTextureObject","itface","_type","_value","_getTextUniformInterface","textIndex","userUniforms","uniformIndex","_getUniformInterface","mainImage","_defaultMainImageSrc","_getUniformInterfaceForUniformDescription","_mainImage","_uniforms","blotter","_mappingMaterial","timeDelta","lastDrawTime","frameCount","_setMouseEventListeners","eventNames","setMouseListener","eventName","_getBoundsForMappingMaterialAndText","_transferInferfaceValues","oldInterface","newInterface","interfaceObject","newInterfaceObject","typesMatch","valuesMatch","_getUniformInterfaceForMaterialUniforms","previousUniforms","play","pause","appendTo","append","_currentAnimationLoop","_scene","_plane","_mesh","_camera","_getRenderTargetWithSize","_loop","_renderTarget","_imageDataArray","trunc","_viewBuffer","ArrayBuffer","_clampedImageDataArray","BoundsDataTextureBuilder","_boundsDataForMapping","IndicesDataTextureBuilder","_indicesDataForMapping","sampleAccuracy","widthStepModifier","indicesOffset","refIndex","bg","ki","bW","bH","bX","bY","TextTextureBuilder","_sortTexts","textA","textB","areaA","areaB","_getTextSizes","textSizes","packer","tempTextBounds","tempSizesObject","referenceId","packedSizesObject","_vertexSrc","vertexSrc","_fragmentSrc","textsLength","mainImageSrc","fragmentSrc","publicUniformDeclarations","publicUniformDefinitions","halfPixel","toFixed","userUniformsTextureWidth","glslSwizzle","glslDataType","uniformSamplePosition","TextTexture","_buildMappedTextsTexture","_buildMappingDataTextureObjects","buildIndicesTexture","buildBoundsTexture","mappingDataTextureObjects","_buildUserUniformDataTextureObjects","uniformsDataLength","uniformPosition","_getUniformsForMappingDataTextureObjects","mappingDataTextureObject","_getUniformsForUserUniformDataObjects","userUniformDataObjects","_userUniformsTexture","_getUniforms","mappedTextsTexture","_uSampler","_uCanvasResolution","_getThreeMaterial","threeMaterial","buildMappedTextsTexture","buildMappingDataTextureObjects","buildUserUniformDataAndDataTextureObjects","userUniformDataAndDataTextureObjects","buildUserUniformDataTextureObjects"],"mappings":"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","sourcesContent":["/*!\n//                 \n//                           \n//                             \n//                         \n//                                \n//                                          \n// The MIT License\n//\n// Copyright  1986 - , Blotter / Bradley Griffith / http://bradley.computer\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n*/\n\n//     Underscore.js 1.8.3\n//     http://underscorejs.org\n//     (c) 2009-2016 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n//     Underscore may be freely distributed under the MIT license.\n\n(function() {\n\n  // Baseline setup\n  // --------------\n\n  // Establish the root object, `window` (`self`) in the browser, `global`\n  // on the server, or `this` in some virtual machines. We use `self`\n  // instead of `window` for `WebWorker` support.\n  var root = typeof self == 'object' && self.self === self && self ||\n            typeof global == 'object' && global.global === global && global ||\n            this;\n\n  // Save the previous value of the `_` variable.\n  var previousUnderscore = root._;\n\n  // Save bytes in the minified (but not gzipped) version:\n  var ArrayProto = Array.prototype, ObjProto = Object.prototype;\n  var SymbolProto = typeof Symbol !== 'undefined' ? Symbol.prototype : null;\n\n  // Create quick reference variables for speed access to core prototypes.\n  var push = ArrayProto.push,\n      slice = ArrayProto.slice,\n      toString = ObjProto.toString,\n      hasOwnProperty = ObjProto.hasOwnProperty;\n\n  // All **ECMAScript 5** native function implementations that we hope to use\n  // are declared here.\n  var nativeIsArray = Array.isArray,\n      nativeKeys = Object.keys,\n      nativeCreate = Object.create;\n\n  // Naked function reference for surrogate-prototype-swapping.\n  var Ctor = function(){};\n\n  // Create a safe reference to the Underscore object for use below.\n  var _ = function(obj) {\n    if (obj instanceof _) return obj;\n    if (!(this instanceof _)) return new _(obj);\n    this._wrapped = obj;\n  };\n\n  // Export the Underscore object for **Node.js**, with\n  // backwards-compatibility for their old module API. If we're in\n  // the browser, add `_` as a global object.\n  // (`nodeType` is checked to ensure that `module`\n  // and `exports` are not HTML elements.)\n  if (typeof exports != 'undefined' && !exports.nodeType) {\n    if (typeof module != 'undefined' && !module.nodeType && module.exports) {\n      exports = module.exports = _;\n    }\n    exports._ = _;\n  } else {\n    root._ = _;\n  }\n\n  // Current version.\n  _.VERSION = '1.8.3';\n\n  // Internal function that returns an efficient (for current engines) version\n  // of the passed-in callback, to be repeatedly applied in other Underscore\n  // functions.\n  var optimizeCb = function(func, context, argCount) {\n    if (context === void 0) return func;\n    switch (argCount == null ? 3 : argCount) {\n      case 1: return function(value) {\n        return func.call(context, value);\n      };\n      // The 2-parameter case has been omitted only because no current consumers\n      // made use of it.\n      case 3: return function(value, index, collection) {\n        return func.call(context, value, index, collection);\n      };\n      case 4: return function(accumulator, value, index, collection) {\n        return func.call(context, accumulator, value, index, collection);\n      };\n    }\n    return function() {\n      return func.apply(context, arguments);\n    };\n  };\n\n  var builtinIteratee;\n\n  // An internal function to generate callbacks that can be applied to each\n  // element in a collection, returning the desired result  either `identity`,\n  // an arbitrary callback, a property matcher, or a property accessor.\n  var cb = function(value, context, argCount) {\n    if (_.iteratee !== builtinIteratee) return _.iteratee(value, context);\n    if (value == null) return _.identity;\n    if (_.isFunction(value)) return optimizeCb(value, context, argCount);\n    if (_.isObject(value)) return _.matcher(value);\n    return _.property(value);\n  };\n\n  // External wrapper for our callback generator. Users may customize\n  // `_.iteratee` if they want additional predicate/iteratee shorthand styles.\n  // This abstraction hides the internal-only argCount argument.\n  _.iteratee = builtinIteratee = function(value, context) {\n    return cb(value, context, Infinity);\n  };\n\n  // Similar to ES6's rest param (http://ariya.ofilabs.com/2013/03/es6-and-rest-parameter.html)\n  // This accumulates the arguments passed into an array, after a given index.\n  var restArgs = function(func, startIndex) {\n    startIndex = startIndex == null ? func.length - 1 : +startIndex;\n    return function() {\n      var length = Math.max(arguments.length - startIndex, 0);\n      var rest = Array(length);\n      for (var index = 0; index < length; index++) {\n        rest[index] = arguments[index + startIndex];\n      }\n      switch (startIndex) {\n        case 0: return func.call(this, rest);\n        case 1: return func.call(this, arguments[0], rest);\n        case 2: return func.call(this, arguments[0], arguments[1], rest);\n      }\n      var args = Array(startIndex + 1);\n      for (index = 0; index < startIndex; index++) {\n        args[index] = arguments[index];\n      }\n      args[startIndex] = rest;\n      return func.apply(this, args);\n    };\n  };\n\n  // An internal function for creating a new object that inherits from another.\n  var baseCreate = function(prototype) {\n    if (!_.isObject(prototype)) return {};\n    if (nativeCreate) return nativeCreate(prototype);\n    Ctor.prototype = prototype;\n    var result = new Ctor;\n    Ctor.prototype = null;\n    return result;\n  };\n\n  var property = function(key) {\n    return function(obj) {\n      return obj == null ? void 0 : obj[key];\n    };\n  };\n\n  // Helper for collection methods to determine whether a collection\n  // should be iterated as an array or as an object.\n  // Related: http://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength\n  // Avoids a very nasty iOS 8 JIT bug on ARM-64. #2094\n  var MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;\n  var getLength = property('length');\n  var isArrayLike = function(collection) {\n    var length = getLength(collection);\n    return typeof length == 'number' && length >= 0 && length <= MAX_ARRAY_INDEX;\n  };\n\n  // Collection Functions\n  // --------------------\n\n  // The cornerstone, an `each` implementation, aka `forEach`.\n  // Handles raw objects in addition to array-likes. Treats all\n  // sparse array-likes as if they were dense.\n  _.each = _.forEach = function(obj, iteratee, context) {\n    iteratee = optimizeCb(iteratee, context);\n    var i, length;\n    if (isArrayLike(obj)) {\n      for (i = 0, length = obj.length; i < length; i++) {\n        iteratee(obj[i], i, obj);\n      }\n    } else {\n      var keys = _.keys(obj);\n      for (i = 0, length = keys.length; i < length; i++) {\n        iteratee(obj[keys[i]], keys[i], obj);\n      }\n    }\n    return obj;\n  };\n\n  // Return the results of applying the iteratee to each element.\n  _.map = _.collect = function(obj, iteratee, context) {\n    iteratee = cb(iteratee, context);\n    var keys = !isArrayLike(obj) && _.keys(obj),\n        length = (keys || obj).length,\n        results = Array(length);\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys ? keys[index] : index;\n      results[index] = iteratee(obj[currentKey], currentKey, obj);\n    }\n    return results;\n  };\n\n  // Create a reducing function iterating left or right.\n  var createReduce = function(dir) {\n    // Wrap code that reassigns argument variables in a separate function than\n    // the one that accesses `arguments.length` to avoid a perf hit. (#1991)\n    var reducer = function(obj, iteratee, memo, initial) {\n      var keys = !isArrayLike(obj) && _.keys(obj),\n          length = (keys || obj).length,\n          index = dir > 0 ? 0 : length - 1;\n      if (!initial) {\n        memo = obj[keys ? keys[index] : index];\n        index += dir;\n      }\n      for (; index >= 0 && index < length; index += dir) {\n        var currentKey = keys ? keys[index] : index;\n        memo = iteratee(memo, obj[currentKey], currentKey, obj);\n      }\n      return memo;\n    };\n\n    return function(obj, iteratee, memo, context) {\n      var initial = arguments.length >= 3;\n      return reducer(obj, optimizeCb(iteratee, context, 4), memo, initial);\n    };\n  };\n\n  // **Reduce** builds up a single result from a list of values, aka `inject`,\n  // or `foldl`.\n  _.reduce = _.foldl = _.inject = createReduce(1);\n\n  // The right-associative version of reduce, also known as `foldr`.\n  _.reduceRight = _.foldr = createReduce(-1);\n\n  // Return the first value which passes a truth test. Aliased as `detect`.\n  _.find = _.detect = function(obj, predicate, context) {\n    var keyFinder = isArrayLike(obj) ? _.findIndex : _.findKey;\n    var key = keyFinder(obj, predicate, context);\n    if (key !== void 0 && key !== -1) return obj[key];\n  };\n\n  // Return all the elements that pass a truth test.\n  // Aliased as `select`.\n  _.filter = _.select = function(obj, predicate, context) {\n    var results = [];\n    predicate = cb(predicate, context);\n    _.each(obj, function(value, index, list) {\n      if (predicate(value, index, list)) results.push(value);\n    });\n    return results;\n  };\n\n  // Return all the elements for which a truth test fails.\n  _.reject = function(obj, predicate, context) {\n    return _.filter(obj, _.negate(cb(predicate)), context);\n  };\n\n  // Determine whether all of the elements match a truth test.\n  // Aliased as `all`.\n  _.every = _.all = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var keys = !isArrayLike(obj) && _.keys(obj),\n        length = (keys || obj).length;\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys ? keys[index] : index;\n      if (!predicate(obj[currentKey], currentKey, obj)) return false;\n    }\n    return true;\n  };\n\n  // Determine if at least one element in the object matches a truth test.\n  // Aliased as `any`.\n  _.some = _.any = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var keys = !isArrayLike(obj) && _.keys(obj),\n        length = (keys || obj).length;\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys ? keys[index] : index;\n      if (predicate(obj[currentKey], currentKey, obj)) return true;\n    }\n    return false;\n  };\n\n  // Determine if the array or object contains a given item (using `===`).\n  // Aliased as `includes` and `include`.\n  _.contains = _.includes = _.include = function(obj, item, fromIndex, guard) {\n    if (!isArrayLike(obj)) obj = _.values(obj);\n    if (typeof fromIndex != 'number' || guard) fromIndex = 0;\n    return _.indexOf(obj, item, fromIndex) >= 0;\n  };\n\n  // Invoke a method (with arguments) on every item in a collection.\n  _.invoke = restArgs(function(obj, method, args) {\n    var isFunc = _.isFunction(method);\n    return _.map(obj, function(value) {\n      var func = isFunc ? method : value[method];\n      return func == null ? func : func.apply(value, args);\n    });\n  });\n\n  // Convenience version of a common use case of `map`: fetching a property.\n  _.pluck = function(obj, key) {\n    return _.map(obj, _.property(key));\n  };\n\n  // Convenience version of a common use case of `filter`: selecting only objects\n  // containing specific `key:value` pairs.\n  _.where = function(obj, attrs) {\n    return _.filter(obj, _.matcher(attrs));\n  };\n\n  // Convenience version of a common use case of `find`: getting the first object\n  // containing specific `key:value` pairs.\n  _.findWhere = function(obj, attrs) {\n    return _.find(obj, _.matcher(attrs));\n  };\n\n  // Return the maximum element (or element-based computation).\n  _.max = function(obj, iteratee, context) {\n    var result = -Infinity, lastComputed = -Infinity,\n        value, computed;\n    if (iteratee == null || (typeof iteratee == 'number' && typeof obj[0] != 'object') && obj != null) {\n      obj = isArrayLike(obj) ? obj : _.values(obj);\n      for (var i = 0, length = obj.length; i < length; i++) {\n        value = obj[i];\n        if (value != null && value > result) {\n          result = value;\n        }\n      }\n    } else {\n      iteratee = cb(iteratee, context);\n      _.each(obj, function(v, index, list) {\n        computed = iteratee(v, index, list);\n        if (computed > lastComputed || computed === -Infinity && result === -Infinity) {\n          result = v;\n          lastComputed = computed;\n        }\n      });\n    }\n    return result;\n  };\n\n  // Return the minimum element (or element-based computation).\n  _.min = function(obj, iteratee, context) {\n    var result = Infinity, lastComputed = Infinity,\n        value, computed;\n    if (iteratee == null || (typeof iteratee == 'number' && typeof obj[0] != 'object') && obj != null) {\n      obj = isArrayLike(obj) ? obj : _.values(obj);\n      for (var i = 0, length = obj.length; i < length; i++) {\n        value = obj[i];\n        if (value != null && value < result) {\n          result = value;\n        }\n      }\n    } else {\n      iteratee = cb(iteratee, context);\n      _.each(obj, function(v, index, list) {\n        computed = iteratee(v, index, list);\n        if (computed < lastComputed || computed === Infinity && result === Infinity) {\n          result = v;\n          lastComputed = computed;\n        }\n      });\n    }\n    return result;\n  };\n\n  // Shuffle a collection.\n  _.shuffle = function(obj) {\n    return _.sample(obj, Infinity);\n  };\n\n  // Sample **n** random values from a collection using the modern version of the\n  // [Fisher-Yates shuffle](http://en.wikipedia.org/wiki/FisherYates_shuffle).\n  // If **n** is not specified, returns a single random element.\n  // The internal `guard` argument allows it to work with `map`.\n  _.sample = function(obj, n, guard) {\n    if (n == null || guard) {\n      if (!isArrayLike(obj)) obj = _.values(obj);\n      return obj[_.random(obj.length - 1)];\n    }\n    var sample = isArrayLike(obj) ? _.clone(obj) : _.values(obj);\n    var length = getLength(sample);\n    n = Math.max(Math.min(n, length), 0);\n    var last = length - 1;\n    for (var index = 0; index < n; index++) {\n      var rand = _.random(index, last);\n      var temp = sample[index];\n      sample[index] = sample[rand];\n      sample[rand] = temp;\n    }\n    return sample.slice(0, n);\n  };\n\n  // Sort the object's values by a criterion produced by an iteratee.\n  _.sortBy = function(obj, iteratee, context) {\n    var index = 0;\n    iteratee = cb(iteratee, context);\n    return _.pluck(_.map(obj, function(value, key, list) {\n      return {\n        value: value,\n        index: index++,\n        criteria: iteratee(value, key, list)\n      };\n    }).sort(function(left, right) {\n      var a = left.criteria;\n      var b = right.criteria;\n      if (a !== b) {\n        if (a > b || a === void 0) return 1;\n        if (a < b || b === void 0) return -1;\n      }\n      return left.index - right.index;\n    }), 'value');\n  };\n\n  // An internal function used for aggregate \"group by\" operations.\n  var group = function(behavior, partition) {\n    return function(obj, iteratee, context) {\n      var result = partition ? [[], []] : {};\n      iteratee = cb(iteratee, context);\n      _.each(obj, function(value, index) {\n        var key = iteratee(value, index, obj);\n        behavior(result, value, key);\n      });\n      return result;\n    };\n  };\n\n  // Groups the object's values by a criterion. Pass either a string attribute\n  // to group by, or a function that returns the criterion.\n  _.groupBy = group(function(result, value, key) {\n    if (_.has(result, key)) result[key].push(value); else result[key] = [value];\n  });\n\n  // Indexes the object's values by a criterion, similar to `groupBy`, but for\n  // when you know that your index values will be unique.\n  _.indexBy = group(function(result, value, key) {\n    result[key] = value;\n  });\n\n  // Counts instances of an object that group by a certain criterion. Pass\n  // either a string attribute to count by, or a function that returns the\n  // criterion.\n  _.countBy = group(function(result, value, key) {\n    if (_.has(result, key)) result[key]++; else result[key] = 1;\n  });\n\n  var reStrSymbol = /[^\\ud800-\\udfff]|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff]/g;\n  // Safely create a real, live array from anything iterable.\n  _.toArray = function(obj) {\n    if (!obj) return [];\n    if (_.isArray(obj)) return slice.call(obj);\n    if (_.isString(obj)) {\n      // Keep surrogate pair characters together\n      return obj.match(reStrSymbol);\n    }\n    if (isArrayLike(obj)) return _.map(obj, _.identity);\n    return _.values(obj);\n  };\n\n  // Return the number of elements in an object.\n  _.size = function(obj) {\n    if (obj == null) return 0;\n    return isArrayLike(obj) ? obj.length : _.keys(obj).length;\n  };\n\n  // Split a collection into two arrays: one whose elements all satisfy the given\n  // predicate, and one whose elements all do not satisfy the predicate.\n  _.partition = group(function(result, value, pass) {\n    result[pass ? 0 : 1].push(value);\n  }, true);\n\n  // Array Functions\n  // ---------------\n\n  // Get the first element of an array. Passing **n** will return the first N\n  // values in the array. Aliased as `head` and `take`. The **guard** check\n  // allows it to work with `_.map`.\n  _.first = _.head = _.take = function(array, n, guard) {\n    if (array == null) return void 0;\n    if (n == null || guard) return array[0];\n    return _.initial(array, array.length - n);\n  };\n\n  // Returns everything but the last entry of the array. Especially useful on\n  // the arguments object. Passing **n** will return all the values in\n  // the array, excluding the last N.\n  _.initial = function(array, n, guard) {\n    return slice.call(array, 0, Math.max(0, array.length - (n == null || guard ? 1 : n)));\n  };\n\n  // Get the last element of an array. Passing **n** will return the last N\n  // values in the array.\n  _.last = function(array, n, guard) {\n    if (array == null) return void 0;\n    if (n == null || guard) return array[array.length - 1];\n    return _.rest(array, Math.max(0, array.length - n));\n  };\n\n  // Returns everything but the first entry of the array. Aliased as `tail` and `drop`.\n  // Especially useful on the arguments object. Passing an **n** will return\n  // the rest N values in the array.\n  _.rest = _.tail = _.drop = function(array, n, guard) {\n    return slice.call(array, n == null || guard ? 1 : n);\n  };\n\n  // Trim out all falsy values from an array.\n  _.compact = function(array) {\n    return _.filter(array, Boolean);\n  };\n\n  // Internal implementation of a recursive `flatten` function.\n  var flatten = function(input, shallow, strict, output) {\n    output = output || [];\n    var idx = output.length;\n    for (var i = 0, length = getLength(input); i < length; i++) {\n      var value = input[i];\n      if (isArrayLike(value) && (_.isArray(value) || _.isArguments(value))) {\n        // Flatten current level of array or arguments object.\n        if (shallow) {\n          var j = 0, len = value.length;\n          while (j < len) output[idx++] = value[j++];\n        } else {\n          flatten(value, shallow, strict, output);\n          idx = output.length;\n        }\n      } else if (!strict) {\n        output[idx++] = value;\n      }\n    }\n    return output;\n  };\n\n  // Flatten out an array, either recursively (by default), or just one level.\n  _.flatten = function(array, shallow) {\n    return flatten(array, shallow, false);\n  };\n\n  // Return a version of the array that does not contain the specified value(s).\n  _.without = restArgs(function(array, otherArrays) {\n    return _.difference(array, otherArrays);\n  });\n\n  // Produce a duplicate-free version of the array. If the array has already\n  // been sorted, you have the option of using a faster algorithm.\n  // Aliased as `unique`.\n  _.uniq = _.unique = function(array, isSorted, iteratee, context) {\n    if (!_.isBoolean(isSorted)) {\n      context = iteratee;\n      iteratee = isSorted;\n      isSorted = false;\n    }\n    if (iteratee != null) iteratee = cb(iteratee, context);\n    var result = [];\n    var seen = [];\n    for (var i = 0, length = getLength(array); i < length; i++) {\n      var value = array[i],\n          computed = iteratee ? iteratee(value, i, array) : value;\n      if (isSorted) {\n        if (!i || seen !== computed) result.push(value);\n        seen = computed;\n      } else if (iteratee) {\n        if (!_.contains(seen, computed)) {\n          seen.push(computed);\n          result.push(value);\n        }\n      } else if (!_.contains(result, value)) {\n        result.push(value);\n      }\n    }\n    return result;\n  };\n\n  // Produce an array that contains the union: each distinct element from all of\n  // the passed-in arrays.\n  _.union = restArgs(function(arrays) {\n    return _.uniq(flatten(arrays, true, true));\n  });\n\n  // Produce an array that contains every item shared between all the\n  // passed-in arrays.\n  _.intersection = function(array) {\n    var result = [];\n    var argsLength = arguments.length;\n    for (var i = 0, length = getLength(array); i < length; i++) {\n      var item = array[i];\n      if (_.contains(result, item)) continue;\n      var j;\n      for (j = 1; j < argsLength; j++) {\n        if (!_.contains(arguments[j], item)) break;\n      }\n      if (j === argsLength) result.push(item);\n    }\n    return result;\n  };\n\n  // Take the difference between one array and a number of other arrays.\n  // Only the elements present in just the first array will remain.\n  _.difference = restArgs(function(array, rest) {\n    rest = flatten(rest, true, true);\n    return _.filter(array, function(value){\n      return !_.contains(rest, value);\n    });\n  });\n\n  // Complement of _.zip. Unzip accepts an array of arrays and groups\n  // each array's elements on shared indices.\n  _.unzip = function(array) {\n    var length = array && _.max(array, getLength).length || 0;\n    var result = Array(length);\n\n    for (var index = 0; index < length; index++) {\n      result[index] = _.pluck(array, index);\n    }\n    return result;\n  };\n\n  // Zip together multiple lists into a single array -- elements that share\n  // an index go together.\n  _.zip = restArgs(_.unzip);\n\n  // Converts lists into objects. Pass either a single array of `[key, value]`\n  // pairs, or two parallel arrays of the same length -- one of keys, and one of\n  // the corresponding values.\n  _.object = function(list, values) {\n    var result = {};\n    for (var i = 0, length = getLength(list); i < length; i++) {\n      if (values) {\n        result[list[i]] = values[i];\n      } else {\n        result[list[i][0]] = list[i][1];\n      }\n    }\n    return result;\n  };\n\n  // Generator function to create the findIndex and findLastIndex functions.\n  var createPredicateIndexFinder = function(dir) {\n    return function(array, predicate, context) {\n      predicate = cb(predicate, context);\n      var length = getLength(array);\n      var index = dir > 0 ? 0 : length - 1;\n      for (; index >= 0 && index < length; index += dir) {\n        if (predicate(array[index], index, array)) return index;\n      }\n      return -1;\n    };\n  };\n\n  // Returns the first index on an array-like that passes a predicate test.\n  _.findIndex = createPredicateIndexFinder(1);\n  _.findLastIndex = createPredicateIndexFinder(-1);\n\n  // Use a comparator function to figure out the smallest index at which\n  // an object should be inserted so as to maintain order. Uses binary search.\n  _.sortedIndex = function(array, obj, iteratee, context) {\n    iteratee = cb(iteratee, context, 1);\n    var value = iteratee(obj);\n    var low = 0, high = getLength(array);\n    while (low < high) {\n      var mid = Math.floor((low + high) / 2);\n      if (iteratee(array[mid]) < value) low = mid + 1; else high = mid;\n    }\n    return low;\n  };\n\n  // Generator function to create the indexOf and lastIndexOf functions.\n  var createIndexFinder = function(dir, predicateFind, sortedIndex) {\n    return function(array, item, idx) {\n      var i = 0, length = getLength(array);\n      if (typeof idx == 'number') {\n        if (dir > 0) {\n          i = idx >= 0 ? idx : Math.max(idx + length, i);\n        } else {\n          length = idx >= 0 ? Math.min(idx + 1, length) : idx + length + 1;\n        }\n      } else if (sortedIndex && idx && length) {\n        idx = sortedIndex(array, item);\n        return array[idx] === item ? idx : -1;\n      }\n      if (item !== item) {\n        idx = predicateFind(slice.call(array, i, length), _.isNaN);\n        return idx >= 0 ? idx + i : -1;\n      }\n      for (idx = dir > 0 ? i : length - 1; idx >= 0 && idx < length; idx += dir) {\n        if (array[idx] === item) return idx;\n      }\n      return -1;\n    };\n  };\n\n  // Return the position of the first occurrence of an item in an array,\n  // or -1 if the item is not included in the array.\n  // If the array is large and already in sort order, pass `true`\n  // for **isSorted** to use binary search.\n  _.indexOf = createIndexFinder(1, _.findIndex, _.sortedIndex);\n  _.lastIndexOf = createIndexFinder(-1, _.findLastIndex);\n\n  // Generate an integer Array containing an arithmetic progression. A port of\n  // the native Python `range()` function. See\n  // [the Python documentation](http://docs.python.org/library/functions.html#range).\n  _.range = function(start, stop, step) {\n    if (stop == null) {\n      stop = start || 0;\n      start = 0;\n    }\n    if (!step) {\n      step = stop < start ? -1 : 1;\n    }\n\n    var length = Math.max(Math.ceil((stop - start) / step), 0);\n    var range = Array(length);\n\n    for (var idx = 0; idx < length; idx++, start += step) {\n      range[idx] = start;\n    }\n\n    return range;\n  };\n\n  // Split an **array** into several arrays containing **count** or less elements\n  // of initial array.\n  _.chunk = function(array, count) {\n    if (count == null || count < 1) return [];\n\n    var result = [];\n    var i = 0, length = array.length;\n    while (i < length) {\n      result.push(slice.call(array, i, i += count));\n    }\n    return result;\n  };\n\n  // Function (ahem) Functions\n  // ------------------\n\n  // Determines whether to execute a function as a constructor\n  // or a normal function with the provided arguments.\n  var executeBound = function(sourceFunc, boundFunc, context, callingContext, args) {\n    if (!(callingContext instanceof boundFunc)) return sourceFunc.apply(context, args);\n    var self = baseCreate(sourceFunc.prototype);\n    var result = sourceFunc.apply(self, args);\n    if (_.isObject(result)) return result;\n    return self;\n  };\n\n  // Create a function bound to a given object (assigning `this`, and arguments,\n  // optionally). Delegates to **ECMAScript 5**'s native `Function.bind` if\n  // available.\n  _.bind = restArgs(function(func, context, args) {\n    if (!_.isFunction(func)) throw new TypeError('Bind must be called on a function');\n    var bound = restArgs(function(callArgs) {\n      return executeBound(func, bound, context, this, args.concat(callArgs));\n    });\n    return bound;\n  });\n\n  // Partially apply a function by creating a version that has had some of its\n  // arguments pre-filled, without changing its dynamic `this` context. _ acts\n  // as a placeholder by default, allowing any combination of arguments to be\n  // pre-filled. Set `_.partial.placeholder` for a custom placeholder argument.\n  _.partial = restArgs(function(func, boundArgs) {\n    var placeholder = _.partial.placeholder;\n    var bound = function() {\n      var position = 0, length = boundArgs.length;\n      var args = Array(length);\n      for (var i = 0; i < length; i++) {\n        args[i] = boundArgs[i] === placeholder ? arguments[position++] : boundArgs[i];\n      }\n      while (position < arguments.length) args.push(arguments[position++]);\n      return executeBound(func, bound, this, this, args);\n    };\n    return bound;\n  });\n\n  _.partial.placeholder = _;\n\n  // Bind a number of an object's methods to that object. Remaining arguments\n  // are the method names to be bound. Useful for ensuring that all callbacks\n  // defined on an object belong to it.\n  _.bindAll = restArgs(function(obj, keys) {\n    keys = flatten(keys, false, false);\n    var index = keys.length;\n    if (index < 1) throw new Error('bindAll must be passed function names');\n    while (index--) {\n      var key = keys[index];\n      obj[key] = _.bind(obj[key], obj);\n    }\n  });\n\n  // Memoize an expensive function by storing its results.\n  _.memoize = function(func, hasher) {\n    var memoize = function(key) {\n      var cache = memoize.cache;\n      var address = '' + (hasher ? hasher.apply(this, arguments) : key);\n      if (!_.has(cache, address)) cache[address] = func.apply(this, arguments);\n      return cache[address];\n    };\n    memoize.cache = {};\n    return memoize;\n  };\n\n  // Delays a function for the given number of milliseconds, and then calls\n  // it with the arguments supplied.\n  _.delay = restArgs(function(func, wait, args) {\n    return setTimeout(function() {\n      return func.apply(null, args);\n    }, wait);\n  });\n\n  // Defers a function, scheduling it to run after the current call stack has\n  // cleared.\n  _.defer = _.partial(_.delay, _, 1);\n\n  // Returns a function, that, when invoked, will only be triggered at most once\n  // during a given window of time. Normally, the throttled function will run\n  // as much as it can, without ever going more than once per `wait` duration;\n  // but if you'd like to disable the execution on the leading edge, pass\n  // `{leading: false}`. To disable execution on the trailing edge, ditto.\n  _.throttle = function(func, wait, options) {\n    var timeout, context, args, result;\n    var previous = 0;\n    if (!options) options = {};\n\n    var later = function() {\n      previous = options.leading === false ? 0 : _.now();\n      timeout = null;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n    };\n\n    var throttled = function() {\n      var now = _.now();\n      if (!previous && options.leading === false) previous = now;\n      var remaining = wait - (now - previous);\n      context = this;\n      args = arguments;\n      if (remaining <= 0 || remaining > wait) {\n        if (timeout) {\n          clearTimeout(timeout);\n          timeout = null;\n        }\n        previous = now;\n        result = func.apply(context, args);\n        if (!timeout) context = args = null;\n      } else if (!timeout && options.trailing !== false) {\n        timeout = setTimeout(later, remaining);\n      }\n      return result;\n    };\n\n    throttled.cancel = function() {\n      clearTimeout(timeout);\n      previous = 0;\n      timeout = context = args = null;\n    };\n\n    return throttled;\n  };\n\n  // Returns a function, that, as long as it continues to be invoked, will not\n  // be triggered. The function will be called after it stops being called for\n  // N milliseconds. If `immediate` is passed, trigger the function on the\n  // leading edge, instead of the trailing.\n  _.debounce = function(func, wait, immediate) {\n    var timeout, result;\n\n    var later = function(context, args) {\n      timeout = null;\n      if (args) result = func.apply(context, args);\n    };\n\n    var debounced = restArgs(function(args) {\n      if (timeout) clearTimeout(timeout);\n      if (immediate) {\n        var callNow = !timeout;\n        timeout = setTimeout(later, wait);\n        if (callNow) result = func.apply(this, args);\n      } else {\n        timeout = _.delay(later, wait, this, args);\n      }\n\n      return result;\n    });\n\n    debounced.cancel = function() {\n      clearTimeout(timeout);\n      timeout = null;\n    };\n\n    return debounced;\n  };\n\n  // Returns the first function passed as an argument to the second,\n  // allowing you to adjust arguments, run code before and after, and\n  // conditionally execute the original function.\n  _.wrap = function(func, wrapper) {\n    return _.partial(wrapper, func);\n  };\n\n  // Returns a negated version of the passed-in predicate.\n  _.negate = function(predicate) {\n    return function() {\n      return !predicate.apply(this, arguments);\n    };\n  };\n\n  // Returns a function that is the composition of a list of functions, each\n  // consuming the return value of the function that follows.\n  _.compose = function() {\n    var args = arguments;\n    var start = args.length - 1;\n    return function() {\n      var i = start;\n      var result = args[start].apply(this, arguments);\n      while (i--) result = args[i].call(this, result);\n      return result;\n    };\n  };\n\n  // Returns a function that will only be executed on and after the Nth call.\n  _.after = function(times, func) {\n    return function() {\n      if (--times < 1) {\n        return func.apply(this, arguments);\n      }\n    };\n  };\n\n  // Returns a function that will only be executed up to (but not including) the Nth call.\n  _.before = function(times, func) {\n    var memo;\n    return function() {\n      if (--times > 0) {\n        memo = func.apply(this, arguments);\n      }\n      if (times <= 1) func = null;\n      return memo;\n    };\n  };\n\n  // Returns a function that will be executed at most one time, no matter how\n  // often you call it. Useful for lazy initialization.\n  _.once = _.partial(_.before, 2);\n\n  _.restArgs = restArgs;\n\n  // Object Functions\n  // ----------------\n\n  // Keys in IE < 9 that won't be iterated by `for key in ...` and thus missed.\n  var hasEnumBug = !{toString: null}.propertyIsEnumerable('toString');\n  var nonEnumerableProps = ['valueOf', 'isPrototypeOf', 'toString',\n                      'propertyIsEnumerable', 'hasOwnProperty', 'toLocaleString'];\n\n  var collectNonEnumProps = function(obj, keys) {\n    var nonEnumIdx = nonEnumerableProps.length;\n    var constructor = obj.constructor;\n    var proto = _.isFunction(constructor) && constructor.prototype || ObjProto;\n\n    // Constructor is a special case.\n    var prop = 'constructor';\n    if (_.has(obj, prop) && !_.contains(keys, prop)) keys.push(prop);\n\n    while (nonEnumIdx--) {\n      prop = nonEnumerableProps[nonEnumIdx];\n      if (prop in obj && obj[prop] !== proto[prop] && !_.contains(keys, prop)) {\n        keys.push(prop);\n      }\n    }\n  };\n\n  // Retrieve the names of an object's own properties.\n  // Delegates to **ECMAScript 5**'s native `Object.keys`.\n  _.keys = function(obj) {\n    if (!_.isObject(obj)) return [];\n    if (nativeKeys) return nativeKeys(obj);\n    var keys = [];\n    for (var key in obj) if (_.has(obj, key)) keys.push(key);\n    // Ahem, IE < 9.\n    if (hasEnumBug) collectNonEnumProps(obj, keys);\n    return keys;\n  };\n\n  // Retrieve all the property names of an object.\n  _.allKeys = function(obj) {\n    if (!_.isObject(obj)) return [];\n    var keys = [];\n    for (var key in obj) keys.push(key);\n    // Ahem, IE < 9.\n    if (hasEnumBug) collectNonEnumProps(obj, keys);\n    return keys;\n  };\n\n  // Retrieve the values of an object's properties.\n  _.values = function(obj) {\n    var keys = _.keys(obj);\n    var length = keys.length;\n    var values = Array(length);\n    for (var i = 0; i < length; i++) {\n      values[i] = obj[keys[i]];\n    }\n    return values;\n  };\n\n  // Returns the results of applying the iteratee to each element of the object.\n  // In contrast to _.map it returns an object.\n  _.mapObject = function(obj, iteratee, context) {\n    iteratee = cb(iteratee, context);\n    var keys = _.keys(obj),\n        length = keys.length,\n        results = {};\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys[index];\n      results[currentKey] = iteratee(obj[currentKey], currentKey, obj);\n    }\n    return results;\n  };\n\n  // Convert an object into a list of `[key, value]` pairs.\n  _.pairs = function(obj) {\n    var keys = _.keys(obj);\n    var length = keys.length;\n    var pairs = Array(length);\n    for (var i = 0; i < length; i++) {\n      pairs[i] = [keys[i], obj[keys[i]]];\n    }\n    return pairs;\n  };\n\n  // Invert the keys and values of an object. The values must be serializable.\n  _.invert = function(obj) {\n    var result = {};\n    var keys = _.keys(obj);\n    for (var i = 0, length = keys.length; i < length; i++) {\n      result[obj[keys[i]]] = keys[i];\n    }\n    return result;\n  };\n\n  // Return a sorted list of the function names available on the object.\n  // Aliased as `methods`.\n  _.functions = _.methods = function(obj) {\n    var names = [];\n    for (var key in obj) {\n      if (_.isFunction(obj[key])) names.push(key);\n    }\n    return names.sort();\n  };\n\n  // An internal function for creating assigner functions.\n  var createAssigner = function(keysFunc, defaults) {\n    return function(obj) {\n      var length = arguments.length;\n      if (defaults) obj = Object(obj);\n      if (length < 2 || obj == null) return obj;\n      for (var index = 1; index < length; index++) {\n        var source = arguments[index],\n            keys = keysFunc(source),\n            l = keys.length;\n        for (var i = 0; i < l; i++) {\n          var key = keys[i];\n          if (!defaults || obj[key] === void 0) obj[key] = source[key];\n        }\n      }\n      return obj;\n    };\n  };\n\n  // Extend a given object with all the properties in passed-in object(s).\n  _.extend = createAssigner(_.allKeys);\n\n  // Assigns a given object with all the own properties in the passed-in object(s).\n  // (https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)\n  _.extendOwn = _.assign = createAssigner(_.keys);\n\n  // Returns the first key on an object that passes a predicate test.\n  _.findKey = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var keys = _.keys(obj), key;\n    for (var i = 0, length = keys.length; i < length; i++) {\n      key = keys[i];\n      if (predicate(obj[key], key, obj)) return key;\n    }\n  };\n\n  // Internal pick helper function to determine if `obj` has key `key`.\n  var keyInObj = function(value, key, obj) {\n    return key in obj;\n  };\n\n  // Return a copy of the object only containing the whitelisted properties.\n  _.pick = restArgs(function(obj, keys) {\n    var result = {}, iteratee = keys[0];\n    if (obj == null) return result;\n    if (_.isFunction(iteratee)) {\n      if (keys.length > 1) iteratee = optimizeCb(iteratee, keys[1]);\n      keys = _.allKeys(obj);\n    } else {\n      iteratee = keyInObj;\n      keys = flatten(keys, false, false);\n      obj = Object(obj);\n    }\n    for (var i = 0, length = keys.length; i < length; i++) {\n      var key = keys[i];\n      var value = obj[key];\n      if (iteratee(value, key, obj)) result[key] = value;\n    }\n    return result;\n  });\n\n  // Return a copy of the object without the blacklisted properties.\n  _.omit = restArgs(function(obj, keys) {\n    var iteratee = keys[0], context;\n    if (_.isFunction(iteratee)) {\n      iteratee = _.negate(iteratee);\n      if (keys.length > 1) context = keys[1];\n    } else {\n      keys = _.map(flatten(keys, false, false), String);\n      iteratee = function(value, key) {\n        return !_.contains(keys, key);\n      };\n    }\n    return _.pick(obj, iteratee, context);\n  });\n\n  // Fill in a given object with default properties.\n  _.defaults = createAssigner(_.allKeys, true);\n\n  // Creates an object that inherits from the given prototype object.\n  // If additional properties are provided then they will be added to the\n  // created object.\n  _.create = function(prototype, props) {\n    var result = baseCreate(prototype);\n    if (props) _.extendOwn(result, props);\n    return result;\n  };\n\n  // Create a (shallow-cloned) duplicate of an object.\n  _.clone = function(obj) {\n    if (!_.isObject(obj)) return obj;\n    return _.isArray(obj) ? obj.slice() : _.extend({}, obj);\n  };\n\n  // Invokes interceptor with the obj, and then returns obj.\n  // The primary purpose of this method is to \"tap into\" a method chain, in\n  // order to perform operations on intermediate results within the chain.\n  _.tap = function(obj, interceptor) {\n    interceptor(obj);\n    return obj;\n  };\n\n  // Returns whether an object has a given set of `key:value` pairs.\n  _.isMatch = function(object, attrs) {\n    var keys = _.keys(attrs), length = keys.length;\n    if (object == null) return !length;\n    var obj = Object(object);\n    for (var i = 0; i < length; i++) {\n      var key = keys[i];\n      if (attrs[key] !== obj[key] || !(key in obj)) return false;\n    }\n    return true;\n  };\n\n\n  // Internal recursive comparison function for `isEqual`.\n  var eq, deepEq;\n  eq = function(a, b, aStack, bStack) {\n    // Identical objects are equal. `0 === -0`, but they aren't identical.\n    // See the [Harmony `egal` proposal](http://wiki.ecmascript.org/doku.php?id=harmony:egal).\n    if (a === b) return a !== 0 || 1 / a === 1 / b;\n    // A strict comparison is necessary because `null == undefined`.\n    if (a == null || b == null) return a === b;\n    // `NaN`s are equivalent, but non-reflexive.\n    if (a !== a) return b !== b;\n    // Exhaust primitive checks\n    var type = typeof a;\n    if (type !== 'function' && type !== 'object' && typeof b != 'object') return false;\n    return deepEq(a, b, aStack, bStack);\n  };\n\n  // Internal recursive comparison function for `isEqual`.\n  deepEq = function(a, b, aStack, bStack) {\n    // Unwrap any wrapped objects.\n    if (a instanceof _) a = a._wrapped;\n    if (b instanceof _) b = b._wrapped;\n    // Compare `[[Class]]` names.\n    var className = toString.call(a);\n    if (className !== toString.call(b)) return false;\n    switch (className) {\n      // Strings, numbers, regular expressions, dates, and booleans are compared by value.\n      case '[object RegExp]':\n      // RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')\n      case '[object String]':\n        // Primitives and their corresponding object wrappers are equivalent; thus, `\"5\"` is\n        // equivalent to `new String(\"5\")`.\n        return '' + a === '' + b;\n      case '[object Number]':\n        // `NaN`s are equivalent, but non-reflexive.\n        // Object(NaN) is equivalent to NaN.\n        if (+a !== +a) return +b !== +b;\n        // An `egal` comparison is performed for other numeric values.\n        return +a === 0 ? 1 / +a === 1 / b : +a === +b;\n      case '[object Date]':\n      case '[object Boolean]':\n        // Coerce dates and booleans to numeric primitive values. Dates are compared by their\n        // millisecond representations. Note that invalid dates with millisecond representations\n        // of `NaN` are not equivalent.\n        return +a === +b;\n      case '[object Symbol]':\n        return SymbolProto.valueOf.call(a) === SymbolProto.valueOf.call(b);\n    }\n\n    var areArrays = className === '[object Array]';\n    if (!areArrays) {\n      if (typeof a != 'object' || typeof b != 'object') return false;\n\n      // Objects with different constructors are not equivalent, but `Object`s or `Array`s\n      // from different frames are.\n      var aCtor = a.constructor, bCtor = b.constructor;\n      if (aCtor !== bCtor && !(_.isFunction(aCtor) && aCtor instanceof aCtor &&\n                               _.isFunction(bCtor) && bCtor instanceof bCtor)\n                          && ('constructor' in a && 'constructor' in b)) {\n        return false;\n      }\n    }\n    // Assume equality for cyclic structures. The algorithm for detecting cyclic\n    // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.\n\n    // Initializing stack of traversed objects.\n    // It's done here since we only need them for objects and arrays comparison.\n    aStack = aStack || [];\n    bStack = bStack || [];\n    var length = aStack.length;\n    while (length--) {\n      // Linear search. Performance is inversely proportional to the number of\n      // unique nested structures.\n      if (aStack[length] === a) return bStack[length] === b;\n    }\n\n    // Add the first object to the stack of traversed objects.\n    aStack.push(a);\n    bStack.push(b);\n\n    // Recursively compare objects and arrays.\n    if (areArrays) {\n      // Compare array lengths to determine if a deep comparison is necessary.\n      length = a.length;\n      if (length !== b.length) return false;\n      // Deep compare the contents, ignoring non-numeric properties.\n      while (length--) {\n        if (!eq(a[length], b[length], aStack, bStack)) return false;\n      }\n    } else {\n      // Deep compare objects.\n      var keys = _.keys(a), key;\n      length = keys.length;\n      // Ensure that both objects contain the same number of properties before comparing deep equality.\n      if (_.keys(b).length !== length) return false;\n      while (length--) {\n        // Deep compare each member\n        key = keys[length];\n        if (!(_.has(b, key) && eq(a[key], b[key], aStack, bStack))) return false;\n      }\n    }\n    // Remove the first object from the stack of traversed objects.\n    aStack.pop();\n    bStack.pop();\n    return true;\n  };\n\n  // Perform a deep comparison to check if two objects are equal.\n  _.isEqual = function(a, b) {\n    return eq(a, b);\n  };\n\n  // Is a given array, string, or object empty?\n  // An \"empty\" object has no enumerable own-properties.\n  _.isEmpty = function(obj) {\n    if (obj == null) return true;\n    if (isArrayLike(obj) && (_.isArray(obj) || _.isString(obj) || _.isArguments(obj))) return obj.length === 0;\n    return _.keys(obj).length === 0;\n  };\n\n  // Is a given value a DOM element?\n  _.isElement = function(obj) {\n    return !!(obj && obj.nodeType === 1);\n  };\n\n  // Is a given value an array?\n  // Delegates to ECMA5's native Array.isArray\n  _.isArray = nativeIsArray || function(obj) {\n    return toString.call(obj) === '[object Array]';\n  };\n\n  // Is a given variable an object?\n  _.isObject = function(obj) {\n    var type = typeof obj;\n    return type === 'function' || type === 'object' && !!obj;\n  };\n\n  // Add some isType methods: isArguments, isFunction, isString, isNumber, isDate, isRegExp, isError, isMap, isWeakMap, isSet, isWeakSet.\n  _.each(['Arguments', 'Function', 'String', 'Number', 'Date', 'RegExp', 'Error', 'Symbol', 'Map', 'WeakMap', 'Set', 'WeakSet'], function(name) {\n    _['is' + name] = function(obj) {\n      return toString.call(obj) === '[object ' + name + ']';\n    };\n  });\n\n  // Define a fallback version of the method in browsers (ahem, IE < 9), where\n  // there isn't any inspectable \"Arguments\" type.\n  if (!_.isArguments(arguments)) {\n    _.isArguments = function(obj) {\n      return _.has(obj, 'callee');\n    };\n  }\n\n  // Optimize `isFunction` if appropriate. Work around some typeof bugs in old v8,\n  // IE 11 (#1621), Safari 8 (#1929), and PhantomJS (#2236).\n  var nodelist = root.document && root.document.childNodes;\n  if (typeof /./ != 'function' && typeof Int8Array != 'object' && typeof nodelist != 'function') {\n    _.isFunction = function(obj) {\n      return typeof obj == 'function' || false;\n    };\n  }\n\n  // Is a given object a finite number?\n  _.isFinite = function(obj) {\n    return !_.isSymbol(obj) && isFinite(obj) && !isNaN(parseFloat(obj));\n  };\n\n  // Is the given value `NaN`?\n  _.isNaN = function(obj) {\n    return isNaN(obj) && _.isNumber(obj);\n  };\n\n  // Is a given value a boolean?\n  _.isBoolean = function(obj) {\n    return obj === true || obj === false || toString.call(obj) === '[object Boolean]';\n  };\n\n  // Is a given value equal to null?\n  _.isNull = function(obj) {\n    return obj === null;\n  };\n\n  // Is a given variable undefined?\n  _.isUndefined = function(obj) {\n    return obj === void 0;\n  };\n\n  // Shortcut function for checking if an object has a given property directly\n  // on itself (in other words, not on a prototype).\n  _.has = function(obj, key) {\n    return obj != null && hasOwnProperty.call(obj, key);\n  };\n\n  // Utility Functions\n  // -----------------\n\n  // Run Underscore.js in *noConflict* mode, returning the `_` variable to its\n  // previous owner. Returns a reference to the Underscore object.\n  _.noConflict = function() {\n    root._ = previousUnderscore;\n    return this;\n  };\n\n  // Keep the identity function around for default iteratees.\n  _.identity = function(value) {\n    return value;\n  };\n\n  // Predicate-generating functions. Often useful outside of Underscore.\n  _.constant = function(value) {\n    return function() {\n      return value;\n    };\n  };\n\n  _.noop = function(){};\n\n  _.property = property;\n\n  // Generates a function for a given object that returns a given property.\n  _.propertyOf = function(obj) {\n    return obj == null ? function(){} : function(key) {\n      return obj[key];\n    };\n  };\n\n  // Returns a predicate for checking whether an object has a given set of\n  // `key:value` pairs.\n  _.matcher = _.matches = function(attrs) {\n    attrs = _.extendOwn({}, attrs);\n    return function(obj) {\n      return _.isMatch(obj, attrs);\n    };\n  };\n\n  // Run a function **n** times.\n  _.times = function(n, iteratee, context) {\n    var accum = Array(Math.max(0, n));\n    iteratee = optimizeCb(iteratee, context, 1);\n    for (var i = 0; i < n; i++) accum[i] = iteratee(i);\n    return accum;\n  };\n\n  // Return a random integer between min and max (inclusive).\n  _.random = function(min, max) {\n    if (max == null) {\n      max = min;\n      min = 0;\n    }\n    return min + Math.floor(Math.random() * (max - min + 1));\n  };\n\n  // A (possibly faster) way to get the current timestamp as an integer.\n  _.now = Date.now || function() {\n    return new Date().getTime();\n  };\n\n  // List of HTML entities for escaping.\n  var escapeMap = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#x27;',\n    '`': '&#x60;'\n  };\n  var unescapeMap = _.invert(escapeMap);\n\n  // Functions for escaping and unescaping strings to/from HTML interpolation.\n  var createEscaper = function(map) {\n    var escaper = function(match) {\n      return map[match];\n    };\n    // Regexes for identifying a key that needs to be escaped.\n    var source = '(?:' + _.keys(map).join('|') + ')';\n    var testRegexp = RegExp(source);\n    var replaceRegexp = RegExp(source, 'g');\n    return function(string) {\n      string = string == null ? '' : '' + string;\n      return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;\n    };\n  };\n  _.escape = createEscaper(escapeMap);\n  _.unescape = createEscaper(unescapeMap);\n\n  // If the value of the named `property` is a function then invoke it with the\n  // `object` as context; otherwise, return it.\n  _.result = function(object, prop, fallback) {\n    var value = object == null ? void 0 : object[prop];\n    if (value === void 0) {\n      value = fallback;\n    }\n    return _.isFunction(value) ? value.call(object) : value;\n  };\n\n  // Generate a unique integer id (unique within the entire client session).\n  // Useful for temporary DOM ids.\n  var idCounter = 0;\n  _.uniqueId = function(prefix) {\n    var id = ++idCounter + '';\n    return prefix ? prefix + id : id;\n  };\n\n  // By default, Underscore uses ERB-style template delimiters, change the\n  // following template settings to use alternative delimiters.\n  _.templateSettings = {\n    evaluate: /<%([\\s\\S]+?)%>/g,\n    interpolate: /<%=([\\s\\S]+?)%>/g,\n    escape: /<%-([\\s\\S]+?)%>/g\n  };\n\n  // When customizing `templateSettings`, if you don't want to define an\n  // interpolation, evaluation or escaping regex, we need one that is\n  // guaranteed not to match.\n  var noMatch = /(.)^/;\n\n  // Certain characters need to be escaped so that they can be put into a\n  // string literal.\n  var escapes = {\n    \"'\": \"'\",\n    '\\\\': '\\\\',\n    '\\r': 'r',\n    '\\n': 'n',\n    '\\u2028': 'u2028',\n    '\\u2029': 'u2029'\n  };\n\n  var escapeRegExp = /\\\\|'|\\r|\\n|\\u2028|\\u2029/g;\n\n  var escapeChar = function(match) {\n    return '\\\\' + escapes[match];\n  };\n\n  // JavaScript micro-templating, similar to John Resig's implementation.\n  // Underscore templating handles arbitrary delimiters, preserves whitespace,\n  // and correctly escapes quotes within interpolated code.\n  // NB: `oldSettings` only exists for backwards compatibility.\n  _.template = function(text, settings, oldSettings) {\n    if (!settings && oldSettings) settings = oldSettings;\n    settings = _.defaults({}, settings, _.templateSettings);\n\n    // Combine delimiters into one regular expression via alternation.\n    var matcher = RegExp([\n      (settings.escape || noMatch).source,\n      (settings.interpolate || noMatch).source,\n      (settings.evaluate || noMatch).source\n    ].join('|') + '|$', 'g');\n\n    // Compile the template source, escaping string literals appropriately.\n    var index = 0;\n    var source = \"__p+='\";\n    text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {\n      source += text.slice(index, offset).replace(escapeRegExp, escapeChar);\n      index = offset + match.length;\n\n      if (escape) {\n        source += \"'+\\n((__t=(\" + escape + \"))==null?'':_.escape(__t))+\\n'\";\n      } else if (interpolate) {\n        source += \"'+\\n((__t=(\" + interpolate + \"))==null?'':__t)+\\n'\";\n      } else if (evaluate) {\n        source += \"';\\n\" + evaluate + \"\\n__p+='\";\n      }\n\n      // Adobe VMs need the match returned to produce the correct offset.\n      return match;\n    });\n    source += \"';\\n\";\n\n    // If a variable is not specified, place data values in local scope.\n    if (!settings.variable) source = 'with(obj||{}){\\n' + source + '}\\n';\n\n    source = \"var __t,__p='',__j=Array.prototype.join,\" +\n      \"print=function(){__p+=__j.call(arguments,'');};\\n\" +\n      source + 'return __p;\\n';\n\n    var render;\n    try {\n      render = new Function(settings.variable || 'obj', '_', source);\n    } catch (e) {\n      e.source = source;\n      throw e;\n    }\n\n    var template = function(data) {\n      return render.call(this, data, _);\n    };\n\n    // Provide the compiled source as a convenience for precompilation.\n    var argument = settings.variable || 'obj';\n    template.source = 'function(' + argument + '){\\n' + source + '}';\n\n    return template;\n  };\n\n  // Add a \"chain\" function. Start chaining a wrapped Underscore object.\n  _.chain = function(obj) {\n    var instance = _(obj);\n    instance._chain = true;\n    return instance;\n  };\n\n  // OOP\n  // ---------------\n  // If Underscore is called as a function, it returns a wrapped object that\n  // can be used OO-style. This wrapper holds altered versions of all the\n  // underscore functions. Wrapped objects may be chained.\n\n  // Helper function to continue chaining intermediate results.\n  var chainResult = function(instance, obj) {\n    return instance._chain ? _(obj).chain() : obj;\n  };\n\n  // Add your own custom functions to the Underscore object.\n  _.mixin = function(obj) {\n    _.each(_.functions(obj), function(name) {\n      var func = _[name] = obj[name];\n      _.prototype[name] = function() {\n        var args = [this._wrapped];\n        push.apply(args, arguments);\n        return chainResult(this, func.apply(_, args));\n      };\n    });\n    return _;\n  };\n\n  // Add all of the Underscore functions to the wrapper object.\n  _.mixin(_);\n\n  // Add all mutator Array functions to the wrapper.\n  _.each(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {\n    var method = ArrayProto[name];\n    _.prototype[name] = function() {\n      var obj = this._wrapped;\n      method.apply(obj, arguments);\n      if ((name === 'shift' || name === 'splice') && obj.length === 0) delete obj[0];\n      return chainResult(this, obj);\n    };\n  });\n\n  // Add all accessor Array functions to the wrapper.\n  _.each(['concat', 'join', 'slice'], function(name) {\n    var method = ArrayProto[name];\n    _.prototype[name] = function() {\n      return chainResult(this, method.apply(this._wrapped, arguments));\n    };\n  });\n\n  // Extracts the result from a wrapped and chained object.\n  _.prototype.value = function() {\n    return this._wrapped;\n  };\n\n  // Provide unwrapping proxy for some methods used in engine operations\n  // such as arithmetic and JSON stringification.\n  _.prototype.valueOf = _.prototype.toJSON = _.prototype.value;\n\n  _.prototype.toString = function() {\n    return '' + this._wrapped;\n  };\n\n  // AMD registration happens at the end for compatibility with AMD loaders\n  // that may not enforce next-turn semantics on modules. Even though general\n  // practice for AMD registration is to be anonymous, underscore registers\n  // as a named module because, like jQuery, it is a base library that is\n  // popular enough to be bundled in a third party lib, but not be part of\n  // an AMD load request. Those cases could generate an error when an\n  // anonymous define() is called outside of a loader request.\n  if (typeof define == 'function' && define.amd) {\n    define('underscore', [], function() {\n      return _;\n    });\n  }\n}());\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n\ttypeof define === 'function' && define.amd ? define(['exports'], factory) :\n\t(factory((global.THREE = {})));\n}(this, (function (exports) { 'use strict';\n\n// Polyfills\n\nif ( Number.EPSILON === undefined ) {\n\n\tNumber.EPSILON = Math.pow( 2, - 52 );\n\n}\n\nif ( Number.isInteger === undefined ) {\n\n\t// Missing in IE\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isInteger\n\n\tNumber.isInteger = function ( value ) {\n\n\t\treturn typeof value === 'number' && isFinite( value ) && Math.floor( value ) === value;\n\n\t};\n\n}\n\n//\n\nif ( Math.sign === undefined ) {\n\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sign\n\n\tMath.sign = function ( x ) {\n\n\t\treturn ( x < 0 ) ? - 1 : ( x > 0 ) ? 1 : + x;\n\n\t};\n\n}\n\nif ( 'name' in Function.prototype === false ) {\n\n\t// Missing in IE\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/name\n\n\tObject.defineProperty( Function.prototype, 'name', {\n\n\t\tget: function () {\n\n\t\t\treturn this.toString().match( /^\\s*function\\s*([^\\(\\s]*)/ )[ 1 ];\n\n\t\t}\n\n\t} );\n\n}\n\nif ( Object.assign === undefined ) {\n\n\t// Missing in IE\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n\n\t( function () {\n\n\t\tObject.assign = function ( target ) {\n\n\t\t\tif ( target === undefined || target === null ) {\n\n\t\t\t\tthrow new TypeError( 'Cannot convert undefined or null to object' );\n\n\t\t\t}\n\n\t\t\tvar output = Object( target );\n\n\t\t\tfor ( var index = 1; index < arguments.length; index ++ ) {\n\n\t\t\t\tvar source = arguments[ index ];\n\n\t\t\t\tif ( source !== undefined && source !== null ) {\n\n\t\t\t\t\tfor ( var nextKey in source ) {\n\n\t\t\t\t\t\tif ( Object.prototype.hasOwnProperty.call( source, nextKey ) ) {\n\n\t\t\t\t\t\t\toutput[ nextKey ] = source[ nextKey ];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn output;\n\n\t\t};\n\n\t} )();\n\n}\n\n/**\n * https://github.com/mrdoob/eventdispatcher.js/\n */\n\nfunction EventDispatcher() {}\n\nObject.assign( EventDispatcher.prototype, {\n\n\taddEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) this._listeners = {};\n\n\t\tvar listeners = this._listeners;\n\n\t\tif ( listeners[ type ] === undefined ) {\n\n\t\t\tlisteners[ type ] = [];\n\n\t\t}\n\n\t\tif ( listeners[ type ].indexOf( listener ) === - 1 ) {\n\n\t\t\tlisteners[ type ].push( listener );\n\n\t\t}\n\n\t},\n\n\thasEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return false;\n\n\t\tvar listeners = this._listeners;\n\n\t\treturn listeners[ type ] !== undefined && listeners[ type ].indexOf( listener ) !== - 1;\n\n\t},\n\n\tremoveEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tvar listeners = this._listeners;\n\t\tvar listenerArray = listeners[ type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tvar index = listenerArray.indexOf( listener );\n\n\t\t\tif ( index !== - 1 ) {\n\n\t\t\t\tlistenerArray.splice( index, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tdispatchEvent: function ( event ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tvar listeners = this._listeners;\n\t\tvar listenerArray = listeners[ event.type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tevent.target = this;\n\n\t\t\tvar array = listenerArray.slice( 0 );\n\n\t\t\tfor ( var i = 0, l = array.length; i < l; i ++ ) {\n\n\t\t\t\tarray[ i ].call( this, event );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n} );\n\nvar REVISION = '89';\n\nvar CullFaceNone = 0;\nvar CullFaceBack = 1;\nvar CullFaceFront = 2;\n\nvar FrontFaceDirectionCW = 0;\n\n\nvar PCFShadowMap = 1;\nvar PCFSoftShadowMap = 2;\nvar FrontSide = 0;\nvar BackSide = 1;\nvar DoubleSide = 2;\nvar FlatShading = 1;\n\nvar NoColors = 0;\n\n\nvar NoBlending = 0;\nvar NormalBlending = 1;\nvar AdditiveBlending = 2;\nvar SubtractiveBlending = 3;\nvar MultiplyBlending = 4;\nvar CustomBlending = 5;\nvar AddEquation = 100;\nvar SubtractEquation = 101;\nvar ReverseSubtractEquation = 102;\nvar MinEquation = 103;\nvar MaxEquation = 104;\nvar ZeroFactor = 200;\nvar OneFactor = 201;\nvar SrcColorFactor = 202;\nvar OneMinusSrcColorFactor = 203;\nvar SrcAlphaFactor = 204;\nvar OneMinusSrcAlphaFactor = 205;\nvar DstAlphaFactor = 206;\nvar OneMinusDstAlphaFactor = 207;\nvar DstColorFactor = 208;\nvar OneMinusDstColorFactor = 209;\nvar SrcAlphaSaturateFactor = 210;\nvar NeverDepth = 0;\nvar AlwaysDepth = 1;\nvar LessDepth = 2;\nvar LessEqualDepth = 3;\nvar EqualDepth = 4;\nvar GreaterEqualDepth = 5;\nvar GreaterDepth = 6;\nvar NotEqualDepth = 7;\nvar MultiplyOperation = 0;\nvar MixOperation = 1;\nvar AddOperation = 2;\nvar NoToneMapping = 0;\nvar LinearToneMapping = 1;\nvar ReinhardToneMapping = 2;\nvar Uncharted2ToneMapping = 3;\nvar CineonToneMapping = 4;\nvar UVMapping = 300;\nvar CubeReflectionMapping = 301;\nvar CubeRefractionMapping = 302;\nvar EquirectangularReflectionMapping = 303;\nvar EquirectangularRefractionMapping = 304;\nvar SphericalReflectionMapping = 305;\nvar CubeUVReflectionMapping = 306;\nvar CubeUVRefractionMapping = 307;\nvar RepeatWrapping = 1000;\nvar ClampToEdgeWrapping = 1001;\nvar MirroredRepeatWrapping = 1002;\nvar NearestFilter = 1003;\nvar NearestMipMapNearestFilter = 1004;\nvar NearestMipMapLinearFilter = 1005;\nvar LinearFilter = 1006;\nvar LinearMipMapNearestFilter = 1007;\nvar LinearMipMapLinearFilter = 1008;\nvar UnsignedByteType = 1009;\nvar ByteType = 1010;\nvar ShortType = 1011;\nvar UnsignedShortType = 1012;\nvar IntType = 1013;\nvar UnsignedIntType = 1014;\nvar FloatType = 1015;\nvar HalfFloatType = 1016;\nvar UnsignedShort4444Type = 1017;\nvar UnsignedShort5551Type = 1018;\nvar UnsignedShort565Type = 1019;\nvar UnsignedInt248Type = 1020;\nvar AlphaFormat = 1021;\nvar RGBFormat = 1022;\nvar RGBAFormat = 1023;\nvar LuminanceFormat = 1024;\nvar LuminanceAlphaFormat = 1025;\n\nvar DepthFormat = 1026;\nvar DepthStencilFormat = 1027;\nvar RGB_S3TC_DXT1_Format = 2001;\nvar RGBA_S3TC_DXT1_Format = 2002;\nvar RGBA_S3TC_DXT3_Format = 2003;\nvar RGBA_S3TC_DXT5_Format = 2004;\nvar RGB_PVRTC_4BPPV1_Format = 2100;\nvar RGB_PVRTC_2BPPV1_Format = 2101;\nvar RGBA_PVRTC_4BPPV1_Format = 2102;\nvar RGBA_PVRTC_2BPPV1_Format = 2103;\nvar RGB_ETC1_Format = 2151;\n\n\n\n\n\n\n\n\n\nvar TrianglesDrawMode = 0;\nvar TriangleStripDrawMode = 1;\nvar TriangleFanDrawMode = 2;\nvar LinearEncoding = 3000;\nvar sRGBEncoding = 3001;\nvar GammaEncoding = 3007;\nvar RGBEEncoding = 3002;\n\nvar RGBM7Encoding = 3004;\nvar RGBM16Encoding = 3005;\nvar RGBDEncoding = 3006;\nvar BasicDepthPacking = 3200;\nvar RGBADepthPacking = 3201;\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar _Math = {\n\n\tDEG2RAD: Math.PI / 180,\n\tRAD2DEG: 180 / Math.PI,\n\n\tgenerateUUID: ( function () {\n\n\t\t// http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136\n\n\t\tvar lut = [];\n\n\t\tfor ( var i = 0; i < 256; i ++ ) {\n\n\t\t\tlut[ i ] = ( i < 16 ? '0' : '' ) + ( i ).toString( 16 ).toUpperCase();\n\n\t\t}\n\n\t\treturn function () {\n\n\t\t\tvar d0 = Math.random() * 0xffffffff | 0;\n\t\t\tvar d1 = Math.random() * 0xffffffff | 0;\n\t\t\tvar d2 = Math.random() * 0xffffffff | 0;\n\t\t\tvar d3 = Math.random() * 0xffffffff | 0;\n\t\t\treturn lut[ d0 & 0xff ] + lut[ d0 >> 8 & 0xff ] + lut[ d0 >> 16 & 0xff ] + lut[ d0 >> 24 & 0xff ] + '-' +\n\t\t\t\tlut[ d1 & 0xff ] + lut[ d1 >> 8 & 0xff ] + '-' + lut[ d1 >> 16 & 0x0f | 0x40 ] + lut[ d1 >> 24 & 0xff ] + '-' +\n\t\t\t\tlut[ d2 & 0x3f | 0x80 ] + lut[ d2 >> 8 & 0xff ] + '-' + lut[ d2 >> 16 & 0xff ] + lut[ d2 >> 24 & 0xff ] +\n\t\t\t\tlut[ d3 & 0xff ] + lut[ d3 >> 8 & 0xff ] + lut[ d3 >> 16 & 0xff ] + lut[ d3 >> 24 & 0xff ];\n\n\t\t};\n\n\t} )(),\n\n\tclamp: function ( value, min, max ) {\n\n\t\treturn Math.max( min, Math.min( max, value ) );\n\n\t},\n\n\t// compute euclidian modulo of m % n\n\t// https://en.wikipedia.org/wiki/Modulo_operation\n\n\teuclideanModulo: function ( n, m ) {\n\n\t\treturn ( ( n % m ) + m ) % m;\n\n\t},\n\n\t// Linear mapping from range <a1, a2> to range <b1, b2>\n\n\tmapLinear: function ( x, a1, a2, b1, b2 ) {\n\n\t\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\n\n\t},\n\n\t// https://en.wikipedia.org/wiki/Linear_interpolation\n\n\tlerp: function ( x, y, t ) {\n\n\t\treturn ( 1 - t ) * x + t * y;\n\n\t},\n\n\t// http://en.wikipedia.org/wiki/Smoothstep\n\n\tsmoothstep: function ( x, min, max ) {\n\n\t\tif ( x <= min ) return 0;\n\t\tif ( x >= max ) return 1;\n\n\t\tx = ( x - min ) / ( max - min );\n\n\t\treturn x * x * ( 3 - 2 * x );\n\n\t},\n\n\tsmootherstep: function ( x, min, max ) {\n\n\t\tif ( x <= min ) return 0;\n\t\tif ( x >= max ) return 1;\n\n\t\tx = ( x - min ) / ( max - min );\n\n\t\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\n\n\t},\n\n\t// Random integer from <low, high> interval\n\n\trandInt: function ( low, high ) {\n\n\t\treturn low + Math.floor( Math.random() * ( high - low + 1 ) );\n\n\t},\n\n\t// Random float from <low, high> interval\n\n\trandFloat: function ( low, high ) {\n\n\t\treturn low + Math.random() * ( high - low );\n\n\t},\n\n\t// Random float from <-range/2, range/2> interval\n\n\trandFloatSpread: function ( range ) {\n\n\t\treturn range * ( 0.5 - Math.random() );\n\n\t},\n\n\tdegToRad: function ( degrees ) {\n\n\t\treturn degrees * _Math.DEG2RAD;\n\n\t},\n\n\tradToDeg: function ( radians ) {\n\n\t\treturn radians * _Math.RAD2DEG;\n\n\t},\n\n\tisPowerOfTwo: function ( value ) {\n\n\t\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\n\n\t},\n\n\tceilPowerOfTwo: function ( value ) {\n\n\t\treturn Math.pow( 2, Math.ceil( Math.log( value ) / Math.LN2 ) );\n\n\t},\n\n\tfloorPowerOfTwo: function ( value ) {\n\n\t\treturn Math.pow( 2, Math.floor( Math.log( value ) / Math.LN2 ) );\n\n\t}\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author philogb / http://blog.thejit.org/\n * @author egraether / http://egraether.com/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n */\n\nfunction Vector2( x, y ) {\n\n\tthis.x = x || 0;\n\tthis.y = y || 0;\n\n}\n\nObject.defineProperties( Vector2.prototype, {\n\n\t\"width\": {\n\n\t\tget: function () {\n\n\t\t\treturn this.x;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis.x = value;\n\n\t\t}\n\n\t},\n\n\t\"height\": {\n\n\t\tget: function () {\n\n\t\t\treturn this.y;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis.y = value;\n\n\t\t}\n\n\t}\n\n} );\n\nObject.assign( Vector2.prototype, {\n\n\tisVector2: true,\n\n\tset: function ( x, y ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.x, this.y );\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\n\t\treturn this;\n\n\t},\n\n\taddScaledVector: function ( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\n\t\treturn this;\n\n\t},\n\n\tsubScalar: function ( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\n\t\treturn this;\n\n\t},\n\n\tdivide: function ( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t},\n\n\tapplyMatrix3: function ( m ) {\n\n\t\tvar x = this.x, y = this.y;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ];\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ];\n\n\t\treturn this;\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampScalar: function () {\n\n\t\tvar min = new Vector2();\n\t\tvar max = new Vector2();\n\n\t\treturn function clampScalar( minVal, maxVal ) {\n\n\t\t\tmin.set( minVal, minVal );\n\t\t\tmax.set( maxVal, maxVal );\n\n\t\t\treturn this.clamp( min, max );\n\n\t\t};\n\n\t}(),\n\n\tclampLength: function ( min, max ) {\n\n\t\tvar length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t},\n\n\tfloor: function () {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\n\t\treturn this;\n\n\t},\n\n\tceil: function () {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\n\t\treturn this;\n\n\t},\n\n\tround: function () {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\n\t\treturn this;\n\n\t},\n\n\troundToZero: function () {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y );\n\n\t},\n\n\tmanhattanLength: function () {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t},\n\n\tangle: function () {\n\n\t\t// computes the angle in radians with respect to the positive x-axis\n\n\t\tvar angle = Math.atan2( this.y, this.x );\n\n\t\tif ( angle < 0 ) angle += 2 * Math.PI;\n\n\t\treturn angle;\n\n\t},\n\n\tdistanceTo: function ( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t},\n\n\tdistanceToSquared: function ( v ) {\n\n\t\tvar dx = this.x - v.x, dy = this.y - v.y;\n\t\treturn dx * dx + dy * dy;\n\n\t},\n\n\tmanhattanDistanceTo: function ( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y );\n\n\t},\n\n\tsetLength: function ( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tlerpVectors: function ( v1, v2, alpha ) {\n\n\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\n\t\treturn array;\n\n\t},\n\n\tfromBufferAttribute: function ( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\n\t\treturn this;\n\n\t},\n\n\trotateAround: function ( center, angle ) {\n\n\t\tvar c = Math.cos( angle ), s = Math.sin( angle );\n\n\t\tvar x = this.x - center.x;\n\t\tvar y = this.y - center.y;\n\n\t\tthis.x = x * c - y * s + center.x;\n\t\tthis.y = x * s + y * c + center.y;\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author philogb / http://blog.thejit.org/\n * @author jordi_ros / http://plattsoft.com\n * @author D1plo1d / http://github.com/D1plo1d\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author timknip / http://www.floorplanner.com/\n * @author bhouston / http://clara.io\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction Matrix4() {\n\n\tthis.elements = [\n\n\t\t1, 0, 0, 0,\n\t\t0, 1, 0, 0,\n\t\t0, 0, 1, 0,\n\t\t0, 0, 0, 1\n\n\t];\n\n\tif ( arguments.length > 0 ) {\n\n\t\tconsole.error( 'THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.' );\n\n\t}\n\n}\n\nObject.assign( Matrix4.prototype, {\n\n\tisMatrix4: true,\n\n\tset: function ( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\n\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\n\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\n\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\n\n\t\treturn this;\n\n\t},\n\n\tidentity: function () {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new Matrix4().fromArray( this.elements );\n\n\t},\n\n\tcopy: function ( m ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ]; te[ 3 ] = me[ 3 ];\n\t\tte[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ]; te[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ];\n\t\tte[ 8 ] = me[ 8 ]; te[ 9 ] = me[ 9 ]; te[ 10 ] = me[ 10 ]; te[ 11 ] = me[ 11 ];\n\t\tte[ 12 ] = me[ 12 ]; te[ 13 ] = me[ 13 ]; te[ 14 ] = me[ 14 ]; te[ 15 ] = me[ 15 ];\n\n\t\treturn this;\n\n\t},\n\n\tcopyPosition: function ( m ) {\n\n\t\tvar te = this.elements, me = m.elements;\n\n\t\tte[ 12 ] = me[ 12 ];\n\t\tte[ 13 ] = me[ 13 ];\n\t\tte[ 14 ] = me[ 14 ];\n\n\t\treturn this;\n\n\t},\n\n\textractBasis: function ( xAxis, yAxis, zAxis ) {\n\n\t\txAxis.setFromMatrixColumn( this, 0 );\n\t\tyAxis.setFromMatrixColumn( this, 1 );\n\t\tzAxis.setFromMatrixColumn( this, 2 );\n\n\t\treturn this;\n\n\t},\n\n\tmakeBasis: function ( xAxis, yAxis, zAxis ) {\n\n\t\tthis.set(\n\t\t\txAxis.x, yAxis.x, zAxis.x, 0,\n\t\t\txAxis.y, yAxis.y, zAxis.y, 0,\n\t\t\txAxis.z, yAxis.z, zAxis.z, 0,\n\t\t\t0, 0, 0, 1\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\textractRotation: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function extractRotation( m ) {\n\n\t\t\tvar te = this.elements;\n\t\t\tvar me = m.elements;\n\n\t\t\tvar scaleX = 1 / v1.setFromMatrixColumn( m, 0 ).length();\n\t\t\tvar scaleY = 1 / v1.setFromMatrixColumn( m, 1 ).length();\n\t\t\tvar scaleZ = 1 / v1.setFromMatrixColumn( m, 2 ).length();\n\n\t\t\tte[ 0 ] = me[ 0 ] * scaleX;\n\t\t\tte[ 1 ] = me[ 1 ] * scaleX;\n\t\t\tte[ 2 ] = me[ 2 ] * scaleX;\n\n\t\t\tte[ 4 ] = me[ 4 ] * scaleY;\n\t\t\tte[ 5 ] = me[ 5 ] * scaleY;\n\t\t\tte[ 6 ] = me[ 6 ] * scaleY;\n\n\t\t\tte[ 8 ] = me[ 8 ] * scaleZ;\n\t\t\tte[ 9 ] = me[ 9 ] * scaleZ;\n\t\t\tte[ 10 ] = me[ 10 ] * scaleZ;\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tmakeRotationFromEuler: function ( euler ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tconsole.error( 'THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tvar te = this.elements;\n\n\t\tvar x = euler.x, y = euler.y, z = euler.z;\n\t\tvar a = Math.cos( x ), b = Math.sin( x );\n\t\tvar c = Math.cos( y ), d = Math.sin( y );\n\t\tvar e = Math.cos( z ), f = Math.sin( z );\n\n\t\tif ( euler.order === 'XYZ' ) {\n\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - c * f;\n\t\t\tte[ 8 ] = d;\n\n\t\t\tte[ 1 ] = af + be * d;\n\t\t\tte[ 5 ] = ae - bf * d;\n\t\t\tte[ 9 ] = - b * c;\n\n\t\t\tte[ 2 ] = bf - ae * d;\n\t\t\tte[ 6 ] = be + af * d;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YXZ' ) {\n\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce + df * b;\n\t\t\tte[ 4 ] = de * b - cf;\n\t\t\tte[ 8 ] = a * d;\n\n\t\t\tte[ 1 ] = a * f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b;\n\n\t\t\tte[ 2 ] = cf * b - de;\n\t\t\tte[ 6 ] = df + ce * b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZXY' ) {\n\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce - df * b;\n\t\t\tte[ 4 ] = - a * f;\n\t\t\tte[ 8 ] = de + cf * b;\n\n\t\t\tte[ 1 ] = cf + de * b;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = df - ce * b;\n\n\t\t\tte[ 2 ] = - a * d;\n\t\t\tte[ 6 ] = b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZYX' ) {\n\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = be * d - af;\n\t\t\tte[ 8 ] = ae * d + bf;\n\n\t\t\tte[ 1 ] = c * f;\n\t\t\tte[ 5 ] = bf * d + ae;\n\t\t\tte[ 9 ] = af * d - be;\n\n\t\t\tte[ 2 ] = - d;\n\t\t\tte[ 6 ] = b * c;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YZX' ) {\n\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = bd - ac * f;\n\t\t\tte[ 8 ] = bc * f + ad;\n\n\t\t\tte[ 1 ] = f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b * e;\n\n\t\t\tte[ 2 ] = - d * e;\n\t\t\tte[ 6 ] = ad * f + bc;\n\t\t\tte[ 10 ] = ac - bd * f;\n\n\t\t} else if ( euler.order === 'XZY' ) {\n\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - f;\n\t\t\tte[ 8 ] = d * e;\n\n\t\t\tte[ 1 ] = ac * f + bd;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = ad * f - bc;\n\n\t\t\tte[ 2 ] = bc * f - ad;\n\t\t\tte[ 6 ] = b * e;\n\t\t\tte[ 10 ] = bd * f + ac;\n\n\t\t}\n\n\t\t// last column\n\t\tte[ 3 ] = 0;\n\t\tte[ 7 ] = 0;\n\t\tte[ 11 ] = 0;\n\n\t\t// bottom row\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationFromQuaternion: function ( q ) {\n\n\t\tvar te = this.elements;\n\n\t\tvar x = q._x, y = q._y, z = q._z, w = q._w;\n\t\tvar x2 = x + x, y2 = y + y, z2 = z + z;\n\t\tvar xx = x * x2, xy = x * y2, xz = x * z2;\n\t\tvar yy = y * y2, yz = y * z2, zz = z * z2;\n\t\tvar wx = w * x2, wy = w * y2, wz = w * z2;\n\n\t\tte[ 0 ] = 1 - ( yy + zz );\n\t\tte[ 4 ] = xy - wz;\n\t\tte[ 8 ] = xz + wy;\n\n\t\tte[ 1 ] = xy + wz;\n\t\tte[ 5 ] = 1 - ( xx + zz );\n\t\tte[ 9 ] = yz - wx;\n\n\t\tte[ 2 ] = xz - wy;\n\t\tte[ 6 ] = yz + wx;\n\t\tte[ 10 ] = 1 - ( xx + yy );\n\n\t\t// last column\n\t\tte[ 3 ] = 0;\n\t\tte[ 7 ] = 0;\n\t\tte[ 11 ] = 0;\n\n\t\t// bottom row\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tlookAt: function () {\n\n\t\tvar x = new Vector3();\n\t\tvar y = new Vector3();\n\t\tvar z = new Vector3();\n\n\t\treturn function lookAt( eye, target, up ) {\n\n\t\t\tvar te = this.elements;\n\n\t\t\tz.subVectors( eye, target );\n\n\t\t\tif ( z.lengthSq() === 0 ) {\n\n\t\t\t\t// eye and target are in the same position\n\n\t\t\t\tz.z = 1;\n\n\t\t\t}\n\n\t\t\tz.normalize();\n\t\t\tx.crossVectors( up, z );\n\n\t\t\tif ( x.lengthSq() === 0 ) {\n\n\t\t\t\t// up and z are parallel\n\n\t\t\t\tif ( Math.abs( up.z ) === 1 ) {\n\n\t\t\t\t\tz.x += 0.0001;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tz.z += 0.0001;\n\n\t\t\t\t}\n\n\t\t\t\tz.normalize();\n\t\t\t\tx.crossVectors( up, z );\n\n\t\t\t}\n\n\t\t\tx.normalize();\n\t\t\ty.crossVectors( z, x );\n\n\t\t\tte[ 0 ] = x.x; te[ 4 ] = y.x; te[ 8 ] = z.x;\n\t\t\tte[ 1 ] = x.y; te[ 5 ] = y.y; te[ 9 ] = z.y;\n\t\t\tte[ 2 ] = x.z; te[ 6 ] = y.z; te[ 10 ] = z.z;\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tmultiply: function ( m, n ) {\n\n\t\tif ( n !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.' );\n\t\t\treturn this.multiplyMatrices( m, n );\n\n\t\t}\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t},\n\n\tpremultiply: function ( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t},\n\n\tmultiplyMatrices: function ( a, b ) {\n\n\t\tvar ae = a.elements;\n\t\tvar be = b.elements;\n\t\tvar te = this.elements;\n\n\t\tvar a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\n\t\tvar a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\n\t\tvar a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\n\t\tvar a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\n\n\t\tvar b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\n\t\tvar b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\n\t\tvar b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\n\t\tvar b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\n\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\n\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\n\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\n\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\n\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\n\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\n\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\n\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\n\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\n\n\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\n\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\n\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\n\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\n\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\n\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\n\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\n\n\t\treturn this;\n\n\t},\n\n\tapplyToBufferAttribute: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function applyToBufferAttribute( attribute ) {\n\n\t\t\tfor ( var i = 0, l = attribute.count; i < l; i ++ ) {\n\n\t\t\t\tv1.x = attribute.getX( i );\n\t\t\t\tv1.y = attribute.getY( i );\n\t\t\t\tv1.z = attribute.getZ( i );\n\n\t\t\t\tv1.applyMatrix4( this );\n\n\t\t\t\tattribute.setXYZ( i, v1.x, v1.y, v1.z );\n\n\t\t\t}\n\n\t\t\treturn attribute;\n\n\t\t};\n\n\t}(),\n\n\tdeterminant: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\n\t\tvar n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\n\t\tvar n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\n\t\tvar n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\n\n\t\t//TODO: make this more efficient\n\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\n\n\t\treturn (\n\t\t\tn41 * (\n\t\t\t\t+ n14 * n23 * n32\n\t\t\t\t - n13 * n24 * n32\n\t\t\t\t - n14 * n22 * n33\n\t\t\t\t + n12 * n24 * n33\n\t\t\t\t + n13 * n22 * n34\n\t\t\t\t - n12 * n23 * n34\n\t\t\t) +\n\t\t\tn42 * (\n\t\t\t\t+ n11 * n23 * n34\n\t\t\t\t - n11 * n24 * n33\n\t\t\t\t + n14 * n21 * n33\n\t\t\t\t - n13 * n21 * n34\n\t\t\t\t + n13 * n24 * n31\n\t\t\t\t - n14 * n23 * n31\n\t\t\t) +\n\t\t\tn43 * (\n\t\t\t\t+ n11 * n24 * n32\n\t\t\t\t - n11 * n22 * n34\n\t\t\t\t - n14 * n21 * n32\n\t\t\t\t + n12 * n21 * n34\n\t\t\t\t + n14 * n22 * n31\n\t\t\t\t - n12 * n24 * n31\n\t\t\t) +\n\t\t\tn44 * (\n\t\t\t\t- n13 * n22 * n31\n\t\t\t\t - n11 * n23 * n32\n\t\t\t\t + n11 * n22 * n33\n\t\t\t\t + n13 * n21 * n32\n\t\t\t\t - n12 * n21 * n33\n\t\t\t\t + n12 * n23 * n31\n\t\t\t)\n\n\t\t);\n\n\t},\n\n\ttranspose: function () {\n\n\t\tvar te = this.elements;\n\t\tvar tmp;\n\n\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\n\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\n\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\n\n\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\n\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\n\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\n\n\t\treturn this;\n\n\t},\n\n\tsetPosition: function ( v ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 12 ] = v.x;\n\t\tte[ 13 ] = v.y;\n\t\tte[ 14 ] = v.z;\n\n\t\treturn this;\n\n\t},\n\n\tgetInverse: function ( m, throwOnDegenerate ) {\n\n\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\n\t\tvar te = this.elements,\n\t\t\tme = m.elements,\n\n\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ], n41 = me[ 3 ],\n\t\t\tn12 = me[ 4 ], n22 = me[ 5 ], n32 = me[ 6 ], n42 = me[ 7 ],\n\t\t\tn13 = me[ 8 ], n23 = me[ 9 ], n33 = me[ 10 ], n43 = me[ 11 ],\n\t\t\tn14 = me[ 12 ], n24 = me[ 13 ], n34 = me[ 14 ], n44 = me[ 15 ],\n\n\t\t\tt11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44,\n\t\t\tt12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44,\n\t\t\tt13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44,\n\t\t\tt14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\n\n\t\tvar det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\n\n\t\tif ( det === 0 ) {\n\n\t\t\tvar msg = \"THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0\";\n\n\t\t\tif ( throwOnDegenerate === true ) {\n\n\t\t\t\tthrow new Error( msg );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( msg );\n\n\t\t\t}\n\n\t\t\treturn this.identity();\n\n\t\t}\n\n\t\tvar detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44 ) * detInv;\n\t\tte[ 2 ] = ( n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44 ) * detInv;\n\t\tte[ 3 ] = ( n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43 ) * detInv;\n\n\t\tte[ 4 ] = t12 * detInv;\n\t\tte[ 5 ] = ( n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44 ) * detInv;\n\t\tte[ 6 ] = ( n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44 ) * detInv;\n\t\tte[ 7 ] = ( n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43 ) * detInv;\n\n\t\tte[ 8 ] = t13 * detInv;\n\t\tte[ 9 ] = ( n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44 ) * detInv;\n\t\tte[ 10 ] = ( n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44 ) * detInv;\n\t\tte[ 11 ] = ( n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43 ) * detInv;\n\n\t\tte[ 12 ] = t14 * detInv;\n\t\tte[ 13 ] = ( n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34 ) * detInv;\n\t\tte[ 14 ] = ( n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34 ) * detInv;\n\t\tte[ 15 ] = ( n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33 ) * detInv;\n\n\t\treturn this;\n\n\t},\n\n\tscale: function ( v ) {\n\n\t\tvar te = this.elements;\n\t\tvar x = v.x, y = v.y, z = v.z;\n\n\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\n\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\n\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\n\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\n\n\t\treturn this;\n\n\t},\n\n\tgetMaxScaleOnAxis: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\n\t\tvar scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\n\t\tvar scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\n\n\t\treturn Math.sqrt( Math.max( scaleXSq, scaleYSq, scaleZSq ) );\n\n\t},\n\n\tmakeTranslation: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, x,\n\t\t\t0, 1, 0, y,\n\t\t\t0, 0, 1, z,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationX: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, c, - s, 0,\n\t\t\t0, s, c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationY: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t c, 0, s, 0,\n\t\t\t 0, 1, 0, 0,\n\t\t\t- s, 0, c, 0,\n\t\t\t 0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationZ: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\tc, - s, 0, 0,\n\t\t\ts, c, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationAxis: function ( axis, angle ) {\n\n\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\n\n\t\tvar c = Math.cos( angle );\n\t\tvar s = Math.sin( angle );\n\t\tvar t = 1 - c;\n\t\tvar x = axis.x, y = axis.y, z = axis.z;\n\t\tvar tx = t * x, ty = t * y;\n\n\t\tthis.set(\n\n\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\n\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\n\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\t return this;\n\n\t},\n\n\tmakeScale: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\tx, 0, 0, 0,\n\t\t\t0, y, 0, 0,\n\t\t\t0, 0, z, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeShear: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, y, z, 0,\n\t\t\tx, 1, z, 0,\n\t\t\tx, y, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tcompose: function ( position, quaternion, scale ) {\n\n\t\tthis.makeRotationFromQuaternion( quaternion );\n\t\tthis.scale( scale );\n\t\tthis.setPosition( position );\n\n\t\treturn this;\n\n\t},\n\n\tdecompose: function () {\n\n\t\tvar vector = new Vector3();\n\t\tvar matrix = new Matrix4();\n\n\t\treturn function decompose( position, quaternion, scale ) {\n\n\t\t\tvar te = this.elements;\n\n\t\t\tvar sx = vector.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\n\t\t\tvar sy = vector.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\n\t\t\tvar sz = vector.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\n\n\t\t\t// if determine is negative, we need to invert one scale\n\t\t\tvar det = this.determinant();\n\t\t\tif ( det < 0 ) sx = - sx;\n\n\t\t\tposition.x = te[ 12 ];\n\t\t\tposition.y = te[ 13 ];\n\t\t\tposition.z = te[ 14 ];\n\n\t\t\t// scale the rotation part\n\t\t\tmatrix.copy( this );\n\n\t\t\tvar invSX = 1 / sx;\n\t\t\tvar invSY = 1 / sy;\n\t\t\tvar invSZ = 1 / sz;\n\n\t\t\tmatrix.elements[ 0 ] *= invSX;\n\t\t\tmatrix.elements[ 1 ] *= invSX;\n\t\t\tmatrix.elements[ 2 ] *= invSX;\n\n\t\t\tmatrix.elements[ 4 ] *= invSY;\n\t\t\tmatrix.elements[ 5 ] *= invSY;\n\t\t\tmatrix.elements[ 6 ] *= invSY;\n\n\t\t\tmatrix.elements[ 8 ] *= invSZ;\n\t\t\tmatrix.elements[ 9 ] *= invSZ;\n\t\t\tmatrix.elements[ 10 ] *= invSZ;\n\n\t\t\tquaternion.setFromRotationMatrix( matrix );\n\n\t\t\tscale.x = sx;\n\t\t\tscale.y = sy;\n\t\t\tscale.z = sz;\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tmakePerspective: function ( left, right, top, bottom, near, far ) {\n\n\t\tif ( far === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.' );\n\n\t\t}\n\n\t\tvar te = this.elements;\n\t\tvar x = 2 * near / ( right - left );\n\t\tvar y = 2 * near / ( top - bottom );\n\n\t\tvar a = ( right + left ) / ( right - left );\n\t\tvar b = ( top + bottom ) / ( top - bottom );\n\t\tvar c = - ( far + near ) / ( far - near );\n\t\tvar d = - 2 * far * near / ( far - near );\n\n\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a;\tte[ 12 ] = 0;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b;\tte[ 13 ] = 0;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c;\tte[ 14 ] = d;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\n\n\t\treturn this;\n\n\t},\n\n\tmakeOrthographic: function ( left, right, top, bottom, near, far ) {\n\n\t\tvar te = this.elements;\n\t\tvar w = 1.0 / ( right - left );\n\t\tvar h = 1.0 / ( top - bottom );\n\t\tvar p = 1.0 / ( far - near );\n\n\t\tvar x = ( right + left ) * w;\n\t\tvar y = ( top + bottom ) * h;\n\t\tvar z = ( far + near ) * p;\n\n\t\tte[ 0 ] = 2 * w;\tte[ 4 ] = 0;\tte[ 8 ] = 0;\tte[ 12 ] = - x;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = 2 * h;\tte[ 9 ] = 0;\tte[ 13 ] = - y;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = - 2 * p;\tte[ 14 ] = - z;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = 0;\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( matrix ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = matrix.elements;\n\n\t\tfor ( var i = 0; i < 16; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tfor ( var i = 0; i < 16; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tvar te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\t\tarray[ offset + 9 ] = te[ 9 ];\n\t\tarray[ offset + 10 ] = te[ 10 ];\n\t\tarray[ offset + 11 ] = te[ 11 ];\n\n\t\tarray[ offset + 12 ] = te[ 12 ];\n\t\tarray[ offset + 13 ] = te[ 13 ];\n\t\tarray[ offset + 14 ] = te[ 14 ];\n\t\tarray[ offset + 15 ] = te[ 15 ];\n\n\t\treturn array;\n\n\t}\n\n} );\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://clara.io\n */\n\nfunction Quaternion( x, y, z, w ) {\n\n\tthis._x = x || 0;\n\tthis._y = y || 0;\n\tthis._z = z || 0;\n\tthis._w = ( w !== undefined ) ? w : 1;\n\n}\n\nObject.assign( Quaternion, {\n\n\tslerp: function ( qa, qb, qm, t ) {\n\n\t\treturn qm.copy( qa ).slerp( qb, t );\n\n\t},\n\n\tslerpFlat: function ( dst, dstOffset, src0, srcOffset0, src1, srcOffset1, t ) {\n\n\t\t// fuzz-free, array-based Quaternion SLERP operation\n\n\t\tvar x0 = src0[ srcOffset0 + 0 ],\n\t\t\ty0 = src0[ srcOffset0 + 1 ],\n\t\t\tz0 = src0[ srcOffset0 + 2 ],\n\t\t\tw0 = src0[ srcOffset0 + 3 ],\n\n\t\t\tx1 = src1[ srcOffset1 + 0 ],\n\t\t\ty1 = src1[ srcOffset1 + 1 ],\n\t\t\tz1 = src1[ srcOffset1 + 2 ],\n\t\t\tw1 = src1[ srcOffset1 + 3 ];\n\n\t\tif ( w0 !== w1 || x0 !== x1 || y0 !== y1 || z0 !== z1 ) {\n\n\t\t\tvar s = 1 - t,\n\n\t\t\t\tcos = x0 * x1 + y0 * y1 + z0 * z1 + w0 * w1,\n\n\t\t\t\tdir = ( cos >= 0 ? 1 : - 1 ),\n\t\t\t\tsqrSin = 1 - cos * cos;\n\n\t\t\t// Skip the Slerp for tiny steps to avoid numeric problems:\n\t\t\tif ( sqrSin > Number.EPSILON ) {\n\n\t\t\t\tvar sin = Math.sqrt( sqrSin ),\n\t\t\t\t\tlen = Math.atan2( sin, cos * dir );\n\n\t\t\t\ts = Math.sin( s * len ) / sin;\n\t\t\t\tt = Math.sin( t * len ) / sin;\n\n\t\t\t}\n\n\t\t\tvar tDir = t * dir;\n\n\t\t\tx0 = x0 * s + x1 * tDir;\n\t\t\ty0 = y0 * s + y1 * tDir;\n\t\t\tz0 = z0 * s + z1 * tDir;\n\t\t\tw0 = w0 * s + w1 * tDir;\n\n\t\t\t// Normalize in case we just did a lerp:\n\t\t\tif ( s === 1 - t ) {\n\n\t\t\t\tvar f = 1 / Math.sqrt( x0 * x0 + y0 * y0 + z0 * z0 + w0 * w0 );\n\n\t\t\t\tx0 *= f;\n\t\t\t\ty0 *= f;\n\t\t\t\tz0 *= f;\n\t\t\t\tw0 *= f;\n\n\t\t\t}\n\n\t\t}\n\n\t\tdst[ dstOffset ] = x0;\n\t\tdst[ dstOffset + 1 ] = y0;\n\t\tdst[ dstOffset + 2 ] = z0;\n\t\tdst[ dstOffset + 3 ] = w0;\n\n\t}\n\n} );\n\nObject.defineProperties( Quaternion.prototype, {\n\n\tx: {\n\n\t\tget: function () {\n\n\t\t\treturn this._x;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._x = value;\n\t\t\tthis.onChangeCallback();\n\n\t\t}\n\n\t},\n\n\ty: {\n\n\t\tget: function () {\n\n\t\t\treturn this._y;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._y = value;\n\t\t\tthis.onChangeCallback();\n\n\t\t}\n\n\t},\n\n\tz: {\n\n\t\tget: function () {\n\n\t\t\treturn this._z;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._z = value;\n\t\t\tthis.onChangeCallback();\n\n\t\t}\n\n\t},\n\n\tw: {\n\n\t\tget: function () {\n\n\t\t\treturn this._w;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._w = value;\n\t\t\tthis.onChangeCallback();\n\n\t\t}\n\n\t}\n\n} );\n\nObject.assign( Quaternion.prototype, {\n\n\tset: function ( x, y, z, w ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._w );\n\n\t},\n\n\tcopy: function ( quaternion ) {\n\n\t\tthis._x = quaternion.x;\n\t\tthis._y = quaternion.y;\n\t\tthis._z = quaternion.z;\n\t\tthis._w = quaternion.w;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromEuler: function ( euler, update ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tthrow new Error( 'THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tvar x = euler._x, y = euler._y, z = euler._z, order = euler.order;\n\n\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\n\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\n\t\t//\tcontent/SpinCalc.m\n\n\t\tvar cos = Math.cos;\n\t\tvar sin = Math.sin;\n\n\t\tvar c1 = cos( x / 2 );\n\t\tvar c2 = cos( y / 2 );\n\t\tvar c3 = cos( z / 2 );\n\n\t\tvar s1 = sin( x / 2 );\n\t\tvar s2 = sin( y / 2 );\n\t\tvar s3 = sin( z / 2 );\n\n\t\tif ( order === 'XYZ' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t} else if ( order === 'YXZ' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t} else if ( order === 'ZXY' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t} else if ( order === 'ZYX' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t} else if ( order === 'YZX' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t} else if ( order === 'XZY' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t}\n\n\t\tif ( update !== false ) this.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromAxisAngle: function ( axis, angle ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\n\n\t\t// assumes axis is normalized\n\n\t\tvar halfAngle = angle / 2, s = Math.sin( halfAngle );\n\n\t\tthis._x = axis.x * s;\n\t\tthis._y = axis.y * s;\n\t\tthis._z = axis.z * s;\n\t\tthis._w = Math.cos( halfAngle );\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromRotationMatrix: function ( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tvar te = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\n\n\t\t\ttrace = m11 + m22 + m33,\n\t\t\ts;\n\n\t\tif ( trace > 0 ) {\n\n\t\t\ts = 0.5 / Math.sqrt( trace + 1.0 );\n\n\t\t\tthis._w = 0.25 / s;\n\t\t\tthis._x = ( m32 - m23 ) * s;\n\t\t\tthis._y = ( m13 - m31 ) * s;\n\t\t\tthis._z = ( m21 - m12 ) * s;\n\n\t\t} else if ( m11 > m22 && m11 > m33 ) {\n\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\n\n\t\t\tthis._w = ( m32 - m23 ) / s;\n\t\t\tthis._x = 0.25 * s;\n\t\t\tthis._y = ( m12 + m21 ) / s;\n\t\t\tthis._z = ( m13 + m31 ) / s;\n\n\t\t} else if ( m22 > m33 ) {\n\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\n\n\t\t\tthis._w = ( m13 - m31 ) / s;\n\t\t\tthis._x = ( m12 + m21 ) / s;\n\t\t\tthis._y = 0.25 * s;\n\t\t\tthis._z = ( m23 + m32 ) / s;\n\n\t\t} else {\n\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\n\n\t\t\tthis._w = ( m21 - m12 ) / s;\n\t\t\tthis._x = ( m13 + m31 ) / s;\n\t\t\tthis._y = ( m23 + m32 ) / s;\n\t\t\tthis._z = 0.25 * s;\n\n\t\t}\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromUnitVectors: function () {\n\n\t\t// assumes direction vectors vFrom and vTo are normalized\n\n\t\tvar v1 = new Vector3();\n\t\tvar r;\n\n\t\tvar EPS = 0.000001;\n\n\t\treturn function setFromUnitVectors( vFrom, vTo ) {\n\n\t\t\tif ( v1 === undefined ) v1 = new Vector3();\n\n\t\t\tr = vFrom.dot( vTo ) + 1;\n\n\t\t\tif ( r < EPS ) {\n\n\t\t\t\tr = 0;\n\n\t\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\n\n\t\t\t\t\tv1.set( - vFrom.y, vFrom.x, 0 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tv1.set( 0, - vFrom.z, vFrom.y );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tv1.crossVectors( vFrom, vTo );\n\n\t\t\t}\n\n\t\t\tthis._x = v1.x;\n\t\t\tthis._y = v1.y;\n\t\t\tthis._z = v1.z;\n\t\t\tthis._w = r;\n\n\t\t\treturn this.normalize();\n\n\t\t};\n\n\t}(),\n\n\tinverse: function () {\n\n\t\treturn this.conjugate().normalize();\n\n\t},\n\n\tconjugate: function () {\n\n\t\tthis._x *= - 1;\n\t\tthis._y *= - 1;\n\t\tthis._z *= - 1;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\n\n\t},\n\n\tnormalize: function () {\n\n\t\tvar l = this.length();\n\n\t\tif ( l === 0 ) {\n\n\t\t\tthis._x = 0;\n\t\t\tthis._y = 0;\n\t\t\tthis._z = 0;\n\t\t\tthis._w = 1;\n\n\t\t} else {\n\n\t\t\tl = 1 / l;\n\n\t\t\tthis._x = this._x * l;\n\t\t\tthis._y = this._y * l;\n\t\t\tthis._z = this._z * l;\n\t\t\tthis._w = this._w * l;\n\n\t\t}\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( q, p ) {\n\n\t\tif ( p !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.' );\n\t\t\treturn this.multiplyQuaternions( q, p );\n\n\t\t}\n\n\t\treturn this.multiplyQuaternions( this, q );\n\n\t},\n\n\tpremultiply: function ( q ) {\n\n\t\treturn this.multiplyQuaternions( q, this );\n\n\t},\n\n\tmultiplyQuaternions: function ( a, b ) {\n\n\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\n\n\t\tvar qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\n\t\tvar qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\n\n\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\n\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\n\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\n\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tslerp: function ( qb, t ) {\n\n\t\tif ( t === 0 ) return this;\n\t\tif ( t === 1 ) return this.copy( qb );\n\n\t\tvar x = this._x, y = this._y, z = this._z, w = this._w;\n\n\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\n\n\t\tvar cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\n\n\t\tif ( cosHalfTheta < 0 ) {\n\n\t\t\tthis._w = - qb._w;\n\t\t\tthis._x = - qb._x;\n\t\t\tthis._y = - qb._y;\n\t\t\tthis._z = - qb._z;\n\n\t\t\tcosHalfTheta = - cosHalfTheta;\n\n\t\t} else {\n\n\t\t\tthis.copy( qb );\n\n\t\t}\n\n\t\tif ( cosHalfTheta >= 1.0 ) {\n\n\t\t\tthis._w = w;\n\t\t\tthis._x = x;\n\t\t\tthis._y = y;\n\t\t\tthis._z = z;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar sinHalfTheta = Math.sqrt( 1.0 - cosHalfTheta * cosHalfTheta );\n\n\t\tif ( Math.abs( sinHalfTheta ) < 0.001 ) {\n\n\t\t\tthis._w = 0.5 * ( w + this._w );\n\t\t\tthis._x = 0.5 * ( x + this._x );\n\t\t\tthis._y = 0.5 * ( y + this._y );\n\t\t\tthis._z = 0.5 * ( z + this._z );\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar halfTheta = Math.atan2( sinHalfTheta, cosHalfTheta );\n\t\tvar ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\n\t\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\n\n\t\tthis._w = ( w * ratioA + this._w * ratioB );\n\t\tthis._x = ( x * ratioA + this._x * ratioB );\n\t\tthis._y = ( y * ratioA + this._y * ratioB );\n\t\tthis._z = ( z * ratioA + this._z * ratioB );\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( quaternion ) {\n\n\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis._x = array[ offset ];\n\t\tthis._y = array[ offset + 1 ];\n\t\tthis._z = array[ offset + 2 ];\n\t\tthis._w = array[ offset + 3 ];\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._w;\n\n\t\treturn array;\n\n\t},\n\n\tonChange: function ( callback ) {\n\n\t\tthis.onChangeCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\tonChangeCallback: function () {}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author kile / http://kile.stravaganza.org/\n * @author philogb / http://blog.thejit.org/\n * @author mikael emtinger / http://gomo.se/\n * @author egraether / http://egraether.com/\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction Vector3( x, y, z ) {\n\n\tthis.x = x || 0;\n\tthis.y = y || 0;\n\tthis.z = z || 0;\n\n}\n\nObject.assign( Vector3.prototype, {\n\n\tisVector3: true,\n\n\tset: function ( x, y, z ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetZ: function ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.x, this.y, this.z );\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\n\t\treturn this;\n\n\t},\n\n\taddScaledVector: function ( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tsubScalar: function ( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.' );\n\t\t\treturn this.multiplyVectors( v, w );\n\n\t\t}\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\t\tthis.z *= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyVectors: function ( a, b ) {\n\n\t\tthis.x = a.x * b.x;\n\t\tthis.y = a.y * b.y;\n\t\tthis.z = a.z * b.z;\n\n\t\treturn this;\n\n\t},\n\n\tapplyEuler: function () {\n\n\t\tvar quaternion = new Quaternion();\n\n\t\treturn function applyEuler( euler ) {\n\n\t\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\t\tconsole.error( 'THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t\t}\n\n\t\t\treturn this.applyQuaternion( quaternion.setFromEuler( euler ) );\n\n\t\t};\n\n\t}(),\n\n\tapplyAxisAngle: function () {\n\n\t\tvar quaternion = new Quaternion();\n\n\t\treturn function applyAxisAngle( axis, angle ) {\n\n\t\t\treturn this.applyQuaternion( quaternion.setFromAxisAngle( axis, angle ) );\n\n\t\t};\n\n\t}(),\n\n\tapplyMatrix3: function ( m ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function ( m ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar e = m.elements;\n\n\t\tvar w = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] );\n\n\t\tthis.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] ) * w;\n\t\tthis.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] ) * w;\n\t\tthis.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * w;\n\n\t\treturn this;\n\n\t},\n\n\tapplyQuaternion: function ( q ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar qx = q.x, qy = q.y, qz = q.z, qw = q.w;\n\n\t\t// calculate quat * vector\n\n\t\tvar ix = qw * x + qy * z - qz * y;\n\t\tvar iy = qw * y + qz * x - qx * z;\n\t\tvar iz = qw * z + qx * y - qy * x;\n\t\tvar iw = - qx * x - qy * y - qz * z;\n\n\t\t// calculate result * inverse quat\n\n\t\tthis.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\n\t\tthis.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\n\t\tthis.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\n\n\t\treturn this;\n\n\t},\n\n\tproject: function () {\n\n\t\tvar matrix = new Matrix4();\n\n\t\treturn function project( camera ) {\n\n\t\t\tmatrix.multiplyMatrices( camera.projectionMatrix, matrix.getInverse( camera.matrixWorld ) );\n\t\t\treturn this.applyMatrix4( matrix );\n\n\t\t};\n\n\t}(),\n\n\tunproject: function () {\n\n\t\tvar matrix = new Matrix4();\n\n\t\treturn function unproject( camera ) {\n\n\t\t\tmatrix.multiplyMatrices( camera.matrixWorld, matrix.getInverse( camera.projectionMatrix ) );\n\t\t\treturn this.applyMatrix4( matrix );\n\n\t\t};\n\n\t}(),\n\n\ttransformDirection: function ( m ) {\n\n\t\t// input: THREE.Matrix4 affine matrix\n\t\t// vector interpreted as a direction\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\n\n\t\treturn this.normalize();\n\n\t},\n\n\tdivide: function ( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\t\tthis.z /= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampScalar: function () {\n\n\t\tvar min = new Vector3();\n\t\tvar max = new Vector3();\n\n\t\treturn function clampScalar( minVal, maxVal ) {\n\n\t\t\tmin.set( minVal, minVal, minVal );\n\t\t\tmax.set( maxVal, maxVal, maxVal );\n\n\t\t\treturn this.clamp( min, max );\n\n\t\t};\n\n\t}(),\n\n\tclampLength: function ( min, max ) {\n\n\t\tvar length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t},\n\n\tfloor: function () {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tceil: function () {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tround: function () {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\n\t\treturn this;\n\n\t},\n\n\troundToZero: function () {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\n\n\t},\n\n\t// TODO lengthSquared?\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\n\n\t},\n\n\tmanhattanLength: function () {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t},\n\n\tsetLength: function ( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tlerpVectors: function ( v1, v2, alpha ) {\n\n\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\n\n\t},\n\n\tcross: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.' );\n\t\t\treturn this.crossVectors( v, w );\n\n\t\t}\n\n\t\treturn this.crossVectors( this, v );\n\n\t},\n\n\tcrossVectors: function ( a, b ) {\n\n\t\tvar ax = a.x, ay = a.y, az = a.z;\n\t\tvar bx = b.x, by = b.y, bz = b.z;\n\n\t\tthis.x = ay * bz - az * by;\n\t\tthis.y = az * bx - ax * bz;\n\t\tthis.z = ax * by - ay * bx;\n\n\t\treturn this;\n\n\t},\n\n\tprojectOnVector: function ( vector ) {\n\n\t\tvar scalar = vector.dot( this ) / vector.lengthSq();\n\n\t\treturn this.copy( vector ).multiplyScalar( scalar );\n\n\t},\n\n\tprojectOnPlane: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function projectOnPlane( planeNormal ) {\n\n\t\t\tv1.copy( this ).projectOnVector( planeNormal );\n\n\t\t\treturn this.sub( v1 );\n\n\t\t};\n\n\t}(),\n\n\treflect: function () {\n\n\t\t// reflect incident vector off plane orthogonal to normal\n\t\t// normal is assumed to have unit length\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function reflect( normal ) {\n\n\t\t\treturn this.sub( v1.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\n\n\t\t};\n\n\t}(),\n\n\tangleTo: function ( v ) {\n\n\t\tvar theta = this.dot( v ) / ( Math.sqrt( this.lengthSq() * v.lengthSq() ) );\n\n\t\t// clamp, to handle numerical problems\n\n\t\treturn Math.acos( _Math.clamp( theta, - 1, 1 ) );\n\n\t},\n\n\tdistanceTo: function ( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t},\n\n\tdistanceToSquared: function ( v ) {\n\n\t\tvar dx = this.x - v.x, dy = this.y - v.y, dz = this.z - v.z;\n\n\t\treturn dx * dx + dy * dy + dz * dz;\n\n\t},\n\n\tmanhattanDistanceTo: function ( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y ) + Math.abs( this.z - v.z );\n\n\t},\n\n\tsetFromSpherical: function ( s ) {\n\n\t\tvar sinPhiRadius = Math.sin( s.phi ) * s.radius;\n\n\t\tthis.x = sinPhiRadius * Math.sin( s.theta );\n\t\tthis.y = Math.cos( s.phi ) * s.radius;\n\t\tthis.z = sinPhiRadius * Math.cos( s.theta );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCylindrical: function ( c ) {\n\n\t\tthis.x = c.radius * Math.sin( c.theta );\n\t\tthis.y = c.y;\n\t\tthis.z = c.radius * Math.cos( c.theta );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrixPosition: function ( m ) {\n\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 12 ];\n\t\tthis.y = e[ 13 ];\n\t\tthis.z = e[ 14 ];\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrixScale: function ( m ) {\n\n\t\tvar sx = this.setFromMatrixColumn( m, 0 ).length();\n\t\tvar sy = this.setFromMatrixColumn( m, 1 ).length();\n\t\tvar sz = this.setFromMatrixColumn( m, 2 ).length();\n\n\t\tthis.x = sx;\n\t\tthis.y = sy;\n\t\tthis.z = sz;\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrixColumn: function ( m, index ) {\n\n\t\treturn this.fromArray( m.elements, index * 4 );\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\n\t\treturn array;\n\n\t},\n\n\tfromBufferAttribute: function ( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://clara.io\n * @author tschw\n */\n\nfunction Matrix3() {\n\n\tthis.elements = [\n\n\t\t1, 0, 0,\n\t\t0, 1, 0,\n\t\t0, 0, 1\n\n\t];\n\n\tif ( arguments.length > 0 ) {\n\n\t\tconsole.error( 'THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.' );\n\n\t}\n\n}\n\nObject.assign( Matrix3.prototype, {\n\n\tisMatrix3: true,\n\n\tset: function ( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 1 ] = n21; te[ 2 ] = n31;\n\t\tte[ 3 ] = n12; te[ 4 ] = n22; te[ 5 ] = n32;\n\t\tte[ 6 ] = n13; te[ 7 ] = n23; te[ 8 ] = n33;\n\n\t\treturn this;\n\n\t},\n\n\tidentity: function () {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0,\n\t\t\t0, 1, 0,\n\t\t\t0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().fromArray( this.elements );\n\n\t},\n\n\tcopy: function ( m ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ];\n\t\tte[ 3 ] = me[ 3 ]; te[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ];\n\t\tte[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ]; te[ 8 ] = me[ 8 ];\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrix4: function ( m ) {\n\n\t\tvar me = m.elements;\n\n\t\tthis.set(\n\n\t\t\tme[ 0 ], me[ 4 ], me[ 8 ],\n\t\t\tme[ 1 ], me[ 5 ], me[ 9 ],\n\t\t\tme[ 2 ], me[ 6 ], me[ 10 ]\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tapplyToBufferAttribute: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function applyToBufferAttribute( attribute ) {\n\n\t\t\tfor ( var i = 0, l = attribute.count; i < l; i ++ ) {\n\n\t\t\t\tv1.x = attribute.getX( i );\n\t\t\t\tv1.y = attribute.getY( i );\n\t\t\t\tv1.z = attribute.getZ( i );\n\n\t\t\t\tv1.applyMatrix3( this );\n\n\t\t\t\tattribute.setXYZ( i, v1.x, v1.y, v1.z );\n\n\t\t\t}\n\n\t\t\treturn attribute;\n\n\t\t};\n\n\t}(),\n\n\tmultiply: function ( m ) {\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t},\n\n\tpremultiply: function ( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t},\n\n\tmultiplyMatrices: function ( a, b ) {\n\n\t\tvar ae = a.elements;\n\t\tvar be = b.elements;\n\t\tvar te = this.elements;\n\n\t\tvar a11 = ae[ 0 ], a12 = ae[ 3 ], a13 = ae[ 6 ];\n\t\tvar a21 = ae[ 1 ], a22 = ae[ 4 ], a23 = ae[ 7 ];\n\t\tvar a31 = ae[ 2 ], a32 = ae[ 5 ], a33 = ae[ 8 ];\n\n\t\tvar b11 = be[ 0 ], b12 = be[ 3 ], b13 = be[ 6 ];\n\t\tvar b21 = be[ 1 ], b22 = be[ 4 ], b23 = be[ 7 ];\n\t\tvar b31 = be[ 2 ], b32 = be[ 5 ], b33 = be[ 8 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31;\n\t\tte[ 3 ] = a11 * b12 + a12 * b22 + a13 * b32;\n\t\tte[ 6 ] = a11 * b13 + a12 * b23 + a13 * b33;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31;\n\t\tte[ 4 ] = a21 * b12 + a22 * b22 + a23 * b32;\n\t\tte[ 7 ] = a21 * b13 + a22 * b23 + a23 * b33;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31;\n\t\tte[ 5 ] = a31 * b12 + a32 * b22 + a33 * b32;\n\t\tte[ 8 ] = a31 * b13 + a32 * b23 + a33 * b33;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\n\t\tte[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\n\t\tte[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\n\n\t\treturn this;\n\n\t},\n\n\tdeterminant: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\n\t\t\td = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\n\t\t\tg = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\n\n\t\treturn a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\n\n\t},\n\n\tgetInverse: function ( matrix, throwOnDegenerate ) {\n\n\t\tif ( matrix && matrix.isMatrix4 ) {\n\n\t\t\tconsole.error( \"THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.\" );\n\n\t\t}\n\n\t\tvar me = matrix.elements,\n\t\t\tte = this.elements,\n\n\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ],\n\t\t\tn12 = me[ 3 ], n22 = me[ 4 ], n32 = me[ 5 ],\n\t\t\tn13 = me[ 6 ], n23 = me[ 7 ], n33 = me[ 8 ],\n\n\t\t\tt11 = n33 * n22 - n32 * n23,\n\t\t\tt12 = n32 * n13 - n33 * n12,\n\t\t\tt13 = n23 * n12 - n22 * n13,\n\n\t\t\tdet = n11 * t11 + n21 * t12 + n31 * t13;\n\n\t\tif ( det === 0 ) {\n\n\t\t\tvar msg = \"THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0\";\n\n\t\t\tif ( throwOnDegenerate === true ) {\n\n\t\t\t\tthrow new Error( msg );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( msg );\n\n\t\t\t}\n\n\t\t\treturn this.identity();\n\n\t\t}\n\n\t\tvar detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n31 * n23 - n33 * n21 ) * detInv;\n\t\tte[ 2 ] = ( n32 * n21 - n31 * n22 ) * detInv;\n\n\t\tte[ 3 ] = t12 * detInv;\n\t\tte[ 4 ] = ( n33 * n11 - n31 * n13 ) * detInv;\n\t\tte[ 5 ] = ( n31 * n12 - n32 * n11 ) * detInv;\n\n\t\tte[ 6 ] = t13 * detInv;\n\t\tte[ 7 ] = ( n21 * n13 - n23 * n11 ) * detInv;\n\t\tte[ 8 ] = ( n22 * n11 - n21 * n12 ) * detInv;\n\n\t\treturn this;\n\n\t},\n\n\ttranspose: function () {\n\n\t\tvar tmp, m = this.elements;\n\n\t\ttmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\n\t\ttmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\n\t\ttmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\n\n\t\treturn this;\n\n\t},\n\n\tgetNormalMatrix: function ( matrix4 ) {\n\n\t\treturn this.setFromMatrix4( matrix4 ).getInverse( this ).transpose();\n\n\t},\n\n\ttransposeIntoArray: function ( r ) {\n\n\t\tvar m = this.elements;\n\n\t\tr[ 0 ] = m[ 0 ];\n\t\tr[ 1 ] = m[ 3 ];\n\t\tr[ 2 ] = m[ 6 ];\n\t\tr[ 3 ] = m[ 1 ];\n\t\tr[ 4 ] = m[ 4 ];\n\t\tr[ 5 ] = m[ 7 ];\n\t\tr[ 6 ] = m[ 2 ];\n\t\tr[ 7 ] = m[ 5 ];\n\t\tr[ 8 ] = m[ 8 ];\n\n\t\treturn this;\n\n\t},\n\n\tsetUvTransform: function ( tx, ty, sx, sy, rotation, cx, cy ) {\n\n\t\tvar c = Math.cos( rotation );\n\t\tvar s = Math.sin( rotation );\n\n\t\tthis.set(\n\t\t\tsx * c, sx * s, - sx * ( c * cx + s * cy ) + cx + tx,\n\t\t\t- sy * s, sy * c, - sy * ( - s * cx + c * cy ) + cy + ty,\n\t\t\t0, 0, 1\n\t\t);\n\n\t},\n\n\tscale: function ( sx, sy ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] *= sx; te[ 3 ] *= sx; te[ 6 ] *= sx;\n\t\tte[ 1 ] *= sy; te[ 4 ] *= sy; te[ 7 ] *= sy;\n\n\t\treturn this;\n\n\t},\n\n\trotate: function ( theta ) {\n\n\t\tvar c = Math.cos( theta );\n\t\tvar s = Math.sin( theta );\n\n\t\tvar te = this.elements;\n\n\t\tvar a11 = te[ 0 ], a12 = te[ 3 ], a13 = te[ 6 ];\n\t\tvar a21 = te[ 1 ], a22 = te[ 4 ], a23 = te[ 7 ];\n\n\t\tte[ 0 ] = c * a11 + s * a21;\n\t\tte[ 3 ] = c * a12 + s * a22;\n\t\tte[ 6 ] = c * a13 + s * a23;\n\n\t\tte[ 1 ] = - s * a11 + c * a21;\n\t\tte[ 4 ] = - s * a12 + c * a22;\n\t\tte[ 7 ] = - s * a13 + c * a23;\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( tx, ty ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] += tx * te[ 2 ]; te[ 3 ] += tx * te[ 5 ]; te[ 6 ] += tx * te[ 8 ];\n\t\tte[ 1 ] += ty * te[ 2 ]; te[ 4 ] += ty * te[ 5 ]; te[ 7 ] += ty * te[ 8 ];\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( matrix ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = matrix.elements;\n\n\t\tfor ( var i = 0; i < 9; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tfor ( var i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tvar te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\n\t\treturn array;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author szimek / https://github.com/szimek/\n */\n\nvar textureId = 0;\n\nfunction Texture( image, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\n\n\tObject.defineProperty( this, 'id', { value: textureId ++ } );\n\n\tthis.uuid = _Math.generateUUID();\n\n\tthis.name = '';\n\n\tthis.image = image !== undefined ? image : Texture.DEFAULT_IMAGE;\n\tthis.mipmaps = [];\n\n\tthis.mapping = mapping !== undefined ? mapping : Texture.DEFAULT_MAPPING;\n\n\tthis.wrapS = wrapS !== undefined ? wrapS : ClampToEdgeWrapping;\n\tthis.wrapT = wrapT !== undefined ? wrapT : ClampToEdgeWrapping;\n\n\tthis.magFilter = magFilter !== undefined ? magFilter : LinearFilter;\n\tthis.minFilter = minFilter !== undefined ? minFilter : LinearMipMapLinearFilter;\n\n\tthis.anisotropy = anisotropy !== undefined ? anisotropy : 1;\n\n\tthis.format = format !== undefined ? format : RGBAFormat;\n\tthis.type = type !== undefined ? type : UnsignedByteType;\n\n\tthis.offset = new Vector2( 0, 0 );\n\tthis.repeat = new Vector2( 1, 1 );\n\tthis.center = new Vector2( 0, 0 );\n\tthis.rotation = 0;\n\n\tthis.matrixAutoUpdate = true;\n\tthis.matrix = new Matrix3();\n\n\tthis.generateMipmaps = true;\n\tthis.premultiplyAlpha = false;\n\tthis.flipY = true;\n\tthis.unpackAlignment = 4;\t// valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\n\n\t// Values of encoding !== THREE.LinearEncoding only supported on map, envMap and emissiveMap.\n\t//\n\t// Also changing the encoding after already used by a Material will not automatically make the Material\n\t// update.  You need to explicitly call Material.needsUpdate to trigger it to recompile.\n\tthis.encoding = encoding !== undefined ? encoding : LinearEncoding;\n\n\tthis.version = 0;\n\tthis.onUpdate = null;\n\n}\n\nTexture.DEFAULT_IMAGE = undefined;\nTexture.DEFAULT_MAPPING = UVMapping;\n\nTexture.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Texture,\n\n\tisTexture: true,\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.image = source.image;\n\t\tthis.mipmaps = source.mipmaps.slice( 0 );\n\n\t\tthis.mapping = source.mapping;\n\n\t\tthis.wrapS = source.wrapS;\n\t\tthis.wrapT = source.wrapT;\n\n\t\tthis.magFilter = source.magFilter;\n\t\tthis.minFilter = source.minFilter;\n\n\t\tthis.anisotropy = source.anisotropy;\n\n\t\tthis.format = source.format;\n\t\tthis.type = source.type;\n\n\t\tthis.offset.copy( source.offset );\n\t\tthis.repeat.copy( source.repeat );\n\t\tthis.center.copy( source.center );\n\t\tthis.rotation = source.rotation;\n\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\t\tthis.matrix.copy( source.matrix );\n\n\t\tthis.generateMipmaps = source.generateMipmaps;\n\t\tthis.premultiplyAlpha = source.premultiplyAlpha;\n\t\tthis.flipY = source.flipY;\n\t\tthis.unpackAlignment = source.unpackAlignment;\n\t\tthis.encoding = source.encoding;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( ! isRootObject && meta.textures[ this.uuid ] !== undefined ) {\n\n\t\t\treturn meta.textures[ this.uuid ];\n\n\t\t}\n\n\t\tfunction getDataURL( image ) {\n\n\t\t\tvar canvas;\n\n\t\t\tif ( image instanceof HTMLCanvasElement ) {\n\n\t\t\t\tcanvas = image;\n\n\t\t\t} else {\n\n\t\t\t\tcanvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\t\t\t\tcanvas.width = image.width;\n\t\t\t\tcanvas.height = image.height;\n\n\t\t\t\tvar context = canvas.getContext( '2d' );\n\n\t\t\t\tif ( image instanceof ImageData ) {\n\n\t\t\t\t\tcontext.putImageData( image, 0, 0 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( canvas.width > 2048 || canvas.height > 2048 ) {\n\n\t\t\t\treturn canvas.toDataURL( 'image/jpeg', 0.6 );\n\n\t\t\t} else {\n\n\t\t\t\treturn canvas.toDataURL( 'image/png' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar output = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Texture',\n\t\t\t\tgenerator: 'Texture.toJSON'\n\t\t\t},\n\n\t\t\tuuid: this.uuid,\n\t\t\tname: this.name,\n\n\t\t\tmapping: this.mapping,\n\n\t\t\trepeat: [ this.repeat.x, this.repeat.y ],\n\t\t\toffset: [ this.offset.x, this.offset.y ],\n\t\t\tcenter: [ this.center.x, this.center.y ],\n\t\t\trotation: this.rotation,\n\n\t\t\twrap: [ this.wrapS, this.wrapT ],\n\n\t\t\tminFilter: this.minFilter,\n\t\t\tmagFilter: this.magFilter,\n\t\t\tanisotropy: this.anisotropy,\n\n\t\t\tflipY: this.flipY\n\t\t};\n\n\t\tif ( this.image !== undefined ) {\n\n\t\t\t// TODO: Move to THREE.Image\n\n\t\t\tvar image = this.image;\n\n\t\t\tif ( image.uuid === undefined ) {\n\n\t\t\t\timage.uuid = _Math.generateUUID(); // UGH\n\n\t\t\t}\n\n\t\t\tif ( ! isRootObject && meta.images[ image.uuid ] === undefined ) {\n\n\t\t\t\tmeta.images[ image.uuid ] = {\n\t\t\t\t\tuuid: image.uuid,\n\t\t\t\t\turl: getDataURL( image )\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\toutput.image = image.uuid;\n\n\t\t}\n\n\t\tif ( ! isRootObject ) {\n\n\t\t\tmeta.textures[ this.uuid ] = output;\n\n\t\t}\n\n\t\treturn output;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t},\n\n\ttransformUv: function ( uv ) {\n\n\t\tif ( this.mapping !== UVMapping ) return;\n\n\t\tuv.applyMatrix3( this.matrix );\n\n\t\tif ( uv.x < 0 || uv.x > 1 ) {\n\n\t\t\tswitch ( this.wrapS ) {\n\n\t\t\t\tcase RepeatWrapping:\n\n\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ClampToEdgeWrapping:\n\n\t\t\t\t\tuv.x = uv.x < 0 ? 0 : 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MirroredRepeatWrapping:\n\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.x ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\tuv.x = Math.ceil( uv.x ) - uv.x;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( uv.y < 0 || uv.y > 1 ) {\n\n\t\t\tswitch ( this.wrapT ) {\n\n\t\t\t\tcase RepeatWrapping:\n\n\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ClampToEdgeWrapping:\n\n\t\t\t\t\tuv.y = uv.y < 0 ? 0 : 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MirroredRepeatWrapping:\n\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.y ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\tuv.y = Math.ceil( uv.y ) - uv.y;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.flipY ) {\n\n\t\t\tuv.y = 1 - uv.y;\n\n\t\t}\n\n\t}\n\n} );\n\nObject.defineProperty( Texture.prototype, \"needsUpdate\", {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\n/**\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author philogb / http://blog.thejit.org/\n * @author mikael emtinger / http://gomo.se/\n * @author egraether / http://egraether.com/\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction Vector4( x, y, z, w ) {\n\n\tthis.x = x || 0;\n\tthis.y = y || 0;\n\tthis.z = z || 0;\n\tthis.w = ( w !== undefined ) ? w : 1;\n\n}\n\nObject.assign( Vector4.prototype, {\n\n\tisVector4: true,\n\n\tset: function ( x, y, z, w ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\t\tthis.w = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetZ: function ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetW: function ( w ) {\n\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tcase 3: this.w = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tcase 3: return this.w;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.x, this.y, this.z, this.w );\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\t\tthis.w = ( v.w !== undefined ) ? v.w : 1;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\t\tthis.w += v.w;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\t\tthis.w += s;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\t\tthis.w = a.w + b.w;\n\n\t\treturn this;\n\n\t},\n\n\taddScaledVector: function ( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\t\tthis.w += v.w * s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\t\tthis.w -= v.w;\n\n\t\treturn this;\n\n\t},\n\n\tsubScalar: function ( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\t\tthis.w -= s;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\t\tthis.w = a.w - b.w;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\t\tthis.w *= scalar;\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function ( m ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z, w = this.w;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\n\t\tthis.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t},\n\n\tsetAxisAngleFromQuaternion: function ( q ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\n\n\t\t// q is assumed to be normalized\n\n\t\tthis.w = 2 * Math.acos( q.w );\n\n\t\tvar s = Math.sqrt( 1 - q.w * q.w );\n\n\t\tif ( s < 0.0001 ) {\n\n\t\t\tthis.x = 1;\n\t\t\tthis.y = 0;\n\t\t\tthis.z = 0;\n\n\t\t} else {\n\n\t\t\tthis.x = q.x / s;\n\t\t\tthis.y = q.y / s;\n\t\t\tthis.z = q.z / s;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetAxisAngleFromRotationMatrix: function ( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tvar angle, x, y, z,\t\t// variables for result\n\t\t\tepsilon = 0.01,\t\t// margin to allow for rounding errors\n\t\t\tepsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\n\n\t\t\tte = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\tif ( ( Math.abs( m12 - m21 ) < epsilon ) &&\n\t\t     ( Math.abs( m13 - m31 ) < epsilon ) &&\n\t\t     ( Math.abs( m23 - m32 ) < epsilon ) ) {\n\n\t\t\t// singularity found\n\t\t\t// first check for identity matrix which must have +1 for all terms\n\t\t\t// in leading diagonal and zero in other terms\n\n\t\t\tif ( ( Math.abs( m12 + m21 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m13 + m31 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m23 + m32 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\n\n\t\t\t\t// this singularity is identity matrix so angle = 0\n\n\t\t\t\tthis.set( 1, 0, 0, 0 );\n\n\t\t\t\treturn this; // zero angle, arbitrary axis\n\n\t\t\t}\n\n\t\t\t// otherwise this singularity is angle = 180\n\n\t\t\tangle = Math.PI;\n\n\t\t\tvar xx = ( m11 + 1 ) / 2;\n\t\t\tvar yy = ( m22 + 1 ) / 2;\n\t\t\tvar zz = ( m33 + 1 ) / 2;\n\t\t\tvar xy = ( m12 + m21 ) / 4;\n\t\t\tvar xz = ( m13 + m31 ) / 4;\n\t\t\tvar yz = ( m23 + m32 ) / 4;\n\n\t\t\tif ( ( xx > yy ) && ( xx > zz ) ) {\n\n\t\t\t\t// m11 is the largest diagonal term\n\n\t\t\t\tif ( xx < epsilon ) {\n\n\t\t\t\t\tx = 0;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tx = Math.sqrt( xx );\n\t\t\t\t\ty = xy / x;\n\t\t\t\t\tz = xz / x;\n\n\t\t\t\t}\n\n\t\t\t} else if ( yy > zz ) {\n\n\t\t\t\t// m22 is the largest diagonal term\n\n\t\t\t\tif ( yy < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ty = Math.sqrt( yy );\n\t\t\t\t\tx = xy / y;\n\t\t\t\t\tz = yz / y;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// m33 is the largest diagonal term so base result on this\n\n\t\t\t\tif ( zz < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tz = Math.sqrt( zz );\n\t\t\t\t\tx = xz / z;\n\t\t\t\t\ty = yz / z;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.set( x, y, z, angle );\n\n\t\t\treturn this; // return 180 deg rotation\n\n\t\t}\n\n\t\t// as we have reached here there are no singularities so we can handle normally\n\n\t\tvar s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 ) +\n\t\t                   ( m13 - m31 ) * ( m13 - m31 ) +\n\t\t                   ( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\n\n\t\tif ( Math.abs( s ) < 0.001 ) s = 1;\n\n\t\t// prevent divide by zero, should not happen if matrix is orthogonal and should be\n\t\t// caught by singularity test above, but I've left it in just in case\n\n\t\tthis.x = ( m32 - m23 ) / s;\n\t\tthis.y = ( m13 - m31 ) / s;\n\t\tthis.z = ( m21 - m12 ) / s;\n\t\tthis.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\n\n\t\treturn this;\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\t\tthis.w = Math.min( this.w, v.w );\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\t\tthis.w = Math.max( this.w, v.w );\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\t\tthis.w = Math.max( min.w, Math.min( max.w, this.w ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampScalar: function () {\n\n\t\tvar min, max;\n\n\t\treturn function clampScalar( minVal, maxVal ) {\n\n\t\t\tif ( min === undefined ) {\n\n\t\t\t\tmin = new Vector4();\n\t\t\t\tmax = new Vector4();\n\n\t\t\t}\n\n\t\t\tmin.set( minVal, minVal, minVal, minVal );\n\t\t\tmax.set( maxVal, maxVal, maxVal, maxVal );\n\n\t\t\treturn this.clamp( min, max );\n\n\t\t};\n\n\t}(),\n\n\tclampLength: function ( min, max ) {\n\n\t\tvar length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t},\n\n\tfloor: function () {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\t\tthis.w = Math.floor( this.w );\n\n\t\treturn this;\n\n\t},\n\n\tceil: function () {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\t\tthis.w = Math.ceil( this.w );\n\n\t\treturn this;\n\n\t},\n\n\tround: function () {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\t\tthis.w = Math.round( this.w );\n\n\t\treturn this;\n\n\t},\n\n\troundToZero: function () {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\t\tthis.w = ( this.w < 0 ) ? Math.ceil( this.w ) : Math.floor( this.w );\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\t\tthis.w = - this.w;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\n\n\t},\n\n\tmanhattanLength: function () {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t},\n\n\tsetLength: function ( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\t\tthis.w += ( v.w - this.w ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tlerpVectors: function ( v1, v2, alpha ) {\n\n\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\t\tthis.w = array[ offset + 3 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\t\tarray[ offset + 3 ] = this.w;\n\n\t\treturn array;\n\n\t},\n\n\tfromBufferAttribute: function ( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\t\tthis.w = attribute.getW( index );\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author szimek / https://github.com/szimek/\n * @author alteredq / http://alteredqualia.com/\n * @author Marius Kintel / https://github.com/kintel\n */\n\n/*\n In options, we can specify:\n * Texture parameters for an auto-generated target texture\n * depthBuffer/stencilBuffer: Booleans to indicate if we should generate these buffers\n*/\nfunction WebGLRenderTarget( width, height, options ) {\n\n\tthis.uuid = _Math.generateUUID();\n\n\tthis.width = width;\n\tthis.height = height;\n\n\tthis.scissor = new Vector4( 0, 0, width, height );\n\tthis.scissorTest = false;\n\n\tthis.viewport = new Vector4( 0, 0, width, height );\n\n\toptions = options || {};\n\n\tif ( options.minFilter === undefined ) options.minFilter = LinearFilter;\n\n\tthis.texture = new Texture( undefined, undefined, options.wrapS, options.wrapT, options.magFilter, options.minFilter, options.format, options.type, options.anisotropy, options.encoding );\n\n\tthis.depthBuffer = options.depthBuffer !== undefined ? options.depthBuffer : true;\n\tthis.stencilBuffer = options.stencilBuffer !== undefined ? options.stencilBuffer : true;\n\tthis.depthTexture = options.depthTexture !== undefined ? options.depthTexture : null;\n\n}\n\nWebGLRenderTarget.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: WebGLRenderTarget,\n\n\tisWebGLRenderTarget: true,\n\n\tsetSize: function ( width, height ) {\n\n\t\tif ( this.width !== width || this.height !== height ) {\n\n\t\t\tthis.width = width;\n\t\t\tthis.height = height;\n\n\t\t\tthis.dispose();\n\n\t\t}\n\n\t\tthis.viewport.set( 0, 0, width, height );\n\t\tthis.scissor.set( 0, 0, width, height );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.width = source.width;\n\t\tthis.height = source.height;\n\n\t\tthis.viewport.copy( source.viewport );\n\n\t\tthis.texture = source.texture.clone();\n\n\t\tthis.depthBuffer = source.depthBuffer;\n\t\tthis.stencilBuffer = source.stencilBuffer;\n\t\tthis.depthTexture = source.depthTexture;\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction DataTexture( data, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\n\n\tTexture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\tthis.image = { data: data, width: width, height: height };\n\n\tthis.magFilter = magFilter !== undefined ? magFilter : NearestFilter;\n\tthis.minFilter = minFilter !== undefined ? minFilter : NearestFilter;\n\n\tthis.generateMipmaps = false;\n\tthis.flipY = false;\n\tthis.unpackAlignment = 1;\n\n}\n\nDataTexture.prototype = Object.create( Texture.prototype );\nDataTexture.prototype.constructor = DataTexture;\n\nDataTexture.prototype.isDataTexture = true;\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction CubeTexture( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\n\n\timages = images !== undefined ? images : [];\n\tmapping = mapping !== undefined ? mapping : CubeReflectionMapping;\n\n\tTexture.call( this, images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\tthis.flipY = false;\n\n}\n\nCubeTexture.prototype = Object.create( Texture.prototype );\nCubeTexture.prototype.constructor = CubeTexture;\n\nCubeTexture.prototype.isCubeTexture = true;\n\nObject.defineProperty( CubeTexture.prototype, 'images', {\n\n\tget: function () {\n\n\t\treturn this.image;\n\n\t},\n\n\tset: function ( value ) {\n\n\t\tthis.image = value;\n\n\t}\n\n} );\n\n/**\n * @author tschw\n *\n * Uniforms of a program.\n * Those form a tree structure with a special top-level container for the root,\n * which you get by calling 'new WebGLUniforms( gl, program, renderer )'.\n *\n *\n * Properties of inner nodes including the top-level container:\n *\n * .seq - array of nested uniforms\n * .map - nested uniforms by name\n *\n *\n * Methods of all nodes except the top-level container:\n *\n * .setValue( gl, value, [renderer] )\n *\n * \t\tuploads a uniform value(s)\n *  \tthe 'renderer' parameter is needed for sampler uniforms\n *\n *\n * Static methods of the top-level container (renderer factorizations):\n *\n * .upload( gl, seq, values, renderer )\n *\n * \t\tsets uniforms in 'seq' to 'values[id].value'\n *\n * .seqWithValue( seq, values ) : filteredSeq\n *\n * \t\tfilters 'seq' entries with corresponding entry in values\n *\n *\n * Methods of the top-level container (renderer factorizations):\n *\n * .setValue( gl, name, value )\n *\n * \t\tsets uniform with  name 'name' to 'value'\n *\n * .set( gl, obj, prop )\n *\n * \t\tsets uniform from object and property with same name than uniform\n *\n * .setOptional( gl, obj, prop )\n *\n * \t\tlike .set for an optional property of the object\n *\n */\n\nvar emptyTexture = new Texture();\nvar emptyCubeTexture = new CubeTexture();\n\n// --- Base for inner nodes (including the root) ---\n\nfunction UniformContainer() {\n\n\tthis.seq = [];\n\tthis.map = {};\n\n}\n\n// --- Utilities ---\n\n// Array Caches (provide typed arrays for temporary by size)\n\nvar arrayCacheF32 = [];\nvar arrayCacheI32 = [];\n\n// Float32Array caches used for uploading Matrix uniforms\n\nvar mat4array = new Float32Array( 16 );\nvar mat3array = new Float32Array( 9 );\n\n// Flattening for arrays of vectors and matrices\n\nfunction flatten( array, nBlocks, blockSize ) {\n\n\tvar firstElem = array[ 0 ];\n\n\tif ( firstElem <= 0 || firstElem > 0 ) return array;\n\t// unoptimized: ! isNaN( firstElem )\n\t// see http://jacksondunstan.com/articles/983\n\n\tvar n = nBlocks * blockSize,\n\t\tr = arrayCacheF32[ n ];\n\n\tif ( r === undefined ) {\n\n\t\tr = new Float32Array( n );\n\t\tarrayCacheF32[ n ] = r;\n\n\t}\n\n\tif ( nBlocks !== 0 ) {\n\n\t\tfirstElem.toArray( r, 0 );\n\n\t\tfor ( var i = 1, offset = 0; i !== nBlocks; ++ i ) {\n\n\t\t\toffset += blockSize;\n\t\t\tarray[ i ].toArray( r, offset );\n\n\t\t}\n\n\t}\n\n\treturn r;\n\n}\n\n// Texture unit allocation\n\nfunction allocTexUnits( renderer, n ) {\n\n\tvar r = arrayCacheI32[ n ];\n\n\tif ( r === undefined ) {\n\n\t\tr = new Int32Array( n );\n\t\tarrayCacheI32[ n ] = r;\n\n\t}\n\n\tfor ( var i = 0; i !== n; ++ i )\n\t\tr[ i ] = renderer.allocTextureUnit();\n\n\treturn r;\n\n}\n\n// --- Setters ---\n\n// Note: Defining these methods externally, because they come in a bunch\n// and this way their names minify.\n\n// Single scalar\n\nfunction setValue1f( gl, v ) {\n\n\tgl.uniform1f( this.addr, v );\n\n}\n\nfunction setValue1i( gl, v ) {\n\n\tgl.uniform1i( this.addr, v );\n\n}\n\n// Single float vector (from flat array or THREE.VectorN)\n\nfunction setValue2fv( gl, v ) {\n\n\tif ( v.x === undefined ) {\n\n\t\tgl.uniform2fv( this.addr, v );\n\n\t} else {\n\n\t\tgl.uniform2f( this.addr, v.x, v.y );\n\n\t}\n\n}\n\nfunction setValue3fv( gl, v ) {\n\n\tif ( v.x !== undefined ) {\n\n\t\tgl.uniform3f( this.addr, v.x, v.y, v.z );\n\n\t} else if ( v.r !== undefined ) {\n\n\t\tgl.uniform3f( this.addr, v.r, v.g, v.b );\n\n\t} else {\n\n\t\tgl.uniform3fv( this.addr, v );\n\n\t}\n\n}\n\nfunction setValue4fv( gl, v ) {\n\n\tif ( v.x === undefined ) {\n\n\t\tgl.uniform4fv( this.addr, v );\n\n\t} else {\n\n\t\t gl.uniform4f( this.addr, v.x, v.y, v.z, v.w );\n\n\t}\n\n}\n\n// Single matrix (from flat array or MatrixN)\n\nfunction setValue2fm( gl, v ) {\n\n\tgl.uniformMatrix2fv( this.addr, false, v.elements || v );\n\n}\n\nfunction setValue3fm( gl, v ) {\n\n\tif ( v.elements === undefined ) {\n\n\t\tgl.uniformMatrix3fv( this.addr, false, v );\n\n\t} else {\n\n\t\tmat3array.set( v.elements );\n\t\tgl.uniformMatrix3fv( this.addr, false, mat3array );\n\n\t}\n\n}\n\nfunction setValue4fm( gl, v ) {\n\n\tif ( v.elements === undefined ) {\n\n\t\tgl.uniformMatrix4fv( this.addr, false, v );\n\n\t} else {\n\n\t\tmat4array.set( v.elements );\n\t\tgl.uniformMatrix4fv( this.addr, false, mat4array );\n\n\t}\n\n}\n\n// Single texture (2D / Cube)\n\nfunction setValueT1( gl, v, renderer ) {\n\n\tvar unit = renderer.allocTextureUnit();\n\tgl.uniform1i( this.addr, unit );\n\trenderer.setTexture2D( v || emptyTexture, unit );\n\n}\n\nfunction setValueT6( gl, v, renderer ) {\n\n\tvar unit = renderer.allocTextureUnit();\n\tgl.uniform1i( this.addr, unit );\n\trenderer.setTextureCube( v || emptyCubeTexture, unit );\n\n}\n\n// Integer / Boolean vectors or arrays thereof (always flat arrays)\n\nfunction setValue2iv( gl, v ) {\n\n\tgl.uniform2iv( this.addr, v );\n\n}\n\nfunction setValue3iv( gl, v ) {\n\n\tgl.uniform3iv( this.addr, v );\n\n}\n\nfunction setValue4iv( gl, v ) {\n\n\tgl.uniform4iv( this.addr, v );\n\n}\n\n// Helper to pick the right setter for the singular case\n\nfunction getSingularSetter( type ) {\n\n\tswitch ( type ) {\n\n\t\tcase 0x1406: return setValue1f; // FLOAT\n\t\tcase 0x8b50: return setValue2fv; // _VEC2\n\t\tcase 0x8b51: return setValue3fv; // _VEC3\n\t\tcase 0x8b52: return setValue4fv; // _VEC4\n\n\t\tcase 0x8b5a: return setValue2fm; // _MAT2\n\t\tcase 0x8b5b: return setValue3fm; // _MAT3\n\t\tcase 0x8b5c: return setValue4fm; // _MAT4\n\n\t\tcase 0x8b5e: case 0x8d66: return setValueT1; // SAMPLER_2D, SAMPLER_EXTERNAL_OES\n\t\tcase 0x8b60: return setValueT6; // SAMPLER_CUBE\n\n\t\tcase 0x1404: case 0x8b56: return setValue1i; // INT, BOOL\n\t\tcase 0x8b53: case 0x8b57: return setValue2iv; // _VEC2\n\t\tcase 0x8b54: case 0x8b58: return setValue3iv; // _VEC3\n\t\tcase 0x8b55: case 0x8b59: return setValue4iv; // _VEC4\n\n\t}\n\n}\n\n// Array of scalars\n\nfunction setValue1fv( gl, v ) {\n\n\tgl.uniform1fv( this.addr, v );\n\n}\nfunction setValue1iv( gl, v ) {\n\n\tgl.uniform1iv( this.addr, v );\n\n}\n\n// Array of vectors (flat or from THREE classes)\n\nfunction setValueV2a( gl, v ) {\n\n\tgl.uniform2fv( this.addr, flatten( v, this.size, 2 ) );\n\n}\n\nfunction setValueV3a( gl, v ) {\n\n\tgl.uniform3fv( this.addr, flatten( v, this.size, 3 ) );\n\n}\n\nfunction setValueV4a( gl, v ) {\n\n\tgl.uniform4fv( this.addr, flatten( v, this.size, 4 ) );\n\n}\n\n// Array of matrices (flat or from THREE clases)\n\nfunction setValueM2a( gl, v ) {\n\n\tgl.uniformMatrix2fv( this.addr, false, flatten( v, this.size, 4 ) );\n\n}\n\nfunction setValueM3a( gl, v ) {\n\n\tgl.uniformMatrix3fv( this.addr, false, flatten( v, this.size, 9 ) );\n\n}\n\nfunction setValueM4a( gl, v ) {\n\n\tgl.uniformMatrix4fv( this.addr, false, flatten( v, this.size, 16 ) );\n\n}\n\n// Array of textures (2D / Cube)\n\nfunction setValueT1a( gl, v, renderer ) {\n\n\tvar n = v.length,\n\t\tunits = allocTexUnits( renderer, n );\n\n\tgl.uniform1iv( this.addr, units );\n\n\tfor ( var i = 0; i !== n; ++ i ) {\n\n\t\trenderer.setTexture2D( v[ i ] || emptyTexture, units[ i ] );\n\n\t}\n\n}\n\nfunction setValueT6a( gl, v, renderer ) {\n\n\tvar n = v.length,\n\t\tunits = allocTexUnits( renderer, n );\n\n\tgl.uniform1iv( this.addr, units );\n\n\tfor ( var i = 0; i !== n; ++ i ) {\n\n\t\trenderer.setTextureCube( v[ i ] || emptyCubeTexture, units[ i ] );\n\n\t}\n\n}\n\n// Helper to pick the right setter for a pure (bottom-level) array\n\nfunction getPureArraySetter( type ) {\n\n\tswitch ( type ) {\n\n\t\tcase 0x1406: return setValue1fv; // FLOAT\n\t\tcase 0x8b50: return setValueV2a; // _VEC2\n\t\tcase 0x8b51: return setValueV3a; // _VEC3\n\t\tcase 0x8b52: return setValueV4a; // _VEC4\n\n\t\tcase 0x8b5a: return setValueM2a; // _MAT2\n\t\tcase 0x8b5b: return setValueM3a; // _MAT3\n\t\tcase 0x8b5c: return setValueM4a; // _MAT4\n\n\t\tcase 0x8b5e: return setValueT1a; // SAMPLER_2D\n\t\tcase 0x8b60: return setValueT6a; // SAMPLER_CUBE\n\n\t\tcase 0x1404: case 0x8b56: return setValue1iv; // INT, BOOL\n\t\tcase 0x8b53: case 0x8b57: return setValue2iv; // _VEC2\n\t\tcase 0x8b54: case 0x8b58: return setValue3iv; // _VEC3\n\t\tcase 0x8b55: case 0x8b59: return setValue4iv; // _VEC4\n\n\t}\n\n}\n\n// --- Uniform Classes ---\n\nfunction SingleUniform( id, activeInfo, addr ) {\n\n\tthis.id = id;\n\tthis.addr = addr;\n\tthis.setValue = getSingularSetter( activeInfo.type );\n\n\t// this.path = activeInfo.name; // DEBUG\n\n}\n\nfunction PureArrayUniform( id, activeInfo, addr ) {\n\n\tthis.id = id;\n\tthis.addr = addr;\n\tthis.size = activeInfo.size;\n\tthis.setValue = getPureArraySetter( activeInfo.type );\n\n\t// this.path = activeInfo.name; // DEBUG\n\n}\n\nfunction StructuredUniform( id ) {\n\n\tthis.id = id;\n\n\tUniformContainer.call( this ); // mix-in\n\n}\n\nStructuredUniform.prototype.setValue = function ( gl, value ) {\n\n\t// Note: Don't need an extra 'renderer' parameter, since samplers\n\t// are not allowed in structured uniforms.\n\n\tvar seq = this.seq;\n\n\tfor ( var i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\tvar u = seq[ i ];\n\t\tu.setValue( gl, value[ u.id ] );\n\n\t}\n\n};\n\n// --- Top-level ---\n\n// Parser - builds up the property tree from the path strings\n\nvar RePathPart = /([\\w\\d_]+)(\\])?(\\[|\\.)?/g;\n\n// extracts\n// \t- the identifier (member name or array index)\n//  - followed by an optional right bracket (found when array index)\n//  - followed by an optional left bracket or dot (type of subscript)\n//\n// Note: These portions can be read in a non-overlapping fashion and\n// allow straightforward parsing of the hierarchy that WebGL encodes\n// in the uniform names.\n\nfunction addUniform( container, uniformObject ) {\n\n\tcontainer.seq.push( uniformObject );\n\tcontainer.map[ uniformObject.id ] = uniformObject;\n\n}\n\nfunction parseUniform( activeInfo, addr, container ) {\n\n\tvar path = activeInfo.name,\n\t\tpathLength = path.length;\n\n\t// reset RegExp object, because of the early exit of a previous run\n\tRePathPart.lastIndex = 0;\n\n\tfor ( ; ; ) {\n\n\t\tvar match = RePathPart.exec( path ),\n\t\t\tmatchEnd = RePathPart.lastIndex,\n\n\t\t\tid = match[ 1 ],\n\t\t\tidIsIndex = match[ 2 ] === ']',\n\t\t\tsubscript = match[ 3 ];\n\n\t\tif ( idIsIndex ) id = id | 0; // convert to integer\n\n\t\tif ( subscript === undefined || subscript === '[' && matchEnd + 2 === pathLength ) {\n\n\t\t\t// bare name or \"pure\" bottom-level array \"[0]\" suffix\n\n\t\t\taddUniform( container, subscript === undefined ?\n\t\t\t\tnew SingleUniform( id, activeInfo, addr ) :\n\t\t\t\tnew PureArrayUniform( id, activeInfo, addr ) );\n\n\t\t\tbreak;\n\n\t\t} else {\n\n\t\t\t// step into inner node / create it in case it doesn't exist\n\n\t\t\tvar map = container.map, next = map[ id ];\n\n\t\t\tif ( next === undefined ) {\n\n\t\t\t\tnext = new StructuredUniform( id );\n\t\t\t\taddUniform( container, next );\n\n\t\t\t}\n\n\t\t\tcontainer = next;\n\n\t\t}\n\n\t}\n\n}\n\n// Root Container\n\nfunction WebGLUniforms( gl, program, renderer ) {\n\n\tUniformContainer.call( this );\n\n\tthis.renderer = renderer;\n\n\tvar n = gl.getProgramParameter( program, gl.ACTIVE_UNIFORMS );\n\n\tfor ( var i = 0; i < n; ++ i ) {\n\n\t\tvar info = gl.getActiveUniform( program, i ),\n\t\t\tpath = info.name,\n\t\t\taddr = gl.getUniformLocation( program, path );\n\n\t\tparseUniform( info, addr, this );\n\n\t}\n\n}\n\nWebGLUniforms.prototype.setValue = function ( gl, name, value ) {\n\n\tvar u = this.map[ name ];\n\n\tif ( u !== undefined ) u.setValue( gl, value, this.renderer );\n\n};\n\nWebGLUniforms.prototype.setOptional = function ( gl, object, name ) {\n\n\tvar v = object[ name ];\n\n\tif ( v !== undefined ) this.setValue( gl, name, v );\n\n};\n\n\n// Static interface\n\nWebGLUniforms.upload = function ( gl, seq, values, renderer ) {\n\n\tfor ( var i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\tvar u = seq[ i ],\n\t\t\tv = values[ u.id ];\n\n\t\tif ( v.needsUpdate !== false ) {\n\n\t\t\t// note: always updating when .needsUpdate is undefined\n\t\t\tu.setValue( gl, v.value, renderer );\n\n\t\t}\n\n\t}\n\n};\n\nWebGLUniforms.seqWithValue = function ( seq, values ) {\n\n\tvar r = [];\n\n\tfor ( var i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\tvar u = seq[ i ];\n\t\tif ( u.id in values ) r.push( u );\n\n\t}\n\n\treturn r;\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar ColorKeywords = { 'aliceblue': 0xF0F8FF, 'antiquewhite': 0xFAEBD7, 'aqua': 0x00FFFF, 'aquamarine': 0x7FFFD4, 'azure': 0xF0FFFF,\n\t'beige': 0xF5F5DC, 'bisque': 0xFFE4C4, 'black': 0x000000, 'blanchedalmond': 0xFFEBCD, 'blue': 0x0000FF, 'blueviolet': 0x8A2BE2,\n\t'brown': 0xA52A2A, 'burlywood': 0xDEB887, 'cadetblue': 0x5F9EA0, 'chartreuse': 0x7FFF00, 'chocolate': 0xD2691E, 'coral': 0xFF7F50,\n\t'cornflowerblue': 0x6495ED, 'cornsilk': 0xFFF8DC, 'crimson': 0xDC143C, 'cyan': 0x00FFFF, 'darkblue': 0x00008B, 'darkcyan': 0x008B8B,\n\t'darkgoldenrod': 0xB8860B, 'darkgray': 0xA9A9A9, 'darkgreen': 0x006400, 'darkgrey': 0xA9A9A9, 'darkkhaki': 0xBDB76B, 'darkmagenta': 0x8B008B,\n\t'darkolivegreen': 0x556B2F, 'darkorange': 0xFF8C00, 'darkorchid': 0x9932CC, 'darkred': 0x8B0000, 'darksalmon': 0xE9967A, 'darkseagreen': 0x8FBC8F,\n\t'darkslateblue': 0x483D8B, 'darkslategray': 0x2F4F4F, 'darkslategrey': 0x2F4F4F, 'darkturquoise': 0x00CED1, 'darkviolet': 0x9400D3,\n\t'deeppink': 0xFF1493, 'deepskyblue': 0x00BFFF, 'dimgray': 0x696969, 'dimgrey': 0x696969, 'dodgerblue': 0x1E90FF, 'firebrick': 0xB22222,\n\t'floralwhite': 0xFFFAF0, 'forestgreen': 0x228B22, 'fuchsia': 0xFF00FF, 'gainsboro': 0xDCDCDC, 'ghostwhite': 0xF8F8FF, 'gold': 0xFFD700,\n\t'goldenrod': 0xDAA520, 'gray': 0x808080, 'green': 0x008000, 'greenyellow': 0xADFF2F, 'grey': 0x808080, 'honeydew': 0xF0FFF0, 'hotpink': 0xFF69B4,\n\t'indianred': 0xCD5C5C, 'indigo': 0x4B0082, 'ivory': 0xFFFFF0, 'khaki': 0xF0E68C, 'lavender': 0xE6E6FA, 'lavenderblush': 0xFFF0F5, 'lawngreen': 0x7CFC00,\n\t'lemonchiffon': 0xFFFACD, 'lightblue': 0xADD8E6, 'lightcoral': 0xF08080, 'lightcyan': 0xE0FFFF, 'lightgoldenrodyellow': 0xFAFAD2, 'lightgray': 0xD3D3D3,\n\t'lightgreen': 0x90EE90, 'lightgrey': 0xD3D3D3, 'lightpink': 0xFFB6C1, 'lightsalmon': 0xFFA07A, 'lightseagreen': 0x20B2AA, 'lightskyblue': 0x87CEFA,\n\t'lightslategray': 0x778899, 'lightslategrey': 0x778899, 'lightsteelblue': 0xB0C4DE, 'lightyellow': 0xFFFFE0, 'lime': 0x00FF00, 'limegreen': 0x32CD32,\n\t'linen': 0xFAF0E6, 'magenta': 0xFF00FF, 'maroon': 0x800000, 'mediumaquamarine': 0x66CDAA, 'mediumblue': 0x0000CD, 'mediumorchid': 0xBA55D3,\n\t'mediumpurple': 0x9370DB, 'mediumseagreen': 0x3CB371, 'mediumslateblue': 0x7B68EE, 'mediumspringgreen': 0x00FA9A, 'mediumturquoise': 0x48D1CC,\n\t'mediumvioletred': 0xC71585, 'midnightblue': 0x191970, 'mintcream': 0xF5FFFA, 'mistyrose': 0xFFE4E1, 'moccasin': 0xFFE4B5, 'navajowhite': 0xFFDEAD,\n\t'navy': 0x000080, 'oldlace': 0xFDF5E6, 'olive': 0x808000, 'olivedrab': 0x6B8E23, 'orange': 0xFFA500, 'orangered': 0xFF4500, 'orchid': 0xDA70D6,\n\t'palegoldenrod': 0xEEE8AA, 'palegreen': 0x98FB98, 'paleturquoise': 0xAFEEEE, 'palevioletred': 0xDB7093, 'papayawhip': 0xFFEFD5, 'peachpuff': 0xFFDAB9,\n\t'peru': 0xCD853F, 'pink': 0xFFC0CB, 'plum': 0xDDA0DD, 'powderblue': 0xB0E0E6, 'purple': 0x800080, 'rebeccapurple': 0x663399, 'red': 0xFF0000, 'rosybrown': 0xBC8F8F,\n\t'royalblue': 0x4169E1, 'saddlebrown': 0x8B4513, 'salmon': 0xFA8072, 'sandybrown': 0xF4A460, 'seagreen': 0x2E8B57, 'seashell': 0xFFF5EE,\n\t'sienna': 0xA0522D, 'silver': 0xC0C0C0, 'skyblue': 0x87CEEB, 'slateblue': 0x6A5ACD, 'slategray': 0x708090, 'slategrey': 0x708090, 'snow': 0xFFFAFA,\n\t'springgreen': 0x00FF7F, 'steelblue': 0x4682B4, 'tan': 0xD2B48C, 'teal': 0x008080, 'thistle': 0xD8BFD8, 'tomato': 0xFF6347, 'turquoise': 0x40E0D0,\n\t'violet': 0xEE82EE, 'wheat': 0xF5DEB3, 'white': 0xFFFFFF, 'whitesmoke': 0xF5F5F5, 'yellow': 0xFFFF00, 'yellowgreen': 0x9ACD32 };\n\nfunction Color( r, g, b ) {\n\n\tif ( g === undefined && b === undefined ) {\n\n\t\t// r is THREE.Color, hex or string\n\t\treturn this.set( r );\n\n\t}\n\n\treturn this.setRGB( r, g, b );\n\n}\n\nObject.assign( Color.prototype, {\n\n\tisColor: true,\n\n\tr: 1, g: 1, b: 1,\n\n\tset: function ( value ) {\n\n\t\tif ( value && value.isColor ) {\n\n\t\t\tthis.copy( value );\n\n\t\t} else if ( typeof value === 'number' ) {\n\n\t\t\tthis.setHex( value );\n\n\t\t} else if ( typeof value === 'string' ) {\n\n\t\t\tthis.setStyle( value );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.r = scalar;\n\t\tthis.g = scalar;\n\t\tthis.b = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetHex: function ( hex ) {\n\n\t\thex = Math.floor( hex );\n\n\t\tthis.r = ( hex >> 16 & 255 ) / 255;\n\t\tthis.g = ( hex >> 8 & 255 ) / 255;\n\t\tthis.b = ( hex & 255 ) / 255;\n\n\t\treturn this;\n\n\t},\n\n\tsetRGB: function ( r, g, b ) {\n\n\t\tthis.r = r;\n\t\tthis.g = g;\n\t\tthis.b = b;\n\n\t\treturn this;\n\n\t},\n\n\tsetHSL: function () {\n\n\t\tfunction hue2rgb( p, q, t ) {\n\n\t\t\tif ( t < 0 ) t += 1;\n\t\t\tif ( t > 1 ) t -= 1;\n\t\t\tif ( t < 1 / 6 ) return p + ( q - p ) * 6 * t;\n\t\t\tif ( t < 1 / 2 ) return q;\n\t\t\tif ( t < 2 / 3 ) return p + ( q - p ) * 6 * ( 2 / 3 - t );\n\t\t\treturn p;\n\n\t\t}\n\n\t\treturn function setHSL( h, s, l ) {\n\n\t\t\t// h,s,l ranges are in 0.0 - 1.0\n\t\t\th = _Math.euclideanModulo( h, 1 );\n\t\t\ts = _Math.clamp( s, 0, 1 );\n\t\t\tl = _Math.clamp( l, 0, 1 );\n\n\t\t\tif ( s === 0 ) {\n\n\t\t\t\tthis.r = this.g = this.b = l;\n\n\t\t\t} else {\n\n\t\t\t\tvar p = l <= 0.5 ? l * ( 1 + s ) : l + s - ( l * s );\n\t\t\t\tvar q = ( 2 * l ) - p;\n\n\t\t\t\tthis.r = hue2rgb( q, p, h + 1 / 3 );\n\t\t\t\tthis.g = hue2rgb( q, p, h );\n\t\t\t\tthis.b = hue2rgb( q, p, h - 1 / 3 );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tsetStyle: function ( style ) {\n\n\t\tfunction handleAlpha( string ) {\n\n\t\t\tif ( string === undefined ) return;\n\n\t\t\tif ( parseFloat( string ) < 1 ) {\n\n\t\t\t\tconsole.warn( 'THREE.Color: Alpha component of ' + style + ' will be ignored.' );\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tvar m;\n\n\t\tif ( m = /^((?:rgb|hsl)a?)\\(\\s*([^\\)]*)\\)/.exec( style ) ) {\n\n\t\t\t// rgb / hsl\n\n\t\t\tvar color;\n\t\t\tvar name = m[ 1 ];\n\t\t\tvar components = m[ 2 ];\n\n\t\t\tswitch ( name ) {\n\n\t\t\t\tcase 'rgb':\n\t\t\t\tcase 'rgba':\n\n\t\t\t\t\tif ( color = /^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(255,0,0) rgba(255,0,0,0.5)\n\t\t\t\t\t\tthis.r = Math.min( 255, parseInt( color[ 1 ], 10 ) ) / 255;\n\t\t\t\t\t\tthis.g = Math.min( 255, parseInt( color[ 2 ], 10 ) ) / 255;\n\t\t\t\t\t\tthis.b = Math.min( 255, parseInt( color[ 3 ], 10 ) ) / 255;\n\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\n\n\t\t\t\t\t\treturn this;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( color = /^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(100%,0%,0%) rgba(100%,0%,0%,0.5)\n\t\t\t\t\t\tthis.r = Math.min( 100, parseInt( color[ 1 ], 10 ) ) / 100;\n\t\t\t\t\t\tthis.g = Math.min( 100, parseInt( color[ 2 ], 10 ) ) / 100;\n\t\t\t\t\t\tthis.b = Math.min( 100, parseInt( color[ 3 ], 10 ) ) / 100;\n\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\n\n\t\t\t\t\t\treturn this;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'hsl':\n\t\t\t\tcase 'hsla':\n\n\t\t\t\t\tif ( color = /^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// hsl(120,50%,50%) hsla(120,50%,50%,0.5)\n\t\t\t\t\t\tvar h = parseFloat( color[ 1 ] ) / 360;\n\t\t\t\t\t\tvar s = parseInt( color[ 2 ], 10 ) / 100;\n\t\t\t\t\t\tvar l = parseInt( color[ 3 ], 10 ) / 100;\n\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\n\n\t\t\t\t\t\treturn this.setHSL( h, s, l );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t} else if ( m = /^\\#([A-Fa-f0-9]+)$/.exec( style ) ) {\n\n\t\t\t// hex color\n\n\t\t\tvar hex = m[ 1 ];\n\t\t\tvar size = hex.length;\n\n\t\t\tif ( size === 3 ) {\n\n\t\t\t\t// #ff0\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 0 ), 16 ) / 255;\n\t\t\t\tthis.g = parseInt( hex.charAt( 1 ) + hex.charAt( 1 ), 16 ) / 255;\n\t\t\t\tthis.b = parseInt( hex.charAt( 2 ) + hex.charAt( 2 ), 16 ) / 255;\n\n\t\t\t\treturn this;\n\n\t\t\t} else if ( size === 6 ) {\n\n\t\t\t\t// #ff0000\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 1 ), 16 ) / 255;\n\t\t\t\tthis.g = parseInt( hex.charAt( 2 ) + hex.charAt( 3 ), 16 ) / 255;\n\t\t\t\tthis.b = parseInt( hex.charAt( 4 ) + hex.charAt( 5 ), 16 ) / 255;\n\n\t\t\t\treturn this;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( style && style.length > 0 ) {\n\n\t\t\t// color keywords\n\t\t\tvar hex = ColorKeywords[ style ];\n\n\t\t\tif ( hex !== undefined ) {\n\n\t\t\t\t// red\n\t\t\t\tthis.setHex( hex );\n\n\t\t\t} else {\n\n\t\t\t\t// unknown color\n\t\t\t\tconsole.warn( 'THREE.Color: Unknown color ' + style );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.r, this.g, this.b );\n\n\t},\n\n\tcopy: function ( color ) {\n\n\t\tthis.r = color.r;\n\t\tthis.g = color.g;\n\t\tthis.b = color.b;\n\n\t\treturn this;\n\n\t},\n\n\tcopyGammaToLinear: function ( color, gammaFactor ) {\n\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\n\n\t\tthis.r = Math.pow( color.r, gammaFactor );\n\t\tthis.g = Math.pow( color.g, gammaFactor );\n\t\tthis.b = Math.pow( color.b, gammaFactor );\n\n\t\treturn this;\n\n\t},\n\n\tcopyLinearToGamma: function ( color, gammaFactor ) {\n\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\n\n\t\tvar safeInverse = ( gammaFactor > 0 ) ? ( 1.0 / gammaFactor ) : 1.0;\n\n\t\tthis.r = Math.pow( color.r, safeInverse );\n\t\tthis.g = Math.pow( color.g, safeInverse );\n\t\tthis.b = Math.pow( color.b, safeInverse );\n\n\t\treturn this;\n\n\t},\n\n\tconvertGammaToLinear: function () {\n\n\t\tvar r = this.r, g = this.g, b = this.b;\n\n\t\tthis.r = r * r;\n\t\tthis.g = g * g;\n\t\tthis.b = b * b;\n\n\t\treturn this;\n\n\t},\n\n\tconvertLinearToGamma: function () {\n\n\t\tthis.r = Math.sqrt( this.r );\n\t\tthis.g = Math.sqrt( this.g );\n\t\tthis.b = Math.sqrt( this.b );\n\n\t\treturn this;\n\n\t},\n\n\tgetHex: function () {\n\n\t\treturn ( this.r * 255 ) << 16 ^ ( this.g * 255 ) << 8 ^ ( this.b * 255 ) << 0;\n\n\t},\n\n\tgetHexString: function () {\n\n\t\treturn ( '000000' + this.getHex().toString( 16 ) ).slice( - 6 );\n\n\t},\n\n\tgetHSL: function ( optionalTarget ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\n\t\tvar hsl = optionalTarget || { h: 0, s: 0, l: 0 };\n\n\t\tvar r = this.r, g = this.g, b = this.b;\n\n\t\tvar max = Math.max( r, g, b );\n\t\tvar min = Math.min( r, g, b );\n\n\t\tvar hue, saturation;\n\t\tvar lightness = ( min + max ) / 2.0;\n\n\t\tif ( min === max ) {\n\n\t\t\thue = 0;\n\t\t\tsaturation = 0;\n\n\t\t} else {\n\n\t\t\tvar delta = max - min;\n\n\t\t\tsaturation = lightness <= 0.5 ? delta / ( max + min ) : delta / ( 2 - max - min );\n\n\t\t\tswitch ( max ) {\n\n\t\t\t\tcase r: hue = ( g - b ) / delta + ( g < b ? 6 : 0 ); break;\n\t\t\t\tcase g: hue = ( b - r ) / delta + 2; break;\n\t\t\t\tcase b: hue = ( r - g ) / delta + 4; break;\n\n\t\t\t}\n\n\t\t\thue /= 6;\n\n\t\t}\n\n\t\thsl.h = hue;\n\t\thsl.s = saturation;\n\t\thsl.l = lightness;\n\n\t\treturn hsl;\n\n\t},\n\n\tgetStyle: function () {\n\n\t\treturn 'rgb(' + ( ( this.r * 255 ) | 0 ) + ',' + ( ( this.g * 255 ) | 0 ) + ',' + ( ( this.b * 255 ) | 0 ) + ')';\n\n\t},\n\n\toffsetHSL: function ( h, s, l ) {\n\n\t\tvar hsl = this.getHSL();\n\n\t\thsl.h += h; hsl.s += s; hsl.l += l;\n\n\t\tthis.setHSL( hsl.h, hsl.s, hsl.l );\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( color ) {\n\n\t\tthis.r += color.r;\n\t\tthis.g += color.g;\n\t\tthis.b += color.b;\n\n\t\treturn this;\n\n\t},\n\n\taddColors: function ( color1, color2 ) {\n\n\t\tthis.r = color1.r + color2.r;\n\t\tthis.g = color1.g + color2.g;\n\t\tthis.b = color1.b + color2.b;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.r += s;\n\t\tthis.g += s;\n\t\tthis.b += s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( color ) {\n\n\t\tthis.r = Math.max( 0, this.r - color.r );\n\t\tthis.g = Math.max( 0, this.g - color.g );\n\t\tthis.b = Math.max( 0, this.b - color.b );\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( color ) {\n\n\t\tthis.r *= color.r;\n\t\tthis.g *= color.g;\n\t\tthis.b *= color.b;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tthis.r *= s;\n\t\tthis.g *= s;\n\t\tthis.b *= s;\n\n\t\treturn this;\n\n\t},\n\n\tlerp: function ( color, alpha ) {\n\n\t\tthis.r += ( color.r - this.r ) * alpha;\n\t\tthis.g += ( color.g - this.g ) * alpha;\n\t\tthis.b += ( color.b - this.b ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( c ) {\n\n\t\treturn ( c.r === this.r ) && ( c.g === this.g ) && ( c.b === this.b );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.r = array[ offset ];\n\t\tthis.g = array[ offset + 1 ];\n\t\tthis.b = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.r;\n\t\tarray[ offset + 1 ] = this.g;\n\t\tarray[ offset + 2 ] = this.b;\n\n\t\treturn array;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\treturn this.getHex();\n\n\t}\n\n} );\n\n/**\n * Uniforms library for shared webgl shaders\n */\n\nvar UniformsLib = {\n\n\tcommon: {\n\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\n\t\topacity: { value: 1.0 },\n\n\t\tmap: { value: null },\n\t\tuvTransform: { value: new Matrix3() },\n\n\t\talphaMap: { value: null },\n\n\t},\n\n\tspecularmap: {\n\n\t\tspecularMap: { value: null },\n\n\t},\n\n\tenvmap: {\n\n\t\tenvMap: { value: null },\n\t\tflipEnvMap: { value: - 1 },\n\t\treflectivity: { value: 1.0 },\n\t\trefractionRatio: { value: 0.98 }\n\n\t},\n\n\taomap: {\n\n\t\taoMap: { value: null },\n\t\taoMapIntensity: { value: 1 }\n\n\t},\n\n\tlightmap: {\n\n\t\tlightMap: { value: null },\n\t\tlightMapIntensity: { value: 1 }\n\n\t},\n\n\temissivemap: {\n\n\t\temissiveMap: { value: null }\n\n\t},\n\n\tbumpmap: {\n\n\t\tbumpMap: { value: null },\n\t\tbumpScale: { value: 1 }\n\n\t},\n\n\tnormalmap: {\n\n\t\tnormalMap: { value: null },\n\t\tnormalScale: { value: new Vector2( 1, 1 ) }\n\n\t},\n\n\tdisplacementmap: {\n\n\t\tdisplacementMap: { value: null },\n\t\tdisplacementScale: { value: 1 },\n\t\tdisplacementBias: { value: 0 }\n\n\t},\n\n\troughnessmap: {\n\n\t\troughnessMap: { value: null }\n\n\t},\n\n\tmetalnessmap: {\n\n\t\tmetalnessMap: { value: null }\n\n\t},\n\n\tgradientmap: {\n\n\t\tgradientMap: { value: null }\n\n\t},\n\n\tfog: {\n\n\t\tfogDensity: { value: 0.00025 },\n\t\tfogNear: { value: 1 },\n\t\tfogFar: { value: 2000 },\n\t\tfogColor: { value: new Color( 0xffffff ) }\n\n\t},\n\n\tlights: {\n\n\t\tambientLightColor: { value: [] },\n\n\t\tdirectionalLights: { value: [], properties: {\n\t\t\tdirection: {},\n\t\t\tcolor: {},\n\n\t\t\tshadow: {},\n\t\t\tshadowBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {}\n\t\t} },\n\n\t\tdirectionalShadowMap: { value: [] },\n\t\tdirectionalShadowMatrix: { value: [] },\n\n\t\tspotLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\tdirection: {},\n\t\t\tdistance: {},\n\t\t\tconeCos: {},\n\t\t\tpenumbraCos: {},\n\t\t\tdecay: {},\n\n\t\t\tshadow: {},\n\t\t\tshadowBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {}\n\t\t} },\n\n\t\tspotShadowMap: { value: [] },\n\t\tspotShadowMatrix: { value: [] },\n\n\t\tpointLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\tdecay: {},\n\t\t\tdistance: {},\n\n\t\t\tshadow: {},\n\t\t\tshadowBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {},\n\t\t\tshadowCameraNear: {},\n\t\t\tshadowCameraFar: {}\n\t\t} },\n\n\t\tpointShadowMap: { value: [] },\n\t\tpointShadowMatrix: { value: [] },\n\n\t\themisphereLights: { value: [], properties: {\n\t\t\tdirection: {},\n\t\t\tskyColor: {},\n\t\t\tgroundColor: {}\n\t\t} },\n\n\t\t// TODO (abelnation): RectAreaLight BRDF data needs to be moved from example to main src\n\t\trectAreaLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\twidth: {},\n\t\t\theight: {}\n\t\t} }\n\n\t},\n\n\tpoints: {\n\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\n\t\topacity: { value: 1.0 },\n\t\tsize: { value: 1.0 },\n\t\tscale: { value: 1.0 },\n\t\tmap: { value: null },\n\t\tuvTransform: { value: new Matrix3() }\n\n\t}\n\n};\n\n/**\n * Uniform Utilities\n */\n\nvar UniformsUtils = {\n\n\tmerge: function ( uniforms ) {\n\n\t\tvar merged = {};\n\n\t\tfor ( var u = 0; u < uniforms.length; u ++ ) {\n\n\t\t\tvar tmp = this.clone( uniforms[ u ] );\n\n\t\t\tfor ( var p in tmp ) {\n\n\t\t\t\tmerged[ p ] = tmp[ p ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn merged;\n\n\t},\n\n\tclone: function ( uniforms_src ) {\n\n\t\tvar uniforms_dst = {};\n\n\t\tfor ( var u in uniforms_src ) {\n\n\t\t\tuniforms_dst[ u ] = {};\n\n\t\t\tfor ( var p in uniforms_src[ u ] ) {\n\n\t\t\t\tvar parameter_src = uniforms_src[ u ][ p ];\n\n\t\t\t\tif ( parameter_src && ( parameter_src.isColor ||\n\t\t\t\t\tparameter_src.isMatrix3 || parameter_src.isMatrix4 ||\n\t\t\t\t\tparameter_src.isVector2 || parameter_src.isVector3 || parameter_src.isVector4 ||\n\t\t\t\t\tparameter_src.isTexture ) ) {\n\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src.clone();\n\n\t\t\t\t} else if ( Array.isArray( parameter_src ) ) {\n\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src.slice();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn uniforms_dst;\n\n\t}\n\n};\n\nvar alphamap_fragment = \"#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\\n#endif\\n\";\n\nvar alphamap_pars_fragment = \"#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\\n\";\n\nvar alphatest_fragment = \"#ifdef ALPHATEST\\n\\tif ( diffuseColor.a < ALPHATEST ) discard;\\n#endif\\n\";\n\nvar aomap_fragment = \"#ifdef USE_AOMAP\\n\\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\\n\\treflectedLight.indirectDiffuse *= ambientOcclusion;\\n\\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\t\\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\\n\\t#endif\\n#endif\\n\";\n\nvar aomap_pars_fragment = \"#ifdef USE_AOMAP\\n\\tuniform sampler2D aoMap;\\n\\tuniform float aoMapIntensity;\\n#endif\";\n\nvar begin_vertex = \"\\nvec3 transformed = vec3( position );\\n\";\n\nvar beginnormal_vertex = \"\\nvec3 objectNormal = vec3( normal );\\n\";\n\nvar bsdfs = \"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\\n\\tif( decayExponent > 0.0 ) {\\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\\n\\t\\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\\n\\t\\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\\n\\t\\treturn distanceFalloff * maxDistanceCutoffFactor;\\n#else\\n\\t\\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\\n#endif\\n\\t}\\n\\treturn 1.0;\\n}\\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\\n\\treturn RECIPROCAL_PI * diffuseColor;\\n}\\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\\n\\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\\n\\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\\n}\\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\treturn 1.0 / ( gl * gv );\\n}\\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\treturn 0.5 / max( gv + gl, EPSILON );\\n}\\nfloat D_GGX( const in float alpha, const in float dotNH ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\\n\\treturn RECIPROCAL_PI * a2 / pow2( denom );\\n}\\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat alpha = pow2( roughness );\\n\\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\\n\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\\n\\tfloat D = D_GGX( alpha, dotNH );\\n\\treturn F * ( G * D );\\n}\\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\\n\\tconst float LUT_SIZE  = 64.0;\\n\\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\\n\\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\\n\\tfloat theta = acos( dot( N, V ) );\\n\\tvec2 uv = vec2(\\n\\t\\tsqrt( saturate( roughness ) ),\\n\\t\\tsaturate( theta / ( 0.5 * PI ) ) );\\n\\tuv = uv * LUT_SCALE + LUT_BIAS;\\n\\treturn uv;\\n}\\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\\n\\tfloat l = length( f );\\n\\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\\n}\\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\\n\\tfloat x = dot( v1, v2 );\\n\\tfloat y = abs( x );\\n\\tfloat a = 0.86267 + (0.49788 + 0.01436 * y ) * y;\\n\\tfloat b = 3.45068 + (4.18814 + y) * y;\\n\\tfloat v = a / b;\\n\\tfloat theta_sintheta = (x > 0.0) ? v : 0.5 * inversesqrt( 1.0 - x * x ) - v;\\n\\treturn cross( v1, v2 ) * theta_sintheta;\\n}\\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\\n\\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\\n\\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\\n\\tvec3 lightNormal = cross( v1, v2 );\\n\\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\\n\\tvec3 T1, T2;\\n\\tT1 = normalize( V - N * dot( V, N ) );\\n\\tT2 = - cross( N, T1 );\\n\\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\\n\\tvec3 coords[ 4 ];\\n\\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\\n\\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\\n\\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\\n\\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\\n\\tcoords[ 0 ] = normalize( coords[ 0 ] );\\n\\tcoords[ 1 ] = normalize( coords[ 1 ] );\\n\\tcoords[ 2 ] = normalize( coords[ 2 ] );\\n\\tcoords[ 3 ] = normalize( coords[ 3 ] );\\n\\tvec3 vectorFormFactor = vec3( 0.0 );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\\n\\tvec3 result = vec3( LTC_ClippedSphereFormFactor( vectorFormFactor ) );\\n\\treturn result;\\n}\\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\\n\\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\\n\\tvec4 r = roughness * c0 + c1;\\n\\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\\n\\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\\n\\treturn specularColor * AB.x + AB.y;\\n}\\nfloat G_BlinnPhong_Implicit( ) {\\n\\treturn 0.25;\\n}\\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\\n\\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\\n}\\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\\n\\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_BlinnPhong_Implicit( );\\n\\tfloat D = D_BlinnPhong( shininess, dotNH );\\n\\treturn F * ( G * D );\\n}\\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\\n\\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\\n}\\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\\n\\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\\n}\\n\";\n\nvar bumpmap_pars_fragment = \"#ifdef USE_BUMPMAP\\n\\tuniform sampler2D bumpMap;\\n\\tuniform float bumpScale;\\n\\tvec2 dHdxy_fwd() {\\n\\t\\tvec2 dSTdx = dFdx( vUv );\\n\\t\\tvec2 dSTdy = dFdy( vUv );\\n\\t\\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\\n\\t\\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\\n\\t\\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\\n\\t\\treturn vec2( dBx, dBy );\\n\\t}\\n\\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\\n\\t\\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\\n\\t\\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\\n\\t\\tvec3 vN = surf_norm;\\n\\t\\tvec3 R1 = cross( vSigmaY, vN );\\n\\t\\tvec3 R2 = cross( vN, vSigmaX );\\n\\t\\tfloat fDet = dot( vSigmaX, R1 );\\n\\t\\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\\t\\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\\t}\\n#endif\\n\";\n\nvar clipping_planes_fragment = \"#if NUM_CLIPPING_PLANES > 0\\n\\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\\n\\t\\tvec4 plane = clippingPlanes[ i ];\\n\\t\\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\\n\\t}\\n\\t\\t\\n\\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\\n\\t\\tbool clipped = true;\\n\\t\\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\\n\\t\\t\\tvec4 plane = clippingPlanes[ i ];\\n\\t\\t\\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\\n\\t\\t}\\n\\t\\tif ( clipped ) discard;\\n\\t\\n\\t#endif\\n#endif\\n\";\n\nvar clipping_planes_pars_fragment = \"#if NUM_CLIPPING_PLANES > 0\\n\\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\\n\\t\\tvarying vec3 vViewPosition;\\n\\t#endif\\n\\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\\n#endif\\n\";\n\nvar clipping_planes_pars_vertex = \"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n\";\n\nvar clipping_planes_vertex = \"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n\";\n\nvar color_fragment = \"#ifdef USE_COLOR\\n\\tdiffuseColor.rgb *= vColor;\\n#endif\";\n\nvar color_pars_fragment = \"#ifdef USE_COLOR\\n\\tvarying vec3 vColor;\\n#endif\\n\";\n\nvar color_pars_vertex = \"#ifdef USE_COLOR\\n\\tvarying vec3 vColor;\\n#endif\";\n\nvar color_vertex = \"#ifdef USE_COLOR\\n\\tvColor.xyz = color.xyz;\\n#endif\";\n\nvar common = \"#define PI 3.14159265359\\n#define PI2 6.28318530718\\n#define PI_HALF 1.5707963267949\\n#define RECIPROCAL_PI 0.31830988618\\n#define RECIPROCAL_PI2 0.15915494\\n#define LOG2 1.442695\\n#define EPSILON 1e-6\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\\nfloat pow2( const in float x ) { return x*x; }\\nfloat pow3( const in float x ) { return x*x*x; }\\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\\nhighp float rand( const in vec2 uv ) {\\n\\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\\n\\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\\n\\treturn fract(sin(sn) * c);\\n}\\nstruct IncidentLight {\\n\\tvec3 color;\\n\\tvec3 direction;\\n\\tbool visible;\\n};\\nstruct ReflectedLight {\\n\\tvec3 directDiffuse;\\n\\tvec3 directSpecular;\\n\\tvec3 indirectDiffuse;\\n\\tvec3 indirectSpecular;\\n};\\nstruct GeometricContext {\\n\\tvec3 position;\\n\\tvec3 normal;\\n\\tvec3 viewDir;\\n};\\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n}\\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\\n}\\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\tfloat distance = dot( planeNormal, point - pointOnPlane );\\n\\treturn - distance * planeNormal + point;\\n}\\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn sign( dot( point - pointOnPlane, planeNormal ) );\\n}\\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\\n}\\nmat3 transposeMat3( const in mat3 m ) {\\n\\tmat3 tmp;\\n\\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\\n\\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\\n\\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\\n\\treturn tmp;\\n}\\nfloat linearToRelativeLuminance( const in vec3 color ) {\\n\\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\\n\\treturn dot( weights, color.rgb );\\n}\\n\";\n\nvar cube_uv_reflection_fragment = \"#ifdef ENVMAP_TYPE_CUBE_UV\\n#define cubeUV_textureSize (1024.0)\\nint getFaceFromDirection(vec3 direction) {\\n\\tvec3 absDirection = abs(direction);\\n\\tint face = -1;\\n\\tif( absDirection.x > absDirection.z ) {\\n\\t\\tif(absDirection.x > absDirection.y )\\n\\t\\t\\tface = direction.x > 0.0 ? 0 : 3;\\n\\t\\telse\\n\\t\\t\\tface = direction.y > 0.0 ? 1 : 4;\\n\\t}\\n\\telse {\\n\\t\\tif(absDirection.z > absDirection.y )\\n\\t\\t\\tface = direction.z > 0.0 ? 2 : 5;\\n\\t\\telse\\n\\t\\t\\tface = direction.y > 0.0 ? 1 : 4;\\n\\t}\\n\\treturn face;\\n}\\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\\n\\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\\n\\tfloat dxRoughness = dFdx(roughness);\\n\\tfloat dyRoughness = dFdy(roughness);\\n\\tvec3 dx = dFdx( vec * scale * dxRoughness );\\n\\tvec3 dy = dFdy( vec * scale * dyRoughness );\\n\\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\\n\\td = clamp(d, 1.0, cubeUV_rangeClamp);\\n\\tfloat mipLevel = 0.5 * log2(d);\\n\\treturn vec2(floor(mipLevel), fract(mipLevel));\\n}\\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\\n\\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\\n\\tfloat a = 16.0 * cubeUV_rcpTextureSize;\\n\\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\\n\\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\\n\\tfloat powScale = exp2_packed.x * exp2_packed.y;\\n\\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\\n\\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\\n\\tbool bRes = mipLevel == 0.0;\\n\\tscale =  bRes && (scale < a) ? a : scale;\\n\\tvec3 r;\\n\\tvec2 offset;\\n\\tint face = getFaceFromDirection(direction);\\n\\tfloat rcpPowScale = 1.0 / powScale;\\n\\tif( face == 0) {\\n\\t\\tr = vec3(direction.x, -direction.z, direction.y);\\n\\t\\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 1) {\\n\\t\\tr = vec3(direction.y, direction.x, direction.z);\\n\\t\\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 2) {\\n\\t\\tr = vec3(direction.z, direction.x, direction.y);\\n\\t\\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 3) {\\n\\t\\tr = vec3(direction.x, direction.z, direction.y);\\n\\t\\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\telse if( face == 4) {\\n\\t\\tr = vec3(direction.y, direction.x, -direction.z);\\n\\t\\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\telse {\\n\\t\\tr = vec3(direction.z, -direction.x, direction.y);\\n\\t\\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\tr = normalize(r);\\n\\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\\n\\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\\n\\tvec2 base = offset + vec2( texelOffset );\\n\\treturn base + s * ( scale - 2.0 * texelOffset );\\n}\\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\\n\\tfloat roughnessVal = roughness* cubeUV_maxLods3;\\n\\tfloat r1 = floor(roughnessVal);\\n\\tfloat r2 = r1 + 1.0;\\n\\tfloat t = fract(roughnessVal);\\n\\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\\n\\tfloat s = mipInfo.y;\\n\\tfloat level0 = mipInfo.x;\\n\\tfloat level1 = level0 + 1.0;\\n\\tlevel1 = level1 > 5.0 ? 5.0 : level1;\\n\\tlevel0 += min( floor( s + 0.5 ), 5.0 );\\n\\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\\n\\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\\n\\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\\n\\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\\n\\tvec4 result = mix(color10, color20, t);\\n\\treturn vec4(result.rgb, 1.0);\\n}\\n#endif\\n\";\n\nvar defaultnormal_vertex = \"vec3 transformedNormal = normalMatrix * objectNormal;\\n#ifdef FLIP_SIDED\\n\\ttransformedNormal = - transformedNormal;\\n#endif\\n\";\n\nvar displacementmap_pars_vertex = \"#ifdef USE_DISPLACEMENTMAP\\n\\tuniform sampler2D displacementMap;\\n\\tuniform float displacementScale;\\n\\tuniform float displacementBias;\\n#endif\\n\";\n\nvar displacementmap_vertex = \"#ifdef USE_DISPLACEMENTMAP\\n\\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\\n#endif\\n\";\n\nvar emissivemap_fragment = \"#ifdef USE_EMISSIVEMAP\\n\\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\\n\\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\\n\\ttotalEmissiveRadiance *= emissiveColor.rgb;\\n#endif\\n\";\n\nvar emissivemap_pars_fragment = \"#ifdef USE_EMISSIVEMAP\\n\\tuniform sampler2D emissiveMap;\\n#endif\\n\";\n\nvar encodings_fragment = \"  gl_FragColor = linearToOutputTexel( gl_FragColor );\\n\";\n\nvar encodings_pars_fragment = \"\\nvec4 LinearToLinear( in vec4 value ) {\\n\\treturn value;\\n}\\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\\n}\\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\\n}\\nvec4 sRGBToLinear( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\\n}\\nvec4 LinearTosRGB( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\\n}\\nvec4 RGBEToLinear( in vec4 value ) {\\n\\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\\n}\\nvec4 LinearToRGBE( in vec4 value ) {\\n\\tfloat maxComponent = max( max( value.r, value.g ), value.b );\\n\\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\\n\\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\\n}\\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\\n}\\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\\n\\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\\n\\tM            = ceil( M * 255.0 ) / 255.0;\\n\\treturn vec4( value.rgb / ( M * maxRange ), M );\\n}\\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\\n}\\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\\n\\tfloat D      = max( maxRange / maxRGB, 1.0 );\\n\\tD            = min( floor( D ) / 255.0, 1.0 );\\n\\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\\n}\\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\\nvec4 LinearToLogLuv( in vec4 value )  {\\n\\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\\n\\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\\n\\tvec4 vResult;\\n\\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\\n\\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\\n\\tvResult.w = fract(Le);\\n\\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\\n\\treturn vResult;\\n}\\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\\nvec4 LogLuvToLinear( in vec4 value ) {\\n\\tfloat Le = value.z * 255.0 + value.w;\\n\\tvec3 Xp_Y_XYZp;\\n\\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\\n\\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\\n\\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\\n\\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\\n\\treturn vec4( max(vRGB, 0.0), 1.0 );\\n}\\n\";\n\nvar envmap_fragment = \"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\\n\\t\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#else\\n\\t\\tvec3 reflectVec = vReflect;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\\t\\tvec2 sampleUV;\\n\\t\\treflectVec = normalize( reflectVec );\\n\\t\\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\t\\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\\t\\tvec4 envColor = texture2D( envMap, sampleUV );\\n\\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\\t\\treflectVec = normalize( reflectVec );\\n\\t\\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\\n\\t\\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\\n\\t#else\\n\\t\\tvec4 envColor = vec4( 0.0 );\\n\\t#endif\\n\\tenvColor = envMapTexelToLinear( envColor );\\n\\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\\t\\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_MIX )\\n\\t\\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_ADD )\\n\\t\\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\\n\\t#endif\\n#endif\\n\";\n\nvar envmap_pars_fragment = \"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\\n\\tuniform float reflectivity;\\n\\tuniform float envMapIntensity;\\n#endif\\n#ifdef USE_ENVMAP\\n\\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tuniform samplerCube envMap;\\n\\t#else\\n\\t\\tuniform sampler2D envMap;\\n\\t#endif\\n\\tuniform float flipEnvMap;\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\\n\\t\\tuniform float refractionRatio;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t#endif\\n#endif\\n\";\n\nvar envmap_pars_vertex = \"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n#endif\\n\";\n\nvar envmap_vertex = \"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\tvWorldPosition = worldPosition.xyz;\\n\\t#else\\n\\t\\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\\t\\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvReflect = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#endif\\n#endif\\n\";\n\nvar fog_vertex = \"\\n#ifdef USE_FOG\\nfogDepth = -mvPosition.z;\\n#endif\";\n\nvar fog_pars_vertex = \"#ifdef USE_FOG\\n  varying float fogDepth;\\n#endif\\n\";\n\nvar fog_fragment = \"#ifdef USE_FOG\\n\\t#ifdef FOG_EXP2\\n\\t\\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\\n\\t#else\\n\\t\\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\\n\\t#endif\\n\\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\\n#endif\\n\";\n\nvar fog_pars_fragment = \"#ifdef USE_FOG\\n\\tuniform vec3 fogColor;\\n\\tvarying float fogDepth;\\n\\t#ifdef FOG_EXP2\\n\\t\\tuniform float fogDensity;\\n\\t#else\\n\\t\\tuniform float fogNear;\\n\\t\\tuniform float fogFar;\\n\\t#endif\\n#endif\\n\";\n\nvar gradientmap_pars_fragment = \"#ifdef TOON\\n\\tuniform sampler2D gradientMap;\\n\\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\\n\\t\\tfloat dotNL = dot( normal, lightDirection );\\n\\t\\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\\n\\t\\t#ifdef USE_GRADIENTMAP\\n\\t\\t\\treturn texture2D( gradientMap, coord ).rgb;\\n\\t\\t#else\\n\\t\\t\\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\\n\\t\\t#endif\\n\\t}\\n#endif\\n\";\n\nvar lightmap_fragment = \"#ifdef USE_LIGHTMAP\\n\\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n#endif\\n\";\n\nvar lightmap_pars_fragment = \"#ifdef USE_LIGHTMAP\\n\\tuniform sampler2D lightMap;\\n\\tuniform float lightMapIntensity;\\n#endif\";\n\nvar lights_lambert_vertex = \"vec3 diffuse = vec3( 1.0 );\\nGeometricContext geometry;\\ngeometry.position = mvPosition.xyz;\\ngeometry.normal = normalize( transformedNormal );\\ngeometry.viewDir = normalize( -mvPosition.xyz );\\nGeometricContext backGeometry;\\nbackGeometry.position = geometry.position;\\nbackGeometry.normal = -geometry.normal;\\nbackGeometry.viewDir = geometry.viewDir;\\nvLightFront = vec3( 0.0 );\\n#ifdef DOUBLE_SIDED\\n\\tvLightBack = vec3( 0.0 );\\n#endif\\nIncidentLight directLight;\\nfloat dotNL;\\nvec3 directLightColor_Diffuse;\\n#if NUM_POINT_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n#endif\\n#if NUM_DIR_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\\n\\t\\t#endif\\n\\t}\\n#endif\\n\";\n\nvar lights_pars = \"uniform vec3 ambientLightColor;\\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\\n\\tvec3 irradiance = ambientLightColor;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treturn irradiance;\\n}\\n#if NUM_DIR_LIGHTS > 0\\n\\tstruct DirectionalLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t};\\n\\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\\n\\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tdirectLight.color = directionalLight.color;\\n\\t\\tdirectLight.direction = directionalLight.direction;\\n\\t\\tdirectLight.visible = true;\\n\\t}\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\tstruct PointLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t\\tfloat shadowCameraNear;\\n\\t\\tfloat shadowCameraFar;\\n\\t};\\n\\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\\n\\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tvec3 lVector = pointLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tdirectLight.color = pointLight.color;\\n\\t\\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\\n\\t\\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\tstruct SpotLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tfloat coneCos;\\n\\t\\tfloat penumbraCos;\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t};\\n\\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\\n\\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\\n\\t\\tvec3 lVector = spotLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tfloat angleCos = dot( directLight.direction, spotLight.direction );\\n\\t\\tif ( angleCos > spotLight.coneCos ) {\\n\\t\\t\\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\\n\\t\\t\\tdirectLight.color = spotLight.color;\\n\\t\\t\\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\\n\\t\\t\\tdirectLight.visible = true;\\n\\t\\t} else {\\n\\t\\t\\tdirectLight.color = vec3( 0.0 );\\n\\t\\t\\tdirectLight.visible = false;\\n\\t\\t}\\n\\t}\\n#endif\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tstruct RectAreaLight {\\n\\t\\tvec3 color;\\n\\t\\tvec3 position;\\n\\t\\tvec3 halfWidth;\\n\\t\\tvec3 halfHeight;\\n\\t};\\n\\tuniform sampler2D ltcMat;\\tuniform sampler2D ltcMag;\\n\\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\tstruct HemisphereLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 skyColor;\\n\\t\\tvec3 groundColor;\\n\\t};\\n\\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\\n\\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\\n\\t\\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\\n\\t\\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\\n\\t\\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tirradiance *= PI;\\n\\t\\t#endif\\n\\t\\treturn irradiance;\\n\\t}\\n#endif\\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\\n\\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\\n\\t\\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\\n\\t\\t#else\\n\\t\\t\\tvec4 envMapColor = vec4( 0.0 );\\n\\t\\t#endif\\n\\t\\treturn PI * envMapColor.rgb * envMapIntensity;\\n\\t}\\n\\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\\n\\t\\tfloat maxMIPLevelScalar = float( maxMIPLevel );\\n\\t\\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\\n\\t\\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\\n\\t}\\n\\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\\n\\t\\t#endif\\n\\t\\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\\n\\t\\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\\n\\t\\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\\t\\t\\tvec2 sampleUV;\\n\\t\\t\\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\t\\t\\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\\t\\t\\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#endif\\n\\t\\treturn envMapColor.rgb * envMapIntensity;\\n\\t}\\n#endif\\n\";\n\nvar lights_phong_fragment = \"BlinnPhongMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\\nmaterial.specularColor = specular;\\nmaterial.specularShininess = shininess;\\nmaterial.specularStrength = specularStrength;\\n\";\n\nvar lights_phong_pars_fragment = \"varying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\nstruct BlinnPhongMaterial {\\n\\tvec3\\tdiffuseColor;\\n\\tvec3\\tspecularColor;\\n\\tfloat\\tspecularShininess;\\n\\tfloat\\tspecularStrength;\\n};\\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t#ifdef TOON\\n\\t\\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\\n\\t#else\\n\\t\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\t\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#endif\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\\n}\\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_BlinnPhong\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_BlinnPhong\\n#define Material_LightProbeLOD( material )\\t(0)\\n\";\n\nvar lights_physical_fragment = \"PhysicalMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\\n#ifdef STANDARD\\n\\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\\n#else\\n\\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\\n\\tmaterial.clearCoat = saturate( clearCoat );\\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\\n#endif\\n\";\n\nvar lights_physical_pars_fragment = \"struct PhysicalMaterial {\\n\\tvec3\\tdiffuseColor;\\n\\tfloat\\tspecularRoughness;\\n\\tvec3\\tspecularColor;\\n\\t#ifndef STANDARD\\n\\t\\tfloat clearCoat;\\n\\t\\tfloat clearCoatRoughness;\\n\\t#endif\\n};\\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\\n\\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\\n}\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t\\tvec3 normal = geometry.normal;\\n\\t\\tvec3 viewDir = geometry.viewDir;\\n\\t\\tvec3 position = geometry.position;\\n\\t\\tvec3 lightPos = rectAreaLight.position;\\n\\t\\tvec3 halfWidth = rectAreaLight.halfWidth;\\n\\t\\tvec3 halfHeight = rectAreaLight.halfHeight;\\n\\t\\tvec3 lightColor = rectAreaLight.color;\\n\\t\\tfloat roughness = material.specularRoughness;\\n\\t\\tvec3 rectCoords[ 4 ];\\n\\t\\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\\t\\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\\n\\t\\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\\n\\t\\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\\n\\t\\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\\n\\t\\tfloat norm = texture2D( ltcMag, uv ).a;\\n\\t\\tvec4 t = texture2D( ltcMat, uv );\\n\\t\\tmat3 mInv = mat3(\\n\\t\\t\\tvec3(   1,   0, t.y ),\\n\\t\\t\\tvec3(   0, t.z,   0 ),\\n\\t\\t\\tvec3( t.w,   0, t.x )\\n\\t\\t);\\n\\t\\treflectedLight.directSpecular += lightColor * material.specularColor * norm * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\\n\\t\\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1 ), rectCoords );\\n\\t}\\n#endif\\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\t#ifndef STANDARD\\n\\t\\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\\n\\t#else\\n\\t\\tfloat clearCoatDHR = 0.0;\\n\\t#endif\\n\\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\\n\\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\t#ifndef STANDARD\\n\\t\\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\\n\\t#endif\\n}\\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t#ifndef STANDARD\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\t\\tfloat dotNL = dotNV;\\n\\t\\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\\n\\t#else\\n\\t\\tfloat clearCoatDHR = 0.0;\\n\\t#endif\\n\\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\\n\\t#ifndef STANDARD\\n\\t\\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\\n\\t#endif\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Physical\\n#define RE_Direct_RectArea\\t\\tRE_Direct_RectArea_Physical\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Physical\\n#define RE_IndirectSpecular\\t\\tRE_IndirectSpecular_Physical\\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\\n\\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\\n}\\n\";\n\nvar lights_template = \"\\nGeometricContext geometry;\\ngeometry.position = - vViewPosition;\\ngeometry.normal = normal;\\ngeometry.viewDir = normalize( vViewPosition );\\nIncidentLight directLight;\\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tPointLight pointLight;\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\\n\\t\\t#ifdef USE_SHADOWMAP\\n\\t\\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tSpotLight spotLight;\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\\n\\t\\t#ifdef USE_SHADOWMAP\\n\\t\\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tDirectionalLight directionalLight;\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\\n\\t\\t#ifdef USE_SHADOWMAP\\n\\t\\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\\n\\tRectAreaLight rectAreaLight;\\n\\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\\n\\t\\trectAreaLight = rectAreaLights[ i ];\\n\\t\\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if defined( RE_IndirectDiffuse )\\n\\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tlightMapIrradiance *= PI;\\n\\t\\t#endif\\n\\t\\tirradiance += lightMapIrradiance;\\n\\t#endif\\n\\t#if ( NUM_HEMI_LIGHTS > 0 )\\n\\t\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\t\\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t}\\n\\t#endif\\n\\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\\n\\t#endif\\n\\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\\n#endif\\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\\n\\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\\n\\t#ifndef STANDARD\\n\\t\\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\\n\\t#else\\n\\t\\tvec3 clearCoatRadiance = vec3( 0.0 );\\n\\t#endif\\n\\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\\n#endif\\n\";\n\nvar logdepthbuf_fragment = \"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\\n#endif\";\n\nvar logdepthbuf_pars_fragment = \"#ifdef USE_LOGDEPTHBUF\\n\\tuniform float logDepthBufFC;\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvarying float vFragDepth;\\n\\t#endif\\n#endif\\n\";\n\nvar logdepthbuf_pars_vertex = \"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvarying float vFragDepth;\\n\\t#endif\\n\\tuniform float logDepthBufFC;\\n#endif\";\n\nvar logdepthbuf_vertex = \"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvFragDepth = 1.0 + gl_Position.w;\\n\\t#else\\n\\t\\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\\n\\t\\tgl_Position.z *= gl_Position.w;\\n\\t#endif\\n#endif\\n\";\n\nvar map_fragment = \"#ifdef USE_MAP\\n\\tvec4 texelColor = texture2D( map, vUv );\\n\\ttexelColor = mapTexelToLinear( texelColor );\\n\\tdiffuseColor *= texelColor;\\n#endif\\n\";\n\nvar map_pars_fragment = \"#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\\n\";\n\nvar map_particle_fragment = \"#ifdef USE_MAP\\n\\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\\n\\tvec4 mapTexel = texture2D( map, uv );\\n\\tdiffuseColor *= mapTexelToLinear( mapTexel );\\n#endif\\n\";\n\nvar map_particle_pars_fragment = \"#ifdef USE_MAP\\n\\tuniform mat3 uvTransform;\\n\\tuniform sampler2D map;\\n#endif\\n\";\n\nvar metalnessmap_fragment = \"float metalnessFactor = metalness;\\n#ifdef USE_METALNESSMAP\\n\\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\\n\\tmetalnessFactor *= texelMetalness.b;\\n#endif\\n\";\n\nvar metalnessmap_pars_fragment = \"#ifdef USE_METALNESSMAP\\n\\tuniform sampler2D metalnessMap;\\n#endif\";\n\nvar morphnormal_vertex = \"#ifdef USE_MORPHNORMALS\\n\\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\\n\\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\\n\\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\\n\\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\\n#endif\\n\";\n\nvar morphtarget_pars_vertex = \"#ifdef USE_MORPHTARGETS\\n\\t#ifndef USE_MORPHNORMALS\\n\\tuniform float morphTargetInfluences[ 8 ];\\n\\t#else\\n\\tuniform float morphTargetInfluences[ 4 ];\\n\\t#endif\\n#endif\";\n\nvar morphtarget_vertex = \"#ifdef USE_MORPHTARGETS\\n\\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\\n\\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\\n\\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\\n\\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\\n\\t#ifndef USE_MORPHNORMALS\\n\\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\\n\\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\\n\\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\\n\\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\\n\\t#endif\\n#endif\\n\";\n\nvar normal_fragment = \"#ifdef FLAT_SHADED\\n\\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\\n\\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\\n\\tvec3 normal = normalize( cross( fdx, fdy ) );\\n#else\\n\\tvec3 normal = normalize( vNormal );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t#endif\\n#endif\\n#ifdef USE_NORMALMAP\\n\\tnormal = perturbNormal2Arb( -vViewPosition, normal );\\n#elif defined( USE_BUMPMAP )\\n\\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\\n#endif\\n\";\n\nvar normalmap_pars_fragment = \"#ifdef USE_NORMALMAP\\n\\tuniform sampler2D normalMap;\\n\\tuniform vec2 normalScale;\\n\\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\\n\\t\\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\\n\\t\\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\\n\\t\\tvec2 st0 = dFdx( vUv.st );\\n\\t\\tvec2 st1 = dFdy( vUv.st );\\n\\t\\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\\n\\t\\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\\n\\t\\tvec3 N = normalize( surf_norm );\\n\\t\\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\t\\tmapN.xy = normalScale * mapN.xy;\\n\\t\\tmat3 tsn = mat3( S, T, N );\\n\\t\\treturn normalize( tsn * mapN );\\n\\t}\\n#endif\\n\";\n\nvar packing = \"vec3 packNormalToRGB( const in vec3 normal ) {\\n\\treturn normalize( normal ) * 0.5 + 0.5;\\n}\\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\\n\\treturn 2.0 * rgb.xyz - 1.0;\\n}\\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\\nconst float ShiftRight8 = 1. / 256.;\\nvec4 packDepthToRGBA( const in float v ) {\\n\\tvec4 r = vec4( fract( v * PackFactors ), v );\\n\\tr.yzw -= r.xyz * ShiftRight8;\\treturn r * PackUpscale;\\n}\\nfloat unpackRGBAToDepth( const in vec4 v ) {\\n\\treturn dot( v, UnpackFactors );\\n}\\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn ( viewZ + near ) / ( near - far );\\n}\\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\\n\\treturn linearClipZ * ( near - far ) - near;\\n}\\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\\n}\\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\\n\\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\\n}\\n\";\n\nvar premultiplied_alpha_fragment = \"#ifdef PREMULTIPLIED_ALPHA\\n\\tgl_FragColor.rgb *= gl_FragColor.a;\\n#endif\\n\";\n\nvar project_vertex = \"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\\ngl_Position = projectionMatrix * mvPosition;\\n\";\n\nvar dithering_fragment = \"#if defined( DITHERING )\\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\\n#endif\\n\";\n\nvar dithering_pars_fragment = \"#if defined( DITHERING )\\n\\tvec3 dithering( vec3 color ) {\\n\\t\\tfloat grid_position = rand( gl_FragCoord.xy );\\n\\t\\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\\n\\t\\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\\n\\t\\treturn color + dither_shift_RGB;\\n\\t}\\n#endif\\n\";\n\nvar roughnessmap_fragment = \"float roughnessFactor = roughness;\\n#ifdef USE_ROUGHNESSMAP\\n\\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\\n\\troughnessFactor *= texelRoughness.g;\\n#endif\\n\";\n\nvar roughnessmap_pars_fragment = \"#ifdef USE_ROUGHNESSMAP\\n\\tuniform sampler2D roughnessMap;\\n#endif\";\n\nvar shadowmap_pars_fragment = \"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\t\\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\t\\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\t\\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\\n\\t#endif\\n\\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\\n\\t\\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\\n\\t}\\n\\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\\n\\t\\tconst vec2 offset = vec2( 0.0, 1.0 );\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / size;\\n\\t\\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\\n\\t\\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\\n\\t\\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\\n\\t\\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\\n\\t\\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\\n\\t\\tvec2 f = fract( uv * size + 0.5 );\\n\\t\\tfloat a = mix( lb, lt, f.y );\\n\\t\\tfloat b = mix( rb, rt, f.y );\\n\\t\\tfloat c = mix( a, b, f.x );\\n\\t\\treturn c;\\n\\t}\\n\\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\\t\\tfloat shadow = 1.0;\\n\\t\\tshadowCoord.xyz /= shadowCoord.w;\\n\\t\\tshadowCoord.z += shadowBias;\\n\\t\\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\\n\\t\\tbool inFrustum = all( inFrustumVec );\\n\\t\\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\\n\\t\\tbool frustumTest = all( frustumTestVec );\\n\\t\\tif ( frustumTest ) {\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#else\\n\\t\\t\\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#endif\\n\\t\\t}\\n\\t\\treturn shadow;\\n\\t}\\n\\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\\n\\t\\tvec3 absV = abs( v );\\n\\t\\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\\n\\t\\tabsV *= scaleToCube;\\n\\t\\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\\n\\t\\tvec2 planar = v.xy;\\n\\t\\tfloat almostATexel = 1.5 * texelSizeY;\\n\\t\\tfloat almostOne = 1.0 - almostATexel;\\n\\t\\tif ( absV.z >= almostOne ) {\\n\\t\\t\\tif ( v.z > 0.0 )\\n\\t\\t\\t\\tplanar.x = 4.0 - v.x;\\n\\t\\t} else if ( absV.x >= almostOne ) {\\n\\t\\t\\tfloat signX = sign( v.x );\\n\\t\\t\\tplanar.x = v.z * signX + 2.0 * signX;\\n\\t\\t} else if ( absV.y >= almostOne ) {\\n\\t\\t\\tfloat signY = sign( v.y );\\n\\t\\t\\tplanar.x = v.x + 2.0 * signY + 2.0;\\n\\t\\t\\tplanar.y = v.z * signY - 2.0;\\n\\t\\t}\\n\\t\\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\\n\\t}\\n\\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\\n\\t\\tvec3 lightToPosition = shadowCoord.xyz;\\n\\t\\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\\t\\tdp += shadowBias;\\n\\t\\tvec3 bd3D = normalize( lightToPosition );\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\\n\\t\\t\\treturn (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#else\\n\\t\\t\\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\\n\\t\\t#endif\\n\\t}\\n#endif\\n\";\n\nvar shadowmap_pars_vertex = \"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\t\\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\t\\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\t\\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\\n\\t#endif\\n#endif\\n\";\n\nvar shadowmap_vertex = \"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\\n\\t}\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\\n\\t}\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\\n\\t}\\n\\t#endif\\n#endif\\n\";\n\nvar shadowmask_pars_fragment = \"float getShadowMask() {\\n\\tfloat shadow = 1.0;\\n\\t#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\tDirectionalLight directionalLight;\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\tSpotLight spotLight;\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\tPointLight pointLight;\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\\n\\t}\\n\\t#endif\\n\\t#endif\\n\\treturn shadow;\\n}\\n\";\n\nvar skinbase_vertex = \"#ifdef USE_SKINNING\\n\\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n#endif\";\n\nvar skinning_pars_vertex = \"#ifdef USE_SKINNING\\n\\tuniform mat4 bindMatrix;\\n\\tuniform mat4 bindMatrixInverse;\\n\\t#ifdef BONE_TEXTURE\\n\\t\\tuniform sampler2D boneTexture;\\n\\t\\tuniform int boneTextureSize;\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tfloat j = i * 4.0;\\n\\t\\t\\tfloat x = mod( j, float( boneTextureSize ) );\\n\\t\\t\\tfloat y = floor( j / float( boneTextureSize ) );\\n\\t\\t\\tfloat dx = 1.0 / float( boneTextureSize );\\n\\t\\t\\tfloat dy = 1.0 / float( boneTextureSize );\\n\\t\\t\\ty = dy * ( y + 0.5 );\\n\\t\\t\\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\\t\\t\\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\\t\\t\\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\\t\\t\\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\\t\\t\\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#else\\n\\t\\tuniform mat4 boneMatrices[ MAX_BONES ];\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tmat4 bone = boneMatrices[ int(i) ];\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#endif\\n#endif\\n\";\n\nvar skinning_vertex = \"#ifdef USE_SKINNING\\n\\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\\n\\tvec4 skinned = vec4( 0.0 );\\n\\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\\ttransformed = ( bindMatrixInverse * skinned ).xyz;\\n#endif\\n\";\n\nvar skinnormal_vertex = \"#ifdef USE_SKINNING\\n\\tmat4 skinMatrix = mat4( 0.0 );\\n\\tskinMatrix += skinWeight.x * boneMatX;\\n\\tskinMatrix += skinWeight.y * boneMatY;\\n\\tskinMatrix += skinWeight.z * boneMatZ;\\n\\tskinMatrix += skinWeight.w * boneMatW;\\n\\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\\n\\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\\n#endif\\n\";\n\nvar specularmap_fragment = \"float specularStrength;\\n#ifdef USE_SPECULARMAP\\n\\tvec4 texelSpecular = texture2D( specularMap, vUv );\\n\\tspecularStrength = texelSpecular.r;\\n#else\\n\\tspecularStrength = 1.0;\\n#endif\";\n\nvar specularmap_pars_fragment = \"#ifdef USE_SPECULARMAP\\n\\tuniform sampler2D specularMap;\\n#endif\";\n\nvar tonemapping_fragment = \"#if defined( TONE_MAPPING )\\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\\n#endif\\n\";\n\nvar tonemapping_pars_fragment = \"#ifndef saturate\\n\\t#define saturate(a) clamp( a, 0.0, 1.0 )\\n#endif\\nuniform float toneMappingExposure;\\nuniform float toneMappingWhitePoint;\\nvec3 LinearToneMapping( vec3 color ) {\\n\\treturn toneMappingExposure * color;\\n}\\nvec3 ReinhardToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( color / ( vec3( 1.0 ) + color ) );\\n}\\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\\nvec3 Uncharted2ToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\\n}\\nvec3 OptimizedCineonToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\tcolor = max( vec3( 0.0 ), color - 0.004 );\\n\\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\\n}\\n\";\n\nvar uv_pars_fragment = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\\tvarying vec2 vUv;\\n#endif\";\n\nvar uv_pars_vertex = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\\tvarying vec2 vUv;\\n\\tuniform mat3 uvTransform;\\n#endif\\n\";\n\nvar uv_vertex = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n#endif\";\n\nvar uv2_pars_fragment = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvarying vec2 vUv2;\\n#endif\";\n\nvar uv2_pars_vertex = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tattribute vec2 uv2;\\n\\tvarying vec2 vUv2;\\n#endif\";\n\nvar uv2_vertex = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvUv2 = uv2;\\n#endif\";\n\nvar worldpos_vertex = \"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\\n\\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\\n#endif\\n\";\n\nvar cube_frag = \"uniform samplerCube tCube;\\nuniform float tFlip;\\nuniform float opacity;\\nvarying vec3 vWorldPosition;\\nvoid main() {\\n\\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\\n\\tgl_FragColor.a *= opacity;\\n}\\n\";\n\nvar cube_vert = \"varying vec3 vWorldPosition;\\n#include <common>\\nvoid main() {\\n\\tvWorldPosition = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\tgl_Position.z = gl_Position.w;\\n}\\n\";\n\nvar depth_frag = \"#if DEPTH_PACKING == 3200\\n\\tuniform float opacity;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tdiffuseColor.a = opacity;\\n\\t#endif\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\\n\\t#elif DEPTH_PACKING == 3201\\n\\t\\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\\n\\t#endif\\n}\\n\";\n\nvar depth_vert = \"#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n}\\n\";\n\nvar distanceRGBA_frag = \"#define DISTANCE\\nuniform vec3 referencePosition;\\nuniform float nearDistance;\\nuniform float farDistance;\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main () {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\tfloat dist = length( vWorldPosition - referencePosition );\\n\\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\\n\\tdist = saturate( dist );\\n\\tgl_FragColor = packDepthToRGBA( dist );\\n}\\n\";\n\nvar distanceRGBA_vert = \"#define DISTANCE\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvWorldPosition = worldPosition.xyz;\\n}\\n\";\n\nvar equirect_frag = \"uniform sampler2D tEquirect;\\nvarying vec3 vWorldPosition;\\n#include <common>\\nvoid main() {\\n\\tvec3 direction = normalize( vWorldPosition );\\n\\tvec2 sampleUV;\\n\\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\\n\\tgl_FragColor = texture2D( tEquirect, sampleUV );\\n}\\n\";\n\nvar equirect_vert = \"varying vec3 vWorldPosition;\\n#include <common>\\nvoid main() {\\n\\tvWorldPosition = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n}\\n\";\n\nvar linedashed_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\nuniform float dashSize;\\nuniform float totalSize;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\\n\\t\\tdiscard;\\n\\t}\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <color_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\\n\";\n\nvar linedashed_vert = \"uniform float scale;\\nattribute float lineDistance;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <color_vertex>\\n\\tvLineDistance = scale * lineDistance;\\n\\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\\n\\tgl_Position = projectionMatrix * mvPosition;\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\\n\";\n\nvar meshbasic_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vec3( 1.0 );\\n\\t#endif\\n\\t#include <aomap_fragment>\\n\\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\\n\\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\\n\";\n\nvar meshbasic_vert = \"#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_ENVMAP\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\";\n\nvar meshlambert_frag = \"uniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\nvarying vec3 vLightFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <emissivemap_fragment>\\n\\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\\n\\t#include <lightmap_fragment>\\n\\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\\n\\t#else\\n\\t\\treflectedLight.directDiffuse = vLightFront;\\n\\t#endif\\n\\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\\n\";\n\nvar meshlambert_vert = \"#define LAMBERT\\nvarying vec3 vLightFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <lights_lambert_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\";\n\nvar meshphong_frag = \"#define PHONG\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform vec3 specular;\\nuniform float shininess;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <gradientmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <lights_phong_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <normal_fragment>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_phong_fragment>\\n\\t#include <lights_template>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\\n\";\n\nvar meshphong_vert = \"#define PHONG\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\";\n\nvar meshphysical_frag = \"#define PHYSICAL\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float roughness;\\nuniform float metalness;\\nuniform float opacity;\\n#ifndef STANDARD\\n\\tuniform float clearCoat;\\n\\tuniform float clearCoatRoughness;\\n#endif\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <cube_uv_reflection_fragment>\\n#include <lights_pars>\\n#include <lights_physical_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <roughnessmap_pars_fragment>\\n#include <metalnessmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <roughnessmap_fragment>\\n\\t#include <metalnessmap_fragment>\\n\\t#include <normal_fragment>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_physical_fragment>\\n\\t#include <lights_template>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\\n\";\n\nvar meshphysical_vert = \"#define PHYSICAL\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\";\n\nvar normal_frag = \"#define NORMAL\\nuniform float opacity;\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\nvoid main() {\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <normal_fragment>\\n\\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\\n}\\n\";\n\nvar normal_vert = \"#define NORMAL\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n}\\n\";\n\nvar points_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <color_pars_fragment>\\n#include <map_particle_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_particle_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\\n\";\n\nvar points_vert = \"uniform float size;\\nuniform float scale;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <color_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\t#ifdef USE_SIZEATTENUATION\\n\\t\\tgl_PointSize = size * ( scale / - mvPosition.z );\\n\\t#else\\n\\t\\tgl_PointSize = size;\\n\\t#endif\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\";\n\nvar shadow_frag = \"uniform vec3 color;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\nvoid main() {\\n\\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\\n\\t#include <fog_fragment>\\n}\\n\";\n\nvar shadow_vert = \"#include <fog_pars_vertex>\\n#include <shadowmap_pars_vertex>\\nvoid main() {\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\";\n\nvar ShaderChunk = {\n\talphamap_fragment: alphamap_fragment,\n\talphamap_pars_fragment: alphamap_pars_fragment,\n\talphatest_fragment: alphatest_fragment,\n\taomap_fragment: aomap_fragment,\n\taomap_pars_fragment: aomap_pars_fragment,\n\tbegin_vertex: begin_vertex,\n\tbeginnormal_vertex: beginnormal_vertex,\n\tbsdfs: bsdfs,\n\tbumpmap_pars_fragment: bumpmap_pars_fragment,\n\tclipping_planes_fragment: clipping_planes_fragment,\n\tclipping_planes_pars_fragment: clipping_planes_pars_fragment,\n\tclipping_planes_pars_vertex: clipping_planes_pars_vertex,\n\tclipping_planes_vertex: clipping_planes_vertex,\n\tcolor_fragment: color_fragment,\n\tcolor_pars_fragment: color_pars_fragment,\n\tcolor_pars_vertex: color_pars_vertex,\n\tcolor_vertex: color_vertex,\n\tcommon: common,\n\tcube_uv_reflection_fragment: cube_uv_reflection_fragment,\n\tdefaultnormal_vertex: defaultnormal_vertex,\n\tdisplacementmap_pars_vertex: displacementmap_pars_vertex,\n\tdisplacementmap_vertex: displacementmap_vertex,\n\temissivemap_fragment: emissivemap_fragment,\n\temissivemap_pars_fragment: emissivemap_pars_fragment,\n\tencodings_fragment: encodings_fragment,\n\tencodings_pars_fragment: encodings_pars_fragment,\n\tenvmap_fragment: envmap_fragment,\n\tenvmap_pars_fragment: envmap_pars_fragment,\n\tenvmap_pars_vertex: envmap_pars_vertex,\n\tenvmap_vertex: envmap_vertex,\n\tfog_vertex: fog_vertex,\n\tfog_pars_vertex: fog_pars_vertex,\n\tfog_fragment: fog_fragment,\n\tfog_pars_fragment: fog_pars_fragment,\n\tgradientmap_pars_fragment: gradientmap_pars_fragment,\n\tlightmap_fragment: lightmap_fragment,\n\tlightmap_pars_fragment: lightmap_pars_fragment,\n\tlights_lambert_vertex: lights_lambert_vertex,\n\tlights_pars: lights_pars,\n\tlights_phong_fragment: lights_phong_fragment,\n\tlights_phong_pars_fragment: lights_phong_pars_fragment,\n\tlights_physical_fragment: lights_physical_fragment,\n\tlights_physical_pars_fragment: lights_physical_pars_fragment,\n\tlights_template: lights_template,\n\tlogdepthbuf_fragment: logdepthbuf_fragment,\n\tlogdepthbuf_pars_fragment: logdepthbuf_pars_fragment,\n\tlogdepthbuf_pars_vertex: logdepthbuf_pars_vertex,\n\tlogdepthbuf_vertex: logdepthbuf_vertex,\n\tmap_fragment: map_fragment,\n\tmap_pars_fragment: map_pars_fragment,\n\tmap_particle_fragment: map_particle_fragment,\n\tmap_particle_pars_fragment: map_particle_pars_fragment,\n\tmetalnessmap_fragment: metalnessmap_fragment,\n\tmetalnessmap_pars_fragment: metalnessmap_pars_fragment,\n\tmorphnormal_vertex: morphnormal_vertex,\n\tmorphtarget_pars_vertex: morphtarget_pars_vertex,\n\tmorphtarget_vertex: morphtarget_vertex,\n\tnormal_fragment: normal_fragment,\n\tnormalmap_pars_fragment: normalmap_pars_fragment,\n\tpacking: packing,\n\tpremultiplied_alpha_fragment: premultiplied_alpha_fragment,\n\tproject_vertex: project_vertex,\n\tdithering_fragment: dithering_fragment,\n\tdithering_pars_fragment: dithering_pars_fragment,\n\troughnessmap_fragment: roughnessmap_fragment,\n\troughnessmap_pars_fragment: roughnessmap_pars_fragment,\n\tshadowmap_pars_fragment: shadowmap_pars_fragment,\n\tshadowmap_pars_vertex: shadowmap_pars_vertex,\n\tshadowmap_vertex: shadowmap_vertex,\n\tshadowmask_pars_fragment: shadowmask_pars_fragment,\n\tskinbase_vertex: skinbase_vertex,\n\tskinning_pars_vertex: skinning_pars_vertex,\n\tskinning_vertex: skinning_vertex,\n\tskinnormal_vertex: skinnormal_vertex,\n\tspecularmap_fragment: specularmap_fragment,\n\tspecularmap_pars_fragment: specularmap_pars_fragment,\n\ttonemapping_fragment: tonemapping_fragment,\n\ttonemapping_pars_fragment: tonemapping_pars_fragment,\n\tuv_pars_fragment: uv_pars_fragment,\n\tuv_pars_vertex: uv_pars_vertex,\n\tuv_vertex: uv_vertex,\n\tuv2_pars_fragment: uv2_pars_fragment,\n\tuv2_pars_vertex: uv2_pars_vertex,\n\tuv2_vertex: uv2_vertex,\n\tworldpos_vertex: worldpos_vertex,\n\n\tcube_frag: cube_frag,\n\tcube_vert: cube_vert,\n\tdepth_frag: depth_frag,\n\tdepth_vert: depth_vert,\n\tdistanceRGBA_frag: distanceRGBA_frag,\n\tdistanceRGBA_vert: distanceRGBA_vert,\n\tequirect_frag: equirect_frag,\n\tequirect_vert: equirect_vert,\n\tlinedashed_frag: linedashed_frag,\n\tlinedashed_vert: linedashed_vert,\n\tmeshbasic_frag: meshbasic_frag,\n\tmeshbasic_vert: meshbasic_vert,\n\tmeshlambert_frag: meshlambert_frag,\n\tmeshlambert_vert: meshlambert_vert,\n\tmeshphong_frag: meshphong_frag,\n\tmeshphong_vert: meshphong_vert,\n\tmeshphysical_frag: meshphysical_frag,\n\tmeshphysical_vert: meshphysical_vert,\n\tnormal_frag: normal_frag,\n\tnormal_vert: normal_vert,\n\tpoints_frag: points_frag,\n\tpoints_vert: points_vert,\n\tshadow_frag: shadow_frag,\n\tshadow_vert: shadow_vert\n};\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n */\n\nvar ShaderLib = {\n\n\tbasic: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshbasic_vert,\n\t\tfragmentShader: ShaderChunk.meshbasic_frag\n\n\t},\n\n\tlambert: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshlambert_vert,\n\t\tfragmentShader: ShaderChunk.meshlambert_frag\n\n\t},\n\n\tphong: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.gradientmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) },\n\t\t\t\tspecular: { value: new Color( 0x111111 ) },\n\t\t\t\tshininess: { value: 30 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshphong_vert,\n\t\tfragmentShader: ShaderChunk.meshphong_frag\n\n\t},\n\n\tstandard: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.roughnessmap,\n\t\t\tUniformsLib.metalnessmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) },\n\t\t\t\troughness: { value: 0.5 },\n\t\t\t\tmetalness: { value: 0.5 },\n\t\t\t\tenvMapIntensity: { value: 1 } // temporary\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshphysical_vert,\n\t\tfragmentShader: ShaderChunk.meshphysical_frag\n\n\t},\n\n\tpoints: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.points,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.points_vert,\n\t\tfragmentShader: ShaderChunk.points_frag\n\n\t},\n\n\tdashed: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tscale: { value: 1 },\n\t\t\t\tdashSize: { value: 1 },\n\t\t\t\ttotalSize: { value: 2 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.linedashed_vert,\n\t\tfragmentShader: ShaderChunk.linedashed_frag\n\n\t},\n\n\tdepth: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.displacementmap\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.depth_vert,\n\t\tfragmentShader: ShaderChunk.depth_frag\n\n\t},\n\n\tnormal: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\t{\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.normal_vert,\n\t\tfragmentShader: ShaderChunk.normal_frag\n\n\t},\n\n\t/* -------------------------------------------------------------------------\n\t//\tCube map shader\n\t ------------------------------------------------------------------------- */\n\n\tcube: {\n\n\t\tuniforms: {\n\t\t\ttCube: { value: null },\n\t\t\ttFlip: { value: - 1 },\n\t\t\topacity: { value: 1.0 }\n\t\t},\n\n\t\tvertexShader: ShaderChunk.cube_vert,\n\t\tfragmentShader: ShaderChunk.cube_frag\n\n\t},\n\n\tequirect: {\n\n\t\tuniforms: {\n\t\t\ttEquirect: { value: null },\n\t\t},\n\n\t\tvertexShader: ShaderChunk.equirect_vert,\n\t\tfragmentShader: ShaderChunk.equirect_frag\n\n\t},\n\n\tdistanceRGBA: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.displacementmap,\n\t\t\t{\n\t\t\t\treferencePosition: { value: new Vector3() },\n\t\t\t\tnearDistance: { value: 1 },\n\t\t\t\tfarDistance: { value: 1000 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.distanceRGBA_vert,\n\t\tfragmentShader: ShaderChunk.distanceRGBA_frag\n\n\t},\n\n\tshadow: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.lights,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tcolor: { value: new Color( 0x00000 ) },\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t},\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.shadow_vert,\n\t\tfragmentShader: ShaderChunk.shadow_frag\n\n\t}\n\n};\n\nShaderLib.physical = {\n\n\tuniforms: UniformsUtils.merge( [\n\t\tShaderLib.standard.uniforms,\n\t\t{\n\t\t\tclearCoat: { value: 0 },\n\t\t\tclearCoatRoughness: { value: 0 }\n\t\t}\n\t] ),\n\n\tvertexShader: ShaderChunk.meshphysical_vert,\n\tfragmentShader: ShaderChunk.meshphysical_frag\n\n};\n\n/**\n * @author bhouston / http://clara.io\n */\n\nfunction Box2( min, max ) {\n\n\tthis.min = ( min !== undefined ) ? min : new Vector2( + Infinity, + Infinity );\n\tthis.max = ( max !== undefined ) ? max : new Vector2( - Infinity, - Infinity );\n\n}\n\nObject.assign( Box2.prototype, {\n\n\tset: function ( min, max ) {\n\n\t\tthis.min.copy( min );\n\t\tthis.max.copy( max );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tthis.makeEmpty();\n\n\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tthis.expandByPoint( points[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCenterAndSize: function () {\n\n\t\tvar v1 = new Vector2();\n\n\t\treturn function setFromCenterAndSize( center, size ) {\n\n\t\t\tvar halfSize = v1.copy( size ).multiplyScalar( 0.5 );\n\t\t\tthis.min.copy( center ).sub( halfSize );\n\t\t\tthis.max.copy( center ).add( halfSize );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( box ) {\n\n\t\tthis.min.copy( box.min );\n\t\tthis.max.copy( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tmakeEmpty: function () {\n\n\t\tthis.min.x = this.min.y = + Infinity;\n\t\tthis.max.x = this.max.y = - Infinity;\n\n\t\treturn this;\n\n\t},\n\n\tisEmpty: function () {\n\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y );\n\n\t},\n\n\tgetCenter: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Vector2();\n\t\treturn this.isEmpty() ? result.set( 0, 0 ) : result.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\n\n\t},\n\n\tgetSize: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Vector2();\n\t\treturn this.isEmpty() ? result.set( 0, 0 ) : result.subVectors( this.max, this.min );\n\n\t},\n\n\texpandByPoint: function ( point ) {\n\n\t\tthis.min.min( point );\n\t\tthis.max.max( point );\n\n\t\treturn this;\n\n\t},\n\n\texpandByVector: function ( vector ) {\n\n\t\tthis.min.sub( vector );\n\t\tthis.max.add( vector );\n\n\t\treturn this;\n\n\t},\n\n\texpandByScalar: function ( scalar ) {\n\n\t\tthis.min.addScalar( - scalar );\n\t\tthis.max.addScalar( scalar );\n\n\t\treturn this;\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\treturn point.x < this.min.x || point.x > this.max.x ||\n\t\t\tpoint.y < this.min.y || point.y > this.max.y ? false : true;\n\n\t},\n\n\tcontainsBox: function ( box ) {\n\n\t\treturn this.min.x <= box.min.x && box.max.x <= this.max.x &&\n\t\t\tthis.min.y <= box.min.y && box.max.y <= this.max.y;\n\n\t},\n\n\tgetParameter: function ( point, optionalTarget ) {\n\n\t\t// This can potentially have a divide by zero if the box\n\t\t// has a size dimension of 0.\n\n\t\tvar result = optionalTarget || new Vector2();\n\n\t\treturn result.set(\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y )\n\t\t);\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\t// using 4 splitting planes to rule out intersections\n\n\t\treturn box.max.x < this.min.x || box.min.x > this.max.x ||\n\t\t\tbox.max.y < this.min.y || box.min.y > this.max.y ? false : true;\n\n\t},\n\n\tclampPoint: function ( point, optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Vector2();\n\t\treturn result.copy( point ).clamp( this.min, this.max );\n\n\t},\n\n\tdistanceToPoint: function () {\n\n\t\tvar v1 = new Vector2();\n\n\t\treturn function distanceToPoint( point ) {\n\n\t\t\tvar clampedPoint = v1.copy( point ).clamp( this.min, this.max );\n\t\t\treturn clampedPoint.sub( point ).length();\n\n\t\t};\n\n\t}(),\n\n\tintersect: function ( box ) {\n\n\t\tthis.min.max( box.min );\n\t\tthis.max.min( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tunion: function ( box ) {\n\n\t\tthis.min.min( box.min );\n\t\tthis.max.max( box.max );\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.min.add( offset );\n\t\tthis.max.add( offset );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( box ) {\n\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\n\n\t}\n\n} );\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction WebGLFlareRenderer( renderer, gl, state, textures, capabilities ) {\n\n\tvar vertexBuffer, elementBuffer;\n\tvar shader, program, attributes, uniforms;\n\n\tvar tempTexture, occlusionTexture;\n\n\tfunction init() {\n\n\t\tvar vertices = new Float32Array( [\n\t\t\t- 1, - 1, 0, 0,\n\t\t\t  1, - 1, 1, 0,\n\t\t\t  1, 1, 1, 1,\n\t\t\t- 1, 1, 0, 1\n\t\t] );\n\n\t\tvar faces = new Uint16Array( [\n\t\t\t0, 1, 2,\n\t\t\t0, 2, 3\n\t\t] );\n\n\t\t// buffers\n\n\t\tvertexBuffer = gl.createBuffer();\n\t\telementBuffer = gl.createBuffer();\n\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\n\t\tgl.bufferData( gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW );\n\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\n\t\tgl.bufferData( gl.ELEMENT_ARRAY_BUFFER, faces, gl.STATIC_DRAW );\n\n\t\t// textures\n\n\t\ttempTexture = gl.createTexture();\n\t\tocclusionTexture = gl.createTexture();\n\n\t\tstate.bindTexture( gl.TEXTURE_2D, tempTexture );\n\t\tgl.texImage2D( gl.TEXTURE_2D, 0, gl.RGB, 16, 16, 0, gl.RGB, gl.UNSIGNED_BYTE, null );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\n\n\t\tstate.bindTexture( gl.TEXTURE_2D, occlusionTexture );\n\t\tgl.texImage2D( gl.TEXTURE_2D, 0, gl.RGBA, 16, 16, 0, gl.RGBA, gl.UNSIGNED_BYTE, null );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\n\n\t\tshader = {\n\n\t\t\tvertexShader: [\n\n\t\t\t\t'uniform lowp int renderType;',\n\n\t\t\t\t'uniform vec3 screenPosition;',\n\t\t\t\t'uniform vec2 scale;',\n\t\t\t\t'uniform float rotation;',\n\n\t\t\t\t'uniform sampler2D occlusionMap;',\n\n\t\t\t\t'attribute vec2 position;',\n\t\t\t\t'attribute vec2 uv;',\n\n\t\t\t\t'varying vec2 vUV;',\n\t\t\t\t'varying float vVisibility;',\n\n\t\t\t\t'void main() {',\n\n\t\t\t\t'\tvUV = uv;',\n\n\t\t\t\t'\tvec2 pos = position;',\n\n\t\t\t\t'\tif ( renderType == 2 ) {',\n\n\t\t\t\t'\t\tvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );',\n\t\t\t\t'\t\tvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );',\n\t\t\t\t'\t\tvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );',\n\t\t\t\t'\t\tvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );',\n\t\t\t\t'\t\tvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );',\n\t\t\t\t'\t\tvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );',\n\t\t\t\t'\t\tvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );',\n\t\t\t\t'\t\tvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );',\n\t\t\t\t'\t\tvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );',\n\n\t\t\t\t'\t\tvVisibility =        visibility.r / 9.0;',\n\t\t\t\t'\t\tvVisibility *= 1.0 - visibility.g / 9.0;',\n\t\t\t\t'\t\tvVisibility *=       visibility.b / 9.0;',\n\t\t\t\t'\t\tvVisibility *= 1.0 - visibility.a / 9.0;',\n\n\t\t\t\t'\t\tpos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;',\n\t\t\t\t'\t\tpos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;',\n\n\t\t\t\t'\t}',\n\n\t\t\t\t'\tgl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );',\n\n\t\t\t\t'}'\n\n\t\t\t].join( '\\n' ),\n\n\t\t\tfragmentShader: [\n\n\t\t\t\t'uniform lowp int renderType;',\n\n\t\t\t\t'uniform sampler2D map;',\n\t\t\t\t'uniform float opacity;',\n\t\t\t\t'uniform vec3 color;',\n\n\t\t\t\t'varying vec2 vUV;',\n\t\t\t\t'varying float vVisibility;',\n\n\t\t\t\t'void main() {',\n\n\t\t\t\t// pink square\n\n\t\t\t\t'\tif ( renderType == 0 ) {',\n\n\t\t\t\t'\t\tgl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );',\n\n\t\t\t\t// restore\n\n\t\t\t\t'\t} else if ( renderType == 1 ) {',\n\n\t\t\t\t'\t\tgl_FragColor = texture2D( map, vUV );',\n\n\t\t\t\t// flare\n\n\t\t\t\t'\t} else {',\n\n\t\t\t\t'\t\tvec4 texture = texture2D( map, vUV );',\n\t\t\t\t'\t\ttexture.a *= opacity * vVisibility;',\n\t\t\t\t'\t\tgl_FragColor = texture;',\n\t\t\t\t'\t\tgl_FragColor.rgb *= color;',\n\n\t\t\t\t'\t}',\n\n\t\t\t\t'}'\n\n\t\t\t].join( '\\n' )\n\n\t\t};\n\n\t\tprogram = createProgram( shader );\n\n\t\tattributes = {\n\t\t\tvertex: gl.getAttribLocation( program, 'position' ),\n\t\t\tuv: gl.getAttribLocation( program, 'uv' )\n\t\t};\n\n\t\tuniforms = {\n\t\t\trenderType: gl.getUniformLocation( program, 'renderType' ),\n\t\t\tmap: gl.getUniformLocation( program, 'map' ),\n\t\t\tocclusionMap: gl.getUniformLocation( program, 'occlusionMap' ),\n\t\t\topacity: gl.getUniformLocation( program, 'opacity' ),\n\t\t\tcolor: gl.getUniformLocation( program, 'color' ),\n\t\t\tscale: gl.getUniformLocation( program, 'scale' ),\n\t\t\trotation: gl.getUniformLocation( program, 'rotation' ),\n\t\t\tscreenPosition: gl.getUniformLocation( program, 'screenPosition' )\n\t\t};\n\n\t}\n\n\t/*\n\t * Render lens flares\n\t * Method: renders 16x16 0xff00ff-colored points scattered over the light source area,\n\t *         reads these back and calculates occlusion.\n\t */\n\n\tthis.render = function ( flares, scene, camera, viewport ) {\n\n\t\tif ( flares.length === 0 ) return;\n\n\t\tvar tempPosition = new Vector3();\n\n\t\tvar invAspect = viewport.w / viewport.z,\n\t\t\thalfViewportWidth = viewport.z * 0.5,\n\t\t\thalfViewportHeight = viewport.w * 0.5;\n\n\t\tvar size = 16 / viewport.w,\n\t\t\tscale = new Vector2( size * invAspect, size );\n\n\t\tvar screenPosition = new Vector3( 1, 1, 0 ),\n\t\t\tscreenPositionPixels = new Vector2( 1, 1 );\n\n\t\tvar validArea = new Box2();\n\n\t\tvalidArea.min.set( viewport.x, viewport.y );\n\t\tvalidArea.max.set( viewport.x + ( viewport.z - 16 ), viewport.y + ( viewport.w - 16 ) );\n\n\t\tif ( program === undefined ) {\n\n\t\t\tinit();\n\n\t\t}\n\n\t\tstate.useProgram( program );\n\n\t\tstate.initAttributes();\n\t\tstate.enableAttribute( attributes.vertex );\n\t\tstate.enableAttribute( attributes.uv );\n\t\tstate.disableUnusedAttributes();\n\n\t\t// loop through all lens flares to update their occlusion and positions\n\t\t// setup gl and common used attribs/uniforms\n\n\t\tgl.uniform1i( uniforms.occlusionMap, 0 );\n\t\tgl.uniform1i( uniforms.map, 1 );\n\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\n\t\tgl.vertexAttribPointer( attributes.vertex, 2, gl.FLOAT, false, 2 * 8, 0 );\n\t\tgl.vertexAttribPointer( attributes.uv, 2, gl.FLOAT, false, 2 * 8, 8 );\n\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\n\n\t\tstate.disable( gl.CULL_FACE );\n\t\tstate.buffers.depth.setMask( false );\n\n\t\tfor ( var i = 0, l = flares.length; i < l; i ++ ) {\n\n\t\t\tsize = 16 / viewport.w;\n\t\t\tscale.set( size * invAspect, size );\n\n\t\t\t// calc object screen position\n\n\t\t\tvar flare = flares[ i ];\n\n\t\t\ttempPosition.set( flare.matrixWorld.elements[ 12 ], flare.matrixWorld.elements[ 13 ], flare.matrixWorld.elements[ 14 ] );\n\n\t\t\ttempPosition.applyMatrix4( camera.matrixWorldInverse );\n\t\t\ttempPosition.applyMatrix4( camera.projectionMatrix );\n\n\t\t\t// setup arrays for gl programs\n\n\t\t\tscreenPosition.copy( tempPosition );\n\n\t\t\t// horizontal and vertical coordinate of the lower left corner of the pixels to copy\n\n\t\t\tscreenPositionPixels.x = viewport.x + ( screenPosition.x * halfViewportWidth ) + halfViewportWidth - 8;\n\t\t\tscreenPositionPixels.y = viewport.y + ( screenPosition.y * halfViewportHeight ) + halfViewportHeight - 8;\n\n\t\t\t// screen cull\n\n\t\t\tif ( validArea.containsPoint( screenPositionPixels ) === true ) {\n\n\t\t\t\t// save current RGB to temp texture\n\n\t\t\t\tstate.activeTexture( gl.TEXTURE0 );\n\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, null );\n\t\t\t\tstate.activeTexture( gl.TEXTURE1 );\n\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, tempTexture );\n\t\t\t\tgl.copyTexImage2D( gl.TEXTURE_2D, 0, gl.RGB, screenPositionPixels.x, screenPositionPixels.y, 16, 16, 0 );\n\n\n\t\t\t\t// render pink quad\n\n\t\t\t\tgl.uniform1i( uniforms.renderType, 0 );\n\t\t\t\tgl.uniform2f( uniforms.scale, scale.x, scale.y );\n\t\t\t\tgl.uniform3f( uniforms.screenPosition, screenPosition.x, screenPosition.y, screenPosition.z );\n\n\t\t\t\tstate.disable( gl.BLEND );\n\t\t\t\tstate.enable( gl.DEPTH_TEST );\n\n\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\n\n\n\t\t\t\t// copy result to occlusionMap\n\n\t\t\t\tstate.activeTexture( gl.TEXTURE0 );\n\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, occlusionTexture );\n\t\t\t\tgl.copyTexImage2D( gl.TEXTURE_2D, 0, gl.RGBA, screenPositionPixels.x, screenPositionPixels.y, 16, 16, 0 );\n\n\n\t\t\t\t// restore graphics\n\n\t\t\t\tgl.uniform1i( uniforms.renderType, 1 );\n\t\t\t\tstate.disable( gl.DEPTH_TEST );\n\n\t\t\t\tstate.activeTexture( gl.TEXTURE1 );\n\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, tempTexture );\n\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\n\n\n\t\t\t\t// update object positions\n\n\t\t\t\tflare.positionScreen.copy( screenPosition );\n\n\t\t\t\tif ( flare.customUpdateCallback ) {\n\n\t\t\t\t\tflare.customUpdateCallback( flare );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tflare.updateLensFlares();\n\n\t\t\t\t}\n\n\t\t\t\t// render flares\n\n\t\t\t\tgl.uniform1i( uniforms.renderType, 2 );\n\t\t\t\tstate.enable( gl.BLEND );\n\n\t\t\t\tfor ( var j = 0, jl = flare.lensFlares.length; j < jl; j ++ ) {\n\n\t\t\t\t\tvar sprite = flare.lensFlares[ j ];\n\n\t\t\t\t\tif ( sprite.opacity > 0.001 && sprite.scale > 0.001 ) {\n\n\t\t\t\t\t\tscreenPosition.x = sprite.x;\n\t\t\t\t\t\tscreenPosition.y = sprite.y;\n\t\t\t\t\t\tscreenPosition.z = sprite.z;\n\n\t\t\t\t\t\tsize = sprite.size * sprite.scale / viewport.w;\n\n\t\t\t\t\t\tscale.x = size * invAspect;\n\t\t\t\t\t\tscale.y = size;\n\n\t\t\t\t\t\tgl.uniform3f( uniforms.screenPosition, screenPosition.x, screenPosition.y, screenPosition.z );\n\t\t\t\t\t\tgl.uniform2f( uniforms.scale, scale.x, scale.y );\n\t\t\t\t\t\tgl.uniform1f( uniforms.rotation, sprite.rotation );\n\n\t\t\t\t\t\tgl.uniform1f( uniforms.opacity, sprite.opacity );\n\t\t\t\t\t\tgl.uniform3f( uniforms.color, sprite.color.r, sprite.color.g, sprite.color.b );\n\n\t\t\t\t\t\tstate.setBlending( sprite.blending, sprite.blendEquation, sprite.blendSrc, sprite.blendDst );\n\n\t\t\t\t\t\ttextures.setTexture2D( sprite.texture, 1 );\n\n\t\t\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// restore gl\n\n\t\tstate.enable( gl.CULL_FACE );\n\t\tstate.enable( gl.DEPTH_TEST );\n\t\tstate.buffers.depth.setMask( true );\n\n\t\tstate.reset();\n\n\t};\n\n\tfunction createProgram( shader ) {\n\n\t\tvar program = gl.createProgram();\n\n\t\tvar fragmentShader = gl.createShader( gl.FRAGMENT_SHADER );\n\t\tvar vertexShader = gl.createShader( gl.VERTEX_SHADER );\n\n\t\tvar prefix = 'precision ' + capabilities.precision + ' float;\\n';\n\n\t\tgl.shaderSource( fragmentShader, prefix + shader.fragmentShader );\n\t\tgl.shaderSource( vertexShader, prefix + shader.vertexShader );\n\n\t\tgl.compileShader( fragmentShader );\n\t\tgl.compileShader( vertexShader );\n\n\t\tgl.attachShader( program, fragmentShader );\n\t\tgl.attachShader( program, vertexShader );\n\n\t\tgl.linkProgram( program );\n\n\t\treturn program;\n\n\t}\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction CanvasTexture( canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\n\n\tTexture.call( this, canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\tthis.needsUpdate = true;\n\n}\n\nCanvasTexture.prototype = Object.create( Texture.prototype );\nCanvasTexture.prototype.constructor = CanvasTexture;\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction WebGLSpriteRenderer( renderer, gl, state, textures, capabilities ) {\n\n\tvar vertexBuffer, elementBuffer;\n\tvar program, attributes, uniforms;\n\n\tvar texture;\n\n\t// decompose matrixWorld\n\n\tvar spritePosition = new Vector3();\n\tvar spriteRotation = new Quaternion();\n\tvar spriteScale = new Vector3();\n\n\tfunction init() {\n\n\t\tvar vertices = new Float32Array( [\n\t\t\t- 0.5, - 0.5, 0, 0,\n\t\t\t  0.5, - 0.5, 1, 0,\n\t\t\t  0.5, 0.5, 1, 1,\n\t\t\t- 0.5, 0.5, 0, 1\n\t\t] );\n\n\t\tvar faces = new Uint16Array( [\n\t\t\t0, 1, 2,\n\t\t\t0, 2, 3\n\t\t] );\n\n\t\tvertexBuffer = gl.createBuffer();\n\t\telementBuffer = gl.createBuffer();\n\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\n\t\tgl.bufferData( gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW );\n\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\n\t\tgl.bufferData( gl.ELEMENT_ARRAY_BUFFER, faces, gl.STATIC_DRAW );\n\n\t\tprogram = createProgram();\n\n\t\tattributes = {\n\t\t\tposition: gl.getAttribLocation( program, 'position' ),\n\t\t\tuv: gl.getAttribLocation( program, 'uv' )\n\t\t};\n\n\t\tuniforms = {\n\t\t\tuvOffset: gl.getUniformLocation( program, 'uvOffset' ),\n\t\t\tuvScale: gl.getUniformLocation( program, 'uvScale' ),\n\n\t\t\trotation: gl.getUniformLocation( program, 'rotation' ),\n\t\t\tscale: gl.getUniformLocation( program, 'scale' ),\n\n\t\t\tcolor: gl.getUniformLocation( program, 'color' ),\n\t\t\tmap: gl.getUniformLocation( program, 'map' ),\n\t\t\topacity: gl.getUniformLocation( program, 'opacity' ),\n\n\t\t\tmodelViewMatrix: gl.getUniformLocation( program, 'modelViewMatrix' ),\n\t\t\tprojectionMatrix: gl.getUniformLocation( program, 'projectionMatrix' ),\n\n\t\t\tfogType: gl.getUniformLocation( program, 'fogType' ),\n\t\t\tfogDensity: gl.getUniformLocation( program, 'fogDensity' ),\n\t\t\tfogNear: gl.getUniformLocation( program, 'fogNear' ),\n\t\t\tfogFar: gl.getUniformLocation( program, 'fogFar' ),\n\t\t\tfogColor: gl.getUniformLocation( program, 'fogColor' ),\n\t\t\tfogDepth: gl.getUniformLocation( program, 'fogDepth' ),\n\n\t\t\talphaTest: gl.getUniformLocation( program, 'alphaTest' )\n\t\t};\n\n\t\tvar canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\t\tcanvas.width = 8;\n\t\tcanvas.height = 8;\n\n\t\tvar context = canvas.getContext( '2d' );\n\t\tcontext.fillStyle = 'white';\n\t\tcontext.fillRect( 0, 0, 8, 8 );\n\n\t\ttexture = new CanvasTexture( canvas );\n\n\t}\n\n\tthis.render = function ( sprites, scene, camera ) {\n\n\t\tif ( sprites.length === 0 ) return;\n\n\t\t// setup gl\n\n\t\tif ( program === undefined ) {\n\n\t\t\tinit();\n\n\t\t}\n\n\t\tstate.useProgram( program );\n\n\t\tstate.initAttributes();\n\t\tstate.enableAttribute( attributes.position );\n\t\tstate.enableAttribute( attributes.uv );\n\t\tstate.disableUnusedAttributes();\n\n\t\tstate.disable( gl.CULL_FACE );\n\t\tstate.enable( gl.BLEND );\n\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\n\t\tgl.vertexAttribPointer( attributes.position, 2, gl.FLOAT, false, 2 * 8, 0 );\n\t\tgl.vertexAttribPointer( attributes.uv, 2, gl.FLOAT, false, 2 * 8, 8 );\n\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\n\n\t\tgl.uniformMatrix4fv( uniforms.projectionMatrix, false, camera.projectionMatrix.elements );\n\n\t\tstate.activeTexture( gl.TEXTURE0 );\n\t\tgl.uniform1i( uniforms.map, 0 );\n\n\t\tvar oldFogType = 0;\n\t\tvar sceneFogType = 0;\n\t\tvar fog = scene.fog;\n\n\t\tif ( fog ) {\n\n\t\t\tgl.uniform3f( uniforms.fogColor, fog.color.r, fog.color.g, fog.color.b );\n\n\t\t\tif ( fog.isFog ) {\n\n\t\t\t\tgl.uniform1f( uniforms.fogNear, fog.near );\n\t\t\t\tgl.uniform1f( uniforms.fogFar, fog.far );\n\n\t\t\t\tgl.uniform1i( uniforms.fogType, 1 );\n\t\t\t\toldFogType = 1;\n\t\t\t\tsceneFogType = 1;\n\n\t\t\t} else if ( fog.isFogExp2 ) {\n\n\t\t\t\tgl.uniform1f( uniforms.fogDensity, fog.density );\n\n\t\t\t\tgl.uniform1i( uniforms.fogType, 2 );\n\t\t\t\toldFogType = 2;\n\t\t\t\tsceneFogType = 2;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tgl.uniform1i( uniforms.fogType, 0 );\n\t\t\toldFogType = 0;\n\t\t\tsceneFogType = 0;\n\n\t\t}\n\n\n\t\t// update positions and sort\n\n\t\tfor ( var i = 0, l = sprites.length; i < l; i ++ ) {\n\n\t\t\tvar sprite = sprites[ i ];\n\n\t\t\tsprite.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, sprite.matrixWorld );\n\t\t\tsprite.z = - sprite.modelViewMatrix.elements[ 14 ];\n\n\t\t}\n\n\t\tsprites.sort( painterSortStable );\n\n\t\t// render all sprites\n\n\t\tvar scale = [];\n\n\t\tfor ( var i = 0, l = sprites.length; i < l; i ++ ) {\n\n\t\t\tvar sprite = sprites[ i ];\n\t\t\tvar material = sprite.material;\n\n\t\t\tif ( material.visible === false ) continue;\n\n\t\t\tsprite.onBeforeRender( renderer, scene, camera, undefined, material, undefined );\n\n\t\t\tgl.uniform1f( uniforms.alphaTest, material.alphaTest );\n\t\t\tgl.uniformMatrix4fv( uniforms.modelViewMatrix, false, sprite.modelViewMatrix.elements );\n\n\t\t\tsprite.matrixWorld.decompose( spritePosition, spriteRotation, spriteScale );\n\n\t\t\tscale[ 0 ] = spriteScale.x;\n\t\t\tscale[ 1 ] = spriteScale.y;\n\n\t\t\tvar fogType = 0;\n\n\t\t\tif ( scene.fog && material.fog ) {\n\n\t\t\t\tfogType = sceneFogType;\n\n\t\t\t}\n\n\t\t\tif ( oldFogType !== fogType ) {\n\n\t\t\t\tgl.uniform1i( uniforms.fogType, fogType );\n\t\t\t\toldFogType = fogType;\n\n\t\t\t}\n\n\t\t\tif ( material.map !== null ) {\n\n\t\t\t\tgl.uniform2f( uniforms.uvOffset, material.map.offset.x, material.map.offset.y );\n\t\t\t\tgl.uniform2f( uniforms.uvScale, material.map.repeat.x, material.map.repeat.y );\n\n\t\t\t} else {\n\n\t\t\t\tgl.uniform2f( uniforms.uvOffset, 0, 0 );\n\t\t\t\tgl.uniform2f( uniforms.uvScale, 1, 1 );\n\n\t\t\t}\n\n\t\t\tgl.uniform1f( uniforms.opacity, material.opacity );\n\t\t\tgl.uniform3f( uniforms.color, material.color.r, material.color.g, material.color.b );\n\n\t\t\tgl.uniform1f( uniforms.rotation, material.rotation );\n\t\t\tgl.uniform2fv( uniforms.scale, scale );\n\n\t\t\tstate.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha, material.premultipliedAlpha );\n\t\t\tstate.buffers.depth.setTest( material.depthTest );\n\t\t\tstate.buffers.depth.setMask( material.depthWrite );\n\t\t\tstate.buffers.color.setMask( material.colorWrite );\n\n\t\t\ttextures.setTexture2D( material.map || texture, 0 );\n\n\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\n\n\t\t\tsprite.onAfterRender( renderer, scene, camera, undefined, material, undefined );\n\n\t\t}\n\n\t\t// restore gl\n\n\t\tstate.enable( gl.CULL_FACE );\n\n\t\tstate.reset();\n\n\t};\n\n\tfunction createProgram() {\n\n\t\tvar program = gl.createProgram();\n\n\t\tvar vertexShader = gl.createShader( gl.VERTEX_SHADER );\n\t\tvar fragmentShader = gl.createShader( gl.FRAGMENT_SHADER );\n\n\t\tgl.shaderSource( vertexShader, [\n\n\t\t\t'precision ' + capabilities.precision + ' float;',\n\n\t\t\t'#define SHADER_NAME ' + 'SpriteMaterial',\n\n\t\t\t'uniform mat4 modelViewMatrix;',\n\t\t\t'uniform mat4 projectionMatrix;',\n\t\t\t'uniform float rotation;',\n\t\t\t'uniform vec2 scale;',\n\t\t\t'uniform vec2 uvOffset;',\n\t\t\t'uniform vec2 uvScale;',\n\n\t\t\t'attribute vec2 position;',\n\t\t\t'attribute vec2 uv;',\n\n\t\t\t'varying vec2 vUV;',\n\t\t\t'varying float fogDepth;',\n\n\t\t\t'void main() {',\n\n\t\t\t'\tvUV = uvOffset + uv * uvScale;',\n\n\t\t\t'\tvec2 alignedPosition = position * scale;',\n\n\t\t\t'\tvec2 rotatedPosition;',\n\t\t\t'\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;',\n\t\t\t'\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;',\n\n\t\t\t'\tvec4 mvPosition;',\n\n\t\t\t'\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );',\n\t\t\t'\tmvPosition.xy += rotatedPosition;',\n\n\t\t\t'\tgl_Position = projectionMatrix * mvPosition;',\n\n\t\t\t'\tfogDepth = - mvPosition.z;',\n\n\t\t\t'}'\n\n\t\t].join( '\\n' ) );\n\n\t\tgl.shaderSource( fragmentShader, [\n\n\t\t\t'precision ' + capabilities.precision + ' float;',\n\n\t\t\t'#define SHADER_NAME ' + 'SpriteMaterial',\n\n\t\t\t'uniform vec3 color;',\n\t\t\t'uniform sampler2D map;',\n\t\t\t'uniform float opacity;',\n\n\t\t\t'uniform int fogType;',\n\t\t\t'uniform vec3 fogColor;',\n\t\t\t'uniform float fogDensity;',\n\t\t\t'uniform float fogNear;',\n\t\t\t'uniform float fogFar;',\n\t\t\t'uniform float alphaTest;',\n\n\t\t\t'varying vec2 vUV;',\n\t\t\t'varying float fogDepth;',\n\n\t\t\t'void main() {',\n\n\t\t\t'\tvec4 texture = texture2D( map, vUV );',\n\n\t\t\t'\tgl_FragColor = vec4( color * texture.xyz, texture.a * opacity );',\n\n\t\t\t'\tif ( gl_FragColor.a < alphaTest ) discard;',\n\n\t\t\t'\tif ( fogType > 0 ) {',\n\n\t\t\t'\t\tfloat fogFactor = 0.0;',\n\n\t\t\t'\t\tif ( fogType == 1 ) {',\n\n\t\t\t'\t\t\tfogFactor = smoothstep( fogNear, fogFar, fogDepth );',\n\n\t\t\t'\t\t} else {',\n\n\t\t\t'\t\t\tconst float LOG2 = 1.442695;',\n\t\t\t'\t\t\tfogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );',\n\t\t\t'\t\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );',\n\n\t\t\t'\t\t}',\n\n\t\t\t'\t\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );',\n\n\t\t\t'\t}',\n\n\t\t\t'}'\n\n\t\t].join( '\\n' ) );\n\n\t\tgl.compileShader( vertexShader );\n\t\tgl.compileShader( fragmentShader );\n\n\t\tgl.attachShader( program, vertexShader );\n\t\tgl.attachShader( program, fragmentShader );\n\n\t\tgl.linkProgram( program );\n\n\t\treturn program;\n\n\t}\n\n\tfunction painterSortStable( a, b ) {\n\n\t\tif ( a.renderOrder !== b.renderOrder ) {\n\n\t\t\treturn a.renderOrder - b.renderOrder;\n\n\t\t} else if ( a.z !== b.z ) {\n\n\t\t\treturn b.z - a.z;\n\n\t\t} else {\n\n\t\t\treturn b.id - a.id;\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nvar materialId = 0;\n\nfunction Material() {\n\n\tObject.defineProperty( this, 'id', { value: materialId ++ } );\n\n\tthis.uuid = _Math.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Material';\n\n\tthis.fog = true;\n\tthis.lights = true;\n\n\tthis.blending = NormalBlending;\n\tthis.side = FrontSide;\n\tthis.flatShading = false;\n\tthis.vertexColors = NoColors; // THREE.NoColors, THREE.VertexColors, THREE.FaceColors\n\n\tthis.opacity = 1;\n\tthis.transparent = false;\n\n\tthis.blendSrc = SrcAlphaFactor;\n\tthis.blendDst = OneMinusSrcAlphaFactor;\n\tthis.blendEquation = AddEquation;\n\tthis.blendSrcAlpha = null;\n\tthis.blendDstAlpha = null;\n\tthis.blendEquationAlpha = null;\n\n\tthis.depthFunc = LessEqualDepth;\n\tthis.depthTest = true;\n\tthis.depthWrite = true;\n\n\tthis.clippingPlanes = null;\n\tthis.clipIntersection = false;\n\tthis.clipShadows = false;\n\n\tthis.colorWrite = true;\n\n\tthis.precision = null; // override the renderer's default precision for this material\n\n\tthis.polygonOffset = false;\n\tthis.polygonOffsetFactor = 0;\n\tthis.polygonOffsetUnits = 0;\n\n\tthis.dithering = false;\n\n\tthis.alphaTest = 0;\n\tthis.premultipliedAlpha = false;\n\n\tthis.overdraw = 0; // Overdrawn pixels (typically between 0 and 1) for fixing antialiasing gaps in CanvasRenderer\n\n\tthis.visible = true;\n\n\tthis.userData = {};\n\n\tthis.needsUpdate = true;\n\n}\n\nMaterial.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Material,\n\n\tisMaterial: true,\n\n\tonBeforeCompile: function () {},\n\n\tsetValues: function ( values ) {\n\n\t\tif ( values === undefined ) return;\n\n\t\tfor ( var key in values ) {\n\n\t\t\tvar newValue = values[ key ];\n\n\t\t\tif ( newValue === undefined ) {\n\n\t\t\t\tconsole.warn( \"THREE.Material: '\" + key + \"' parameter is undefined.\" );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\t// for backward compatability if shading is set in the constructor\n\t\t\tif ( key === 'shading' ) {\n\n\t\t\t\tconsole.warn( 'THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.' );\n\t\t\t\tthis.flatShading = ( newValue === FlatShading ) ? true : false;\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tvar currentValue = this[ key ];\n\n\t\t\tif ( currentValue === undefined ) {\n\n\t\t\t\tconsole.warn( \"THREE.\" + this.type + \": '\" + key + \"' is not a property of this material.\" );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tif ( currentValue && currentValue.isColor ) {\n\n\t\t\t\tcurrentValue.set( newValue );\n\n\t\t\t} else if ( ( currentValue && currentValue.isVector3 ) && ( newValue && newValue.isVector3 ) ) {\n\n\t\t\t\tcurrentValue.copy( newValue );\n\n\t\t\t} else if ( key === 'overdraw' ) {\n\n\t\t\t\t// ensure overdraw is backwards-compatible with legacy boolean type\n\t\t\t\tthis[ key ] = Number( newValue );\n\n\t\t\t} else {\n\n\t\t\t\tthis[ key ] = newValue;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar isRoot = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( isRoot ) {\n\n\t\t\tmeta = {\n\t\t\t\ttextures: {},\n\t\t\t\timages: {}\n\t\t\t};\n\n\t\t}\n\n\t\tvar data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Material',\n\t\t\t\tgenerator: 'Material.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard Material serialization\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\n\t\tif ( this.name !== '' ) data.name = this.name;\n\n\t\tif ( this.color && this.color.isColor ) data.color = this.color.getHex();\n\n\t\tif ( this.roughness !== undefined ) data.roughness = this.roughness;\n\t\tif ( this.metalness !== undefined ) data.metalness = this.metalness;\n\n\t\tif ( this.emissive && this.emissive.isColor ) data.emissive = this.emissive.getHex();\n\t\tif ( this.emissiveIntensity !== 1 ) data.emissiveIntensity = this.emissiveIntensity;\n\n\t\tif ( this.specular && this.specular.isColor ) data.specular = this.specular.getHex();\n\t\tif ( this.shininess !== undefined ) data.shininess = this.shininess;\n\t\tif ( this.clearCoat !== undefined ) data.clearCoat = this.clearCoat;\n\t\tif ( this.clearCoatRoughness !== undefined ) data.clearCoatRoughness = this.clearCoatRoughness;\n\n\t\tif ( this.map && this.map.isTexture ) data.map = this.map.toJSON( meta ).uuid;\n\t\tif ( this.alphaMap && this.alphaMap.isTexture ) data.alphaMap = this.alphaMap.toJSON( meta ).uuid;\n\t\tif ( this.lightMap && this.lightMap.isTexture ) data.lightMap = this.lightMap.toJSON( meta ).uuid;\n\t\tif ( this.bumpMap && this.bumpMap.isTexture ) {\n\n\t\t\tdata.bumpMap = this.bumpMap.toJSON( meta ).uuid;\n\t\t\tdata.bumpScale = this.bumpScale;\n\n\t\t}\n\t\tif ( this.normalMap && this.normalMap.isTexture ) {\n\n\t\t\tdata.normalMap = this.normalMap.toJSON( meta ).uuid;\n\t\t\tdata.normalScale = this.normalScale.toArray();\n\n\t\t}\n\t\tif ( this.displacementMap && this.displacementMap.isTexture ) {\n\n\t\t\tdata.displacementMap = this.displacementMap.toJSON( meta ).uuid;\n\t\t\tdata.displacementScale = this.displacementScale;\n\t\t\tdata.displacementBias = this.displacementBias;\n\n\t\t}\n\t\tif ( this.roughnessMap && this.roughnessMap.isTexture ) data.roughnessMap = this.roughnessMap.toJSON( meta ).uuid;\n\t\tif ( this.metalnessMap && this.metalnessMap.isTexture ) data.metalnessMap = this.metalnessMap.toJSON( meta ).uuid;\n\n\t\tif ( this.emissiveMap && this.emissiveMap.isTexture ) data.emissiveMap = this.emissiveMap.toJSON( meta ).uuid;\n\t\tif ( this.specularMap && this.specularMap.isTexture ) data.specularMap = this.specularMap.toJSON( meta ).uuid;\n\n\t\tif ( this.envMap && this.envMap.isTexture ) {\n\n\t\t\tdata.envMap = this.envMap.toJSON( meta ).uuid;\n\t\t\tdata.reflectivity = this.reflectivity; // Scale behind envMap\n\n\t\t}\n\n\t\tif ( this.gradientMap && this.gradientMap.isTexture ) {\n\n\t\t\tdata.gradientMap = this.gradientMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.size !== undefined ) data.size = this.size;\n\t\tif ( this.sizeAttenuation !== undefined ) data.sizeAttenuation = this.sizeAttenuation;\n\n\t\tif ( this.blending !== NormalBlending ) data.blending = this.blending;\n\t\tif ( this.flatShading === true ) data.flatShading = this.flatShading;\n\t\tif ( this.side !== FrontSide ) data.side = this.side;\n\t\tif ( this.vertexColors !== NoColors ) data.vertexColors = this.vertexColors;\n\n\t\tif ( this.opacity < 1 ) data.opacity = this.opacity;\n\t\tif ( this.transparent === true ) data.transparent = this.transparent;\n\n\t\tdata.depthFunc = this.depthFunc;\n\t\tdata.depthTest = this.depthTest;\n\t\tdata.depthWrite = this.depthWrite;\n\n\t\t// rotation (SpriteMaterial)\n\t\tif ( this.rotation !== 0 ) data.rotation = this.rotation;\n\n\t\tif ( this.linewidth !== 1 ) data.linewidth = this.linewidth;\n\t\tif ( this.dashSize !== undefined ) data.dashSize = this.dashSize;\n\t\tif ( this.gapSize !== undefined ) data.gapSize = this.gapSize;\n\t\tif ( this.scale !== undefined ) data.scale = this.scale;\n\n\t\tif ( this.dithering === true ) data.dithering = true;\n\n\t\tif ( this.alphaTest > 0 ) data.alphaTest = this.alphaTest;\n\t\tif ( this.premultipliedAlpha === true ) data.premultipliedAlpha = this.premultipliedAlpha;\n\n\t\tif ( this.wireframe === true ) data.wireframe = this.wireframe;\n\t\tif ( this.wireframeLinewidth > 1 ) data.wireframeLinewidth = this.wireframeLinewidth;\n\t\tif ( this.wireframeLinecap !== 'round' ) data.wireframeLinecap = this.wireframeLinecap;\n\t\tif ( this.wireframeLinejoin !== 'round' ) data.wireframeLinejoin = this.wireframeLinejoin;\n\n\t\tif ( this.morphTargets === true ) data.morphTargets = true;\n\t\tif ( this.skinning === true ) data.skinning = true;\n\n\t\tif ( this.visible === false ) data.visible = false;\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) data.userData = this.userData;\n\n\t\t// TODO: Copied from Object3D.toJSON\n\n\t\tfunction extractFromCache( cache ) {\n\n\t\t\tvar values = [];\n\n\t\t\tfor ( var key in cache ) {\n\n\t\t\t\tvar data = cache[ key ];\n\t\t\t\tdelete data.metadata;\n\t\t\t\tvalues.push( data );\n\n\t\t\t}\n\n\t\t\treturn values;\n\n\t\t}\n\n\t\tif ( isRoot ) {\n\n\t\t\tvar textures = extractFromCache( meta.textures );\n\t\t\tvar images = extractFromCache( meta.images );\n\n\t\t\tif ( textures.length > 0 ) data.textures = textures;\n\t\t\tif ( images.length > 0 ) data.images = images;\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.fog = source.fog;\n\t\tthis.lights = source.lights;\n\n\t\tthis.blending = source.blending;\n\t\tthis.side = source.side;\n\t\tthis.flatShading = source.flatShading;\n\t\tthis.vertexColors = source.vertexColors;\n\n\t\tthis.opacity = source.opacity;\n\t\tthis.transparent = source.transparent;\n\n\t\tthis.blendSrc = source.blendSrc;\n\t\tthis.blendDst = source.blendDst;\n\t\tthis.blendEquation = source.blendEquation;\n\t\tthis.blendSrcAlpha = source.blendSrcAlpha;\n\t\tthis.blendDstAlpha = source.blendDstAlpha;\n\t\tthis.blendEquationAlpha = source.blendEquationAlpha;\n\n\t\tthis.depthFunc = source.depthFunc;\n\t\tthis.depthTest = source.depthTest;\n\t\tthis.depthWrite = source.depthWrite;\n\n\t\tthis.colorWrite = source.colorWrite;\n\n\t\tthis.precision = source.precision;\n\n\t\tthis.polygonOffset = source.polygonOffset;\n\t\tthis.polygonOffsetFactor = source.polygonOffsetFactor;\n\t\tthis.polygonOffsetUnits = source.polygonOffsetUnits;\n\n\t\tthis.dithering = source.dithering;\n\n\t\tthis.alphaTest = source.alphaTest;\n\t\tthis.premultipliedAlpha = source.premultipliedAlpha;\n\n\t\tthis.overdraw = source.overdraw;\n\n\t\tthis.visible = source.visible;\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\tthis.clipShadows = source.clipShadows;\n\t\tthis.clipIntersection = source.clipIntersection;\n\n\t\tvar srcPlanes = source.clippingPlanes,\n\t\t\tdstPlanes = null;\n\n\t\tif ( srcPlanes !== null ) {\n\n\t\t\tvar n = srcPlanes.length;\n\t\t\tdstPlanes = new Array( n );\n\n\t\t\tfor ( var i = 0; i !== n; ++ i )\n\t\t\t\tdstPlanes[ i ] = srcPlanes[ i ].clone();\n\n\t\t}\n\n\t\tthis.clippingPlanes = dstPlanes;\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author bhouston / https://clara.io\n * @author WestLangley / http://github.com/WestLangley\n *\n * parameters = {\n *\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>\n * }\n */\n\nfunction MeshDepthMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshDepthMaterial';\n\n\tthis.depthPacking = BasicDepthPacking;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\n\tthis.map = null;\n\n\tthis.alphaMap = null;\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.fog = false;\n\tthis.lights = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshDepthMaterial.prototype = Object.create( Material.prototype );\nMeshDepthMaterial.prototype.constructor = MeshDepthMaterial;\n\nMeshDepthMaterial.prototype.isMeshDepthMaterial = true;\n\nMeshDepthMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.depthPacking = source.depthPacking;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\n\tthis.map = source.map;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\treturn this;\n\n};\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n *\n * parameters = {\n *\n *  referencePosition: <float>,\n *  nearDistance: <float>,\n *  farDistance: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>\n *\n * }\n */\n\nfunction MeshDistanceMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshDistanceMaterial';\n\n\tthis.referencePosition = new Vector3();\n\tthis.nearDistance = 1;\n\tthis.farDistance = 1000;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\n\tthis.map = null;\n\n\tthis.alphaMap = null;\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.fog = false;\n\tthis.lights = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshDistanceMaterial.prototype = Object.create( Material.prototype );\nMeshDistanceMaterial.prototype.constructor = MeshDistanceMaterial;\n\nMeshDistanceMaterial.prototype.isMeshDistanceMaterial = true;\n\nMeshDistanceMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.referencePosition.copy( source.referencePosition );\n\tthis.nearDistance = source.nearDistance;\n\tthis.farDistance = source.farDistance;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\n\tthis.map = source.map;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\treturn this;\n\n};\n\n/**\n * @author bhouston / http://clara.io\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction Box3( min, max ) {\n\n\tthis.min = ( min !== undefined ) ? min : new Vector3( + Infinity, + Infinity, + Infinity );\n\tthis.max = ( max !== undefined ) ? max : new Vector3( - Infinity, - Infinity, - Infinity );\n\n}\n\nObject.assign( Box3.prototype, {\n\n\tisBox3: true,\n\n\tset: function ( min, max ) {\n\n\t\tthis.min.copy( min );\n\t\tthis.max.copy( max );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromArray: function ( array ) {\n\n\t\tvar minX = + Infinity;\n\t\tvar minY = + Infinity;\n\t\tvar minZ = + Infinity;\n\n\t\tvar maxX = - Infinity;\n\t\tvar maxY = - Infinity;\n\t\tvar maxZ = - Infinity;\n\n\t\tfor ( var i = 0, l = array.length; i < l; i += 3 ) {\n\n\t\t\tvar x = array[ i ];\n\t\t\tvar y = array[ i + 1 ];\n\t\t\tvar z = array[ i + 2 ];\n\n\t\t\tif ( x < minX ) minX = x;\n\t\t\tif ( y < minY ) minY = y;\n\t\t\tif ( z < minZ ) minZ = z;\n\n\t\t\tif ( x > maxX ) maxX = x;\n\t\t\tif ( y > maxY ) maxY = y;\n\t\t\tif ( z > maxZ ) maxZ = z;\n\n\t\t}\n\n\t\tthis.min.set( minX, minY, minZ );\n\t\tthis.max.set( maxX, maxY, maxZ );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromBufferAttribute: function ( attribute ) {\n\n\t\tvar minX = + Infinity;\n\t\tvar minY = + Infinity;\n\t\tvar minZ = + Infinity;\n\n\t\tvar maxX = - Infinity;\n\t\tvar maxY = - Infinity;\n\t\tvar maxZ = - Infinity;\n\n\t\tfor ( var i = 0, l = attribute.count; i < l; i ++ ) {\n\n\t\t\tvar x = attribute.getX( i );\n\t\t\tvar y = attribute.getY( i );\n\t\t\tvar z = attribute.getZ( i );\n\n\t\t\tif ( x < minX ) minX = x;\n\t\t\tif ( y < minY ) minY = y;\n\t\t\tif ( z < minZ ) minZ = z;\n\n\t\t\tif ( x > maxX ) maxX = x;\n\t\t\tif ( y > maxY ) maxY = y;\n\t\t\tif ( z > maxZ ) maxZ = z;\n\n\t\t}\n\n\t\tthis.min.set( minX, minY, minZ );\n\t\tthis.max.set( maxX, maxY, maxZ );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tthis.makeEmpty();\n\n\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tthis.expandByPoint( points[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCenterAndSize: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function setFromCenterAndSize( center, size ) {\n\n\t\t\tvar halfSize = v1.copy( size ).multiplyScalar( 0.5 );\n\n\t\t\tthis.min.copy( center ).sub( halfSize );\n\t\t\tthis.max.copy( center ).add( halfSize );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tsetFromObject: function ( object ) {\n\n\t\tthis.makeEmpty();\n\n\t\treturn this.expandByObject( object );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( box ) {\n\n\t\tthis.min.copy( box.min );\n\t\tthis.max.copy( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tmakeEmpty: function () {\n\n\t\tthis.min.x = this.min.y = this.min.z = + Infinity;\n\t\tthis.max.x = this.max.y = this.max.z = - Infinity;\n\n\t\treturn this;\n\n\t},\n\n\tisEmpty: function () {\n\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y ) || ( this.max.z < this.min.z );\n\n\t},\n\n\tgetCenter: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Vector3();\n\t\treturn this.isEmpty() ? result.set( 0, 0, 0 ) : result.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\n\n\t},\n\n\tgetSize: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Vector3();\n\t\treturn this.isEmpty() ? result.set( 0, 0, 0 ) : result.subVectors( this.max, this.min );\n\n\t},\n\n\texpandByPoint: function ( point ) {\n\n\t\tthis.min.min( point );\n\t\tthis.max.max( point );\n\n\t\treturn this;\n\n\t},\n\n\texpandByVector: function ( vector ) {\n\n\t\tthis.min.sub( vector );\n\t\tthis.max.add( vector );\n\n\t\treturn this;\n\n\t},\n\n\texpandByScalar: function ( scalar ) {\n\n\t\tthis.min.addScalar( - scalar );\n\t\tthis.max.addScalar( scalar );\n\n\t\treturn this;\n\n\t},\n\n\texpandByObject: function () {\n\n\t\t// Computes the world-axis-aligned bounding box of an object (including its children),\n\t\t// accounting for both the object's, and children's, world transforms\n\n\t\tvar scope, i, l;\n\n\t\tvar v1 = new Vector3();\n\n\t\tfunction traverse( node ) {\n\n\t\t\tvar geometry = node.geometry;\n\n\t\t\tif ( geometry !== undefined ) {\n\n\t\t\t\tif ( geometry.isGeometry ) {\n\n\t\t\t\t\tvar vertices = geometry.vertices;\n\n\t\t\t\t\tfor ( i = 0, l = vertices.length; i < l; i ++ ) {\n\n\t\t\t\t\t\tv1.copy( vertices[ i ] );\n\t\t\t\t\t\tv1.applyMatrix4( node.matrixWorld );\n\n\t\t\t\t\t\tscope.expandByPoint( v1 );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( geometry.isBufferGeometry ) {\n\n\t\t\t\t\tvar attribute = geometry.attributes.position;\n\n\t\t\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\t\t\tfor ( i = 0, l = attribute.count; i < l; i ++ ) {\n\n\t\t\t\t\t\t\tv1.fromBufferAttribute( attribute, i ).applyMatrix4( node.matrixWorld );\n\n\t\t\t\t\t\t\tscope.expandByPoint( v1 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn function expandByObject( object ) {\n\n\t\t\tscope = this;\n\n\t\t\tobject.updateMatrixWorld( true );\n\n\t\t\tobject.traverse( traverse );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tcontainsPoint: function ( point ) {\n\n\t\treturn point.x < this.min.x || point.x > this.max.x ||\n\t\t\tpoint.y < this.min.y || point.y > this.max.y ||\n\t\t\tpoint.z < this.min.z || point.z > this.max.z ? false : true;\n\n\t},\n\n\tcontainsBox: function ( box ) {\n\n\t\treturn this.min.x <= box.min.x && box.max.x <= this.max.x &&\n\t\t\tthis.min.y <= box.min.y && box.max.y <= this.max.y &&\n\t\t\tthis.min.z <= box.min.z && box.max.z <= this.max.z;\n\n\t},\n\n\tgetParameter: function ( point, optionalTarget ) {\n\n\t\t// This can potentially have a divide by zero if the box\n\t\t// has a size dimension of 0.\n\n\t\tvar result = optionalTarget || new Vector3();\n\n\t\treturn result.set(\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y ),\n\t\t\t( point.z - this.min.z ) / ( this.max.z - this.min.z )\n\t\t);\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\t// using 6 splitting planes to rule out intersections.\n\t\treturn box.max.x < this.min.x || box.min.x > this.max.x ||\n\t\t\tbox.max.y < this.min.y || box.min.y > this.max.y ||\n\t\t\tbox.max.z < this.min.z || box.min.z > this.max.z ? false : true;\n\n\t},\n\n\tintersectsSphere: ( function () {\n\n\t\tvar closestPoint = new Vector3();\n\n\t\treturn function intersectsSphere( sphere ) {\n\n\t\t\t// Find the point on the AABB closest to the sphere center.\n\t\t\tthis.clampPoint( sphere.center, closestPoint );\n\n\t\t\t// If that point is inside the sphere, the AABB and sphere intersect.\n\t\t\treturn closestPoint.distanceToSquared( sphere.center ) <= ( sphere.radius * sphere.radius );\n\n\t\t};\n\n\t} )(),\n\n\tintersectsPlane: function ( plane ) {\n\n\t\t// We compute the minimum and maximum dot product values. If those values\n\t\t// are on the same side (back or front) of the plane, then there is no intersection.\n\n\t\tvar min, max;\n\n\t\tif ( plane.normal.x > 0 ) {\n\n\t\t\tmin = plane.normal.x * this.min.x;\n\t\t\tmax = plane.normal.x * this.max.x;\n\n\t\t} else {\n\n\t\t\tmin = plane.normal.x * this.max.x;\n\t\t\tmax = plane.normal.x * this.min.x;\n\n\t\t}\n\n\t\tif ( plane.normal.y > 0 ) {\n\n\t\t\tmin += plane.normal.y * this.min.y;\n\t\t\tmax += plane.normal.y * this.max.y;\n\n\t\t} else {\n\n\t\t\tmin += plane.normal.y * this.max.y;\n\t\t\tmax += plane.normal.y * this.min.y;\n\n\t\t}\n\n\t\tif ( plane.normal.z > 0 ) {\n\n\t\t\tmin += plane.normal.z * this.min.z;\n\t\t\tmax += plane.normal.z * this.max.z;\n\n\t\t} else {\n\n\t\t\tmin += plane.normal.z * this.max.z;\n\t\t\tmax += plane.normal.z * this.min.z;\n\n\t\t}\n\n\t\treturn ( min <= plane.constant && max >= plane.constant );\n\n\t},\n\n\tclampPoint: function ( point, optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Vector3();\n\t\treturn result.copy( point ).clamp( this.min, this.max );\n\n\t},\n\n\tdistanceToPoint: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function distanceToPoint( point ) {\n\n\t\t\tvar clampedPoint = v1.copy( point ).clamp( this.min, this.max );\n\t\t\treturn clampedPoint.sub( point ).length();\n\n\t\t};\n\n\t}(),\n\n\tgetBoundingSphere: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function getBoundingSphere( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new Sphere();\n\n\t\t\tthis.getCenter( result.center );\n\n\t\t\tresult.radius = this.getSize( v1 ).length() * 0.5;\n\n\t\t\treturn result;\n\n\t\t};\n\n\t}(),\n\n\tintersect: function ( box ) {\n\n\t\tthis.min.max( box.min );\n\t\tthis.max.min( box.max );\n\n\t\t// ensure that if there is no overlap, the result is fully empty, not slightly empty with non-inf/+inf values that will cause subsequence intersects to erroneously return valid values.\n\t\tif ( this.isEmpty() ) this.makeEmpty();\n\n\t\treturn this;\n\n\t},\n\n\tunion: function ( box ) {\n\n\t\tthis.min.min( box.min );\n\t\tthis.max.max( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function () {\n\n\t\tvar points = [\n\t\t\tnew Vector3(),\n\t\t\tnew Vector3(),\n\t\t\tnew Vector3(),\n\t\t\tnew Vector3(),\n\t\t\tnew Vector3(),\n\t\t\tnew Vector3(),\n\t\t\tnew Vector3(),\n\t\t\tnew Vector3()\n\t\t];\n\n\t\treturn function applyMatrix4( matrix ) {\n\n\t\t\t// transform of empty box is an empty box.\n\t\t\tif ( this.isEmpty() ) return this;\n\n\t\t\t// NOTE: I am using a binary pattern to specify all 2^3 combinations below\n\t\t\tpoints[ 0 ].set( this.min.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 000\n\t\t\tpoints[ 1 ].set( this.min.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 001\n\t\t\tpoints[ 2 ].set( this.min.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 010\n\t\t\tpoints[ 3 ].set( this.min.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 011\n\t\t\tpoints[ 4 ].set( this.max.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 100\n\t\t\tpoints[ 5 ].set( this.max.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 101\n\t\t\tpoints[ 6 ].set( this.max.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 110\n\t\t\tpoints[ 7 ].set( this.max.x, this.max.y, this.max.z ).applyMatrix4( matrix );\t// 111\n\n\t\t\tthis.setFromPoints( points );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.min.add( offset );\n\t\tthis.max.add( offset );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( box ) {\n\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\n\n\t}\n\n} );\n\n/**\n * @author bhouston / http://clara.io\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Sphere( center, radius ) {\n\n\tthis.center = ( center !== undefined ) ? center : new Vector3();\n\tthis.radius = ( radius !== undefined ) ? radius : 0;\n\n}\n\nObject.assign( Sphere.prototype, {\n\n\tset: function ( center, radius ) {\n\n\t\tthis.center.copy( center );\n\t\tthis.radius = radius;\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function () {\n\n\t\tvar box = new Box3();\n\n\t\treturn function setFromPoints( points, optionalCenter ) {\n\n\t\t\tvar center = this.center;\n\n\t\t\tif ( optionalCenter !== undefined ) {\n\n\t\t\t\tcenter.copy( optionalCenter );\n\n\t\t\t} else {\n\n\t\t\t\tbox.setFromPoints( points ).getCenter( center );\n\n\t\t\t}\n\n\t\t\tvar maxRadiusSq = 0;\n\n\t\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( points[ i ] ) );\n\n\t\t\t}\n\n\t\t\tthis.radius = Math.sqrt( maxRadiusSq );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( sphere ) {\n\n\t\tthis.center.copy( sphere.center );\n\t\tthis.radius = sphere.radius;\n\n\t\treturn this;\n\n\t},\n\n\tempty: function () {\n\n\t\treturn ( this.radius <= 0 );\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\treturn ( point.distanceToSquared( this.center ) <= ( this.radius * this.radius ) );\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\treturn ( point.distanceTo( this.center ) - this.radius );\n\n\t},\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\tvar radiusSum = this.radius + sphere.radius;\n\n\t\treturn sphere.center.distanceToSquared( this.center ) <= ( radiusSum * radiusSum );\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\treturn box.intersectsSphere( this );\n\n\t},\n\n\tintersectsPlane: function ( plane ) {\n\n\t\treturn Math.abs( plane.distanceToPoint( this.center ) ) <= this.radius;\n\n\t},\n\n\tclampPoint: function ( point, optionalTarget ) {\n\n\t\tvar deltaLengthSq = this.center.distanceToSquared( point );\n\n\t\tvar result = optionalTarget || new Vector3();\n\n\t\tresult.copy( point );\n\n\t\tif ( deltaLengthSq > ( this.radius * this.radius ) ) {\n\n\t\t\tresult.sub( this.center ).normalize();\n\t\t\tresult.multiplyScalar( this.radius ).add( this.center );\n\n\t\t}\n\n\t\treturn result;\n\n\t},\n\n\tgetBoundingBox: function ( optionalTarget ) {\n\n\t\tvar box = optionalTarget || new Box3();\n\n\t\tbox.set( this.center, this.center );\n\t\tbox.expandByScalar( this.radius );\n\n\t\treturn box;\n\n\t},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tthis.center.applyMatrix4( matrix );\n\t\tthis.radius = this.radius * matrix.getMaxScaleOnAxis();\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.center.add( offset );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( sphere ) {\n\n\t\treturn sphere.center.equals( this.center ) && ( sphere.radius === this.radius );\n\n\t}\n\n} );\n\n/**\n * @author bhouston / http://clara.io\n */\n\nfunction Plane( normal, constant ) {\n\n\t// normal is assumed to be normalized\n\n\tthis.normal = ( normal !== undefined ) ? normal : new Vector3( 1, 0, 0 );\n\tthis.constant = ( constant !== undefined ) ? constant : 0;\n\n}\n\nObject.assign( Plane.prototype, {\n\n\tset: function ( normal, constant ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = constant;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponents: function ( x, y, z, w ) {\n\n\t\tthis.normal.set( x, y, z );\n\t\tthis.constant = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetFromNormalAndCoplanarPoint: function ( normal, point ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = - point.dot( this.normal );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCoplanarPoints: function () {\n\n\t\tvar v1 = new Vector3();\n\t\tvar v2 = new Vector3();\n\n\t\treturn function setFromCoplanarPoints( a, b, c ) {\n\n\t\t\tvar normal = v1.subVectors( c, b ).cross( v2.subVectors( a, b ) ).normalize();\n\n\t\t\t// Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\n\n\t\t\tthis.setFromNormalAndCoplanarPoint( normal, a );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( plane ) {\n\n\t\tthis.normal.copy( plane.normal );\n\t\tthis.constant = plane.constant;\n\n\t\treturn this;\n\n\t},\n\n\tnormalize: function () {\n\n\t\t// Note: will lead to a divide by zero if the plane is invalid.\n\n\t\tvar inverseNormalLength = 1.0 / this.normal.length();\n\t\tthis.normal.multiplyScalar( inverseNormalLength );\n\t\tthis.constant *= inverseNormalLength;\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.constant *= - 1;\n\t\tthis.normal.negate();\n\n\t\treturn this;\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\treturn this.normal.dot( point ) + this.constant;\n\n\t},\n\n\tdistanceToSphere: function ( sphere ) {\n\n\t\treturn this.distanceToPoint( sphere.center ) - sphere.radius;\n\n\t},\n\n\tprojectPoint: function ( point, optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Vector3();\n\n\t\treturn result.copy( this.normal ).multiplyScalar( - this.distanceToPoint( point ) ).add( point );\n\n\t},\n\n\tintersectLine: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function intersectLine( line, optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new Vector3();\n\n\t\t\tvar direction = line.delta( v1 );\n\n\t\t\tvar denominator = this.normal.dot( direction );\n\n\t\t\tif ( denominator === 0 ) {\n\n\t\t\t\t// line is coplanar, return origin\n\t\t\t\tif ( this.distanceToPoint( line.start ) === 0 ) {\n\n\t\t\t\t\treturn result.copy( line.start );\n\n\t\t\t\t}\n\n\t\t\t\t// Unsure if this is the correct method to handle this case.\n\t\t\t\treturn undefined;\n\n\t\t\t}\n\n\t\t\tvar t = - ( line.start.dot( this.normal ) + this.constant ) / denominator;\n\n\t\t\tif ( t < 0 || t > 1 ) {\n\n\t\t\t\treturn undefined;\n\n\t\t\t}\n\n\t\t\treturn result.copy( direction ).multiplyScalar( t ).add( line.start );\n\n\t\t};\n\n\t}(),\n\n\tintersectsLine: function ( line ) {\n\n\t\t// Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\n\n\t\tvar startSign = this.distanceToPoint( line.start );\n\t\tvar endSign = this.distanceToPoint( line.end );\n\n\t\treturn ( startSign < 0 && endSign > 0 ) || ( endSign < 0 && startSign > 0 );\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\treturn box.intersectsPlane( this );\n\n\t},\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\treturn sphere.intersectsPlane( this );\n\n\t},\n\n\tcoplanarPoint: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Vector3();\n\n\t\treturn result.copy( this.normal ).multiplyScalar( - this.constant );\n\n\t},\n\n\tapplyMatrix4: function () {\n\n\t\tvar v1 = new Vector3();\n\t\tvar m1 = new Matrix3();\n\n\t\treturn function applyMatrix4( matrix, optionalNormalMatrix ) {\n\n\t\t\tvar normalMatrix = optionalNormalMatrix || m1.getNormalMatrix( matrix );\n\n\t\t\tvar referencePoint = this.coplanarPoint( v1 ).applyMatrix4( matrix );\n\n\t\t\tvar normal = this.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\tthis.constant = - referencePoint.dot( normal );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.constant -= offset.dot( this.normal );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( plane ) {\n\n\t\treturn plane.normal.equals( this.normal ) && ( plane.constant === this.constant );\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author bhouston / http://clara.io\n */\n\nfunction Frustum( p0, p1, p2, p3, p4, p5 ) {\n\n\tthis.planes = [\n\n\t\t( p0 !== undefined ) ? p0 : new Plane(),\n\t\t( p1 !== undefined ) ? p1 : new Plane(),\n\t\t( p2 !== undefined ) ? p2 : new Plane(),\n\t\t( p3 !== undefined ) ? p3 : new Plane(),\n\t\t( p4 !== undefined ) ? p4 : new Plane(),\n\t\t( p5 !== undefined ) ? p5 : new Plane()\n\n\t];\n\n}\n\nObject.assign( Frustum.prototype, {\n\n\tset: function ( p0, p1, p2, p3, p4, p5 ) {\n\n\t\tvar planes = this.planes;\n\n\t\tplanes[ 0 ].copy( p0 );\n\t\tplanes[ 1 ].copy( p1 );\n\t\tplanes[ 2 ].copy( p2 );\n\t\tplanes[ 3 ].copy( p3 );\n\t\tplanes[ 4 ].copy( p4 );\n\t\tplanes[ 5 ].copy( p5 );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( frustum ) {\n\n\t\tvar planes = this.planes;\n\n\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\tplanes[ i ].copy( frustum.planes[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrix: function ( m ) {\n\n\t\tvar planes = this.planes;\n\t\tvar me = m.elements;\n\t\tvar me0 = me[ 0 ], me1 = me[ 1 ], me2 = me[ 2 ], me3 = me[ 3 ];\n\t\tvar me4 = me[ 4 ], me5 = me[ 5 ], me6 = me[ 6 ], me7 = me[ 7 ];\n\t\tvar me8 = me[ 8 ], me9 = me[ 9 ], me10 = me[ 10 ], me11 = me[ 11 ];\n\t\tvar me12 = me[ 12 ], me13 = me[ 13 ], me14 = me[ 14 ], me15 = me[ 15 ];\n\n\t\tplanes[ 0 ].setComponents( me3 - me0, me7 - me4, me11 - me8, me15 - me12 ).normalize();\n\t\tplanes[ 1 ].setComponents( me3 + me0, me7 + me4, me11 + me8, me15 + me12 ).normalize();\n\t\tplanes[ 2 ].setComponents( me3 + me1, me7 + me5, me11 + me9, me15 + me13 ).normalize();\n\t\tplanes[ 3 ].setComponents( me3 - me1, me7 - me5, me11 - me9, me15 - me13 ).normalize();\n\t\tplanes[ 4 ].setComponents( me3 - me2, me7 - me6, me11 - me10, me15 - me14 ).normalize();\n\t\tplanes[ 5 ].setComponents( me3 + me2, me7 + me6, me11 + me10, me15 + me14 ).normalize();\n\n\t\treturn this;\n\n\t},\n\n\tintersectsObject: function () {\n\n\t\tvar sphere = new Sphere();\n\n\t\treturn function intersectsObject( object ) {\n\n\t\t\tvar geometry = object.geometry;\n\n\t\t\tif ( geometry.boundingSphere === null )\n\t\t\t\tgeometry.computeBoundingSphere();\n\n\t\t\tsphere.copy( geometry.boundingSphere )\n\t\t\t\t.applyMatrix4( object.matrixWorld );\n\n\t\t\treturn this.intersectsSphere( sphere );\n\n\t\t};\n\n\t}(),\n\n\tintersectsSprite: function () {\n\n\t\tvar sphere = new Sphere();\n\n\t\treturn function intersectsSprite( sprite ) {\n\n\t\t\tsphere.center.set( 0, 0, 0 );\n\t\t\tsphere.radius = 0.7071067811865476;\n\t\t\tsphere.applyMatrix4( sprite.matrixWorld );\n\n\t\t\treturn this.intersectsSphere( sphere );\n\n\t\t};\n\n\t}(),\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\tvar planes = this.planes;\n\t\tvar center = sphere.center;\n\t\tvar negRadius = - sphere.radius;\n\n\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\tvar distance = planes[ i ].distanceToPoint( center );\n\n\t\t\tif ( distance < negRadius ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tintersectsBox: function () {\n\n\t\tvar p1 = new Vector3(),\n\t\t\tp2 = new Vector3();\n\n\t\treturn function intersectsBox( box ) {\n\n\t\t\tvar planes = this.planes;\n\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\tvar plane = planes[ i ];\n\n\t\t\t\tp1.x = plane.normal.x > 0 ? box.min.x : box.max.x;\n\t\t\t\tp2.x = plane.normal.x > 0 ? box.max.x : box.min.x;\n\t\t\t\tp1.y = plane.normal.y > 0 ? box.min.y : box.max.y;\n\t\t\t\tp2.y = plane.normal.y > 0 ? box.max.y : box.min.y;\n\t\t\t\tp1.z = plane.normal.z > 0 ? box.min.z : box.max.z;\n\t\t\t\tp2.z = plane.normal.z > 0 ? box.max.z : box.min.z;\n\n\t\t\t\tvar d1 = plane.distanceToPoint( p1 );\n\t\t\t\tvar d2 = plane.distanceToPoint( p2 );\n\n\t\t\t\t// if both outside plane, no intersection\n\n\t\t\t\tif ( d1 < 0 && d2 < 0 ) {\n\n\t\t\t\t\treturn false;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t};\n\n\t}(),\n\n\tcontainsPoint: function ( point ) {\n\n\t\tvar planes = this.planes;\n\n\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\tif ( planes[ i ].distanceToPoint( point ) < 0 ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n} );\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLShadowMap( _renderer, _objects, maxTextureSize ) {\n\n\tvar _frustum = new Frustum(),\n\t\t_projScreenMatrix = new Matrix4(),\n\n\t\t_shadowMapSize = new Vector2(),\n\t\t_maxShadowMapSize = new Vector2( maxTextureSize, maxTextureSize ),\n\n\t\t_lookTarget = new Vector3(),\n\t\t_lightPositionWorld = new Vector3(),\n\n\t\t_MorphingFlag = 1,\n\t\t_SkinningFlag = 2,\n\n\t\t_NumberOfMaterialVariants = ( _MorphingFlag | _SkinningFlag ) + 1,\n\n\t\t_depthMaterials = new Array( _NumberOfMaterialVariants ),\n\t\t_distanceMaterials = new Array( _NumberOfMaterialVariants ),\n\n\t\t_materialCache = {};\n\n\tvar cubeDirections = [\n\t\tnew Vector3( 1, 0, 0 ), new Vector3( - 1, 0, 0 ), new Vector3( 0, 0, 1 ),\n\t\tnew Vector3( 0, 0, - 1 ), new Vector3( 0, 1, 0 ), new Vector3( 0, - 1, 0 )\n\t];\n\n\tvar cubeUps = [\n\t\tnew Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ),\n\t\tnew Vector3( 0, 1, 0 ), new Vector3( 0, 0, 1 ),\tnew Vector3( 0, 0, - 1 )\n\t];\n\n\tvar cube2DViewPorts = [\n\t\tnew Vector4(), new Vector4(), new Vector4(),\n\t\tnew Vector4(), new Vector4(), new Vector4()\n\t];\n\n\t// init\n\n\tfor ( var i = 0; i !== _NumberOfMaterialVariants; ++ i ) {\n\n\t\tvar useMorphing = ( i & _MorphingFlag ) !== 0;\n\t\tvar useSkinning = ( i & _SkinningFlag ) !== 0;\n\n\t\tvar depthMaterial = new MeshDepthMaterial( {\n\n\t\t\tdepthPacking: RGBADepthPacking,\n\n\t\t\tmorphTargets: useMorphing,\n\t\t\tskinning: useSkinning\n\n\t\t} );\n\n\t\t_depthMaterials[ i ] = depthMaterial;\n\n\t\t//\n\n\t\tvar distanceMaterial = new MeshDistanceMaterial( {\n\n\t\t\tmorphTargets: useMorphing,\n\t\t\tskinning: useSkinning\n\n\t\t} );\n\n\t\t_distanceMaterials[ i ] = distanceMaterial;\n\n\t}\n\n\t//\n\n\tvar scope = this;\n\n\tthis.enabled = false;\n\n\tthis.autoUpdate = true;\n\tthis.needsUpdate = false;\n\n\tthis.type = PCFShadowMap;\n\n\tthis.renderReverseSided = true;\n\tthis.renderSingleSided = true;\n\n\tthis.render = function ( lights, scene, camera ) {\n\n\t\tif ( scope.enabled === false ) return;\n\t\tif ( scope.autoUpdate === false && scope.needsUpdate === false ) return;\n\n\t\tif ( lights.length === 0 ) return;\n\n\t\t// TODO Clean up (needed in case of contextlost)\n\t\tvar _gl = _renderer.context;\n\t\tvar _state = _renderer.state;\n\n\t\t// Set GL state for depth map.\n\t\t_state.disable( _gl.BLEND );\n\t\t_state.buffers.color.setClear( 1, 1, 1, 1 );\n\t\t_state.buffers.depth.setTest( true );\n\t\t_state.setScissorTest( false );\n\n\t\t// render depth map\n\n\t\tvar faceCount;\n\n\t\tfor ( var i = 0, il = lights.length; i < il; i ++ ) {\n\n\t\t\tvar light = lights[ i ];\n\t\t\tvar shadow = light.shadow;\n\t\t\tvar isPointLight = light && light.isPointLight;\n\n\t\t\tif ( shadow === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap:', light, 'has no shadow.' );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tvar shadowCamera = shadow.camera;\n\n\t\t\t_shadowMapSize.copy( shadow.mapSize );\n\t\t\t_shadowMapSize.min( _maxShadowMapSize );\n\n\t\t\tif ( isPointLight ) {\n\n\t\t\t\tvar vpWidth = _shadowMapSize.x;\n\t\t\t\tvar vpHeight = _shadowMapSize.y;\n\n\t\t\t\t// These viewports map a cube-map onto a 2D texture with the\n\t\t\t\t// following orientation:\n\t\t\t\t//\n\t\t\t\t//  xzXZ\n\t\t\t\t//   y Y\n\t\t\t\t//\n\t\t\t\t// X - Positive x direction\n\t\t\t\t// x - Negative x direction\n\t\t\t\t// Y - Positive y direction\n\t\t\t\t// y - Negative y direction\n\t\t\t\t// Z - Positive z direction\n\t\t\t\t// z - Negative z direction\n\n\t\t\t\t// positive X\n\t\t\t\tcube2DViewPorts[ 0 ].set( vpWidth * 2, vpHeight, vpWidth, vpHeight );\n\t\t\t\t// negative X\n\t\t\t\tcube2DViewPorts[ 1 ].set( 0, vpHeight, vpWidth, vpHeight );\n\t\t\t\t// positive Z\n\t\t\t\tcube2DViewPorts[ 2 ].set( vpWidth * 3, vpHeight, vpWidth, vpHeight );\n\t\t\t\t// negative Z\n\t\t\t\tcube2DViewPorts[ 3 ].set( vpWidth, vpHeight, vpWidth, vpHeight );\n\t\t\t\t// positive Y\n\t\t\t\tcube2DViewPorts[ 4 ].set( vpWidth * 3, 0, vpWidth, vpHeight );\n\t\t\t\t// negative Y\n\t\t\t\tcube2DViewPorts[ 5 ].set( vpWidth, 0, vpWidth, vpHeight );\n\n\t\t\t\t_shadowMapSize.x *= 4.0;\n\t\t\t\t_shadowMapSize.y *= 2.0;\n\n\t\t\t}\n\n\t\t\tif ( shadow.map === null ) {\n\n\t\t\t\tvar pars = { minFilter: NearestFilter, magFilter: NearestFilter, format: RGBAFormat };\n\n\t\t\t\tshadow.map = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\n\t\t\t\tshadow.map.texture.name = light.name + \".shadowMap\";\n\n\t\t\t\tshadowCamera.updateProjectionMatrix();\n\n\t\t\t}\n\n\t\t\tif ( shadow.isSpotLightShadow ) {\n\n\t\t\t\tshadow.update( light );\n\n\t\t\t}\n\n\t\t\tvar shadowMap = shadow.map;\n\t\t\tvar shadowMatrix = shadow.matrix;\n\n\t\t\t_lightPositionWorld.setFromMatrixPosition( light.matrixWorld );\n\t\t\tshadowCamera.position.copy( _lightPositionWorld );\n\n\t\t\tif ( isPointLight ) {\n\n\t\t\t\tfaceCount = 6;\n\n\t\t\t\t// for point lights we set the shadow matrix to be a translation-only matrix\n\t\t\t\t// equal to inverse of the light's position\n\n\t\t\t\tshadowMatrix.makeTranslation( - _lightPositionWorld.x, - _lightPositionWorld.y, - _lightPositionWorld.z );\n\n\t\t\t} else {\n\n\t\t\t\tfaceCount = 1;\n\n\t\t\t\t_lookTarget.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\tshadowCamera.lookAt( _lookTarget );\n\t\t\t\tshadowCamera.updateMatrixWorld();\n\n\t\t\t\t// compute shadow matrix\n\n\t\t\t\tshadowMatrix.set(\n\t\t\t\t\t0.5, 0.0, 0.0, 0.5,\n\t\t\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t\t\t0.0, 0.0, 0.0, 1.0\n\t\t\t\t);\n\n\t\t\t\tshadowMatrix.multiply( shadowCamera.projectionMatrix );\n\t\t\t\tshadowMatrix.multiply( shadowCamera.matrixWorldInverse );\n\n\t\t\t}\n\n\t\t\t_renderer.setRenderTarget( shadowMap );\n\t\t\t_renderer.clear();\n\n\t\t\t// render shadow map for each cube face (if omni-directional) or\n\t\t\t// run a single pass if not\n\n\t\t\tfor ( var face = 0; face < faceCount; face ++ ) {\n\n\t\t\t\tif ( isPointLight ) {\n\n\t\t\t\t\t_lookTarget.copy( shadowCamera.position );\n\t\t\t\t\t_lookTarget.add( cubeDirections[ face ] );\n\t\t\t\t\tshadowCamera.up.copy( cubeUps[ face ] );\n\t\t\t\t\tshadowCamera.lookAt( _lookTarget );\n\t\t\t\t\tshadowCamera.updateMatrixWorld();\n\n\t\t\t\t\tvar vpDimensions = cube2DViewPorts[ face ];\n\t\t\t\t\t_state.viewport( vpDimensions );\n\n\t\t\t\t}\n\n\t\t\t\t// update camera matrices and frustum\n\n\t\t\t\t_projScreenMatrix.multiplyMatrices( shadowCamera.projectionMatrix, shadowCamera.matrixWorldInverse );\n\t\t\t\t_frustum.setFromMatrix( _projScreenMatrix );\n\n\t\t\t\t// set object matrices & frustum culling\n\n\t\t\t\trenderObject( scene, camera, shadowCamera, isPointLight );\n\n\t\t\t}\n\n\t\t}\n\n\t\tscope.needsUpdate = false;\n\n\t};\n\n\tfunction getDepthMaterial( object, material, isPointLight, lightPositionWorld, shadowCameraNear, shadowCameraFar ) {\n\n\t\tvar geometry = object.geometry;\n\n\t\tvar result = null;\n\n\t\tvar materialVariants = _depthMaterials;\n\t\tvar customMaterial = object.customDepthMaterial;\n\n\t\tif ( isPointLight ) {\n\n\t\t\tmaterialVariants = _distanceMaterials;\n\t\t\tcustomMaterial = object.customDistanceMaterial;\n\n\t\t}\n\n\t\tif ( ! customMaterial ) {\n\n\t\t\tvar useMorphing = false;\n\n\t\t\tif ( material.morphTargets ) {\n\n\t\t\t\tif ( geometry && geometry.isBufferGeometry ) {\n\n\t\t\t\t\tuseMorphing = geometry.morphAttributes && geometry.morphAttributes.position && geometry.morphAttributes.position.length > 0;\n\n\t\t\t\t} else if ( geometry && geometry.isGeometry ) {\n\n\t\t\t\t\tuseMorphing = geometry.morphTargets && geometry.morphTargets.length > 0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( object.isSkinnedMesh && material.skinning === false ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:', object );\n\n\t\t\t}\n\n\t\t\tvar useSkinning = object.isSkinnedMesh && material.skinning;\n\n\t\t\tvar variantIndex = 0;\n\n\t\t\tif ( useMorphing ) variantIndex |= _MorphingFlag;\n\t\t\tif ( useSkinning ) variantIndex |= _SkinningFlag;\n\n\t\t\tresult = materialVariants[ variantIndex ];\n\n\t\t} else {\n\n\t\t\tresult = customMaterial;\n\n\t\t}\n\n\t\tif ( _renderer.localClippingEnabled &&\n\t\t\t\tmaterial.clipShadows === true &&\n\t\t\t\tmaterial.clippingPlanes.length !== 0 ) {\n\n\t\t\t// in this case we need a unique material instance reflecting the\n\t\t\t// appropriate state\n\n\t\t\tvar keyA = result.uuid, keyB = material.uuid;\n\n\t\t\tvar materialsForVariant = _materialCache[ keyA ];\n\n\t\t\tif ( materialsForVariant === undefined ) {\n\n\t\t\t\tmaterialsForVariant = {};\n\t\t\t\t_materialCache[ keyA ] = materialsForVariant;\n\n\t\t\t}\n\n\t\t\tvar cachedMaterial = materialsForVariant[ keyB ];\n\n\t\t\tif ( cachedMaterial === undefined ) {\n\n\t\t\t\tcachedMaterial = result.clone();\n\t\t\t\tmaterialsForVariant[ keyB ] = cachedMaterial;\n\n\t\t\t}\n\n\t\t\tresult = cachedMaterial;\n\n\t\t}\n\n\t\tresult.visible = material.visible;\n\t\tresult.wireframe = material.wireframe;\n\n\t\tvar side = material.side;\n\n\t\tif ( scope.renderSingleSided && side == DoubleSide ) {\n\n\t\t\tside = FrontSide;\n\n\t\t}\n\n\t\tif ( scope.renderReverseSided ) {\n\n\t\t\tif ( side === FrontSide ) side = BackSide;\n\t\t\telse if ( side === BackSide ) side = FrontSide;\n\n\t\t}\n\n\t\tresult.side = side;\n\n\t\tresult.clipShadows = material.clipShadows;\n\t\tresult.clippingPlanes = material.clippingPlanes;\n\t\tresult.clipIntersection = material.clipIntersection;\n\n\t\tresult.wireframeLinewidth = material.wireframeLinewidth;\n\t\tresult.linewidth = material.linewidth;\n\n\t\tif ( isPointLight && result.isMeshDistanceMaterial ) {\n\n\t\t\tresult.referencePosition.copy( lightPositionWorld );\n\t\t\tresult.nearDistance = shadowCameraNear;\n\t\t\tresult.farDistance = shadowCameraFar;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\tfunction renderObject( object, camera, shadowCamera, isPointLight ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tvar visible = object.layers.test( camera.layers );\n\n\t\tif ( visible && ( object.isMesh || object.isLine || object.isPoints ) ) {\n\n\t\t\tif ( object.castShadow && ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) ) {\n\n\t\t\t\tobject.modelViewMatrix.multiplyMatrices( shadowCamera.matrixWorldInverse, object.matrixWorld );\n\n\t\t\t\tvar geometry = _objects.update( object );\n\t\t\t\tvar material = object.material;\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tvar groups = geometry.groups;\n\n\t\t\t\t\tfor ( var k = 0, kl = groups.length; k < kl; k ++ ) {\n\n\t\t\t\t\t\tvar group = groups[ k ];\n\t\t\t\t\t\tvar groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\tif ( groupMaterial && groupMaterial.visible ) {\n\n\t\t\t\t\t\t\tvar depthMaterial = getDepthMaterial( object, groupMaterial, isPointLight, _lightPositionWorld, shadowCamera.near, shadowCamera.far );\n\t\t\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, group );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( material.visible ) {\n\n\t\t\t\t\tvar depthMaterial = getDepthMaterial( object, material, isPointLight, _lightPositionWorld, shadowCamera.near, shadowCamera.far );\n\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, null );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar children = object.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\trenderObject( children[ i ], camera, shadowCamera, isPointLight );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLAttributes( gl ) {\n\n\tvar buffers = {};\n\n\tfunction createBuffer( attribute, bufferType ) {\n\n\t\tvar array = attribute.array;\n\t\tvar usage = attribute.dynamic ? gl.DYNAMIC_DRAW : gl.STATIC_DRAW;\n\n\t\tvar buffer = gl.createBuffer();\n\n\t\tgl.bindBuffer( bufferType, buffer );\n\t\tgl.bufferData( bufferType, array, usage );\n\n\t\tattribute.onUploadCallback();\n\n\t\tvar type = gl.FLOAT;\n\n\t\tif ( array instanceof Float32Array ) {\n\n\t\t\ttype = gl.FLOAT;\n\n\t\t} else if ( array instanceof Float64Array ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.' );\n\n\t\t} else if ( array instanceof Uint16Array ) {\n\n\t\t\ttype = gl.UNSIGNED_SHORT;\n\n\t\t} else if ( array instanceof Int16Array ) {\n\n\t\t\ttype = gl.SHORT;\n\n\t\t} else if ( array instanceof Uint32Array ) {\n\n\t\t\ttype = gl.UNSIGNED_INT;\n\n\t\t} else if ( array instanceof Int32Array ) {\n\n\t\t\ttype = gl.INT;\n\n\t\t} else if ( array instanceof Int8Array ) {\n\n\t\t\ttype = gl.BYTE;\n\n\t\t} else if ( array instanceof Uint8Array ) {\n\n\t\t\ttype = gl.UNSIGNED_BYTE;\n\n\t\t}\n\n\t\treturn {\n\t\t\tbuffer: buffer,\n\t\t\ttype: type,\n\t\t\tbytesPerElement: array.BYTES_PER_ELEMENT,\n\t\t\tversion: attribute.version\n\t\t};\n\n\t}\n\n\tfunction updateBuffer( buffer, attribute, bufferType ) {\n\n\t\tvar array = attribute.array;\n\t\tvar updateRange = attribute.updateRange;\n\n\t\tgl.bindBuffer( bufferType, buffer );\n\n\t\tif ( attribute.dynamic === false ) {\n\n\t\t\tgl.bufferData( bufferType, array, gl.STATIC_DRAW );\n\n\t\t} else if ( updateRange.count === - 1 ) {\n\n\t\t\t// Not using update ranges\n\n\t\t\tgl.bufferSubData( bufferType, 0, array );\n\n\t\t} else if ( updateRange.count === 0 ) {\n\n\t\t\tconsole.error( 'THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually.' );\n\n\t\t} else {\n\n\t\t\tgl.bufferSubData( bufferType, updateRange.offset * array.BYTES_PER_ELEMENT,\n\t\t\t\tarray.subarray( updateRange.offset, updateRange.offset + updateRange.count ) );\n\n\t\t\tupdateRange.count = - 1; // reset range\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction get( attribute ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\treturn buffers[ attribute.uuid ];\n\n\t}\n\n\tfunction remove( attribute ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\tvar data = buffers[ attribute.uuid ];\n\n\t\tif ( data ) {\n\n\t\t\tgl.deleteBuffer( data.buffer );\n\n\t\t\tdelete buffers[ attribute.uuid ];\n\n\t\t}\n\n\t}\n\n\tfunction update( attribute, bufferType ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\tvar data = buffers[ attribute.uuid ];\n\n\t\tif ( data === undefined ) {\n\n\t\t\tbuffers[ attribute.uuid ] = createBuffer( attribute, bufferType );\n\n\t\t} else if ( data.version < attribute.version ) {\n\n\t\t\tupdateBuffer( data.buffer, attribute, bufferType );\n\n\t\t\tdata.version = attribute.version;\n\n\t\t}\n\n\t}\n\n\treturn {\n\n\t\tget: get,\n\t\tremove: remove,\n\t\tupdate: update\n\n\t};\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://clara.io\n */\n\nfunction Euler( x, y, z, order ) {\n\n\tthis._x = x || 0;\n\tthis._y = y || 0;\n\tthis._z = z || 0;\n\tthis._order = order || Euler.DefaultOrder;\n\n}\n\nEuler.RotationOrders = [ 'XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX' ];\n\nEuler.DefaultOrder = 'XYZ';\n\nObject.defineProperties( Euler.prototype, {\n\n\tx: {\n\n\t\tget: function () {\n\n\t\t\treturn this._x;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._x = value;\n\t\t\tthis.onChangeCallback();\n\n\t\t}\n\n\t},\n\n\ty: {\n\n\t\tget: function () {\n\n\t\t\treturn this._y;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._y = value;\n\t\t\tthis.onChangeCallback();\n\n\t\t}\n\n\t},\n\n\tz: {\n\n\t\tget: function () {\n\n\t\t\treturn this._z;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._z = value;\n\t\t\tthis.onChangeCallback();\n\n\t\t}\n\n\t},\n\n\torder: {\n\n\t\tget: function () {\n\n\t\t\treturn this._order;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._order = value;\n\t\t\tthis.onChangeCallback();\n\n\t\t}\n\n\t}\n\n} );\n\nObject.assign( Euler.prototype, {\n\n\tisEuler: true,\n\n\tset: function ( x, y, z, order ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._order = order || this._order;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._order );\n\n\t},\n\n\tcopy: function ( euler ) {\n\n\t\tthis._x = euler._x;\n\t\tthis._y = euler._y;\n\t\tthis._z = euler._z;\n\t\tthis._order = euler._order;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromRotationMatrix: function ( m, order, update ) {\n\n\t\tvar clamp = _Math.clamp;\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tvar te = m.elements;\n\t\tvar m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\n\t\tvar m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\n\t\tvar m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\torder = order || this._order;\n\n\t\tif ( order === 'XYZ' ) {\n\n\t\t\tthis._y = Math.asin( clamp( m13, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m13 ) < 0.99999 ) {\n\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\tthis._z = Math.atan2( - m12, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\tthis._z = 0;\n\n\t\t\t}\n\n\t\t} else if ( order === 'YXZ' ) {\n\n\t\t\tthis._x = Math.asin( - clamp( m23, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m23 ) < 0.99999 ) {\n\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\t\t\t\tthis._z = Math.atan2( m21, m22 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\t\t\t\tthis._z = 0;\n\n\t\t\t}\n\n\t\t} else if ( order === 'ZXY' ) {\n\n\t\t\tthis._x = Math.asin( clamp( m32, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m32 ) < 0.99999 ) {\n\n\t\t\t\tthis._y = Math.atan2( - m31, m33 );\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._y = 0;\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t}\n\n\t\t} else if ( order === 'ZYX' ) {\n\n\t\t\tthis._y = Math.asin( - clamp( m31, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m31 ) < 0.99999 ) {\n\n\t\t\t\tthis._x = Math.atan2( m32, m33 );\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t}\n\n\t\t} else if ( order === 'YZX' ) {\n\n\t\t\tthis._z = Math.asin( clamp( m21, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m21 ) < 0.99999 ) {\n\n\t\t\t\tthis._x = Math.atan2( - m23, m22 );\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\n\t\t\t}\n\n\t\t} else if ( order === 'XZY' ) {\n\n\t\t\tthis._z = Math.asin( - clamp( m12, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m12 ) < 0.99999 ) {\n\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\tthis._y = Math.atan2( m13, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\tthis._y = 0;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.Euler: .setFromRotationMatrix() given unsupported order: ' + order );\n\n\t\t}\n\n\t\tthis._order = order;\n\n\t\tif ( update !== false ) this.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromQuaternion: function () {\n\n\t\tvar matrix = new Matrix4();\n\n\t\treturn function setFromQuaternion( q, order, update ) {\n\n\t\t\tmatrix.makeRotationFromQuaternion( q );\n\n\t\t\treturn this.setFromRotationMatrix( matrix, order, update );\n\n\t\t};\n\n\t}(),\n\n\tsetFromVector3: function ( v, order ) {\n\n\t\treturn this.set( v.x, v.y, v.z, order || this._order );\n\n\t},\n\n\treorder: function () {\n\n\t\t// WARNING: this discards revolution information -bhouston\n\n\t\tvar q = new Quaternion();\n\n\t\treturn function reorder( newOrder ) {\n\n\t\t\tq.setFromEuler( this );\n\n\t\t\treturn this.setFromQuaternion( q, newOrder );\n\n\t\t};\n\n\t}(),\n\n\tequals: function ( euler ) {\n\n\t\treturn ( euler._x === this._x ) && ( euler._y === this._y ) && ( euler._z === this._z ) && ( euler._order === this._order );\n\n\t},\n\n\tfromArray: function ( array ) {\n\n\t\tthis._x = array[ 0 ];\n\t\tthis._y = array[ 1 ];\n\t\tthis._z = array[ 2 ];\n\t\tif ( array[ 3 ] !== undefined ) this._order = array[ 3 ];\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._order;\n\n\t\treturn array;\n\n\t},\n\n\ttoVector3: function ( optionalResult ) {\n\n\t\tif ( optionalResult ) {\n\n\t\t\treturn optionalResult.set( this._x, this._y, this._z );\n\n\t\t} else {\n\n\t\t\treturn new Vector3( this._x, this._y, this._z );\n\n\t\t}\n\n\t},\n\n\tonChange: function ( callback ) {\n\n\t\tthis.onChangeCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\tonChangeCallback: function () {}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Layers() {\n\n\tthis.mask = 1 | 0;\n\n}\n\nObject.assign( Layers.prototype, {\n\n\tset: function ( channel ) {\n\n\t\tthis.mask = 1 << channel | 0;\n\n\t},\n\n\tenable: function ( channel ) {\n\n\t\tthis.mask |= 1 << channel | 0;\n\n\t},\n\n\ttoggle: function ( channel ) {\n\n\t\tthis.mask ^= 1 << channel | 0;\n\n\t},\n\n\tdisable: function ( channel ) {\n\n\t\tthis.mask &= ~ ( 1 << channel | 0 );\n\n\t},\n\n\ttest: function ( layers ) {\n\n\t\treturn ( this.mask & layers.mask ) !== 0;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author elephantatwork / www.elephantatwork.ch\n */\n\nvar object3DId = 0;\n\nfunction Object3D() {\n\n\tObject.defineProperty( this, 'id', { value: object3DId ++ } );\n\n\tthis.uuid = _Math.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Object3D';\n\n\tthis.parent = null;\n\tthis.children = [];\n\n\tthis.up = Object3D.DefaultUp.clone();\n\n\tvar position = new Vector3();\n\tvar rotation = new Euler();\n\tvar quaternion = new Quaternion();\n\tvar scale = new Vector3( 1, 1, 1 );\n\n\tfunction onRotationChange() {\n\n\t\tquaternion.setFromEuler( rotation, false );\n\n\t}\n\n\tfunction onQuaternionChange() {\n\n\t\trotation.setFromQuaternion( quaternion, undefined, false );\n\n\t}\n\n\trotation.onChange( onRotationChange );\n\tquaternion.onChange( onQuaternionChange );\n\n\tObject.defineProperties( this, {\n\t\tposition: {\n\t\t\tenumerable: true,\n\t\t\tvalue: position\n\t\t},\n\t\trotation: {\n\t\t\tenumerable: true,\n\t\t\tvalue: rotation\n\t\t},\n\t\tquaternion: {\n\t\t\tenumerable: true,\n\t\t\tvalue: quaternion\n\t\t},\n\t\tscale: {\n\t\t\tenumerable: true,\n\t\t\tvalue: scale\n\t\t},\n\t\tmodelViewMatrix: {\n\t\t\tvalue: new Matrix4()\n\t\t},\n\t\tnormalMatrix: {\n\t\t\tvalue: new Matrix3()\n\t\t}\n\t} );\n\n\tthis.matrix = new Matrix4();\n\tthis.matrixWorld = new Matrix4();\n\n\tthis.matrixAutoUpdate = Object3D.DefaultMatrixAutoUpdate;\n\tthis.matrixWorldNeedsUpdate = false;\n\n\tthis.layers = new Layers();\n\tthis.visible = true;\n\n\tthis.castShadow = false;\n\tthis.receiveShadow = false;\n\n\tthis.frustumCulled = true;\n\tthis.renderOrder = 0;\n\n\tthis.userData = {};\n\n}\n\nObject3D.DefaultUp = new Vector3( 0, 1, 0 );\nObject3D.DefaultMatrixAutoUpdate = true;\n\nObject3D.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Object3D,\n\n\tisObject3D: true,\n\n\tonBeforeRender: function () {},\n\tonAfterRender: function () {},\n\n\tapplyMatrix: function ( matrix ) {\n\n\t\tthis.matrix.multiplyMatrices( matrix, this.matrix );\n\n\t\tthis.matrix.decompose( this.position, this.quaternion, this.scale );\n\n\t},\n\n\tapplyQuaternion: function ( q ) {\n\n\t\tthis.quaternion.premultiply( q );\n\n\t\treturn this;\n\n\t},\n\n\tsetRotationFromAxisAngle: function ( axis, angle ) {\n\n\t\t// assumes axis is normalized\n\n\t\tthis.quaternion.setFromAxisAngle( axis, angle );\n\n\t},\n\n\tsetRotationFromEuler: function ( euler ) {\n\n\t\tthis.quaternion.setFromEuler( euler, true );\n\n\t},\n\n\tsetRotationFromMatrix: function ( m ) {\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tthis.quaternion.setFromRotationMatrix( m );\n\n\t},\n\n\tsetRotationFromQuaternion: function ( q ) {\n\n\t\t// assumes q is normalized\n\n\t\tthis.quaternion.copy( q );\n\n\t},\n\n\trotateOnAxis: function () {\n\n\t\t// rotate object on axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\tvar q1 = new Quaternion();\n\n\t\treturn function rotateOnAxis( axis, angle ) {\n\n\t\t\tq1.setFromAxisAngle( axis, angle );\n\n\t\t\tthis.quaternion.multiply( q1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\trotateOnWorldAxis: function () {\n\n\t\t// rotate object on axis in world space\n\t\t// axis is assumed to be normalized\n\t\t// method assumes no rotated parent\n\n\t\tvar q1 = new Quaternion();\n\n\t\treturn function rotateOnWorldAxis( axis, angle ) {\n\n\t\t\tq1.setFromAxisAngle( axis, angle );\n\n\t\t\tthis.quaternion.premultiply( q1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\trotateX: function () {\n\n\t\tvar v1 = new Vector3( 1, 0, 0 );\n\n\t\treturn function rotateX( angle ) {\n\n\t\t\treturn this.rotateOnAxis( v1, angle );\n\n\t\t};\n\n\t}(),\n\n\trotateY: function () {\n\n\t\tvar v1 = new Vector3( 0, 1, 0 );\n\n\t\treturn function rotateY( angle ) {\n\n\t\t\treturn this.rotateOnAxis( v1, angle );\n\n\t\t};\n\n\t}(),\n\n\trotateZ: function () {\n\n\t\tvar v1 = new Vector3( 0, 0, 1 );\n\n\t\treturn function rotateZ( angle ) {\n\n\t\t\treturn this.rotateOnAxis( v1, angle );\n\n\t\t};\n\n\t}(),\n\n\ttranslateOnAxis: function () {\n\n\t\t// translate object by distance along axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function translateOnAxis( axis, distance ) {\n\n\t\t\tv1.copy( axis ).applyQuaternion( this.quaternion );\n\n\t\t\tthis.position.add( v1.multiplyScalar( distance ) );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\ttranslateX: function () {\n\n\t\tvar v1 = new Vector3( 1, 0, 0 );\n\n\t\treturn function translateX( distance ) {\n\n\t\t\treturn this.translateOnAxis( v1, distance );\n\n\t\t};\n\n\t}(),\n\n\ttranslateY: function () {\n\n\t\tvar v1 = new Vector3( 0, 1, 0 );\n\n\t\treturn function translateY( distance ) {\n\n\t\t\treturn this.translateOnAxis( v1, distance );\n\n\t\t};\n\n\t}(),\n\n\ttranslateZ: function () {\n\n\t\tvar v1 = new Vector3( 0, 0, 1 );\n\n\t\treturn function translateZ( distance ) {\n\n\t\t\treturn this.translateOnAxis( v1, distance );\n\n\t\t};\n\n\t}(),\n\n\tlocalToWorld: function ( vector ) {\n\n\t\treturn vector.applyMatrix4( this.matrixWorld );\n\n\t},\n\n\tworldToLocal: function () {\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function worldToLocal( vector ) {\n\n\t\t\treturn vector.applyMatrix4( m1.getInverse( this.matrixWorld ) );\n\n\t\t};\n\n\t}(),\n\n\tlookAt: function () {\n\n\t\t// This method does not support objects with rotated and/or translated parent(s)\n\n\t\tvar m1 = new Matrix4();\n\t\tvar vector = new Vector3();\n\n\t\treturn function lookAt( x, y, z ) {\n\n\t\t\tif ( x.isVector3 ) {\n\n\t\t\t\tvector.copy( x );\n\n\t\t\t} else {\n\n\t\t\t\tvector.set( x, y, z );\n\n\t\t\t}\n\n\t\t\tif ( this.isCamera ) {\n\n\t\t\t\tm1.lookAt( this.position, vector, this.up );\n\n\t\t\t} else {\n\n\t\t\t\tm1.lookAt( vector, this.position, this.up );\n\n\t\t\t}\n\n\t\t\tthis.quaternion.setFromRotationMatrix( m1 );\n\n\t\t};\n\n\t}(),\n\n\tadd: function ( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.add( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( object === this ) {\n\n\t\t\tconsole.error( \"THREE.Object3D.add: object can't be added as a child of itself.\", object );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( ( object && object.isObject3D ) ) {\n\n\t\t\tif ( object.parent !== null ) {\n\n\t\t\t\tobject.parent.remove( object );\n\n\t\t\t}\n\n\t\t\tobject.parent = this;\n\t\t\tobject.dispatchEvent( { type: 'added' } );\n\n\t\t\tthis.children.push( object );\n\n\t\t} else {\n\n\t\t\tconsole.error( \"THREE.Object3D.add: object not an instance of THREE.Object3D.\", object );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tremove: function ( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.remove( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar index = this.children.indexOf( object );\n\n\t\tif ( index !== - 1 ) {\n\n\t\t\tobject.parent = null;\n\n\t\t\tobject.dispatchEvent( { type: 'removed' } );\n\n\t\t\tthis.children.splice( index, 1 );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetObjectById: function ( id ) {\n\n\t\treturn this.getObjectByProperty( 'id', id );\n\n\t},\n\n\tgetObjectByName: function ( name ) {\n\n\t\treturn this.getObjectByProperty( 'name', name );\n\n\t},\n\n\tgetObjectByProperty: function ( name, value ) {\n\n\t\tif ( this[ name ] === value ) return this;\n\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\n\n\t\t\tvar child = this.children[ i ];\n\t\t\tvar object = child.getObjectByProperty( name, value );\n\n\t\t\tif ( object !== undefined ) {\n\n\t\t\t\treturn object;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn undefined;\n\n\t},\n\n\tgetWorldPosition: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Vector3();\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\treturn result.setFromMatrixPosition( this.matrixWorld );\n\n\t},\n\n\tgetWorldQuaternion: function () {\n\n\t\tvar position = new Vector3();\n\t\tvar scale = new Vector3();\n\n\t\treturn function getWorldQuaternion( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new Quaternion();\n\n\t\t\tthis.updateMatrixWorld( true );\n\n\t\t\tthis.matrixWorld.decompose( position, result, scale );\n\n\t\t\treturn result;\n\n\t\t};\n\n\t}(),\n\n\tgetWorldRotation: function () {\n\n\t\tvar quaternion = new Quaternion();\n\n\t\treturn function getWorldRotation( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new Euler();\n\n\t\t\tthis.getWorldQuaternion( quaternion );\n\n\t\t\treturn result.setFromQuaternion( quaternion, this.rotation.order, false );\n\n\t\t};\n\n\t}(),\n\n\tgetWorldScale: function () {\n\n\t\tvar position = new Vector3();\n\t\tvar quaternion = new Quaternion();\n\n\t\treturn function getWorldScale( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new Vector3();\n\n\t\t\tthis.updateMatrixWorld( true );\n\n\t\t\tthis.matrixWorld.decompose( position, quaternion, result );\n\n\t\t\treturn result;\n\n\t\t};\n\n\t}(),\n\n\tgetWorldDirection: function () {\n\n\t\tvar quaternion = new Quaternion();\n\n\t\treturn function getWorldDirection( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new Vector3();\n\n\t\t\tthis.getWorldQuaternion( quaternion );\n\n\t\t\treturn result.set( 0, 0, 1 ).applyQuaternion( quaternion );\n\n\t\t};\n\n\t}(),\n\n\traycast: function () {},\n\n\ttraverse: function ( callback ) {\n\n\t\tcallback( this );\n\n\t\tvar children = this.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].traverse( callback );\n\n\t\t}\n\n\t},\n\n\ttraverseVisible: function ( callback ) {\n\n\t\tif ( this.visible === false ) return;\n\n\t\tcallback( this );\n\n\t\tvar children = this.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].traverseVisible( callback );\n\n\t\t}\n\n\t},\n\n\ttraverseAncestors: function ( callback ) {\n\n\t\tvar parent = this.parent;\n\n\t\tif ( parent !== null ) {\n\n\t\t\tcallback( parent );\n\n\t\t\tparent.traverseAncestors( callback );\n\n\t\t}\n\n\t},\n\n\tupdateMatrix: function () {\n\n\t\tthis.matrix.compose( this.position, this.quaternion, this.scale );\n\n\t\tthis.matrixWorldNeedsUpdate = true;\n\n\t},\n\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tif ( this.matrixWorldNeedsUpdate || force ) {\n\n\t\t\tif ( this.parent === null ) {\n\n\t\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t\t} else {\n\n\t\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t\t}\n\n\t\t\tthis.matrixWorldNeedsUpdate = false;\n\n\t\t\tforce = true;\n\n\t\t}\n\n\t\t// update children\n\n\t\tvar children = this.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].updateMatrixWorld( force );\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\t// meta is a string when called from JSON.stringify\n\t\tvar isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tvar output = {};\n\n\t\t// meta is a hash used to collect geometries, materials.\n\t\t// not providing it implies that this is the root object\n\t\t// being serialized.\n\t\tif ( isRootObject ) {\n\n\t\t\t// initialize meta obj\n\t\t\tmeta = {\n\t\t\t\tgeometries: {},\n\t\t\t\tmaterials: {},\n\t\t\t\ttextures: {},\n\t\t\t\timages: {},\n\t\t\t\tshapes: {}\n\t\t\t};\n\n\t\t\toutput.metadata = {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Object',\n\t\t\t\tgenerator: 'Object3D.toJSON'\n\t\t\t};\n\n\t\t}\n\n\t\t// standard Object3D serialization\n\n\t\tvar object = {};\n\n\t\tobject.uuid = this.uuid;\n\t\tobject.type = this.type;\n\n\t\tif ( this.name !== '' ) object.name = this.name;\n\t\tif ( this.castShadow === true ) object.castShadow = true;\n\t\tif ( this.receiveShadow === true ) object.receiveShadow = true;\n\t\tif ( this.visible === false ) object.visible = false;\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) object.userData = this.userData;\n\n\t\tobject.matrix = this.matrix.toArray();\n\n\t\t//\n\n\t\tfunction serialize( library, element ) {\n\n\t\t\tif ( library[ element.uuid ] === undefined ) {\n\n\t\t\t\tlibrary[ element.uuid ] = element.toJSON( meta );\n\n\t\t\t}\n\n\t\t\treturn element.uuid;\n\n\t\t}\n\n\t\tif ( this.geometry !== undefined ) {\n\n\t\t\tobject.geometry = serialize( meta.geometries, this.geometry );\n\n\t\t\tvar parameters = this.geometry.parameters;\n\n\t\t\tif ( parameters !== undefined && parameters.shapes !== undefined ) {\n\n\t\t\t\tvar shapes = parameters.shapes;\n\n\t\t\t\tif ( Array.isArray( shapes ) ) {\n\n\t\t\t\t\tfor ( var i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\t\t\t\tvar shape = shapes[ i ];\n\n\t\t\t\t\t\tserialize( meta.shapes, shape );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tserialize( meta.shapes, shapes );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.material !== undefined ) {\n\n\t\t\tif ( Array.isArray( this.material ) ) {\n\n\t\t\t\tvar uuids = [];\n\n\t\t\t\tfor ( var i = 0, l = this.material.length; i < l; i ++ ) {\n\n\t\t\t\t\tuuids.push( serialize( meta.materials, this.material[ i ] ) );\n\n\t\t\t\t}\n\n\t\t\t\tobject.material = uuids;\n\n\t\t\t} else {\n\n\t\t\t\tobject.material = serialize( meta.materials, this.material );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tif ( this.children.length > 0 ) {\n\n\t\t\tobject.children = [];\n\n\t\t\tfor ( var i = 0; i < this.children.length; i ++ ) {\n\n\t\t\t\tobject.children.push( this.children[ i ].toJSON( meta ).object );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( isRootObject ) {\n\n\t\t\tvar geometries = extractFromCache( meta.geometries );\n\t\t\tvar materials = extractFromCache( meta.materials );\n\t\t\tvar textures = extractFromCache( meta.textures );\n\t\t\tvar images = extractFromCache( meta.images );\n\t\t\tvar shapes = extractFromCache( meta.shapes );\n\n\t\t\tif ( geometries.length > 0 ) output.geometries = geometries;\n\t\t\tif ( materials.length > 0 ) output.materials = materials;\n\t\t\tif ( textures.length > 0 ) output.textures = textures;\n\t\t\tif ( images.length > 0 ) output.images = images;\n\t\t\tif ( shapes.length > 0 ) output.shapes = shapes;\n\n\t\t}\n\n\t\toutput.object = object;\n\n\t\treturn output;\n\n\t\t// extract data from the cache hash\n\t\t// remove metadata on each item\n\t\t// and return as array\n\t\tfunction extractFromCache( cache ) {\n\n\t\t\tvar values = [];\n\t\t\tfor ( var key in cache ) {\n\n\t\t\t\tvar data = cache[ key ];\n\t\t\t\tdelete data.metadata;\n\t\t\t\tvalues.push( data );\n\n\t\t\t}\n\t\t\treturn values;\n\n\t\t}\n\n\t},\n\n\tclone: function ( recursive ) {\n\n\t\treturn new this.constructor().copy( this, recursive );\n\n\t},\n\n\tcopy: function ( source, recursive ) {\n\n\t\tif ( recursive === undefined ) recursive = true;\n\n\t\tthis.name = source.name;\n\n\t\tthis.up.copy( source.up );\n\n\t\tthis.position.copy( source.position );\n\t\tthis.quaternion.copy( source.quaternion );\n\t\tthis.scale.copy( source.scale );\n\n\t\tthis.matrix.copy( source.matrix );\n\t\tthis.matrixWorld.copy( source.matrixWorld );\n\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\t\tthis.matrixWorldNeedsUpdate = source.matrixWorldNeedsUpdate;\n\n\t\tthis.layers.mask = source.layers.mask;\n\t\tthis.visible = source.visible;\n\n\t\tthis.castShadow = source.castShadow;\n\t\tthis.receiveShadow = source.receiveShadow;\n\n\t\tthis.frustumCulled = source.frustumCulled;\n\t\tthis.renderOrder = source.renderOrder;\n\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\tif ( recursive === true ) {\n\n\t\t\tfor ( var i = 0; i < source.children.length; i ++ ) {\n\n\t\t\t\tvar child = source.children[ i ];\n\t\t\t\tthis.add( child.clone() );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n * @author WestLangley / http://github.com/WestLangley\n*/\n\nfunction Camera() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Camera';\n\n\tthis.matrixWorldInverse = new Matrix4();\n\tthis.projectionMatrix = new Matrix4();\n\n}\n\nCamera.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Camera,\n\n\tisCamera: true,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tObject3D.prototype.copy.call( this, source, recursive );\n\n\t\tthis.matrixWorldInverse.copy( source.matrixWorldInverse );\n\t\tthis.projectionMatrix.copy( source.projectionMatrix );\n\n\t\treturn this;\n\n\t},\n\n\tgetWorldDirection: function () {\n\n\t\tvar quaternion = new Quaternion();\n\n\t\treturn function getWorldDirection( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new Vector3();\n\n\t\t\tthis.getWorldQuaternion( quaternion );\n\n\t\t\treturn result.set( 0, 0, - 1 ).applyQuaternion( quaternion );\n\n\t\t};\n\n\t}(),\n\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tObject3D.prototype.updateMatrixWorld.call( this, force );\n\n\t\tthis.matrixWorldInverse.getInverse( this.matrixWorld );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n} );\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author arose / http://github.com/arose\n */\n\nfunction OrthographicCamera( left, right, top, bottom, near, far ) {\n\n\tCamera.call( this );\n\n\tthis.type = 'OrthographicCamera';\n\n\tthis.zoom = 1;\n\tthis.view = null;\n\n\tthis.left = left;\n\tthis.right = right;\n\tthis.top = top;\n\tthis.bottom = bottom;\n\n\tthis.near = ( near !== undefined ) ? near : 0.1;\n\tthis.far = ( far !== undefined ) ? far : 2000;\n\n\tthis.updateProjectionMatrix();\n\n}\n\nOrthographicCamera.prototype = Object.assign( Object.create( Camera.prototype ), {\n\n\tconstructor: OrthographicCamera,\n\n\tisOrthographicCamera: true,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tCamera.prototype.copy.call( this, source, recursive );\n\n\t\tthis.left = source.left;\n\t\tthis.right = source.right;\n\t\tthis.top = source.top;\n\t\tthis.bottom = source.bottom;\n\t\tthis.near = source.near;\n\t\tthis.far = source.far;\n\n\t\tthis.zoom = source.zoom;\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\n\n\t\treturn this;\n\n\t},\n\n\tsetViewOffset: function ( fullWidth, fullHeight, x, y, width, height ) {\n\n\t\tif ( this.view === null ) {\n\n\t\t\tthis.view = {\n\t\t\t\tenabled: true,\n\t\t\t\tfullWidth: 1,\n\t\t\t\tfullHeight: 1,\n\t\t\t\toffsetX: 0,\n\t\t\t\toffsetY: 0,\n\t\t\t\twidth: 1,\n\t\t\t\theight: 1\n\t\t\t};\n\n\t\t}\n\n\t\tthis.view.enabled = true;\n\t\tthis.view.fullWidth = fullWidth;\n\t\tthis.view.fullHeight = fullHeight;\n\t\tthis.view.offsetX = x;\n\t\tthis.view.offsetY = y;\n\t\tthis.view.width = width;\n\t\tthis.view.height = height;\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tclearViewOffset: function () {\n\n\t\tif ( this.view !== null ) {\n\n\t\t\tthis.view.enabled = false;\n\n\t\t}\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tupdateProjectionMatrix: function () {\n\n\t\tvar dx = ( this.right - this.left ) / ( 2 * this.zoom );\n\t\tvar dy = ( this.top - this.bottom ) / ( 2 * this.zoom );\n\t\tvar cx = ( this.right + this.left ) / 2;\n\t\tvar cy = ( this.top + this.bottom ) / 2;\n\n\t\tvar left = cx - dx;\n\t\tvar right = cx + dx;\n\t\tvar top = cy + dy;\n\t\tvar bottom = cy - dy;\n\n\t\tif ( this.view !== null && this.view.enabled ) {\n\n\t\t\tvar zoomW = this.zoom / ( this.view.width / this.view.fullWidth );\n\t\t\tvar zoomH = this.zoom / ( this.view.height / this.view.fullHeight );\n\t\t\tvar scaleW = ( this.right - this.left ) / this.view.width;\n\t\t\tvar scaleH = ( this.top - this.bottom ) / this.view.height;\n\n\t\t\tleft += scaleW * ( this.view.offsetX / zoomW );\n\t\t\tright = left + scaleW * ( this.view.width / zoomW );\n\t\t\ttop -= scaleH * ( this.view.offsetY / zoomH );\n\t\t\tbottom = top - scaleH * ( this.view.height / zoomH );\n\n\t\t}\n\n\t\tthis.projectionMatrix.makeOrthographic( left, right, top, bottom, this.near, this.far );\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.zoom = this.zoom;\n\t\tdata.object.left = this.left;\n\t\tdata.object.right = this.right;\n\t\tdata.object.top = this.top;\n\t\tdata.object.bottom = this.bottom;\n\t\tdata.object.near = this.near;\n\t\tdata.object.far = this.far;\n\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\n\n\t\treturn data;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction Face3( a, b, c, normal, color, materialIndex ) {\n\n\tthis.a = a;\n\tthis.b = b;\n\tthis.c = c;\n\n\tthis.normal = ( normal && normal.isVector3 ) ? normal : new Vector3();\n\tthis.vertexNormals = Array.isArray( normal ) ? normal : [];\n\n\tthis.color = ( color && color.isColor ) ? color : new Color();\n\tthis.vertexColors = Array.isArray( color ) ? color : [];\n\n\tthis.materialIndex = materialIndex !== undefined ? materialIndex : 0;\n\n}\n\nObject.assign( Face3.prototype, {\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.a = source.a;\n\t\tthis.b = source.b;\n\t\tthis.c = source.c;\n\n\t\tthis.normal.copy( source.normal );\n\t\tthis.color.copy( source.color );\n\n\t\tthis.materialIndex = source.materialIndex;\n\n\t\tfor ( var i = 0, il = source.vertexNormals.length; i < il; i ++ ) {\n\n\t\t\tthis.vertexNormals[ i ] = source.vertexNormals[ i ].clone();\n\n\t\t}\n\n\t\tfor ( var i = 0, il = source.vertexColors.length; i < il; i ++ ) {\n\n\t\t\tthis.vertexColors[ i ] = source.vertexColors[ i ].clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author kile / http://kile.stravaganza.org/\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author bhouston / http://clara.io\n */\n\nvar geometryId = 0; // Geometry uses even numbers as Id\n\nfunction Geometry() {\n\n\tObject.defineProperty( this, 'id', { value: geometryId += 2 } );\n\n\tthis.uuid = _Math.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Geometry';\n\n\tthis.vertices = [];\n\tthis.colors = [];\n\tthis.faces = [];\n\tthis.faceVertexUvs = [[]];\n\n\tthis.morphTargets = [];\n\tthis.morphNormals = [];\n\n\tthis.skinWeights = [];\n\tthis.skinIndices = [];\n\n\tthis.lineDistances = [];\n\n\tthis.boundingBox = null;\n\tthis.boundingSphere = null;\n\n\t// update flags\n\n\tthis.elementsNeedUpdate = false;\n\tthis.verticesNeedUpdate = false;\n\tthis.uvsNeedUpdate = false;\n\tthis.normalsNeedUpdate = false;\n\tthis.colorsNeedUpdate = false;\n\tthis.lineDistancesNeedUpdate = false;\n\tthis.groupsNeedUpdate = false;\n\n}\n\nGeometry.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Geometry,\n\n\tisGeometry: true,\n\n\tapplyMatrix: function ( matrix ) {\n\n\t\tvar normalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\tfor ( var i = 0, il = this.vertices.length; i < il; i ++ ) {\n\n\t\t\tvar vertex = this.vertices[ i ];\n\t\t\tvertex.applyMatrix4( matrix );\n\n\t\t}\n\n\t\tfor ( var i = 0, il = this.faces.length; i < il; i ++ ) {\n\n\t\t\tvar face = this.faces[ i ];\n\t\t\tface.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\tfor ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\tface.vertexNormals[ j ].applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.boundingBox !== null ) {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t}\n\n\t\tif ( this.boundingSphere !== null ) {\n\n\t\t\tthis.computeBoundingSphere();\n\n\t\t}\n\n\t\tthis.verticesNeedUpdate = true;\n\t\tthis.normalsNeedUpdate = true;\n\n\t\treturn this;\n\n\t},\n\n\trotateX: function () {\n\n\t\t// rotate geometry around world x-axis\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function rotateX( angle ) {\n\n\t\t\tm1.makeRotationX( angle );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\trotateY: function () {\n\n\t\t// rotate geometry around world y-axis\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function rotateY( angle ) {\n\n\t\t\tm1.makeRotationY( angle );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\trotateZ: function () {\n\n\t\t// rotate geometry around world z-axis\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function rotateZ( angle ) {\n\n\t\t\tm1.makeRotationZ( angle );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\ttranslate: function () {\n\n\t\t// translate geometry\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function translate( x, y, z ) {\n\n\t\t\tm1.makeTranslation( x, y, z );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tscale: function () {\n\n\t\t// scale geometry\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function scale( x, y, z ) {\n\n\t\t\tm1.makeScale( x, y, z );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tlookAt: function () {\n\n\t\tvar obj = new Object3D();\n\n\t\treturn function lookAt( vector ) {\n\n\t\t\tobj.lookAt( vector );\n\n\t\t\tobj.updateMatrix();\n\n\t\t\tthis.applyMatrix( obj.matrix );\n\n\t\t};\n\n\t}(),\n\n\tfromBufferGeometry: function ( geometry ) {\n\n\t\tvar scope = this;\n\n\t\tvar indices = geometry.index !== null ? geometry.index.array : undefined;\n\t\tvar attributes = geometry.attributes;\n\n\t\tvar positions = attributes.position.array;\n\t\tvar normals = attributes.normal !== undefined ? attributes.normal.array : undefined;\n\t\tvar colors = attributes.color !== undefined ? attributes.color.array : undefined;\n\t\tvar uvs = attributes.uv !== undefined ? attributes.uv.array : undefined;\n\t\tvar uvs2 = attributes.uv2 !== undefined ? attributes.uv2.array : undefined;\n\n\t\tif ( uvs2 !== undefined ) this.faceVertexUvs[ 1 ] = [];\n\n\t\tvar tempNormals = [];\n\t\tvar tempUVs = [];\n\t\tvar tempUVs2 = [];\n\n\t\tfor ( var i = 0, j = 0; i < positions.length; i += 3, j += 2 ) {\n\n\t\t\tscope.vertices.push( new Vector3( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] ) );\n\n\t\t\tif ( normals !== undefined ) {\n\n\t\t\t\ttempNormals.push( new Vector3( normals[ i ], normals[ i + 1 ], normals[ i + 2 ] ) );\n\n\t\t\t}\n\n\t\t\tif ( colors !== undefined ) {\n\n\t\t\t\tscope.colors.push( new Color( colors[ i ], colors[ i + 1 ], colors[ i + 2 ] ) );\n\n\t\t\t}\n\n\t\t\tif ( uvs !== undefined ) {\n\n\t\t\t\ttempUVs.push( new Vector2( uvs[ j ], uvs[ j + 1 ] ) );\n\n\t\t\t}\n\n\t\t\tif ( uvs2 !== undefined ) {\n\n\t\t\t\ttempUVs2.push( new Vector2( uvs2[ j ], uvs2[ j + 1 ] ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction addFace( a, b, c, materialIndex ) {\n\n\t\t\tvar vertexNormals = normals !== undefined ? [ tempNormals[ a ].clone(), tempNormals[ b ].clone(), tempNormals[ c ].clone() ] : [];\n\t\t\tvar vertexColors = colors !== undefined ? [ scope.colors[ a ].clone(), scope.colors[ b ].clone(), scope.colors[ c ].clone() ] : [];\n\n\t\t\tvar face = new Face3( a, b, c, vertexNormals, vertexColors, materialIndex );\n\n\t\t\tscope.faces.push( face );\n\n\t\t\tif ( uvs !== undefined ) {\n\n\t\t\t\tscope.faceVertexUvs[ 0 ].push( [ tempUVs[ a ].clone(), tempUVs[ b ].clone(), tempUVs[ c ].clone() ] );\n\n\t\t\t}\n\n\t\t\tif ( uvs2 !== undefined ) {\n\n\t\t\t\tscope.faceVertexUvs[ 1 ].push( [ tempUVs2[ a ].clone(), tempUVs2[ b ].clone(), tempUVs2[ c ].clone() ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar groups = geometry.groups;\n\n\t\tif ( groups.length > 0 ) {\n\n\t\t\tfor ( var i = 0; i < groups.length; i ++ ) {\n\n\t\t\t\tvar group = groups[ i ];\n\n\t\t\t\tvar start = group.start;\n\t\t\t\tvar count = group.count;\n\n\t\t\t\tfor ( var j = start, jl = start + count; j < jl; j += 3 ) {\n\n\t\t\t\t\tif ( indices !== undefined ) {\n\n\t\t\t\t\t\taddFace( indices[ j ], indices[ j + 1 ], indices[ j + 2 ], group.materialIndex );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\taddFace( j, j + 1, j + 2, group.materialIndex );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( indices !== undefined ) {\n\n\t\t\t\tfor ( var i = 0; i < indices.length; i += 3 ) {\n\n\t\t\t\t\taddFace( indices[ i ], indices[ i + 1 ], indices[ i + 2 ] );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tfor ( var i = 0; i < positions.length / 3; i += 3 ) {\n\n\t\t\t\t\taddFace( i, i + 1, i + 2 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.computeFaceNormals();\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t}\n\n\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcenter: function () {\n\n\t\tthis.computeBoundingBox();\n\n\t\tvar offset = this.boundingBox.getCenter().negate();\n\n\t\tthis.translate( offset.x, offset.y, offset.z );\n\n\t\treturn offset;\n\n\t},\n\n\tnormalize: function () {\n\n\t\tthis.computeBoundingSphere();\n\n\t\tvar center = this.boundingSphere.center;\n\t\tvar radius = this.boundingSphere.radius;\n\n\t\tvar s = radius === 0 ? 1 : 1.0 / radius;\n\n\t\tvar matrix = new Matrix4();\n\t\tmatrix.set(\n\t\t\ts, 0, 0, - s * center.x,\n\t\t\t0, s, 0, - s * center.y,\n\t\t\t0, 0, s, - s * center.z,\n\t\t\t0, 0, 0, 1\n\t\t);\n\n\t\tthis.applyMatrix( matrix );\n\n\t\treturn this;\n\n\t},\n\n\tcomputeFaceNormals: function () {\n\n\t\tvar cb = new Vector3(), ab = new Vector3();\n\n\t\tfor ( var f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tvar face = this.faces[ f ];\n\n\t\t\tvar vA = this.vertices[ face.a ];\n\t\t\tvar vB = this.vertices[ face.b ];\n\t\t\tvar vC = this.vertices[ face.c ];\n\n\t\t\tcb.subVectors( vC, vB );\n\t\t\tab.subVectors( vA, vB );\n\t\t\tcb.cross( ab );\n\n\t\t\tcb.normalize();\n\n\t\t\tface.normal.copy( cb );\n\n\t\t}\n\n\t},\n\n\tcomputeVertexNormals: function ( areaWeighted ) {\n\n\t\tif ( areaWeighted === undefined ) areaWeighted = true;\n\n\t\tvar v, vl, f, fl, face, vertices;\n\n\t\tvertices = new Array( this.vertices.length );\n\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\n\n\t\t\tvertices[ v ] = new Vector3();\n\n\t\t}\n\n\t\tif ( areaWeighted ) {\n\n\t\t\t// vertex normals weighted by triangle areas\n\t\t\t// http://www.iquilezles.org/www/articles/normals/normals.htm\n\n\t\t\tvar vA, vB, vC;\n\t\t\tvar cb = new Vector3(), ab = new Vector3();\n\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\tvA = this.vertices[ face.a ];\n\t\t\t\tvB = this.vertices[ face.b ];\n\t\t\t\tvC = this.vertices[ face.c ];\n\n\t\t\t\tcb.subVectors( vC, vB );\n\t\t\t\tab.subVectors( vA, vB );\n\t\t\t\tcb.cross( ab );\n\n\t\t\t\tvertices[ face.a ].add( cb );\n\t\t\t\tvertices[ face.b ].add( cb );\n\t\t\t\tvertices[ face.c ].add( cb );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis.computeFaceNormals();\n\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\tvertices[ face.a ].add( face.normal );\n\t\t\t\tvertices[ face.b ].add( face.normal );\n\t\t\t\tvertices[ face.c ].add( face.normal );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\n\n\t\t\tvertices[ v ].normalize();\n\n\t\t}\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tvar vertexNormals = face.vertexNormals;\n\n\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\tvertexNormals[ 0 ].copy( vertices[ face.a ] );\n\t\t\t\tvertexNormals[ 1 ].copy( vertices[ face.b ] );\n\t\t\t\tvertexNormals[ 2 ].copy( vertices[ face.c ] );\n\n\t\t\t} else {\n\n\t\t\t\tvertexNormals[ 0 ] = vertices[ face.a ].clone();\n\t\t\t\tvertexNormals[ 1 ] = vertices[ face.b ].clone();\n\t\t\t\tvertexNormals[ 2 ] = vertices[ face.c ].clone();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.faces.length > 0 ) {\n\n\t\t\tthis.normalsNeedUpdate = true;\n\n\t\t}\n\n\t},\n\n\tcomputeFlatVertexNormals: function () {\n\n\t\tvar f, fl, face;\n\n\t\tthis.computeFaceNormals();\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tvar vertexNormals = face.vertexNormals;\n\n\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\tvertexNormals[ 0 ].copy( face.normal );\n\t\t\t\tvertexNormals[ 1 ].copy( face.normal );\n\t\t\t\tvertexNormals[ 2 ].copy( face.normal );\n\n\t\t\t} else {\n\n\t\t\t\tvertexNormals[ 0 ] = face.normal.clone();\n\t\t\t\tvertexNormals[ 1 ] = face.normal.clone();\n\t\t\t\tvertexNormals[ 2 ] = face.normal.clone();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.faces.length > 0 ) {\n\n\t\t\tthis.normalsNeedUpdate = true;\n\n\t\t}\n\n\t},\n\n\tcomputeMorphNormals: function () {\n\n\t\tvar i, il, f, fl, face;\n\n\t\t// save original normals\n\t\t// - create temp variables on first access\n\t\t//   otherwise just copy (for faster repeated calls)\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tif ( ! face.__originalFaceNormal ) {\n\n\t\t\t\tface.__originalFaceNormal = face.normal.clone();\n\n\t\t\t} else {\n\n\t\t\t\tface.__originalFaceNormal.copy( face.normal );\n\n\t\t\t}\n\n\t\t\tif ( ! face.__originalVertexNormals ) face.__originalVertexNormals = [];\n\n\t\t\tfor ( i = 0, il = face.vertexNormals.length; i < il; i ++ ) {\n\n\t\t\t\tif ( ! face.__originalVertexNormals[ i ] ) {\n\n\t\t\t\t\tface.__originalVertexNormals[ i ] = face.vertexNormals[ i ].clone();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tface.__originalVertexNormals[ i ].copy( face.vertexNormals[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// use temp geometry to compute face and vertex normals for each morph\n\n\t\tvar tmpGeo = new Geometry();\n\t\ttmpGeo.faces = this.faces;\n\n\t\tfor ( i = 0, il = this.morphTargets.length; i < il; i ++ ) {\n\n\t\t\t// create on first access\n\n\t\t\tif ( ! this.morphNormals[ i ] ) {\n\n\t\t\t\tthis.morphNormals[ i ] = {};\n\t\t\t\tthis.morphNormals[ i ].faceNormals = [];\n\t\t\t\tthis.morphNormals[ i ].vertexNormals = [];\n\n\t\t\t\tvar dstNormalsFace = this.morphNormals[ i ].faceNormals;\n\t\t\t\tvar dstNormalsVertex = this.morphNormals[ i ].vertexNormals;\n\n\t\t\t\tvar faceNormal, vertexNormals;\n\n\t\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\t\tfaceNormal = new Vector3();\n\t\t\t\t\tvertexNormals = { a: new Vector3(), b: new Vector3(), c: new Vector3() };\n\n\t\t\t\t\tdstNormalsFace.push( faceNormal );\n\t\t\t\t\tdstNormalsVertex.push( vertexNormals );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar morphNormals = this.morphNormals[ i ];\n\n\t\t\t// set vertices to morph target\n\n\t\t\ttmpGeo.vertices = this.morphTargets[ i ].vertices;\n\n\t\t\t// compute morph normals\n\n\t\t\ttmpGeo.computeFaceNormals();\n\t\t\ttmpGeo.computeVertexNormals();\n\n\t\t\t// store morph normals\n\n\t\t\tvar faceNormal, vertexNormals;\n\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\tfaceNormal = morphNormals.faceNormals[ f ];\n\t\t\t\tvertexNormals = morphNormals.vertexNormals[ f ];\n\n\t\t\t\tfaceNormal.copy( face.normal );\n\n\t\t\t\tvertexNormals.a.copy( face.vertexNormals[ 0 ] );\n\t\t\t\tvertexNormals.b.copy( face.vertexNormals[ 1 ] );\n\t\t\t\tvertexNormals.c.copy( face.vertexNormals[ 2 ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// restore original normals\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tface.normal = face.__originalFaceNormal;\n\t\t\tface.vertexNormals = face.__originalVertexNormals;\n\n\t\t}\n\n\t},\n\n\tcomputeLineDistances: function () {\n\n\t\tvar d = 0;\n\t\tvar vertices = this.vertices;\n\n\t\tfor ( var i = 0, il = vertices.length; i < il; i ++ ) {\n\n\t\t\tif ( i > 0 ) {\n\n\t\t\t\td += vertices[ i ].distanceTo( vertices[ i - 1 ] );\n\n\t\t\t}\n\n\t\t\tthis.lineDistances[ i ] = d;\n\n\t\t}\n\n\t},\n\n\tcomputeBoundingBox: function () {\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.boundingBox = new Box3();\n\n\t\t}\n\n\t\tthis.boundingBox.setFromPoints( this.vertices );\n\n\t},\n\n\tcomputeBoundingSphere: function () {\n\n\t\tif ( this.boundingSphere === null ) {\n\n\t\t\tthis.boundingSphere = new Sphere();\n\n\t\t}\n\n\t\tthis.boundingSphere.setFromPoints( this.vertices );\n\n\t},\n\n\tmerge: function ( geometry, matrix, materialIndexOffset ) {\n\n\t\tif ( ! ( geometry && geometry.isGeometry ) ) {\n\n\t\t\tconsole.error( 'THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.', geometry );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar normalMatrix,\n\t\t\tvertexOffset = this.vertices.length,\n\t\t\tvertices1 = this.vertices,\n\t\t\tvertices2 = geometry.vertices,\n\t\t\tfaces1 = this.faces,\n\t\t\tfaces2 = geometry.faces,\n\t\t\tuvs1 = this.faceVertexUvs[ 0 ],\n\t\t\tuvs2 = geometry.faceVertexUvs[ 0 ],\n\t\t\tcolors1 = this.colors,\n\t\t\tcolors2 = geometry.colors;\n\n\t\tif ( materialIndexOffset === undefined ) materialIndexOffset = 0;\n\n\t\tif ( matrix !== undefined ) {\n\n\t\t\tnormalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\t}\n\n\t\t// vertices\n\n\t\tfor ( var i = 0, il = vertices2.length; i < il; i ++ ) {\n\n\t\t\tvar vertex = vertices2[ i ];\n\n\t\t\tvar vertexCopy = vertex.clone();\n\n\t\t\tif ( matrix !== undefined ) vertexCopy.applyMatrix4( matrix );\n\n\t\t\tvertices1.push( vertexCopy );\n\n\t\t}\n\n\t\t// colors\n\n\t\tfor ( var i = 0, il = colors2.length; i < il; i ++ ) {\n\n\t\t\tcolors1.push( colors2[ i ].clone() );\n\n\t\t}\n\n\t\t// faces\n\n\t\tfor ( i = 0, il = faces2.length; i < il; i ++ ) {\n\n\t\t\tvar face = faces2[ i ], faceCopy, normal, color,\n\t\t\t\tfaceVertexNormals = face.vertexNormals,\n\t\t\t\tfaceVertexColors = face.vertexColors;\n\n\t\t\tfaceCopy = new Face3( face.a + vertexOffset, face.b + vertexOffset, face.c + vertexOffset );\n\t\t\tfaceCopy.normal.copy( face.normal );\n\n\t\t\tif ( normalMatrix !== undefined ) {\n\n\t\t\t\tfaceCopy.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t}\n\n\t\t\tfor ( var j = 0, jl = faceVertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\tnormal = faceVertexNormals[ j ].clone();\n\n\t\t\t\tif ( normalMatrix !== undefined ) {\n\n\t\t\t\t\tnormal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t\t}\n\n\t\t\t\tfaceCopy.vertexNormals.push( normal );\n\n\t\t\t}\n\n\t\t\tfaceCopy.color.copy( face.color );\n\n\t\t\tfor ( var j = 0, jl = faceVertexColors.length; j < jl; j ++ ) {\n\n\t\t\t\tcolor = faceVertexColors[ j ];\n\t\t\t\tfaceCopy.vertexColors.push( color.clone() );\n\n\t\t\t}\n\n\t\t\tfaceCopy.materialIndex = face.materialIndex + materialIndexOffset;\n\n\t\t\tfaces1.push( faceCopy );\n\n\t\t}\n\n\t\t// uvs\n\n\t\tfor ( i = 0, il = uvs2.length; i < il; i ++ ) {\n\n\t\t\tvar uv = uvs2[ i ], uvCopy = [];\n\n\t\t\tif ( uv === undefined ) {\n\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tfor ( var j = 0, jl = uv.length; j < jl; j ++ ) {\n\n\t\t\t\tuvCopy.push( uv[ j ].clone() );\n\n\t\t\t}\n\n\t\t\tuvs1.push( uvCopy );\n\n\t\t}\n\n\t},\n\n\tmergeMesh: function ( mesh ) {\n\n\t\tif ( ! ( mesh && mesh.isMesh ) ) {\n\n\t\t\tconsole.error( 'THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.', mesh );\n\t\t\treturn;\n\n\t\t}\n\n\t\tmesh.matrixAutoUpdate && mesh.updateMatrix();\n\n\t\tthis.merge( mesh.geometry, mesh.matrix );\n\n\t},\n\n\t/*\n\t * Checks for duplicate vertices with hashmap.\n\t * Duplicated vertices are removed\n\t * and faces' vertices are updated.\n\t */\n\n\tmergeVertices: function () {\n\n\t\tvar verticesMap = {}; // Hashmap for looking up vertices by position coordinates (and making sure they are unique)\n\t\tvar unique = [], changes = [];\n\n\t\tvar v, key;\n\t\tvar precisionPoints = 4; // number of decimal points, e.g. 4 for epsilon of 0.0001\n\t\tvar precision = Math.pow( 10, precisionPoints );\n\t\tvar i, il, face;\n\t\tvar indices, j, jl;\n\n\t\tfor ( i = 0, il = this.vertices.length; i < il; i ++ ) {\n\n\t\t\tv = this.vertices[ i ];\n\t\t\tkey = Math.round( v.x * precision ) + '_' + Math.round( v.y * precision ) + '_' + Math.round( v.z * precision );\n\n\t\t\tif ( verticesMap[ key ] === undefined ) {\n\n\t\t\t\tverticesMap[ key ] = i;\n\t\t\t\tunique.push( this.vertices[ i ] );\n\t\t\t\tchanges[ i ] = unique.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\t//console.log('Duplicate vertex found. ', i, ' could be using ', verticesMap[key]);\n\t\t\t\tchanges[ i ] = changes[ verticesMap[ key ] ];\n\n\t\t\t}\n\n\t\t}\n\n\n\t\t// if faces are completely degenerate after merging vertices, we\n\t\t// have to remove them from the geometry.\n\t\tvar faceIndicesToRemove = [];\n\n\t\tfor ( i = 0, il = this.faces.length; i < il; i ++ ) {\n\n\t\t\tface = this.faces[ i ];\n\n\t\t\tface.a = changes[ face.a ];\n\t\t\tface.b = changes[ face.b ];\n\t\t\tface.c = changes[ face.c ];\n\n\t\t\tindices = [ face.a, face.b, face.c ];\n\n\t\t\t// if any duplicate vertices are found in a Face3\n\t\t\t// we have to remove the face as nothing can be saved\n\t\t\tfor ( var n = 0; n < 3; n ++ ) {\n\n\t\t\t\tif ( indices[ n ] === indices[ ( n + 1 ) % 3 ] ) {\n\n\t\t\t\t\tfaceIndicesToRemove.push( i );\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( i = faceIndicesToRemove.length - 1; i >= 0; i -- ) {\n\n\t\t\tvar idx = faceIndicesToRemove[ i ];\n\n\t\t\tthis.faces.splice( idx, 1 );\n\n\t\t\tfor ( j = 0, jl = this.faceVertexUvs.length; j < jl; j ++ ) {\n\n\t\t\t\tthis.faceVertexUvs[ j ].splice( idx, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Use unique set of vertices\n\n\t\tvar diff = this.vertices.length - unique.length;\n\t\tthis.vertices = unique;\n\t\treturn diff;\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tthis.vertices = [];\n\n\t\tfor ( var i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tvar point = points[ i ];\n\t\t\tthis.vertices.push( new Vector3( point.x, point.y, point.z || 0 ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsortFacesByMaterialIndex: function () {\n\n\t\tvar faces = this.faces;\n\t\tvar length = faces.length;\n\n\t\t// tag faces\n\n\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\tfaces[ i ]._id = i;\n\n\t\t}\n\n\t\t// sort faces\n\n\t\tfunction materialIndexSort( a, b ) {\n\n\t\t\treturn a.materialIndex - b.materialIndex;\n\n\t\t}\n\n\t\tfaces.sort( materialIndexSort );\n\n\t\t// sort uvs\n\n\t\tvar uvs1 = this.faceVertexUvs[ 0 ];\n\t\tvar uvs2 = this.faceVertexUvs[ 1 ];\n\n\t\tvar newUvs1, newUvs2;\n\n\t\tif ( uvs1 && uvs1.length === length ) newUvs1 = [];\n\t\tif ( uvs2 && uvs2.length === length ) newUvs2 = [];\n\n\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\tvar id = faces[ i ]._id;\n\n\t\t\tif ( newUvs1 ) newUvs1.push( uvs1[ id ] );\n\t\t\tif ( newUvs2 ) newUvs2.push( uvs2[ id ] );\n\n\t\t}\n\n\t\tif ( newUvs1 ) this.faceVertexUvs[ 0 ] = newUvs1;\n\t\tif ( newUvs2 ) this.faceVertexUvs[ 1 ] = newUvs2;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Geometry',\n\t\t\t\tgenerator: 'Geometry.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard Geometry serialization\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\t\tif ( this.name !== '' ) data.name = this.name;\n\n\t\tif ( this.parameters !== undefined ) {\n\n\t\t\tvar parameters = this.parameters;\n\n\t\t\tfor ( var key in parameters ) {\n\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tvar vertices = [];\n\n\t\tfor ( var i = 0; i < this.vertices.length; i ++ ) {\n\n\t\t\tvar vertex = this.vertices[ i ];\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t}\n\n\t\tvar faces = [];\n\t\tvar normals = [];\n\t\tvar normalsHash = {};\n\t\tvar colors = [];\n\t\tvar colorsHash = {};\n\t\tvar uvs = [];\n\t\tvar uvsHash = {};\n\n\t\tfor ( var i = 0; i < this.faces.length; i ++ ) {\n\n\t\t\tvar face = this.faces[ i ];\n\n\t\t\tvar hasMaterial = true;\n\t\t\tvar hasFaceUv = false; // deprecated\n\t\t\tvar hasFaceVertexUv = this.faceVertexUvs[ 0 ][ i ] !== undefined;\n\t\t\tvar hasFaceNormal = face.normal.length() > 0;\n\t\t\tvar hasFaceVertexNormal = face.vertexNormals.length > 0;\n\t\t\tvar hasFaceColor = face.color.r !== 1 || face.color.g !== 1 || face.color.b !== 1;\n\t\t\tvar hasFaceVertexColor = face.vertexColors.length > 0;\n\n\t\t\tvar faceType = 0;\n\n\t\t\tfaceType = setBit( faceType, 0, 0 ); // isQuad\n\t\t\tfaceType = setBit( faceType, 1, hasMaterial );\n\t\t\tfaceType = setBit( faceType, 2, hasFaceUv );\n\t\t\tfaceType = setBit( faceType, 3, hasFaceVertexUv );\n\t\t\tfaceType = setBit( faceType, 4, hasFaceNormal );\n\t\t\tfaceType = setBit( faceType, 5, hasFaceVertexNormal );\n\t\t\tfaceType = setBit( faceType, 6, hasFaceColor );\n\t\t\tfaceType = setBit( faceType, 7, hasFaceVertexColor );\n\n\t\t\tfaces.push( faceType );\n\t\t\tfaces.push( face.a, face.b, face.c );\n\t\t\tfaces.push( face.materialIndex );\n\n\t\t\tif ( hasFaceVertexUv ) {\n\n\t\t\t\tvar faceVertexUvs = this.faceVertexUvs[ 0 ][ i ];\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 0 ] ),\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 1 ] ),\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( hasFaceNormal ) {\n\n\t\t\t\tfaces.push( getNormalIndex( face.normal ) );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexNormal ) {\n\n\t\t\t\tvar vertexNormals = face.vertexNormals;\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 0 ] ),\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 1 ] ),\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( hasFaceColor ) {\n\n\t\t\t\tfaces.push( getColorIndex( face.color ) );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexColor ) {\n\n\t\t\t\tvar vertexColors = face.vertexColors;\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetColorIndex( vertexColors[ 0 ] ),\n\t\t\t\t\tgetColorIndex( vertexColors[ 1 ] ),\n\t\t\t\t\tgetColorIndex( vertexColors[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction setBit( value, position, enabled ) {\n\n\t\t\treturn enabled ? value | ( 1 << position ) : value & ( ~ ( 1 << position ) );\n\n\t\t}\n\n\t\tfunction getNormalIndex( normal ) {\n\n\t\t\tvar hash = normal.x.toString() + normal.y.toString() + normal.z.toString();\n\n\t\t\tif ( normalsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn normalsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tnormalsHash[ hash ] = normals.length / 3;\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\treturn normalsHash[ hash ];\n\n\t\t}\n\n\t\tfunction getColorIndex( color ) {\n\n\t\t\tvar hash = color.r.toString() + color.g.toString() + color.b.toString();\n\n\t\t\tif ( colorsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn colorsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tcolorsHash[ hash ] = colors.length;\n\t\t\tcolors.push( color.getHex() );\n\n\t\t\treturn colorsHash[ hash ];\n\n\t\t}\n\n\t\tfunction getUvIndex( uv ) {\n\n\t\t\tvar hash = uv.x.toString() + uv.y.toString();\n\n\t\t\tif ( uvsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn uvsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tuvsHash[ hash ] = uvs.length / 2;\n\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\treturn uvsHash[ hash ];\n\n\t\t}\n\n\t\tdata.data = {};\n\n\t\tdata.data.vertices = vertices;\n\t\tdata.data.normals = normals;\n\t\tif ( colors.length > 0 ) data.data.colors = colors;\n\t\tif ( uvs.length > 0 ) data.data.uvs = [ uvs ]; // temporal backward compatibility\n\t\tdata.data.faces = faces;\n\n\t\treturn data;\n\n\t},\n\n\tclone: function () {\n\n\t\t/*\n\t\t // Handle primitives\n\n\t\t var parameters = this.parameters;\n\n\t\t if ( parameters !== undefined ) {\n\n\t\t var values = [];\n\n\t\t for ( var key in parameters ) {\n\n\t\t values.push( parameters[ key ] );\n\n\t\t }\n\n\t\t var geometry = Object.create( this.constructor.prototype );\n\t\t this.constructor.apply( geometry, values );\n\t\t return geometry;\n\n\t\t }\n\n\t\t return new this.constructor().copy( this );\n\t\t */\n\n\t\treturn new Geometry().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tvar i, il, j, jl, k, kl;\n\n\t\t// reset\n\n\t\tthis.vertices = [];\n\t\tthis.colors = [];\n\t\tthis.faces = [];\n\t\tthis.faceVertexUvs = [[]];\n\t\tthis.morphTargets = [];\n\t\tthis.morphNormals = [];\n\t\tthis.skinWeights = [];\n\t\tthis.skinIndices = [];\n\t\tthis.lineDistances = [];\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\t// name\n\n\t\tthis.name = source.name;\n\n\t\t// vertices\n\n\t\tvar vertices = source.vertices;\n\n\t\tfor ( i = 0, il = vertices.length; i < il; i ++ ) {\n\n\t\t\tthis.vertices.push( vertices[ i ].clone() );\n\n\t\t}\n\n\t\t// colors\n\n\t\tvar colors = source.colors;\n\n\t\tfor ( i = 0, il = colors.length; i < il; i ++ ) {\n\n\t\t\tthis.colors.push( colors[ i ].clone() );\n\n\t\t}\n\n\t\t// faces\n\n\t\tvar faces = source.faces;\n\n\t\tfor ( i = 0, il = faces.length; i < il; i ++ ) {\n\n\t\t\tthis.faces.push( faces[ i ].clone() );\n\n\t\t}\n\n\t\t// face vertex uvs\n\n\t\tfor ( i = 0, il = source.faceVertexUvs.length; i < il; i ++ ) {\n\n\t\t\tvar faceVertexUvs = source.faceVertexUvs[ i ];\n\n\t\t\tif ( this.faceVertexUvs[ i ] === undefined ) {\n\n\t\t\t\tthis.faceVertexUvs[ i ] = [];\n\n\t\t\t}\n\n\t\t\tfor ( j = 0, jl = faceVertexUvs.length; j < jl; j ++ ) {\n\n\t\t\t\tvar uvs = faceVertexUvs[ j ], uvsCopy = [];\n\n\t\t\t\tfor ( k = 0, kl = uvs.length; k < kl; k ++ ) {\n\n\t\t\t\t\tvar uv = uvs[ k ];\n\n\t\t\t\t\tuvsCopy.push( uv.clone() );\n\n\t\t\t\t}\n\n\t\t\t\tthis.faceVertexUvs[ i ].push( uvsCopy );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// morph targets\n\n\t\tvar morphTargets = source.morphTargets;\n\n\t\tfor ( i = 0, il = morphTargets.length; i < il; i ++ ) {\n\n\t\t\tvar morphTarget = {};\n\t\t\tmorphTarget.name = morphTargets[ i ].name;\n\n\t\t\t// vertices\n\n\t\t\tif ( morphTargets[ i ].vertices !== undefined ) {\n\n\t\t\t\tmorphTarget.vertices = [];\n\n\t\t\t\tfor ( j = 0, jl = morphTargets[ i ].vertices.length; j < jl; j ++ ) {\n\n\t\t\t\t\tmorphTarget.vertices.push( morphTargets[ i ].vertices[ j ].clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// normals\n\n\t\t\tif ( morphTargets[ i ].normals !== undefined ) {\n\n\t\t\t\tmorphTarget.normals = [];\n\n\t\t\t\tfor ( j = 0, jl = morphTargets[ i ].normals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tmorphTarget.normals.push( morphTargets[ i ].normals[ j ].clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.morphTargets.push( morphTarget );\n\n\t\t}\n\n\t\t// morph normals\n\n\t\tvar morphNormals = source.morphNormals;\n\n\t\tfor ( i = 0, il = morphNormals.length; i < il; i ++ ) {\n\n\t\t\tvar morphNormal = {};\n\n\t\t\t// vertex normals\n\n\t\t\tif ( morphNormals[ i ].vertexNormals !== undefined ) {\n\n\t\t\t\tmorphNormal.vertexNormals = [];\n\n\t\t\t\tfor ( j = 0, jl = morphNormals[ i ].vertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tvar srcVertexNormal = morphNormals[ i ].vertexNormals[ j ];\n\t\t\t\t\tvar destVertexNormal = {};\n\n\t\t\t\t\tdestVertexNormal.a = srcVertexNormal.a.clone();\n\t\t\t\t\tdestVertexNormal.b = srcVertexNormal.b.clone();\n\t\t\t\t\tdestVertexNormal.c = srcVertexNormal.c.clone();\n\n\t\t\t\t\tmorphNormal.vertexNormals.push( destVertexNormal );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// face normals\n\n\t\t\tif ( morphNormals[ i ].faceNormals !== undefined ) {\n\n\t\t\t\tmorphNormal.faceNormals = [];\n\n\t\t\t\tfor ( j = 0, jl = morphNormals[ i ].faceNormals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tmorphNormal.faceNormals.push( morphNormals[ i ].faceNormals[ j ].clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.morphNormals.push( morphNormal );\n\n\t\t}\n\n\t\t// skin weights\n\n\t\tvar skinWeights = source.skinWeights;\n\n\t\tfor ( i = 0, il = skinWeights.length; i < il; i ++ ) {\n\n\t\t\tthis.skinWeights.push( skinWeights[ i ].clone() );\n\n\t\t}\n\n\t\t// skin indices\n\n\t\tvar skinIndices = source.skinIndices;\n\n\t\tfor ( i = 0, il = skinIndices.length; i < il; i ++ ) {\n\n\t\t\tthis.skinIndices.push( skinIndices[ i ].clone() );\n\n\t\t}\n\n\t\t// line distances\n\n\t\tvar lineDistances = source.lineDistances;\n\n\t\tfor ( i = 0, il = lineDistances.length; i < il; i ++ ) {\n\n\t\t\tthis.lineDistances.push( lineDistances[ i ] );\n\n\t\t}\n\n\t\t// bounding box\n\n\t\tvar boundingBox = source.boundingBox;\n\n\t\tif ( boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = boundingBox.clone();\n\n\t\t}\n\n\t\t// bounding sphere\n\n\t\tvar boundingSphere = source.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = boundingSphere.clone();\n\n\t\t}\n\n\t\t// update flags\n\n\t\tthis.elementsNeedUpdate = source.elementsNeedUpdate;\n\t\tthis.verticesNeedUpdate = source.verticesNeedUpdate;\n\t\tthis.uvsNeedUpdate = source.uvsNeedUpdate;\n\t\tthis.normalsNeedUpdate = source.normalsNeedUpdate;\n\t\tthis.colorsNeedUpdate = source.colorsNeedUpdate;\n\t\tthis.lineDistancesNeedUpdate = source.lineDistancesNeedUpdate;\n\t\tthis.groupsNeedUpdate = source.groupsNeedUpdate;\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction BufferAttribute( array, itemSize, normalized ) {\n\n\tif ( Array.isArray( array ) ) {\n\n\t\tthrow new TypeError( 'THREE.BufferAttribute: array should be a Typed Array.' );\n\n\t}\n\n\tthis.uuid = _Math.generateUUID();\n\tthis.name = '';\n\n\tthis.array = array;\n\tthis.itemSize = itemSize;\n\tthis.count = array !== undefined ? array.length / itemSize : 0;\n\tthis.normalized = normalized === true;\n\n\tthis.dynamic = false;\n\tthis.updateRange = { offset: 0, count: - 1 };\n\n\tthis.onUploadCallback = function () {};\n\n\tthis.version = 0;\n\n}\n\nObject.defineProperty( BufferAttribute.prototype, 'needsUpdate', {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\nObject.assign( BufferAttribute.prototype, {\n\n\tisBufferAttribute: true,\n\n\tsetArray: function ( array ) {\n\n\t\tif ( Array.isArray( array ) ) {\n\n\t\t\tthrow new TypeError( 'THREE.BufferAttribute: array should be a Typed Array.' );\n\n\t\t}\n\n\t\tthis.count = array !== undefined ? array.length / this.itemSize : 0;\n\t\tthis.array = array;\n\n\t},\n\n\tsetDynamic: function ( value ) {\n\n\t\tthis.dynamic = value;\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.array = new source.array.constructor( source.array );\n\t\tthis.itemSize = source.itemSize;\n\t\tthis.count = source.count;\n\t\tthis.normalized = source.normalized;\n\n\t\tthis.dynamic = source.dynamic;\n\n\t\treturn this;\n\n\t},\n\n\tcopyAt: function ( index1, attribute, index2 ) {\n\n\t\tindex1 *= this.itemSize;\n\t\tindex2 *= attribute.itemSize;\n\n\t\tfor ( var i = 0, l = this.itemSize; i < l; i ++ ) {\n\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyArray: function ( array ) {\n\n\t\tthis.array.set( array );\n\n\t\treturn this;\n\n\t},\n\n\tcopyColorsArray: function ( colors ) {\n\n\t\tvar array = this.array, offset = 0;\n\n\t\tfor ( var i = 0, l = colors.length; i < l; i ++ ) {\n\n\t\t\tvar color = colors[ i ];\n\n\t\t\tif ( color === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyColorsArray(): color is undefined', i );\n\t\t\t\tcolor = new Color();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = color.r;\n\t\t\tarray[ offset ++ ] = color.g;\n\t\t\tarray[ offset ++ ] = color.b;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyIndicesArray: function ( indices ) {\n\n\t\tvar array = this.array, offset = 0;\n\n\t\tfor ( var i = 0, l = indices.length; i < l; i ++ ) {\n\n\t\t\tvar index = indices[ i ];\n\n\t\t\tarray[ offset ++ ] = index.a;\n\t\t\tarray[ offset ++ ] = index.b;\n\t\t\tarray[ offset ++ ] = index.c;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector2sArray: function ( vectors ) {\n\n\t\tvar array = this.array, offset = 0;\n\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tvar vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector2sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector2();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector3sArray: function ( vectors ) {\n\n\t\tvar array = this.array, offset = 0;\n\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tvar vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector3sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector3();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\t\t\tarray[ offset ++ ] = vector.z;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector4sArray: function ( vectors ) {\n\n\t\tvar array = this.array, offset = 0;\n\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tvar vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector4sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector4();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\t\t\tarray[ offset ++ ] = vector.z;\n\t\t\tarray[ offset ++ ] = vector.w;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tset: function ( value, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.array.set( value, offset );\n\n\t\treturn this;\n\n\t},\n\n\tgetX: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize ];\n\n\t},\n\n\tsetX: function ( index, x ) {\n\n\t\tthis.array[ index * this.itemSize ] = x;\n\n\t\treturn this;\n\n\t},\n\n\tgetY: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 1 ];\n\n\t},\n\n\tsetY: function ( index, y ) {\n\n\t\tthis.array[ index * this.itemSize + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tgetZ: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 2 ];\n\n\t},\n\n\tsetZ: function ( index, z ) {\n\n\t\tthis.array[ index * this.itemSize + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tgetW: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 3 ];\n\n\t},\n\n\tsetW: function ( index, w ) {\n\n\t\tthis.array[ index * this.itemSize + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetXY: function ( index, x, y ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZ: function ( index, x, y, z ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZW: function ( index, x, y, z, w ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\t\tthis.array[ index + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tonUpload: function ( callback ) {\n\n\t\tthis.onUploadCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.array, this.itemSize ).copy( this );\n\n\t}\n\n} );\n\n//\n\nfunction Int8BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Int8Array( array ), itemSize, normalized );\n\n}\n\nInt8BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nInt8BufferAttribute.prototype.constructor = Int8BufferAttribute;\n\n\nfunction Uint8BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint8Array( array ), itemSize, normalized );\n\n}\n\nUint8BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint8BufferAttribute.prototype.constructor = Uint8BufferAttribute;\n\n\nfunction Uint8ClampedBufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint8ClampedArray( array ), itemSize, normalized );\n\n}\n\nUint8ClampedBufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint8ClampedBufferAttribute.prototype.constructor = Uint8ClampedBufferAttribute;\n\n\nfunction Int16BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Int16Array( array ), itemSize, normalized );\n\n}\n\nInt16BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nInt16BufferAttribute.prototype.constructor = Int16BufferAttribute;\n\n\nfunction Uint16BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint16Array( array ), itemSize, normalized );\n\n}\n\nUint16BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint16BufferAttribute.prototype.constructor = Uint16BufferAttribute;\n\n\nfunction Int32BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Int32Array( array ), itemSize, normalized );\n\n}\n\nInt32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nInt32BufferAttribute.prototype.constructor = Int32BufferAttribute;\n\n\nfunction Uint32BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint32Array( array ), itemSize, normalized );\n\n}\n\nUint32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint32BufferAttribute.prototype.constructor = Uint32BufferAttribute;\n\n\nfunction Float32BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Float32Array( array ), itemSize, normalized );\n\n}\n\nFloat32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nFloat32BufferAttribute.prototype.constructor = Float32BufferAttribute;\n\n\nfunction Float64BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Float64Array( array ), itemSize, normalized );\n\n}\n\nFloat64BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nFloat64BufferAttribute.prototype.constructor = Float64BufferAttribute;\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction DirectGeometry() {\n\n\tthis.indices = [];\n\tthis.vertices = [];\n\tthis.normals = [];\n\tthis.colors = [];\n\tthis.uvs = [];\n\tthis.uvs2 = [];\n\n\tthis.groups = [];\n\n\tthis.morphTargets = {};\n\n\tthis.skinWeights = [];\n\tthis.skinIndices = [];\n\n\t// this.lineDistances = [];\n\n\tthis.boundingBox = null;\n\tthis.boundingSphere = null;\n\n\t// update flags\n\n\tthis.verticesNeedUpdate = false;\n\tthis.normalsNeedUpdate = false;\n\tthis.colorsNeedUpdate = false;\n\tthis.uvsNeedUpdate = false;\n\tthis.groupsNeedUpdate = false;\n\n}\n\nObject.assign( DirectGeometry.prototype, {\n\n\tcomputeGroups: function ( geometry ) {\n\n\t\tvar group;\n\t\tvar groups = [];\n\t\tvar materialIndex = undefined;\n\n\t\tvar faces = geometry.faces;\n\n\t\tfor ( var i = 0; i < faces.length; i ++ ) {\n\n\t\t\tvar face = faces[ i ];\n\n\t\t\t// materials\n\n\t\t\tif ( face.materialIndex !== materialIndex ) {\n\n\t\t\t\tmaterialIndex = face.materialIndex;\n\n\t\t\t\tif ( group !== undefined ) {\n\n\t\t\t\t\tgroup.count = ( i * 3 ) - group.start;\n\t\t\t\t\tgroups.push( group );\n\n\t\t\t\t}\n\n\t\t\t\tgroup = {\n\t\t\t\t\tstart: i * 3,\n\t\t\t\t\tmaterialIndex: materialIndex\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( group !== undefined ) {\n\n\t\t\tgroup.count = ( i * 3 ) - group.start;\n\t\t\tgroups.push( group );\n\n\t\t}\n\n\t\tthis.groups = groups;\n\n\t},\n\n\tfromGeometry: function ( geometry ) {\n\n\t\tvar faces = geometry.faces;\n\t\tvar vertices = geometry.vertices;\n\t\tvar faceVertexUvs = geometry.faceVertexUvs;\n\n\t\tvar hasFaceVertexUv = faceVertexUvs[ 0 ] && faceVertexUvs[ 0 ].length > 0;\n\t\tvar hasFaceVertexUv2 = faceVertexUvs[ 1 ] && faceVertexUvs[ 1 ].length > 0;\n\n\t\t// morphs\n\n\t\tvar morphTargets = geometry.morphTargets;\n\t\tvar morphTargetsLength = morphTargets.length;\n\n\t\tvar morphTargetsPosition;\n\n\t\tif ( morphTargetsLength > 0 ) {\n\n\t\t\tmorphTargetsPosition = [];\n\n\t\t\tfor ( var i = 0; i < morphTargetsLength; i ++ ) {\n\n\t\t\t\tmorphTargetsPosition[ i ] = [];\n\n\t\t\t}\n\n\t\t\tthis.morphTargets.position = morphTargetsPosition;\n\n\t\t}\n\n\t\tvar morphNormals = geometry.morphNormals;\n\t\tvar morphNormalsLength = morphNormals.length;\n\n\t\tvar morphTargetsNormal;\n\n\t\tif ( morphNormalsLength > 0 ) {\n\n\t\t\tmorphTargetsNormal = [];\n\n\t\t\tfor ( var i = 0; i < morphNormalsLength; i ++ ) {\n\n\t\t\t\tmorphTargetsNormal[ i ] = [];\n\n\t\t\t}\n\n\t\t\tthis.morphTargets.normal = morphTargetsNormal;\n\n\t\t}\n\n\t\t// skins\n\n\t\tvar skinIndices = geometry.skinIndices;\n\t\tvar skinWeights = geometry.skinWeights;\n\n\t\tvar hasSkinIndices = skinIndices.length === vertices.length;\n\t\tvar hasSkinWeights = skinWeights.length === vertices.length;\n\n\t\t//\n\n\t\tfor ( var i = 0; i < faces.length; i ++ ) {\n\n\t\t\tvar face = faces[ i ];\n\n\t\t\tthis.vertices.push( vertices[ face.a ], vertices[ face.b ], vertices[ face.c ] );\n\n\t\t\tvar vertexNormals = face.vertexNormals;\n\n\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\tthis.normals.push( vertexNormals[ 0 ], vertexNormals[ 1 ], vertexNormals[ 2 ] );\n\n\t\t\t} else {\n\n\t\t\t\tvar normal = face.normal;\n\n\t\t\t\tthis.normals.push( normal, normal, normal );\n\n\t\t\t}\n\n\t\t\tvar vertexColors = face.vertexColors;\n\n\t\t\tif ( vertexColors.length === 3 ) {\n\n\t\t\t\tthis.colors.push( vertexColors[ 0 ], vertexColors[ 1 ], vertexColors[ 2 ] );\n\n\t\t\t} else {\n\n\t\t\t\tvar color = face.color;\n\n\t\t\t\tthis.colors.push( color, color, color );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexUv === true ) {\n\n\t\t\t\tvar vertexUvs = faceVertexUvs[ 0 ][ i ];\n\n\t\t\t\tif ( vertexUvs !== undefined ) {\n\n\t\t\t\t\tthis.uvs.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ', i );\n\n\t\t\t\t\tthis.uvs.push( new Vector2(), new Vector2(), new Vector2() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexUv2 === true ) {\n\n\t\t\t\tvar vertexUvs = faceVertexUvs[ 1 ][ i ];\n\n\t\t\t\tif ( vertexUvs !== undefined ) {\n\n\t\t\t\t\tthis.uvs2.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ', i );\n\n\t\t\t\t\tthis.uvs2.push( new Vector2(), new Vector2(), new Vector2() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// morphs\n\n\t\t\tfor ( var j = 0; j < morphTargetsLength; j ++ ) {\n\n\t\t\t\tvar morphTarget = morphTargets[ j ].vertices;\n\n\t\t\t\tmorphTargetsPosition[ j ].push( morphTarget[ face.a ], morphTarget[ face.b ], morphTarget[ face.c ] );\n\n\t\t\t}\n\n\t\t\tfor ( var j = 0; j < morphNormalsLength; j ++ ) {\n\n\t\t\t\tvar morphNormal = morphNormals[ j ].vertexNormals[ i ];\n\n\t\t\t\tmorphTargetsNormal[ j ].push( morphNormal.a, morphNormal.b, morphNormal.c );\n\n\t\t\t}\n\n\t\t\t// skins\n\n\t\t\tif ( hasSkinIndices ) {\n\n\t\t\t\tthis.skinIndices.push( skinIndices[ face.a ], skinIndices[ face.b ], skinIndices[ face.c ] );\n\n\t\t\t}\n\n\t\t\tif ( hasSkinWeights ) {\n\n\t\t\t\tthis.skinWeights.push( skinWeights[ face.a ], skinWeights[ face.b ], skinWeights[ face.c ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.computeGroups( geometry );\n\n\t\tthis.verticesNeedUpdate = geometry.verticesNeedUpdate;\n\t\tthis.normalsNeedUpdate = geometry.normalsNeedUpdate;\n\t\tthis.colorsNeedUpdate = geometry.colorsNeedUpdate;\n\t\tthis.uvsNeedUpdate = geometry.uvsNeedUpdate;\n\t\tthis.groupsNeedUpdate = geometry.groupsNeedUpdate;\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction arrayMax( array ) {\n\n\tif ( array.length === 0 ) return - Infinity;\n\n\tvar max = array[ 0 ];\n\n\tfor ( var i = 1, l = array.length; i < l; ++ i ) {\n\n\t\tif ( array[ i ] > max ) max = array[ i ];\n\n\t}\n\n\treturn max;\n\n}\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar bufferGeometryId = 1; // BufferGeometry uses odd numbers as Id\n\nfunction BufferGeometry() {\n\n\tObject.defineProperty( this, 'id', { value: bufferGeometryId += 2 } );\n\n\tthis.uuid = _Math.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'BufferGeometry';\n\n\tthis.index = null;\n\tthis.attributes = {};\n\n\tthis.morphAttributes = {};\n\n\tthis.groups = [];\n\n\tthis.boundingBox = null;\n\tthis.boundingSphere = null;\n\n\tthis.drawRange = { start: 0, count: Infinity };\n\n}\n\nBufferGeometry.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: BufferGeometry,\n\n\tisBufferGeometry: true,\n\n\tgetIndex: function () {\n\n\t\treturn this.index;\n\n\t},\n\n\tsetIndex: function ( index ) {\n\n\t\tif ( Array.isArray( index ) ) {\n\n\t\t\tthis.index = new ( arrayMax( index ) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute )( index, 1 );\n\n\t\t} else {\n\n\t\t\tthis.index = index;\n\n\t\t}\n\n\t},\n\n\taddAttribute: function ( name, attribute ) {\n\n\t\tif ( ! ( attribute && attribute.isBufferAttribute ) && ! ( attribute && attribute.isInterleavedBufferAttribute ) ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).' );\n\n\t\t\tthis.addAttribute( name, new BufferAttribute( arguments[ 1 ], arguments[ 2 ] ) );\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( name === 'index' ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.' );\n\t\t\tthis.setIndex( attribute );\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.attributes[ name ] = attribute;\n\n\t\treturn this;\n\n\t},\n\n\tgetAttribute: function ( name ) {\n\n\t\treturn this.attributes[ name ];\n\n\t},\n\n\tremoveAttribute: function ( name ) {\n\n\t\tdelete this.attributes[ name ];\n\n\t\treturn this;\n\n\t},\n\n\taddGroup: function ( start, count, materialIndex ) {\n\n\t\tthis.groups.push( {\n\n\t\t\tstart: start,\n\t\t\tcount: count,\n\t\t\tmaterialIndex: materialIndex !== undefined ? materialIndex : 0\n\n\t\t} );\n\n\t},\n\n\tclearGroups: function () {\n\n\t\tthis.groups = [];\n\n\t},\n\n\tsetDrawRange: function ( start, count ) {\n\n\t\tthis.drawRange.start = start;\n\t\tthis.drawRange.count = count;\n\n\t},\n\n\tapplyMatrix: function ( matrix ) {\n\n\t\tvar position = this.attributes.position;\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tmatrix.applyToBufferAttribute( position );\n\t\t\tposition.needsUpdate = true;\n\n\t\t}\n\n\t\tvar normal = this.attributes.normal;\n\n\t\tif ( normal !== undefined ) {\n\n\t\t\tvar normalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\t\tnormalMatrix.applyToBufferAttribute( normal );\n\t\t\tnormal.needsUpdate = true;\n\n\t\t}\n\n\t\tif ( this.boundingBox !== null ) {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t}\n\n\t\tif ( this.boundingSphere !== null ) {\n\n\t\t\tthis.computeBoundingSphere();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\trotateX: function () {\n\n\t\t// rotate geometry around world x-axis\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function rotateX( angle ) {\n\n\t\t\tm1.makeRotationX( angle );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\trotateY: function () {\n\n\t\t// rotate geometry around world y-axis\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function rotateY( angle ) {\n\n\t\t\tm1.makeRotationY( angle );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\trotateZ: function () {\n\n\t\t// rotate geometry around world z-axis\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function rotateZ( angle ) {\n\n\t\t\tm1.makeRotationZ( angle );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\ttranslate: function () {\n\n\t\t// translate geometry\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function translate( x, y, z ) {\n\n\t\t\tm1.makeTranslation( x, y, z );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tscale: function () {\n\n\t\t// scale geometry\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function scale( x, y, z ) {\n\n\t\t\tm1.makeScale( x, y, z );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tlookAt: function () {\n\n\t\tvar obj = new Object3D();\n\n\t\treturn function lookAt( vector ) {\n\n\t\t\tobj.lookAt( vector );\n\n\t\t\tobj.updateMatrix();\n\n\t\t\tthis.applyMatrix( obj.matrix );\n\n\t\t};\n\n\t}(),\n\n\tcenter: function () {\n\n\t\tthis.computeBoundingBox();\n\n\t\tvar offset = this.boundingBox.getCenter().negate();\n\n\t\tthis.translate( offset.x, offset.y, offset.z );\n\n\t\treturn offset;\n\n\t},\n\n\tsetFromObject: function ( object ) {\n\n\t\t// console.log( 'THREE.BufferGeometry.setFromObject(). Converting', object, this );\n\n\t\tvar geometry = object.geometry;\n\n\t\tif ( object.isPoints || object.isLine ) {\n\n\t\t\tvar positions = new Float32BufferAttribute( geometry.vertices.length * 3, 3 );\n\t\t\tvar colors = new Float32BufferAttribute( geometry.colors.length * 3, 3 );\n\n\t\t\tthis.addAttribute( 'position', positions.copyVector3sArray( geometry.vertices ) );\n\t\t\tthis.addAttribute( 'color', colors.copyColorsArray( geometry.colors ) );\n\n\t\t\tif ( geometry.lineDistances && geometry.lineDistances.length === geometry.vertices.length ) {\n\n\t\t\t\tvar lineDistances = new Float32BufferAttribute( geometry.lineDistances.length, 1 );\n\n\t\t\t\tthis.addAttribute( 'lineDistance', lineDistances.copyArray( geometry.lineDistances ) );\n\n\t\t\t}\n\n\t\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t\t}\n\n\t\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t\t}\n\n\t\t} else if ( object.isMesh ) {\n\n\t\t\tif ( geometry && geometry.isGeometry ) {\n\n\t\t\t\tthis.fromGeometry( geometry );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tvar position = [];\n\n\t\tfor ( var i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tvar point = points[ i ];\n\t\t\tposition.push( point.x, point.y, point.z || 0 );\n\n\t\t}\n\n\t\tthis.addAttribute( 'position', new Float32BufferAttribute( position, 3 ) );\n\n\t\treturn this;\n\n\t},\n\n\tupdateFromObject: function ( object ) {\n\n\t\tvar geometry = object.geometry;\n\n\t\tif ( object.isMesh ) {\n\n\t\t\tvar direct = geometry.__directGeometry;\n\n\t\t\tif ( geometry.elementsNeedUpdate === true ) {\n\n\t\t\t\tdirect = undefined;\n\t\t\t\tgeometry.elementsNeedUpdate = false;\n\n\t\t\t}\n\n\t\t\tif ( direct === undefined ) {\n\n\t\t\t\treturn this.fromGeometry( geometry );\n\n\t\t\t}\n\n\t\t\tdirect.verticesNeedUpdate = geometry.verticesNeedUpdate;\n\t\t\tdirect.normalsNeedUpdate = geometry.normalsNeedUpdate;\n\t\t\tdirect.colorsNeedUpdate = geometry.colorsNeedUpdate;\n\t\t\tdirect.uvsNeedUpdate = geometry.uvsNeedUpdate;\n\t\t\tdirect.groupsNeedUpdate = geometry.groupsNeedUpdate;\n\n\t\t\tgeometry.verticesNeedUpdate = false;\n\t\t\tgeometry.normalsNeedUpdate = false;\n\t\t\tgeometry.colorsNeedUpdate = false;\n\t\t\tgeometry.uvsNeedUpdate = false;\n\t\t\tgeometry.groupsNeedUpdate = false;\n\n\t\t\tgeometry = direct;\n\n\t\t}\n\n\t\tvar attribute;\n\n\t\tif ( geometry.verticesNeedUpdate === true ) {\n\n\t\t\tattribute = this.attributes.position;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyVector3sArray( geometry.vertices );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.verticesNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.normalsNeedUpdate === true ) {\n\n\t\t\tattribute = this.attributes.normal;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyVector3sArray( geometry.normals );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.normalsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.colorsNeedUpdate === true ) {\n\n\t\t\tattribute = this.attributes.color;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyColorsArray( geometry.colors );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.colorsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.uvsNeedUpdate ) {\n\n\t\t\tattribute = this.attributes.uv;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyVector2sArray( geometry.uvs );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.uvsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.lineDistancesNeedUpdate ) {\n\n\t\t\tattribute = this.attributes.lineDistance;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyArray( geometry.lineDistances );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.lineDistancesNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.groupsNeedUpdate ) {\n\n\t\t\tgeometry.computeGroups( object.geometry );\n\t\t\tthis.groups = geometry.groups;\n\n\t\t\tgeometry.groupsNeedUpdate = false;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tfromGeometry: function ( geometry ) {\n\n\t\tgeometry.__directGeometry = new DirectGeometry().fromGeometry( geometry );\n\n\t\treturn this.fromDirectGeometry( geometry.__directGeometry );\n\n\t},\n\n\tfromDirectGeometry: function ( geometry ) {\n\n\t\tvar positions = new Float32Array( geometry.vertices.length * 3 );\n\t\tthis.addAttribute( 'position', new BufferAttribute( positions, 3 ).copyVector3sArray( geometry.vertices ) );\n\n\t\tif ( geometry.normals.length > 0 ) {\n\n\t\t\tvar normals = new Float32Array( geometry.normals.length * 3 );\n\t\t\tthis.addAttribute( 'normal', new BufferAttribute( normals, 3 ).copyVector3sArray( geometry.normals ) );\n\n\t\t}\n\n\t\tif ( geometry.colors.length > 0 ) {\n\n\t\t\tvar colors = new Float32Array( geometry.colors.length * 3 );\n\t\t\tthis.addAttribute( 'color', new BufferAttribute( colors, 3 ).copyColorsArray( geometry.colors ) );\n\n\t\t}\n\n\t\tif ( geometry.uvs.length > 0 ) {\n\n\t\t\tvar uvs = new Float32Array( geometry.uvs.length * 2 );\n\t\t\tthis.addAttribute( 'uv', new BufferAttribute( uvs, 2 ).copyVector2sArray( geometry.uvs ) );\n\n\t\t}\n\n\t\tif ( geometry.uvs2.length > 0 ) {\n\n\t\t\tvar uvs2 = new Float32Array( geometry.uvs2.length * 2 );\n\t\t\tthis.addAttribute( 'uv2', new BufferAttribute( uvs2, 2 ).copyVector2sArray( geometry.uvs2 ) );\n\n\t\t}\n\n\t\tif ( geometry.indices.length > 0 ) {\n\n\t\t\tvar TypeArray = arrayMax( geometry.indices ) > 65535 ? Uint32Array : Uint16Array;\n\t\t\tvar indices = new TypeArray( geometry.indices.length * 3 );\n\t\t\tthis.setIndex( new BufferAttribute( indices, 1 ).copyIndicesArray( geometry.indices ) );\n\n\t\t}\n\n\t\t// groups\n\n\t\tthis.groups = geometry.groups;\n\n\t\t// morphs\n\n\t\tfor ( var name in geometry.morphTargets ) {\n\n\t\t\tvar array = [];\n\t\t\tvar morphTargets = geometry.morphTargets[ name ];\n\n\t\t\tfor ( var i = 0, l = morphTargets.length; i < l; i ++ ) {\n\n\t\t\t\tvar morphTarget = morphTargets[ i ];\n\n\t\t\t\tvar attribute = new Float32BufferAttribute( morphTarget.length * 3, 3 );\n\n\t\t\t\tarray.push( attribute.copyVector3sArray( morphTarget ) );\n\n\t\t\t}\n\n\t\t\tthis.morphAttributes[ name ] = array;\n\n\t\t}\n\n\t\t// skinning\n\n\t\tif ( geometry.skinIndices.length > 0 ) {\n\n\t\t\tvar skinIndices = new Float32BufferAttribute( geometry.skinIndices.length * 4, 4 );\n\t\t\tthis.addAttribute( 'skinIndex', skinIndices.copyVector4sArray( geometry.skinIndices ) );\n\n\t\t}\n\n\t\tif ( geometry.skinWeights.length > 0 ) {\n\n\t\t\tvar skinWeights = new Float32BufferAttribute( geometry.skinWeights.length * 4, 4 );\n\t\t\tthis.addAttribute( 'skinWeight', skinWeights.copyVector4sArray( geometry.skinWeights ) );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t}\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcomputeBoundingBox: function () {\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.boundingBox = new Box3();\n\n\t\t}\n\n\t\tvar position = this.attributes.position;\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tthis.boundingBox.setFromBufferAttribute( position );\n\n\t\t} else {\n\n\t\t\tthis.boundingBox.makeEmpty();\n\n\t\t}\n\n\t\tif ( isNaN( this.boundingBox.min.x ) || isNaN( this.boundingBox.min.y ) || isNaN( this.boundingBox.min.z ) ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.', this );\n\n\t\t}\n\n\t},\n\n\tcomputeBoundingSphere: function () {\n\n\t\tvar box = new Box3();\n\t\tvar vector = new Vector3();\n\n\t\treturn function computeBoundingSphere() {\n\n\t\t\tif ( this.boundingSphere === null ) {\n\n\t\t\t\tthis.boundingSphere = new Sphere();\n\n\t\t\t}\n\n\t\t\tvar position = this.attributes.position;\n\n\t\t\tif ( position ) {\n\n\t\t\t\tvar center = this.boundingSphere.center;\n\n\t\t\t\tbox.setFromBufferAttribute( position );\n\t\t\t\tbox.getCenter( center );\n\n\t\t\t\t// hoping to find a boundingSphere with a radius smaller than the\n\t\t\t\t// boundingSphere of the boundingBox: sqrt(3) smaller in the best case\n\n\t\t\t\tvar maxRadiusSq = 0;\n\n\t\t\t\tfor ( var i = 0, il = position.count; i < il; i ++ ) {\n\n\t\t\t\t\tvector.x = position.getX( i );\n\t\t\t\t\tvector.y = position.getY( i );\n\t\t\t\t\tvector.z = position.getZ( i );\n\t\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( vector ) );\n\n\t\t\t\t}\n\n\t\t\t\tthis.boundingSphere.radius = Math.sqrt( maxRadiusSq );\n\n\t\t\t\tif ( isNaN( this.boundingSphere.radius ) ) {\n\n\t\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.', this );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t}(),\n\n\tcomputeFaceNormals: function () {\n\n\t\t// backwards compatibility\n\n\t},\n\n\tcomputeVertexNormals: function () {\n\n\t\tvar index = this.index;\n\t\tvar attributes = this.attributes;\n\t\tvar groups = this.groups;\n\n\t\tif ( attributes.position ) {\n\n\t\t\tvar positions = attributes.position.array;\n\n\t\t\tif ( attributes.normal === undefined ) {\n\n\t\t\t\tthis.addAttribute( 'normal', new BufferAttribute( new Float32Array( positions.length ), 3 ) );\n\n\t\t\t} else {\n\n\t\t\t\t// reset existing normals to zero\n\n\t\t\t\tvar array = attributes.normal.array;\n\n\t\t\t\tfor ( var i = 0, il = array.length; i < il; i ++ ) {\n\n\t\t\t\t\tarray[ i ] = 0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar normals = attributes.normal.array;\n\n\t\t\tvar vA, vB, vC;\n\t\t\tvar pA = new Vector3(), pB = new Vector3(), pC = new Vector3();\n\t\t\tvar cb = new Vector3(), ab = new Vector3();\n\n\t\t\t// indexed elements\n\n\t\t\tif ( index ) {\n\n\t\t\t\tvar indices = index.array;\n\n\t\t\t\tif ( groups.length === 0 ) {\n\n\t\t\t\t\tthis.addGroup( 0, indices.length );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var j = 0, jl = groups.length; j < jl; ++ j ) {\n\n\t\t\t\t\tvar group = groups[ j ];\n\n\t\t\t\t\tvar start = group.start;\n\t\t\t\t\tvar count = group.count;\n\n\t\t\t\t\tfor ( var i = start, il = start + count; i < il; i += 3 ) {\n\n\t\t\t\t\t\tvA = indices[ i + 0 ] * 3;\n\t\t\t\t\t\tvB = indices[ i + 1 ] * 3;\n\t\t\t\t\t\tvC = indices[ i + 2 ] * 3;\n\n\t\t\t\t\t\tpA.fromArray( positions, vA );\n\t\t\t\t\t\tpB.fromArray( positions, vB );\n\t\t\t\t\t\tpC.fromArray( positions, vC );\n\n\t\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\t\tnormals[ vA ] += cb.x;\n\t\t\t\t\t\tnormals[ vA + 1 ] += cb.y;\n\t\t\t\t\t\tnormals[ vA + 2 ] += cb.z;\n\n\t\t\t\t\t\tnormals[ vB ] += cb.x;\n\t\t\t\t\t\tnormals[ vB + 1 ] += cb.y;\n\t\t\t\t\t\tnormals[ vB + 2 ] += cb.z;\n\n\t\t\t\t\t\tnormals[ vC ] += cb.x;\n\t\t\t\t\t\tnormals[ vC + 1 ] += cb.y;\n\t\t\t\t\t\tnormals[ vC + 2 ] += cb.z;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// non-indexed elements (unconnected triangle soup)\n\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 9 ) {\n\n\t\t\t\t\tpA.fromArray( positions, i );\n\t\t\t\t\tpB.fromArray( positions, i + 3 );\n\t\t\t\t\tpC.fromArray( positions, i + 6 );\n\n\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\tnormals[ i ] = cb.x;\n\t\t\t\t\tnormals[ i + 1 ] = cb.y;\n\t\t\t\t\tnormals[ i + 2 ] = cb.z;\n\n\t\t\t\t\tnormals[ i + 3 ] = cb.x;\n\t\t\t\t\tnormals[ i + 4 ] = cb.y;\n\t\t\t\t\tnormals[ i + 5 ] = cb.z;\n\n\t\t\t\t\tnormals[ i + 6 ] = cb.x;\n\t\t\t\t\tnormals[ i + 7 ] = cb.y;\n\t\t\t\t\tnormals[ i + 8 ] = cb.z;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.normalizeNormals();\n\n\t\t\tattributes.normal.needsUpdate = true;\n\n\t\t}\n\n\t},\n\n\tmerge: function ( geometry, offset ) {\n\n\t\tif ( ! ( geometry && geometry.isBufferGeometry ) ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.', geometry );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tvar attributes = this.attributes;\n\n\t\tfor ( var key in attributes ) {\n\n\t\t\tif ( geometry.attributes[ key ] === undefined ) continue;\n\n\t\t\tvar attribute1 = attributes[ key ];\n\t\t\tvar attributeArray1 = attribute1.array;\n\n\t\t\tvar attribute2 = geometry.attributes[ key ];\n\t\t\tvar attributeArray2 = attribute2.array;\n\n\t\t\tvar attributeSize = attribute2.itemSize;\n\n\t\t\tfor ( var i = 0, j = attributeSize * offset; i < attributeArray2.length; i ++, j ++ ) {\n\n\t\t\t\tattributeArray1[ j ] = attributeArray2[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tnormalizeNormals: function () {\n\n\t\tvar vector = new Vector3();\n\n\t\treturn function normalizeNormals() {\n\n\t\t\tvar normals = this.attributes.normal;\n\n\t\t\tfor ( var i = 0, il = normals.count; i < il; i ++ ) {\n\n\t\t\t\tvector.x = normals.getX( i );\n\t\t\t\tvector.y = normals.getY( i );\n\t\t\t\tvector.z = normals.getZ( i );\n\n\t\t\t\tvector.normalize();\n\n\t\t\t\tnormals.setXYZ( i, vector.x, vector.y, vector.z );\n\n\t\t\t}\n\n\t\t};\n\n\t}(),\n\n\ttoNonIndexed: function () {\n\n\t\tif ( this.index === null ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.' );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar geometry2 = new BufferGeometry();\n\n\t\tvar indices = this.index.array;\n\t\tvar attributes = this.attributes;\n\n\t\tfor ( var name in attributes ) {\n\n\t\t\tvar attribute = attributes[ name ];\n\n\t\t\tvar array = attribute.array;\n\t\t\tvar itemSize = attribute.itemSize;\n\n\t\t\tvar array2 = new array.constructor( indices.length * itemSize );\n\n\t\t\tvar index = 0, index2 = 0;\n\n\t\t\tfor ( var i = 0, l = indices.length; i < l; i ++ ) {\n\n\t\t\t\tindex = indices[ i ] * itemSize;\n\n\t\t\t\tfor ( var j = 0; j < itemSize; j ++ ) {\n\n\t\t\t\t\tarray2[ index2 ++ ] = array[ index ++ ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgeometry2.addAttribute( name, new BufferAttribute( array2, itemSize ) );\n\n\t\t}\n\n\t\treturn geometry2;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'BufferGeometry',\n\t\t\t\tgenerator: 'BufferGeometry.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard BufferGeometry serialization\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\t\tif ( this.name !== '' ) data.name = this.name;\n\n\t\tif ( this.parameters !== undefined ) {\n\n\t\t\tvar parameters = this.parameters;\n\n\t\t\tfor ( var key in parameters ) {\n\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tdata.data = { attributes: {} };\n\n\t\tvar index = this.index;\n\n\t\tif ( index !== null ) {\n\n\t\t\tvar array = Array.prototype.slice.call( index.array );\n\n\t\t\tdata.data.index = {\n\t\t\t\ttype: index.array.constructor.name,\n\t\t\t\tarray: array\n\t\t\t};\n\n\t\t}\n\n\t\tvar attributes = this.attributes;\n\n\t\tfor ( var key in attributes ) {\n\n\t\t\tvar attribute = attributes[ key ];\n\n\t\t\tvar array = Array.prototype.slice.call( attribute.array );\n\n\t\t\tdata.data.attributes[ key ] = {\n\t\t\t\titemSize: attribute.itemSize,\n\t\t\t\ttype: attribute.array.constructor.name,\n\t\t\t\tarray: array,\n\t\t\t\tnormalized: attribute.normalized\n\t\t\t};\n\n\t\t}\n\n\t\tvar groups = this.groups;\n\n\t\tif ( groups.length > 0 ) {\n\n\t\t\tdata.data.groups = JSON.parse( JSON.stringify( groups ) );\n\n\t\t}\n\n\t\tvar boundingSphere = this.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tdata.data.boundingSphere = {\n\t\t\t\tcenter: boundingSphere.center.toArray(),\n\t\t\t\tradius: boundingSphere.radius\n\t\t\t};\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tclone: function () {\n\n\t\t/*\n\t\t // Handle primitives\n\n\t\t var parameters = this.parameters;\n\n\t\t if ( parameters !== undefined ) {\n\n\t\t var values = [];\n\n\t\t for ( var key in parameters ) {\n\n\t\t values.push( parameters[ key ] );\n\n\t\t }\n\n\t\t var geometry = Object.create( this.constructor.prototype );\n\t\t this.constructor.apply( geometry, values );\n\t\t return geometry;\n\n\t\t }\n\n\t\t return new this.constructor().copy( this );\n\t\t */\n\n\t\treturn new BufferGeometry().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tvar name, i, l;\n\n\t\t// reset\n\n\t\tthis.index = null;\n\t\tthis.attributes = {};\n\t\tthis.morphAttributes = {};\n\t\tthis.groups = [];\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\t// name\n\n\t\tthis.name = source.name;\n\n\t\t// index\n\n\t\tvar index = source.index;\n\n\t\tif ( index !== null ) {\n\n\t\t\tthis.setIndex( index.clone() );\n\n\t\t}\n\n\t\t// attributes\n\n\t\tvar attributes = source.attributes;\n\n\t\tfor ( name in attributes ) {\n\n\t\t\tvar attribute = attributes[ name ];\n\t\t\tthis.addAttribute( name, attribute.clone() );\n\n\t\t}\n\n\t\t// morph attributes\n\n\t\tvar morphAttributes = source.morphAttributes;\n\n\t\tfor ( name in morphAttributes ) {\n\n\t\t\tvar array = [];\n\t\t\tvar morphAttribute = morphAttributes[ name ]; // morphAttribute: array of Float32BufferAttributes\n\n\t\t\tfor ( i = 0, l = morphAttribute.length; i < l; i ++ ) {\n\n\t\t\t\tarray.push( morphAttribute[ i ].clone() );\n\n\t\t\t}\n\n\t\t\tthis.morphAttributes[ name ] = array;\n\n\t\t}\n\n\t\t// groups\n\n\t\tvar groups = source.groups;\n\n\t\tfor ( i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\tvar group = groups[ i ];\n\t\t\tthis.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t}\n\n\t\t// bounding box\n\n\t\tvar boundingBox = source.boundingBox;\n\n\t\tif ( boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = boundingBox.clone();\n\n\t\t}\n\n\t\t// bounding sphere\n\n\t\tvar boundingSphere = source.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = boundingSphere.clone();\n\n\t\t}\n\n\t\t// draw range\n\n\t\tthis.drawRange.start = source.drawRange.start;\n\t\tthis.drawRange.count = source.drawRange.count;\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author Mugen87 / https://github.com/Mugen87\n */\n\n// BoxGeometry\n\nfunction BoxGeometry( width, height, depth, widthSegments, heightSegments, depthSegments ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'BoxGeometry';\n\n\tthis.parameters = {\n\t\twidth: width,\n\t\theight: height,\n\t\tdepth: depth,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments,\n\t\tdepthSegments: depthSegments\n\t};\n\n\tthis.fromBufferGeometry( new BoxBufferGeometry( width, height, depth, widthSegments, heightSegments, depthSegments ) );\n\tthis.mergeVertices();\n\n}\n\nBoxGeometry.prototype = Object.create( Geometry.prototype );\nBoxGeometry.prototype.constructor = BoxGeometry;\n\n// BoxBufferGeometry\n\nfunction BoxBufferGeometry( width, height, depth, widthSegments, heightSegments, depthSegments ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'BoxBufferGeometry';\n\n\tthis.parameters = {\n\t\twidth: width,\n\t\theight: height,\n\t\tdepth: depth,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments,\n\t\tdepthSegments: depthSegments\n\t};\n\n\tvar scope = this;\n\n\twidth = width || 1;\n\theight = height || 1;\n\tdepth = depth || 1;\n\n\t// segments\n\n\twidthSegments = Math.floor( widthSegments ) || 1;\n\theightSegments = Math.floor( heightSegments ) || 1;\n\tdepthSegments = Math.floor( depthSegments ) || 1;\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\n\t// helper variables\n\n\tvar numberOfVertices = 0;\n\tvar groupStart = 0;\n\n\t// build each side of the box geometry\n\n\tbuildPlane( 'z', 'y', 'x', - 1, - 1, depth, height, width, depthSegments, heightSegments, 0 ); // px\n\tbuildPlane( 'z', 'y', 'x', 1, - 1, depth, height, - width, depthSegments, heightSegments, 1 ); // nx\n\tbuildPlane( 'x', 'z', 'y', 1, 1, width, depth, height, widthSegments, depthSegments, 2 ); // py\n\tbuildPlane( 'x', 'z', 'y', 1, - 1, width, depth, - height, widthSegments, depthSegments, 3 ); // ny\n\tbuildPlane( 'x', 'y', 'z', 1, - 1, width, height, depth, widthSegments, heightSegments, 4 ); // pz\n\tbuildPlane( 'x', 'y', 'z', - 1, - 1, width, height, - depth, widthSegments, heightSegments, 5 ); // nz\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\tfunction buildPlane( u, v, w, udir, vdir, width, height, depth, gridX, gridY, materialIndex ) {\n\n\t\tvar segmentWidth = width / gridX;\n\t\tvar segmentHeight = height / gridY;\n\n\t\tvar widthHalf = width / 2;\n\t\tvar heightHalf = height / 2;\n\t\tvar depthHalf = depth / 2;\n\n\t\tvar gridX1 = gridX + 1;\n\t\tvar gridY1 = gridY + 1;\n\n\t\tvar vertexCounter = 0;\n\t\tvar groupCount = 0;\n\n\t\tvar ix, iy;\n\n\t\tvar vector = new Vector3();\n\n\t\t// generate vertices, normals and uvs\n\n\t\tfor ( iy = 0; iy < gridY1; iy ++ ) {\n\n\t\t\tvar y = iy * segmentHeight - heightHalf;\n\n\t\t\tfor ( ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\t\tvar x = ix * segmentWidth - widthHalf;\n\n\t\t\t\t// set values to correct vector component\n\n\t\t\t\tvector[ u ] = x * udir;\n\t\t\t\tvector[ v ] = y * vdir;\n\t\t\t\tvector[ w ] = depthHalf;\n\n\t\t\t\t// now apply vector to vertex buffer\n\n\t\t\t\tvertices.push( vector.x, vector.y, vector.z );\n\n\t\t\t\t// set values to correct vector component\n\n\t\t\t\tvector[ u ] = 0;\n\t\t\t\tvector[ v ] = 0;\n\t\t\t\tvector[ w ] = depth > 0 ? 1 : - 1;\n\n\t\t\t\t// now apply vector to normal buffer\n\n\t\t\t\tnormals.push( vector.x, vector.y, vector.z );\n\n\t\t\t\t// uvs\n\n\t\t\t\tuvs.push( ix / gridX );\n\t\t\t\tuvs.push( 1 - ( iy / gridY ) );\n\n\t\t\t\t// counters\n\n\t\t\t\tvertexCounter += 1;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// indices\n\n\t\t// 1. you need three indices to draw a single face\n\t\t// 2. a single segment consists of two faces\n\t\t// 3. so we need to generate six (2*3) indices per segment\n\n\t\tfor ( iy = 0; iy < gridY; iy ++ ) {\n\n\t\t\tfor ( ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\t\tvar a = numberOfVertices + ix + gridX1 * iy;\n\t\t\t\tvar b = numberOfVertices + ix + gridX1 * ( iy + 1 );\n\t\t\t\tvar c = numberOfVertices + ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\t\tvar d = numberOfVertices + ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t\t// increase counter\n\n\t\t\t\tgroupCount += 6;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\tscope.addGroup( groupStart, groupCount, materialIndex );\n\n\t\t// calculate new start value for groups\n\n\t\tgroupStart += groupCount;\n\n\t\t// update total number of vertices\n\n\t\tnumberOfVertices += vertexCounter;\n\n\t}\n\n}\n\nBoxBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nBoxBufferGeometry.prototype.constructor = BoxBufferGeometry;\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author Mugen87 / https://github.com/Mugen87\n */\n\n// PlaneGeometry\n\nfunction PlaneGeometry( width, height, widthSegments, heightSegments ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'PlaneGeometry';\n\n\tthis.parameters = {\n\t\twidth: width,\n\t\theight: height,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments\n\t};\n\n\tthis.fromBufferGeometry( new PlaneBufferGeometry( width, height, widthSegments, heightSegments ) );\n\tthis.mergeVertices();\n\n}\n\nPlaneGeometry.prototype = Object.create( Geometry.prototype );\nPlaneGeometry.prototype.constructor = PlaneGeometry;\n\n// PlaneBufferGeometry\n\nfunction PlaneBufferGeometry( width, height, widthSegments, heightSegments ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'PlaneBufferGeometry';\n\n\tthis.parameters = {\n\t\twidth: width,\n\t\theight: height,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments\n\t};\n\n\twidth = width || 1;\n\theight = height || 1;\n\n\tvar width_half = width / 2;\n\tvar height_half = height / 2;\n\n\tvar gridX = Math.floor( widthSegments ) || 1;\n\tvar gridY = Math.floor( heightSegments ) || 1;\n\n\tvar gridX1 = gridX + 1;\n\tvar gridY1 = gridY + 1;\n\n\tvar segment_width = width / gridX;\n\tvar segment_height = height / gridY;\n\n\tvar ix, iy;\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\n\t// generate vertices, normals and uvs\n\n\tfor ( iy = 0; iy < gridY1; iy ++ ) {\n\n\t\tvar y = iy * segment_height - height_half;\n\n\t\tfor ( ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\tvar x = ix * segment_width - width_half;\n\n\t\t\tvertices.push( x, - y, 0 );\n\n\t\t\tnormals.push( 0, 0, 1 );\n\n\t\t\tuvs.push( ix / gridX );\n\t\t\tuvs.push( 1 - ( iy / gridY ) );\n\n\t\t}\n\n\t}\n\n\t// indices\n\n\tfor ( iy = 0; iy < gridY; iy ++ ) {\n\n\t\tfor ( ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\tvar a = ix + gridX1 * iy;\n\t\t\tvar b = ix + gridX1 * ( iy + 1 );\n\t\t\tvar c = ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\tvar d = ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t// faces\n\n\t\t\tindices.push( a, b, d );\n\t\t\tindices.push( b, c, d );\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n}\n\nPlaneBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nPlaneBufferGeometry.prototype.constructor = PlaneBufferGeometry;\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.Multiply,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>\n * }\n */\n\nfunction MeshBasicMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshBasicMaterial';\n\n\tthis.color = new Color( 0xffffff ); // emissive\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.combine = MultiplyOperation;\n\tthis.reflectivity = 1;\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\n\tthis.lights = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshBasicMaterial.prototype = Object.create( Material.prototype );\nMeshBasicMaterial.prototype.constructor = MeshBasicMaterial;\n\nMeshBasicMaterial.prototype.isMeshBasicMaterial = true;\n\nMeshBasicMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.map = source.map;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.specularMap = source.specularMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.envMap = source.envMap;\n\tthis.combine = source.combine;\n\tthis.reflectivity = source.reflectivity;\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\n\treturn this;\n\n};\n\n/**\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  defines: { \"label\" : \"value\" },\n *  uniforms: { \"parameter1\": { value: 1.0 }, \"parameter2\": { value2: 2 } },\n *\n *  fragmentShader: <string>,\n *  vertexShader: <string>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  lights: <bool>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction ShaderMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'ShaderMaterial';\n\n\tthis.defines = {};\n\tthis.uniforms = {};\n\n\tthis.vertexShader = 'void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}';\n\tthis.fragmentShader = 'void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}';\n\n\tthis.linewidth = 1;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.fog = false; // set to use scene fog\n\tthis.lights = false; // set to use scene lights\n\tthis.clipping = false; // set to use user-defined clipping planes\n\n\tthis.skinning = false; // set to use skinning attribute streams\n\tthis.morphTargets = false; // set to use morph targets\n\tthis.morphNormals = false; // set to use morph normals\n\n\tthis.extensions = {\n\t\tderivatives: false, // set to use derivatives\n\t\tfragDepth: false, // set to use fragment depth values\n\t\tdrawBuffers: false, // set to use draw buffers\n\t\tshaderTextureLOD: false // set to use shader texture LOD\n\t};\n\n\t// When rendered geometry doesn't include these attributes but the material does,\n\t// use these default values in WebGL. This avoids errors when buffer data is missing.\n\tthis.defaultAttributeValues = {\n\t\t'color': [ 1, 1, 1 ],\n\t\t'uv': [ 0, 0 ],\n\t\t'uv2': [ 0, 0 ]\n\t};\n\n\tthis.index0AttributeName = undefined;\n\n\tif ( parameters !== undefined ) {\n\n\t\tif ( parameters.attributes !== undefined ) {\n\n\t\t\tconsole.error( 'THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.' );\n\n\t\t}\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n}\n\nShaderMaterial.prototype = Object.create( Material.prototype );\nShaderMaterial.prototype.constructor = ShaderMaterial;\n\nShaderMaterial.prototype.isShaderMaterial = true;\n\nShaderMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.fragmentShader = source.fragmentShader;\n\tthis.vertexShader = source.vertexShader;\n\n\tthis.uniforms = UniformsUtils.clone( source.uniforms );\n\n\tthis.defines = source.defines;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\tthis.lights = source.lights;\n\tthis.clipping = source.clipping;\n\n\tthis.skinning = source.skinning;\n\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\tthis.extensions = source.extensions;\n\n\treturn this;\n\n};\n\nShaderMaterial.prototype.toJSON = function ( meta ) {\n\n\tvar data = Material.prototype.toJSON.call( this, meta );\n\n\tdata.uniforms = this.uniforms;\n\tdata.vertexShader = this.vertexShader;\n\tdata.fragmentShader = this.fragmentShader;\n\n\treturn data;\n\n};\n\n/**\n * @author bhouston / http://clara.io\n */\n\nfunction Ray( origin, direction ) {\n\n\tthis.origin = ( origin !== undefined ) ? origin : new Vector3();\n\tthis.direction = ( direction !== undefined ) ? direction : new Vector3();\n\n}\n\nObject.assign( Ray.prototype, {\n\n\tset: function ( origin, direction ) {\n\n\t\tthis.origin.copy( origin );\n\t\tthis.direction.copy( direction );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( ray ) {\n\n\t\tthis.origin.copy( ray.origin );\n\t\tthis.direction.copy( ray.direction );\n\n\t\treturn this;\n\n\t},\n\n\tat: function ( t, optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Vector3();\n\n\t\treturn result.copy( this.direction ).multiplyScalar( t ).add( this.origin );\n\n\t},\n\n\tlookAt: function ( v ) {\n\n\t\tthis.direction.copy( v ).sub( this.origin ).normalize();\n\n\t\treturn this;\n\n\t},\n\n\trecast: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function recast( t ) {\n\n\t\t\tthis.origin.copy( this.at( t, v1 ) );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tclosestPointToPoint: function ( point, optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Vector3();\n\t\tresult.subVectors( point, this.origin );\n\t\tvar directionDistance = result.dot( this.direction );\n\n\t\tif ( directionDistance < 0 ) {\n\n\t\t\treturn result.copy( this.origin );\n\n\t\t}\n\n\t\treturn result.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\treturn Math.sqrt( this.distanceSqToPoint( point ) );\n\n\t},\n\n\tdistanceSqToPoint: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function distanceSqToPoint( point ) {\n\n\t\t\tvar directionDistance = v1.subVectors( point, this.origin ).dot( this.direction );\n\n\t\t\t// point behind the ray\n\n\t\t\tif ( directionDistance < 0 ) {\n\n\t\t\t\treturn this.origin.distanceToSquared( point );\n\n\t\t\t}\n\n\t\t\tv1.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\n\n\t\t\treturn v1.distanceToSquared( point );\n\n\t\t};\n\n\t}(),\n\n\tdistanceSqToSegment: function () {\n\n\t\tvar segCenter = new Vector3();\n\t\tvar segDir = new Vector3();\n\t\tvar diff = new Vector3();\n\n\t\treturn function distanceSqToSegment( v0, v1, optionalPointOnRay, optionalPointOnSegment ) {\n\n\t\t\t// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteDistRaySegment.h\n\t\t\t// It returns the min distance between the ray and the segment\n\t\t\t// defined by v0 and v1\n\t\t\t// It can also set two optional targets :\n\t\t\t// - The closest point on the ray\n\t\t\t// - The closest point on the segment\n\n\t\t\tsegCenter.copy( v0 ).add( v1 ).multiplyScalar( 0.5 );\n\t\t\tsegDir.copy( v1 ).sub( v0 ).normalize();\n\t\t\tdiff.copy( this.origin ).sub( segCenter );\n\n\t\t\tvar segExtent = v0.distanceTo( v1 ) * 0.5;\n\t\t\tvar a01 = - this.direction.dot( segDir );\n\t\t\tvar b0 = diff.dot( this.direction );\n\t\t\tvar b1 = - diff.dot( segDir );\n\t\t\tvar c = diff.lengthSq();\n\t\t\tvar det = Math.abs( 1 - a01 * a01 );\n\t\t\tvar s0, s1, sqrDist, extDet;\n\n\t\t\tif ( det > 0 ) {\n\n\t\t\t\t// The ray and segment are not parallel.\n\n\t\t\t\ts0 = a01 * b1 - b0;\n\t\t\t\ts1 = a01 * b0 - b1;\n\t\t\t\textDet = segExtent * det;\n\n\t\t\t\tif ( s0 >= 0 ) {\n\n\t\t\t\t\tif ( s1 >= - extDet ) {\n\n\t\t\t\t\t\tif ( s1 <= extDet ) {\n\n\t\t\t\t\t\t\t// region 0\n\t\t\t\t\t\t\t// Minimum at interior points of ray and segment.\n\n\t\t\t\t\t\t\tvar invDet = 1 / det;\n\t\t\t\t\t\t\ts0 *= invDet;\n\t\t\t\t\t\t\ts1 *= invDet;\n\t\t\t\t\t\t\tsqrDist = s0 * ( s0 + a01 * s1 + 2 * b0 ) + s1 * ( a01 * s0 + s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// region 1\n\n\t\t\t\t\t\t\ts1 = segExtent;\n\t\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// region 5\n\n\t\t\t\t\t\ts1 = - segExtent;\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( s1 <= - extDet ) {\n\n\t\t\t\t\t\t// region 4\n\n\t\t\t\t\t\ts0 = Math.max( 0, - ( - a01 * segExtent + b0 ) );\n\t\t\t\t\t\ts1 = ( s0 > 0 ) ? - segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t} else if ( s1 <= extDet ) {\n\n\t\t\t\t\t\t// region 3\n\n\t\t\t\t\t\ts0 = 0;\n\t\t\t\t\t\ts1 = Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\t\tsqrDist = s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// region 2\n\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * segExtent + b0 ) );\n\t\t\t\t\t\ts1 = ( s0 > 0 ) ? segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// Ray and segment are parallel.\n\n\t\t\t\ts1 = ( a01 > 0 ) ? - segExtent : segExtent;\n\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t}\n\n\t\t\tif ( optionalPointOnRay ) {\n\n\t\t\t\toptionalPointOnRay.copy( this.direction ).multiplyScalar( s0 ).add( this.origin );\n\n\t\t\t}\n\n\t\t\tif ( optionalPointOnSegment ) {\n\n\t\t\t\toptionalPointOnSegment.copy( segDir ).multiplyScalar( s1 ).add( segCenter );\n\n\t\t\t}\n\n\t\t\treturn sqrDist;\n\n\t\t};\n\n\t}(),\n\n\tintersectSphere: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function intersectSphere( sphere, optionalTarget ) {\n\n\t\t\tv1.subVectors( sphere.center, this.origin );\n\t\t\tvar tca = v1.dot( this.direction );\n\t\t\tvar d2 = v1.dot( v1 ) - tca * tca;\n\t\t\tvar radius2 = sphere.radius * sphere.radius;\n\n\t\t\tif ( d2 > radius2 ) return null;\n\n\t\t\tvar thc = Math.sqrt( radius2 - d2 );\n\n\t\t\t// t0 = first intersect point - entrance on front of sphere\n\t\t\tvar t0 = tca - thc;\n\n\t\t\t// t1 = second intersect point - exit point on back of sphere\n\t\t\tvar t1 = tca + thc;\n\n\t\t\t// test to see if both t0 and t1 are behind the ray - if so, return null\n\t\t\tif ( t0 < 0 && t1 < 0 ) return null;\n\n\t\t\t// test to see if t0 is behind the ray:\n\t\t\t// if it is, the ray is inside the sphere, so return the second exit point scaled by t1,\n\t\t\t// in order to always return an intersect point that is in front of the ray.\n\t\t\tif ( t0 < 0 ) return this.at( t1, optionalTarget );\n\n\t\t\t// else t0 is in front of the ray, so return the first collision point scaled by t0\n\t\t\treturn this.at( t0, optionalTarget );\n\n\t\t};\n\n\t}(),\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\treturn this.distanceToPoint( sphere.center ) <= sphere.radius;\n\n\t},\n\n\tdistanceToPlane: function ( plane ) {\n\n\t\tvar denominator = plane.normal.dot( this.direction );\n\n\t\tif ( denominator === 0 ) {\n\n\t\t\t// line is coplanar, return origin\n\t\t\tif ( plane.distanceToPoint( this.origin ) === 0 ) {\n\n\t\t\t\treturn 0;\n\n\t\t\t}\n\n\t\t\t// Null is preferable to undefined since undefined means.... it is undefined\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tvar t = - ( this.origin.dot( plane.normal ) + plane.constant ) / denominator;\n\n\t\t// Return if the ray never intersects the plane\n\n\t\treturn t >= 0 ? t : null;\n\n\t},\n\n\tintersectPlane: function ( plane, optionalTarget ) {\n\n\t\tvar t = this.distanceToPlane( plane );\n\n\t\tif ( t === null ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\treturn this.at( t, optionalTarget );\n\n\t},\n\n\tintersectsPlane: function ( plane ) {\n\n\t\t// check if the ray lies on the plane first\n\n\t\tvar distToPoint = plane.distanceToPoint( this.origin );\n\n\t\tif ( distToPoint === 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\tvar denominator = plane.normal.dot( this.direction );\n\n\t\tif ( denominator * distToPoint < 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\t// ray origin is behind the plane (and is pointing behind it)\n\n\t\treturn false;\n\n\t},\n\n\tintersectBox: function ( box, optionalTarget ) {\n\n\t\tvar tmin, tmax, tymin, tymax, tzmin, tzmax;\n\n\t\tvar invdirx = 1 / this.direction.x,\n\t\t\tinvdiry = 1 / this.direction.y,\n\t\t\tinvdirz = 1 / this.direction.z;\n\n\t\tvar origin = this.origin;\n\n\t\tif ( invdirx >= 0 ) {\n\n\t\t\ttmin = ( box.min.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.max.x - origin.x ) * invdirx;\n\n\t\t} else {\n\n\t\t\ttmin = ( box.max.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.min.x - origin.x ) * invdirx;\n\n\t\t}\n\n\t\tif ( invdiry >= 0 ) {\n\n\t\t\ttymin = ( box.min.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.max.y - origin.y ) * invdiry;\n\n\t\t} else {\n\n\t\t\ttymin = ( box.max.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.min.y - origin.y ) * invdiry;\n\n\t\t}\n\n\t\tif ( ( tmin > tymax ) || ( tymin > tmax ) ) return null;\n\n\t\t// These lines also handle the case where tmin or tmax is NaN\n\t\t// (result of 0 * Infinity). x !== x returns true if x is NaN\n\n\t\tif ( tymin > tmin || tmin !== tmin ) tmin = tymin;\n\n\t\tif ( tymax < tmax || tmax !== tmax ) tmax = tymax;\n\n\t\tif ( invdirz >= 0 ) {\n\n\t\t\ttzmin = ( box.min.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.max.z - origin.z ) * invdirz;\n\n\t\t} else {\n\n\t\t\ttzmin = ( box.max.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.min.z - origin.z ) * invdirz;\n\n\t\t}\n\n\t\tif ( ( tmin > tzmax ) || ( tzmin > tmax ) ) return null;\n\n\t\tif ( tzmin > tmin || tmin !== tmin ) tmin = tzmin;\n\n\t\tif ( tzmax < tmax || tmax !== tmax ) tmax = tzmax;\n\n\t\t//return point closest to the ray (positive side)\n\n\t\tif ( tmax < 0 ) return null;\n\n\t\treturn this.at( tmin >= 0 ? tmin : tmax, optionalTarget );\n\n\t},\n\n\tintersectsBox: ( function () {\n\n\t\tvar v = new Vector3();\n\n\t\treturn function intersectsBox( box ) {\n\n\t\t\treturn this.intersectBox( box, v ) !== null;\n\n\t\t};\n\n\t} )(),\n\n\tintersectTriangle: function () {\n\n\t\t// Compute the offset origin, edges, and normal.\n\t\tvar diff = new Vector3();\n\t\tvar edge1 = new Vector3();\n\t\tvar edge2 = new Vector3();\n\t\tvar normal = new Vector3();\n\n\t\treturn function intersectTriangle( a, b, c, backfaceCulling, optionalTarget ) {\n\n\t\t\t// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteIntrRay3Triangle3.h\n\n\t\t\tedge1.subVectors( b, a );\n\t\t\tedge2.subVectors( c, a );\n\t\t\tnormal.crossVectors( edge1, edge2 );\n\n\t\t\t// Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,\n\t\t\t// E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by\n\t\t\t//   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))\n\t\t\t//   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))\n\t\t\t//   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)\n\t\t\tvar DdN = this.direction.dot( normal );\n\t\t\tvar sign;\n\n\t\t\tif ( DdN > 0 ) {\n\n\t\t\t\tif ( backfaceCulling ) return null;\n\t\t\t\tsign = 1;\n\n\t\t\t} else if ( DdN < 0 ) {\n\n\t\t\t\tsign = - 1;\n\t\t\t\tDdN = - DdN;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tdiff.subVectors( this.origin, a );\n\t\t\tvar DdQxE2 = sign * this.direction.dot( edge2.crossVectors( diff, edge2 ) );\n\n\t\t\t// b1 < 0, no intersection\n\t\t\tif ( DdQxE2 < 0 ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tvar DdE1xQ = sign * this.direction.dot( edge1.cross( diff ) );\n\n\t\t\t// b2 < 0, no intersection\n\t\t\tif ( DdE1xQ < 0 ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\t// b1+b2 > 1, no intersection\n\t\t\tif ( DdQxE2 + DdE1xQ > DdN ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\t// Line intersects triangle, check if ray does.\n\t\t\tvar QdN = - sign * diff.dot( normal );\n\n\t\t\t// t < 0, no intersection\n\t\t\tif ( QdN < 0 ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\t// Ray intersects triangle.\n\t\t\treturn this.at( QdN / DdN, optionalTarget );\n\n\t\t};\n\n\t}(),\n\n\tapplyMatrix4: function ( matrix4 ) {\n\n\t\tthis.origin.applyMatrix4( matrix4 );\n\t\tthis.direction.transformDirection( matrix4 );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( ray ) {\n\n\t\treturn ray.origin.equals( this.origin ) && ray.direction.equals( this.direction );\n\n\t}\n\n} );\n\n/**\n * @author bhouston / http://clara.io\n */\n\nfunction Line3( start, end ) {\n\n\tthis.start = ( start !== undefined ) ? start : new Vector3();\n\tthis.end = ( end !== undefined ) ? end : new Vector3();\n\n}\n\nObject.assign( Line3.prototype, {\n\n\tset: function ( start, end ) {\n\n\t\tthis.start.copy( start );\n\t\tthis.end.copy( end );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( line ) {\n\n\t\tthis.start.copy( line.start );\n\t\tthis.end.copy( line.end );\n\n\t\treturn this;\n\n\t},\n\n\tgetCenter: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Vector3();\n\t\treturn result.addVectors( this.start, this.end ).multiplyScalar( 0.5 );\n\n\t},\n\n\tdelta: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Vector3();\n\t\treturn result.subVectors( this.end, this.start );\n\n\t},\n\n\tdistanceSq: function () {\n\n\t\treturn this.start.distanceToSquared( this.end );\n\n\t},\n\n\tdistance: function () {\n\n\t\treturn this.start.distanceTo( this.end );\n\n\t},\n\n\tat: function ( t, optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Vector3();\n\n\t\treturn this.delta( result ).multiplyScalar( t ).add( this.start );\n\n\t},\n\n\tclosestPointToPointParameter: function () {\n\n\t\tvar startP = new Vector3();\n\t\tvar startEnd = new Vector3();\n\n\t\treturn function closestPointToPointParameter( point, clampToLine ) {\n\n\t\t\tstartP.subVectors( point, this.start );\n\t\t\tstartEnd.subVectors( this.end, this.start );\n\n\t\t\tvar startEnd2 = startEnd.dot( startEnd );\n\t\t\tvar startEnd_startP = startEnd.dot( startP );\n\n\t\t\tvar t = startEnd_startP / startEnd2;\n\n\t\t\tif ( clampToLine ) {\n\n\t\t\t\tt = _Math.clamp( t, 0, 1 );\n\n\t\t\t}\n\n\t\t\treturn t;\n\n\t\t};\n\n\t}(),\n\n\tclosestPointToPoint: function ( point, clampToLine, optionalTarget ) {\n\n\t\tvar t = this.closestPointToPointParameter( point, clampToLine );\n\n\t\tvar result = optionalTarget || new Vector3();\n\n\t\treturn this.delta( result ).multiplyScalar( t ).add( this.start );\n\n\t},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tthis.start.applyMatrix4( matrix );\n\t\tthis.end.applyMatrix4( matrix );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( line ) {\n\n\t\treturn line.start.equals( this.start ) && line.end.equals( this.end );\n\n\t}\n\n} );\n\n/**\n * @author bhouston / http://clara.io\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Triangle( a, b, c ) {\n\n\tthis.a = ( a !== undefined ) ? a : new Vector3();\n\tthis.b = ( b !== undefined ) ? b : new Vector3();\n\tthis.c = ( c !== undefined ) ? c : new Vector3();\n\n}\n\nObject.assign( Triangle, {\n\n\tnormal: function () {\n\n\t\tvar v0 = new Vector3();\n\n\t\treturn function normal( a, b, c, optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new Vector3();\n\n\t\t\tresult.subVectors( c, b );\n\t\t\tv0.subVectors( a, b );\n\t\t\tresult.cross( v0 );\n\n\t\t\tvar resultLengthSq = result.lengthSq();\n\t\t\tif ( resultLengthSq > 0 ) {\n\n\t\t\t\treturn result.multiplyScalar( 1 / Math.sqrt( resultLengthSq ) );\n\n\t\t\t}\n\n\t\t\treturn result.set( 0, 0, 0 );\n\n\t\t};\n\n\t}(),\n\n\t// static/instance method to calculate barycentric coordinates\n\t// based on: http://www.blackpawn.com/texts/pointinpoly/default.html\n\tbarycoordFromPoint: function () {\n\n\t\tvar v0 = new Vector3();\n\t\tvar v1 = new Vector3();\n\t\tvar v2 = new Vector3();\n\n\t\treturn function barycoordFromPoint( point, a, b, c, optionalTarget ) {\n\n\t\t\tv0.subVectors( c, a );\n\t\t\tv1.subVectors( b, a );\n\t\t\tv2.subVectors( point, a );\n\n\t\t\tvar dot00 = v0.dot( v0 );\n\t\t\tvar dot01 = v0.dot( v1 );\n\t\t\tvar dot02 = v0.dot( v2 );\n\t\t\tvar dot11 = v1.dot( v1 );\n\t\t\tvar dot12 = v1.dot( v2 );\n\n\t\t\tvar denom = ( dot00 * dot11 - dot01 * dot01 );\n\n\t\t\tvar result = optionalTarget || new Vector3();\n\n\t\t\t// collinear or singular triangle\n\t\t\tif ( denom === 0 ) {\n\n\t\t\t\t// arbitrary location outside of triangle?\n\t\t\t\t// not sure if this is the best idea, maybe should be returning undefined\n\t\t\t\treturn result.set( - 2, - 1, - 1 );\n\n\t\t\t}\n\n\t\t\tvar invDenom = 1 / denom;\n\t\t\tvar u = ( dot11 * dot02 - dot01 * dot12 ) * invDenom;\n\t\t\tvar v = ( dot00 * dot12 - dot01 * dot02 ) * invDenom;\n\n\t\t\t// barycentric coordinates must always sum to 1\n\t\t\treturn result.set( 1 - u - v, v, u );\n\n\t\t};\n\n\t}(),\n\n\tcontainsPoint: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function containsPoint( point, a, b, c ) {\n\n\t\t\tvar result = Triangle.barycoordFromPoint( point, a, b, c, v1 );\n\n\t\t\treturn ( result.x >= 0 ) && ( result.y >= 0 ) && ( ( result.x + result.y ) <= 1 );\n\n\t\t};\n\n\t}()\n\n} );\n\nObject.assign( Triangle.prototype, {\n\n\tset: function ( a, b, c ) {\n\n\t\tthis.a.copy( a );\n\t\tthis.b.copy( b );\n\t\tthis.c.copy( c );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPointsAndIndices: function ( points, i0, i1, i2 ) {\n\n\t\tthis.a.copy( points[ i0 ] );\n\t\tthis.b.copy( points[ i1 ] );\n\t\tthis.c.copy( points[ i2 ] );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( triangle ) {\n\n\t\tthis.a.copy( triangle.a );\n\t\tthis.b.copy( triangle.b );\n\t\tthis.c.copy( triangle.c );\n\n\t\treturn this;\n\n\t},\n\n\tarea: function () {\n\n\t\tvar v0 = new Vector3();\n\t\tvar v1 = new Vector3();\n\n\t\treturn function area() {\n\n\t\t\tv0.subVectors( this.c, this.b );\n\t\t\tv1.subVectors( this.a, this.b );\n\n\t\t\treturn v0.cross( v1 ).length() * 0.5;\n\n\t\t};\n\n\t}(),\n\n\tmidpoint: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Vector3();\n\t\treturn result.addVectors( this.a, this.b ).add( this.c ).multiplyScalar( 1 / 3 );\n\n\t},\n\n\tnormal: function ( optionalTarget ) {\n\n\t\treturn Triangle.normal( this.a, this.b, this.c, optionalTarget );\n\n\t},\n\n\tplane: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Plane();\n\n\t\treturn result.setFromCoplanarPoints( this.a, this.b, this.c );\n\n\t},\n\n\tbarycoordFromPoint: function ( point, optionalTarget ) {\n\n\t\treturn Triangle.barycoordFromPoint( point, this.a, this.b, this.c, optionalTarget );\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\treturn Triangle.containsPoint( point, this.a, this.b, this.c );\n\n\t},\n\n\tclosestPointToPoint: function () {\n\n\t\tvar plane = new Plane();\n\t\tvar edgeList = [ new Line3(), new Line3(), new Line3() ];\n\t\tvar projectedPoint = new Vector3();\n\t\tvar closestPoint = new Vector3();\n\n\t\treturn function closestPointToPoint( point, optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new Vector3();\n\t\t\tvar minDistance = Infinity;\n\n\t\t\t// project the point onto the plane of the triangle\n\n\t\t\tplane.setFromCoplanarPoints( this.a, this.b, this.c );\n\t\t\tplane.projectPoint( point, projectedPoint );\n\n\t\t\t// check if the projection lies within the triangle\n\n\t\t\tif ( this.containsPoint( projectedPoint ) === true ) {\n\n\t\t\t\t// if so, this is the closest point\n\n\t\t\t\tresult.copy( projectedPoint );\n\n\t\t\t} else {\n\n\t\t\t\t// if not, the point falls outside the triangle. the result is the closest point to the triangle's edges or vertices\n\n\t\t\t\tedgeList[ 0 ].set( this.a, this.b );\n\t\t\t\tedgeList[ 1 ].set( this.b, this.c );\n\t\t\t\tedgeList[ 2 ].set( this.c, this.a );\n\n\t\t\t\tfor ( var i = 0; i < edgeList.length; i ++ ) {\n\n\t\t\t\t\tedgeList[ i ].closestPointToPoint( projectedPoint, true, closestPoint );\n\n\t\t\t\t\tvar distance = projectedPoint.distanceToSquared( closestPoint );\n\n\t\t\t\t\tif ( distance < minDistance ) {\n\n\t\t\t\t\t\tminDistance = distance;\n\n\t\t\t\t\t\tresult.copy( closestPoint );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn result;\n\n\t\t};\n\n\t}(),\n\n\tequals: function ( triangle ) {\n\n\t\treturn triangle.a.equals( this.a ) && triangle.b.equals( this.b ) && triangle.c.equals( this.c );\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author jonobr1 / http://jonobr1.com/\n */\n\nfunction Mesh( geometry, material ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Mesh';\n\n\tthis.geometry = geometry !== undefined ? geometry : new BufferGeometry();\n\tthis.material = material !== undefined ? material : new MeshBasicMaterial( { color: Math.random() * 0xffffff } );\n\n\tthis.drawMode = TrianglesDrawMode;\n\n\tthis.updateMorphTargets();\n\n}\n\nMesh.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Mesh,\n\n\tisMesh: true,\n\n\tsetDrawMode: function ( value ) {\n\n\t\tthis.drawMode = value;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source );\n\n\t\tthis.drawMode = source.drawMode;\n\n\t\tif ( source.morphTargetInfluences !== undefined ) {\n\n\t\t\tthis.morphTargetInfluences = source.morphTargetInfluences.slice();\n\n\t\t}\n\n\t\tif ( source.morphTargetDictionary !== undefined ) {\n\n\t\t\tthis.morphTargetDictionary = Object.assign( {}, source.morphTargetDictionary );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tupdateMorphTargets: function () {\n\n\t\tvar geometry = this.geometry;\n\t\tvar m, ml, name;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tvar morphAttributes = geometry.morphAttributes;\n\t\t\tvar keys = Object.keys( morphAttributes );\n\n\t\t\tif ( keys.length > 0 ) {\n\n\t\t\t\tvar morphAttribute = morphAttributes[ keys[ 0 ] ];\n\n\t\t\t\tif ( morphAttribute !== undefined ) {\n\n\t\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\t\tfor ( m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\n\n\t\t\t\t\t\tname = morphAttribute[ m ].name || String( m );\n\n\t\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tvar morphTargets = geometry.morphTargets;\n\n\t\t\tif ( morphTargets !== undefined && morphTargets.length > 0 ) {\n\n\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\tfor ( m = 0, ml = morphTargets.length; m < ml; m ++ ) {\n\n\t\t\t\t\tname = morphTargets[ m ].name || String( m );\n\n\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\traycast: ( function () {\n\n\t\tvar inverseMatrix = new Matrix4();\n\t\tvar ray = new Ray();\n\t\tvar sphere = new Sphere();\n\n\t\tvar vA = new Vector3();\n\t\tvar vB = new Vector3();\n\t\tvar vC = new Vector3();\n\n\t\tvar tempA = new Vector3();\n\t\tvar tempB = new Vector3();\n\t\tvar tempC = new Vector3();\n\n\t\tvar uvA = new Vector2();\n\t\tvar uvB = new Vector2();\n\t\tvar uvC = new Vector2();\n\n\t\tvar barycoord = new Vector3();\n\n\t\tvar intersectionPoint = new Vector3();\n\t\tvar intersectionPointWorld = new Vector3();\n\n\t\tfunction uvIntersection( point, p1, p2, p3, uv1, uv2, uv3 ) {\n\n\t\t\tTriangle.barycoordFromPoint( point, p1, p2, p3, barycoord );\n\n\t\t\tuv1.multiplyScalar( barycoord.x );\n\t\t\tuv2.multiplyScalar( barycoord.y );\n\t\t\tuv3.multiplyScalar( barycoord.z );\n\n\t\t\tuv1.add( uv2 ).add( uv3 );\n\n\t\t\treturn uv1.clone();\n\n\t\t}\n\n\t\tfunction checkIntersection( object, material, raycaster, ray, pA, pB, pC, point ) {\n\n\t\t\tvar intersect;\n\n\t\t\tif ( material.side === BackSide ) {\n\n\t\t\t\tintersect = ray.intersectTriangle( pC, pB, pA, true, point );\n\n\t\t\t} else {\n\n\t\t\t\tintersect = ray.intersectTriangle( pA, pB, pC, material.side !== DoubleSide, point );\n\n\t\t\t}\n\n\t\t\tif ( intersect === null ) return null;\n\n\t\t\tintersectionPointWorld.copy( point );\n\t\t\tintersectionPointWorld.applyMatrix4( object.matrixWorld );\n\n\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectionPointWorld );\n\n\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) return null;\n\n\t\t\treturn {\n\t\t\t\tdistance: distance,\n\t\t\t\tpoint: intersectionPointWorld.clone(),\n\t\t\t\tobject: object\n\t\t\t};\n\n\t\t}\n\n\t\tfunction checkBufferGeometryIntersection( object, raycaster, ray, position, uv, a, b, c ) {\n\n\t\t\tvA.fromBufferAttribute( position, a );\n\t\t\tvB.fromBufferAttribute( position, b );\n\t\t\tvC.fromBufferAttribute( position, c );\n\n\t\t\tvar intersection = checkIntersection( object, object.material, raycaster, ray, vA, vB, vC, intersectionPoint );\n\n\t\t\tif ( intersection ) {\n\n\t\t\t\tif ( uv ) {\n\n\t\t\t\t\tuvA.fromBufferAttribute( uv, a );\n\t\t\t\t\tuvB.fromBufferAttribute( uv, b );\n\t\t\t\t\tuvC.fromBufferAttribute( uv, c );\n\n\t\t\t\t\tintersection.uv = uvIntersection( intersectionPoint, vA, vB, vC, uvA, uvB, uvC );\n\n\t\t\t\t}\n\n\t\t\t\tintersection.face = new Face3( a, b, c, Triangle.normal( vA, vB, vC ) );\n\t\t\t\tintersection.faceIndex = a;\n\n\t\t\t}\n\n\t\t\treturn intersection;\n\n\t\t}\n\n\t\treturn function raycast( raycaster, intersects ) {\n\n\t\t\tvar geometry = this.geometry;\n\t\t\tvar material = this.material;\n\t\t\tvar matrixWorld = this.matrixWorld;\n\n\t\t\tif ( material === undefined ) return;\n\n\t\t\t// Checking boundingSphere distance to ray\n\n\t\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t\tsphere.copy( geometry.boundingSphere );\n\t\t\tsphere.applyMatrix4( matrixWorld );\n\n\t\t\tif ( raycaster.ray.intersectsSphere( sphere ) === false ) return;\n\n\t\t\t//\n\n\t\t\tinverseMatrix.getInverse( matrixWorld );\n\t\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\n\n\t\t\t// Check boundingBox before continuing\n\n\t\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\t\tif ( ray.intersectsBox( geometry.boundingBox ) === false ) return;\n\n\t\t\t}\n\n\t\t\tvar intersection;\n\n\t\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\t\tvar a, b, c;\n\t\t\t\tvar index = geometry.index;\n\t\t\t\tvar position = geometry.attributes.position;\n\t\t\t\tvar uv = geometry.attributes.uv;\n\t\t\t\tvar i, l;\n\n\t\t\t\tif ( index !== null ) {\n\n\t\t\t\t\t// indexed buffer geometry\n\n\t\t\t\t\tfor ( i = 0, l = index.count; i < l; i += 3 ) {\n\n\t\t\t\t\t\ta = index.getX( i );\n\t\t\t\t\t\tb = index.getX( i + 1 );\n\t\t\t\t\t\tc = index.getX( i + 2 );\n\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, raycaster, ray, position, uv, a, b, c );\n\n\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in indices buffer semantics\n\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( position !== undefined ) {\n\n\t\t\t\t\t// non-indexed buffer geometry\n\n\t\t\t\t\tfor ( i = 0, l = position.count; i < l; i += 3 ) {\n\n\t\t\t\t\t\ta = i;\n\t\t\t\t\t\tb = i + 1;\n\t\t\t\t\t\tc = i + 2;\n\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, raycaster, ray, position, uv, a, b, c );\n\n\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\tintersection.index = a; // triangle number in positions buffer semantics\n\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\t\tvar fvA, fvB, fvC;\n\t\t\t\tvar isMultiMaterial = Array.isArray( material );\n\n\t\t\t\tvar vertices = geometry.vertices;\n\t\t\t\tvar faces = geometry.faces;\n\t\t\t\tvar uvs;\n\n\t\t\t\tvar faceVertexUvs = geometry.faceVertexUvs[ 0 ];\n\t\t\t\tif ( faceVertexUvs.length > 0 ) uvs = faceVertexUvs;\n\n\t\t\t\tfor ( var f = 0, fl = faces.length; f < fl; f ++ ) {\n\n\t\t\t\t\tvar face = faces[ f ];\n\t\t\t\t\tvar faceMaterial = isMultiMaterial ? material[ face.materialIndex ] : material;\n\n\t\t\t\t\tif ( faceMaterial === undefined ) continue;\n\n\t\t\t\t\tfvA = vertices[ face.a ];\n\t\t\t\t\tfvB = vertices[ face.b ];\n\t\t\t\t\tfvC = vertices[ face.c ];\n\n\t\t\t\t\tif ( faceMaterial.morphTargets === true ) {\n\n\t\t\t\t\t\tvar morphTargets = geometry.morphTargets;\n\t\t\t\t\t\tvar morphInfluences = this.morphTargetInfluences;\n\n\t\t\t\t\t\tvA.set( 0, 0, 0 );\n\t\t\t\t\t\tvB.set( 0, 0, 0 );\n\t\t\t\t\t\tvC.set( 0, 0, 0 );\n\n\t\t\t\t\t\tfor ( var t = 0, tl = morphTargets.length; t < tl; t ++ ) {\n\n\t\t\t\t\t\t\tvar influence = morphInfluences[ t ];\n\n\t\t\t\t\t\t\tif ( influence === 0 ) continue;\n\n\t\t\t\t\t\t\tvar targets = morphTargets[ t ].vertices;\n\n\t\t\t\t\t\t\tvA.addScaledVector( tempA.subVectors( targets[ face.a ], fvA ), influence );\n\t\t\t\t\t\t\tvB.addScaledVector( tempB.subVectors( targets[ face.b ], fvB ), influence );\n\t\t\t\t\t\t\tvC.addScaledVector( tempC.subVectors( targets[ face.c ], fvC ), influence );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvA.add( fvA );\n\t\t\t\t\t\tvB.add( fvB );\n\t\t\t\t\t\tvC.add( fvC );\n\n\t\t\t\t\t\tfvA = vA;\n\t\t\t\t\t\tfvB = vB;\n\t\t\t\t\t\tfvC = vC;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tintersection = checkIntersection( this, faceMaterial, raycaster, ray, fvA, fvB, fvC, intersectionPoint );\n\n\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\tif ( uvs && uvs[ f ] ) {\n\n\t\t\t\t\t\t\tvar uvs_f = uvs[ f ];\n\t\t\t\t\t\t\tuvA.copy( uvs_f[ 0 ] );\n\t\t\t\t\t\t\tuvB.copy( uvs_f[ 1 ] );\n\t\t\t\t\t\t\tuvC.copy( uvs_f[ 2 ] );\n\n\t\t\t\t\t\t\tintersection.uv = uvIntersection( intersectionPoint, fvA, fvB, fvC, uvA, uvB, uvC );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tintersection.face = face;\n\t\t\t\t\t\tintersection.faceIndex = f;\n\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t}() ),\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.geometry, this.material ).copy( this );\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLBackground( renderer, state, geometries, premultipliedAlpha ) {\n\n\tvar clearColor = new Color( 0x000000 );\n\tvar clearAlpha = 0;\n\n\tvar planeCamera, planeMesh;\n\tvar boxMesh;\n\n\tfunction render( renderList, scene, camera, forceClear ) {\n\n\t\tvar background = scene.background;\n\n\t\tif ( background === null ) {\n\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t} else if ( background && background.isColor ) {\n\n\t\t\tsetClear( background, 1 );\n\t\t\tforceClear = true;\n\n\t\t}\n\n\t\tif ( renderer.autoClear || forceClear ) {\n\n\t\t\trenderer.clear( renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil );\n\n\t\t}\n\n\t\tif ( background && background.isCubeTexture ) {\n\n\t\t\tif ( boxMesh === undefined ) {\n\n\t\t\t\tboxMesh = new Mesh(\n\t\t\t\t\tnew BoxBufferGeometry( 1, 1, 1 ),\n\t\t\t\t\tnew ShaderMaterial( {\n\t\t\t\t\t\tuniforms: ShaderLib.cube.uniforms,\n\t\t\t\t\t\tvertexShader: ShaderLib.cube.vertexShader,\n\t\t\t\t\t\tfragmentShader: ShaderLib.cube.fragmentShader,\n\t\t\t\t\t\tside: BackSide,\n\t\t\t\t\t\tdepthTest: true,\n\t\t\t\t\t\tdepthWrite: false,\n\t\t\t\t\t\tfog: false\n\t\t\t\t\t} )\n\t\t\t\t);\n\n\t\t\t\tboxMesh.geometry.removeAttribute( 'normal' );\n\t\t\t\tboxMesh.geometry.removeAttribute( 'uv' );\n\n\t\t\t\tboxMesh.onBeforeRender = function ( renderer, scene, camera ) {\n\n\t\t\t\t\tthis.matrixWorld.copyPosition( camera.matrixWorld );\n\n\t\t\t\t};\n\n\t\t\t\tgeometries.update( boxMesh.geometry );\n\n\t\t\t}\n\n\t\t\tboxMesh.material.uniforms.tCube.value = background;\n\n\t\t\trenderList.push( boxMesh, boxMesh.geometry, boxMesh.material, 0, null );\n\n\t\t} else if ( background && background.isTexture ) {\n\n\t\t\tif ( planeCamera === undefined ) {\n\n\t\t\t\tplaneCamera = new OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\n\n\t\t\t\tplaneMesh = new Mesh(\n\t\t\t\t\tnew PlaneBufferGeometry( 2, 2 ),\n\t\t\t\t\tnew MeshBasicMaterial( { depthTest: false, depthWrite: false, fog: false } )\n\t\t\t\t);\n\n\t\t\t\tgeometries.update( planeMesh.geometry );\n\n\t\t\t}\n\n\t\t\tplaneMesh.material.map = background;\n\n\t\t\t// TODO Push this to renderList\n\n\t\t\trenderer.renderBufferDirect( planeCamera, null, planeMesh.geometry, planeMesh.material, planeMesh, null );\n\n\t\t}\n\n\t}\n\n\tfunction setClear( color, alpha ) {\n\n\t\tstate.buffers.color.setClear( color.r, color.g, color.b, alpha, premultipliedAlpha );\n\n\t}\n\n\treturn {\n\n\t\tgetClearColor: function () {\n\n\t\t\treturn clearColor;\n\n\t\t},\n\t\tsetClearColor: function ( color, alpha ) {\n\n\t\t\tclearColor.set( color );\n\t\t\tclearAlpha = alpha !== undefined ? alpha : 1;\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t},\n\t\tgetClearAlpha: function () {\n\n\t\t\treturn clearAlpha;\n\n\t\t},\n\t\tsetClearAlpha: function ( alpha ) {\n\n\t\t\tclearAlpha = alpha;\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t},\n\t\trender: render\n\n\t};\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction painterSortStable( a, b ) {\n\n\tif ( a.renderOrder !== b.renderOrder ) {\n\n\t\treturn a.renderOrder - b.renderOrder;\n\n\t} else if ( a.program && b.program && a.program !== b.program ) {\n\n\t\treturn a.program.id - b.program.id;\n\n\t} else if ( a.material.id !== b.material.id ) {\n\n\t\treturn a.material.id - b.material.id;\n\n\t} else if ( a.z !== b.z ) {\n\n\t\treturn a.z - b.z;\n\n\t} else {\n\n\t\treturn a.id - b.id;\n\n\t}\n\n}\n\nfunction reversePainterSortStable( a, b ) {\n\n\tif ( a.renderOrder !== b.renderOrder ) {\n\n\t\treturn a.renderOrder - b.renderOrder;\n\n\t} if ( a.z !== b.z ) {\n\n\t\treturn b.z - a.z;\n\n\t} else {\n\n\t\treturn a.id - b.id;\n\n\t}\n\n}\n\nfunction WebGLRenderList() {\n\n\tvar renderItems = [];\n\tvar renderItemsIndex = 0;\n\n\tvar opaque = [];\n\tvar transparent = [];\n\n\tfunction init() {\n\n\t\trenderItemsIndex = 0;\n\n\t\topaque.length = 0;\n\t\ttransparent.length = 0;\n\n\t}\n\n\tfunction push( object, geometry, material, z, group ) {\n\n\t\tvar renderItem = renderItems[ renderItemsIndex ];\n\n\t\tif ( renderItem === undefined ) {\n\n\t\t\trenderItem = {\n\t\t\t\tid: object.id,\n\t\t\t\tobject: object,\n\t\t\t\tgeometry: geometry,\n\t\t\t\tmaterial: material,\n\t\t\t\tprogram: material.program,\n\t\t\t\trenderOrder: object.renderOrder,\n\t\t\t\tz: z,\n\t\t\t\tgroup: group\n\t\t\t};\n\n\t\t\trenderItems[ renderItemsIndex ] = renderItem;\n\n\t\t} else {\n\n\t\t\trenderItem.id = object.id;\n\t\t\trenderItem.object = object;\n\t\t\trenderItem.geometry = geometry;\n\t\t\trenderItem.material = material;\n\t\t\trenderItem.program = material.program;\n\t\t\trenderItem.renderOrder = object.renderOrder;\n\t\t\trenderItem.z = z;\n\t\t\trenderItem.group = group;\n\n\t\t}\n\n\t\t( material.transparent === true ? transparent : opaque ).push( renderItem );\n\n\t\trenderItemsIndex ++;\n\n\t}\n\n\tfunction sort() {\n\n\t\tif ( opaque.length > 1 ) opaque.sort( painterSortStable );\n\t\tif ( transparent.length > 1 ) transparent.sort( reversePainterSortStable );\n\n\t}\n\n\treturn {\n\t\topaque: opaque,\n\t\ttransparent: transparent,\n\n\t\tinit: init,\n\t\tpush: push,\n\n\t\tsort: sort\n\t};\n\n}\n\nfunction WebGLRenderLists() {\n\n\tvar lists = {};\n\n\tfunction get( scene, camera ) {\n\n\t\tvar hash = scene.id + ',' + camera.id;\n\t\tvar list = lists[ hash ];\n\n\t\tif ( list === undefined ) {\n\n\t\t\t// console.log( 'THREE.WebGLRenderLists:', hash );\n\n\t\t\tlist = new WebGLRenderList();\n\t\t\tlists[ hash ] = list;\n\n\t\t}\n\n\t\treturn list;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tlists = {};\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction absNumericalSort( a, b ) {\n\n\treturn Math.abs( b[ 1 ] ) - Math.abs( a[ 1 ] );\n\n}\n\nfunction WebGLMorphtargets( gl ) {\n\n\tvar influencesList = {};\n\tvar morphInfluences = new Float32Array( 8 );\n\n\tfunction update( object, geometry, material, program ) {\n\n\t\tvar objectInfluences = object.morphTargetInfluences;\n\n\t\tvar length = objectInfluences.length;\n\n\t\tvar influences = influencesList[ geometry.id ];\n\n\t\tif ( influences === undefined ) {\n\n\t\t\t// initialise list\n\n\t\t\tinfluences = [];\n\n\t\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\t\tinfluences[ i ] = [ i, 0 ];\n\n\t\t\t}\n\n\t\t\tinfluencesList[ geometry.id ] = influences;\n\n\t\t}\n\n\t\tvar morphTargets = material.morphTargets && geometry.morphAttributes.position;\n\t\tvar morphNormals = material.morphNormals && geometry.morphAttributes.normal;\n\n\t\t// Remove current morphAttributes\n\n\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\tvar influence = influences[ i ];\n\n\t\t\tif ( influence[ 1 ] !== 0 ) {\n\n\t\t\t\tif ( morphTargets ) geometry.removeAttribute( 'morphTarget' + i );\n\t\t\t\tif ( morphNormals ) geometry.removeAttribute( 'morphNormal' + i );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Collect influences\n\n\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\tvar influence = influences[ i ];\n\n\t\t\tinfluence[ 0 ] = i;\n\t\t\tinfluence[ 1 ] = objectInfluences[ i ];\n\n\t\t}\n\n\t\tinfluences.sort( absNumericalSort );\n\n\t\t// Add morphAttributes\n\n\t\tfor ( var i = 0; i < 8; i ++ ) {\n\n\t\t\tvar influence = influences[ i ];\n\n\t\t\tif ( influence ) {\n\n\t\t\t\tvar index = influence[ 0 ];\n\t\t\t\tvar value = influence[ 1 ];\n\n\t\t\t\tif ( value ) {\n\n\t\t\t\t\tif ( morphTargets ) geometry.addAttribute( 'morphTarget' + i, morphTargets[ index ] );\n\t\t\t\t\tif ( morphNormals ) geometry.addAttribute( 'morphNormal' + i, morphNormals[ index ] );\n\n\t\t\t\t\tmorphInfluences[ i ] = value;\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tmorphInfluences[ i ] = 0;\n\n\t\t}\n\n\t\tprogram.getUniforms().setValue( gl, 'morphTargetInfluences', morphInfluences );\n\n\t}\n\n\treturn {\n\n\t\tupdate: update\n\n\t};\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLIndexedBufferRenderer( gl, extensions, infoRender ) {\n\n\tvar mode;\n\n\tfunction setMode( value ) {\n\n\t\tmode = value;\n\n\t}\n\n\tvar type, bytesPerElement;\n\n\tfunction setIndex( value ) {\n\n\t\ttype = value.type;\n\t\tbytesPerElement = value.bytesPerElement;\n\n\t}\n\n\tfunction render( start, count ) {\n\n\t\tgl.drawElements( mode, count, type, start * bytesPerElement );\n\n\t\tinfoRender.calls ++;\n\t\tinfoRender.vertices += count;\n\n\t\tif ( mode === gl.TRIANGLES ) infoRender.faces += count / 3;\n\t\telse if ( mode === gl.POINTS ) infoRender.points += count;\n\n\t}\n\n\tfunction renderInstances( geometry, start, count ) {\n\n\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\n\n\t\tif ( extension === null ) {\n\n\t\t\tconsole.error( 'THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\textension.drawElementsInstancedANGLE( mode, count, type, start * bytesPerElement, geometry.maxInstancedCount );\n\n\t\tinfoRender.calls ++;\n\t\tinfoRender.vertices += count * geometry.maxInstancedCount;\n\n\t\tif ( mode === gl.TRIANGLES ) infoRender.faces += geometry.maxInstancedCount * count / 3;\n\t\telse if ( mode === gl.POINTS ) infoRender.points += geometry.maxInstancedCount * count;\n\n\t}\n\n\t//\n\n\tthis.setMode = setMode;\n\tthis.setIndex = setIndex;\n\tthis.render = render;\n\tthis.renderInstances = renderInstances;\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLBufferRenderer( gl, extensions, infoRender ) {\n\n\tvar mode;\n\n\tfunction setMode( value ) {\n\n\t\tmode = value;\n\n\t}\n\n\tfunction render( start, count ) {\n\n\t\tgl.drawArrays( mode, start, count );\n\n\t\tinfoRender.calls ++;\n\t\tinfoRender.vertices += count;\n\n\t\tif ( mode === gl.TRIANGLES ) infoRender.faces += count / 3;\n\t\telse if ( mode === gl.POINTS ) infoRender.points += count;\n\n\t}\n\n\tfunction renderInstances( geometry, start, count ) {\n\n\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\n\n\t\tif ( extension === null ) {\n\n\t\t\tconsole.error( 'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar position = geometry.attributes.position;\n\n\t\tif ( position.isInterleavedBufferAttribute ) {\n\n\t\t\tcount = position.data.count;\n\n\t\t\textension.drawArraysInstancedANGLE( mode, 0, count, geometry.maxInstancedCount );\n\n\t\t} else {\n\n\t\t\textension.drawArraysInstancedANGLE( mode, start, count, geometry.maxInstancedCount );\n\n\t\t}\n\n\t\tinfoRender.calls ++;\n\t\tinfoRender.vertices += count * geometry.maxInstancedCount;\n\n\t\tif ( mode === gl.TRIANGLES ) infoRender.faces += geometry.maxInstancedCount * count / 3;\n\t\telse if ( mode === gl.POINTS ) infoRender.points += geometry.maxInstancedCount * count;\n\n\t}\n\n\t//\n\n\tthis.setMode = setMode;\n\tthis.render = render;\n\tthis.renderInstances = renderInstances;\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLGeometries( gl, attributes, infoMemory ) {\n\n\tvar geometries = {};\n\tvar wireframeAttributes = {};\n\n\tfunction onGeometryDispose( event ) {\n\n\t\tvar geometry = event.target;\n\t\tvar buffergeometry = geometries[ geometry.id ];\n\n\t\tif ( buffergeometry.index !== null ) {\n\n\t\t\tattributes.remove( buffergeometry.index );\n\n\t\t}\n\n\t\tfor ( var name in buffergeometry.attributes ) {\n\n\t\t\tattributes.remove( buffergeometry.attributes[ name ] );\n\n\t\t}\n\n\t\tgeometry.removeEventListener( 'dispose', onGeometryDispose );\n\n\t\tdelete geometries[ geometry.id ];\n\n\t\t// TODO Remove duplicate code\n\n\t\tvar attribute = wireframeAttributes[ geometry.id ];\n\n\t\tif ( attribute ) {\n\n\t\t\tattributes.remove( attribute );\n\t\t\tdelete wireframeAttributes[ geometry.id ];\n\n\t\t}\n\n\t\tattribute = wireframeAttributes[ buffergeometry.id ];\n\n\t\tif ( attribute ) {\n\n\t\t\tattributes.remove( attribute );\n\t\t\tdelete wireframeAttributes[ buffergeometry.id ];\n\n\t\t}\n\n\t\t//\n\n\t\tinfoMemory.geometries --;\n\n\t}\n\n\tfunction get( object, geometry ) {\n\n\t\tvar buffergeometry = geometries[ geometry.id ];\n\n\t\tif ( buffergeometry ) return buffergeometry;\n\n\t\tgeometry.addEventListener( 'dispose', onGeometryDispose );\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tbuffergeometry = geometry;\n\n\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\tif ( geometry._bufferGeometry === undefined ) {\n\n\t\t\t\tgeometry._bufferGeometry = new BufferGeometry().setFromObject( object );\n\n\t\t\t}\n\n\t\t\tbuffergeometry = geometry._bufferGeometry;\n\n\t\t}\n\n\t\tgeometries[ geometry.id ] = buffergeometry;\n\n\t\tinfoMemory.geometries ++;\n\n\t\treturn buffergeometry;\n\n\t}\n\n\tfunction update( geometry ) {\n\n\t\tvar index = geometry.index;\n\t\tvar geometryAttributes = geometry.attributes;\n\n\t\tif ( index !== null ) {\n\n\t\t\tattributes.update( index, gl.ELEMENT_ARRAY_BUFFER );\n\n\t\t}\n\n\t\tfor ( var name in geometryAttributes ) {\n\n\t\t\tattributes.update( geometryAttributes[ name ], gl.ARRAY_BUFFER );\n\n\t\t}\n\n\t\t// morph targets\n\n\t\tvar morphAttributes = geometry.morphAttributes;\n\n\t\tfor ( var name in morphAttributes ) {\n\n\t\t\tvar array = morphAttributes[ name ];\n\n\t\t\tfor ( var i = 0, l = array.length; i < l; i ++ ) {\n\n\t\t\t\tattributes.update( array[ i ], gl.ARRAY_BUFFER );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction getWireframeAttribute( geometry ) {\n\n\t\tvar attribute = wireframeAttributes[ geometry.id ];\n\n\t\tif ( attribute ) return attribute;\n\n\t\tvar indices = [];\n\n\t\tvar geometryIndex = geometry.index;\n\t\tvar geometryAttributes = geometry.attributes;\n\n\t\t// console.time( 'wireframe' );\n\n\t\tif ( geometryIndex !== null ) {\n\n\t\t\tvar array = geometryIndex.array;\n\n\t\t\tfor ( var i = 0, l = array.length; i < l; i += 3 ) {\n\n\t\t\t\tvar a = array[ i + 0 ];\n\t\t\t\tvar b = array[ i + 1 ];\n\t\t\t\tvar c = array[ i + 2 ];\n\n\t\t\t\tindices.push( a, b, b, c, c, a );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tvar array = geometryAttributes.position.array;\n\n\t\t\tfor ( var i = 0, l = ( array.length / 3 ) - 1; i < l; i += 3 ) {\n\n\t\t\t\tvar a = i + 0;\n\t\t\t\tvar b = i + 1;\n\t\t\t\tvar c = i + 2;\n\n\t\t\t\tindices.push( a, b, b, c, c, a );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// console.timeEnd( 'wireframe' );\n\n\t\tattribute = new ( arrayMax( indices ) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute )( indices, 1 );\n\n\t\tattributes.update( attribute, gl.ELEMENT_ARRAY_BUFFER );\n\n\t\twireframeAttributes[ geometry.id ] = attribute;\n\n\t\treturn attribute;\n\n\t}\n\n\treturn {\n\n\t\tget: get,\n\t\tupdate: update,\n\n\t\tgetWireframeAttribute: getWireframeAttribute\n\n\t};\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction UniformsCache() {\n\n\tvar lights = {};\n\n\treturn {\n\n\t\tget: function ( light ) {\n\n\t\t\tif ( lights[ light.id ] !== undefined ) {\n\n\t\t\t\treturn lights[ light.id ];\n\n\t\t\t}\n\n\t\t\tvar uniforms;\n\n\t\t\tswitch ( light.type ) {\n\n\t\t\t\tcase 'DirectionalLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tcolor: new Color(),\n\n\t\t\t\t\t\tshadow: false,\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'SpotLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tdistance: 0,\n\t\t\t\t\t\tconeCos: 0,\n\t\t\t\t\t\tpenumbraCos: 0,\n\t\t\t\t\t\tdecay: 0,\n\n\t\t\t\t\t\tshadow: false,\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PointLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tdistance: 0,\n\t\t\t\t\t\tdecay: 0,\n\n\t\t\t\t\t\tshadow: false,\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2(),\n\t\t\t\t\t\tshadowCameraNear: 1,\n\t\t\t\t\t\tshadowCameraFar: 1000\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'HemisphereLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tskyColor: new Color(),\n\t\t\t\t\t\tgroundColor: new Color()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'RectAreaLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\thalfWidth: new Vector3(),\n\t\t\t\t\t\thalfHeight: new Vector3()\n\t\t\t\t\t\t// TODO (abelnation): set RectAreaLight shadow uniforms\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tlights[ light.id ] = uniforms;\n\n\t\t\treturn uniforms;\n\n\t\t}\n\n\t};\n\n}\n\nfunction WebGLLights() {\n\n\tvar cache = new UniformsCache();\n\n\tvar state = {\n\n\t\thash: '',\n\n\t\tambient: [ 0, 0, 0 ],\n\t\tdirectional: [],\n\t\tdirectionalShadowMap: [],\n\t\tdirectionalShadowMatrix: [],\n\t\tspot: [],\n\t\tspotShadowMap: [],\n\t\tspotShadowMatrix: [],\n\t\trectArea: [],\n\t\tpoint: [],\n\t\tpointShadowMap: [],\n\t\tpointShadowMatrix: [],\n\t\themi: []\n\n\t};\n\n\tvar vector3 = new Vector3();\n\tvar matrix4 = new Matrix4();\n\tvar matrix42 = new Matrix4();\n\n\tfunction setup( lights, shadows, camera ) {\n\n\t\tvar r = 0, g = 0, b = 0;\n\n\t\tvar directionalLength = 0;\n\t\tvar pointLength = 0;\n\t\tvar spotLength = 0;\n\t\tvar rectAreaLength = 0;\n\t\tvar hemiLength = 0;\n\n\t\tvar viewMatrix = camera.matrixWorldInverse;\n\n\t\tfor ( var i = 0, l = lights.length; i < l; i ++ ) {\n\n\t\t\tvar light = lights[ i ];\n\n\t\t\tvar color = light.color;\n\t\t\tvar intensity = light.intensity;\n\t\t\tvar distance = light.distance;\n\n\t\t\tvar shadowMap = ( light.shadow && light.shadow.map ) ? light.shadow.map.texture : null;\n\n\t\t\tif ( light.isAmbientLight ) {\n\n\t\t\t\tr += color.r * intensity;\n\t\t\t\tg += color.g * intensity;\n\t\t\t\tb += color.b * intensity;\n\n\t\t\t} else if ( light.isDirectionalLight ) {\n\n\t\t\t\tvar uniforms = cache.get( light );\n\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tvector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\tuniforms.direction.sub( vector3 );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\tuniforms.shadow = light.castShadow;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tvar shadow = light.shadow;\n\n\t\t\t\t\tuniforms.shadowBias = shadow.bias;\n\t\t\t\t\tuniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tuniforms.shadowMapSize = shadow.mapSize;\n\n\t\t\t\t}\n\n\t\t\t\tstate.directionalShadowMap[ directionalLength ] = shadowMap;\n\t\t\t\tstate.directionalShadowMatrix[ directionalLength ] = light.shadow.matrix;\n\t\t\t\tstate.directional[ directionalLength ] = uniforms;\n\n\t\t\t\tdirectionalLength ++;\n\n\t\t\t} else if ( light.isSpotLight ) {\n\n\t\t\t\tvar uniforms = cache.get( light );\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity );\n\t\t\t\tuniforms.distance = distance;\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tvector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\tuniforms.direction.sub( vector3 );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\tuniforms.coneCos = Math.cos( light.angle );\n\t\t\t\tuniforms.penumbraCos = Math.cos( light.angle * ( 1 - light.penumbra ) );\n\t\t\t\tuniforms.decay = ( light.distance === 0 ) ? 0.0 : light.decay;\n\n\t\t\t\tuniforms.shadow = light.castShadow;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tvar shadow = light.shadow;\n\n\t\t\t\t\tuniforms.shadowBias = shadow.bias;\n\t\t\t\t\tuniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tuniforms.shadowMapSize = shadow.mapSize;\n\n\t\t\t\t}\n\n\t\t\t\tstate.spotShadowMap[ spotLength ] = shadowMap;\n\t\t\t\tstate.spotShadowMatrix[ spotLength ] = light.shadow.matrix;\n\t\t\t\tstate.spot[ spotLength ] = uniforms;\n\n\t\t\t\tspotLength ++;\n\n\t\t\t} else if ( light.isRectAreaLight ) {\n\n\t\t\t\tvar uniforms = cache.get( light );\n\n\t\t\t\t// (a) intensity controls irradiance of entire light\n\t\t\t\tuniforms.color\n\t\t\t\t\t.copy( color )\n\t\t\t\t\t.multiplyScalar( intensity / ( light.width * light.height ) );\n\n\t\t\t\t// (b) intensity controls the radiance per light area\n\t\t\t\t// uniforms.color.copy( color ).multiplyScalar( intensity );\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\t// extract local rotation of light to derive width/height half vectors\n\t\t\t\tmatrix42.identity();\n\t\t\t\tmatrix4.copy( light.matrixWorld );\n\t\t\t\tmatrix4.premultiply( viewMatrix );\n\t\t\t\tmatrix42.extractRotation( matrix4 );\n\n\t\t\t\tuniforms.halfWidth.set( light.width * 0.5, 0.0, 0.0 );\n\t\t\t\tuniforms.halfHeight.set( 0.0, light.height * 0.5, 0.0 );\n\n\t\t\t\tuniforms.halfWidth.applyMatrix4( matrix42 );\n\t\t\t\tuniforms.halfHeight.applyMatrix4( matrix42 );\n\n\t\t\t\t// TODO (abelnation): RectAreaLight distance?\n\t\t\t\t// uniforms.distance = distance;\n\n\t\t\t\tstate.rectArea[ rectAreaLength ] = uniforms;\n\n\t\t\t\trectAreaLength ++;\n\n\t\t\t} else if ( light.isPointLight ) {\n\n\t\t\t\tvar uniforms = cache.get( light );\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\n\t\t\t\tuniforms.distance = light.distance;\n\t\t\t\tuniforms.decay = ( light.distance === 0 ) ? 0.0 : light.decay;\n\n\t\t\t\tuniforms.shadow = light.castShadow;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tvar shadow = light.shadow;\n\n\t\t\t\t\tuniforms.shadowBias = shadow.bias;\n\t\t\t\t\tuniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tuniforms.shadowMapSize = shadow.mapSize;\n\t\t\t\t\tuniforms.shadowCameraNear = shadow.camera.near;\n\t\t\t\t\tuniforms.shadowCameraFar = shadow.camera.far;\n\n\t\t\t\t}\n\n\t\t\t\tstate.pointShadowMap[ pointLength ] = shadowMap;\n\t\t\t\tstate.pointShadowMatrix[ pointLength ] = light.shadow.matrix;\n\t\t\t\tstate.point[ pointLength ] = uniforms;\n\n\t\t\t\tpointLength ++;\n\n\t\t\t} else if ( light.isHemisphereLight ) {\n\n\t\t\t\tvar uniforms = cache.get( light );\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\t\t\t\tuniforms.direction.normalize();\n\n\t\t\t\tuniforms.skyColor.copy( light.color ).multiplyScalar( intensity );\n\t\t\t\tuniforms.groundColor.copy( light.groundColor ).multiplyScalar( intensity );\n\n\t\t\t\tstate.hemi[ hemiLength ] = uniforms;\n\n\t\t\t\themiLength ++;\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.ambient[ 0 ] = r;\n\t\tstate.ambient[ 1 ] = g;\n\t\tstate.ambient[ 2 ] = b;\n\n\t\tstate.directional.length = directionalLength;\n\t\tstate.spot.length = spotLength;\n\t\tstate.rectArea.length = rectAreaLength;\n\t\tstate.point.length = pointLength;\n\t\tstate.hemi.length = hemiLength;\n\n\t\t// TODO (sam-g-steel) why aren't we using join\n\t\tstate.hash = directionalLength + ',' + pointLength + ',' + spotLength + ',' + rectAreaLength + ',' + hemiLength + ',' + shadows.length;\n\n\t}\n\n\treturn {\n\t\tsetup: setup,\n\t\tstate: state\n\t};\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLObjects( geometries, infoRender ) {\n\n\tvar updateList = {};\n\n\tfunction update( object ) {\n\n\t\tvar frame = infoRender.frame;\n\n\t\tvar geometry = object.geometry;\n\t\tvar buffergeometry = geometries.get( object, geometry );\n\n\t\t// Update once per frame\n\n\t\tif ( updateList[ buffergeometry.id ] !== frame ) {\n\n\t\t\tif ( geometry.isGeometry ) {\n\n\t\t\t\tbuffergeometry.updateFromObject( object );\n\n\t\t\t}\n\n\t\t\tgeometries.update( buffergeometry );\n\n\t\t\tupdateList[ buffergeometry.id ] = frame;\n\n\t\t}\n\n\t\treturn buffergeometry;\n\n\t}\n\n\tfunction clear() {\n\n\t\tupdateList = {};\n\n\t}\n\n\treturn {\n\n\t\tupdate: update,\n\t\tclear: clear\n\n\t};\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction addLineNumbers( string ) {\n\n\tvar lines = string.split( '\\n' );\n\n\tfor ( var i = 0; i < lines.length; i ++ ) {\n\n\t\tlines[ i ] = ( i + 1 ) + ': ' + lines[ i ];\n\n\t}\n\n\treturn lines.join( '\\n' );\n\n}\n\nfunction WebGLShader( gl, type, string ) {\n\n\tvar shader = gl.createShader( type );\n\n\tgl.shaderSource( shader, string );\n\tgl.compileShader( shader );\n\n\tif ( gl.getShaderParameter( shader, gl.COMPILE_STATUS ) === false ) {\n\n\t\tconsole.error( 'THREE.WebGLShader: Shader couldn\\'t compile.' );\n\n\t}\n\n\tif ( gl.getShaderInfoLog( shader ) !== '' ) {\n\n\t\tconsole.warn( 'THREE.WebGLShader: gl.getShaderInfoLog()', type === gl.VERTEX_SHADER ? 'vertex' : 'fragment', gl.getShaderInfoLog( shader ), addLineNumbers( string ) );\n\n\t}\n\n\t// --enable-privileged-webgl-extension\n\t// console.log( type, gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );\n\n\treturn shader;\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar programIdCount = 0;\n\nfunction getEncodingComponents( encoding ) {\n\n\tswitch ( encoding ) {\n\n\t\tcase LinearEncoding:\n\t\t\treturn [ 'Linear', '( value )' ];\n\t\tcase sRGBEncoding:\n\t\t\treturn [ 'sRGB', '( value )' ];\n\t\tcase RGBEEncoding:\n\t\t\treturn [ 'RGBE', '( value )' ];\n\t\tcase RGBM7Encoding:\n\t\t\treturn [ 'RGBM', '( value, 7.0 )' ];\n\t\tcase RGBM16Encoding:\n\t\t\treturn [ 'RGBM', '( value, 16.0 )' ];\n\t\tcase RGBDEncoding:\n\t\t\treturn [ 'RGBD', '( value, 256.0 )' ];\n\t\tcase GammaEncoding:\n\t\t\treturn [ 'Gamma', '( value, float( GAMMA_FACTOR ) )' ];\n\t\tdefault:\n\t\t\tthrow new Error( 'unsupported encoding: ' + encoding );\n\n\t}\n\n}\n\nfunction getTexelDecodingFunction( functionName, encoding ) {\n\n\tvar components = getEncodingComponents( encoding );\n\treturn 'vec4 ' + functionName + '( vec4 value ) { return ' + components[ 0 ] + 'ToLinear' + components[ 1 ] + '; }';\n\n}\n\nfunction getTexelEncodingFunction( functionName, encoding ) {\n\n\tvar components = getEncodingComponents( encoding );\n\treturn 'vec4 ' + functionName + '( vec4 value ) { return LinearTo' + components[ 0 ] + components[ 1 ] + '; }';\n\n}\n\nfunction getToneMappingFunction( functionName, toneMapping ) {\n\n\tvar toneMappingName;\n\n\tswitch ( toneMapping ) {\n\n\t\tcase LinearToneMapping:\n\t\t\ttoneMappingName = 'Linear';\n\t\t\tbreak;\n\n\t\tcase ReinhardToneMapping:\n\t\t\ttoneMappingName = 'Reinhard';\n\t\t\tbreak;\n\n\t\tcase Uncharted2ToneMapping:\n\t\t\ttoneMappingName = 'Uncharted2';\n\t\t\tbreak;\n\n\t\tcase CineonToneMapping:\n\t\t\ttoneMappingName = 'OptimizedCineon';\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tthrow new Error( 'unsupported toneMapping: ' + toneMapping );\n\n\t}\n\n\treturn 'vec3 ' + functionName + '( vec3 color ) { return ' + toneMappingName + 'ToneMapping( color ); }';\n\n}\n\nfunction generateExtensions( extensions, parameters, rendererExtensions ) {\n\n\textensions = extensions || {};\n\n\tvar chunks = [\n\t\t( extensions.derivatives || parameters.envMapCubeUV || parameters.bumpMap || parameters.normalMap || parameters.flatShading ) ? '#extension GL_OES_standard_derivatives : enable' : '',\n\t\t( extensions.fragDepth || parameters.logarithmicDepthBuffer ) && rendererExtensions.get( 'EXT_frag_depth' ) ? '#extension GL_EXT_frag_depth : enable' : '',\n\t\t( extensions.drawBuffers ) && rendererExtensions.get( 'WEBGL_draw_buffers' ) ? '#extension GL_EXT_draw_buffers : require' : '',\n\t\t( extensions.shaderTextureLOD || parameters.envMap ) && rendererExtensions.get( 'EXT_shader_texture_lod' ) ? '#extension GL_EXT_shader_texture_lod : enable' : ''\n\t];\n\n\treturn chunks.filter( filterEmptyLine ).join( '\\n' );\n\n}\n\nfunction generateDefines( defines ) {\n\n\tvar chunks = [];\n\n\tfor ( var name in defines ) {\n\n\t\tvar value = defines[ name ];\n\n\t\tif ( value === false ) continue;\n\n\t\tchunks.push( '#define ' + name + ' ' + value );\n\n\t}\n\n\treturn chunks.join( '\\n' );\n\n}\n\nfunction fetchAttributeLocations( gl, program ) {\n\n\tvar attributes = {};\n\n\tvar n = gl.getProgramParameter( program, gl.ACTIVE_ATTRIBUTES );\n\n\tfor ( var i = 0; i < n; i ++ ) {\n\n\t\tvar info = gl.getActiveAttrib( program, i );\n\t\tvar name = info.name;\n\n\t\t// console.log( 'THREE.WebGLProgram: ACTIVE VERTEX ATTRIBUTE:', name, i );\n\n\t\tattributes[ name ] = gl.getAttribLocation( program, name );\n\n\t}\n\n\treturn attributes;\n\n}\n\nfunction filterEmptyLine( string ) {\n\n\treturn string !== '';\n\n}\n\nfunction replaceLightNums( string, parameters ) {\n\n\treturn string\n\t\t.replace( /NUM_DIR_LIGHTS/g, parameters.numDirLights )\n\t\t.replace( /NUM_SPOT_LIGHTS/g, parameters.numSpotLights )\n\t\t.replace( /NUM_RECT_AREA_LIGHTS/g, parameters.numRectAreaLights )\n\t\t.replace( /NUM_POINT_LIGHTS/g, parameters.numPointLights )\n\t\t.replace( /NUM_HEMI_LIGHTS/g, parameters.numHemiLights );\n\n}\n\nfunction parseIncludes( string ) {\n\n\tvar pattern = /^[ \\t]*#include +<([\\w\\d.]+)>/gm;\n\n\tfunction replace( match, include ) {\n\n\t\tvar replace = ShaderChunk[ include ];\n\n\t\tif ( replace === undefined ) {\n\n\t\t\tthrow new Error( 'Can not resolve #include <' + include + '>' );\n\n\t\t}\n\n\t\treturn parseIncludes( replace );\n\n\t}\n\n\treturn string.replace( pattern, replace );\n\n}\n\nfunction unrollLoops( string ) {\n\n\tvar pattern = /for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g;\n\n\tfunction replace( match, start, end, snippet ) {\n\n\t\tvar unroll = '';\n\n\t\tfor ( var i = parseInt( start ); i < parseInt( end ); i ++ ) {\n\n\t\t\tunroll += snippet.replace( /\\[ i \\]/g, '[ ' + i + ' ]' );\n\n\t\t}\n\n\t\treturn unroll;\n\n\t}\n\n\treturn string.replace( pattern, replace );\n\n}\n\nfunction WebGLProgram( renderer, extensions, code, material, shader, parameters ) {\n\n\tvar gl = renderer.context;\n\n\tvar defines = material.defines;\n\n\tvar vertexShader = shader.vertexShader;\n\tvar fragmentShader = shader.fragmentShader;\n\n\tvar shadowMapTypeDefine = 'SHADOWMAP_TYPE_BASIC';\n\n\tif ( parameters.shadowMapType === PCFShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF';\n\n\t} else if ( parameters.shadowMapType === PCFSoftShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF_SOFT';\n\n\t}\n\n\tvar envMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\tvar envMapModeDefine = 'ENVMAP_MODE_REFLECTION';\n\tvar envMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( material.envMap.mapping ) {\n\n\t\t\tcase CubeReflectionMapping:\n\t\t\tcase CubeRefractionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\t\t\t\tbreak;\n\n\t\t\tcase CubeUVReflectionMapping:\n\t\t\tcase CubeUVRefractionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE_UV';\n\t\t\t\tbreak;\n\n\t\t\tcase EquirectangularReflectionMapping:\n\t\t\tcase EquirectangularRefractionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_EQUIREC';\n\t\t\t\tbreak;\n\n\t\t\tcase SphericalReflectionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_SPHERE';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tswitch ( material.envMap.mapping ) {\n\n\t\t\tcase CubeRefractionMapping:\n\t\t\tcase EquirectangularRefractionMapping:\n\t\t\t\tenvMapModeDefine = 'ENVMAP_MODE_REFRACTION';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tswitch ( material.combine ) {\n\n\t\t\tcase MultiplyOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\n\t\t\t\tbreak;\n\n\t\t\tcase MixOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MIX';\n\t\t\t\tbreak;\n\n\t\t\tcase AddOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_ADD';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tvar gammaFactorDefine = ( renderer.gammaFactor > 0 ) ? renderer.gammaFactor : 1.0;\n\n\t// console.log( 'building new program ' );\n\n\t//\n\n\tvar customExtensions = generateExtensions( material.extensions, parameters, extensions );\n\n\tvar customDefines = generateDefines( defines );\n\n\t//\n\n\tvar program = gl.createProgram();\n\n\tvar prefixVertex, prefixFragment;\n\n\tif ( material.isRawShaderMaterial ) {\n\n\t\tprefixVertex = [\n\n\t\t\tcustomDefines\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tif ( prefixVertex.length > 0 ) {\n\n\t\t\tprefixVertex += '\\n';\n\n\t\t}\n\n\t\tprefixFragment = [\n\n\t\t\tcustomExtensions,\n\t\t\tcustomDefines\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tif ( prefixFragment.length > 0 ) {\n\n\t\t\tprefixFragment += '\\n';\n\n\t\t}\n\n\t} else {\n\n\t\tprefixVertex = [\n\n\t\t\t'precision ' + parameters.precision + ' float;',\n\t\t\t'precision ' + parameters.precision + ' int;',\n\n\t\t\t'#define SHADER_NAME ' + shader.name,\n\n\t\t\tcustomDefines,\n\n\t\t\tparameters.supportsVertexTextures ? '#define VERTEX_TEXTURES' : '',\n\n\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\n\n\t\t\t'#define MAX_BONES ' + parameters.maxBones,\n\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\n\t\t\t( parameters.useFog && parameters.fogExp ) ? '#define FOG_EXP2' : '',\n\n\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\tparameters.displacementMap && parameters.supportsVertexTextures ? '#define USE_DISPLACEMENTMAP' : '',\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\n\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\n\n\t\t\tparameters.skinning ? '#define USE_SKINNING' : '',\n\t\t\tparameters.useVertexTexture ? '#define BONE_TEXTURE' : '',\n\n\t\t\tparameters.morphTargets ? '#define USE_MORPHTARGETS' : '',\n\t\t\tparameters.morphNormals && parameters.flatShading === false ? '#define USE_MORPHNORMALS' : '',\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\t'#define NUM_CLIPPING_PLANES ' + parameters.numClippingPlanes,\n\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\n\t\t\tparameters.sizeAttenuation ? '#define USE_SIZEATTENUATION' : '',\n\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\tparameters.logarithmicDepthBuffer && extensions.get( 'EXT_frag_depth' ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\t'uniform mat4 modelMatrix;',\n\t\t\t'uniform mat4 modelViewMatrix;',\n\t\t\t'uniform mat4 projectionMatrix;',\n\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t'uniform mat3 normalMatrix;',\n\t\t\t'uniform vec3 cameraPosition;',\n\n\t\t\t'attribute vec3 position;',\n\t\t\t'attribute vec3 normal;',\n\t\t\t'attribute vec2 uv;',\n\n\t\t\t'#ifdef USE_COLOR',\n\n\t\t\t'\tattribute vec3 color;',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_MORPHTARGETS',\n\n\t\t\t'\tattribute vec3 morphTarget0;',\n\t\t\t'\tattribute vec3 morphTarget1;',\n\t\t\t'\tattribute vec3 morphTarget2;',\n\t\t\t'\tattribute vec3 morphTarget3;',\n\n\t\t\t'\t#ifdef USE_MORPHNORMALS',\n\n\t\t\t'\t\tattribute vec3 morphNormal0;',\n\t\t\t'\t\tattribute vec3 morphNormal1;',\n\t\t\t'\t\tattribute vec3 morphNormal2;',\n\t\t\t'\t\tattribute vec3 morphNormal3;',\n\n\t\t\t'\t#else',\n\n\t\t\t'\t\tattribute vec3 morphTarget4;',\n\t\t\t'\t\tattribute vec3 morphTarget5;',\n\t\t\t'\t\tattribute vec3 morphTarget6;',\n\t\t\t'\t\tattribute vec3 morphTarget7;',\n\n\t\t\t'\t#endif',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_SKINNING',\n\n\t\t\t'\tattribute vec4 skinIndex;',\n\t\t\t'\tattribute vec4 skinWeight;',\n\n\t\t\t'#endif',\n\n\t\t\t'\\n'\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tprefixFragment = [\n\n\t\t\tcustomExtensions,\n\n\t\t\t'precision ' + parameters.precision + ' float;',\n\t\t\t'precision ' + parameters.precision + ' int;',\n\n\t\t\t'#define SHADER_NAME ' + shader.name,\n\n\t\t\tcustomDefines,\n\n\t\t\tparameters.alphaTest ? '#define ALPHATEST ' + parameters.alphaTest : '',\n\n\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\n\n\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\n\t\t\t( parameters.useFog && parameters.fogExp ) ? '#define FOG_EXP2' : '',\n\n\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\tparameters.envMap ? '#define ' + envMapTypeDefine : '',\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\tparameters.envMap ? '#define ' + envMapBlendingDefine : '',\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\n\n\t\t\tparameters.gradientMap ? '#define USE_GRADIENTMAP' : '',\n\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\n\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\t'#define NUM_CLIPPING_PLANES ' + parameters.numClippingPlanes,\n\t\t\t'#define UNION_CLIPPING_PLANES ' + ( parameters.numClippingPlanes - parameters.numClipIntersection ),\n\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\n\t\t\tparameters.premultipliedAlpha ? '#define PREMULTIPLIED_ALPHA' : '',\n\n\t\t\tparameters.physicallyCorrectLights ? '#define PHYSICALLY_CORRECT_LIGHTS' : '',\n\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\tparameters.logarithmicDepthBuffer && extensions.get( 'EXT_frag_depth' ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\tparameters.envMap && extensions.get( 'EXT_shader_texture_lod' ) ? '#define TEXTURE_LOD_EXT' : '',\n\n\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t'uniform vec3 cameraPosition;',\n\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? '#define TONE_MAPPING' : '',\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? ShaderChunk[ 'tonemapping_pars_fragment' ] : '', // this code is required here because it is used by the toneMapping() function defined below\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? getToneMappingFunction( 'toneMapping', parameters.toneMapping ) : '',\n\n\t\t\tparameters.dithering ? '#define DITHERING' : '',\n\n\t\t\t( parameters.outputEncoding || parameters.mapEncoding || parameters.envMapEncoding || parameters.emissiveMapEncoding ) ? ShaderChunk[ 'encodings_pars_fragment' ] : '', // this code is required here because it is used by the various encoding/decoding function defined below\n\t\t\tparameters.mapEncoding ? getTexelDecodingFunction( 'mapTexelToLinear', parameters.mapEncoding ) : '',\n\t\t\tparameters.envMapEncoding ? getTexelDecodingFunction( 'envMapTexelToLinear', parameters.envMapEncoding ) : '',\n\t\t\tparameters.emissiveMapEncoding ? getTexelDecodingFunction( 'emissiveMapTexelToLinear', parameters.emissiveMapEncoding ) : '',\n\t\t\tparameters.outputEncoding ? getTexelEncodingFunction( 'linearToOutputTexel', parameters.outputEncoding ) : '',\n\n\t\t\tparameters.depthPacking ? '#define DEPTH_PACKING ' + material.depthPacking : '',\n\n\t\t\t'\\n'\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t}\n\n\tvertexShader = parseIncludes( vertexShader );\n\tvertexShader = replaceLightNums( vertexShader, parameters );\n\n\tfragmentShader = parseIncludes( fragmentShader );\n\tfragmentShader = replaceLightNums( fragmentShader, parameters );\n\n\tif ( ! material.isShaderMaterial ) {\n\n\t\tvertexShader = unrollLoops( vertexShader );\n\t\tfragmentShader = unrollLoops( fragmentShader );\n\n\t}\n\n\tvar vertexGlsl = prefixVertex + vertexShader;\n\tvar fragmentGlsl = prefixFragment + fragmentShader;\n\n\t// console.log( '*VERTEX*', vertexGlsl );\n\t// console.log( '*FRAGMENT*', fragmentGlsl );\n\n\tvar glVertexShader = WebGLShader( gl, gl.VERTEX_SHADER, vertexGlsl );\n\tvar glFragmentShader = WebGLShader( gl, gl.FRAGMENT_SHADER, fragmentGlsl );\n\n\tgl.attachShader( program, glVertexShader );\n\tgl.attachShader( program, glFragmentShader );\n\n\t// Force a particular attribute to index 0.\n\n\tif ( material.index0AttributeName !== undefined ) {\n\n\t\tgl.bindAttribLocation( program, 0, material.index0AttributeName );\n\n\t} else if ( parameters.morphTargets === true ) {\n\n\t\t// programs with morphTargets displace position out of attribute 0\n\t\tgl.bindAttribLocation( program, 0, 'position' );\n\n\t}\n\n\tgl.linkProgram( program );\n\n\tvar programLog = gl.getProgramInfoLog( program );\n\tvar vertexLog = gl.getShaderInfoLog( glVertexShader );\n\tvar fragmentLog = gl.getShaderInfoLog( glFragmentShader );\n\n\tvar runnable = true;\n\tvar haveDiagnostics = true;\n\n\t// console.log( '**VERTEX**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( glVertexShader ) );\n\t// console.log( '**FRAGMENT**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( glFragmentShader ) );\n\n\tif ( gl.getProgramParameter( program, gl.LINK_STATUS ) === false ) {\n\n\t\trunnable = false;\n\n\t\tconsole.error( 'THREE.WebGLProgram: shader error: ', gl.getError(), 'gl.VALIDATE_STATUS', gl.getProgramParameter( program, gl.VALIDATE_STATUS ), 'gl.getProgramInfoLog', programLog, vertexLog, fragmentLog );\n\n\t} else if ( programLog !== '' ) {\n\n\t\tconsole.warn( 'THREE.WebGLProgram: gl.getProgramInfoLog()', programLog );\n\n\t} else if ( vertexLog === '' || fragmentLog === '' ) {\n\n\t\thaveDiagnostics = false;\n\n\t}\n\n\tif ( haveDiagnostics ) {\n\n\t\tthis.diagnostics = {\n\n\t\t\trunnable: runnable,\n\t\t\tmaterial: material,\n\n\t\t\tprogramLog: programLog,\n\n\t\t\tvertexShader: {\n\n\t\t\t\tlog: vertexLog,\n\t\t\t\tprefix: prefixVertex\n\n\t\t\t},\n\n\t\t\tfragmentShader: {\n\n\t\t\t\tlog: fragmentLog,\n\t\t\t\tprefix: prefixFragment\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t// clean up\n\n\tgl.deleteShader( glVertexShader );\n\tgl.deleteShader( glFragmentShader );\n\n\t// set up caching for uniform locations\n\n\tvar cachedUniforms;\n\n\tthis.getUniforms = function () {\n\n\t\tif ( cachedUniforms === undefined ) {\n\n\t\t\tcachedUniforms = new WebGLUniforms( gl, program, renderer );\n\n\t\t}\n\n\t\treturn cachedUniforms;\n\n\t};\n\n\t// set up caching for attribute locations\n\n\tvar cachedAttributes;\n\n\tthis.getAttributes = function () {\n\n\t\tif ( cachedAttributes === undefined ) {\n\n\t\t\tcachedAttributes = fetchAttributeLocations( gl, program );\n\n\t\t}\n\n\t\treturn cachedAttributes;\n\n\t};\n\n\t// free resource\n\n\tthis.destroy = function () {\n\n\t\tgl.deleteProgram( program );\n\t\tthis.program = undefined;\n\n\t};\n\n\t// DEPRECATED\n\n\tObject.defineProperties( this, {\n\n\t\tuniforms: {\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLProgram: .uniforms is now .getUniforms().' );\n\t\t\t\treturn this.getUniforms();\n\n\t\t\t}\n\t\t},\n\n\t\tattributes: {\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLProgram: .attributes is now .getAttributes().' );\n\t\t\t\treturn this.getAttributes();\n\n\t\t\t}\n\t\t}\n\n\t} );\n\n\n\t//\n\n\tthis.id = programIdCount ++;\n\tthis.code = code;\n\tthis.usedTimes = 1;\n\tthis.program = program;\n\tthis.vertexShader = glVertexShader;\n\tthis.fragmentShader = glFragmentShader;\n\n\treturn this;\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLPrograms( renderer, extensions, capabilities ) {\n\n\tvar programs = [];\n\n\tvar shaderIDs = {\n\t\tMeshDepthMaterial: 'depth',\n\t\tMeshDistanceMaterial: 'distanceRGBA',\n\t\tMeshNormalMaterial: 'normal',\n\t\tMeshBasicMaterial: 'basic',\n\t\tMeshLambertMaterial: 'lambert',\n\t\tMeshPhongMaterial: 'phong',\n\t\tMeshToonMaterial: 'phong',\n\t\tMeshStandardMaterial: 'physical',\n\t\tMeshPhysicalMaterial: 'physical',\n\t\tLineBasicMaterial: 'basic',\n\t\tLineDashedMaterial: 'dashed',\n\t\tPointsMaterial: 'points',\n\t\tShadowMaterial: 'shadow'\n\t};\n\n\tvar parameterNames = [\n\t\t\"precision\", \"supportsVertexTextures\", \"map\", \"mapEncoding\", \"envMap\", \"envMapMode\", \"envMapEncoding\",\n\t\t\"lightMap\", \"aoMap\", \"emissiveMap\", \"emissiveMapEncoding\", \"bumpMap\", \"normalMap\", \"displacementMap\", \"specularMap\",\n\t\t\"roughnessMap\", \"metalnessMap\", \"gradientMap\",\n\t\t\"alphaMap\", \"combine\", \"vertexColors\", \"fog\", \"useFog\", \"fogExp\",\n\t\t\"flatShading\", \"sizeAttenuation\", \"logarithmicDepthBuffer\", \"skinning\",\n\t\t\"maxBones\", \"useVertexTexture\", \"morphTargets\", \"morphNormals\",\n\t\t\"maxMorphTargets\", \"maxMorphNormals\", \"premultipliedAlpha\",\n\t\t\"numDirLights\", \"numPointLights\", \"numSpotLights\", \"numHemiLights\", \"numRectAreaLights\",\n\t\t\"shadowMapEnabled\", \"shadowMapType\", \"toneMapping\", 'physicallyCorrectLights',\n\t\t\"alphaTest\", \"doubleSided\", \"flipSided\", \"numClippingPlanes\", \"numClipIntersection\", \"depthPacking\", \"dithering\"\n\t];\n\n\n\tfunction allocateBones( object ) {\n\n\t\tvar skeleton = object.skeleton;\n\t\tvar bones = skeleton.bones;\n\n\t\tif ( capabilities.floatVertexTextures ) {\n\n\t\t\treturn 1024;\n\n\t\t} else {\n\n\t\t\t// default for when object is not specified\n\t\t\t// ( for example when prebuilding shader to be used with multiple objects )\n\t\t\t//\n\t\t\t//  - leave some extra space for other uniforms\n\t\t\t//  - limit here is ANGLE's 254 max uniform vectors\n\t\t\t//    (up to 54 should be safe)\n\n\t\t\tvar nVertexUniforms = capabilities.maxVertexUniforms;\n\t\t\tvar nVertexMatrices = Math.floor( ( nVertexUniforms - 20 ) / 4 );\n\n\t\t\tvar maxBones = Math.min( nVertexMatrices, bones.length );\n\n\t\t\tif ( maxBones < bones.length ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Skeleton has ' + bones.length + ' bones. This GPU supports ' + maxBones + '.' );\n\t\t\t\treturn 0;\n\n\t\t\t}\n\n\t\t\treturn maxBones;\n\n\t\t}\n\n\t}\n\n\tfunction getTextureEncodingFromMap( map, gammaOverrideLinear ) {\n\n\t\tvar encoding;\n\n\t\tif ( ! map ) {\n\n\t\t\tencoding = LinearEncoding;\n\n\t\t} else if ( map.isTexture ) {\n\n\t\t\tencoding = map.encoding;\n\n\t\t} else if ( map.isWebGLRenderTarget ) {\n\n\t\t\tconsole.warn( \"THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.\" );\n\t\t\tencoding = map.texture.encoding;\n\n\t\t}\n\n\t\t// add backwards compatibility for WebGLRenderer.gammaInput/gammaOutput parameter, should probably be removed at some point.\n\t\tif ( encoding === LinearEncoding && gammaOverrideLinear ) {\n\n\t\t\tencoding = GammaEncoding;\n\n\t\t}\n\n\t\treturn encoding;\n\n\t}\n\n\tthis.getParameters = function ( material, lights, shadows, fog, nClipPlanes, nClipIntersection, object ) {\n\n\t\tvar shaderID = shaderIDs[ material.type ];\n\n\t\t// heuristics to create shader parameters according to lights in the scene\n\t\t// (not to blow over maxLights budget)\n\n\t\tvar maxBones = object.isSkinnedMesh ? allocateBones( object ) : 0;\n\t\tvar precision = capabilities.precision;\n\n\t\tif ( material.precision !== null ) {\n\n\t\t\tprecision = capabilities.getMaxPrecision( material.precision );\n\n\t\t\tif ( precision !== material.precision ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLProgram.getParameters:', material.precision, 'not supported, using', precision, 'instead.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar currentRenderTarget = renderer.getRenderTarget();\n\n\t\tvar parameters = {\n\n\t\t\tshaderID: shaderID,\n\n\t\t\tprecision: precision,\n\t\t\tsupportsVertexTextures: capabilities.vertexTextures,\n\t\t\toutputEncoding: getTextureEncodingFromMap( ( ! currentRenderTarget ) ? null : currentRenderTarget.texture, renderer.gammaOutput ),\n\t\t\tmap: !! material.map,\n\t\t\tmapEncoding: getTextureEncodingFromMap( material.map, renderer.gammaInput ),\n\t\t\tenvMap: !! material.envMap,\n\t\t\tenvMapMode: material.envMap && material.envMap.mapping,\n\t\t\tenvMapEncoding: getTextureEncodingFromMap( material.envMap, renderer.gammaInput ),\n\t\t\tenvMapCubeUV: ( !! material.envMap ) && ( ( material.envMap.mapping === CubeUVReflectionMapping ) || ( material.envMap.mapping === CubeUVRefractionMapping ) ),\n\t\t\tlightMap: !! material.lightMap,\n\t\t\taoMap: !! material.aoMap,\n\t\t\temissiveMap: !! material.emissiveMap,\n\t\t\temissiveMapEncoding: getTextureEncodingFromMap( material.emissiveMap, renderer.gammaInput ),\n\t\t\tbumpMap: !! material.bumpMap,\n\t\t\tnormalMap: !! material.normalMap,\n\t\t\tdisplacementMap: !! material.displacementMap,\n\t\t\troughnessMap: !! material.roughnessMap,\n\t\t\tmetalnessMap: !! material.metalnessMap,\n\t\t\tspecularMap: !! material.specularMap,\n\t\t\talphaMap: !! material.alphaMap,\n\n\t\t\tgradientMap: !! material.gradientMap,\n\n\t\t\tcombine: material.combine,\n\n\t\t\tvertexColors: material.vertexColors,\n\n\t\t\tfog: !! fog,\n\t\t\tuseFog: material.fog,\n\t\t\tfogExp: ( fog && fog.isFogExp2 ),\n\n\t\t\tflatShading: material.flatShading,\n\n\t\t\tsizeAttenuation: material.sizeAttenuation,\n\t\t\tlogarithmicDepthBuffer: capabilities.logarithmicDepthBuffer,\n\n\t\t\tskinning: material.skinning && maxBones > 0,\n\t\t\tmaxBones: maxBones,\n\t\t\tuseVertexTexture: capabilities.floatVertexTextures,\n\n\t\t\tmorphTargets: material.morphTargets,\n\t\t\tmorphNormals: material.morphNormals,\n\t\t\tmaxMorphTargets: renderer.maxMorphTargets,\n\t\t\tmaxMorphNormals: renderer.maxMorphNormals,\n\n\t\t\tnumDirLights: lights.directional.length,\n\t\t\tnumPointLights: lights.point.length,\n\t\t\tnumSpotLights: lights.spot.length,\n\t\t\tnumRectAreaLights: lights.rectArea.length,\n\t\t\tnumHemiLights: lights.hemi.length,\n\n\t\t\tnumClippingPlanes: nClipPlanes,\n\t\t\tnumClipIntersection: nClipIntersection,\n\n\t\t\tdithering: material.dithering,\n\n\t\t\tshadowMapEnabled: renderer.shadowMap.enabled && object.receiveShadow && shadows.length > 0,\n\t\t\tshadowMapType: renderer.shadowMap.type,\n\n\t\t\ttoneMapping: renderer.toneMapping,\n\t\t\tphysicallyCorrectLights: renderer.physicallyCorrectLights,\n\n\t\t\tpremultipliedAlpha: material.premultipliedAlpha,\n\n\t\t\talphaTest: material.alphaTest,\n\t\t\tdoubleSided: material.side === DoubleSide,\n\t\t\tflipSided: material.side === BackSide,\n\n\t\t\tdepthPacking: ( material.depthPacking !== undefined ) ? material.depthPacking : false\n\n\t\t};\n\n\t\treturn parameters;\n\n\t};\n\n\tthis.getProgramCode = function ( material, parameters ) {\n\n\t\tvar array = [];\n\n\t\tif ( parameters.shaderID ) {\n\n\t\t\tarray.push( parameters.shaderID );\n\n\t\t} else {\n\n\t\t\tarray.push( material.fragmentShader );\n\t\t\tarray.push( material.vertexShader );\n\n\t\t}\n\n\t\tif ( material.defines !== undefined ) {\n\n\t\t\tfor ( var name in material.defines ) {\n\n\t\t\t\tarray.push( name );\n\t\t\t\tarray.push( material.defines[ name ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( var i = 0; i < parameterNames.length; i ++ ) {\n\n\t\t\tarray.push( parameters[ parameterNames[ i ] ] );\n\n\t\t}\n\n\t\tarray.push( material.onBeforeCompile.toString() );\n\n\t\tarray.push( renderer.gammaOutput );\n\n\t\treturn array.join();\n\n\t};\n\n\tthis.acquireProgram = function ( material, shader, parameters, code ) {\n\n\t\tvar program;\n\n\t\t// Check if code has been already compiled\n\t\tfor ( var p = 0, pl = programs.length; p < pl; p ++ ) {\n\n\t\t\tvar programInfo = programs[ p ];\n\n\t\t\tif ( programInfo.code === code ) {\n\n\t\t\t\tprogram = programInfo;\n\t\t\t\t++ program.usedTimes;\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( program === undefined ) {\n\n\t\t\tprogram = new WebGLProgram( renderer, extensions, code, material, shader, parameters );\n\t\t\tprograms.push( program );\n\n\t\t}\n\n\t\treturn program;\n\n\t};\n\n\tthis.releaseProgram = function ( program ) {\n\n\t\tif ( -- program.usedTimes === 0 ) {\n\n\t\t\t// Remove from unordered set\n\t\t\tvar i = programs.indexOf( program );\n\t\t\tprograms[ i ] = programs[ programs.length - 1 ];\n\t\t\tprograms.pop();\n\n\t\t\t// Free WebGL resources\n\t\t\tprogram.destroy();\n\n\t\t}\n\n\t};\n\n\t// Exposed for resource monitoring & error feedback via renderer.info:\n\tthis.programs = programs;\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLTextures( _gl, extensions, state, properties, capabilities, utils, infoMemory ) {\n\n\tvar _isWebGL2 = ( typeof WebGL2RenderingContext !== 'undefined' && _gl instanceof window.WebGL2RenderingContext );\n\tvar _videoTextures = {};\n\n\t//\n\n\tfunction clampToMaxSize( image, maxSize ) {\n\n\t\tif ( image.width > maxSize || image.height > maxSize ) {\n\n\t\t\t// Warning: Scaling through the canvas will only work with images that use\n\t\t\t// premultiplied alpha.\n\n\t\t\tvar scale = maxSize / Math.max( image.width, image.height );\n\n\t\t\tvar canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\t\t\tcanvas.width = Math.floor( image.width * scale );\n\t\t\tcanvas.height = Math.floor( image.height * scale );\n\n\t\t\tvar context = canvas.getContext( '2d' );\n\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height, 0, 0, canvas.width, canvas.height );\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: image is too big (' + image.width + 'x' + image.height + '). Resized to ' + canvas.width + 'x' + canvas.height, image );\n\n\t\t\treturn canvas;\n\n\t\t}\n\n\t\treturn image;\n\n\t}\n\n\tfunction isPowerOfTwo( image ) {\n\n\t\treturn _Math.isPowerOfTwo( image.width ) && _Math.isPowerOfTwo( image.height );\n\n\t}\n\n\tfunction makePowerOfTwo( image ) {\n\n\t\tif ( image instanceof HTMLImageElement || image instanceof HTMLCanvasElement || image instanceof ImageBitmap ) {\n\n\t\t\tvar canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\t\t\tcanvas.width = _Math.floorPowerOfTwo( image.width );\n\t\t\tcanvas.height = _Math.floorPowerOfTwo( image.height );\n\n\t\t\tvar context = canvas.getContext( '2d' );\n\t\t\tcontext.drawImage( image, 0, 0, canvas.width, canvas.height );\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: image is not power of two (' + image.width + 'x' + image.height + '). Resized to ' + canvas.width + 'x' + canvas.height, image );\n\n\t\t\treturn canvas;\n\n\t\t}\n\n\t\treturn image;\n\n\t}\n\n\tfunction textureNeedsPowerOfTwo( texture ) {\n\n\t\treturn ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) ||\n\t\t\t( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter );\n\n\t}\n\n\tfunction textureNeedsGenerateMipmaps( texture, isPowerOfTwo ) {\n\n\t\treturn texture.generateMipmaps && isPowerOfTwo &&\n\t\t\ttexture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter;\n\n\t}\n\n\t// Fallback filters for non-power-of-2 textures\n\n\tfunction filterFallback( f ) {\n\n\t\tif ( f === NearestFilter || f === NearestMipMapNearestFilter || f === NearestMipMapLinearFilter ) {\n\n\t\t\treturn _gl.NEAREST;\n\n\t\t}\n\n\t\treturn _gl.LINEAR;\n\n\t}\n\n\t//\n\n\tfunction onTextureDispose( event ) {\n\n\t\tvar texture = event.target;\n\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\n\n\t\tdeallocateTexture( texture );\n\n\t\tif ( texture.isVideoTexture ) {\n\n\t\t\tdelete _videoTextures[ texture.id ];\n\n\t\t}\n\n\t\tinfoMemory.textures --;\n\n\t}\n\n\tfunction onRenderTargetDispose( event ) {\n\n\t\tvar renderTarget = event.target;\n\n\t\trenderTarget.removeEventListener( 'dispose', onRenderTargetDispose );\n\n\t\tdeallocateRenderTarget( renderTarget );\n\n\t\tinfoMemory.textures --;\n\n\t}\n\n\t//\n\n\tfunction deallocateTexture( texture ) {\n\n\t\tvar textureProperties = properties.get( texture );\n\n\t\tif ( texture.image && textureProperties.__image__webglTextureCube ) {\n\n\t\t\t// cube texture\n\n\t\t\t_gl.deleteTexture( textureProperties.__image__webglTextureCube );\n\n\t\t} else {\n\n\t\t\t// 2D texture\n\n\t\t\tif ( textureProperties.__webglInit === undefined ) return;\n\n\t\t\t_gl.deleteTexture( textureProperties.__webglTexture );\n\n\t\t}\n\n\t\t// remove all webgl properties\n\t\tproperties.remove( texture );\n\n\t}\n\n\tfunction deallocateRenderTarget( renderTarget ) {\n\n\t\tvar renderTargetProperties = properties.get( renderTarget );\n\t\tvar textureProperties = properties.get( renderTarget.texture );\n\n\t\tif ( ! renderTarget ) return;\n\n\t\tif ( textureProperties.__webglTexture !== undefined ) {\n\n\t\t\t_gl.deleteTexture( textureProperties.__webglTexture );\n\n\t\t}\n\n\t\tif ( renderTarget.depthTexture ) {\n\n\t\t\trenderTarget.depthTexture.dispose();\n\n\t\t}\n\n\t\tif ( renderTarget.isWebGLRenderTargetCube ) {\n\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer[ i ] );\n\t\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer[ i ] );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer );\n\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer );\n\n\t\t}\n\n\t\tproperties.remove( renderTarget.texture );\n\t\tproperties.remove( renderTarget );\n\n\t}\n\n\t//\n\n\n\n\tfunction setTexture2D( texture, slot ) {\n\n\t\tvar textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tvar image = texture.image;\n\n\t\t\tif ( image === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is undefined', texture );\n\n\t\t\t} else if ( image.complete === false ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is incomplete', texture );\n\n\t\t\t} else {\n\n\t\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\n\n\t}\n\n\tfunction setTextureCube( texture, slot ) {\n\n\t\tvar textureProperties = properties.get( texture );\n\n\t\tif ( texture.image.length === 6 ) {\n\n\t\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\t\tif ( ! textureProperties.__image__webglTextureCube ) {\n\n\t\t\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t\t\t\ttextureProperties.__image__webglTextureCube = _gl.createTexture();\n\n\t\t\t\t\tinfoMemory.textures ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__image__webglTextureCube );\n\n\t\t\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\n\n\t\t\t\tvar isCompressed = ( texture && texture.isCompressedTexture );\n\t\t\t\tvar isDataTexture = ( texture.image[ 0 ] && texture.image[ 0 ].isDataTexture );\n\n\t\t\t\tvar cubeImage = [];\n\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\tif ( ! isCompressed && ! isDataTexture ) {\n\n\t\t\t\t\t\tcubeImage[ i ] = clampToMaxSize( texture.image[ i ], capabilities.maxCubemapSize );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tcubeImage[ i ] = isDataTexture ? texture.image[ i ].image : texture.image[ i ];\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tvar image = cubeImage[ 0 ],\n\t\t\t\t\tisPowerOfTwoImage = isPowerOfTwo( image ),\n\t\t\t\t\tglFormat = utils.convert( texture.format ),\n\t\t\t\t\tglType = utils.convert( texture.type );\n\n\t\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, texture, isPowerOfTwoImage );\n\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\tif ( ! isCompressed ) {\n\n\t\t\t\t\t\tif ( isDataTexture ) {\n\n\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, cubeImage[ i ].width, cubeImage[ i ].height, 0, glFormat, glType, cubeImage[ i ].data );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, glFormat, glType, cubeImage[ i ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tvar mipmap, mipmaps = cubeImage[ i ].mipmaps;\n\n\t\t\t\t\t\tfor ( var j = 0, jl = mipmaps.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tmipmap = mipmaps[ j ];\n\n\t\t\t\t\t\t\tif ( texture.format !== RGBAFormat && texture.format !== RGBFormat ) {\n\n\t\t\t\t\t\t\t\tif ( state.getCompressedTextureFormats().indexOf( glFormat ) > - 1 ) {\n\n\t\t\t\t\t\t\t\t\tstate.compressedTexImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()' );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( textureNeedsGenerateMipmaps( texture, isPowerOfTwoImage ) ) {\n\n\t\t\t\t\t_gl.generateMipmap( _gl.TEXTURE_CUBE_MAP );\n\n\t\t\t\t}\n\n\t\t\t\ttextureProperties.__version = texture.version;\n\n\t\t\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t\t\t} else {\n\n\t\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__image__webglTextureCube );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction setTextureCubeDynamic( texture, slot ) {\n\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, properties.get( texture ).__webglTexture );\n\n\t}\n\n\tfunction setTextureParameters( textureType, texture, isPowerOfTwoImage ) {\n\n\t\tvar extension;\n\n\t\tif ( isPowerOfTwoImage ) {\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, utils.convert( texture.wrapS ) );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, utils.convert( texture.wrapT ) );\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, utils.convert( texture.magFilter ) );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, utils.convert( texture.minFilter ) );\n\n\t\t} else {\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, _gl.CLAMP_TO_EDGE );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, _gl.CLAMP_TO_EDGE );\n\n\t\t\tif ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.', texture );\n\n\t\t\t}\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, filterFallback( texture.magFilter ) );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, filterFallback( texture.minFilter ) );\n\n\t\t\tif ( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.', texture );\n\n\t\t\t}\n\n\t\t}\n\n\t\textension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\tif ( extension ) {\n\n\t\t\tif ( texture.type === FloatType && extensions.get( 'OES_texture_float_linear' ) === null ) return;\n\t\t\tif ( texture.type === HalfFloatType && extensions.get( 'OES_texture_half_float_linear' ) === null ) return;\n\n\t\t\tif ( texture.anisotropy > 1 || properties.get( texture ).__currentAnisotropy ) {\n\n\t\t\t\t_gl.texParameterf( textureType, extension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min( texture.anisotropy, capabilities.getMaxAnisotropy() ) );\n\t\t\t\tproperties.get( texture ).__currentAnisotropy = texture.anisotropy;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction uploadTexture( textureProperties, texture, slot ) {\n\n\t\tif ( textureProperties.__webglInit === undefined ) {\n\n\t\t\ttextureProperties.__webglInit = true;\n\n\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t\ttextureProperties.__webglTexture = _gl.createTexture();\n\n\t\t\tif ( texture.isVideoTexture ) {\n\n\t\t\t\t_videoTextures[ texture.id ] = texture;\n\n\t\t\t}\n\n\t\t\tinfoMemory.textures ++;\n\n\t\t}\n\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\n\n\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\n\t\t_gl.pixelStorei( _gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, texture.premultiplyAlpha );\n\t\t_gl.pixelStorei( _gl.UNPACK_ALIGNMENT, texture.unpackAlignment );\n\n\t\tvar image = clampToMaxSize( texture.image, capabilities.maxTextureSize );\n\n\t\tif ( textureNeedsPowerOfTwo( texture ) && isPowerOfTwo( image ) === false ) {\n\n\t\t\timage = makePowerOfTwo( image );\n\n\t\t}\n\n\t\tvar isPowerOfTwoImage = isPowerOfTwo( image ),\n\t\t\tglFormat = utils.convert( texture.format ),\n\t\t\tglType = utils.convert( texture.type );\n\n\t\tsetTextureParameters( _gl.TEXTURE_2D, texture, isPowerOfTwoImage );\n\n\t\tvar mipmap, mipmaps = texture.mipmaps;\n\n\t\tif ( texture.isDepthTexture ) {\n\n\t\t\t// populate depth texture with dummy data\n\n\t\t\tvar internalFormat = _gl.DEPTH_COMPONENT;\n\n\t\t\tif ( texture.type === FloatType ) {\n\n\t\t\t\tif ( ! _isWebGL2 ) throw new Error( 'Float Depth Texture only supported in WebGL2.0' );\n\t\t\t\tinternalFormat = _gl.DEPTH_COMPONENT32F;\n\n\t\t\t} else if ( _isWebGL2 ) {\n\n\t\t\t\t// WebGL 2.0 requires signed internalformat for glTexImage2D\n\t\t\t\tinternalFormat = _gl.DEPTH_COMPONENT16;\n\n\t\t\t}\n\n\t\t\tif ( texture.format === DepthFormat && internalFormat === _gl.DEPTH_COMPONENT ) {\n\n\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n\t\t\t\t// DEPTH_COMPONENT and type is not UNSIGNED_SHORT or UNSIGNED_INT\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\tif ( texture.type !== UnsignedShortType && texture.type !== UnsignedIntType ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.' );\n\n\t\t\t\t\ttexture.type = UnsignedShortType;\n\t\t\t\t\tglType = utils.convert( texture.type );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Depth stencil textures need the DEPTH_STENCIL internal format\n\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\tif ( texture.format === DepthStencilFormat ) {\n\n\t\t\t\tinternalFormat = _gl.DEPTH_STENCIL;\n\n\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n\t\t\t\t// DEPTH_STENCIL and type is not UNSIGNED_INT_24_8_WEBGL.\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\tif ( texture.type !== UnsignedInt248Type ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.' );\n\n\t\t\t\t\ttexture.type = UnsignedInt248Type;\n\t\t\t\t\tglType = utils.convert( texture.type );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, internalFormat, image.width, image.height, 0, glFormat, glType, null );\n\n\t\t} else if ( texture.isDataTexture ) {\n\n\t\t\t// use manually created mipmaps if available\n\t\t\t// if there are no manual mipmaps\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\tif ( mipmaps.length > 0 && isPowerOfTwoImage ) {\n\n\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\tmipmap = mipmaps[ i ];\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t}\n\n\t\t\t\ttexture.generateMipmaps = false;\n\n\t\t\t} else {\n\n\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glFormat, image.width, image.height, 0, glFormat, glType, image.data );\n\n\t\t\t}\n\n\t\t} else if ( texture.isCompressedTexture ) {\n\n\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\tmipmap = mipmaps[ i ];\n\n\t\t\t\tif ( texture.format !== RGBAFormat && texture.format !== RGBFormat ) {\n\n\t\t\t\t\tif ( state.getCompressedTextureFormats().indexOf( glFormat ) > - 1 ) {\n\n\t\t\t\t\t\tstate.compressedTexImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()' );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// regular Texture (image, video, canvas)\n\n\t\t\t// use manually created mipmaps if available\n\t\t\t// if there are no manual mipmaps\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\tif ( mipmaps.length > 0 && isPowerOfTwoImage ) {\n\n\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\tmipmap = mipmaps[ i ];\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glFormat, glFormat, glType, mipmap );\n\n\t\t\t\t}\n\n\t\t\t\ttexture.generateMipmaps = false;\n\n\t\t\t} else {\n\n\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glFormat, glFormat, glType, image );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( textureNeedsGenerateMipmaps( texture, isPowerOfTwoImage ) ) _gl.generateMipmap( _gl.TEXTURE_2D );\n\n\t\ttextureProperties.__version = texture.version;\n\n\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t}\n\n\t// Render targets\n\n\t// Setup storage for target texture and bind it to correct framebuffer\n\tfunction setupFrameBufferTexture( framebuffer, renderTarget, attachment, textureTarget ) {\n\n\t\tvar glFormat = utils.convert( renderTarget.texture.format );\n\t\tvar glType = utils.convert( renderTarget.texture.type );\n\t\tstate.texImage2D( textureTarget, 0, glFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, attachment, textureTarget, properties.get( renderTarget.texture ).__webglTexture, 0 );\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\n\n\t}\n\n\t// Setup storage for internal depth/stencil buffers and bind to correct framebuffer\n\tfunction setupRenderBufferStorage( renderbuffer, renderTarget ) {\n\n\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, renderbuffer );\n\n\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\n\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_COMPONENT16, renderTarget.width, renderTarget.height );\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\n\n\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\n\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_STENCIL, renderTarget.width, renderTarget.height );\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\n\n\t\t} else {\n\n\t\t\t// FIXME: We don't support !depth !stencil\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.RGBA4, renderTarget.width, renderTarget.height );\n\n\t\t}\n\n\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, null );\n\n\t}\n\n\t// Setup resources for a Depth Texture for a FBO (needs an extension)\n\tfunction setupDepthTexture( framebuffer, renderTarget ) {\n\n\t\tvar isCube = ( renderTarget && renderTarget.isWebGLRenderTargetCube );\n\t\tif ( isCube ) throw new Error( 'Depth Texture with cube render targets is not supported' );\n\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\n\t\tif ( ! ( renderTarget.depthTexture && renderTarget.depthTexture.isDepthTexture ) ) {\n\n\t\t\tthrow new Error( 'renderTarget.depthTexture must be an instance of THREE.DepthTexture' );\n\n\t\t}\n\n\t\t// upload an empty depth texture with framebuffer size\n\t\tif ( ! properties.get( renderTarget.depthTexture ).__webglTexture ||\n\t\t\t\trenderTarget.depthTexture.image.width !== renderTarget.width ||\n\t\t\t\trenderTarget.depthTexture.image.height !== renderTarget.height ) {\n\n\t\t\trenderTarget.depthTexture.image.width = renderTarget.width;\n\t\t\trenderTarget.depthTexture.image.height = renderTarget.height;\n\t\t\trenderTarget.depthTexture.needsUpdate = true;\n\n\t\t}\n\n\t\tsetTexture2D( renderTarget.depthTexture, 0 );\n\n\t\tvar webglDepthTexture = properties.get( renderTarget.depthTexture ).__webglTexture;\n\n\t\tif ( renderTarget.depthTexture.format === DepthFormat ) {\n\n\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.TEXTURE_2D, webglDepthTexture, 0 );\n\n\t\t} else if ( renderTarget.depthTexture.format === DepthStencilFormat ) {\n\n\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.TEXTURE_2D, webglDepthTexture, 0 );\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'Unknown depthTexture format' );\n\n\t\t}\n\n\t}\n\n\t// Setup GL resources for a non-texture depth buffer\n\tfunction setupDepthRenderbuffer( renderTarget ) {\n\n\t\tvar renderTargetProperties = properties.get( renderTarget );\n\n\t\tvar isCube = ( renderTarget.isWebGLRenderTargetCube === true );\n\n\t\tif ( renderTarget.depthTexture ) {\n\n\t\t\tif ( isCube ) throw new Error( 'target.depthTexture not supported in Cube render targets' );\n\n\t\t\tsetupDepthTexture( renderTargetProperties.__webglFramebuffer, renderTarget );\n\n\t\t} else {\n\n\t\t\tif ( isCube ) {\n\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = [];\n\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer[ i ] );\n\t\t\t\t\trenderTargetProperties.__webglDepthbuffer[ i ] = _gl.createRenderbuffer();\n\t\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer[ i ], renderTarget );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer );\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = _gl.createRenderbuffer();\n\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer, renderTarget );\n\n\t\t\t}\n\n\t\t}\n\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\n\n\t}\n\n\t// Set up GL resources for the render target\n\tfunction setupRenderTarget( renderTarget ) {\n\n\t\tvar renderTargetProperties = properties.get( renderTarget );\n\t\tvar textureProperties = properties.get( renderTarget.texture );\n\n\t\trenderTarget.addEventListener( 'dispose', onRenderTargetDispose );\n\n\t\ttextureProperties.__webglTexture = _gl.createTexture();\n\n\t\tinfoMemory.textures ++;\n\n\t\tvar isCube = ( renderTarget.isWebGLRenderTargetCube === true );\n\t\tvar isTargetPowerOfTwo = isPowerOfTwo( renderTarget );\n\n\t\t// Setup framebuffer\n\n\t\tif ( isCube ) {\n\n\t\t\trenderTargetProperties.__webglFramebuffer = [];\n\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\trenderTargetProperties.__webglFramebuffer[ i ] = _gl.createFramebuffer();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\trenderTargetProperties.__webglFramebuffer = _gl.createFramebuffer();\n\n\t\t}\n\n\t\t// Setup color buffer\n\n\t\tif ( isCube ) {\n\n\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__webglTexture );\n\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, renderTarget.texture, isTargetPowerOfTwo );\n\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer[ i ], renderTarget, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i );\n\n\t\t\t}\n\n\t\t\tif ( textureNeedsGenerateMipmaps( renderTarget.texture, isTargetPowerOfTwo ) ) _gl.generateMipmap( _gl.TEXTURE_CUBE_MAP );\n\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, null );\n\n\t\t} else {\n\n\t\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\n\t\t\tsetTextureParameters( _gl.TEXTURE_2D, renderTarget.texture, isTargetPowerOfTwo );\n\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer, renderTarget, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_2D );\n\n\t\t\tif ( textureNeedsGenerateMipmaps( renderTarget.texture, isTargetPowerOfTwo ) ) _gl.generateMipmap( _gl.TEXTURE_2D );\n\t\t\tstate.bindTexture( _gl.TEXTURE_2D, null );\n\n\t\t}\n\n\t\t// Setup depth and stencil buffers\n\n\t\tif ( renderTarget.depthBuffer ) {\n\n\t\t\tsetupDepthRenderbuffer( renderTarget );\n\n\t\t}\n\n\t}\n\n\tfunction updateRenderTargetMipmap( renderTarget ) {\n\n\t\tvar texture = renderTarget.texture;\n\t\tvar isTargetPowerOfTwo = isPowerOfTwo( renderTarget );\n\n\t\tif ( textureNeedsGenerateMipmaps( texture, isTargetPowerOfTwo ) ) {\n\n\t\t\tvar target = renderTarget.isWebGLRenderTargetCube ? _gl.TEXTURE_CUBE_MAP : _gl.TEXTURE_2D;\n\t\t\tvar webglTexture = properties.get( texture ).__webglTexture;\n\n\t\t\tstate.bindTexture( target, webglTexture );\n\t\t\t_gl.generateMipmap( target );\n\t\t\tstate.bindTexture( target, null );\n\n\t\t}\n\n\t}\n\n\tfunction updateVideoTextures() {\n\n\t\tfor ( var id in _videoTextures ) {\n\n\t\t\t_videoTextures[ id ].update();\n\n\t\t}\n\n\t}\n\n\tthis.setTexture2D = setTexture2D;\n\tthis.setTextureCube = setTextureCube;\n\tthis.setTextureCubeDynamic = setTextureCubeDynamic;\n\tthis.setupRenderTarget = setupRenderTarget;\n\tthis.updateRenderTargetMipmap = updateRenderTargetMipmap;\n\tthis.updateVideoTextures = updateVideoTextures;\n\n}\n\n/**\n * @author fordacious / fordacious.github.io\n */\n\nfunction WebGLProperties() {\n\n\tvar properties = {};\n\n\tfunction get( object ) {\n\n\t\tvar uuid = object.uuid;\n\t\tvar map = properties[ uuid ];\n\n\t\tif ( map === undefined ) {\n\n\t\t\tmap = {};\n\t\t\tproperties[ uuid ] = map;\n\n\t\t}\n\n\t\treturn map;\n\n\t}\n\n\tfunction remove( object ) {\n\n\t\tdelete properties[ object.uuid ];\n\n\t}\n\n\tfunction clear() {\n\n\t\tproperties = {};\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tremove: remove,\n\t\tclear: clear\n\t};\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLState( gl, extensions, utils ) {\n\n\tfunction ColorBuffer() {\n\n\t\tvar locked = false;\n\n\t\tvar color = new Vector4();\n\t\tvar currentColorMask = null;\n\t\tvar currentColorClear = new Vector4( 0, 0, 0, 0 );\n\n\t\treturn {\n\n\t\t\tsetMask: function ( colorMask ) {\n\n\t\t\t\tif ( currentColorMask !== colorMask && ! locked ) {\n\n\t\t\t\t\tgl.colorMask( colorMask, colorMask, colorMask, colorMask );\n\t\t\t\t\tcurrentColorMask = colorMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( r, g, b, a, premultipliedAlpha ) {\n\n\t\t\t\tif ( premultipliedAlpha === true ) {\n\n\t\t\t\t\tr *= a; g *= a; b *= a;\n\n\t\t\t\t}\n\n\t\t\t\tcolor.set( r, g, b, a );\n\n\t\t\t\tif ( currentColorClear.equals( color ) === false ) {\n\n\t\t\t\t\tgl.clearColor( r, g, b, a );\n\t\t\t\t\tcurrentColorClear.copy( color );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentColorMask = null;\n\t\t\t\tcurrentColorClear.set( - 1, 0, 0, 0 ); // set to invalid state\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tfunction DepthBuffer() {\n\n\t\tvar locked = false;\n\n\t\tvar currentDepthMask = null;\n\t\tvar currentDepthFunc = null;\n\t\tvar currentDepthClear = null;\n\n\t\treturn {\n\n\t\t\tsetTest: function ( depthTest ) {\n\n\t\t\t\tif ( depthTest ) {\n\n\t\t\t\t\tenable( gl.DEPTH_TEST );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tdisable( gl.DEPTH_TEST );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetMask: function ( depthMask ) {\n\n\t\t\t\tif ( currentDepthMask !== depthMask && ! locked ) {\n\n\t\t\t\t\tgl.depthMask( depthMask );\n\t\t\t\t\tcurrentDepthMask = depthMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetFunc: function ( depthFunc ) {\n\n\t\t\t\tif ( currentDepthFunc !== depthFunc ) {\n\n\t\t\t\t\tif ( depthFunc ) {\n\n\t\t\t\t\t\tswitch ( depthFunc ) {\n\n\t\t\t\t\t\t\tcase NeverDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.NEVER );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase AlwaysDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.ALWAYS );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase LessDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.LESS );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase LessEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase EqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.EQUAL );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase GreaterEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.GEQUAL );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase GreaterDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.GREATER );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase NotEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.NOTEQUAL );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcurrentDepthFunc = depthFunc;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( depth ) {\n\n\t\t\t\tif ( currentDepthClear !== depth ) {\n\n\t\t\t\t\tgl.clearDepth( depth );\n\t\t\t\t\tcurrentDepthClear = depth;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentDepthMask = null;\n\t\t\t\tcurrentDepthFunc = null;\n\t\t\t\tcurrentDepthClear = null;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tfunction StencilBuffer() {\n\n\t\tvar locked = false;\n\n\t\tvar currentStencilMask = null;\n\t\tvar currentStencilFunc = null;\n\t\tvar currentStencilRef = null;\n\t\tvar currentStencilFuncMask = null;\n\t\tvar currentStencilFail = null;\n\t\tvar currentStencilZFail = null;\n\t\tvar currentStencilZPass = null;\n\t\tvar currentStencilClear = null;\n\n\t\treturn {\n\n\t\t\tsetTest: function ( stencilTest ) {\n\n\t\t\t\tif ( stencilTest ) {\n\n\t\t\t\t\tenable( gl.STENCIL_TEST );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tdisable( gl.STENCIL_TEST );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetMask: function ( stencilMask ) {\n\n\t\t\t\tif ( currentStencilMask !== stencilMask && ! locked ) {\n\n\t\t\t\t\tgl.stencilMask( stencilMask );\n\t\t\t\t\tcurrentStencilMask = stencilMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetFunc: function ( stencilFunc, stencilRef, stencilMask ) {\n\n\t\t\t\tif ( currentStencilFunc !== stencilFunc ||\n\t\t\t\t     currentStencilRef \t!== stencilRef \t||\n\t\t\t\t     currentStencilFuncMask !== stencilMask ) {\n\n\t\t\t\t\tgl.stencilFunc( stencilFunc, stencilRef, stencilMask );\n\n\t\t\t\t\tcurrentStencilFunc = stencilFunc;\n\t\t\t\t\tcurrentStencilRef = stencilRef;\n\t\t\t\t\tcurrentStencilFuncMask = stencilMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetOp: function ( stencilFail, stencilZFail, stencilZPass ) {\n\n\t\t\t\tif ( currentStencilFail\t !== stencilFail \t||\n\t\t\t\t     currentStencilZFail !== stencilZFail ||\n\t\t\t\t     currentStencilZPass !== stencilZPass ) {\n\n\t\t\t\t\tgl.stencilOp( stencilFail, stencilZFail, stencilZPass );\n\n\t\t\t\t\tcurrentStencilFail = stencilFail;\n\t\t\t\t\tcurrentStencilZFail = stencilZFail;\n\t\t\t\t\tcurrentStencilZPass = stencilZPass;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( stencil ) {\n\n\t\t\t\tif ( currentStencilClear !== stencil ) {\n\n\t\t\t\t\tgl.clearStencil( stencil );\n\t\t\t\t\tcurrentStencilClear = stencil;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentStencilMask = null;\n\t\t\t\tcurrentStencilFunc = null;\n\t\t\t\tcurrentStencilRef = null;\n\t\t\t\tcurrentStencilFuncMask = null;\n\t\t\t\tcurrentStencilFail = null;\n\t\t\t\tcurrentStencilZFail = null;\n\t\t\t\tcurrentStencilZPass = null;\n\t\t\t\tcurrentStencilClear = null;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t//\n\n\tvar colorBuffer = new ColorBuffer();\n\tvar depthBuffer = new DepthBuffer();\n\tvar stencilBuffer = new StencilBuffer();\n\n\tvar maxVertexAttributes = gl.getParameter( gl.MAX_VERTEX_ATTRIBS );\n\tvar newAttributes = new Uint8Array( maxVertexAttributes );\n\tvar enabledAttributes = new Uint8Array( maxVertexAttributes );\n\tvar attributeDivisors = new Uint8Array( maxVertexAttributes );\n\n\tvar capabilities = {};\n\n\tvar compressedTextureFormats = null;\n\n\tvar currentProgram = null;\n\n\tvar currentBlending = null;\n\tvar currentBlendEquation = null;\n\tvar currentBlendSrc = null;\n\tvar currentBlendDst = null;\n\tvar currentBlendEquationAlpha = null;\n\tvar currentBlendSrcAlpha = null;\n\tvar currentBlendDstAlpha = null;\n\tvar currentPremultipledAlpha = false;\n\n\tvar currentFlipSided = null;\n\tvar currentCullFace = null;\n\n\tvar currentLineWidth = null;\n\n\tvar currentPolygonOffsetFactor = null;\n\tvar currentPolygonOffsetUnits = null;\n\n\tvar maxTextures = gl.getParameter( gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS );\n\n\tvar version = parseFloat( /^WebGL\\ ([0-9])/.exec( gl.getParameter( gl.VERSION ) )[ 1 ] );\n\tvar lineWidthAvailable = parseFloat( version ) >= 1.0;\n\n\tvar currentTextureSlot = null;\n\tvar currentBoundTextures = {};\n\n\tvar currentScissor = new Vector4();\n\tvar currentViewport = new Vector4();\n\n\tfunction createTexture( type, target, count ) {\n\n\t\tvar data = new Uint8Array( 4 ); // 4 is required to match default unpack alignment of 4.\n\t\tvar texture = gl.createTexture();\n\n\t\tgl.bindTexture( type, texture );\n\t\tgl.texParameteri( type, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\n\t\tgl.texParameteri( type, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\n\n\t\tfor ( var i = 0; i < count; i ++ ) {\n\n\t\t\tgl.texImage2D( target + i, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, data );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tvar emptyTextures = {};\n\temptyTextures[ gl.TEXTURE_2D ] = createTexture( gl.TEXTURE_2D, gl.TEXTURE_2D, 1 );\n\temptyTextures[ gl.TEXTURE_CUBE_MAP ] = createTexture( gl.TEXTURE_CUBE_MAP, gl.TEXTURE_CUBE_MAP_POSITIVE_X, 6 );\n\n\t// init\n\n\tcolorBuffer.setClear( 0, 0, 0, 1 );\n\tdepthBuffer.setClear( 1 );\n\tstencilBuffer.setClear( 0 );\n\n\tenable( gl.DEPTH_TEST );\n\tdepthBuffer.setFunc( LessEqualDepth );\n\n\tsetFlipSided( false );\n\tsetCullFace( CullFaceBack );\n\tenable( gl.CULL_FACE );\n\n\tenable( gl.BLEND );\n\tsetBlending( NormalBlending );\n\n\t//\n\n\tfunction initAttributes() {\n\n\t\tfor ( var i = 0, l = newAttributes.length; i < l; i ++ ) {\n\n\t\t\tnewAttributes[ i ] = 0;\n\n\t\t}\n\n\t}\n\n\tfunction enableAttribute( attribute ) {\n\n\t\tnewAttributes[ attribute ] = 1;\n\n\t\tif ( enabledAttributes[ attribute ] === 0 ) {\n\n\t\t\tgl.enableVertexAttribArray( attribute );\n\t\t\tenabledAttributes[ attribute ] = 1;\n\n\t\t}\n\n\t\tif ( attributeDivisors[ attribute ] !== 0 ) {\n\n\t\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\n\n\t\t\textension.vertexAttribDivisorANGLE( attribute, 0 );\n\t\t\tattributeDivisors[ attribute ] = 0;\n\n\t\t}\n\n\t}\n\n\tfunction enableAttributeAndDivisor( attribute, meshPerAttribute ) {\n\n\t\tnewAttributes[ attribute ] = 1;\n\n\t\tif ( enabledAttributes[ attribute ] === 0 ) {\n\n\t\t\tgl.enableVertexAttribArray( attribute );\n\t\t\tenabledAttributes[ attribute ] = 1;\n\n\t\t}\n\n\t\tif ( attributeDivisors[ attribute ] !== meshPerAttribute ) {\n\n\t\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\n\n\t\t\textension.vertexAttribDivisorANGLE( attribute, meshPerAttribute );\n\t\t\tattributeDivisors[ attribute ] = meshPerAttribute;\n\n\t\t}\n\n\t}\n\n\tfunction disableUnusedAttributes() {\n\n\t\tfor ( var i = 0, l = enabledAttributes.length; i !== l; ++ i ) {\n\n\t\t\tif ( enabledAttributes[ i ] !== newAttributes[ i ] ) {\n\n\t\t\t\tgl.disableVertexAttribArray( i );\n\t\t\t\tenabledAttributes[ i ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction enable( id ) {\n\n\t\tif ( capabilities[ id ] !== true ) {\n\n\t\t\tgl.enable( id );\n\t\t\tcapabilities[ id ] = true;\n\n\t\t}\n\n\t}\n\n\tfunction disable( id ) {\n\n\t\tif ( capabilities[ id ] !== false ) {\n\n\t\t\tgl.disable( id );\n\t\t\tcapabilities[ id ] = false;\n\n\t\t}\n\n\t}\n\n\tfunction getCompressedTextureFormats() {\n\n\t\tif ( compressedTextureFormats === null ) {\n\n\t\t\tcompressedTextureFormats = [];\n\n\t\t\tif ( extensions.get( 'WEBGL_compressed_texture_pvrtc' ) ||\n\t\t\t     extensions.get( 'WEBGL_compressed_texture_s3tc' ) ||\n\t\t\t     extensions.get( 'WEBGL_compressed_texture_etc1' ) ) {\n\n\t\t\t\tvar formats = gl.getParameter( gl.COMPRESSED_TEXTURE_FORMATS );\n\n\t\t\t\tfor ( var i = 0; i < formats.length; i ++ ) {\n\n\t\t\t\t\tcompressedTextureFormats.push( formats[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn compressedTextureFormats;\n\n\t}\n\n\tfunction useProgram( program ) {\n\n\t\tif ( currentProgram !== program ) {\n\n\t\t\tgl.useProgram( program );\n\n\t\t\tcurrentProgram = program;\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tfunction setBlending( blending, blendEquation, blendSrc, blendDst, blendEquationAlpha, blendSrcAlpha, blendDstAlpha, premultipliedAlpha ) {\n\n\t\tif ( blending !== NoBlending ) {\n\n\t\t\tenable( gl.BLEND );\n\n\t\t} else {\n\n\t\t\tdisable( gl.BLEND );\n\n\t\t}\n\n\t\tif ( blending !== CustomBlending ) {\n\n\t\t\tif ( blending !== currentBlending || premultipliedAlpha !== currentPremultipledAlpha ) {\n\n\t\t\t\tswitch ( blending ) {\n\n\t\t\t\t\tcase AdditiveBlending:\n\n\t\t\t\t\t\tif ( premultipliedAlpha ) {\n\n\t\t\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\n\t\t\t\t\t\t\tgl.blendFuncSeparate( gl.ONE, gl.ONE, gl.ONE, gl.ONE );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\n\t\t\t\t\t\t\tgl.blendFunc( gl.SRC_ALPHA, gl.ONE );\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase SubtractiveBlending:\n\n\t\t\t\t\t\tif ( premultipliedAlpha ) {\n\n\t\t\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\n\t\t\t\t\t\t\tgl.blendFuncSeparate( gl.ZERO, gl.ZERO, gl.ONE_MINUS_SRC_COLOR, gl.ONE_MINUS_SRC_ALPHA );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\n\t\t\t\t\t\t\tgl.blendFunc( gl.ZERO, gl.ONE_MINUS_SRC_COLOR );\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase MultiplyBlending:\n\n\t\t\t\t\t\tif ( premultipliedAlpha ) {\n\n\t\t\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\n\t\t\t\t\t\t\tgl.blendFuncSeparate( gl.ZERO, gl.SRC_COLOR, gl.ZERO, gl.SRC_ALPHA );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\n\t\t\t\t\t\t\tgl.blendFunc( gl.ZERO, gl.SRC_COLOR );\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tif ( premultipliedAlpha ) {\n\n\t\t\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\n\t\t\t\t\t\t\tgl.blendFuncSeparate( gl.ONE, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\n\t\t\t\t\t\t\tgl.blendFuncSeparate( gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tcurrentBlendEquation = null;\n\t\t\tcurrentBlendSrc = null;\n\t\t\tcurrentBlendDst = null;\n\t\t\tcurrentBlendEquationAlpha = null;\n\t\t\tcurrentBlendSrcAlpha = null;\n\t\t\tcurrentBlendDstAlpha = null;\n\n\t\t} else {\n\n\t\t\tblendEquationAlpha = blendEquationAlpha || blendEquation;\n\t\t\tblendSrcAlpha = blendSrcAlpha || blendSrc;\n\t\t\tblendDstAlpha = blendDstAlpha || blendDst;\n\n\t\t\tif ( blendEquation !== currentBlendEquation || blendEquationAlpha !== currentBlendEquationAlpha ) {\n\n\t\t\t\tgl.blendEquationSeparate( utils.convert( blendEquation ), utils.convert( blendEquationAlpha ) );\n\n\t\t\t\tcurrentBlendEquation = blendEquation;\n\t\t\t\tcurrentBlendEquationAlpha = blendEquationAlpha;\n\n\t\t\t}\n\n\t\t\tif ( blendSrc !== currentBlendSrc || blendDst !== currentBlendDst || blendSrcAlpha !== currentBlendSrcAlpha || blendDstAlpha !== currentBlendDstAlpha ) {\n\n\t\t\t\tgl.blendFuncSeparate( utils.convert( blendSrc ), utils.convert( blendDst ), utils.convert( blendSrcAlpha ), utils.convert( blendDstAlpha ) );\n\n\t\t\t\tcurrentBlendSrc = blendSrc;\n\t\t\t\tcurrentBlendDst = blendDst;\n\t\t\t\tcurrentBlendSrcAlpha = blendSrcAlpha;\n\t\t\t\tcurrentBlendDstAlpha = blendDstAlpha;\n\n\t\t\t}\n\n\t\t}\n\n\t\tcurrentBlending = blending;\n\t\tcurrentPremultipledAlpha = premultipliedAlpha;\n\n\t}\n\n\tfunction setMaterial( material, frontFaceCW ) {\n\n\t\tmaterial.side === DoubleSide\n\t\t\t? disable( gl.CULL_FACE )\n\t\t\t: enable( gl.CULL_FACE );\n\n\t\tvar flipSided = ( material.side === BackSide );\n\t\tif ( frontFaceCW ) flipSided = ! flipSided;\n\n\t\tsetFlipSided( flipSided );\n\n\t\tmaterial.transparent === true\n\t\t\t? setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha, material.premultipliedAlpha )\n\t\t\t: setBlending( NoBlending );\n\n\t\tdepthBuffer.setFunc( material.depthFunc );\n\t\tdepthBuffer.setTest( material.depthTest );\n\t\tdepthBuffer.setMask( material.depthWrite );\n\t\tcolorBuffer.setMask( material.colorWrite );\n\n\t\tsetPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\n\n\t}\n\n\t//\n\n\tfunction setFlipSided( flipSided ) {\n\n\t\tif ( currentFlipSided !== flipSided ) {\n\n\t\t\tif ( flipSided ) {\n\n\t\t\t\tgl.frontFace( gl.CW );\n\n\t\t\t} else {\n\n\t\t\t\tgl.frontFace( gl.CCW );\n\n\t\t\t}\n\n\t\t\tcurrentFlipSided = flipSided;\n\n\t\t}\n\n\t}\n\n\tfunction setCullFace( cullFace ) {\n\n\t\tif ( cullFace !== CullFaceNone ) {\n\n\t\t\tenable( gl.CULL_FACE );\n\n\t\t\tif ( cullFace !== currentCullFace ) {\n\n\t\t\t\tif ( cullFace === CullFaceBack ) {\n\n\t\t\t\t\tgl.cullFace( gl.BACK );\n\n\t\t\t\t} else if ( cullFace === CullFaceFront ) {\n\n\t\t\t\t\tgl.cullFace( gl.FRONT );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tgl.cullFace( gl.FRONT_AND_BACK );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tdisable( gl.CULL_FACE );\n\n\t\t}\n\n\t\tcurrentCullFace = cullFace;\n\n\t}\n\n\tfunction setLineWidth( width ) {\n\n\t\tif ( width !== currentLineWidth ) {\n\n\t\t\tif ( lineWidthAvailable ) gl.lineWidth( width );\n\n\t\t\tcurrentLineWidth = width;\n\n\t\t}\n\n\t}\n\n\tfunction setPolygonOffset( polygonOffset, factor, units ) {\n\n\t\tif ( polygonOffset ) {\n\n\t\t\tenable( gl.POLYGON_OFFSET_FILL );\n\n\t\t\tif ( currentPolygonOffsetFactor !== factor || currentPolygonOffsetUnits !== units ) {\n\n\t\t\t\tgl.polygonOffset( factor, units );\n\n\t\t\t\tcurrentPolygonOffsetFactor = factor;\n\t\t\t\tcurrentPolygonOffsetUnits = units;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tdisable( gl.POLYGON_OFFSET_FILL );\n\n\t\t}\n\n\t}\n\n\tfunction setScissorTest( scissorTest ) {\n\n\t\tif ( scissorTest ) {\n\n\t\t\tenable( gl.SCISSOR_TEST );\n\n\t\t} else {\n\n\t\t\tdisable( gl.SCISSOR_TEST );\n\n\t\t}\n\n\t}\n\n\t// texture\n\n\tfunction activeTexture( webglSlot ) {\n\n\t\tif ( webglSlot === undefined ) webglSlot = gl.TEXTURE0 + maxTextures - 1;\n\n\t\tif ( currentTextureSlot !== webglSlot ) {\n\n\t\t\tgl.activeTexture( webglSlot );\n\t\t\tcurrentTextureSlot = webglSlot;\n\n\t\t}\n\n\t}\n\n\tfunction bindTexture( webglType, webglTexture ) {\n\n\t\tif ( currentTextureSlot === null ) {\n\n\t\t\tactiveTexture();\n\n\t\t}\n\n\t\tvar boundTexture = currentBoundTextures[ currentTextureSlot ];\n\n\t\tif ( boundTexture === undefined ) {\n\n\t\t\tboundTexture = { type: undefined, texture: undefined };\n\t\t\tcurrentBoundTextures[ currentTextureSlot ] = boundTexture;\n\n\t\t}\n\n\t\tif ( boundTexture.type !== webglType || boundTexture.texture !== webglTexture ) {\n\n\t\t\tgl.bindTexture( webglType, webglTexture || emptyTextures[ webglType ] );\n\n\t\t\tboundTexture.type = webglType;\n\t\t\tboundTexture.texture = webglTexture;\n\n\t\t}\n\n\t}\n\n\tfunction compressedTexImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.compressedTexImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.texImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction scissor( scissor ) {\n\n\t\tif ( currentScissor.equals( scissor ) === false ) {\n\n\t\t\tgl.scissor( scissor.x, scissor.y, scissor.z, scissor.w );\n\t\t\tcurrentScissor.copy( scissor );\n\n\t\t}\n\n\t}\n\n\tfunction viewport( viewport ) {\n\n\t\tif ( currentViewport.equals( viewport ) === false ) {\n\n\t\t\tgl.viewport( viewport.x, viewport.y, viewport.z, viewport.w );\n\t\t\tcurrentViewport.copy( viewport );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction reset() {\n\n\t\tfor ( var i = 0; i < enabledAttributes.length; i ++ ) {\n\n\t\t\tif ( enabledAttributes[ i ] === 1 ) {\n\n\t\t\t\tgl.disableVertexAttribArray( i );\n\t\t\t\tenabledAttributes[ i ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tcapabilities = {};\n\n\t\tcompressedTextureFormats = null;\n\n\t\tcurrentTextureSlot = null;\n\t\tcurrentBoundTextures = {};\n\n\t\tcurrentProgram = null;\n\n\t\tcurrentBlending = null;\n\n\t\tcurrentFlipSided = null;\n\t\tcurrentCullFace = null;\n\n\t\tcolorBuffer.reset();\n\t\tdepthBuffer.reset();\n\t\tstencilBuffer.reset();\n\n\t}\n\n\treturn {\n\n\t\tbuffers: {\n\t\t\tcolor: colorBuffer,\n\t\t\tdepth: depthBuffer,\n\t\t\tstencil: stencilBuffer\n\t\t},\n\n\t\tinitAttributes: initAttributes,\n\t\tenableAttribute: enableAttribute,\n\t\tenableAttributeAndDivisor: enableAttributeAndDivisor,\n\t\tdisableUnusedAttributes: disableUnusedAttributes,\n\t\tenable: enable,\n\t\tdisable: disable,\n\t\tgetCompressedTextureFormats: getCompressedTextureFormats,\n\n\t\tuseProgram: useProgram,\n\n\t\tsetBlending: setBlending,\n\t\tsetMaterial: setMaterial,\n\n\t\tsetFlipSided: setFlipSided,\n\t\tsetCullFace: setCullFace,\n\n\t\tsetLineWidth: setLineWidth,\n\t\tsetPolygonOffset: setPolygonOffset,\n\n\t\tsetScissorTest: setScissorTest,\n\n\t\tactiveTexture: activeTexture,\n\t\tbindTexture: bindTexture,\n\t\tcompressedTexImage2D: compressedTexImage2D,\n\t\ttexImage2D: texImage2D,\n\n\t\tscissor: scissor,\n\t\tviewport: viewport,\n\n\t\treset: reset\n\n\t};\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLCapabilities( gl, extensions, parameters ) {\n\n\tvar maxAnisotropy;\n\n\tfunction getMaxAnisotropy() {\n\n\t\tif ( maxAnisotropy !== undefined ) return maxAnisotropy;\n\n\t\tvar extension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\tif ( extension !== null ) {\n\n\t\t\tmaxAnisotropy = gl.getParameter( extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT );\n\n\t\t} else {\n\n\t\t\tmaxAnisotropy = 0;\n\n\t\t}\n\n\t\treturn maxAnisotropy;\n\n\t}\n\n\tfunction getMaxPrecision( precision ) {\n\n\t\tif ( precision === 'highp' ) {\n\n\t\t\tif ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.HIGH_FLOAT ).precision > 0 &&\n\t\t\t     gl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.HIGH_FLOAT ).precision > 0 ) {\n\n\t\t\t\treturn 'highp';\n\n\t\t\t}\n\n\t\t\tprecision = 'mediump';\n\n\t\t}\n\n\t\tif ( precision === 'mediump' ) {\n\n\t\t\tif ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.MEDIUM_FLOAT ).precision > 0 &&\n\t\t\t     gl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT ).precision > 0 ) {\n\n\t\t\t\treturn 'mediump';\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn 'lowp';\n\n\t}\n\n\tvar precision = parameters.precision !== undefined ? parameters.precision : 'highp';\n\tvar maxPrecision = getMaxPrecision( precision );\n\n\tif ( maxPrecision !== precision ) {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer:', precision, 'not supported, using', maxPrecision, 'instead.' );\n\t\tprecision = maxPrecision;\n\n\t}\n\n\tvar logarithmicDepthBuffer = parameters.logarithmicDepthBuffer === true;\n\n\tvar maxTextures = gl.getParameter( gl.MAX_TEXTURE_IMAGE_UNITS );\n\tvar maxVertexTextures = gl.getParameter( gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS );\n\tvar maxTextureSize = gl.getParameter( gl.MAX_TEXTURE_SIZE );\n\tvar maxCubemapSize = gl.getParameter( gl.MAX_CUBE_MAP_TEXTURE_SIZE );\n\n\tvar maxAttributes = gl.getParameter( gl.MAX_VERTEX_ATTRIBS );\n\tvar maxVertexUniforms = gl.getParameter( gl.MAX_VERTEX_UNIFORM_VECTORS );\n\tvar maxVaryings = gl.getParameter( gl.MAX_VARYING_VECTORS );\n\tvar maxFragmentUniforms = gl.getParameter( gl.MAX_FRAGMENT_UNIFORM_VECTORS );\n\n\tvar vertexTextures = maxVertexTextures > 0;\n\tvar floatFragmentTextures = !! extensions.get( 'OES_texture_float' );\n\tvar floatVertexTextures = vertexTextures && floatFragmentTextures;\n\n\treturn {\n\n\t\tgetMaxAnisotropy: getMaxAnisotropy,\n\t\tgetMaxPrecision: getMaxPrecision,\n\n\t\tprecision: precision,\n\t\tlogarithmicDepthBuffer: logarithmicDepthBuffer,\n\n\t\tmaxTextures: maxTextures,\n\t\tmaxVertexTextures: maxVertexTextures,\n\t\tmaxTextureSize: maxTextureSize,\n\t\tmaxCubemapSize: maxCubemapSize,\n\n\t\tmaxAttributes: maxAttributes,\n\t\tmaxVertexUniforms: maxVertexUniforms,\n\t\tmaxVaryings: maxVaryings,\n\t\tmaxFragmentUniforms: maxFragmentUniforms,\n\n\t\tvertexTextures: vertexTextures,\n\t\tfloatFragmentTextures: floatFragmentTextures,\n\t\tfloatVertexTextures: floatVertexTextures\n\n\t};\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author greggman / http://games.greggman.com/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author tschw\n */\n\nfunction PerspectiveCamera( fov, aspect, near, far ) {\n\n\tCamera.call( this );\n\n\tthis.type = 'PerspectiveCamera';\n\n\tthis.fov = fov !== undefined ? fov : 50;\n\tthis.zoom = 1;\n\n\tthis.near = near !== undefined ? near : 0.1;\n\tthis.far = far !== undefined ? far : 2000;\n\tthis.focus = 10;\n\n\tthis.aspect = aspect !== undefined ? aspect : 1;\n\tthis.view = null;\n\n\tthis.filmGauge = 35;\t// width of the film (default in millimeters)\n\tthis.filmOffset = 0;\t// horizontal film offset (same unit as gauge)\n\n\tthis.updateProjectionMatrix();\n\n}\n\nPerspectiveCamera.prototype = Object.assign( Object.create( Camera.prototype ), {\n\n\tconstructor: PerspectiveCamera,\n\n\tisPerspectiveCamera: true,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tCamera.prototype.copy.call( this, source, recursive );\n\n\t\tthis.fov = source.fov;\n\t\tthis.zoom = source.zoom;\n\n\t\tthis.near = source.near;\n\t\tthis.far = source.far;\n\t\tthis.focus = source.focus;\n\n\t\tthis.aspect = source.aspect;\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\n\n\t\tthis.filmGauge = source.filmGauge;\n\t\tthis.filmOffset = source.filmOffset;\n\n\t\treturn this;\n\n\t},\n\n\t/**\n\t * Sets the FOV by focal length in respect to the current .filmGauge.\n\t *\n\t * The default film gauge is 35, so that the focal length can be specified for\n\t * a 35mm (full frame) camera.\n\t *\n\t * Values for focal length and film gauge must have the same unit.\n\t */\n\tsetFocalLength: function ( focalLength ) {\n\n\t\t// see http://www.bobatkins.com/photography/technical/field_of_view.html\n\t\tvar vExtentSlope = 0.5 * this.getFilmHeight() / focalLength;\n\n\t\tthis.fov = _Math.RAD2DEG * 2 * Math.atan( vExtentSlope );\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\t/**\n\t * Calculates the focal length from the current .fov and .filmGauge.\n\t */\n\tgetFocalLength: function () {\n\n\t\tvar vExtentSlope = Math.tan( _Math.DEG2RAD * 0.5 * this.fov );\n\n\t\treturn 0.5 * this.getFilmHeight() / vExtentSlope;\n\n\t},\n\n\tgetEffectiveFOV: function () {\n\n\t\treturn _Math.RAD2DEG * 2 * Math.atan(\n\t\t\tMath.tan( _Math.DEG2RAD * 0.5 * this.fov ) / this.zoom );\n\n\t},\n\n\tgetFilmWidth: function () {\n\n\t\t// film not completely covered in portrait format (aspect < 1)\n\t\treturn this.filmGauge * Math.min( this.aspect, 1 );\n\n\t},\n\n\tgetFilmHeight: function () {\n\n\t\t// film not completely covered in landscape format (aspect > 1)\n\t\treturn this.filmGauge / Math.max( this.aspect, 1 );\n\n\t},\n\n\t/**\n\t * Sets an offset in a larger frustum. This is useful for multi-window or\n\t * multi-monitor/multi-machine setups.\n\t *\n\t * For example, if you have 3x2 monitors and each monitor is 1920x1080 and\n\t * the monitors are in grid like this\n\t *\n\t *   +---+---+---+\n\t *   | A | B | C |\n\t *   +---+---+---+\n\t *   | D | E | F |\n\t *   +---+---+---+\n\t *\n\t * then for each monitor you would call it like this\n\t *\n\t *   var w = 1920;\n\t *   var h = 1080;\n\t *   var fullWidth = w * 3;\n\t *   var fullHeight = h * 2;\n\t *\n\t *   --A--\n\t *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\n\t *   --B--\n\t *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\n\t *   --C--\n\t *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\n\t *   --D--\n\t *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\n\t *   --E--\n\t *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\n\t *   --F--\n\t *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\n\t *\n\t *   Note there is no reason monitors have to be the same size or in a grid.\n\t */\n\tsetViewOffset: function ( fullWidth, fullHeight, x, y, width, height ) {\n\n\t\tthis.aspect = fullWidth / fullHeight;\n\n\t\tif ( this.view === null ) {\n\n\t\t\tthis.view = {\n\t\t\t\tenabled: true,\n\t\t\t\tfullWidth: 1,\n\t\t\t\tfullHeight: 1,\n\t\t\t\toffsetX: 0,\n\t\t\t\toffsetY: 0,\n\t\t\t\twidth: 1,\n\t\t\t\theight: 1\n\t\t\t};\n\n\t\t}\n\n\t\tthis.view.enabled = true;\n\t\tthis.view.fullWidth = fullWidth;\n\t\tthis.view.fullHeight = fullHeight;\n\t\tthis.view.offsetX = x;\n\t\tthis.view.offsetY = y;\n\t\tthis.view.width = width;\n\t\tthis.view.height = height;\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tclearViewOffset: function () {\n\n\t\tif ( this.view !== null ) {\n\n\t\t\tthis.view.enabled = false;\n\n\t\t}\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tupdateProjectionMatrix: function () {\n\n\t\tvar near = this.near,\n\t\t\ttop = near * Math.tan(\n\t\t\t\t_Math.DEG2RAD * 0.5 * this.fov ) / this.zoom,\n\t\t\theight = 2 * top,\n\t\t\twidth = this.aspect * height,\n\t\t\tleft = - 0.5 * width,\n\t\t\tview = this.view;\n\n\t\tif ( this.view !== null && this.view.enabled ) {\n\n\t\t\tvar fullWidth = view.fullWidth,\n\t\t\t\tfullHeight = view.fullHeight;\n\n\t\t\tleft += view.offsetX * width / fullWidth;\n\t\t\ttop -= view.offsetY * height / fullHeight;\n\t\t\twidth *= view.width / fullWidth;\n\t\t\theight *= view.height / fullHeight;\n\n\t\t}\n\n\t\tvar skew = this.filmOffset;\n\t\tif ( skew !== 0 ) left += near * skew / this.getFilmWidth();\n\n\t\tthis.projectionMatrix.makePerspective( left, left + width, top, top - height, near, this.far );\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.fov = this.fov;\n\t\tdata.object.zoom = this.zoom;\n\n\t\tdata.object.near = this.near;\n\t\tdata.object.far = this.far;\n\t\tdata.object.focus = this.focus;\n\n\t\tdata.object.aspect = this.aspect;\n\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\n\n\t\tdata.object.filmGauge = this.filmGauge;\n\t\tdata.object.filmOffset = this.filmOffset;\n\n\t\treturn data;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction ArrayCamera( array ) {\n\n\tPerspectiveCamera.call( this );\n\n\tthis.cameras = array || [];\n\n}\n\nArrayCamera.prototype = Object.assign( Object.create( PerspectiveCamera.prototype ), {\n\n\tconstructor: ArrayCamera,\n\n\tisArrayCamera: true\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebVRManager( renderer ) {\n\n\tvar scope = this;\n\n\tvar device = null;\n\tvar frameData = null;\n\n\tvar poseTarget = null;\n\n\tif ( typeof window !== 'undefined' && 'VRFrameData' in window ) {\n\n\t\tframeData = new window.VRFrameData();\n\n\t}\n\n\tvar matrixWorldInverse = new Matrix4();\n\n\tvar cameraL = new PerspectiveCamera();\n\tcameraL.bounds = new Vector4( 0.0, 0.0, 0.5, 1.0 );\n\tcameraL.layers.enable( 1 );\n\n\tvar cameraR = new PerspectiveCamera();\n\tcameraR.bounds = new Vector4( 0.5, 0.0, 0.5, 1.0 );\n\tcameraR.layers.enable( 2 );\n\n\tvar cameraVR = new ArrayCamera( [ cameraL, cameraR ] );\n\tcameraVR.layers.enable( 1 );\n\tcameraVR.layers.enable( 2 );\n\n\t//\n\n\tvar currentSize, currentPixelRatio;\n\n\tfunction onVRDisplayPresentChange() {\n\n\t\tif ( device !== null && device.isPresenting ) {\n\n\t\t\tvar eyeParameters = device.getEyeParameters( 'left' );\n\t\t\tvar renderWidth = eyeParameters.renderWidth;\n\t\t\tvar renderHeight = eyeParameters.renderHeight;\n\n\t\t\tcurrentPixelRatio = renderer.getPixelRatio();\n\t\t\tcurrentSize = renderer.getSize();\n\n\t\t\trenderer.setDrawingBufferSize( renderWidth * 2, renderHeight, 1 );\n\n\t\t} else if ( scope.enabled ) {\n\n\t\t\trenderer.setDrawingBufferSize( currentSize.width, currentSize.height, currentPixelRatio );\n\n\t\t}\n\n\t}\n\n\tif ( typeof window !== 'undefined' ) {\n\n\t\twindow.addEventListener( 'vrdisplaypresentchange', onVRDisplayPresentChange, false );\n\n\t}\n\n\t//\n\n\tthis.enabled = false;\n\n\tthis.getDevice = function () {\n\n\t\treturn device;\n\n\t};\n\n\tthis.setDevice = function ( value ) {\n\n\t\tif ( value !== undefined ) device = value;\n\n\t};\n\n\tthis.setPoseTarget = function ( object ) {\n\n\t\tif ( object !== undefined ) poseTarget = object;\n\n\t};\n\n\tthis.getCamera = function ( camera ) {\n\n\t\tif ( device === null ) return camera;\n\n\t\tdevice.depthNear = camera.near;\n\t\tdevice.depthFar = camera.far;\n\n\t\tdevice.getFrameData( frameData );\n\n\t\t//\n\n\t\tvar pose = frameData.pose;\n\t\tvar poseObject = poseTarget !== null ? poseTarget : camera;\n\n\t\tif ( pose.position !== null ) {\n\n\t\t\tposeObject.position.fromArray( pose.position );\n\n\t\t} else {\n\n\t\t\tposeObject.position.set( 0, 0, 0 );\n\n\t\t}\n\n\t\tif ( pose.orientation !== null ) {\n\n\t\t\tposeObject.quaternion.fromArray( pose.orientation );\n\n\t\t}\n\n\t\tposeObject.updateMatrixWorld();\n\n\t\tif ( device.isPresenting === false ) return camera;\n\n\t\t//\n\n\t\tcameraL.near = camera.near;\n\t\tcameraR.near = camera.near;\n\n\t\tcameraL.far = camera.far;\n\t\tcameraR.far = camera.far;\n\n\t\tcameraVR.matrixWorld.copy( camera.matrixWorld );\n\t\tcameraVR.matrixWorldInverse.copy( camera.matrixWorldInverse );\n\n\t\tcameraL.matrixWorldInverse.fromArray( frameData.leftViewMatrix );\n\t\tcameraR.matrixWorldInverse.fromArray( frameData.rightViewMatrix );\n\n\t\tvar parent = poseObject.parent;\n\n\t\tif ( parent !== null ) {\n\n\t\t\tmatrixWorldInverse.getInverse( parent.matrixWorld );\n\n\t\t\tcameraL.matrixWorldInverse.multiply( matrixWorldInverse );\n\t\t\tcameraR.matrixWorldInverse.multiply( matrixWorldInverse );\n\n\t\t}\n\n\t\t// envMap and Mirror needs camera.matrixWorld\n\n\t\tcameraL.matrixWorld.getInverse( cameraL.matrixWorldInverse );\n\t\tcameraR.matrixWorld.getInverse( cameraR.matrixWorldInverse );\n\n\t\tcameraL.projectionMatrix.fromArray( frameData.leftProjectionMatrix );\n\t\tcameraR.projectionMatrix.fromArray( frameData.rightProjectionMatrix );\n\n\t\t// HACK @mrdoob\n\t\t// https://github.com/w3c/webvr/issues/203\n\n\t\tcameraVR.projectionMatrix.copy( cameraL.projectionMatrix );\n\n\t\t//\n\n\t\tvar layers = device.getLayers();\n\n\t\tif ( layers.length ) {\n\n\t\t\tvar layer = layers[ 0 ];\n\n\t\t\tif ( layer.leftBounds !== null && layer.leftBounds.length === 4 ) {\n\n\t\t\t\tcameraL.bounds.fromArray( layer.leftBounds );\n\n\t\t\t}\n\n\t\t\tif ( layer.rightBounds !== null && layer.rightBounds.length === 4 ) {\n\n\t\t\t\tcameraR.bounds.fromArray( layer.rightBounds );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn cameraVR;\n\n\t};\n\n\tthis.submitFrame = function () {\n\n\t\tif ( device && device.isPresenting ) device.submitFrame();\n\n\t};\n\n\tthis.dispose = function () {\n\n\t\tif ( typeof window !== 'undefined' ) {\n\n\t\t\twindow.removeEventListener( 'vrdisplaypresentchange', onVRDisplayPresentChange );\n\n\t\t}\n\n\t};\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLExtensions( gl ) {\n\n\tvar extensions = {};\n\n\treturn {\n\n\t\tget: function ( name ) {\n\n\t\t\tif ( extensions[ name ] !== undefined ) {\n\n\t\t\t\treturn extensions[ name ];\n\n\t\t\t}\n\n\t\t\tvar extension;\n\n\t\t\tswitch ( name ) {\n\n\t\t\t\tcase 'WEBGL_depth_texture':\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_depth_texture' ) || gl.getExtension( 'MOZ_WEBGL_depth_texture' ) || gl.getExtension( 'WEBKIT_WEBGL_depth_texture' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'EXT_texture_filter_anisotropic':\n\t\t\t\t\textension = gl.getExtension( 'EXT_texture_filter_anisotropic' ) || gl.getExtension( 'MOZ_EXT_texture_filter_anisotropic' ) || gl.getExtension( 'WEBKIT_EXT_texture_filter_anisotropic' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'WEBGL_compressed_texture_s3tc':\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'MOZ_WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_s3tc' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'WEBGL_compressed_texture_pvrtc':\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_pvrtc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_pvrtc' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'WEBGL_compressed_texture_etc1':\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_etc1' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\textension = gl.getExtension( name );\n\n\t\t\t}\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: ' + name + ' extension not supported.' );\n\n\t\t\t}\n\n\t\t\textensions[ name ] = extension;\n\n\t\t\treturn extension;\n\n\t\t}\n\n\t};\n\n}\n\n/**\n * @author tschw\n */\n\nfunction WebGLClipping() {\n\n\tvar scope = this,\n\n\t\tglobalState = null,\n\t\tnumGlobalPlanes = 0,\n\t\tlocalClippingEnabled = false,\n\t\trenderingShadows = false,\n\n\t\tplane = new Plane(),\n\t\tviewNormalMatrix = new Matrix3(),\n\n\t\tuniform = { value: null, needsUpdate: false };\n\n\tthis.uniform = uniform;\n\tthis.numPlanes = 0;\n\tthis.numIntersection = 0;\n\n\tthis.init = function ( planes, enableLocalClipping, camera ) {\n\n\t\tvar enabled =\n\t\t\tplanes.length !== 0 ||\n\t\t\tenableLocalClipping ||\n\t\t\t// enable state of previous frame - the clipping code has to\n\t\t\t// run another frame in order to reset the state:\n\t\t\tnumGlobalPlanes !== 0 ||\n\t\t\tlocalClippingEnabled;\n\n\t\tlocalClippingEnabled = enableLocalClipping;\n\n\t\tglobalState = projectPlanes( planes, camera, 0 );\n\t\tnumGlobalPlanes = planes.length;\n\n\t\treturn enabled;\n\n\t};\n\n\tthis.beginShadows = function () {\n\n\t\trenderingShadows = true;\n\t\tprojectPlanes( null );\n\n\t};\n\n\tthis.endShadows = function () {\n\n\t\trenderingShadows = false;\n\t\tresetGlobalState();\n\n\t};\n\n\tthis.setState = function ( planes, clipIntersection, clipShadows, camera, cache, fromCache ) {\n\n\t\tif ( ! localClippingEnabled || planes === null || planes.length === 0 || renderingShadows && ! clipShadows ) {\n\n\t\t\t// there's no local clipping\n\n\t\t\tif ( renderingShadows ) {\n\n\t\t\t\t// there's no global clipping\n\n\t\t\t\tprojectPlanes( null );\n\n\t\t\t} else {\n\n\t\t\t\tresetGlobalState();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tvar nGlobal = renderingShadows ? 0 : numGlobalPlanes,\n\t\t\t\tlGlobal = nGlobal * 4,\n\n\t\t\t\tdstArray = cache.clippingState || null;\n\n\t\t\tuniform.value = dstArray; // ensure unique state\n\n\t\t\tdstArray = projectPlanes( planes, camera, lGlobal, fromCache );\n\n\t\t\tfor ( var i = 0; i !== lGlobal; ++ i ) {\n\n\t\t\t\tdstArray[ i ] = globalState[ i ];\n\n\t\t\t}\n\n\t\t\tcache.clippingState = dstArray;\n\t\t\tthis.numIntersection = clipIntersection ? this.numPlanes : 0;\n\t\t\tthis.numPlanes += nGlobal;\n\n\t\t}\n\n\n\t};\n\n\tfunction resetGlobalState() {\n\n\t\tif ( uniform.value !== globalState ) {\n\n\t\t\tuniform.value = globalState;\n\t\t\tuniform.needsUpdate = numGlobalPlanes > 0;\n\n\t\t}\n\n\t\tscope.numPlanes = numGlobalPlanes;\n\t\tscope.numIntersection = 0;\n\n\t}\n\n\tfunction projectPlanes( planes, camera, dstOffset, skipTransform ) {\n\n\t\tvar nPlanes = planes !== null ? planes.length : 0,\n\t\t\tdstArray = null;\n\n\t\tif ( nPlanes !== 0 ) {\n\n\t\t\tdstArray = uniform.value;\n\n\t\t\tif ( skipTransform !== true || dstArray === null ) {\n\n\t\t\t\tvar flatSize = dstOffset + nPlanes * 4,\n\t\t\t\t\tviewMatrix = camera.matrixWorldInverse;\n\n\t\t\t\tviewNormalMatrix.getNormalMatrix( viewMatrix );\n\n\t\t\t\tif ( dstArray === null || dstArray.length < flatSize ) {\n\n\t\t\t\t\tdstArray = new Float32Array( flatSize );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var i = 0, i4 = dstOffset; i !== nPlanes; ++ i, i4 += 4 ) {\n\n\t\t\t\t\tplane.copy( planes[ i ] ).applyMatrix4( viewMatrix, viewNormalMatrix );\n\n\t\t\t\t\tplane.normal.toArray( dstArray, i4 );\n\t\t\t\t\tdstArray[ i4 + 3 ] = plane.constant;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tuniform.value = dstArray;\n\t\t\tuniform.needsUpdate = true;\n\n\t\t}\n\n\t\tscope.numPlanes = nPlanes;\n\n\t\treturn dstArray;\n\n\t}\n\n}\n\n/**\n * @author thespite / http://www.twitter.com/thespite\n */\n\nfunction WebGLUtils( gl, extensions ) {\n\n\tfunction convert( p ) {\n\n\t\tvar extension;\n\n\t\tif ( p === RepeatWrapping ) return gl.REPEAT;\n\t\tif ( p === ClampToEdgeWrapping ) return gl.CLAMP_TO_EDGE;\n\t\tif ( p === MirroredRepeatWrapping ) return gl.MIRRORED_REPEAT;\n\n\t\tif ( p === NearestFilter ) return gl.NEAREST;\n\t\tif ( p === NearestMipMapNearestFilter ) return gl.NEAREST_MIPMAP_NEAREST;\n\t\tif ( p === NearestMipMapLinearFilter ) return gl.NEAREST_MIPMAP_LINEAR;\n\n\t\tif ( p === LinearFilter ) return gl.LINEAR;\n\t\tif ( p === LinearMipMapNearestFilter ) return gl.LINEAR_MIPMAP_NEAREST;\n\t\tif ( p === LinearMipMapLinearFilter ) return gl.LINEAR_MIPMAP_LINEAR;\n\n\t\tif ( p === UnsignedByteType ) return gl.UNSIGNED_BYTE;\n\t\tif ( p === UnsignedShort4444Type ) return gl.UNSIGNED_SHORT_4_4_4_4;\n\t\tif ( p === UnsignedShort5551Type ) return gl.UNSIGNED_SHORT_5_5_5_1;\n\t\tif ( p === UnsignedShort565Type ) return gl.UNSIGNED_SHORT_5_6_5;\n\n\t\tif ( p === ByteType ) return gl.BYTE;\n\t\tif ( p === ShortType ) return gl.SHORT;\n\t\tif ( p === UnsignedShortType ) return gl.UNSIGNED_SHORT;\n\t\tif ( p === IntType ) return gl.INT;\n\t\tif ( p === UnsignedIntType ) return gl.UNSIGNED_INT;\n\t\tif ( p === FloatType ) return gl.FLOAT;\n\n\t\tif ( p === HalfFloatType ) {\n\n\t\t\textension = extensions.get( 'OES_texture_half_float' );\n\n\t\t\tif ( extension !== null ) return extension.HALF_FLOAT_OES;\n\n\t\t}\n\n\t\tif ( p === AlphaFormat ) return gl.ALPHA;\n\t\tif ( p === RGBFormat ) return gl.RGB;\n\t\tif ( p === RGBAFormat ) return gl.RGBA;\n\t\tif ( p === LuminanceFormat ) return gl.LUMINANCE;\n\t\tif ( p === LuminanceAlphaFormat ) return gl.LUMINANCE_ALPHA;\n\t\tif ( p === DepthFormat ) return gl.DEPTH_COMPONENT;\n\t\tif ( p === DepthStencilFormat ) return gl.DEPTH_STENCIL;\n\n\t\tif ( p === AddEquation ) return gl.FUNC_ADD;\n\t\tif ( p === SubtractEquation ) return gl.FUNC_SUBTRACT;\n\t\tif ( p === ReverseSubtractEquation ) return gl.FUNC_REVERSE_SUBTRACT;\n\n\t\tif ( p === ZeroFactor ) return gl.ZERO;\n\t\tif ( p === OneFactor ) return gl.ONE;\n\t\tif ( p === SrcColorFactor ) return gl.SRC_COLOR;\n\t\tif ( p === OneMinusSrcColorFactor ) return gl.ONE_MINUS_SRC_COLOR;\n\t\tif ( p === SrcAlphaFactor ) return gl.SRC_ALPHA;\n\t\tif ( p === OneMinusSrcAlphaFactor ) return gl.ONE_MINUS_SRC_ALPHA;\n\t\tif ( p === DstAlphaFactor ) return gl.DST_ALPHA;\n\t\tif ( p === OneMinusDstAlphaFactor ) return gl.ONE_MINUS_DST_ALPHA;\n\n\t\tif ( p === DstColorFactor ) return gl.DST_COLOR;\n\t\tif ( p === OneMinusDstColorFactor ) return gl.ONE_MINUS_DST_COLOR;\n\t\tif ( p === SrcAlphaSaturateFactor ) return gl.SRC_ALPHA_SATURATE;\n\n\t\tif ( p === RGB_S3TC_DXT1_Format || p === RGBA_S3TC_DXT1_Format ||\n\t\t\tp === RGBA_S3TC_DXT3_Format || p === RGBA_S3TC_DXT5_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_s3tc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_S3TC_DXT1_Format ) return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;\n\t\t\t\tif ( p === RGBA_S3TC_DXT1_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;\n\t\t\t\tif ( p === RGBA_S3TC_DXT3_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;\n\t\t\t\tif ( p === RGBA_S3TC_DXT5_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGB_PVRTC_4BPPV1_Format || p === RGB_PVRTC_2BPPV1_Format ||\n\t\t\tp === RGBA_PVRTC_4BPPV1_Format || p === RGBA_PVRTC_2BPPV1_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_pvrtc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\n\t\t\t\tif ( p === RGB_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\n\t\t\t\tif ( p === RGBA_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\n\t\t\t\tif ( p === RGBA_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGB_ETC1_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_etc1' );\n\n\t\t\tif ( extension !== null ) return extension.COMPRESSED_RGB_ETC1_WEBGL;\n\n\t\t}\n\n\t\tif ( p === MinEquation || p === MaxEquation ) {\n\n\t\t\textension = extensions.get( 'EXT_blend_minmax' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === MinEquation ) return extension.MIN_EXT;\n\t\t\t\tif ( p === MaxEquation ) return extension.MAX_EXT;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === UnsignedInt248Type ) {\n\n\t\t\textension = extensions.get( 'WEBGL_depth_texture' );\n\n\t\t\tif ( extension !== null ) return extension.UNSIGNED_INT_24_8_WEBGL;\n\n\t\t}\n\n\t\treturn 0;\n\n\t}\n\n\treturn { convert: convert };\n\n}\n\n/**\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author szimek / https://github.com/szimek/\n * @author tschw\n */\n\nfunction WebGLRenderer( parameters ) {\n\n\tconsole.log( 'THREE.WebGLRenderer', REVISION );\n\n\tparameters = parameters || {};\n\n\tvar _canvas = parameters.canvas !== undefined ? parameters.canvas : document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' ),\n\t\t_context = parameters.context !== undefined ? parameters.context : null,\n\n\t\t_alpha = parameters.alpha !== undefined ? parameters.alpha : false,\n\t\t_depth = parameters.depth !== undefined ? parameters.depth : true,\n\t\t_stencil = parameters.stencil !== undefined ? parameters.stencil : true,\n\t\t_antialias = parameters.antialias !== undefined ? parameters.antialias : false,\n\t\t_premultipliedAlpha = parameters.premultipliedAlpha !== undefined ? parameters.premultipliedAlpha : true,\n\t\t_preserveDrawingBuffer = parameters.preserveDrawingBuffer !== undefined ? parameters.preserveDrawingBuffer : false,\n\t\t_powerPreference = parameters.powerPreference !== undefined ? parameters.powerPreference : 'default';\n\n\tvar lightsArray = [];\n\tvar shadowsArray = [];\n\n\tvar currentRenderList = null;\n\n\tvar spritesArray = [];\n\tvar flaresArray = [];\n\n\t// public properties\n\n\tthis.domElement = _canvas;\n\tthis.context = null;\n\n\t// clearing\n\n\tthis.autoClear = true;\n\tthis.autoClearColor = true;\n\tthis.autoClearDepth = true;\n\tthis.autoClearStencil = true;\n\n\t// scene graph\n\n\tthis.sortObjects = true;\n\n\t// user-defined clipping\n\n\tthis.clippingPlanes = [];\n\tthis.localClippingEnabled = false;\n\n\t// physically based shading\n\n\tthis.gammaFactor = 2.0;\t// for backwards compatibility\n\tthis.gammaInput = false;\n\tthis.gammaOutput = false;\n\n\t// physical lights\n\n\tthis.physicallyCorrectLights = false;\n\n\t// tone mapping\n\n\tthis.toneMapping = LinearToneMapping;\n\tthis.toneMappingExposure = 1.0;\n\tthis.toneMappingWhitePoint = 1.0;\n\n\t// morphs\n\n\tthis.maxMorphTargets = 8;\n\tthis.maxMorphNormals = 4;\n\n\t// internal properties\n\n\tvar _this = this,\n\n\t\t_isContextLost = false,\n\n\t\t// internal state cache\n\n\t\t_currentRenderTarget = null,\n\t\t_currentFramebuffer = null,\n\t\t_currentMaterialId = - 1,\n\t\t_currentGeometryProgram = '',\n\n\t\t_currentCamera = null,\n\t\t_currentArrayCamera = null,\n\n\t\t_currentViewport = new Vector4(),\n\t\t_currentScissor = new Vector4(),\n\t\t_currentScissorTest = null,\n\n\t\t//\n\n\t\t_usedTextureUnits = 0,\n\n\t\t//\n\n\t\t_width = _canvas.width,\n\t\t_height = _canvas.height,\n\n\t\t_pixelRatio = 1,\n\n\t\t_viewport = new Vector4( 0, 0, _width, _height ),\n\t\t_scissor = new Vector4( 0, 0, _width, _height ),\n\t\t_scissorTest = false,\n\n\t\t// frustum\n\n\t\t_frustum = new Frustum(),\n\n\t\t// clipping\n\n\t\t_clipping = new WebGLClipping(),\n\t\t_clippingEnabled = false,\n\t\t_localClippingEnabled = false,\n\n\t\t// camera matrices cache\n\n\t\t_projScreenMatrix = new Matrix4(),\n\n\t\t_vector3 = new Vector3(),\n\n\t\t// info\n\n\t\t_infoMemory = {\n\t\t\tgeometries: 0,\n\t\t\ttextures: 0\n\t\t},\n\n\t\t_infoRender = {\n\n\t\t\tframe: 0,\n\t\t\tcalls: 0,\n\t\t\tvertices: 0,\n\t\t\tfaces: 0,\n\t\t\tpoints: 0\n\n\t\t};\n\n\tthis.info = {\n\n\t\trender: _infoRender,\n\t\tmemory: _infoMemory,\n\t\tprograms: null\n\n\t};\n\n\tfunction getTargetPixelRatio() {\n\n\t\treturn _currentRenderTarget === null ? _pixelRatio : 1;\n\n\t}\n\n\t// initialize\n\n\tvar _gl;\n\n\ttry {\n\n\t\tvar contextAttributes = {\n\t\t\talpha: _alpha,\n\t\t\tdepth: _depth,\n\t\t\tstencil: _stencil,\n\t\t\tantialias: _antialias,\n\t\t\tpremultipliedAlpha: _premultipliedAlpha,\n\t\t\tpreserveDrawingBuffer: _preserveDrawingBuffer,\n\t\t\tpowerPreference: _powerPreference\n\t\t};\n\n\t\t// event listeners must be registered before WebGL context is created, see #12753\n\n\t\t_canvas.addEventListener( 'webglcontextlost', onContextLost, false );\n\t\t_canvas.addEventListener( 'webglcontextrestored', onContextRestore, false );\n\n\t\t_gl = _context || _canvas.getContext( 'webgl', contextAttributes ) || _canvas.getContext( 'experimental-webgl', contextAttributes );\n\n\t\tif ( _gl === null ) {\n\n\t\t\tif ( _canvas.getContext( 'webgl' ) !== null ) {\n\n\t\t\t\tthrow new Error( 'Error creating WebGL context with your selected attributes.' );\n\n\t\t\t} else {\n\n\t\t\t\tthrow new Error( 'Error creating WebGL context.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Some experimental-webgl implementations do not have getShaderPrecisionFormat\n\n\t\tif ( _gl.getShaderPrecisionFormat === undefined ) {\n\n\t\t\t_gl.getShaderPrecisionFormat = function () {\n\n\t\t\t\treturn { 'rangeMin': 1, 'rangeMax': 1, 'precision': 1 };\n\n\t\t\t};\n\n\t\t}\n\n\t} catch ( error ) {\n\n\t\tconsole.error( 'THREE.WebGLRenderer: ' + error.message );\n\n\t}\n\n\tvar extensions, capabilities, state;\n\tvar properties, textures, attributes, geometries, objects, lights;\n\tvar programCache, renderLists;\n\n\tvar background, morphtargets, bufferRenderer, indexedBufferRenderer;\n\tvar flareRenderer, spriteRenderer;\n\n\tvar utils;\n\n\tfunction initGLContext() {\n\n\t\textensions = new WebGLExtensions( _gl );\n\t\textensions.get( 'WEBGL_depth_texture' );\n\t\textensions.get( 'OES_texture_float' );\n\t\textensions.get( 'OES_texture_float_linear' );\n\t\textensions.get( 'OES_texture_half_float' );\n\t\textensions.get( 'OES_texture_half_float_linear' );\n\t\textensions.get( 'OES_standard_derivatives' );\n\t\textensions.get( 'OES_element_index_uint' );\n\t\textensions.get( 'ANGLE_instanced_arrays' );\n\n\t\tutils = new WebGLUtils( _gl, extensions );\n\n\t\tcapabilities = new WebGLCapabilities( _gl, extensions, parameters );\n\n\t\tstate = new WebGLState( _gl, extensions, utils );\n\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ) );\n\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ) );\n\n\t\tproperties = new WebGLProperties();\n\t\ttextures = new WebGLTextures( _gl, extensions, state, properties, capabilities, utils, _infoMemory );\n\t\tattributes = new WebGLAttributes( _gl );\n\t\tgeometries = new WebGLGeometries( _gl, attributes, _infoMemory );\n\t\tobjects = new WebGLObjects( geometries, _infoRender );\n\t\tmorphtargets = new WebGLMorphtargets( _gl );\n\t\tprogramCache = new WebGLPrograms( _this, extensions, capabilities );\n\t\tlights = new WebGLLights();\n\t\trenderLists = new WebGLRenderLists();\n\n\t\tbackground = new WebGLBackground( _this, state, geometries, _premultipliedAlpha );\n\n\t\tbufferRenderer = new WebGLBufferRenderer( _gl, extensions, _infoRender );\n\t\tindexedBufferRenderer = new WebGLIndexedBufferRenderer( _gl, extensions, _infoRender );\n\n\t\tflareRenderer = new WebGLFlareRenderer( _this, _gl, state, textures, capabilities );\n\t\tspriteRenderer = new WebGLSpriteRenderer( _this, _gl, state, textures, capabilities );\n\n\t\t_this.info.programs = programCache.programs;\n\n\t\t_this.context = _gl;\n\t\t_this.capabilities = capabilities;\n\t\t_this.extensions = extensions;\n\t\t_this.properties = properties;\n\t\t_this.renderLists = renderLists;\n\t\t_this.state = state;\n\n\t}\n\n\tinitGLContext();\n\n\t// vr\n\n\tvar vr = new WebVRManager( _this );\n\n\tthis.vr = vr;\n\n\t// shadow map\n\n\tvar shadowMap = new WebGLShadowMap( _this, objects, capabilities.maxTextureSize );\n\n\tthis.shadowMap = shadowMap;\n\n\t// API\n\n\tthis.getContext = function () {\n\n\t\treturn _gl;\n\n\t};\n\n\tthis.getContextAttributes = function () {\n\n\t\treturn _gl.getContextAttributes();\n\n\t};\n\n\tthis.forceContextLoss = function () {\n\n\t\tvar extension = extensions.get( 'WEBGL_lose_context' );\n\t\tif ( extension ) extension.loseContext();\n\n\t};\n\n\tthis.forceContextRestore = function () {\n\n\t\tvar extension = extensions.get( 'WEBGL_lose_context' );\n\t\tif ( extension ) extension.restoreContext();\n\n\t};\n\n\tthis.getPixelRatio = function () {\n\n\t\treturn _pixelRatio;\n\n\t};\n\n\tthis.setPixelRatio = function ( value ) {\n\n\t\tif ( value === undefined ) return;\n\n\t\t_pixelRatio = value;\n\n\t\tthis.setSize( _width, _height, false );\n\n\t};\n\n\tthis.getSize = function () {\n\n\t\treturn {\n\t\t\twidth: _width,\n\t\t\theight: _height\n\t\t};\n\n\t};\n\n\tthis.setSize = function ( width, height, updateStyle ) {\n\n\t\tvar device = vr.getDevice();\n\n\t\tif ( device && device.isPresenting ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Can\\'t change size while VR device is presenting.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\t_width = width;\n\t\t_height = height;\n\n\t\t_canvas.width = width * _pixelRatio;\n\t\t_canvas.height = height * _pixelRatio;\n\n\t\tif ( updateStyle !== false ) {\n\n\t\t\t_canvas.style.width = width + 'px';\n\t\t\t_canvas.style.height = height + 'px';\n\n\t\t}\n\n\t\tthis.setViewport( 0, 0, width, height );\n\n\t};\n\n\tthis.getDrawingBufferSize = function () {\n\n\t\treturn {\n\t\t\twidth: _width * _pixelRatio,\n\t\t\theight: _height * _pixelRatio\n\t\t};\n\n\t};\n\n\tthis.setDrawingBufferSize = function ( width, height, pixelRatio ) {\n\n\t\t_width = width;\n\t\t_height = height;\n\n\t\t_pixelRatio = pixelRatio;\n\n\t\t_canvas.width = width * pixelRatio;\n\t\t_canvas.height = height * pixelRatio;\n\n\t\tthis.setViewport( 0, 0, width, height );\n\n\t};\n\n\tthis.setViewport = function ( x, y, width, height ) {\n\n\t\t_viewport.set( x, _height - y - height, width, height );\n\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ) );\n\n\t};\n\n\tthis.setScissor = function ( x, y, width, height ) {\n\n\t\t_scissor.set( x, _height - y - height, width, height );\n\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ) );\n\n\t};\n\n\tthis.setScissorTest = function ( boolean ) {\n\n\t\tstate.setScissorTest( _scissorTest = boolean );\n\n\t};\n\n\t// Clearing\n\n\tthis.getClearColor = function () {\n\n\t\treturn background.getClearColor();\n\n\t};\n\n\tthis.setClearColor = function () {\n\n\t\tbackground.setClearColor.apply( background, arguments );\n\n\t};\n\n\tthis.getClearAlpha = function () {\n\n\t\treturn background.getClearAlpha();\n\n\t};\n\n\tthis.setClearAlpha = function () {\n\n\t\tbackground.setClearAlpha.apply( background, arguments );\n\n\t};\n\n\tthis.clear = function ( color, depth, stencil ) {\n\n\t\tvar bits = 0;\n\n\t\tif ( color === undefined || color ) bits |= _gl.COLOR_BUFFER_BIT;\n\t\tif ( depth === undefined || depth ) bits |= _gl.DEPTH_BUFFER_BIT;\n\t\tif ( stencil === undefined || stencil ) bits |= _gl.STENCIL_BUFFER_BIT;\n\n\t\t_gl.clear( bits );\n\n\t};\n\n\tthis.clearColor = function () {\n\n\t\tthis.clear( true, false, false );\n\n\t};\n\n\tthis.clearDepth = function () {\n\n\t\tthis.clear( false, true, false );\n\n\t};\n\n\tthis.clearStencil = function () {\n\n\t\tthis.clear( false, false, true );\n\n\t};\n\n\tthis.clearTarget = function ( renderTarget, color, depth, stencil ) {\n\n\t\tthis.setRenderTarget( renderTarget );\n\t\tthis.clear( color, depth, stencil );\n\n\t};\n\n\t//\n\n\tthis.dispose = function () {\n\n\t\t_canvas.removeEventListener( 'webglcontextlost', onContextLost, false );\n\t\t_canvas.removeEventListener( 'webglcontextrestored', onContextRestore, false );\n\n\t\trenderLists.dispose();\n\n\t\tvr.dispose();\n\n\t};\n\n\t// Events\n\n\tfunction onContextLost( event ) {\n\n\t\tevent.preventDefault();\n\n\t\tconsole.log( 'THREE.WebGLRenderer: Context Lost.' );\n\n\t\t_isContextLost = true;\n\n\t}\n\n\tfunction onContextRestore( /* event */ ) {\n\n\t\tconsole.log( 'THREE.WebGLRenderer: Context Restored.' );\n\n\t\t_isContextLost = false;\n\n\t\tinitGLContext();\n\n\t}\n\n\tfunction onMaterialDispose( event ) {\n\n\t\tvar material = event.target;\n\n\t\tmaterial.removeEventListener( 'dispose', onMaterialDispose );\n\n\t\tdeallocateMaterial( material );\n\n\t}\n\n\t// Buffer deallocation\n\n\tfunction deallocateMaterial( material ) {\n\n\t\treleaseMaterialProgramReference( material );\n\n\t\tproperties.remove( material );\n\n\t}\n\n\n\tfunction releaseMaterialProgramReference( material ) {\n\n\t\tvar programInfo = properties.get( material ).program;\n\n\t\tmaterial.program = undefined;\n\n\t\tif ( programInfo !== undefined ) {\n\n\t\t\tprogramCache.releaseProgram( programInfo );\n\n\t\t}\n\n\t}\n\n\t// Buffer rendering\n\n\tfunction renderObjectImmediate( object, program, material ) {\n\n\t\tobject.render( function ( object ) {\n\n\t\t\t_this.renderBufferImmediate( object, program, material );\n\n\t\t} );\n\n\t}\n\n\tthis.renderBufferImmediate = function ( object, program, material ) {\n\n\t\tstate.initAttributes();\n\n\t\tvar buffers = properties.get( object );\n\n\t\tif ( object.hasPositions && ! buffers.position ) buffers.position = _gl.createBuffer();\n\t\tif ( object.hasNormals && ! buffers.normal ) buffers.normal = _gl.createBuffer();\n\t\tif ( object.hasUvs && ! buffers.uv ) buffers.uv = _gl.createBuffer();\n\t\tif ( object.hasColors && ! buffers.color ) buffers.color = _gl.createBuffer();\n\n\t\tvar programAttributes = program.getAttributes();\n\n\t\tif ( object.hasPositions ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.position );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.positionArray, _gl.DYNAMIC_DRAW );\n\n\t\t\tstate.enableAttribute( programAttributes.position );\n\t\t\t_gl.vertexAttribPointer( programAttributes.position, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasNormals ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.normal );\n\n\t\t\tif ( ! material.isMeshPhongMaterial &&\n\t\t\t\t! material.isMeshStandardMaterial &&\n\t\t\t\t! material.isMeshNormalMaterial &&\n\t\t\t\tmaterial.flatShading === true ) {\n\n\t\t\t\tfor ( var i = 0, l = object.count * 3; i < l; i += 9 ) {\n\n\t\t\t\t\tvar array = object.normalArray;\n\n\t\t\t\t\tvar nx = ( array[ i + 0 ] + array[ i + 3 ] + array[ i + 6 ] ) / 3;\n\t\t\t\t\tvar ny = ( array[ i + 1 ] + array[ i + 4 ] + array[ i + 7 ] ) / 3;\n\t\t\t\t\tvar nz = ( array[ i + 2 ] + array[ i + 5 ] + array[ i + 8 ] ) / 3;\n\n\t\t\t\t\tarray[ i + 0 ] = nx;\n\t\t\t\t\tarray[ i + 1 ] = ny;\n\t\t\t\t\tarray[ i + 2 ] = nz;\n\n\t\t\t\t\tarray[ i + 3 ] = nx;\n\t\t\t\t\tarray[ i + 4 ] = ny;\n\t\t\t\t\tarray[ i + 5 ] = nz;\n\n\t\t\t\t\tarray[ i + 6 ] = nx;\n\t\t\t\t\tarray[ i + 7 ] = ny;\n\t\t\t\t\tarray[ i + 8 ] = nz;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.normalArray, _gl.DYNAMIC_DRAW );\n\n\t\t\tstate.enableAttribute( programAttributes.normal );\n\n\t\t\t_gl.vertexAttribPointer( programAttributes.normal, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasUvs && material.map ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.uv );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.uvArray, _gl.DYNAMIC_DRAW );\n\n\t\t\tstate.enableAttribute( programAttributes.uv );\n\n\t\t\t_gl.vertexAttribPointer( programAttributes.uv, 2, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasColors && material.vertexColors !== NoColors ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.color );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.colorArray, _gl.DYNAMIC_DRAW );\n\n\t\t\tstate.enableAttribute( programAttributes.color );\n\n\t\t\t_gl.vertexAttribPointer( programAttributes.color, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tstate.disableUnusedAttributes();\n\n\t\t_gl.drawArrays( _gl.TRIANGLES, 0, object.count );\n\n\t\tobject.count = 0;\n\n\t};\n\n\tthis.renderBufferDirect = function ( camera, fog, geometry, material, object, group ) {\n\n\t\tvar frontFaceCW = ( object.isMesh && object.matrixWorld.determinant() < 0 );\n\n\t\tstate.setMaterial( material, frontFaceCW );\n\n\t\tvar program = setProgram( camera, fog, material, object );\n\t\tvar geometryProgram = geometry.id + '_' + program.id + '_' + ( material.wireframe === true );\n\n\t\tvar updateBuffers = false;\n\n\t\tif ( geometryProgram !== _currentGeometryProgram ) {\n\n\t\t\t_currentGeometryProgram = geometryProgram;\n\t\t\tupdateBuffers = true;\n\n\t\t}\n\n\t\tif ( object.morphTargetInfluences ) {\n\n\t\t\tmorphtargets.update( object, geometry, material, program );\n\n\t\t\tupdateBuffers = true;\n\n\t\t}\n\n\t\t//\n\n\t\tvar index = geometry.index;\n\t\tvar position = geometry.attributes.position;\n\t\tvar rangeFactor = 1;\n\n\t\tif ( material.wireframe === true ) {\n\n\t\t\tindex = geometries.getWireframeAttribute( geometry );\n\t\t\trangeFactor = 2;\n\n\t\t}\n\n\t\tvar attribute;\n\t\tvar renderer = bufferRenderer;\n\n\t\tif ( index !== null ) {\n\n\t\t\tattribute = attributes.get( index );\n\n\t\t\trenderer = indexedBufferRenderer;\n\t\t\trenderer.setIndex( attribute );\n\n\t\t}\n\n\t\tif ( updateBuffers ) {\n\n\t\t\tsetupVertexAttributes( material, program, geometry );\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, attribute.buffer );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tvar dataCount = 0;\n\n\t\tif ( index !== null ) {\n\n\t\t\tdataCount = index.count;\n\n\t\t} else if ( position !== undefined ) {\n\n\t\t\tdataCount = position.count;\n\n\t\t}\n\n\t\tvar rangeStart = geometry.drawRange.start * rangeFactor;\n\t\tvar rangeCount = geometry.drawRange.count * rangeFactor;\n\n\t\tvar groupStart = group !== null ? group.start * rangeFactor : 0;\n\t\tvar groupCount = group !== null ? group.count * rangeFactor : Infinity;\n\n\t\tvar drawStart = Math.max( rangeStart, groupStart );\n\t\tvar drawEnd = Math.min( dataCount, rangeStart + rangeCount, groupStart + groupCount ) - 1;\n\n\t\tvar drawCount = Math.max( 0, drawEnd - drawStart + 1 );\n\n\t\tif ( drawCount === 0 ) return;\n\n\t\t//\n\n\t\tif ( object.isMesh ) {\n\n\t\t\tif ( material.wireframe === true ) {\n\n\t\t\t\tstate.setLineWidth( material.wireframeLinewidth * getTargetPixelRatio() );\n\t\t\t\trenderer.setMode( _gl.LINES );\n\n\t\t\t} else {\n\n\t\t\t\tswitch ( object.drawMode ) {\n\n\t\t\t\t\tcase TrianglesDrawMode:\n\t\t\t\t\t\trenderer.setMode( _gl.TRIANGLES );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase TriangleStripDrawMode:\n\t\t\t\t\t\trenderer.setMode( _gl.TRIANGLE_STRIP );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase TriangleFanDrawMode:\n\t\t\t\t\t\trenderer.setMode( _gl.TRIANGLE_FAN );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t} else if ( object.isLine ) {\n\n\t\t\tvar lineWidth = material.linewidth;\n\n\t\t\tif ( lineWidth === undefined ) lineWidth = 1; // Not using Line*Material\n\n\t\t\tstate.setLineWidth( lineWidth * getTargetPixelRatio() );\n\n\t\t\tif ( object.isLineSegments ) {\n\n\t\t\t\trenderer.setMode( _gl.LINES );\n\n\t\t\t} else if ( object.isLineLoop ) {\n\n\t\t\t\trenderer.setMode( _gl.LINE_LOOP );\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setMode( _gl.LINE_STRIP );\n\n\t\t\t}\n\n\t\t} else if ( object.isPoints ) {\n\n\t\t\trenderer.setMode( _gl.POINTS );\n\n\t\t}\n\n\t\tif ( geometry && geometry.isInstancedBufferGeometry ) {\n\n\t\t\tif ( geometry.maxInstancedCount > 0 ) {\n\n\t\t\t\trenderer.renderInstances( geometry, drawStart, drawCount );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\trenderer.render( drawStart, drawCount );\n\n\t\t}\n\n\t};\n\n\tfunction setupVertexAttributes( material, program, geometry, startIndex ) {\n\n\t\tif ( geometry && geometry.isInstancedBufferGeometry ) {\n\n\t\t\tif ( extensions.get( 'ANGLE_instanced_arrays' ) === null ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( startIndex === undefined ) startIndex = 0;\n\n\t\tstate.initAttributes();\n\n\t\tvar geometryAttributes = geometry.attributes;\n\n\t\tvar programAttributes = program.getAttributes();\n\n\t\tvar materialDefaultAttributeValues = material.defaultAttributeValues;\n\n\t\tfor ( var name in programAttributes ) {\n\n\t\t\tvar programAttribute = programAttributes[ name ];\n\n\t\t\tif ( programAttribute >= 0 ) {\n\n\t\t\t\tvar geometryAttribute = geometryAttributes[ name ];\n\n\t\t\t\tif ( geometryAttribute !== undefined ) {\n\n\t\t\t\t\tvar normalized = geometryAttribute.normalized;\n\t\t\t\t\tvar size = geometryAttribute.itemSize;\n\n\t\t\t\t\tvar attribute = attributes.get( geometryAttribute );\n\n\t\t\t\t\t// TODO Attribute may not be available on context restore\n\n\t\t\t\t\tif ( attribute === undefined ) continue;\n\n\t\t\t\t\tvar buffer = attribute.buffer;\n\t\t\t\t\tvar type = attribute.type;\n\t\t\t\t\tvar bytesPerElement = attribute.bytesPerElement;\n\n\t\t\t\t\tif ( geometryAttribute.isInterleavedBufferAttribute ) {\n\n\t\t\t\t\t\tvar data = geometryAttribute.data;\n\t\t\t\t\t\tvar stride = data.stride;\n\t\t\t\t\t\tvar offset = geometryAttribute.offset;\n\n\t\t\t\t\t\tif ( data && data.isInstancedInterleavedBuffer ) {\n\n\t\t\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute, data.meshPerAttribute );\n\n\t\t\t\t\t\t\tif ( geometry.maxInstancedCount === undefined ) {\n\n\t\t\t\t\t\t\t\tgeometry.maxInstancedCount = data.meshPerAttribute * data.count;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.enableAttribute( programAttribute );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffer );\n\t\t\t\t\t\t_gl.vertexAttribPointer( programAttribute, size, type, normalized, stride * bytesPerElement, ( startIndex * stride + offset ) * bytesPerElement );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( geometryAttribute.isInstancedBufferAttribute ) {\n\n\t\t\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute, geometryAttribute.meshPerAttribute );\n\n\t\t\t\t\t\t\tif ( geometry.maxInstancedCount === undefined ) {\n\n\t\t\t\t\t\t\t\tgeometry.maxInstancedCount = geometryAttribute.meshPerAttribute * geometryAttribute.count;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.enableAttribute( programAttribute );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffer );\n\t\t\t\t\t\t_gl.vertexAttribPointer( programAttribute, size, type, normalized, 0, startIndex * size * bytesPerElement );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( materialDefaultAttributeValues !== undefined ) {\n\n\t\t\t\t\tvar value = materialDefaultAttributeValues[ name ];\n\n\t\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\t\tswitch ( value.length ) {\n\n\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\t_gl.vertexAttrib2fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\t\t_gl.vertexAttrib3fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 4:\n\t\t\t\t\t\t\t\t_gl.vertexAttrib4fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t_gl.vertexAttrib1fv( programAttribute, value );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.disableUnusedAttributes();\n\n\t}\n\n\t// Compile\n\n\tthis.compile = function ( scene, camera ) {\n\n\t\tlightsArray.length = 0;\n\t\tshadowsArray.length = 0;\n\n\t\tscene.traverse( function ( object ) {\n\n\t\t\tif ( object.isLight ) {\n\n\t\t\t\tlightsArray.push( object );\n\n\t\t\t\tif ( object.castShadow ) {\n\n\t\t\t\t\tshadowsArray.push( object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t\tlights.setup( lightsArray, shadowsArray, camera );\n\n\t\tscene.traverse( function ( object ) {\n\n\t\t\tif ( object.material ) {\n\n\t\t\t\tif ( Array.isArray( object.material ) ) {\n\n\t\t\t\t\tfor ( var i = 0; i < object.material.length; i ++ ) {\n\n\t\t\t\t\t\tinitMaterial( object.material[ i ], scene.fog, object );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tinitMaterial( object.material, scene.fog, object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t};\n\n\t// Animation Loop\n\n\tvar isAnimating = false;\n\tvar onAnimationFrame = null;\n\n\tfunction start() {\n\n\t\tif ( isAnimating ) return;\n\n\t\tvar device = vr.getDevice();\n\n\t\tif ( device && device.isPresenting ) {\n\n\t\t\tdevice.requestAnimationFrame( loop );\n\n\t\t} else {\n\n\t\t\twindow.requestAnimationFrame( loop );\n\n\t\t}\n\n\t\tisAnimating = true;\n\n\t}\n\n\tfunction loop( time ) {\n\n\t\tif ( onAnimationFrame !== null ) onAnimationFrame( time );\n\n\t\tvar device = vr.getDevice();\n\n\t\tif ( device && device.isPresenting ) {\n\n\t\t\tdevice.requestAnimationFrame( loop );\n\n\t\t} else {\n\n\t\t\twindow.requestAnimationFrame( loop );\n\n\t\t}\n\n\t}\n\n\tthis.animate = function ( callback ) {\n\n\t\tonAnimationFrame = callback;\n\t\tstart();\n\n\t};\n\n\t// Rendering\n\n\tthis.render = function ( scene, camera, renderTarget, forceClear ) {\n\n\t\tif ( ! ( camera && camera.isCamera ) ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( _isContextLost ) return;\n\n\t\t// reset caching for this frame\n\n\t\t_currentGeometryProgram = '';\n\t\t_currentMaterialId = - 1;\n\t\t_currentCamera = null;\n\n\t\t// update scene graph\n\n\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\n\n\t\t// update camera matrices and frustum\n\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t\tif ( vr.enabled ) {\n\n\t\t\tcamera = vr.getCamera( camera );\n\n\t\t}\n\n\t\t_projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\n\t\t_frustum.setFromMatrix( _projScreenMatrix );\n\n\t\tlightsArray.length = 0;\n\t\tshadowsArray.length = 0;\n\n\t\tspritesArray.length = 0;\n\t\tflaresArray.length = 0;\n\n\t\t_localClippingEnabled = this.localClippingEnabled;\n\t\t_clippingEnabled = _clipping.init( this.clippingPlanes, _localClippingEnabled, camera );\n\n\t\tcurrentRenderList = renderLists.get( scene, camera );\n\t\tcurrentRenderList.init();\n\n\t\tprojectObject( scene, camera, _this.sortObjects );\n\n\t\tif ( _this.sortObjects === true ) {\n\n\t\t\tcurrentRenderList.sort();\n\n\t\t}\n\n\t\t//\n\n\t\ttextures.updateVideoTextures();\n\n\t\t//\n\n\t\tif ( _clippingEnabled ) _clipping.beginShadows();\n\n\t\tshadowMap.render( shadowsArray, scene, camera );\n\n\t\tlights.setup( lightsArray, shadowsArray, camera );\n\n\t\tif ( _clippingEnabled ) _clipping.endShadows();\n\n\t\t//\n\n\t\t_infoRender.frame ++;\n\t\t_infoRender.calls = 0;\n\t\t_infoRender.vertices = 0;\n\t\t_infoRender.faces = 0;\n\t\t_infoRender.points = 0;\n\n\t\tif ( renderTarget === undefined ) {\n\n\t\t\trenderTarget = null;\n\n\t\t}\n\n\t\tthis.setRenderTarget( renderTarget );\n\n\t\t//\n\n\t\tbackground.render( currentRenderList, scene, camera, forceClear );\n\n\t\t// render scene\n\n\t\tvar opaqueObjects = currentRenderList.opaque;\n\t\tvar transparentObjects = currentRenderList.transparent;\n\n\t\tif ( scene.overrideMaterial ) {\n\n\t\t\tvar overrideMaterial = scene.overrideMaterial;\n\n\t\t\tif ( opaqueObjects.length ) renderObjects( opaqueObjects, scene, camera, overrideMaterial );\n\t\t\tif ( transparentObjects.length ) renderObjects( transparentObjects, scene, camera, overrideMaterial );\n\n\t\t} else {\n\n\t\t\t// opaque pass (front-to-back order)\n\n\t\t\tif ( opaqueObjects.length ) renderObjects( opaqueObjects, scene, camera );\n\n\t\t\t// transparent pass (back-to-front order)\n\n\t\t\tif ( transparentObjects.length ) renderObjects( transparentObjects, scene, camera );\n\n\t\t}\n\n\t\t// custom renderers\n\n\t\tspriteRenderer.render( spritesArray, scene, camera );\n\t\tflareRenderer.render( flaresArray, scene, camera, _currentViewport );\n\n\t\t// Generate mipmap if we're using any kind of mipmap filtering\n\n\t\tif ( renderTarget ) {\n\n\t\t\ttextures.updateRenderTargetMipmap( renderTarget );\n\n\t\t}\n\n\t\t// Ensure depth buffer writing is enabled so it can be cleared on next render\n\n\t\tstate.buffers.depth.setTest( true );\n\t\tstate.buffers.depth.setMask( true );\n\t\tstate.buffers.color.setMask( true );\n\n\t\tstate.setPolygonOffset( false );\n\n\t\tif ( vr.enabled ) {\n\n\t\t\tvr.submitFrame();\n\n\t\t}\n\n\t\t// _gl.finish();\n\n\t};\n\n\t/*\n\t// TODO Duplicated code (Frustum)\n\n\tvar _sphere = new Sphere();\n\n\tfunction isObjectViewable( object ) {\n\n\t\tvar geometry = object.geometry;\n\n\t\tif ( geometry.boundingSphere === null )\n\t\t\tgeometry.computeBoundingSphere();\n\n\t\t_sphere.copy( geometry.boundingSphere ).\n\t\tapplyMatrix4( object.matrixWorld );\n\n\t\treturn isSphereViewable( _sphere );\n\n\t}\n\n\tfunction isSpriteViewable( sprite ) {\n\n\t\t_sphere.center.set( 0, 0, 0 );\n\t\t_sphere.radius = 0.7071067811865476;\n\t\t_sphere.applyMatrix4( sprite.matrixWorld );\n\n\t\treturn isSphereViewable( _sphere );\n\n\t}\n\n\tfunction isSphereViewable( sphere ) {\n\n\t\tif ( ! _frustum.intersectsSphere( sphere ) ) return false;\n\n\t\tvar numPlanes = _clipping.numPlanes;\n\n\t\tif ( numPlanes === 0 ) return true;\n\n\t\tvar planes = _this.clippingPlanes,\n\n\t\t\tcenter = sphere.center,\n\t\t\tnegRad = - sphere.radius,\n\t\t\ti = 0;\n\n\t\tdo {\n\n\t\t\t// out when deeper than radius in the negative halfspace\n\t\t\tif ( planes[ i ].distanceToPoint( center ) < negRad ) return false;\n\n\t\t} while ( ++ i !== numPlanes );\n\n\t\treturn true;\n\n\t}\n\t*/\n\n\tfunction projectObject( object, camera, sortObjects ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tvar visible = object.layers.test( camera.layers );\n\n\t\tif ( visible ) {\n\n\t\t\tif ( object.isLight ) {\n\n\t\t\t\tlightsArray.push( object );\n\n\t\t\t\tif ( object.castShadow ) {\n\n\t\t\t\t\tshadowsArray.push( object );\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.isSprite ) {\n\n\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsSprite( object ) ) {\n\n\t\t\t\t\tspritesArray.push( object );\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.isLensFlare ) {\n\n\t\t\t\tflaresArray.push( object );\n\n\t\t\t} else if ( object.isImmediateRenderObject ) {\n\n\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t}\n\n\t\t\t\tcurrentRenderList.push( object, null, object.material, _vector3.z, null );\n\n\t\t\t} else if ( object.isMesh || object.isLine || object.isPoints ) {\n\n\t\t\t\tif ( object.isSkinnedMesh ) {\n\n\t\t\t\t\tobject.skeleton.update();\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) {\n\n\t\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar geometry = objects.update( object );\n\t\t\t\t\tvar material = object.material;\n\n\t\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\t\tvar groups = geometry.groups;\n\n\t\t\t\t\t\tfor ( var i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\t\t\t\t\tvar group = groups[ i ];\n\t\t\t\t\t\t\tvar groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\t\tif ( groupMaterial && groupMaterial.visible ) {\n\n\t\t\t\t\t\t\t\tcurrentRenderList.push( object, geometry, groupMaterial, _vector3.z, group );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( material.visible ) {\n\n\t\t\t\t\t\tcurrentRenderList.push( object, geometry, material, _vector3.z, null );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar children = object.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tprojectObject( children[ i ], camera, sortObjects );\n\n\t\t}\n\n\t}\n\n\tfunction renderObjects( renderList, scene, camera, overrideMaterial ) {\n\n\t\tfor ( var i = 0, l = renderList.length; i < l; i ++ ) {\n\n\t\t\tvar renderItem = renderList[ i ];\n\n\t\t\tvar object = renderItem.object;\n\t\t\tvar geometry = renderItem.geometry;\n\t\t\tvar material = overrideMaterial === undefined ? renderItem.material : overrideMaterial;\n\t\t\tvar group = renderItem.group;\n\n\t\t\tif ( camera.isArrayCamera ) {\n\n\t\t\t\t_currentArrayCamera = camera;\n\n\t\t\t\tvar cameras = camera.cameras;\n\n\t\t\t\tfor ( var j = 0, jl = cameras.length; j < jl; j ++ ) {\n\n\t\t\t\t\tvar camera2 = cameras[ j ];\n\n\t\t\t\t\tif ( object.layers.test( camera2.layers ) ) {\n\n\t\t\t\t\t\tvar bounds = camera2.bounds;\n\n\t\t\t\t\t\tvar x = bounds.x * _width;\n\t\t\t\t\t\tvar y = bounds.y * _height;\n\t\t\t\t\t\tvar width = bounds.z * _width;\n\t\t\t\t\t\tvar height = bounds.w * _height;\n\n\t\t\t\t\t\tstate.viewport( _currentViewport.set( x, y, width, height ).multiplyScalar( _pixelRatio ) );\n\n\t\t\t\t\t\trenderObject( object, scene, camera2, geometry, material, group );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t_currentArrayCamera = null;\n\n\t\t\t\trenderObject( object, scene, camera, geometry, material, group );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction renderObject( object, scene, camera, geometry, material, group ) {\n\n\t\tobject.onBeforeRender( _this, scene, camera, geometry, material, group );\n\n\t\tobject.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\n\t\tobject.normalMatrix.getNormalMatrix( object.modelViewMatrix );\n\n\t\tif ( object.isImmediateRenderObject ) {\n\n\t\t\tvar frontFaceCW = ( object.isMesh && object.matrixWorld.determinant() < 0 );\n\n\t\t\tstate.setMaterial( material, frontFaceCW );\n\n\t\t\tvar program = setProgram( camera, scene.fog, material, object );\n\n\t\t\t_currentGeometryProgram = '';\n\n\t\t\trenderObjectImmediate( object, program, material );\n\n\t\t} else {\n\n\t\t\t_this.renderBufferDirect( camera, scene.fog, geometry, material, object, group );\n\n\t\t}\n\n\t\tobject.onAfterRender( _this, scene, camera, geometry, material, group );\n\n\t}\n\n\tfunction initMaterial( material, fog, object ) {\n\n\t\tvar materialProperties = properties.get( material );\n\n\t\tvar parameters = programCache.getParameters(\n\t\t\tmaterial, lights.state, shadowsArray, fog, _clipping.numPlanes, _clipping.numIntersection, object );\n\n\t\tvar code = programCache.getProgramCode( material, parameters );\n\n\t\tvar program = materialProperties.program;\n\t\tvar programChange = true;\n\n\t\tif ( program === undefined ) {\n\n\t\t\t// new material\n\t\t\tmaterial.addEventListener( 'dispose', onMaterialDispose );\n\n\t\t} else if ( program.code !== code ) {\n\n\t\t\t// changed glsl or parameters\n\t\t\treleaseMaterialProgramReference( material );\n\n\t\t} else if ( parameters.shaderID !== undefined ) {\n\n\t\t\t// same glsl and uniform list\n\t\t\treturn;\n\n\t\t} else {\n\n\t\t\t// only rebuild uniform list\n\t\t\tprogramChange = false;\n\n\t\t}\n\n\t\tif ( programChange ) {\n\n\t\t\tif ( parameters.shaderID ) {\n\n\t\t\t\tvar shader = ShaderLib[ parameters.shaderID ];\n\n\t\t\t\tmaterialProperties.shader = {\n\t\t\t\t\tname: material.type,\n\t\t\t\t\tuniforms: UniformsUtils.clone( shader.uniforms ),\n\t\t\t\t\tvertexShader: shader.vertexShader,\n\t\t\t\t\tfragmentShader: shader.fragmentShader\n\t\t\t\t};\n\n\t\t\t} else {\n\n\t\t\t\tmaterialProperties.shader = {\n\t\t\t\t\tname: material.type,\n\t\t\t\t\tuniforms: material.uniforms,\n\t\t\t\t\tvertexShader: material.vertexShader,\n\t\t\t\t\tfragmentShader: material.fragmentShader\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\tmaterial.onBeforeCompile( materialProperties.shader );\n\n\t\t\tprogram = programCache.acquireProgram( material, materialProperties.shader, parameters, code );\n\n\t\t\tmaterialProperties.program = program;\n\t\t\tmaterial.program = program;\n\n\t\t}\n\n\t\tvar programAttributes = program.getAttributes();\n\n\t\tif ( material.morphTargets ) {\n\n\t\t\tmaterial.numSupportedMorphTargets = 0;\n\n\t\t\tfor ( var i = 0; i < _this.maxMorphTargets; i ++ ) {\n\n\t\t\t\tif ( programAttributes[ 'morphTarget' + i ] >= 0 ) {\n\n\t\t\t\t\tmaterial.numSupportedMorphTargets ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.morphNormals ) {\n\n\t\t\tmaterial.numSupportedMorphNormals = 0;\n\n\t\t\tfor ( var i = 0; i < _this.maxMorphNormals; i ++ ) {\n\n\t\t\t\tif ( programAttributes[ 'morphNormal' + i ] >= 0 ) {\n\n\t\t\t\t\tmaterial.numSupportedMorphNormals ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar uniforms = materialProperties.shader.uniforms;\n\n\t\tif ( ! material.isShaderMaterial &&\n\t\t\t! material.isRawShaderMaterial ||\n\t\t\tmaterial.clipping === true ) {\n\n\t\t\tmaterialProperties.numClippingPlanes = _clipping.numPlanes;\n\t\t\tmaterialProperties.numIntersection = _clipping.numIntersection;\n\t\t\tuniforms.clippingPlanes = _clipping.uniform;\n\n\t\t}\n\n\t\tmaterialProperties.fog = fog;\n\n\t\t// store the light setup it was created for\n\n\t\tmaterialProperties.lightsHash = lights.state.hash;\n\n\t\tif ( material.lights ) {\n\n\t\t\t// wire up the material to this renderer's lighting state\n\n\t\t\tuniforms.ambientLightColor.value = lights.state.ambient;\n\t\t\tuniforms.directionalLights.value = lights.state.directional;\n\t\t\tuniforms.spotLights.value = lights.state.spot;\n\t\t\tuniforms.rectAreaLights.value = lights.state.rectArea;\n\t\t\tuniforms.pointLights.value = lights.state.point;\n\t\t\tuniforms.hemisphereLights.value = lights.state.hemi;\n\n\t\t\tuniforms.directionalShadowMap.value = lights.state.directionalShadowMap;\n\t\t\tuniforms.directionalShadowMatrix.value = lights.state.directionalShadowMatrix;\n\t\t\tuniforms.spotShadowMap.value = lights.state.spotShadowMap;\n\t\t\tuniforms.spotShadowMatrix.value = lights.state.spotShadowMatrix;\n\t\t\tuniforms.pointShadowMap.value = lights.state.pointShadowMap;\n\t\t\tuniforms.pointShadowMatrix.value = lights.state.pointShadowMatrix;\n\t\t\t// TODO (abelnation): add area lights shadow info to uniforms\n\n\t\t}\n\n\t\tvar progUniforms = materialProperties.program.getUniforms(),\n\t\t\tuniformsList =\n\t\t\t\tWebGLUniforms.seqWithValue( progUniforms.seq, uniforms );\n\n\t\tmaterialProperties.uniformsList = uniformsList;\n\n\t}\n\n\tfunction setProgram( camera, fog, material, object ) {\n\n\t\t_usedTextureUnits = 0;\n\n\t\tvar materialProperties = properties.get( material );\n\n\t\tif ( _clippingEnabled ) {\n\n\t\t\tif ( _localClippingEnabled || camera !== _currentCamera ) {\n\n\t\t\t\tvar useCache =\n\t\t\t\t\tcamera === _currentCamera &&\n\t\t\t\t\tmaterial.id === _currentMaterialId;\n\n\t\t\t\t// we might want to call this function with some ClippingGroup\n\t\t\t\t// object instead of the material, once it becomes feasible\n\t\t\t\t// (#8465, #8379)\n\t\t\t\t_clipping.setState(\n\t\t\t\t\tmaterial.clippingPlanes, material.clipIntersection, material.clipShadows,\n\t\t\t\t\tcamera, materialProperties, useCache );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.needsUpdate === false ) {\n\n\t\t\tif ( materialProperties.program === undefined ) {\n\n\t\t\t\tmaterial.needsUpdate = true;\n\n\t\t\t} else if ( material.fog && materialProperties.fog !== fog ) {\n\n\t\t\t\tmaterial.needsUpdate = true;\n\n\t\t\t} else if ( material.lights && materialProperties.lightsHash !== lights.state.hash ) {\n\n\t\t\t\tmaterial.needsUpdate = true;\n\n\t\t\t} else if ( materialProperties.numClippingPlanes !== undefined &&\n\t\t\t\t( materialProperties.numClippingPlanes !== _clipping.numPlanes ||\n\t\t\t\tmaterialProperties.numIntersection !== _clipping.numIntersection ) ) {\n\n\t\t\t\tmaterial.needsUpdate = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.needsUpdate ) {\n\n\t\t\tinitMaterial( material, fog, object );\n\t\t\tmaterial.needsUpdate = false;\n\n\t\t}\n\n\t\tvar refreshProgram = false;\n\t\tvar refreshMaterial = false;\n\t\tvar refreshLights = false;\n\n\t\tvar program = materialProperties.program,\n\t\t\tp_uniforms = program.getUniforms(),\n\t\t\tm_uniforms = materialProperties.shader.uniforms;\n\n\t\tif ( state.useProgram( program.program ) ) {\n\n\t\t\trefreshProgram = true;\n\t\t\trefreshMaterial = true;\n\t\t\trefreshLights = true;\n\n\t\t}\n\n\t\tif ( material.id !== _currentMaterialId ) {\n\n\t\t\t_currentMaterialId = material.id;\n\n\t\t\trefreshMaterial = true;\n\n\t\t}\n\n\t\tif ( refreshProgram || camera !== _currentCamera ) {\n\n\t\t\tp_uniforms.setValue( _gl, 'projectionMatrix', camera.projectionMatrix );\n\n\t\t\tif ( capabilities.logarithmicDepthBuffer ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'logDepthBufFC',\n\t\t\t\t\t2.0 / ( Math.log( camera.far + 1.0 ) / Math.LN2 ) );\n\n\t\t\t}\n\n\t\t\t// Avoid unneeded uniform updates per ArrayCamera's sub-camera\n\n\t\t\tif ( _currentCamera !== ( _currentArrayCamera || camera ) ) {\n\n\t\t\t\t_currentCamera = ( _currentArrayCamera || camera );\n\n\t\t\t\t// lighting uniforms depend on the camera so enforce an update\n\t\t\t\t// now, in case this material supports lights - or later, when\n\t\t\t\t// the next material that does gets activated:\n\n\t\t\t\trefreshMaterial = true;\t\t// set to true on material change\n\t\t\t\trefreshLights = true;\t\t// remains set until update done\n\n\t\t\t}\n\n\t\t\t// load material specific uniforms\n\t\t\t// (shader material also gets them for the sake of genericity)\n\n\t\t\tif ( material.isShaderMaterial ||\n\t\t\t\tmaterial.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.envMap ) {\n\n\t\t\t\tvar uCamPos = p_uniforms.map.cameraPosition;\n\n\t\t\t\tif ( uCamPos !== undefined ) {\n\n\t\t\t\t\tuCamPos.setValue( _gl,\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( camera.matrixWorld ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( material.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshLambertMaterial ||\n\t\t\t\tmaterial.isMeshBasicMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.isShaderMaterial ||\n\t\t\t\tmaterial.skinning ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'viewMatrix', camera.matrixWorldInverse );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// skinning uniforms must be set even if material didn't change\n\t\t// auto-setting of texture unit for bone texture must go before other textures\n\t\t// not sure why, but otherwise weird things happen\n\n\t\tif ( material.skinning ) {\n\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrix' );\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrixInverse' );\n\n\t\t\tvar skeleton = object.skeleton;\n\n\t\t\tif ( skeleton ) {\n\n\t\t\t\tvar bones = skeleton.bones;\n\n\t\t\t\tif ( capabilities.floatVertexTextures ) {\n\n\t\t\t\t\tif ( skeleton.boneTexture === undefined ) {\n\n\t\t\t\t\t\t// layout (1 matrix = 4 pixels)\n\t\t\t\t\t\t//      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\n\t\t\t\t\t\t//  with  8x8  pixel texture max   16 bones * 4 pixels =  (8 * 8)\n\t\t\t\t\t\t//       16x16 pixel texture max   64 bones * 4 pixels = (16 * 16)\n\t\t\t\t\t\t//       32x32 pixel texture max  256 bones * 4 pixels = (32 * 32)\n\t\t\t\t\t\t//       64x64 pixel texture max 1024 bones * 4 pixels = (64 * 64)\n\n\n\t\t\t\t\t\tvar size = Math.sqrt( bones.length * 4 ); // 4 pixels needed for 1 matrix\n\t\t\t\t\t\tsize = _Math.ceilPowerOfTwo( size );\n\t\t\t\t\t\tsize = Math.max( size, 4 );\n\n\t\t\t\t\t\tvar boneMatrices = new Float32Array( size * size * 4 ); // 4 floats per RGBA pixel\n\t\t\t\t\t\tboneMatrices.set( skeleton.boneMatrices ); // copy current values\n\n\t\t\t\t\t\tvar boneTexture = new DataTexture( boneMatrices, size, size, RGBAFormat, FloatType );\n\n\t\t\t\t\t\tskeleton.boneMatrices = boneMatrices;\n\t\t\t\t\t\tskeleton.boneTexture = boneTexture;\n\t\t\t\t\t\tskeleton.boneTextureSize = size;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tp_uniforms.setValue( _gl, 'boneTexture', skeleton.boneTexture );\n\t\t\t\t\tp_uniforms.setValue( _gl, 'boneTextureSize', skeleton.boneTextureSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tp_uniforms.setOptional( _gl, skeleton, 'boneMatrices' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( refreshMaterial ) {\n\n\t\t\tp_uniforms.setValue( _gl, 'toneMappingExposure', _this.toneMappingExposure );\n\t\t\tp_uniforms.setValue( _gl, 'toneMappingWhitePoint', _this.toneMappingWhitePoint );\n\n\t\t\tif ( material.lights ) {\n\n\t\t\t\t// the current material requires lighting info\n\n\t\t\t\t// note: all lighting uniforms are always set correctly\n\t\t\t\t// they simply reference the renderer's state for their\n\t\t\t\t// values\n\t\t\t\t//\n\t\t\t\t// use the current material's .needsUpdate flags to set\n\t\t\t\t// the GL state when required\n\n\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, refreshLights );\n\n\t\t\t}\n\n\t\t\t// refresh uniforms common to several materials\n\n\t\t\tif ( fog && material.fog ) {\n\n\t\t\t\trefreshUniformsFog( m_uniforms, fog );\n\n\t\t\t}\n\n\t\t\tif ( material.isMeshBasicMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshLambertMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\t\t\t\trefreshUniformsLambert( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshPhongMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\n\t\t\t\tif ( material.isMeshToonMaterial ) {\n\n\t\t\t\t\trefreshUniformsToon( m_uniforms, material );\n\n\t\t\t\t} else {\n\n\t\t\t\t\trefreshUniformsPhong( m_uniforms, material );\n\n\t\t\t\t}\n\n\t\t\t} else if ( material.isMeshStandardMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\n\t\t\t\tif ( material.isMeshPhysicalMaterial ) {\n\n\t\t\t\t\trefreshUniformsPhysical( m_uniforms, material );\n\n\t\t\t\t} else {\n\n\t\t\t\t\trefreshUniformsStandard( m_uniforms, material );\n\n\t\t\t\t}\n\n\t\t\t} else if ( material.isMeshDepthMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\t\t\t\trefreshUniformsDepth( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshDistanceMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\t\t\t\trefreshUniformsDistance( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshNormalMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\t\t\t\trefreshUniformsNormal( m_uniforms, material );\n\n\t\t\t} else if ( material.isLineBasicMaterial ) {\n\n\t\t\t\trefreshUniformsLine( m_uniforms, material );\n\n\t\t\t\tif ( material.isLineDashedMaterial ) {\n\n\t\t\t\t\trefreshUniformsDash( m_uniforms, material );\n\n\t\t\t\t}\n\n\t\t\t} else if ( material.isPointsMaterial ) {\n\n\t\t\t\trefreshUniformsPoints( m_uniforms, material );\n\n\t\t\t} else if ( material.isShadowMaterial ) {\n\n\t\t\t\tm_uniforms.color.value = material.color;\n\t\t\t\tm_uniforms.opacity.value = material.opacity;\n\n\t\t\t}\n\n\t\t\t// RectAreaLight Texture\n\t\t\t// TODO (mrdoob): Find a nicer implementation\n\n\t\t\tif ( m_uniforms.ltcMat !== undefined ) m_uniforms.ltcMat.value = UniformsLib.LTC_MAT_TEXTURE;\n\t\t\tif ( m_uniforms.ltcMag !== undefined ) m_uniforms.ltcMag.value = UniformsLib.LTC_MAG_TEXTURE;\n\n\t\t\tWebGLUniforms.upload(\n\t\t\t\t_gl, materialProperties.uniformsList, m_uniforms, _this );\n\n\t\t}\n\n\n\t\t// common matrices\n\n\t\tp_uniforms.setValue( _gl, 'modelViewMatrix', object.modelViewMatrix );\n\t\tp_uniforms.setValue( _gl, 'normalMatrix', object.normalMatrix );\n\t\tp_uniforms.setValue( _gl, 'modelMatrix', object.matrixWorld );\n\n\t\treturn program;\n\n\t}\n\n\t// Uniforms (refresh uniforms objects)\n\n\tfunction refreshUniformsCommon( uniforms, material ) {\n\n\t\tuniforms.opacity.value = material.opacity;\n\n\t\tif ( material.color ) {\n\n\t\t\tuniforms.diffuse.value = material.color;\n\n\t\t}\n\n\t\tif ( material.emissive ) {\n\n\t\t\tuniforms.emissive.value.copy( material.emissive ).multiplyScalar( material.emissiveIntensity );\n\n\t\t}\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t}\n\n\t\tif ( material.specularMap ) {\n\n\t\t\tuniforms.specularMap.value = material.specularMap;\n\n\t\t}\n\n\t\tif ( material.envMap ) {\n\n\t\t\tuniforms.envMap.value = material.envMap;\n\n\t\t\t// don't flip CubeTexture envMaps, flip everything else:\n\t\t\t//  WebGLRenderTargetCube will be flipped for backwards compatibility\n\t\t\t//  WebGLRenderTargetCube.texture will be flipped because it's a Texture and NOT a CubeTexture\n\t\t\t// this check must be handled differently, or removed entirely, if WebGLRenderTargetCube uses a CubeTexture in the future\n\t\t\tuniforms.flipEnvMap.value = ( ! ( material.envMap && material.envMap.isCubeTexture ) ) ? 1 : - 1;\n\n\t\t\tuniforms.reflectivity.value = material.reflectivity;\n\t\t\tuniforms.refractionRatio.value = material.refractionRatio;\n\n\t\t}\n\n\t\tif ( material.lightMap ) {\n\n\t\t\tuniforms.lightMap.value = material.lightMap;\n\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\n\n\t\t}\n\n\t\tif ( material.aoMap ) {\n\n\t\t\tuniforms.aoMap.value = material.aoMap;\n\t\t\tuniforms.aoMapIntensity.value = material.aoMapIntensity;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. specular map\n\t\t// 3. normal map\n\t\t// 4. bump map\n\t\t// 5. alpha map\n\t\t// 6. emissive map\n\n\t\tvar uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.specularMap ) {\n\n\t\t\tuvScaleMap = material.specularMap;\n\n\t\t} else if ( material.displacementMap ) {\n\n\t\t\tuvScaleMap = material.displacementMap;\n\n\t\t} else if ( material.normalMap ) {\n\n\t\t\tuvScaleMap = material.normalMap;\n\n\t\t} else if ( material.bumpMap ) {\n\n\t\t\tuvScaleMap = material.bumpMap;\n\n\t\t} else if ( material.roughnessMap ) {\n\n\t\t\tuvScaleMap = material.roughnessMap;\n\n\t\t} else if ( material.metalnessMap ) {\n\n\t\t\tuvScaleMap = material.metalnessMap;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t} else if ( material.emissiveMap ) {\n\n\t\t\tuvScaleMap = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\t// backwards compatibility\n\t\t\tif ( uvScaleMap.isWebGLRenderTarget ) {\n\n\t\t\t\tuvScaleMap = uvScaleMap.texture;\n\n\t\t\t}\n\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tvar offset = uvScaleMap.offset;\n\t\t\t\tvar repeat = uvScaleMap.repeat;\n\t\t\t\tvar rotation = uvScaleMap.rotation;\n\t\t\t\tvar center = uvScaleMap.center;\n\n\t\t\t\tuvScaleMap.matrix.setUvTransform( offset.x, offset.y, repeat.x, repeat.y, rotation, center.x, center.y );\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsLine( uniforms, material ) {\n\n\t\tuniforms.diffuse.value = material.color;\n\t\tuniforms.opacity.value = material.opacity;\n\n\t}\n\n\tfunction refreshUniformsDash( uniforms, material ) {\n\n\t\tuniforms.dashSize.value = material.dashSize;\n\t\tuniforms.totalSize.value = material.dashSize + material.gapSize;\n\t\tuniforms.scale.value = material.scale;\n\n\t}\n\n\tfunction refreshUniformsPoints( uniforms, material ) {\n\n\t\tuniforms.diffuse.value = material.color;\n\t\tuniforms.opacity.value = material.opacity;\n\t\tuniforms.size.value = material.size * _pixelRatio;\n\t\tuniforms.scale.value = _height * 0.5;\n\n\t\tuniforms.map.value = material.map;\n\n\t\tif ( material.map !== null ) {\n\n\t\t\tif ( material.map.matrixAutoUpdate === true ) {\n\n\t\t\t\tvar offset = material.map.offset;\n\t\t\t\tvar repeat = material.map.repeat;\n\t\t\t\tvar rotation = material.map.rotation;\n\t\t\t\tvar center = material.map.center;\n\n\t\t\t\tmaterial.map.matrix.setUvTransform( offset.x, offset.y, repeat.x, repeat.y, rotation, center.x, center.y );\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy( material.map.matrix );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsFog( uniforms, fog ) {\n\n\t\tuniforms.fogColor.value = fog.color;\n\n\t\tif ( fog.isFog ) {\n\n\t\t\tuniforms.fogNear.value = fog.near;\n\t\t\tuniforms.fogFar.value = fog.far;\n\n\t\t} else if ( fog.isFogExp2 ) {\n\n\t\t\tuniforms.fogDensity.value = fog.density;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsLambert( uniforms, material ) {\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsPhong( uniforms, material ) {\n\n\t\tuniforms.specular.value = material.specular;\n\t\tuniforms.shininess.value = Math.max( material.shininess, 1e-4 ); // to prevent pow( 0.0, 0.0 )\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsToon( uniforms, material ) {\n\n\t\trefreshUniformsPhong( uniforms, material );\n\n\t\tif ( material.gradientMap ) {\n\n\t\t\tuniforms.gradientMap.value = material.gradientMap;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsStandard( uniforms, material ) {\n\n\t\tuniforms.roughness.value = material.roughness;\n\t\tuniforms.metalness.value = material.metalness;\n\n\t\tif ( material.roughnessMap ) {\n\n\t\t\tuniforms.roughnessMap.value = material.roughnessMap;\n\n\t\t}\n\n\t\tif ( material.metalnessMap ) {\n\n\t\t\tuniforms.metalnessMap.value = material.metalnessMap;\n\n\t\t}\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t\tif ( material.envMap ) {\n\n\t\t\t//uniforms.envMap.value = material.envMap; // part of uniforms common\n\t\t\tuniforms.envMapIntensity.value = material.envMapIntensity;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsPhysical( uniforms, material ) {\n\n\t\tuniforms.clearCoat.value = material.clearCoat;\n\t\tuniforms.clearCoatRoughness.value = material.clearCoatRoughness;\n\n\t\trefreshUniformsStandard( uniforms, material );\n\n\t}\n\n\tfunction refreshUniformsDepth( uniforms, material ) {\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsDistance( uniforms, material ) {\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t\tuniforms.referencePosition.value.copy( material.referencePosition );\n\t\tuniforms.nearDistance.value = material.nearDistance;\n\t\tuniforms.farDistance.value = material.farDistance;\n\n\t}\n\n\tfunction refreshUniformsNormal( uniforms, material ) {\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\t// If uniforms are marked as clean, they don't need to be loaded to the GPU.\n\n\tfunction markUniformsLightsNeedsUpdate( uniforms, value ) {\n\n\t\tuniforms.ambientLightColor.needsUpdate = value;\n\n\t\tuniforms.directionalLights.needsUpdate = value;\n\t\tuniforms.pointLights.needsUpdate = value;\n\t\tuniforms.spotLights.needsUpdate = value;\n\t\tuniforms.rectAreaLights.needsUpdate = value;\n\t\tuniforms.hemisphereLights.needsUpdate = value;\n\n\t}\n\n\t// GL state setting\n\n\tthis.setFaceCulling = function ( cullFace, frontFaceDirection ) {\n\n\t\tstate.setCullFace( cullFace );\n\t\tstate.setFlipSided( frontFaceDirection === FrontFaceDirectionCW );\n\n\t};\n\n\t// Textures\n\n\tfunction allocTextureUnit() {\n\n\t\tvar textureUnit = _usedTextureUnits;\n\n\t\tif ( textureUnit >= capabilities.maxTextures ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Trying to use ' + textureUnit + ' texture units while this GPU supports only ' + capabilities.maxTextures );\n\n\t\t}\n\n\t\t_usedTextureUnits += 1;\n\n\t\treturn textureUnit;\n\n\t}\n\n\tthis.allocTextureUnit = allocTextureUnit;\n\n\t// this.setTexture2D = setTexture2D;\n\tthis.setTexture2D = ( function () {\n\n\t\tvar warned = false;\n\n\t\t// backwards compatibility: peel texture.texture\n\t\treturn function setTexture2D( texture, slot ) {\n\n\t\t\tif ( texture && texture.isWebGLRenderTarget ) {\n\n\t\t\t\tif ( ! warned ) {\n\n\t\t\t\t\tconsole.warn( \"THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead.\" );\n\t\t\t\t\twarned = true;\n\n\t\t\t\t}\n\n\t\t\t\ttexture = texture.texture;\n\n\t\t\t}\n\n\t\t\ttextures.setTexture2D( texture, slot );\n\n\t\t};\n\n\t}() );\n\n\tthis.setTexture = ( function () {\n\n\t\tvar warned = false;\n\n\t\treturn function setTexture( texture, slot ) {\n\n\t\t\tif ( ! warned ) {\n\n\t\t\t\tconsole.warn( \"THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead.\" );\n\t\t\t\twarned = true;\n\n\t\t\t}\n\n\t\t\ttextures.setTexture2D( texture, slot );\n\n\t\t};\n\n\t}() );\n\n\tthis.setTextureCube = ( function () {\n\n\t\tvar warned = false;\n\n\t\treturn function setTextureCube( texture, slot ) {\n\n\t\t\t// backwards compatibility: peel texture.texture\n\t\t\tif ( texture && texture.isWebGLRenderTargetCube ) {\n\n\t\t\t\tif ( ! warned ) {\n\n\t\t\t\t\tconsole.warn( \"THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead.\" );\n\t\t\t\t\twarned = true;\n\n\t\t\t\t}\n\n\t\t\t\ttexture = texture.texture;\n\n\t\t\t}\n\n\t\t\t// currently relying on the fact that WebGLRenderTargetCube.texture is a Texture and NOT a CubeTexture\n\t\t\t// TODO: unify these code paths\n\t\t\tif ( ( texture && texture.isCubeTexture ) ||\n\t\t\t\t( Array.isArray( texture.image ) && texture.image.length === 6 ) ) {\n\n\t\t\t\t// CompressedTexture can have Array in image :/\n\n\t\t\t\t// this function alone should take care of cube textures\n\t\t\t\ttextures.setTextureCube( texture, slot );\n\n\t\t\t} else {\n\n\t\t\t\t// assumed: texture property of THREE.WebGLRenderTargetCube\n\n\t\t\t\ttextures.setTextureCubeDynamic( texture, slot );\n\n\t\t\t}\n\n\t\t};\n\n\t}() );\n\n\tthis.getRenderTarget = function () {\n\n\t\treturn _currentRenderTarget;\n\n\t};\n\n\tthis.setRenderTarget = function ( renderTarget ) {\n\n\t\t_currentRenderTarget = renderTarget;\n\n\t\tif ( renderTarget && properties.get( renderTarget ).__webglFramebuffer === undefined ) {\n\n\t\t\ttextures.setupRenderTarget( renderTarget );\n\n\t\t}\n\n\t\tvar framebuffer = null;\n\t\tvar isCube = false;\n\n\t\tif ( renderTarget ) {\n\n\t\t\tvar __webglFramebuffer = properties.get( renderTarget ).__webglFramebuffer;\n\n\t\t\tif ( renderTarget.isWebGLRenderTargetCube ) {\n\n\t\t\t\tframebuffer = __webglFramebuffer[ renderTarget.activeCubeFace ];\n\t\t\t\tisCube = true;\n\n\t\t\t} else {\n\n\t\t\t\tframebuffer = __webglFramebuffer;\n\n\t\t\t}\n\n\t\t\t_currentViewport.copy( renderTarget.viewport );\n\t\t\t_currentScissor.copy( renderTarget.scissor );\n\t\t\t_currentScissorTest = renderTarget.scissorTest;\n\n\t\t} else {\n\n\t\t\t_currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio );\n\t\t\t_currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio );\n\t\t\t_currentScissorTest = _scissorTest;\n\n\t\t}\n\n\t\tif ( _currentFramebuffer !== framebuffer ) {\n\n\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\t\t\t_currentFramebuffer = framebuffer;\n\n\t\t}\n\n\t\tstate.viewport( _currentViewport );\n\t\tstate.scissor( _currentScissor );\n\t\tstate.setScissorTest( _currentScissorTest );\n\n\t\tif ( isCube ) {\n\n\t\t\tvar textureProperties = properties.get( renderTarget.texture );\n\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + renderTarget.activeCubeFace, textureProperties.__webglTexture, renderTarget.activeMipMapLevel );\n\n\t\t}\n\n\t};\n\n\tthis.readRenderTargetPixels = function ( renderTarget, x, y, width, height, buffer ) {\n\n\t\tif ( ! ( renderTarget && renderTarget.isWebGLRenderTarget ) ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar framebuffer = properties.get( renderTarget ).__webglFramebuffer;\n\n\t\tif ( framebuffer ) {\n\n\t\t\tvar restore = false;\n\n\t\t\tif ( framebuffer !== _currentFramebuffer ) {\n\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\n\t\t\t\trestore = true;\n\n\t\t\t}\n\n\t\t\ttry {\n\n\t\t\t\tvar texture = renderTarget.texture;\n\t\t\t\tvar textureFormat = texture.format;\n\t\t\t\tvar textureType = texture.type;\n\n\t\t\t\tif ( textureFormat !== RGBAFormat && utils.convert( textureFormat ) !== _gl.getParameter( _gl.IMPLEMENTATION_COLOR_READ_FORMAT ) ) {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.' );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( textureType !== UnsignedByteType && utils.convert( textureType ) !== _gl.getParameter( _gl.IMPLEMENTATION_COLOR_READ_TYPE ) && // IE11, Edge and Chrome Mac < 52 (#9513)\n\t\t\t\t\t! ( textureType === FloatType && ( extensions.get( 'OES_texture_float' ) || extensions.get( 'WEBGL_color_buffer_float' ) ) ) && // Chrome Mac >= 52 and Firefox\n\t\t\t\t\t! ( textureType === HalfFloatType && extensions.get( 'EXT_color_buffer_half_float' ) ) ) {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.' );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( _gl.checkFramebufferStatus( _gl.FRAMEBUFFER ) === _gl.FRAMEBUFFER_COMPLETE ) {\n\n\t\t\t\t\t// the following if statement ensures valid read requests (no out-of-bounds pixels, see #8604)\n\n\t\t\t\t\tif ( ( x >= 0 && x <= ( renderTarget.width - width ) ) && ( y >= 0 && y <= ( renderTarget.height - height ) ) ) {\n\n\t\t\t\t\t\t_gl.readPixels( x, y, width, height, utils.convert( textureFormat ), utils.convert( textureType ), buffer );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.' );\n\n\t\t\t\t}\n\n\t\t\t} finally {\n\n\t\t\t\tif ( restore ) {\n\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, _currentFramebuffer );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Scene() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Scene';\n\n\tthis.background = null;\n\tthis.fog = null;\n\tthis.overrideMaterial = null;\n\n\tthis.autoUpdate = true; // checked by the renderer\n\n}\n\nScene.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Scene,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tObject3D.prototype.copy.call( this, source, recursive );\n\n\t\tif ( source.background !== null ) this.background = source.background.clone();\n\t\tif ( source.fog !== null ) this.fog = source.fog.clone();\n\t\tif ( source.overrideMaterial !== null ) this.overrideMaterial = source.overrideMaterial.clone();\n\n\t\tthis.autoUpdate = source.autoUpdate;\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tif ( this.background !== null ) data.object.background = this.background.toJSON( meta );\n\t\tif ( this.fog !== null ) data.object.fog = this.fog.toJSON();\n\n\t\treturn data;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar Cache = {\n\n\tenabled: false,\n\n\tfiles: {},\n\n\tadd: function ( key, file ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\t// console.log( 'THREE.Cache', 'Adding key:', key );\n\n\t\tthis.files[ key ] = file;\n\n\t},\n\n\tget: function ( key ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\t// console.log( 'THREE.Cache', 'Checking key:', key );\n\n\t\treturn this.files[ key ];\n\n\t},\n\n\tremove: function ( key ) {\n\n\t\tdelete this.files[ key ];\n\n\t},\n\n\tclear: function () {\n\n\t\tthis.files = {};\n\n\t}\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction LoadingManager( onLoad, onProgress, onError ) {\n\n\tvar scope = this;\n\n\tvar isLoading = false;\n\tvar itemsLoaded = 0;\n\tvar itemsTotal = 0;\n\tvar urlModifier = undefined;\n\n\tthis.onStart = undefined;\n\tthis.onLoad = onLoad;\n\tthis.onProgress = onProgress;\n\tthis.onError = onError;\n\n\tthis.itemStart = function ( url ) {\n\n\t\titemsTotal ++;\n\n\t\tif ( isLoading === false ) {\n\n\t\t\tif ( scope.onStart !== undefined ) {\n\n\t\t\t\tscope.onStart( url, itemsLoaded, itemsTotal );\n\n\t\t\t}\n\n\t\t}\n\n\t\tisLoading = true;\n\n\t};\n\n\tthis.itemEnd = function ( url ) {\n\n\t\titemsLoaded ++;\n\n\t\tif ( scope.onProgress !== undefined ) {\n\n\t\t\tscope.onProgress( url, itemsLoaded, itemsTotal );\n\n\t\t}\n\n\t\tif ( itemsLoaded === itemsTotal ) {\n\n\t\t\tisLoading = false;\n\n\t\t\tif ( scope.onLoad !== undefined ) {\n\n\t\t\t\tscope.onLoad();\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.itemError = function ( url ) {\n\n\t\tif ( scope.onError !== undefined ) {\n\n\t\t\tscope.onError( url );\n\n\t\t}\n\n\t};\n\n\tthis.resolveURL = function ( url ) {\n\n\t\tif ( urlModifier ) {\n\n\t\t\treturn urlModifier( url );\n\n\t\t}\n\n\t\treturn url;\n\n\t};\n\n\tthis.setURLModifier = function ( transform ) {\n\n\t\turlModifier = transform;\n\t\treturn this;\n\n\t};\n\n}\n\nvar DefaultLoadingManager = new LoadingManager();\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction ImageLoader( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n}\n\nObject.assign( ImageLoader.prototype, {\n\n\tcrossOrigin: 'Anonymous',\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tif ( url === undefined ) url = '';\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\turl = this.manager.resolveURL( url );\n\n\t\tvar scope = this;\n\n\t\tvar cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tsetTimeout( function () {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\tvar image = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'img' );\n\n\t\timage.addEventListener( 'load', function () {\n\n\t\t\tCache.add( url, this );\n\n\t\t\tif ( onLoad ) onLoad( this );\n\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t}, false );\n\n\t\t/*\n\t\timage.addEventListener( 'progress', function ( event ) {\n\n\t\t\tif ( onProgress ) onProgress( event );\n\n\t\t}, false );\n\t\t*/\n\n\t\timage.addEventListener( 'error', function ( event ) {\n\n\t\t\tif ( onError ) onError( event );\n\n\t\t\tscope.manager.itemEnd( url );\n\t\t\tscope.manager.itemError( url );\n\n\t\t}, false );\n\n\t\tif ( url.substr( 0, 5 ) !== 'data:' ) {\n\n\t\t\tif ( this.crossOrigin !== undefined ) image.crossOrigin = this.crossOrigin;\n\n\t\t}\n\n\t\tscope.manager.itemStart( url );\n\n\t\timage.src = url;\n\n\t\treturn image;\n\n\t},\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\t\treturn this;\n\n\t},\n\n\tsetPath: function ( value ) {\n\n\t\tthis.path = value;\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction TextureLoader( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n}\n\nObject.assign( TextureLoader.prototype, {\n\n\tcrossOrigin: 'Anonymous',\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar texture = new Texture();\n\n\t\tvar loader = new ImageLoader( this.manager );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.setPath( this.path );\n\n\t\tloader.load( url, function ( image ) {\n\n\t\t\ttexture.image = image;\n\n\t\t\t// JPEGs can't have an alpha channel, so memory can be saved by storing them as RGB.\n\t\t\tvar isJPEG = url.search( /\\.(jpg|jpeg)$/ ) > 0 || url.search( /^data\\:image\\/jpeg/ ) === 0;\n\n\t\t\ttexture.format = isJPEG ? RGBFormat : RGBAFormat;\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tif ( onLoad !== undefined ) {\n\n\t\t\t\tonLoad( texture );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t\treturn texture;\n\n\t},\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\t\treturn this;\n\n\t},\n\n\tsetPath: function ( value ) {\n\n\t\tthis.path = value;\n\t\treturn this;\n\n\t}\n\n} );\n\nexports.WebGLRenderTarget = WebGLRenderTarget;\nexports.WebGLRenderer = WebGLRenderer;\nexports.Scene = Scene;\nexports.Mesh = Mesh;\nexports.DataTexture = DataTexture;\nexports.PlaneGeometry = PlaneGeometry;\nexports.ShaderMaterial = ShaderMaterial;\nexports.MeshBasicMaterial = MeshBasicMaterial;\nexports.Material = Material;\nexports.TextureLoader = TextureLoader;\nexports.OrthographicCamera = OrthographicCamera;\nexports.ClampToEdgeWrapping = ClampToEdgeWrapping;\nexports.FloatType = FloatType;\nexports.LinearFilter = LinearFilter;\nexports.NearestFilter = NearestFilter;\nexports.NearestMipMapNearestFilter = NearestMipMapNearestFilter;\nexports.RepeatWrapping = RepeatWrapping;\nexports.RGBAFormat = RGBAFormat;\nexports.UnsignedByteType = UnsignedByteType;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\nrequire=(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n(function (global){\nglobal.THREE = require('three');\n\nTHREE = {\n  ClampToEdgeWrapping: THREE.ClampToEdgeWrapping,\n  DataTexture: THREE.DataTexture,\n  FloatType: THREE.FloatType,\n  LinearFilter: THREE.LinearFilter,\n  Material: THREE.Material,\n  Mesh: THREE.Mesh,\n  MeshBasicMaterial: THREE.MeshBasicMaterial,\n  NearestFilter: THREE.NearestFilter,\n  NearestMipMapNearestFilter: THREE.NearestMipMapNearestFilter,\n  OrthographicCamera: THREE.OrthographicCamera,\n  PlaneGeometry: THREE.PlaneGeometry,\n  RepeatWrapping: THREE.RepeatWrapping,\n  RGBAFormat: THREE.RGBAFormat,\n  Scene: THREE.Scene,\n  ShaderMaterial: THREE.ShaderMaterial,\n  TextureLoader: THREE.TextureLoader,\n  UnsignedByteType: THREE.UnsignedByteType,\n  WebGLRenderer: THREE.WebGLRenderer,\n  WebGLRenderTarget: THREE.WebGLRenderTarget\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"three\":\"three\"}],\"three\":[function(require,module,exports){\nmodule.exports = window.THREE;\n},{}]},{},[1]);\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mr.doob / http://mrdoob.com/\n */\n\nvar Detector = {\n\n  canvas: !! window.CanvasRenderingContext2D,\n  webgl: ( function () {\n\n    try {\n\n      var canvas = document.createElement( 'canvas' ); return !! ( window.WebGLRenderingContext && ( canvas.getContext( 'webgl' ) || canvas.getContext( 'experimental-webgl' ) ) );\n\n    } catch ( e ) {\n\n      return false;\n\n    }\n\n  } )(),\n  workers: !! window.Worker,\n  fileapi: window.File && window.FileReader && window.FileList && window.Blob,\n\n  getWebGLErrorMessage: function () {\n\n    var element = document.createElement( 'div' );\n    element.id = 'webgl-error-message';\n    element.style.fontFamily = 'monospace';\n    element.style.fontSize = '13px';\n    element.style.fontWeight = 'normal';\n    element.style.textAlign = 'center';\n    element.style.background = '#fff';\n    element.style.color = '#000';\n    element.style.padding = '1.5em';\n    element.style.width = '400px';\n    element.style.margin = '5em auto 0';\n\n    if ( ! this.webgl ) {\n\n      element.innerHTML = window.WebGLRenderingContext ? [\n        'Your graphics card does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br />',\n        'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000\">here</a>.'\n      ].join( '\\n' ) : [\n        'Your browser does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br/>',\n        'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000\">here</a>.'\n      ].join( '\\n' );\n\n    }\n\n    return element;\n\n  },\n\n  addGetWebGLMessage: function ( parameters ) {\n\n    var parent, id, element;\n\n    parameters = parameters || {};\n\n    parent = parameters.parent !== undefined ? parameters.parent : document.body;\n    id = parameters.id !== undefined ? parameters.id : 'oldie';\n\n    element = Detector.getWebGLErrorMessage();\n    element.id = id;\n\n    parent.appendChild( element );\n\n  }\n\n};\n\n// browserify support\nif ( typeof module === 'object' ) {\n\n  module.exports = Detector;\n\n}\n/* jshint -W067 */\n/* jshint unused: false */\n(function(global, undefined) {\n    'use strict';\n\n    if (!notUseNative() && (global.msSetImmediate || global.setImmediate)) {\n        if (!global.setImmediate) {\n            global.setImmediate = global.msSetImmediate;\n            global.clearImmediate = global.msClearImmediate;\n        }\n\n        return;\n    }\n\n    var doc = global.document;\n    var slice = Array.prototype.slice;\n    var toString = Object.prototype.toString;\n    var Timer = {};\n\n    Timer.polifill = {};\n    Timer.nextId = 1;\n    Timer.tasks = {};\n    Timer.lock = false;\n\n    Timer.run = function(handleId) {\n        if (Timer.lock) {\n            global.setTimeout( Timer.wrap( Timer.run, handleId ), 0 );\n\n        } else {\n            var task = Timer.tasks[ handleId ];\n\n            if (task) {\n                Timer.lock = true;\n\n                try {\n                    task();\n\n                } finally {\n                    Timer.clear( handleId );\n                    Timer.lock = false;\n                }\n            }\n        }\n    };\n\n    Timer.wrap = function(handler) {\n        var args = slice.call(arguments, 1);\n\n        return function() {\n            handler.apply(undefined, args);\n        };\n    };\n\n    Timer.create = function(args) {\n        Timer.tasks[ Timer.nextId ] = Timer.wrap.apply(undefined, args);\n        return Timer.nextId++;\n    };\n\n    Timer.clear = function(handleId) {\n        delete Timer.tasks[ handleId ];\n    };\n\n    /* polifill/messageChannel.js begin */\n/* global global, Timer */\n\nTimer.polifill.messageChannel = function() {\n    var channel = new global.MessageChannel();\n\n    channel.port1.onmessage = function(event) {\n        Timer.run(Number(event.data));\n    };\n\n    return function() {\n        var handleId = Timer.create(arguments);\n        channel.port2.postMessage(handleId);\n        return handleId;\n    };\n};\n\n/* polifill/messageChannel.js end */\n\n    /* polifill/nextTick.js begin */\n/* global global, Timer */\n\nTimer.polifill.nextTick = function() {\n    return function() {\n        var handleId = Timer.create(arguments);\n        global.process.nextTick( Timer.wrap( Timer.run, handleId ) );\n        return handleId;\n    };\n};\n\n/* polifill/nextTick.js end */\n\n    /* polifill/postMessage.js begin */\n/* global global, Timer */\n\nTimer.polifill.postMessage = function() {\n    var messagePrefix = 'setImmediate$' + Math.random() + '$';\n\n    var onGlobalMessage = function(event) {\n        if (event.source === global &&\n            typeof(event.data) === 'string' &&\n            event.data.indexOf(messagePrefix) === 0) {\n\n            Timer.run(Number(event.data.slice(messagePrefix.length)));\n        }\n    };\n\n    if (global.addEventListener) {\n        global.addEventListener('message', onGlobalMessage, false);\n\n    } else {\n        global.attachEvent('onmessage', onGlobalMessage);\n    }\n\n    return function() {\n        var handleId = Timer.create(arguments);\n        global.postMessage(messagePrefix + handleId, '*');\n        return handleId;\n    };\n};\n\n/* polifill/postMessage.js end */\n\n    /* polifill/readyStateChange.js begin */\n/* global Timer, doc */\n\nTimer.polifill.readyStateChange = function() {\n    var html = doc.documentElement;\n\n    return function() {\n        var handleId = Timer.create(arguments);\n        var script = doc.createElement('script');\n\n        script.onreadystatechange = function() {\n            Timer.run(handleId);\n            script.onreadystatechange = null;\n            html.removeChild(script);\n            script = null;\n        };\n\n        html.appendChild(script);\n\n        return handleId;\n    };\n};\n\n/* polifill/readyStateChange.js end */\n\n    /* polifill/setTimeout.js begin */\n/* global global, Timer */\n\nTimer.polifill.setTimeout = function() {\n    return function() {\n        var handleId = Timer.create(arguments);\n        global.setTimeout( Timer.wrap( Timer.run, handleId ), 0 );\n        return handleId;\n    };\n};\n\n/* polifill/setTimeout.js end */\n\n\n\n\n    function canUsePostMessage() {\n        if (global.postMessage && !global.importScripts) {\n            var asynch = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                asynch = false;\n            };\n            global.postMessage('', '*');\n            global.onmessage = oldOnMessage;\n            return asynch;\n        }\n    }\n\n    function notUseNative() {\n        // @see http://codeforhire.com/2013/09/21/setimmediate-and-messagechannel-broken-on-internet-explorer-10/\n        return (global.navigator && /Trident/.test(global.navigator.userAgent));\n    }\n\n\n    var polifill;\n\n    if (notUseNative()) {\n        polifill = 'setTimeout';\n\n    // Don't get fooled by e.g. browserify environments.\n    // For Node.js before 0.9\n    } else if (toString.call(global.process) === '[object process]') {\n        polifill = 'nextTick';\n\n    // For non-IE10 modern browsers\n    } else if (canUsePostMessage()) {\n        polifill = 'postMessage';\n\n    // For web workers, where supported\n    } else if (global.MessageChannel) {\n        polifill = 'messageChannel';\n\n    // For IE 68\n    } else if (doc && ('onreadystatechange' in doc.createElement('script'))) {\n        polifill = 'readyStateChange';\n\n    // For older browsers\n    } else {\n        polifill = 'setTimeout';\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = (attachTo && attachTo.setTimeout ? attachTo : global);\n\n    attachTo.setImmediate = Timer.polifill[ polifill ]();\n    attachTo.setImmediate.usePolifill = polifill;\n    attachTo.msSetImmediate = attachTo.setImmediate;\n\n    attachTo.clearImmediate = Timer.clear;\n    attachTo.msClearImmediate = Timer.clear;\n\n}(function() {\n    return this || (1, eval)('this');\n}()));\n/*!\n * EventEmitter v4.2.11 - git.io/ee\n * Unlicense - http://unlicense.org/\n * Oliver Caldwell - http://oli.me.uk/\n * @preserve\n */\n\n;(function () {\n    'use strict';\n\n    /**\n     * Class for managing events.\n     * Can be extended to provide event functionality in other classes.\n     *\n     * @class EventEmitter Manages event registering and emitting.\n     */\n    function EventEmitter() {}\n\n    // Shortcuts to improve speed and size\n    var proto = EventEmitter.prototype;\n    var exports = this;\n    var originalGlobalValue = exports.EventEmitter;\n\n    /**\n     * Finds the index of the listener for the event in its storage array.\n     *\n     * @param {Function[]} listeners Array of listeners to search through.\n     * @param {Function} listener Method to look for.\n     * @return {Number} Index of the specified listener, -1 if not found\n     * @api private\n     */\n    function indexOfListener(listeners, listener) {\n        var i = listeners.length;\n        while (i--) {\n            if (listeners[i].listener === listener) {\n                return i;\n            }\n        }\n\n        return -1;\n    }\n\n    /**\n     * Alias a method while keeping the context correct, to allow for overwriting of target method.\n     *\n     * @param {String} name The name of the target method.\n     * @return {Function} The aliased method\n     * @api private\n     */\n    function alias(name) {\n        return function aliasClosure() {\n            return this[name].apply(this, arguments);\n        };\n    }\n\n    /**\n     * Returns the listener array for the specified event.\n     * Will initialise the event object and listener arrays if required.\n     * Will return an object if you use a regex search. The object contains keys for each matched event. So /ba[rz]/ might return an object containing bar and baz. But only if you have either defined them with defineEvent or added some listeners to them.\n     * Each property in the object response is an array of listener functions.\n     *\n     * @param {String|RegExp} evt Name of the event to return the listeners from.\n     * @return {Function[]|Object} All listener functions for the event.\n     */\n    proto.getListeners = function getListeners(evt) {\n        var events = this._getEvents();\n        var response;\n        var key;\n\n        // Return a concatenated array of all matching events if\n        // the selector is a regular expression.\n        if (evt instanceof RegExp) {\n            response = {};\n            for (key in events) {\n                if (events.hasOwnProperty(key) && evt.test(key)) {\n                    response[key] = events[key];\n                }\n            }\n        }\n        else {\n            response = events[evt] || (events[evt] = []);\n        }\n\n        return response;\n    };\n\n    /**\n     * Takes a list of listener objects and flattens it into a list of listener functions.\n     *\n     * @param {Object[]} listeners Raw listener objects.\n     * @return {Function[]} Just the listener functions.\n     */\n    proto.flattenListeners = function flattenListeners(listeners) {\n        var flatListeners = [];\n        var i;\n\n        for (i = 0; i < listeners.length; i += 1) {\n            flatListeners.push(listeners[i].listener);\n        }\n\n        return flatListeners;\n    };\n\n    /**\n     * Fetches the requested listeners via getListeners but will always return the results inside an object. This is mainly for internal use but others may find it useful.\n     *\n     * @param {String|RegExp} evt Name of the event to return the listeners from.\n     * @return {Object} All listener functions for an event in an object.\n     */\n    proto.getListenersAsObject = function getListenersAsObject(evt) {\n        var listeners = this.getListeners(evt);\n        var response;\n\n        if (listeners instanceof Array) {\n            response = {};\n            response[evt] = listeners;\n        }\n\n        return response || listeners;\n    };\n\n    /**\n     * Adds a listener function to the specified event.\n     * The listener will not be added if it is a duplicate.\n     * If the listener returns true then it will be removed after it is called.\n     * If you pass a regular expression as the event name then the listener will be added to all events that match it.\n     *\n     * @param {String|RegExp} evt Name of the event to attach the listener to.\n     * @param {Function} listener Method to be called when the event is emitted. If the function returns true then it will be removed after calling.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.addListener = function addListener(evt, listener) {\n        var listeners = this.getListenersAsObject(evt);\n        var listenerIsWrapped = typeof listener === 'object';\n        var key;\n\n        for (key in listeners) {\n            if (listeners.hasOwnProperty(key) && indexOfListener(listeners[key], listener) === -1) {\n                listeners[key].push(listenerIsWrapped ? listener : {\n                    listener: listener,\n                    once: false\n                });\n            }\n        }\n\n        return this;\n    };\n\n    /**\n     * Alias of addListener\n     */\n    proto.on = alias('addListener');\n\n    /**\n     * Semi-alias of addListener. It will add a listener that will be\n     * automatically removed after its first execution.\n     *\n     * @param {String|RegExp} evt Name of the event to attach the listener to.\n     * @param {Function} listener Method to be called when the event is emitted. If the function returns true then it will be removed after calling.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.addOnceListener = function addOnceListener(evt, listener) {\n        return this.addListener(evt, {\n            listener: listener,\n            once: true\n        });\n    };\n\n    /**\n     * Alias of addOnceListener.\n     */\n    proto.once = alias('addOnceListener');\n\n    /**\n     * Defines an event name. This is required if you want to use a regex to add a listener to multiple events at once. If you don't do this then how do you expect it to know what event to add to? Should it just add to every possible match for a regex? No. That is scary and bad.\n     * You need to tell it what event names should be matched by a regex.\n     *\n     * @param {String} evt Name of the event to create.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.defineEvent = function defineEvent(evt) {\n        this.getListeners(evt);\n        return this;\n    };\n\n    /**\n     * Uses defineEvent to define multiple events.\n     *\n     * @param {String[]} evts An array of event names to define.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.defineEvents = function defineEvents(evts) {\n        for (var i = 0; i < evts.length; i += 1) {\n            this.defineEvent(evts[i]);\n        }\n        return this;\n    };\n\n    /**\n     * Removes a listener function from the specified event.\n     * When passed a regular expression as the event name, it will remove the listener from all events that match it.\n     *\n     * @param {String|RegExp} evt Name of the event to remove the listener from.\n     * @param {Function} listener Method to remove from the event.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.removeListener = function removeListener(evt, listener) {\n        var listeners = this.getListenersAsObject(evt);\n        var index;\n        var key;\n\n        for (key in listeners) {\n            if (listeners.hasOwnProperty(key)) {\n                index = indexOfListener(listeners[key], listener);\n\n                if (index !== -1) {\n                    listeners[key].splice(index, 1);\n                }\n            }\n        }\n\n        return this;\n    };\n\n    /**\n     * Alias of removeListener\n     */\n    proto.off = alias('removeListener');\n\n    /**\n     * Adds listeners in bulk using the manipulateListeners method.\n     * If you pass an object as the second argument you can add to multiple events at once. The object should contain key value pairs of events and listeners or listener arrays. You can also pass it an event name and an array of listeners to be added.\n     * You can also pass it a regular expression to add the array of listeners to all events that match it.\n     * Yeah, this function does quite a bit. That's probably a bad thing.\n     *\n     * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to add to multiple events at once.\n     * @param {Function[]} [listeners] An optional array of listener functions to add.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.addListeners = function addListeners(evt, listeners) {\n        // Pass through to manipulateListeners\n        return this.manipulateListeners(false, evt, listeners);\n    };\n\n    /**\n     * Removes listeners in bulk using the manipulateListeners method.\n     * If you pass an object as the second argument you can remove from multiple events at once. The object should contain key value pairs of events and listeners or listener arrays.\n     * You can also pass it an event name and an array of listeners to be removed.\n     * You can also pass it a regular expression to remove the listeners from all events that match it.\n     *\n     * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to remove from multiple events at once.\n     * @param {Function[]} [listeners] An optional array of listener functions to remove.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.removeListeners = function removeListeners(evt, listeners) {\n        // Pass through to manipulateListeners\n        return this.manipulateListeners(true, evt, listeners);\n    };\n\n    /**\n     * Edits listeners in bulk. The addListeners and removeListeners methods both use this to do their job. You should really use those instead, this is a little lower level.\n     * The first argument will determine if the listeners are removed (true) or added (false).\n     * If you pass an object as the second argument you can add/remove from multiple events at once. The object should contain key value pairs of events and listeners or listener arrays.\n     * You can also pass it an event name and an array of listeners to be added/removed.\n     * You can also pass it a regular expression to manipulate the listeners of all events that match it.\n     *\n     * @param {Boolean} remove True if you want to remove listeners, false if you want to add.\n     * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to add/remove from multiple events at once.\n     * @param {Function[]} [listeners] An optional array of listener functions to add/remove.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.manipulateListeners = function manipulateListeners(remove, evt, listeners) {\n        var i;\n        var value;\n        var single = remove ? this.removeListener : this.addListener;\n        var multiple = remove ? this.removeListeners : this.addListeners;\n\n        // If evt is an object then pass each of its properties to this method\n        if (typeof evt === 'object' && !(evt instanceof RegExp)) {\n            for (i in evt) {\n                if (evt.hasOwnProperty(i) && (value = evt[i])) {\n                    // Pass the single listener straight through to the singular method\n                    if (typeof value === 'function') {\n                        single.call(this, i, value);\n                    }\n                    else {\n                        // Otherwise pass back to the multiple function\n                        multiple.call(this, i, value);\n                    }\n                }\n            }\n        }\n        else {\n            // So evt must be a string\n            // And listeners must be an array of listeners\n            // Loop over it and pass each one to the multiple method\n            i = listeners.length;\n            while (i--) {\n                single.call(this, evt, listeners[i]);\n            }\n        }\n\n        return this;\n    };\n\n    /**\n     * Removes all listeners from a specified event.\n     * If you do not specify an event then all listeners will be removed.\n     * That means every event will be emptied.\n     * You can also pass a regex to remove all events that match it.\n     *\n     * @param {String|RegExp} [evt] Optional name of the event to remove all listeners for. Will remove from every event if not passed.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.removeEvent = function removeEvent(evt) {\n        var type = typeof evt;\n        var events = this._getEvents();\n        var key;\n\n        // Remove different things depending on the state of evt\n        if (type === 'string') {\n            // Remove all listeners for the specified event\n            delete events[evt];\n        }\n        else if (evt instanceof RegExp) {\n            // Remove all events matching the regex.\n            for (key in events) {\n                if (events.hasOwnProperty(key) && evt.test(key)) {\n                    delete events[key];\n                }\n            }\n        }\n        else {\n            // Remove all listeners in all events\n            delete this._events;\n        }\n\n        return this;\n    };\n\n    /**\n     * Alias of removeEvent.\n     *\n     * Added to mirror the node API.\n     */\n    proto.removeAllListeners = alias('removeEvent');\n\n    /**\n     * Emits an event of your choice.\n     * When emitted, every listener attached to that event will be executed.\n     * If you pass the optional argument array then those arguments will be passed to every listener upon execution.\n     * Because it uses `apply`, your array of arguments will be passed as if you wrote them out separately.\n     * So they will not arrive within the array on the other side, they will be separate.\n     * You can also pass a regular expression to emit to all events that match it.\n     *\n     * @param {String|RegExp} evt Name of the event to emit and execute listeners for.\n     * @param {Array} [args] Optional array of arguments to be passed to each listener.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.emitEvent = function emitEvent(evt, args) {\n        var listenersMap = this.getListenersAsObject(evt);\n        var listeners;\n        var listener;\n        var i;\n        var key;\n        var response;\n\n        for (key in listenersMap) {\n            if (listenersMap.hasOwnProperty(key)) {\n                listeners = listenersMap[key].slice(0);\n                i = listeners.length;\n\n                while (i--) {\n                    // If the listener returns true then it shall be removed from the event\n                    // The function is executed either with a basic call or an apply if there is an args array\n                    listener = listeners[i];\n\n                    if (listener.once === true) {\n                        this.removeListener(evt, listener.listener);\n                    }\n\n                    response = listener.listener.apply(this, args || []);\n\n                    if (response === this._getOnceReturnValue()) {\n                        this.removeListener(evt, listener.listener);\n                    }\n                }\n            }\n        }\n\n        return this;\n    };\n\n    /**\n     * Alias of emitEvent\n     */\n    proto.trigger = alias('emitEvent');\n\n    /**\n     * Subtly different from emitEvent in that it will pass its arguments on to the listeners, as opposed to taking a single array of arguments to pass on.\n     * As with emitEvent, you can pass a regex in place of the event name to emit to all events that match it.\n     *\n     * @param {String|RegExp} evt Name of the event to emit and execute listeners for.\n     * @param {...*} Optional additional arguments to be passed to each listener.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.emit = function emit(evt) {\n        var args = Array.prototype.slice.call(arguments, 1);\n        return this.emitEvent(evt, args);\n    };\n\n    /**\n     * Sets the current value to check against when executing listeners. If a\n     * listeners return value matches the one set here then it will be removed\n     * after execution. This value defaults to true.\n     *\n     * @param {*} value The new value to check for when executing listeners.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.setOnceReturnValue = function setOnceReturnValue(value) {\n        this._onceReturnValue = value;\n        return this;\n    };\n\n    /**\n     * Fetches the current value to check against when executing listeners. If\n     * the listeners return value matches this one then it should be removed\n     * automatically. It will return true by default.\n     *\n     * @return {*|Boolean} The current value to check for or the default, true.\n     * @api private\n     */\n    proto._getOnceReturnValue = function _getOnceReturnValue() {\n        if (this.hasOwnProperty('_onceReturnValue')) {\n            return this._onceReturnValue;\n        }\n        else {\n            return true;\n        }\n    };\n\n    /**\n     * Fetches the events object and creates one if required.\n     *\n     * @return {Object} The events storage object.\n     * @api private\n     */\n    proto._getEvents = function _getEvents() {\n        return this._events || (this._events = {});\n    };\n\n    /**\n     * Reverts the global {@link EventEmitter} to its previous value and returns a reference to this version.\n     *\n     * @return {Function} Non conflicting EventEmitter class.\n     */\n    EventEmitter.noConflict = function noConflict() {\n        exports.EventEmitter = originalGlobalValue;\n        return EventEmitter;\n    };\n\n    // Expose the class either via AMD, CommonJS or the global object\n    if (typeof define === 'function' && define.amd) {\n        define(function () {\n            return EventEmitter;\n        });\n    }\n    else if (typeof module === 'object' && module.exports){\n        module.exports = EventEmitter;\n    }\n    else {\n        exports.EventEmitter = EventEmitter;\n    }\n}.call(this));\n/******************************************************************************\n\nThis is a binary tree based bin packing algorithm that is more complex than\nthe simple Packer (packer.js). Instead of starting off with a fixed width and\nheight, it starts with the width and height of the first block passed and then\ngrows as necessary to accomodate each subsequent block. As it grows it attempts\nto maintain a roughly square ratio by making 'smart' choices about whether to\ngrow right or down.\n\nWhen growing, the algorithm can only grow to the right OR down. Therefore, if\nthe new block is BOTH wider and taller than the current target then it will be\nrejected. This makes it very important to initialize with a sensible starting\nwidth and height. If you are providing sorted input (largest first) then this\nwill not be an issue.\n\nA potential way to solve this limitation would be to allow growth in BOTH\ndirections at once, but this requires maintaining a more complex tree\nwith 3 children (down, right and center) and that complexity can be avoided\nby simply chosing a sensible starting block.\n\nBest results occur when the input blocks are sorted by height, or even better\nwhen sorted by max(width,height).\n\nInputs:\n------\n\n  blocks: array of any objects that have .w and .h attributes\n\nOutputs:\n-------\n\n  marks each block that fits with a .fit attribute pointing to a\n  node with .x and .y coordinates\n\nExample:\n-------\n\n  var blocks = [\n    { w: 100, h: 100 },\n    { w: 100, h: 100 },\n    { w:  80, h:  80 },\n    { w:  80, h:  80 },\n    etc\n    etc\n  ];\n\n  var packer = new GrowingPacker();\n  packer.fit(blocks);\n\n  for(var n = 0 ; n < blocks.length ; n++) {\n    var block = blocks[n];\n    if (block.fit) {\n      Draw(block.fit.x, block.fit.y, block.w, block.h);\n    }\n  }\n\n\n******************************************************************************/\n\nGrowingPacker = function() { };\n\nGrowingPacker.prototype = {\n\n  fit: function(blocks) {\n    var n, node, block, len = blocks.length;\n    var w = len > 0 ? blocks[0].w : 0;\n    var h = len > 0 ? blocks[0].h : 0;\n    this.root = { x: 0, y: 0, w: w, h: h };\n    for (n = 0; n < len ; n++) {\n      block = blocks[n];\n      if (node = this.findNode(this.root, block.w, block.h))\n        block.fit = this.splitNode(node, block.w, block.h);\n      else\n        block.fit = this.growNode(block.w, block.h);\n    }\n  },\n\n  findNode: function(root, w, h) {\n    if (root.used)\n      return this.findNode(root.right, w, h) || this.findNode(root.down, w, h);\n    else if ((w <= root.w) && (h <= root.h))\n      return root;\n    else\n      return null;\n  },\n\n  splitNode: function(node, w, h) {\n    node.used = true;\n    node.down  = { x: node.x,     y: node.y + h, w: node.w,     h: node.h - h };\n    node.right = { x: node.x + w, y: node.y,     w: node.w - w, h: h          };\n    return node;\n  },\n\n  growNode: function(w, h) {\n    var canGrowDown  = (w <= this.root.w);\n    var canGrowRight = (h <= this.root.h);\n\n    var shouldGrowRight = canGrowRight && (this.root.h >= (this.root.w + w)); // attempt to keep square-ish by growing right when height is much greater than width\n    var shouldGrowDown  = canGrowDown  && (this.root.w >= (this.root.h + h)); // attempt to keep square-ish by growing down  when width  is much greater than height\n\n    if (shouldGrowRight)\n      return this.growRight(w, h);\n    else if (shouldGrowDown)\n      return this.growDown(w, h);\n    else if (canGrowRight)\n     return this.growRight(w, h);\n    else if (canGrowDown)\n      return this.growDown(w, h);\n    else\n      return null; // need to ensure sensible root starting size to avoid this happening\n  },\n\n  growRight: function(w, h) {\n    this.root = {\n      used: true,\n      x: 0,\n      y: 0,\n      w: this.root.w + w,\n      h: this.root.h,\n      down: this.root,\n      right: { x: this.root.w, y: 0, w: w, h: this.root.h }\n    };\n    var node = this.findNode(this.root, w, h);\n    if (node)\n      return this.splitNode(node, w, h);\n    else\n      return null;\n  },\n\n  growDown: function(w, h) {\n    this.root = {\n      used: true,\n      x: 0,\n      y: 0,\n      w: this.root.w,\n      h: this.root.h + h,\n      down:  { x: 0, y: this.root.h, w: this.root.w, h: h },\n      right: this.root\n    };\n    var node = this.findNode(this.root, w, h);\n    if (node)\n      return this.splitNode(node, w, h);\n    else\n      return null;\n  }\n\n};\n\n/**\n * http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n * And modified to work with node.js\n */\n\n(function() {\n\n  var root = this;\n  var lastTime = 0;\n  var vendors = ['ms', 'moz', 'webkit', 'o'];\n\n  for (var x = 0; x < vendors.length && !root.requestAnimationFrame; ++x) {\n    root.requestAnimationFrame = root[vendors[x]+'RequestAnimationFrame'];\n    root.cancelAnimationFrame =\n      root[vendors[x]+'CancelAnimationFrame'] || root[vendors[x]+'CancelRequestAnimationFrame'];\n  }\n\n  if (!root.requestAnimationFrame)\n    root.requestAnimationFrame = raf;\n\n  if (!root.cancelAnimationFrame)\n    root.cancelAnimationFrame = function(id) {\n      clearTimeout(id);\n    };\n\n  if (typeof exports !== 'undefined') {\n    if (typeof module !== 'undefined' && module.exports) {\n      exports = module.exports = root.requestAnimationFrame;\n    }\n    exports.requestAnimationFrame = root.requestAnimationFrame;\n  } else {\n    root.requestAnimationFrame = root.requestAnimationFrame;\n  }\n\n  if (typeof define === 'function' && define.amd) {\n    define('requestAnimationFrame', [], function() {\n      return root.requestAnimationFrame;\n    });\n  }\n\n  function raf(callback, element) {\n    var currTime = new Date().getTime();\n    var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n    var id = root.setTimeout(function() { callback(currTime + timeToCall); }, timeToCall);\n    lastTime = currTime + timeToCall;\n    return id;\n  }\n\n})();\n(function(previousBlotter, _, THREE, Detector, EventEmitter) {\n\n  var root = this;\n\n  var Blotter = root.Blotter = previousBlotter = function (material, options) {\n    if (!Detector.webgl) {\n      Blotter.Messaging.throwError(\"Blotter\", false, \"device does not support webgl\");\n    }\n\n    this._texts = [];\n    this._textEventBindings = {};\n\n    this._scopes = {};\n    this._scopeEventBindings = {};\n\n    this._renderer = new Blotter.Renderer();\n\n    this._startTime = 0;\n    this._lastDrawTime = 0;\n\n    this.init.apply(this, arguments);\n  };\n\n  Blotter.prototype = (function () {\n\n    function _updateMaterialUniforms () {\n      var now = Date.now();\n\n      this._material.uniforms.uTimeDelta.value = (now - (this._lastDrawTime || now)) / 1000;\n      this._material.uniforms.uGlobalTime.value = (now - this._startTime) / 1000;\n\n      this._lastDrawTime = now;\n    }\n\n    function _rendererRendered () {\n      _updateMaterialUniforms.call(this);\n\n      _.each(this._scopes, _.bind(function (scope) {\n        if (scope.playing) {\n          scope.render();\n        }\n        this.trigger(\"render\");\n      }, this));\n    }\n\n    function _updateUniformValue (uniformName) {\n      if (this.mappingMaterial) {\n        var value = this._material.uniforms[uniformName].value;\n\n        this.mappingMaterial.uniformInterface[uniformName].value = value;\n      }\n    }\n\n    function _updateTextUniformValue (textId, uniformName) {\n      if (this.mappingMaterial) {\n        var scope = this._scopes[textId],\n            value = scope.material.uniforms[uniformName].value;\n\n        this.mappingMaterial.textUniformInterface[textId][uniformName].value = value;\n      }\n    }\n\n    function _update () {\n      var buildMapping,\n          buildMappingMaterial,\n          mappingMaterial,\n          buildStages;\n\n      buildMapping = _.bind(function () {\n        return _.bind(function (next) {\n          Blotter.MappingBuilder.build(this._texts, _.bind(function (newMapping) {\n            this._mapping = newMapping;\n            this._mapping.ratio = this.ratio;\n\n            next();\n          }, this));\n        }, this);\n      }, this);\n\n      buildMappingMaterial = _.bind(function () {\n        return _.bind(function (next) {\n          Blotter.MappingMaterialBuilder.build(this._mapping, this._material, _.bind(function (newMappingMaterial) {\n            this.mappingMaterial = newMappingMaterial;\n\n            next();\n          }, this));\n        }, this);\n      }, this);\n\n      buildStages = [\n        buildMapping(),\n        buildMappingMaterial()\n      ];\n\n      _(buildStages).reduceRight(_.wrap, _.bind(function () {\n        this._renderer.stop();\n\n        _.each(this._scopes, _.bind(function (scope, textId) {\n          scope.mappingMaterial = this.mappingMaterial;\n          scope.needsUpdate = true;\n        }, this));\n\n        this._renderer.material = this.mappingMaterial.shaderMaterial;\n        this._renderer.width = this._mapping.width;\n        this._renderer.height = this._mapping.height;\n\n        if (this.autostart) {\n          this.start();\n        }\n\n        this.trigger(this.lastUpdated ? \"update\" : \"ready\");\n        this.lastUpdated = Date.now();\n      }, this))();\n    }\n\n    return {\n\n      constructor : Blotter,\n\n      get needsUpdate () { }, // jshint\n\n      set needsUpdate (value) {\n        if (value === true) {\n          _update.call(this);\n        }\n      },\n\n      get material () {\n        return this._material;\n      },\n\n      set material (material) {\n        this.setMaterial(material);\n      },\n\n      get texts () {\n        return this._texts;\n      },\n\n      set texts (texts) {\n        this.removeTexts(this._texts);\n        this.addTexts(texts);\n      },\n\n      get imageData () {\n        return this._renderer.imageData;\n      },\n\n      init : function (material, options) {\n        options = options || {};\n        _.defaults(this, options, {\n          ratio : Blotter.CanvasUtils.pixelRatio,\n          autobuild : true,\n          autostart : true,\n          autoplay : true\n        });\n\n        this.setMaterial(material);\n        this.addTexts(options.texts);\n\n        this._renderer.on(\"render\", _.bind(_rendererRendered, this));\n\n        if (this.autobuild) {\n          this.needsUpdate = true;\n        }\n\n        if (this.autostart) {\n          this.start();\n        }\n      },\n\n      start : function () {\n        this.autostart = true;\n        this._startTime = Date.now();\n        this._renderer.start();\n      },\n\n      stop : function () {\n        this.autostart = false;\n        this._renderer.stop();\n      },\n\n      teardown : function () {\n        this._renderer.teardown();\n      },\n\n      setMaterial : function (material) {\n        Blotter.Messaging.ensureInstanceOf(material, Blotter.Material, \"Blotter.Material\", \"Blotter\", \"setMaterial\");\n\n        this._material = material;\n\n        if (this._materialEventBinding) {\n          this._materialEventBinding.unsetEventCallbacks();\n        }\n\n        this._materialEventBinding = new Blotter.ModelEventBinding(material, {\n          update : _.bind(function () {\n            _update.call(this);\n          }, this),\n\n          updateUniform : _.bind(function (uniformName) {\n            _updateUniformValue.call(this, uniformName);\n          }, this),\n        });\n        material.on(\"update\", this._materialEventBinding.eventCallbacks.update);\n        material.on(\"update:uniform\", this._materialEventBinding.eventCallbacks.updateUniform);\n      },\n\n      addText : function (text) {\n        this.addTexts(text);\n      },\n\n      addTexts : function (texts) {\n        var filteredTexts = Blotter.TextUtils.filterTexts(texts),\n            newTexts = _.difference(filteredTexts, this._texts);\n\n        _.each(newTexts, _.bind(function (text) {\n          this._texts.push(text);\n\n          this._textEventBindings[text.id] = new Blotter.ModelEventBinding(text, {\n            update : _.bind(function () {\n              _update.call(this);\n            }, this)\n          });\n          text.on(\"update\", this._textEventBindings[text.id].eventCallbacks.update);\n\n          this._scopes[text.id] = new Blotter.RenderScope(text, this);\n\n          this._scopeEventBindings[text.id] = new Blotter.ModelEventBinding(this._scopes[text.id], {\n            updateUniform : _.bind(function (uniformName) {\n              _updateTextUniformValue.call(this, text.id, uniformName);\n            }, this),\n          });\n          this._scopes[text.id].on(\"update:uniform\", this._scopeEventBindings[text.id].eventCallbacks.updateUniform);\n        }, this));\n      },\n\n      removeText : function (text) {\n        this.removeTexts(text);\n      },\n\n      removeTexts : function (texts) {\n        var filteredTexts = Blotter.TextUtils.filterTexts(texts),\n            removedTexts = _.intersection(this._texts, filteredTexts);\n\n        _.each(removedTexts, _.bind(function (text) {\n          this._texts = _.without(this._texts, text);\n\n          this._textEventBindings[text.id].unsetEventCallbacks();\n          this._scopeEventBindings[text.id].unsetEventCallbacks();\n\n          delete this._textEventBindings[text.id];\n          delete this._scopeEventBindings[text.id];\n          delete this._scopes[text.id];\n        }, this));\n      },\n\n      forText : function (text) {\n        Blotter.Messaging.ensureInstanceOf(text, Blotter.Text, \"Blotter.Text\", \"Blotter\", \"forText\");\n\n        if (!(this._scopes[text.id])) {\n          Blotter.Messaging.logError(\"Blotter\", \"forText\", \"Blotter.Text object not found in blotter\");\n          return;\n        }\n\n        return this._scopes[text.id];\n      },\n\n      boundsForText : function (text) {\n        Blotter.Messaging.ensureInstanceOf(text, Blotter.Text, \"Blotter.Text\", \"Blotter\", \"boundsForText\");\n\n        if (!(this._scopes[text.id])) {\n          Blotter.Messaging.logError(\"Blotter\", \"boundsForText\", \"Blotter.Text object not found in blotter\");\n          return;\n        }\n\n        if (this._mapping) {\n          return this.mappingMaterial.boundsForText(text);\n        }\n      }\n    };\n  })();\n\n  _.extend(Blotter.prototype, EventEmitter.prototype);\n\n  Blotter.Version = \"v0.1.0\";\n\n  // Use a single webgl context regardless of number of blotter instances.\n  Blotter.webglRenderer = Blotter.webglRenderer || new THREE.WebGLRenderer({ antialias: true, alpha: true, premultipliedAlpha : false });\n\n  Blotter.Assets = Blotter.Assets || {};\n  Blotter.Assets.Shaders = Blotter.Assets.Shaders || {};\n\n})(\n  this.Blotter, this._, this.THREE, this.Detector, this.EventEmitter\n);\n\n(function(Blotter) {\n\n  Blotter.Math = {\n    generateUUID : (function () {\n      // http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136\n      var lut = [];\n\n      for ( var i = 0; i < 256; i ++ ) {\n        lut[i] = ( i < 16 ? '0' : '' ) + (i).toString(16).toUpperCase();\n      }\n\n      return function generateUUID() {\n        var d0 = Math.random() * 0xffffffff | 0;\n        var d1 = Math.random() * 0xffffffff | 0;\n        var d2 = Math.random() * 0xffffffff | 0;\n        var d3 = Math.random() * 0xffffffff | 0;\n        return lut[d0 & 0xff] + lut[d0 >> 8 & 0xff] + lut[d0 >> 16 & 0xff] + lut[d0 >> 24 & 0xff] + '-' +\n          lut[d1 & 0xff] + lut[d1 >> 8 & 0xff] + '-' + lut[d1 >> 16 & 0x0f | 0x40] + lut[d1 >> 24 & 0xff] + '-' +\n          lut[d2 & 0x3f | 0x80] + lut[d2 >> 8 & 0xff] + '-' + lut[d2 >> 16 & 0xff] + lut[d2 >> 24 & 0xff] +\n          lut[d3 & 0xff] + lut[d3 >> 8 & 0xff] + lut[d3 >> 16 & 0xff] + lut[d3 >> 24 & 0xff];\n      };\n    })()\n  };\n\n})(\n  this.Blotter\n);\n\n(function(Blotter) {\n\n  Blotter.Messaging = (function () {\n\n    function _formattedMessage (domain, method, message) {\n      return domain + (method ? (\"#\" + method) : \"\") + \": \" + message;\n    }\n\n    return {\n\n      ensureInstanceOf : function (object, constructor, constructorStr, domain, method) {\n        if (!(object instanceof constructor)) {\n          this.logError(domain, method, \"argument must be instanceof \" + constructorStr);\n          return;\n        }\n      },\n\n      logError : function (domain, method, message) {\n        var formatted = _formattedMessage(domain, method, message);\n\n        console.error(formatted);\n      },\n\n      logWarning : function (domain, method, message) {\n        var formatted = _formattedMessage(domain, method, message);\n\n        console.warn(formatted);\n      },\n\n      throwError : function (domain, method, message) {\n        var formatted = _formattedMessage(domain, method, message);\n\n        throw formatted;\n      }\n    };\n  })();\n\n})(\n  this.Blotter\n);\n\n(function(Blotter, _) {\n\n  Blotter._extendWithGettersSetters = function (obj) {\n    _.each(Array.prototype.slice.call(arguments, 1), function (source) {\n      if (source) {\n        for (var prop in source) {\n          if (obj[prop] && Object.getOwnPropertyDescriptor(obj, prop) && Object.getOwnPropertyDescriptor(obj, prop).set) {\n            Object.getOwnPropertyDescriptor(obj, prop).set(source[prop]);\n          } else {\n            obj[prop] = source[prop];\n          }\n        }\n      }\n    });\n    return obj;\n  };\n\n})(\n  this.Blotter, this._\n);\n\n(function(Blotter) {\n\n  Blotter.VendorPrefixes = [\"ms\", \"moz\", \"webkit\", \"o\"];\n\n})(\n  this.Blotter\n);\n\n  (function(Blotter, _) {\n\n  Blotter.ModelEventBinding = function (model, eventCallbacks) {\n    this.model = model;\n    this.eventCallbacks = eventCallbacks || {};\n  };\n\n  Blotter.ModelEventBinding.prototype = {\n\n    constructor : Blotter.ModelEventBinding,\n\n    unsetEventCallbacks : function () {\n      _.each(this.eventCallbacks, _.bind(function (callback, eventKey) {\n        this.model.off(eventKey, callback);\n      }, this));\n    }\n  };\n\n})(\n  this.Blotter, this._\n);\n\n(function(Blotter) {\n\n  Blotter.CanvasUtils = {\n\n    // Creates and returns a high a canvas\n\n    canvas : function (w, h, options) {\n      options = options || {};\n      var canvas = document.createElement(\"canvas\");\n\n      canvas.className = options.class;\n      canvas.innerHTML = options.html;\n\n      canvas.width = w;\n      canvas.height = h;\n\n      return canvas;\n    },\n\n    // Creates and returns a high DPI canvas based on a device specific pixel ratio\n\n    hiDpiCanvas : function (w, h, ratio, options) {\n      ratio = ratio || this.pixelRatio;\n      options = options || {};\n      var canvas = document.createElement(\"canvas\");\n\n      canvas.className = options.class;\n      canvas.innerHTML = options.html;\n\n      this.updateCanvasSize(canvas, w, h, ratio);\n\n      return canvas;\n    },\n\n    updateCanvasSize : function (canvas, w, h, ratio) {\n      ratio = ratio || 1;\n\n      canvas.width = w * ratio;\n      canvas.height = h * ratio;\n      canvas.style.width = w + \"px\";\n      canvas.style.height = h + \"px\";\n      canvas.getContext(\"2d\").setTransform(ratio, 0, 0, ratio, 0, 0);\n    },\n\n    // Returns the device's pixel ratio\n\n    pixelRatio : (function () {\n      var ctx = document.createElement(\"canvas\").getContext(\"2d\"),\n          dpr = window.devicePixelRatio || 1,\n          bsr = ctx.backingStorePixelRatio;\n\n      for(var x = 0; x < Blotter.VendorPrefixes.length && !bsr; ++x) {\n        bsr = ctx[Blotter.VendorPrefixes[x]+\"BackingStorePixelRatio\"];\n      }\n\n      bsr = bsr || 1;\n\n      return (dpr / bsr);\n    })(),\n\n    // Returns the mouse position within a canvas\n\n    mousePosition : function (canvas, event) {\n      var rect = canvas.getBoundingClientRect();\n      return {\n        x: event.clientX - rect.left,\n        y: event.clientY - rect.top\n      };\n    },\n\n    // Returns the mouse position within a canvas, normalized to a value between 0 and 1\n\n    normalizedMousePosition : function (canvas, event) {\n      var rect = canvas.getBoundingClientRect(),\n          position = this.mousePosition(canvas, event);\n\n      return {\n        x: position.x / rect.width,\n        y: position.y / rect.height\n      };\n    }\n  };\n\n})(\n  this.Blotter\n);\n\n(function(Blotter, _) {\n\n  Blotter.PropertyDefaults = {\n    family       : 'sans-serif',\n    size         : 12,\n    leading      : 1.5,\n    fill         : '#000',\n    style        : 'normal',\n    weight       : 400,\n    padding      : 0,\n    paddingTop   : 0,\n    paddingRight : 0,\n    paddingBottom: 0,\n    paddingLeft  : 0\n  };\n\n  Blotter.TextUtils = {\n\n    Properties : _.keys(Blotter.PropertyDefaults),\n\n    // Recieves property values (optional) and fills in any missing values with default values\n\n    ensurePropertyValues : function(properties) {\n      properties = _.defaults(properties || {}, Blotter.PropertyDefaults);\n      return properties;\n    },\n\n    filterTexts : function(texts) {\n      if (texts instanceof Blotter.Text) {\n        texts = [texts];\n      } else {\n        texts = _.toArray(texts);\n      }\n\n      return _.filter(texts, _.bind(function (text) {\n        var isText = text instanceof Blotter.Text;\n\n        if (!isText) {\n          Blotter.Messaging.logWarning(\"Blotter.TextUtils\", \"filterTexts\", \"object must be instance of Blotter.Text\");\n        }\n\n        return isText;\n      }, this));\n    },\n\n    // Format padding values from style properties for passing to document\n\n    stringifiedPadding : function(properties) {\n      var _properties = properties || this.ensurePropertyValues(),\n          pTop = properties.paddingTop || _properties.padding,\n          pRight = _properties.paddingRight || _properties.padding,\n          pBottom = _properties.paddingBottom || _properties.padding,\n          pLeft = _properties.paddingLeft || _properties.padding;\n\n      return pTop + \"px \" + pRight + \"px \" + pBottom + \"px \" + pLeft + \"px\";\n    },\n\n    // Determines size of text within the document given certain style properties\n\n    sizeForText : function(textValue, properties) {\n      // Using a <span> here may not be the best approach. In theory a user's stylesheet\n      //   could override the necessary styling for determining sizes below. With growing\n      //   support for custom tags in html, we may consider using them if this raises problems.\n      var el = document.createElement(\"span\"),\n          size;\n\n      properties = this.ensurePropertyValues(properties);\n\n      el.innerHTML = textValue;\n      el.style.display = \"inline-block\";\n      el.style.fontFamily = properties.family;\n      el.style.fontSize = properties.size + \"px\";\n      el.style.fontWeight = properties.weight;\n      el.style.fontStyle = properties.style;\n      el.style.lineHeight = properties.leading;\n      el.style.maxWidth = \"none\";\n      el.style.padding = this.stringifiedPadding(properties);\n      el.style.position = \"absolute\";\n      el.style.width = \"auto\";\n      el.style.visibility = \"hidden\";\n\n\n      document.body.appendChild(el);\n\n      size = {\n        w: el.offsetWidth,\n        h: el.offsetHeight\n      };\n\n      document.body.removeChild(el);\n\n      return size;\n    }\n  };\n\n})(\n  this.Blotter, this._\n);\n\n(function(Blotter, _) {\n\n  Blotter.UniformUtils = {\n\n    // Uniform type values we accept for public uniforms\n\n    UniformTypes : [\"1f\", \"2f\", \"3f\", \"4f\"],\n\n    // Default uniforms (required) provided to all materials\n\n    defaultUniforms : {\n      uResolution : { type : \"2f\", value : [0.0, 0.0] }, // Resolution of individual text areas within mapping texture\n      uGlobalTime : { type : \"1f\", value : 0.0 }, // The global time in seconds\n      uTimeDelta : { type : \"1f\", value : 0.0 }, // The render time in seconds\n      uBlendColor : { type : \"4f\", value : [1.0, 1.0, 1.0, 1.0] },\n      uPixelRatio : { type : \"1f\", value : Blotter.CanvasUtils.pixelRatio } // The pixel ratio of the user's device\n    },\n\n    // Determine if value is valid for public uniform type\n\n    validValueForUniformType : function (type, value) {\n      var valid = false,\n          isValid = function (element) {\n            return !isNaN(element);\n          };\n\n      switch (type) {\n        case \"1f\":\n          valid = !isNaN(value) && [value].every(isValid);\n          break;\n\n        case \"2f\":\n          valid = _.isArray(value) && value.length == 2 && value.every(isValid);\n          break;\n\n        case \"3f\":\n          valid = _.isArray(value) && value.length == 3 && value.every(isValid);\n          break;\n\n        case \"4f\":\n          valid = _.isArray(value) && value.length == 4 && value.every(isValid);\n          break;\n\n        default:\n          break;\n      }\n\n      return valid;\n    },\n\n    glslDataTypeForUniformType : function (type) {\n      var dataType;\n      switch (type) {\n        case \"1f\":\n          dataType = \"float\";\n          break;\n\n        case \"2f\":\n          dataType = \"vec2\";\n          break;\n\n        case \"3f\":\n          dataType = \"vec3\";\n          break;\n\n        case \"4f\":\n          dataType = \"vec4\";\n          break;\n\n        default:\n          break;\n      }\n\n      return dataType;\n    },\n\n    fullSwizzleStringForUniformType : function (type) {\n      var swizzleString;\n\n      switch (type) {\n        case \"1f\":\n          swizzleString = \"x\";\n          break;\n\n        case \"2f\":\n          swizzleString = \"xy\";\n          break;\n\n        case \"3f\":\n          swizzleString = \"xyz\";\n          break;\n\n        case \"4f\":\n          swizzleString = \"xyzw\";\n          break;\n\n        default:\n          break;\n      }\n\n      return swizzleString;\n    },\n\n    // Given an object containing uniform descriptions, return an object containing only valid uniforms based on the uniform's type and value\n\n    extractValidUniforms : function (uniforms) {\n      uniforms = uniforms || {};\n      return _.reduce(uniforms, function (memo, uniformDescription, uniformName) {\n        if (Blotter.UniformUtils.UniformTypes.indexOf(uniformDescription.type) == -1) {\n          Blotter.Messaging.logError(\"Blotter.UniformUtils\", \"extractValidUniforms\", \"uniforms must be one of type: \" +\n            Blotter.UniformUtils.UniformTypes.join(\", \"));\n          return memo;\n        }\n\n        if (!Blotter.UniformUtils.validValueForUniformType(uniformDescription.type, uniformDescription.value)) {\n          Blotter.Messaging.logError(\"Blotter.UniformUtils\", \"extractValidUniforms\", \"uniform value for \" + uniformName + \" is incorrect for type: \" + uniformDescription.type);\n          return memo;\n        }\n\n        memo[uniformName] = _.pick(uniformDescription, \"type\", \"value\");\n        return memo;\n      }, {});\n    },\n\n    ensureHasRequiredDefaultUniforms : function (uniforms, domain, method) {\n      if (!(Blotter.UniformUtils.hasRequiredDefaultUniforms(uniforms))) {\n        this.logError(domain, method, \"uniforms object is missing required default uniforms defined in Blotter.UniformUtils.defaultUniforms\");\n        return;\n      }\n    },\n\n    hasRequiredDefaultUniforms : function (uniforms) {\n      var missingKeys = _.difference(_.allKeys(Blotter.UniformUtils.defaultUniforms), _.allKeys(uniforms));\n\n      return !!!missingKeys.length;\n    }\n\n  };\n\n})(\n  this.Blotter, this._\n);\n\n(function(Blotter, _, THREE, EventEmitter) {\n\n  Blotter.Text = function (value, properties) {\n    this.id = Blotter.Math.generateUUID();\n    this.value = value;\n    this.properties = properties;\n  };\n\n  Blotter.Text.prototype = {\n    constructor : Blotter.Text,\n\n    get needsUpdate () { }, // jshint\n\n    set needsUpdate (value) {\n      if (value === true) {\n        this.trigger(\"update\");\n      }\n    },\n\n    get properties () {\n      return this._properties;\n    },\n\n    set properties (properties) {\n      this._properties = Blotter.TextUtils.ensurePropertyValues(properties);\n    }\n  };\n\n  Blotter._extendWithGettersSetters(Blotter.Text.prototype, EventEmitter.prototype);\n\n})(\n  this.Blotter, this._, this.THREE, this.EventEmitter\n);\n\n(function(Blotter, _) {\n\n  Blotter.Assets.Shaders.Blending = [\n    \"//\",\n    \"// Author : Bradley Griffith\",\n    \"// License : Distributed under the MIT License.\",\n    \"//\",\n    \"\",\n    \"// Returns the resulting blend color by blending a top color over a base color\",\n    \"highp vec4 normalBlend(highp vec4 topColor, highp vec4 baseColor) {\",\n    \"  highp vec4 blend = vec4(0.0);\",\n\n    \"  // HACK\",\n    \"  // Cant divide by 0 (see the 'else' alpha) and after a lot of attempts\",\n    \"  // this simply seems like the only solution Im going to be able to come up with to get alpha back.\",\n    \"  if (baseColor.a == 1.0) {\",\n    \"    baseColor.a = 0.9999999;\",\n    \"  };\",\n\n    \"  if (topColor.a >= 1.0) {\",\n    \"    blend.a = topColor.a;\",\n    \"    blend.r = topColor.r;\",\n    \"    blend.g = topColor.g;\",\n    \"    blend.b = topColor.b;\",\n    \"  } else if (topColor.a == 0.0) {\",\n    \"    blend.a = baseColor.a;\",\n    \"    blend.r = baseColor.r;\",\n    \"    blend.g = baseColor.g;\",\n    \"    blend.b = baseColor.b;\",\n    \"  } else {\",\n    \"    blend.a = 1.0 - (1.0 - topColor.a) * (1.0 - baseColor.a); // alpha\",\n    \"    blend.r = (topColor.r * topColor.a / blend.a) + (baseColor.r * baseColor.a * (1.0 - topColor.a) / blend.a);\",\n    \"    blend.g = (topColor.g * topColor.a / blend.a) + (baseColor.g * baseColor.a * (1.0 - topColor.a) / blend.a);\",\n    \"    blend.b = (topColor.b * topColor.a / blend.a) + (baseColor.b * baseColor.a * (1.0 - topColor.a) / blend.a);\",\n    \"  }\",\n\n    \"  return blend;\",\n    \"}\",\n\n    \"// Returns a vec4 representing the original top color that would have been needed to blend\",\n    \"//  against a passed in base color in order to result in the passed in blend color.\",\n    \"highp vec4 normalUnblend(highp vec4 blendColor, highp vec4 baseColor) {\",\n    \"  highp vec4 unblend = vec4(0.0);\",\n\n    \"  // HACKY\",\n    \"  // Cant divide by 0 (see alpha) and after a lot of attempts\",\n    \"  // this simply seems like the only solution Im going to be able to come up with to get alpha back.\",\n    \"  if (baseColor.a == 1.0) {\",\n    \"    baseColor.a = 0.9999999;\",\n    \"  }\",\n\n    \"  unblend.a = 1.0 - ((1.0 - blendColor.a) / (1.0 - baseColor.a));\",\n    \"  // Round to two decimal places\",\n    \"  unblend.a = (sign(100.0 * unblend.a) * floor(abs(100.0 * unblend.a) + 0.5)) / 100.0;\",\n\n    \"  if (unblend.a >= 1.0) {\",\n    \"    unblend.r = blendColor.r;\",\n    \"    unblend.g = blendColor.g;\",\n    \"    unblend.b = blendColor.b;\",\n    \"  } else if (unblend.a == 0.0) {\",\n    \"    unblend.r = baseColor.r;\",\n    \"    unblend.g = baseColor.g;\",\n    \"    unblend.b = baseColor.b;\",\n    \"  } else {\",\n    \"    unblend.r = (blendColor.r - (baseColor.r * baseColor.a * (1.0 - unblend.a) / blendColor.a)) / (unblend.a / blendColor.a);\",\n    \"    unblend.g = (blendColor.g - (baseColor.g * baseColor.a * (1.0 - unblend.a) / blendColor.a)) / (unblend.a / blendColor.a);\",\n    \"    unblend.b = (blendColor.b - (baseColor.b * baseColor.a * (1.0 - unblend.a) / blendColor.a)) / (unblend.a / blendColor.a);\",\n    \"  }\",\n\n    \"  return unblend;\",\n    \"}\",\n  ].join(\"\\n\");\n\n})(\n  this.Blotter, this._\n);\n\n(function(Blotter, _) {\n\n  Blotter.Assets.Shaders.Inf = [\n    \"//\",\n    \"// Author : Bradley Griffith\",\n    \"// License : Distributed under the MIT License.\",\n    \"//\",\n    \"bool isinf(float val) {\",\n    \"    return (val != 0.0 && val * 2.0 == val) ? true : false;\",\n    \"}\",\n  ].join(\"\\n\");\n\n})(\n  this.Blotter, this._\n);\n\n(function(Blotter, _) {\n\n  Blotter.Assets.Shaders.LineMath = [\n    Blotter.Assets.Shaders.Inf,\n    \"\",\n    \"//\",\n    \"// Author : Bradley Griffith\",\n    \"// License : Distributed under the MIT License.\",\n    \"//\",\n    \"\",\n    \"// Returns the slope of a line given the degrees of the angle on which that line is rotated;\",\n    \"float slopeForDegrees(float deg) {\",\n    \"    // Ensure degrees stay withing 0.0 - 360.0\",\n    \"    deg = mod(deg, 360.0);\",\n\n    \"    float radians = deg * (PI / 180.0);\",\n\n    \"    return tan(radians);\",\n    \"}\",\n\n    \"// Given x, a slope, and another point, find y for x.\",\n    \"float yForXOnSlope(float x, float slope, vec2 p2) {\",\n    \"    return -1.0 * ((slope * (p2.x - x)) - p2.y);\",\n    \"}\",\n\n    \"// Given y, a slope, and another point, find x for y.\",\n    \"float xForYOnSlope(float y, float slope, vec2 p2) {\",\n    \"    return ((y - p2.y) + (slope * p2.x)) / slope;\",\n    \"}\",\n\n    \"// Returns slope adjusted for screen ratio.\",\n    \"float normalizedSlope(float slope, vec2 resolution) {\",\n    \"    vec2 p = vec2(1.0) / resolution;\",\n    \"    return ((slope * 100.0) / p.x) / (100.0 / p.x);\",\n    \"}\",\n\n    \"// Returns offsets (+/-) for any coordinate at distance given slope.\",\n    \"//   Note: This function does not normalize distance.\",\n    \"//   Note: This function does not adjust slope for screen ratio.\",\n    \"vec2 offsetsForCoordAtDistanceOnSlope(float d, float slope) {\",\n    \"    return vec2(\",\n    \"        (d * cos(atan(slope))),\",\n    \"        (d * sin(atan(slope)))\",\n    \"    );\",\n    \"}\",\n    \"// Returns a boolean designating whether or not an infinite line intersects with an infinite line, and sets an `out` variable for the intersection point if it is found.\",\n    \"//   Note: This function does not adjust slope for screen ratio.\",\n    \"bool lineLineIntersection (out vec2 intersect, in vec2 p1, in float m1, in vec2 p2, in float m2) {\",\n    \"    // See: http://gamedev.stackexchange.com/questions/44720/line-intersection-from-parametric-equation\",\n    \"    //      http://stackoverflow.com/questions/41687083/formula-to-determine-if-an-infinite-line-and-a-line-segment-intersect/41687904#41687904\",\n\n    \"    bool isIntersecting = false;\",\n\n    \"    float dx = 1.0;\",\n    \"    float dy = m1;\",\n\n    \"    float dxx = 1.0;\",\n    \"    float dyy = m2;\",\n\n    \"    float denominator = ((dxx * dy) - (dyy * dx));\",\n    \"    if (denominator == 0.0) {\",\n    \"        // Lines are parallel\",\n    \"        return isIntersecting;\",\n    \"    }\",\n\n    \"    if (isinf(dy)) {\",\n    \"        float y = yForXOnSlope(p1.x, m2, p2);\",\n    \"        isIntersecting = true;\",\n    \"        intersect = vec2(p1.x, y);\",\n    \"        return isIntersecting;\",\n    \"    }\",\n\n    \"    if (isinf(dyy)) {\",\n    \"        float y = yForXOnSlope(p2.x, m1, p1);\",\n    \"        isIntersecting = true;\",\n    \"        intersect = vec2(p2.x, y);\",\n    \"        return isIntersecting;\",\n    \"    }\",\n\n    \"    float u = ((dx * (p2.y - p1.y)) + (dy * (p1.x - p2.x))) / denominator;\",\n\n    \"    isIntersecting = true;\",\n    \"    intersect = p2 + (u * vec2(dxx, dyy));\",\n\n    \"    return isIntersecting;\",\n    \"}\",\n\n    \"// Returns a boolean designating whether or not an infinite line intersects with a line segment, and sets an `out` variable for the intersection point if it is found.\",\n    \"//   Note: This function does not adjust slope for screen ratio.\",\n    \"bool lineLineSegmentIntersection (out vec2 intersect, in vec2 point, in float m, in vec2 pA, in vec2 pB) {\",\n    \"    // See: http://gamedev.stackexchange.com/questions/44720/line-intersection-from-parametric-equation\",\n    \"    //      http://stackoverflow.com/questions/41687083/formula-to-determine-if-an-infinite-line-and-a-line-segment-intersect/41687904#41687904\",\n\n    \"    bool isIntersecting = false;\",\n\n    \"    float dx = 1.0;\",\n    \"    float dy = m;\",\n\n    \"    float dxx = pB.x - pA.x;\",\n    \"    float dyy = pB.y - pA.y;\",\n\n    \"    float denominator = ((dxx * dy) - (dyy * dx));\",\n    \"    if (denominator == 0.0 || (isinf(dyy / dxx) && isinf(dy))) {\",\n    \"        // Lines are parallel\",\n    \"        return isIntersecting;\",\n    \"    }\",\n\n    \"    if (isinf(dy)) {\",\n    \"        float m2 = dyy / dxx;\",\n    \"        float y = yForXOnSlope(point.x, m2, pB);\",\n    \"        isIntersecting = true;\",\n    \"        intersect = vec2(point.x, y);\",\n    \"        return isIntersecting;\",\n    \"    }\",\n\n    \"    float u = ((dx * (pA.y - point.y)) + (dy * (point.x - pA.x))) / denominator;\",\n\n    \"    if (u >= 0.0 && u <= 1.0) {\",\n    \"        // Intersection occured on line segment\",\n    \"        isIntersecting = true;\",\n    \"        intersect = pA + (u * vec2(dxx, dyy));\",\n    \"    }\",\n\n    \"    return isIntersecting;\",\n    \"}\",\n    \"// Dev Note: Terrible code. Needs refactor. Just trying to find \",\n    \"//   which two edges of the rect the intersections occur at.\",\n    \"void intersectsOnRectForLine(out vec2 iA, out vec2 iB, in vec2 rMinXY, in vec2 rMaxXY, in vec2 point, in float slope) {\",\n    \"    bool firstIntersectFound = false;\",\n\n    \"    vec2 intersectLeft = vec2(0.0);\",\n    \"    vec2 intersectTop = vec2(0.0);\",\n    \"    vec2 intersectRight = vec2(0.0);\",\n    \"    vec2 intersectBottom = vec2(0.0);\",\n\n    \"    bool intersectsLeft = lineLineSegmentIntersection(intersectLeft, point, slope, rMinXY, vec2(rMinXY.x, rMaxXY.y));\",\n    \"    bool intersectsTop = lineLineSegmentIntersection(intersectTop, point, slope, vec2(rMinXY.x, rMaxXY.y), rMaxXY);\",\n    \"    bool intersectsRight = lineLineSegmentIntersection(intersectRight, point, slope, rMaxXY, vec2(rMaxXY.x, rMinXY.y));\",\n    \"    bool intersectsBottom = lineLineSegmentIntersection(intersectBottom, point, slope, rMinXY, vec2(rMaxXY.x, rMinXY.y));\",\n\n\n    \"    if (intersectsLeft) {\",\n    \"        if (firstIntersectFound) {\",\n    \"            iB = intersectLeft;\",\n    \"        }\",\n    \"        else {\",\n    \"            iA = intersectLeft;\",\n    \"            firstIntersectFound = true;\",\n    \"        }\",\n    \"    }\",\n\n    \"    if (intersectsTop) {\",\n    \"        if (firstIntersectFound) {\",\n    \"            iB = intersectTop;\",\n    \"        }\",\n    \"        else {\",\n    \"            iA = intersectTop;\",\n    \"            firstIntersectFound = true;\",\n    \"        }\",\n    \"    }\",\n\n    \"    if (intersectsRight) {\",\n    \"        if (firstIntersectFound) {\",\n    \"            iB = intersectRight;\",\n    \"        }\",\n    \"        else {\",\n    \"            iA = intersectRight;\",\n    \"            firstIntersectFound = true;\",\n    \"        }\",\n    \"    }\",\n\n    \"    if (intersectsBottom) {\",\n    \"        if (firstIntersectFound) {\",\n    \"            iB = intersectBottom;\",\n    \"        }\",\n    \"        else {\",\n    \"            iA = intersectBottom;\",\n    \"        }\",\n    \"    }\",\n    \"}\"\n\n  ].join(\"\\n\");\n\n})(\n  this.Blotter, this._\n);\n\n// See License comments in shader string\n\n(function(Blotter, _) {\n\n  Blotter.Assets.Shaders.BlinnPhongSpecular = [\n    \"//\",\n    \"// Author : Reza Ali\",\n    \"// License : Distributed under the MIT License.\",\n    \"//\",\n    \"\",\n    \"float blinnPhongSpecular( vec3 lightDirection, vec3 viewDirection, vec3 surfaceNormal, float shininess ) {\",\n    \"\",\n    \"  //Calculate Blinn-Phong power\",\n    \"  vec3 H = normalize(viewDirection + lightDirection);\",\n    \"  return pow(max(0.0, dot(surfaceNormal, H)), shininess);\",\n    \"}\"\n  ].join(\"\\n\");\n\n})(\n  this.Blotter, this._\n);\n\n// See License comments in shader string\n\n(function(Blotter, _) {\n\n  Blotter.Assets.Shaders.Easing = [\n    \"//\",\n    \"// Author : Reza Ali\",\n    \"// License : Distributed under the MIT License.\",\n    \"//\",\n    \"\",\n    \"float linear( float t, float b, float c, float d )\",\n    \"{\",\n    \"    return t * ( c / d ) + b;\",\n    \"}\",\n    \"\",\n    \"float linear( float t )\",\n    \"{\",\n    \"    return t;\",\n    \"}\",\n    \"\",\n    \"float inQuad( float t, float b, float c, float d )\",\n    \"{\",\n    \"    return c * ( t /= d ) * t + b;\",\n    \"}\",\n    \"\",\n    \"float inQuad( float t )\",\n    \"{\",\n    \"    return t * t;\",\n    \"}\",\n    \"\",\n    \"float outQuad( float t, float b, float c, float d )\",\n    \"{\",\n    \"    return -c * ( t /= d ) * ( t - 2.0 ) + b;\",\n    \"}\",\n    \"\",\n    \"float outQuad( float t )\",\n    \"{\",\n    \"    return - ( t -= 1.0 ) * t + 1.0;\",\n    \"}\",\n    \"\",\n    \"float inOutQuad( float t, float b, float c, float d )\",\n    \"{\",\n    \"    if( ( t /= d / 2.0 ) < 1.0 ) {\",\n    \"      return c / 2.0 * t * t + b;\",\n    \"    }\",\n    \"    return - c / 2.0 * ( ( --t ) * ( t - 2.0 ) - 1.0 ) + b;\",\n    \"}\",\n    \"\",\n    \"float inOutQuad( float t )\",\n    \"{\",\n    \"    if( ( t /= 0.5 ) < 1.0 ) return 0.5 * t * t;\",\n    \"    return -0.5 * ( ( --t ) * ( t-2 ) - 1 );\",\n    \"}\",\n    \"\",\n    \"float inCubic( float t, float b, float c, float d )\",\n    \"{\",\n    \"    return c * ( t /= d ) * t * t + b;\",\n    \"}\",\n    \"\",\n    \"float inCubic( float t )\",\n    \"{\",\n    \"    return t * t * t;\",\n    \"}\",\n    \"\",\n    \"float outCubic( float t, float b, float c, float d )\",\n    \"{\",\n    \"    return c * ( ( t = t/d - 1.0 ) * t * t + 1.0 ) + b;\",\n    \"}\",\n    \"\",\n    \"float outCubic( float t )\",\n    \"{\",\n    \"    return ( ( --t ) * t * t + 1.0 );\",\n    \"}\",\n    \"\",\n    \"float inOutCubic( float t, float b, float c, float d )\",\n    \"{\",\n    \"    if( ( t /= d / 2.0 ) < 1.0 ) return  c / 2.0 * t * t * t + b;\",\n    \"    return c / 2.0 * ( ( t -= 2.0 ) * t * t + 2.0 ) + b;\",\n    \"}\",\n    \"\",\n    \"float inOutCubic( float t )\",\n    \"{\",\n    \"    if( ( t /= 0.5 ) < 1.0 ) return 0.5 * t * t * t;\",\n    \"    return 0.5 * ( ( t -= 2.0 ) * t * t + 2.0 );\",\n    \"}\",\n    \"\",\n    \"float inQuart( float t, float b, float c, float d )\",\n    \"{\",\n    \"    return c * ( t /= d ) * t * t * t + b;\",\n    \"}\",\n    \"\",\n    \"float inQuart( float t )\",\n    \"{\",\n    \"    return t * t * t * t;\",\n    \"}\",\n    \"\",\n    \"float outQuart( float t, float b, float c, float d )\",\n    \"{\",\n    \"    return -c * ( ( t = t/d - 1.0 ) * t * t * t - 1.0 ) + b;\",\n    \"}\",\n    \"\",\n    \"float outQuart( float t )\",\n    \"{\",\n    \"    return - ( ( --t ) * t * t * t - 1.0 );\",\n    \"}\",\n    \"\",\n    \"float inOutQuart( float t, float b, float c, float d )\",\n    \"{\",\n    \"    if ( ( t /= d / 2.0 ) < 1.0 ) return c / 2.0 * t * t * t * t + b;\",\n    \"    return -c / 2.0 * ( ( t -= 2.0 ) * t * t * t - 2.0 ) + b;\",\n    \"}\",\n    \"\",\n    \"float inOutQuart( float t )\",\n    \"{\",\n    \"    if ( (t /= 0.5 ) < 1.0 ) return 0.5 * t * t * t * t;\",\n    \"    return -0.5 * ( ( t -= 2.0 ) * t * t * t - 2.0 );\",\n    \"}\",\n    \"\",\n    \"float inQuint( float t, float b, float c, float d )\",\n    \"{\",\n    \"    return c * ( t /= d ) * t * t * t * t + b;\",\n    \"}\",\n    \"\",\n    \"float inQuint( float t )\",\n    \"{\",\n    \"    return t * t * t * t * t;\",\n    \"}\",\n    \"\",\n    \"float outQuint( float t, float b, float c, float d )\",\n    \"{\",\n    \"    return c * ( ( t = t/d - 1.0) * t * t * t * t + 1.0 ) + b;\",\n    \"}\",\n    \"\",\n    \"float outQuint( float t )\",\n    \"{\",\n    \"    return ( ( --t ) * t * t * t * t + 1.0 );\",\n    \"}\",\n    \"\",\n    \"float inOutQuint( float t, float b, float c, float d )\",\n    \"{\",\n    \"    if( ( t /= d /2.0 ) < 1.0 ) return  c / 2.0 * t * t * t * t * t + b;\",\n    \"    return c / 2.0 * ( ( t -= 2.0 ) * t * t * t * t + 2.0) + b;\",\n    \"}\",\n    \"\",\n    \"float inOutQuint( float t )\",\n    \"{\",\n    \"    if ( ( t /= 0.5 ) < 1.0 ) return 0.5 * t * t * t * t * t;\",\n    \"    return 0.5 * ( ( t -= 2 ) * t * t * t * t + 2.0 );\",\n    \"}\",\n    \"\",\n    \"float inSine( float t, float b, float c, float d )\",\n    \"{\",\n    \"    return -c * cos( t / d * ( 1.5707963268 ) ) + c + b;\",\n    \"}\",\n    \"\",\n    \"float inSine( float t )\",\n    \"{\",\n    \"    return -1.0 * cos( t * ( 1.5707963268 ) ) + 1.0;\",\n    \"}\",\n    \"\",\n    \"float outSine( float t, float b, float c, float d )\",\n    \"{\",\n    \"    return c * sin( t / d * ( 1.5707963268 ) ) + b;\",\n    \"}\",\n    \"\",\n    \"float outSine( float t )\",\n    \"{\",\n    \"    return sin( t * ( 1.5707963268 ) );\",\n    \"}\",\n    \"\",\n    \"float inOutSine( float t, float b, float c, float d )\",\n    \"{\",\n    \"    return - c / 2.0 * ( cos( 3.1415926536 * t / d ) - 1.0 ) + b;\",\n    \"}\",\n    \"\",\n    \"float inOutSine( float t )\",\n    \"{\",\n    \"    return -0.5 * ( cos( 3.1415926536 * t ) - 1.0 );\",\n    \"}\",\n    \"\",\n    \"float inExpo( float t, float b, float c, float d )\",\n    \"{\",\n    \"    return ( t == 0.0 ) ? b : c * pow( 2.0, 10.0 * ( t / d - 1.0 ) ) + b;\",\n    \"}\",\n    \"\",\n    \"float inExpo( float t )\",\n    \"{\",\n    \"    return ( t == 0 ) ? 0.0 : pow( 2.0, 10.0 * ( t - 1.0 ) );\",\n    \"}\",\n    \"\",\n    \"float outExpo( float t, float b, float c, float d )\",\n    \"{\",\n    \"    return ( t == d ) ? b + c : c * ( - pow( 2.0, -10.0 * t / d ) + 1.0 ) + b;\",\n    \"}\",\n    \"\",\n    \"float outExpo( float t )\",\n    \"{\",\n    \"    return ( t == 1.0 ) ? 1.0 : ( - pow( 2.0, -10.0 * t ) + 1.0 );\",\n    \"}\",\n    \"\",\n    \"float inOutExpo( float t, float b, float c, float d )\",\n    \"{\",\n    \"    if( t == 0 ) return b;\",\n    \"    if( t == d ) return b + c;\",\n    \"    if(( t /= d / 2.0 ) < 1.0 ) return c / 2.0 * pow( 2.0, 10.0 * ( t - 1.0 ) ) + b;\",\n    \"    return c / 2.0 * ( - pow( 2.0, -10.0 * --t ) + 2.0 ) + b;\",\n    \"}\",\n    \"\",\n    \"float inOutExpo( float t )\",\n    \"{\",\n    \"    if( t == 0.0 ) return 0.0;\",\n    \"    if( t == 1.0 ) return 1.0;\",\n    \"    if( ( t /= 0.5 ) < 1.0 ) return 0.5 * pow( 2.0, 10.0 * ( t - 1.0 ) );\",\n    \"    return 0.5 * ( - pow( 2.0, -10.0 * --t ) + 2.0 );\",\n    \"}\",\n    \"\",\n    \"float inCirc( float t, float b, float c, float d )\",\n    \"{\",\n    \"    return -c * ( sqrt( 1.0 - (t/=d)*t) - 1) + b;\",\n    \"}\",\n    \"\",\n    \"float inCirc( float t )\",\n    \"{\",\n    \"    return - ( sqrt( 1.0 - t*t) - 1);\",\n    \"}\",\n    \"\",\n    \"float outCirc( float t, float b, float c, float d )\",\n    \"{\",\n    \"    return c * sqrt( 1.0 - (t=t/d-1)*t) + b;\",\n    \"}\",\n    \"\",\n    \"float outCirc( float t )\",\n    \"{\",\n    \"    return sqrt( 1.0 - (--t)*t);\",\n    \"}\",\n    \"\",\n    \"float inOutCirc( float t, float b, float c, float d )\",\n    \"{\",\n    \"    if ( ( t /= d / 2.0 ) < 1 ) return - c / 2.0 * ( sqrt( 1.0 - t * t ) - 1.0 ) + b;\",\n    \"    return c / 2.0 * ( sqrt( 1.0 - ( t -= 2.0 ) * t ) + 1.0 ) + b;\",\n    \"}\",\n    \"\",\n    \"float inOutCirc( float t )\",\n    \"{\",\n    \"    if( ( t /= 0.5 ) < 1.0 ) return -0.5 * ( sqrt( 1.0 - t * t ) - 1.0 );\",\n    \"    return 0.5 * ( sqrt( 1.0 - ( t -= 2.0 ) * t ) + 1.0 );\",\n    \"}\",\n    \"\",\n    \"float inElastic( float t, float b, float c, float d )\",\n    \"{\",\n    \"    float s = 1.70158; float p = 0.0; float a = c;\",\n    \"    if( t == 0 ) return b;  if( ( t /= d ) == 1 ) return b + c;\",\n    \"    p = d * 0.3;\",\n    \"    if( a < abs( c ) ) { a = c; float s = p / 4.0; }\",\n    \"    else s = 0.1591549431 * p / ( 6.2831853072 ) * asin( c / a );\",\n    \"    return -( a * pow( 2.0, 10.0 * ( t -= 1.0 ) ) * sin( ( t * d - s ) * ( 6.2831853072 ) / p ) )  + b;\",\n    \"}\",\n    \"\",\n    \"float inElastic( float t )\",\n    \"{\",\n    \"    float s = 1.70158; float p = 0.0; float a = 1.0;\",\n    \"    if( t == 0.0 ) return 0.0;\",\n    \"    if( t == 1.0 ) return 1.0;\",\n    \"    p = 0.3;\",\n    \"    s = p / ( 6.2831853072 ) * asin( 1.0 / a );\",\n    \"    return -( a * pow( 2.0, 10.0 * ( t -= 1.0 ) ) * sin( ( t - s ) * ( 6.2831853072 ) / p ) );\",\n    \"}\",\n    \"\",\n    \"float outElastic( float t, float b, float c, float d )\",\n    \"{\",\n    \"    float s = 1.70158; float p = 0.0; float a = c;\",\n    \"    if( t == 0.0 ) return b;\",\n    \"    if( (t /= d ) == 1.0 ) return b + c;\",\n    \"    p = d * 0.3;\",\n    \"    if( a < abs( c ) ) { a = c; s = p / 4.0; }\",\n    \"    else { s = p / ( 6.2831853072 ) * asin( c / a ); }\",\n    \"    return a * pow( 2.0, -10.0 * t ) * sin( ( t * d - s ) * ( 6.2831853072 ) / p ) + c + b;\",\n    \"}\",\n    \"\",\n    \"float outElastic( float t )\",\n    \"{\",\n    \"    float s = 1.70158; float p = 0.0 ; float a = 1.0;\",\n    \"    if( t == 0.0 ) return 0.0;  if( t == 1.0 ) return 1.0;\",\n    \"    p = 0.3;\",\n    \"    s = p / ( 6.2831853072 ) * asin( 1.0 / a );\",\n    \"    return a * pow( 2.0, -10.0 * t ) * sin( ( t - s ) * ( 6.2831853072 ) / p ) + 1.0;\",\n    \"}\",\n    \"\",\n    \"float inOutElastic( float t, float b, float c, float d )\",\n    \"{\",\n    \"    float s = 1.70158; float p = 0.0; float a = c;\",\n    \"    if( t == 0.0 ) return b;\",\n    \"    if( ( t /= d / 2.0 ) == 2.0 ) return b + c;\",\n    \"    p = d * ( 0.3 * 1.5 );\",\n    \"    if( a < abs( c ) ) { a = c; s = p / 4.0; }\",\n    \"    else { s = p / ( 6.2831853072 ) * asin( c / a ); }\",\n    \"    if( t < 1.0 ) return -0.5 * ( a * pow( 2.0, 10.0 * ( t -= 1.0 ) ) * sin( ( t * d - s ) * ( 6.2831853072 ) / p ) ) + b;\",\n    \"    return a * pow( 2.0, -10.0 * ( t -= 1.0 ) ) * sin( ( t * d - s ) * ( 6.2831853072 ) / p ) * 0.5 + c + b;\",\n    \"}\",\n    \"\",\n    \"float inOutElastic( float t )\",\n    \"{\",\n    \"    float s = 1.70158; float p = 0; float a = 1.0;\",\n    \"    if( t == 0 ) return 0.0;\",\n    \"    if( ( t /= 0.5 ) == 2.0 ) return 1.0;\",\n    \"    p = ( 0.3 * 1.5 );\",\n    \"    s = p / ( 6.2831853072 ) * asin( 1.0 / a );\",\n    \"    if( t < 1.0 ) return -0.5 * ( a * pow( 2.0, 10.0 * ( t -= 1.0 ) ) * sin( ( t - s ) * ( 6.2831853072 ) / p ) );\",\n    \"    return a * pow( 2.0, -10.0 * ( t -= 1.0 ) ) * sin( ( t - s ) * ( 6.2831853072 ) / p ) * 0.5 + 1.0;\",\n    \"}\",\n    \"\",\n    \"float inBack( float t, float b, float c, float d )\",\n    \"{\",\n    \"    float s = 1.70158;\",\n    \"    return c * ( t /= d ) * t * ( ( s + 1.0 ) * t - s ) + b;\",\n    \"}\",\n    \"\",\n    \"float inBack( float t )\",\n    \"{\",\n    \"    float s = 1.70158;\",\n    \"    return t * t * ( ( s + 1.0 ) * t - s);\",\n    \"}\",\n    \"\",\n    \"float outBack( float t,  float b,  float c,  float d )\",\n    \"{\",\n    \"    float s = 1.70158;\",\n    \"    return c * ( ( t = t / d - 1.0 ) * t * ( ( s + 1.0 ) * t + s ) + 1.0 ) + b;\",\n    \"}\",\n    \"\",\n    \"float outBack( float t )\",\n    \"{\",\n    \"    float s = 1.70158;\",\n    \"    return ( ( --t ) * t * ( ( s + 1.0 ) * t + s ) + 1.0);\",\n    \"}\",\n    \"\",\n    \"float inOutBack( float t, float b, float c, float d )\",\n    \"{\",\n    \"    float s = 1.70158;\",\n    \"    if( ( t /= d / 2.0 ) < 1.0 ) return c / 2.0 * ( t * t * ( ( ( s *= 1.525 ) + 1.0 ) * t - s ) ) + b;\",\n    \"    return c / 2.0 * ( ( t -= 2.0 ) * t * ( ( ( s *= ( 1.525 ) ) + 1.0 ) * t + s ) + 2.0 ) + b;\",\n    \"}\",\n    \"\",\n    \"float inOutBack( float t )\",\n    \"{\",\n    \"    float s = 1.70158;\",\n    \"    if( ( t /= 0.5 ) < 1.0 ) return 0.5 * ( t * t * ( ( ( s *= 1.525 ) + 1.0 ) * t - s ) );\",\n    \"    return 0.5 * ( ( t -= 2 ) * t * ( ( ( s *= ( 1.525 ) ) + 1.0 ) * t + s ) + 2.0 );\",\n    \"}\",\n    \"\",\n    \"float outBounce( float t, float b, float c, float d )\",\n    \"{\",\n    \"    if( ( t /= d ) < ( 1.0 / 2.75 ) ) {\",\n    \"        return c * ( 7.5625 * t * t ) + b;\",\n    \"    } else if ( t < ( 2.0 / 2.75 ) ) {\",\n    \"        return c * ( 7.5625 * ( t -= ( 1.5 / 2.75 ) ) * t + 0.75 ) + b;\",\n    \"    } else if ( t < ( 2.5 / 2.75 ) ) {\",\n    \"        return c * ( 7.5625 * ( t -= ( 2.25 / 2.75 ) ) * t + 0.9375 ) + b;\",\n    \"    } else {\",\n    \"        return c * ( 7.5625 * ( t -= ( 2.625 / 2.75 ) ) * t + 0.984375 ) + b;\",\n    \"    }\",\n    \"}\",\n    \"\",\n    \"float outBounce( float t )\",\n    \"{\",\n    \"    if( t < ( 1.0 / 2.75 ) ) {\",\n    \"        return ( 7.5625 * t * t );\",\n    \"    } else if ( t < ( 2.0 / 2.75 ) ) {\",\n    \"        return ( 7.5625 * ( t-= ( 1.5 / 2.75 ) ) * t + .75 );\",\n    \"    } else if ( t < ( 2.5 / 2.75 ) ) {\",\n    \"        return ( 7.5625 * ( t -= ( 2.25 / 2.75 ) ) * t + 0.9375 );\",\n    \"    } else {\",\n    \"        return ( 7.5625 * ( t -= ( 2.625 / 2.75 ) ) * t + 0.984375 );\",\n    \"    }\",\n    \"}\",\n    \"\",\n    \"float inBounce( float t, float b, float c, float d )\",\n    \"{\",\n    \"    return c - outBounce( d - t, 0.0, c, d ) + b;\",\n    \"}\",\n    \"\",\n    \"float inBounce( float t )\",\n    \"{\",\n    \"    return 1.0 - outBounce( 1.0 - t);\",\n    \"}\",\n    \"\",\n    \"float inOutBounce( float t, float b, float c, float d )\",\n    \"{\",\n    \"    if ( t < d /2.0 ) return inBounce ( t * 2.0, 0.0, c, d ) * 0.5 + b;\",\n    \"    return outBounce ( t * 2.0 - d, 0, c, d ) * 0.5 + c * 0.5 + b;\",\n    \"}\",\n    \"\",\n    \"float inOutBounce( float t )\",\n    \"{\",\n    \"    if ( t < 0.5 ) return inBounce( t * 2.0 ) * 0.5;\",\n    \"    return outBounce( t * 2.0 - 1.0 ) * 0.5 + 0.5;\",\n    \"}\"\n  ].join(\"\\n\");\n\n})(\n  this.Blotter, this._\n);\n\n// See License comments in shader string\n\n(function(Blotter, _) {\n\n  Blotter.Assets.Shaders.Gamma = [\n    \"//\",\n    \"// Author : Reza Ali\",\n    \"// License : Distributed under the MIT License.\",\n    \"//\",\n    \"\",\n    \"const vec3 cGammaCorrection = vec3( 0.4545454545 );\",\n    \"\",\n    \"vec3 gamma( in vec3 color )\",\n    \"{\",\n    \"  return pow( color, cGammaCorrection );\",\n    \"}\",\n    \"\",\n    \"vec4 gamma( in vec4 color )\",\n    \"{\",\n    \"  return vec4( gamma( color.rgb ), color.a );\",\n    \"}\"\n  ].join(\"\\n\");\n\n})(\n  this.Blotter, this._\n);\n\n// See License comments in shader string\n\n(function(Blotter, _) {\n\n  Blotter.Assets.Shaders.Map = [\n    \"//\",\n    \"// Author : Reza Ali\",\n    \"// License : Distributed under the MIT License.\",\n    \"//\",\n    \"\",\n    \"float map( float value, float inMin, float inMax, float outMin, float outMax )\",\n    \"{\",\n    \"    return ( (value - inMin) / ( inMax - inMin ) * ( outMax - outMin ) ) + outMin;\",\n    \"}\"\n  ].join(\"\\n\");\n\n})(\n  this.Blotter, this._\n);\n\n// See License comments in shader string\n\n(function(Blotter, _) {\n\n  Blotter.Assets.Shaders.Noise = [\n    \"//\",\n    \"// Author : Patricio Gonzalez Vivo and Jen Lowe\",\n    \"// License : Distributed under the MIT License.\",\n    \"// Source : https://github.com/patriciogonzalezvivo/thebookofshaders\",\n    \"//\",\n    \"float random (in float _x) {\",\n    \"    return fract(sin(_x)*1e4);\",\n    \"}\",\n    \"\",\n    \"float random (in vec2 co) {\",\n    \"    return fract(sin(dot(co.xy,vec2(12.9898,78.233)))*43758.5453);\",\n    \"}\",\n    \"\",\n    \"float noise (in float _x) {\",\n    \"    float i = floor(_x);\",\n    \"    float f = fract(_x);\",\n    \"    float u = f * f * (3.0 - 2.0 * f);\",\n    \"    return mix(random(i), random(i + 1.0), u);\",\n    \"}\",\n    \"\",\n    \"float noise (in vec2 _st) {\",\n    \"    vec2 i = floor(_st);\",\n    \"    vec2 f = fract(_st);\",\n    \"    // Four corners in 2D of a tile\",\n    \"    float a = random(i);\",\n    \"    float b = random(i + vec2(1.0, 0.0));\",\n    \"    float c = random(i + vec2(0.0, 1.0));\",\n    \"    float d = random(i + vec2(1.0, 1.0));\",\n    \"    vec2 u = f * f * (3.0 - 2.0 * f);\",\n    \"    return mix(a, b, u.x) + \",\n    \"            (c - a)* u.y * (1.0 - u.x) + \",\n    \"            (d - b) * u.x * u.y;\",\n    \"}\",\n  ].join(\"\\n\");\n\n})(\n  this.Blotter, this._\n);\n\n// See License comments in shader string\n\n(function(Blotter, _) {\n\n  Blotter.Assets.Shaders.Noise2D = [\n    \"//\",\n    \"// Description : Array and textureless GLSL 2D simplex noise function.\",\n    \"//      Author : Ian McEwan, Ashima Arts.\",\n    \"//  Maintainer : ijm\",\n    \"//     Lastmod : 20110822 (ijm)\",\n    \"//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\",\n    \"//               Distributed under the MIT License. See LICENSE file.\",\n    \"//               https://github.com/ashima/webgl-noise\",\n    \"//\",\n    \"\",\n    \"vec2 n2mod289(vec2 x) {\",\n    \"  return x - floor(x * (1.0 / 289.0)) * 289.0;\",\n    \"}\",\n    \"\",\n    \"vec3 n2mod289(vec3 x) {\",\n    \"  return x - floor(x * (1.0 / 289.0)) * 289.0;\",\n    \"}\",\n    \"\",\n    \"vec4 n2mod289(vec4 x) {\",\n    \"  return x - floor(x * (1.0 / 289.0)) * 289.0;\",\n    \"}\",\n    \"\",\n    \"vec3 permute(vec3 x) {\",\n    \"  return n2mod289(((x*34.0)+1.0)*x);\",\n    \"}\",\n    \"\",\n    \"float snoise(vec2 v)\",\n    \"  {\",\n    \"  const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0\",\n    \"                      0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\",\n    \"                     -0.577350269189626,  // -1.0 + 2.0 * C.x\",\n    \"                      0.024390243902439); // 1.0 / 41.0\",\n    \"// First corner\",\n    \"  vec2 i  = floor(v + dot(v, C.yy) );\",\n    \"  vec2 x0 = v -   i + dot(i, C.xx);\",\n    \"\",\n    \"// Other corners\",\n    \"  vec2 i1;\",\n    \"  //i1.x = step( x0.y, x0.x ); // x0.x > x0.y ? 1.0 : 0.0\",\n    \"  //i1.y = 1.0 - i1.x;\",\n    \"  i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\",\n    \"  // x0 = x0 - 0.0 + 0.0 * C.xx ;\",\n    \"  // x1 = x0 - i1 + 1.0 * C.xx ;\",\n    \"  // x2 = x0 - 1.0 + 2.0 * C.xx ;\",\n    \"  vec4 x12 = x0.xyxy + C.xxzz;\",\n    \"  x12.xy -= i1;\",\n    \"\",\n    \"// Permutations\",\n    \"  i = n2mod289(i); // Avoid truncation effects in permutation\",\n    \"  vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))\",\n    \"   + i.x + vec3(0.0, i1.x, 1.0 ));\",\n    \"\",\n    \"  vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\",\n    \"  m = m*m ;\",\n    \"  m = m*m ;\",\n    \"\",\n    \"// Gradients: 41 points uniformly over a line, mapped onto a diamond.\",\n    \"// The ring size 17*17 = 289 is close to a multiple of 41 (41*7 = 287)\",\n    \"\",\n    \"  vec3 x = 2.0 * fract(p * C.www) - 1.0;\",\n    \"  vec3 h = abs(x) - 0.5;\",\n    \"  vec3 ox = floor(x + 0.5);\",\n    \"  vec3 a0 = x - ox;\",\n    \"\",\n    \"// Normalise gradients implicitly by scaling m\",\n    \"// Approximation of: m *= inversesqrt( a0*a0 + h*h );\",\n    \"  m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\",\n    \"\",\n    \"// Compute final noise value at P\",\n    \"  vec3 g;\",\n    \"  g.x  = a0.x  * x0.x  + h.x  * x0.y;\",\n    \"  g.yz = a0.yz * x12.xz + h.yz * x12.yw;\",\n    \"  return 130.0 * dot(m, g);\",\n    \"}\"\n  ].join(\"\\n\");\n\n})(\n  this.Blotter, this._\n);\n\n// See License comments in shader string\n\n(function(Blotter, _) {\n\n  Blotter.Assets.Shaders.Noise3D = [\n    \"//\",\n    \"// Description : Array and textureless GLSL 2D/3D/4D simplex\",\n    \"//               noise functions.\",\n    \"//      Author : Ian McEwan, Ashima Arts.\",\n    \"//  Maintainer : ijm\",\n    \"//     Lastmod : 20110822 (ijm)\",\n    \"//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\",\n    \"//               Distributed under the MIT License. See LICENSE file.\",\n    \"//               https://github.com/ashima/webgl-noise\",\n    \"//\",\n    \"\",\n    \"vec2 n3mod289(vec2 x) {\",\n    \"  return x - floor(x * (1.0 / 289.0)) * 289.0;\",\n    \"}\",\n    \"\",\n    \"vec3 n3mod289(vec3 x) {\",\n    \"  return x - floor(x * (1.0 / 289.0)) * 289.0;\",\n    \"}\",\n    \"\",\n    \"vec4 n3mod289(vec4 x) {\",\n    \"  return x - floor(x * (1.0 / 289.0)) * 289.0;\",\n    \"}\",\n    \"\",\n    \"vec4 permute(vec4 x) {\",\n    \"     return n3mod289(((x*34.0)+1.0)*x);\",\n    \"}\",\n    \"\",\n    \"vec4 taylorInvSqrt(vec4 r)\",\n    \"{\",\n    \"  return 1.79284291400159 - 0.85373472095314 * r;\",\n    \"}\",\n    \"\",\n    \"float snoise(vec3 v)\",\n    \"  {\",\n    \"  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\",\n    \"  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\",\n    \"\",\n    \"// First corner\",\n    \"  vec3 i  = floor(v + dot(v, C.yyy) );\",\n    \"  vec3 x0 =   v - i + dot(i, C.xxx) ;\",\n    \"\",\n    \"// Other corners\",\n    \"  vec3 g = step(x0.yzx, x0.xyz);\",\n    \"  vec3 l = 1.0 - g;\",\n    \"  vec3 i1 = min( g.xyz, l.zxy );\",\n    \"  vec3 i2 = max( g.xyz, l.zxy );\",\n    \"\",\n    \"  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\",\n    \"  //   x1 = x0 - i1  + 1.0 * C.xxx;\",\n    \"  //   x2 = x0 - i2  + 2.0 * C.xxx;\",\n    \"  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\",\n    \"  vec3 x1 = x0 - i1 + C.xxx;\",\n    \"  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\",\n    \"  vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\",\n    \"\",\n    \"// Permutations\",\n    \"  i = n3mod289(i);\",\n    \"  vec4 p = permute( permute( permute(\",\n    \"             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\",\n    \"           + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\",\n    \"           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\",\n    \"\",\n    \"// Gradients: 7x7 points over a square, mapped onto an octahedron.\",\n    \"// The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\",\n    \"  float n_ = 0.142857142857; // 1.0/7.0\",\n    \"  vec3  ns = n_ * D.wyz - D.xzx;\",\n    \"\",\n    \"  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\",\n    \"\",\n    \"  vec4 x_ = floor(j * ns.z);\",\n    \"  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\",\n    \"\",\n    \"  vec4 x = x_ *ns.x + ns.yyyy;\",\n    \"  vec4 y = y_ *ns.x + ns.yyyy;\",\n    \"  vec4 h = 1.0 - abs(x) - abs(y);\",\n    \"\",\n    \"  vec4 b0 = vec4( x.xy, y.xy );\",\n    \"  vec4 b1 = vec4( x.zw, y.zw );\",\n    \"\",\n    \"  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\",\n    \"  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\",\n    \"  vec4 s0 = floor(b0)*2.0 + 1.0;\",\n    \"  vec4 s1 = floor(b1)*2.0 + 1.0;\",\n    \"  vec4 sh = -step(h, vec4(0.0));\",\n    \"\",\n    \"  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\",\n    \"  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\",\n    \"\",\n    \"  vec3 p0 = vec3(a0.xy,h.x);\",\n    \"  vec3 p1 = vec3(a0.zw,h.y);\",\n    \"  vec3 p2 = vec3(a1.xy,h.z);\",\n    \"  vec3 p3 = vec3(a1.zw,h.w);\",\n    \"\",\n    \"//Normalise gradients\",\n    \"  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\",\n    \"  p0 *= norm.x;\",\n    \"  p1 *= norm.y;\",\n    \"  p2 *= norm.z;\",\n    \"  p3 *= norm.w;\",\n    \"\",\n    \"// Mix final noise value\",\n    \"  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\",\n    \"  m = m * m;\",\n    \"  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\",\n    \"                                dot(p2,x2), dot(p3,x3) ) );\",\n    \"  }\"\n  ].join(\"\\n\");\n\n})(\n  this.Blotter, this._\n);\n\n// See License comments in shader string\n\n(function(Blotter, _) {\n\n  Blotter.Assets.Shaders.Noise4D = [\n    \"//\",\n    \"// Description : Array and textureless GLSL 2D/3D/4D simplex\",\n    \"//               noise functions.\",\n    \"//      Author : Ian McEwan, Ashima Arts.\",\n    \"//  Maintainer : ijm\",\n    \"//     Lastmod : 20110822 (ijm)\",\n    \"//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\",\n    \"//               Distributed under the MIT License. See LICENSE file.\",\n    \"//               https://github.com/ashima/webgl-noise\",\n    \"//\",\n    \"\",\n    \"vec4 mod289(vec4 x) {\",\n    \"  return x - floor(x * (1.0 / 289.0)) * 289.0; }\",\n    \"\",\n    \"float mod289(float x) {\",\n    \"  return x - floor(x * (1.0 / 289.0)) * 289.0; }\",\n    \"\",\n    \"vec4 permute(vec4 x) {\",\n    \"     return mod289(((x*34.0)+1.0)*x);\",\n    \"}\",\n    \"\",\n    \"float permute(float x) {\",\n    \"     return mod289(((x*34.0)+1.0)*x);\",\n    \"}\",\n    \"\",\n    \"vec4 taylorInvSqrt(vec4 r)\",\n    \"{\",\n    \"  return 1.79284291400159 - 0.85373472095314 * r;\",\n    \"}\",\n    \"\",\n    \"float taylorInvSqrt(float r)\",\n    \"{\",\n    \"  return 1.79284291400159 - 0.85373472095314 * r;\",\n    \"}\",\n    \"\",\n    \"vec4 grad4(float j, vec4 ip)\",\n    \"  {\",\n    \"  const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);\",\n    \"  vec4 p,s;\",\n    \"\",\n    \"  p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;\",\n    \"  p.w = 1.5 - dot(abs(p.xyz), ones.xyz);\",\n    \"  s = vec4(lessThan(p, vec4(0.0)));\",\n    \"  p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www;\",\n    \"\",\n    \"  return p;\",\n    \"  }\",\n    \"\",\n    \"// (sqrt(5) - 1)/4 = F4, used once below\",\n    \"#define F4 0.309016994374947451\",\n    \"\",\n    \"float snoise(vec4 v)\",\n    \"  {\",\n    \"  const vec4  C = vec4( 0.138196601125011,  // (5 - sqrt(5))/20  G4\",\n    \"                        0.276393202250021,  // 2 * G4\",\n    \"                        0.414589803375032,  // 3 * G4\",\n    \"                       -0.447213595499958); // -1 + 4 * G4\",\n    \"\",\n    \"// First corner\",\n    \"  vec4 i  = floor(v + dot(v, vec4(F4)) );\",\n    \"  vec4 x0 = v -   i + dot(i, C.xxxx);\",\n    \"\",\n    \"// Other corners\",\n    \"\",\n    \"// Rank sorting originally contributed by Bill Licea-Kane, AMD (formerly ATI)\",\n    \"  vec4 i0;\",\n    \"  vec3 isX = step( x0.yzw, x0.xxx );\",\n    \"  vec3 isYZ = step( x0.zww, x0.yyz );\",\n    \"//  i0.x = dot( isX, vec3( 1.0 ) );\",\n    \"  i0.x = isX.x + isX.y + isX.z;\",\n    \"  i0.yzw = 1.0 - isX;\",\n    \"//  i0.y += dot( isYZ.xy, vec2( 1.0 ) );\",\n    \"  i0.y += isYZ.x + isYZ.y;\",\n    \"  i0.zw += 1.0 - isYZ.xy;\",\n    \"  i0.z += isYZ.z;\",\n    \"  i0.w += 1.0 - isYZ.z;\",\n    \"\",\n    \"  // i0 now contains the unique values 0,1,2,3 in each channel\",\n    \"  vec4 i3 = clamp( i0, 0.0, 1.0 );\",\n    \"  vec4 i2 = clamp( i0-1.0, 0.0, 1.0 );\",\n    \"  vec4 i1 = clamp( i0-2.0, 0.0, 1.0 );\",\n    \"\",\n    \"  //  x0 = x0 - 0.0 + 0.0 * C.xxxx\",\n    \"  //  x1 = x0 - i1  + 1.0 * C.xxxx\",\n    \"  //  x2 = x0 - i2  + 2.0 * C.xxxx\",\n    \"  //  x3 = x0 - i3  + 3.0 * C.xxxx\",\n    \"  //  x4 = x0 - 1.0 + 4.0 * C.xxxx\",\n    \"  vec4 x1 = x0 - i1 + C.xxxx;\",\n    \"  vec4 x2 = x0 - i2 + C.yyyy;\",\n    \"  vec4 x3 = x0 - i3 + C.zzzz;\",\n    \"  vec4 x4 = x0 + C.wwww;\",\n    \"\",\n    \"// Permutations\",\n    \"  i = mod289(i);\",\n    \"  float j0 = permute( permute( permute( permute(i.w) + i.z) + i.y) + i.x);\",\n    \"  vec4 j1 = permute( permute( permute( permute (\",\n    \"             i.w + vec4(i1.w, i2.w, i3.w, 1.0 ))\",\n    \"           + i.z + vec4(i1.z, i2.z, i3.z, 1.0 ))\",\n    \"           + i.y + vec4(i1.y, i2.y, i3.y, 1.0 ))\",\n    \"           + i.x + vec4(i1.x, i2.x, i3.x, 1.0 ));\",\n    \"\",\n    \"// Gradients: 7x7x6 points over a cube, mapped onto a 4-cross polytope\",\n    \"// 7*7*6 = 294, which is close to the ring size 17*17 = 289.\",\n    \"  vec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0) ;\",\n    \"\",\n    \"  vec4 p0 = grad4(j0,   ip);\",\n    \"  vec4 p1 = grad4(j1.x, ip);\",\n    \"  vec4 p2 = grad4(j1.y, ip);\",\n    \"  vec4 p3 = grad4(j1.z, ip);\",\n    \"  vec4 p4 = grad4(j1.w, ip);\",\n    \"\",\n    \"// Normalise gradients\",\n    \"  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\",\n    \"  p0 *= norm.x;\",\n    \"  p1 *= norm.y;\",\n    \"  p2 *= norm.z;\",\n    \"  p3 *= norm.w;\",\n    \"  p4 *= taylorInvSqrt(dot(p4,p4));\",\n    \"\",\n    \"// Mix contributions from the five corners\",\n    \"  vec3 m0 = max(0.6 - vec3(dot(x0,x0), dot(x1,x1), dot(x2,x2)), 0.0);\",\n    \"  vec2 m1 = max(0.6 - vec2(dot(x3,x3), dot(x4,x4)            ), 0.0);\",\n    \"  m0 = m0 * m0;\",\n    \"  m1 = m1 * m1;\",\n    \"  return 49.0 * ( dot(m0*m0, vec3( dot( p0, x0 ), dot( p1, x1 ), dot( p2, x2 )))\",\n    \"               + dot(m1*m1, vec2( dot( p3, x3 ), dot( p4, x4 ) ) ) ) ;\",\n    \"\",\n    \"  }\"\n  ].join(\"\\n\");\n\n})(\n  this.Blotter, this._\n);\n\n// See License comments in shader string\n\n(function(Blotter, _) {\n\n  Blotter.Assets.Shaders.PI = [\n    \"//\",\n    \"// Author : Reza Ali\",\n    \"// License : Distributed under the MIT License.\",\n    \"//\",\n    \"\",\n    \"#define TWO_PI 6.2831853072\",\n    \"#define PI 3.14159265359\",\n    \"#define HALF_PI 1.57079632679\"\n  ].join(\"\\n\");\n\n})(\n  this.Blotter, this._\n);\n\n// See License comments in shader string\n\n(function(Blotter, _) {\n\n  Blotter.Assets.Shaders.Random = [\n    \"//\",\n    \"// Author : Patricio Gonzalez Vivo and Jen Lowe\",\n    \"// License : Distributed under the MIT License.\",\n    \"// Source : https://github.com/patriciogonzalezvivo/thebookofshaders\",\n    \"//\",\n    \"\",\n    \"float random (in float _x) {\",\n  \t\"    return fract(sin(_x)*1e4);\",\n  \t\"}\",\n  \t\"\",\n  \t\"float random (in vec2 co) {\",\n  \t\"    return fract(sin(dot(co.xy,vec2(12.9898,78.233)))*43758.5453);\",\n\t  \"}\"\n  ].join(\"\\n\");\n\n})(\n  this.Blotter, this._\n);\n\n(function(Blotter, _) {\n\n  Blotter.Mapping = function (texts, textBounds, width, height) {\n    this.texts = texts;\n\n    this._textBounds = textBounds;\n\n    this._width = width;\n    this._height = height;\n\n    this._ratio = 1;\n  };\n\n  Blotter.Mapping.prototype = (function () {\n\n    function _getLineHeightPixels (size, lineHeight) {\n      lineHeight = lineHeight || Blotter.TextUtils.ensurePropertyValues().leading;\n      if (!isNaN(lineHeight)) {\n        lineHeight = size * lineHeight;\n      } else if (lineHeight.toString().indexOf(\"px\") !== -1) {\n        lineHeight = parseInt(lineHeight);\n      } else if (lineHeight.toString().indexOf(\"%\") !== -1) {\n        lineHeight = (parseInt(lineHeight) / 100) * size;\n      }\n\n      return lineHeight;\n    }\n\n    return {\n\n      constructor : Blotter.Mapping,\n\n      get ratio () {\n        return this._ratio;\n      },\n\n      set ratio (ratio) {\n        this._ratio = ratio || 1;\n      },\n\n      get width () {\n        return this._width * this._ratio;\n      },\n\n      get height () {\n        return this._height * this._ratio;\n      },\n\n      boundsForText : function (text) {\n        Blotter.Messaging.ensureInstanceOf(text, Blotter.Text, \"Blotter.Text\", \"Blotter.Mapping\", \"boundsForText\");\n\n        var bounds = this._textBounds[text.id];\n\n        if (bounds) {\n          bounds = {\n            w : bounds.w * this._ratio,\n            h : bounds.h * this._ratio,\n            x : bounds.x * this._ratio,\n            y : bounds.y * this._ratio\n          };\n        }\n\n        return bounds;\n      },\n\n      toCanvas : function (completion) {\n        var canvas = Blotter.CanvasUtils.hiDpiCanvas(this._width, this._height, this._ratio),\n            ctx = canvas.getContext(\"2d\", { alpha: false }),\n            img = new Image();\n\n        ctx.textBaseline = \"middle\";\n\n        for (var i = 0; i < this.texts.length; i++) {\n          var text = this.texts[i],\n              bounds = this._textBounds[text.id],\n              halfLH = (_getLineHeightPixels.call(this, text.properties.size, text.properties.leading) / 2);\n\n          ctx.font = text.properties.style +\n               \" \" + text.properties.weight +\n               \" \" + text.properties.size + \"px\" +\n               \" \" + text.properties.family;\n\n          ctx.save();\n\n          ctx.translate(\n            bounds.x + text.properties.paddingLeft,\n            (this._height - (bounds.y + bounds.h)) + text.properties.paddingTop\n          );\n          ctx.fillStyle = text.properties.fill;\n          ctx.fillText(\n            text.value,\n            0,\n            Math.round(halfLH)\n          );\n\n          ctx.restore();\n        }\n\n        img.onload = _.bind(function () {\n          // Flip Y for WebGL\n          ctx.save();\n          ctx.scale(1, -1);\n          ctx.clearRect(0, this._height * -1, this._width, this._height);\n          ctx.drawImage(img, 0, this._height * -1, this._width, this._height);\n          ctx.restore();\n\n          completion(canvas);\n        }, this);\n\n        img.src = canvas.toDataURL(\"image/png\");\n      }\n    };\n  })();\n\n})(\n  this.Blotter, this._\n);\n\n(function(Blotter, _, EventEmitter) {\n\n  Blotter.MappingMaterial = function(mapping, material, shaderMaterial, userUniformDataTextureObjects) {\n    this.mapping = mapping;\n    this.material = material;\n    this.shaderMaterial = shaderMaterial;\n\n    this._userUniformDataTextureObjects = userUniformDataTextureObjects;\n\n    this.init.apply(this, arguments);\n  };\n\n  Blotter.MappingMaterial.prototype = (function() {\n\n    function _setValueAtIndexInDataTextureObject (value, i, data, userUniform) {\n      var type = userUniform.type;\n\n      if (type == \"1f\") {\n        data[4*i]   = value;    // x (r)\n        data[4*i+1] = 0.0;\n        data[4*i+2] = 0.0;\n        data[4*i+3] = 0.0;\n      } else if (type == \"2f\") {\n        data[4*i]   = value[0]; // x (r)\n        data[4*i+1] = value[1]; // y (g)\n        data[4*i+2] = 0.0;\n        data[4*i+3] = 0.0;\n      } else if (type == \"3f\") {\n        data[4*i]   = value[0]; // x (r)\n        data[4*i+1] = value[1]; // y (g)\n        data[4*i+2] = value[2]; // z (b)\n        data[4*i+3] = 0.0;\n      } else if (type == \"4f\") {\n        data[4*i]   = value[0]; // x (r)\n        data[4*i+1] = value[1]; // y (g)\n        data[4*i+2] = value[2]; // z (b)\n        data[4*i+3] = value[3]; // w (a)\n      } else {\n        data[4*i]   = 0.0;\n        data[4*i+1] = 0.0;\n        data[4*i+2] = 0.0;\n        data[4*i+3] = 0.0;\n      }\n    }\n\n    function _getUniformInterfaceForDataTextureObject (dataTextureObject) {\n      var itface = {\n        _type : dataTextureObject.userUniform.type,\n        _value : dataTextureObject.userUniform.value,\n\n        get value () {\n          return this._value;\n        },\n\n        set value (v) {\n          if (!Blotter.UniformUtils.validValueForUniformType(this._type, v)) {\n            Blotter.Messaging.logError(\"Blotter.MappingMaterial\", false, \"uniform value not valid for uniform type: \" + this._type);\n            return;\n          }\n          this._value = v;\n\n          this.trigger(\"update\");\n        }\n      };\n\n      _.extend(itface, EventEmitter.prototype);\n\n      return itface;\n    }\n\n    function _getTextUniformInterface (mapping, userUniformDataTextureObjects) {\n      return _.reduce(mapping.texts, function (memo, text, textIndex) {\n        memo[text.id] = _.reduce(userUniformDataTextureObjects.userUniforms, function (memo, dataTextureObject, uniformName) {\n          var uniformIndex = dataTextureObject.position + textIndex;\n\n          memo[uniformName] = _getUniformInterfaceForDataTextureObject(dataTextureObject);\n\n          memo[uniformName].on(\"update\", function () {\n            _setValueAtIndexInDataTextureObject(\n              memo[uniformName].value,\n              uniformIndex,\n              userUniformDataTextureObjects.data,\n              dataTextureObject.userUniform\n            );\n\n            userUniformDataTextureObjects.texture.needsUpdate = true;\n          });\n\n          memo[uniformName].value = dataTextureObject.userUniform.value;\n\n          return memo;\n        }, {});\n\n        return memo;\n      }, {});\n    }\n\n    function _getUniformInterface (mapping, userUniformDataTextureObjects, textUniformInterface) {\n      return _.reduce(userUniformDataTextureObjects.userUniforms, function (memo, dataTextureObject, uniformName) {\n        memo[uniformName] = _getUniformInterfaceForDataTextureObject(dataTextureObject);\n\n        memo[uniformName].on(\"update\", function () {\n          _.each(mapping.texts, function (text) {\n            textUniformInterface[text.id][uniformName].value = memo[uniformName].value;\n          });\n\n          userUniformDataTextureObjects.texture.needsUpdate = true;\n        });\n\n        return memo;\n      }, {});\n    }\n\n    return {\n\n      constructor : Blotter.MappingMaterial,\n\n      get uniforms () {\n        return this.material.uniforms;\n      },\n\n      get mainImage () {\n        return this.material.mainImage;\n      },\n\n      get width () {\n        return this.mapping.width;\n      },\n\n      get height () {\n        return this.mapping.height;\n      },\n\n      get ratio () {\n        return this.mapping.ratio;\n      },\n\n      init : function (mapping, material, shaderMaterial, userUniformDataTextureObjects) {\n        this.textUniformInterface = _getTextUniformInterface(this.mapping, this._userUniformDataTextureObjects);\n        this.uniformInterface = _getUniformInterface(this.mapping, this._userUniformDataTextureObjects, this.textUniformInterface);\n      },\n\n      boundsForText : function (text) {\n        Blotter.Messaging.ensureInstanceOf(text, Blotter.Text, \"Blotter.Text\", \"Blotter.MappingMaterial\", \"boundsForText\");\n        return this.mapping.boundsForText(text);\n      }\n    };\n  })();\n\n})(\n  this.Blotter, this._, this.EventEmitter\n);\n\n(function(Blotter, _, EventEmitter) {\n\n  Blotter.Material = function () {\n    this.init.apply(this, arguments);\n  };\n\n  Blotter.Material.prototype = (function() {\n\n    function _defaultMainImageSrc () {\n      var mainImage = [\n\n        \"void mainImage( out vec4 mainImage, in vec2 fragCoord ) {\",\n\n          \"mainImage = textTexture(fragCoord / uResolution);\",\n\n        \"}\"\n\n      ];\n\n      return mainImage.join(\"\\n\");\n    }\n\n    function _getUniformInterfaceForUniformDescription (uniformDescription) {\n      var itface = {\n        _type : uniformDescription.type,\n        _value : uniformDescription.value,\n\n        get type () {\n          return this._type;\n        },\n\n        set type (v) {\n          this._type = v;\n        },\n\n        get value () {\n          return this._value;\n        },\n\n        set value (v) {\n          if (!Blotter.UniformUtils.validValueForUniformType(this._type, v)) {\n            Blotter.Messaging.logError(\"Blotter.Material\", false, \"uniform value not valid for uniform type: \" + this._type);\n            return;\n          }\n          this._value = v;\n\n          this.trigger(\"update\");\n        }\n      };\n\n      _.extend(itface, EventEmitter.prototype);\n\n      return itface;\n    }\n\n    function _getUniformInterface (uniforms) {\n      return _.reduce(uniforms, _.bind(function (memo, uniformDescription, uniformName) {\n        memo[uniformName] = _getUniformInterfaceForUniformDescription(uniformDescription);\n        memo[uniformName].on(\"update\", _.bind(function () {\n          this.trigger(\"update:uniform\", [uniformName]);\n        }, this));\n\n        return memo;\n      }, this), {});\n    }\n\n    return {\n\n      constructor : Blotter.Material,\n\n      get needsUpdate () { }, // jshint\n\n      set needsUpdate (value) {\n        if (value === true) {\n          this.trigger(\"update\");\n        }\n      },\n\n      get mainImage () {\n        return this._mainImage;\n      },\n\n      set mainImage (mainImage) {\n        this._mainImage = mainImage || _defaultMainImageSrc();\n      },\n\n      get uniforms () {\n        return this._uniforms;\n      },\n\n      set uniforms (uniforms) {\n        this._uniforms = _getUniformInterface.call(this, Blotter.UniformUtils.extractValidUniforms(\n          _.extend(uniforms, Blotter.UniformUtils.defaultUniforms)\n        ));\n      },\n\n      init : function () {\n        this.mainImage = _defaultMainImageSrc();\n        this.uniforms = {};\n      }\n    };\n  })();\n\n  Blotter._extendWithGettersSetters(Blotter.Material.prototype, EventEmitter.prototype);\n\n})(\n  this.Blotter, this._, this.EventEmitter\n);\n\n(function(Blotter, _) {\n\n  Blotter.ShaderMaterial = function(mainImage, options) {\n    Blotter.Material.apply(this, arguments);\n  };\n\n  Blotter.ShaderMaterial.prototype = Object.create(Blotter.Material.prototype);\n\n  Blotter._extendWithGettersSetters(Blotter.ShaderMaterial.prototype, (function () {\n\n    return {\n\n      constructor : Blotter.ShaderMaterial,\n\n      init : function (mainImage, options) {\n        _.defaults(this, options);\n\n        this.mainImage = mainImage;\n      }\n    };\n\n  })());\n\n})(\n  this.Blotter, this._\n);\n\n(function(Blotter, _, EventEmitter) {\n\n  Blotter.RenderScope = function (text, blotter) {\n    this.text = text;\n    this.blotter = blotter;\n\n    this.material = {\n      mainImage : this.blotter.material.mainImage\n    };\n\n    this._mappingMaterial = blotter.mappingMaterial;\n\n    this.playing = this.blotter.autoplay;\n    this.timeDelta = 0;\n    this.lastDrawTime = false;\n    this.frameCount = 0;\n\n    this.domElement = Blotter.CanvasUtils.hiDpiCanvas(0, 0, this.blotter.ratio, {\n      class : \"b-canvas\",\n      html : text.value\n    });\n\n    this.context = this.domElement.getContext(\"2d\");\n  };\n\n  Blotter.RenderScope.prototype = (function () {\n\n    function _setMouseEventListeners () {\n      var self = this,\n          eventNames = [\"mousedown\", \"mouseup\", \"mousemove\", \"mouseenter\", \"mouseleave\"];\n\n      function setMouseListener (eventName) {\n        self.domElement.addEventListener(eventName, function(e) {\n          var position = Blotter.CanvasUtils.normalizedMousePosition(self.domElement, e);\n\n          self.emit(eventName, position);\n        }, false);\n      }\n\n      for (var i = 0; i < eventNames.length; i++) {\n        var eventName = eventNames[i];\n\n        setMouseListener(eventName);\n      }\n    }\n\n    function _getBoundsForMappingMaterialAndText (mappingMaterial, text) {\n      var bounds = mappingMaterial.boundsForText(text);\n\n      if (bounds) {\n        return {\n          w : bounds.w,\n          h : bounds.h,\n          x : -1 * Math.floor(bounds.x),\n          y : -1 * Math.floor(mappingMaterial.height - (bounds.y + bounds.h))\n        };\n      }\n    }\n\n    function _transferInferfaceValues (oldInterface, newInterface) {\n      _.each(oldInterface, function(interfaceObject, uniformName) {\n        var newInterfaceObject = newInterface[uniformName];\n\n        if (newInterfaceObject) {\n          var typesMatch = newInterfaceObject.type == interfaceObject.type,\n              valuesMatch = newInterfaceObject.value == interfaceObject.value;\n\n          if (typesMatch && !valuesMatch) {\n            newInterfaceObject.value = interfaceObject.value;\n          }\n        }\n      });\n    }\n\n    function _getUniformInterfaceForUniformDescription (uniformDescription) {\n      var itface = {\n        _type : uniformDescription.type,\n        _value : uniformDescription.value,\n\n        get type () {\n          return this._type;\n        },\n\n        set type (v) {\n          Blotter.Messaging.logError(\"Blotter.RenderScope\", false, \"uniform types may not be updated through a text scope\");\n        },\n\n        get value () {\n          return this._value;\n        },\n\n        set value (v) {\n          if (!Blotter.UniformUtils.validValueForUniformType(this._type, v)) {\n            Blotter.Messaging.logError(\"Blotter.RenderScope\", false, \"uniform value not valid for uniform type: \" + this._type);\n            return;\n          }\n          this._value = v;\n\n          this.trigger(\"update\");\n        }\n      };\n\n      _.extend(itface, EventEmitter.prototype);\n\n      return itface;\n    }\n\n    function _getUniformInterfaceForMaterialUniforms (uniforms) {\n      return _.reduce(uniforms, _.bind(function (memo, uniformDescription, uniformName) {\n        memo[uniformName] = _getUniformInterfaceForUniformDescription(uniformDescription);\n        memo[uniformName].on(\"update\", _.bind(function () {\n          this.trigger(\"update:uniform\", [uniformName]);\n        }, this));\n\n        return memo;\n      }, this), {});\n    }\n\n    function _update () {\n      var mappingMaterial = this._mappingMaterial,\n          bounds = mappingMaterial && _getBoundsForMappingMaterialAndText(mappingMaterial, this.text),\n          previousUniforms = this.material.uniforms;\n\n      if (mappingMaterial && bounds) {\n        Blotter.CanvasUtils.updateCanvasSize(\n          this.domElement,\n          bounds.w / this.blotter.ratio,\n          bounds.h / this.blotter.ratio,\n          this.blotter.ratio\n        );\n        this.domElement.innerHTML = this.text.value;\n\n        this.bounds = bounds;\n\n        this.material.uniforms = _getUniformInterfaceForMaterialUniforms.call(this, mappingMaterial.uniforms);\n        this.material.mainImage = mappingMaterial.mainImage;\n\n        if (previousUniforms) {\n          _transferInferfaceValues(previousUniforms, this.material.uniforms);\n        }\n\n        this.trigger(this.lastUpdated ? \"update\" : \"ready\");\n        this.lastUpdated = Date.now();\n      }\n    }\n\n    return {\n\n      constructor : Blotter.RenderScope,\n\n      get needsUpdate () { }, // jshint\n\n      set needsUpdate (value) {\n        if (value === true) {\n          _update.call(this);\n        }\n      },\n\n      get mappingMaterial () { },\n\n      set mappingMaterial (mappingMaterial) {\n        this._mappingMaterial = mappingMaterial;\n      },\n\n      play : function () {\n        this.playing = true;\n      },\n\n      pause : function () {\n        this.playing = false;\n      },\n\n      render : function () {\n        if (this.bounds) {\n          var now = Date.now();\n\n          this.frameCount += 1;\n          this.timeDelta = (now - (this.lastDrawTime || now)) / 1000;\n          this.lastDrawTime = now;\n\n          this.context.clearRect(0, 0, this.domElement.width, this.domElement.height);\n\n          this.context.putImageData(\n            this.blotter.imageData,\n            this.bounds.x,\n            this.bounds.y\n          );\n\n          this.trigger(\"render\", [this.frameCount]);\n        }\n      },\n\n      appendTo : function (element) {\n        if (typeof element.append === \"function\") {\n          element.append(this.domElement);\n        } else {\n          element.appendChild(this.domElement);\n        }\n\n        _setMouseEventListeners.call(this);\n\n        return this;\n      }\n    };\n  })();\n\n  Blotter._extendWithGettersSetters(Blotter.RenderScope.prototype, EventEmitter.prototype);\n\n})(\n  this.Blotter, this._, this.EventEmitter\n);\n\n(function(Blotter, _, THREE, EventEmitter) {\n\n  var root = this;\n\n  Blotter.Renderer = function () {\n    this._currentAnimationLoop = false;\n\n    this._scene = new THREE.Scene();\n\n    this._plane = new THREE.PlaneGeometry(1, 1);\n\n    this._material = new THREE.MeshBasicMaterial(); // Stub material.\n\n    this._mesh = new THREE.Mesh(this._plane, this._material);\n    this._scene.add(this._mesh);\n\n    this._camera = new THREE.OrthographicCamera(0.5, 0.5, 0.5, 0.5, 0, 100);\n\n    this.init.apply(this, arguments);\n  };\n\n  Blotter.Renderer.prototype = (function () {\n\n    function _getRenderTargetWithSize (width, height) {\n      var renderTarget = new THREE.WebGLRenderTarget(width, height, {\n        minFilter: THREE.LinearFilter,\n        magFilter: THREE.LinearFilter,\n        format: THREE.RGBAFormat,\n        type: THREE.UnsignedByteType\n      });\n\n      renderTarget.texture.generateMipmaps = false;\n      renderTarget.width = width;\n      renderTarget.height = height;\n\n      return renderTarget;\n    }\n\n    function _loop () {\n      Blotter.webglRenderer.render(this._scene, this._camera, this._renderTarget);\n\n      Blotter.webglRenderer.readRenderTargetPixels(\n        this._renderTarget,\n        0,\n        0,\n        this._renderTarget.width,\n        this._renderTarget.height,\n        this._imageDataArray\n      );\n\n      this.trigger(\"render\");\n\n      this._currentAnimationLoop = root.requestAnimationFrame(_.bind(_loop, this));\n    }\n\n    return {\n\n      constructor : Blotter.Renderer,\n\n      get material () { }, // jshint\n\n      set material (material) {\n        if (material instanceof THREE.Material) {\n          this._material = material;\n          this._mesh.material = material;\n        }\n      },\n\n      get width () {\n        return this._width;\n      },\n\n      set width (width) {\n        this.setSize(width, this._height);\n      },\n\n      get height () {\n        return this._height;\n      },\n\n      set height (height) {\n        this.setSize(this._width, height);\n      },\n\n      init : function () {\n        this.setSize(1, 1);\n      },\n\n      start : function () {\n        if (!this._currentAnimationLoop) {\n          _loop.call(this);\n        }\n      },\n\n      stop : function () {\n        if (this._currentAnimationLoop) {\n          root.cancelAnimationFrame(this._currentAnimationLoop);\n          this._currentAnimationLoop = undefined;\n        }\n      },\n\n      setSize : function (width, height) {\n        this._width = Math.trunc(width) || 1;\n        this._height = Math.trunc(height) || 1;\n\n        this._mesh.scale.set(this._width, this._height, 1);\n\n        this._camera.left = this._width / - 2;\n        this._camera.right = this._width / 2;\n        this._camera.top = this._height / 2;\n        this._camera.bottom = this._height / - 2;\n        this._camera.updateProjectionMatrix();\n\n        this._renderTarget = _getRenderTargetWithSize(this._width, this._height);\n\n        this._viewBuffer = new ArrayBuffer(this._width * this._height * 4);\n        this._imageDataArray = new Uint8Array(this._viewBuffer);\n        this._clampedImageDataArray = new Uint8ClampedArray(this._viewBuffer);\n\n        this.imageData = new ImageData(this._clampedImageDataArray, this._width, this._height);\n      },\n\n      teardown : function () {\n        this.stop();\n      }\n    };\n  })();\n\n  Blotter._extendWithGettersSetters(Blotter.Renderer.prototype, EventEmitter.prototype);\n\n})(\n  this.Blotter, this._, this.THREE, this.EventEmitter\n);\n\n(function(Blotter, _, THREE, setImmediate) {\n\n  // Create a Data Texture holding the boundaries (x/y offset and w/h) that should be available to any given texel for any given text.\n\n  Blotter.BoundsDataTextureBuilder = (function () {\n\n    function _boundsDataForMapping (mapping) {\n      var texts = mapping.texts,\n          data = new Float32Array(texts.length * 4);\n\n      for (var i = 0; i < texts.length; i++) {\n        var text = texts[i],\n            bounds = mapping.boundsForText(text);\n\n        data[4*i]   = bounds.x;                               // x\n        data[4*i+1] = mapping.height - (bounds.y + bounds.h); // y\n        data[4*i+2] = bounds.w;                               // w\n        data[4*i+3] = bounds.h;                               // h\n      }\n\n      return data;\n    }\n\n    return {\n\n      build : function (mapping, completion) {\n        setImmediate(function() {\n          var data = _boundsDataForMapping(mapping),\n              texture = new THREE.DataTexture(data, mapping.texts.length, 1, THREE.RGBAFormat, THREE.FloatType);\n\n          texture.needsUpdate = true;\n\n          completion(texture);\n        });\n      }\n    };\n  })();\n\n})(\n  this.Blotter, this._, this.THREE, this.setImmediate\n);\n\n(function(Blotter, _, THREE, setImmediate) {\n\n  // Create a Data Texture the size of our text map wherein every texel holds the index of text whose boundaries contain the given texel's position.\n\n  Blotter.IndicesDataTextureBuilder = (function () {\n\n    function _indicesDataForMapping (mapping, width, height, sampleAccuracy) {\n\n      var ratio = mapping.ratio,\n          points = new Float32Array((height * width) * 4),\n          widthStepModifier = width % 1,\n          indicesOffset = (1 / mapping.texts.length) / 2; // Values stored in this texture will be sampled from the 'middle' of their texel position.\n\n      for (var i = 1; i < points.length / 4; i++) {\n\n        var y = Math.ceil(i / (width - widthStepModifier)),\n            x = i - ((width - widthStepModifier) * (y - 1)),\n            refIndex = 0.0,\n            bg = 0.0,\n            a = 0.0;\n\n        for (var ki = 0; ki < mapping.texts.length; ki++) {\n          var text = mapping.texts[ki],\n              bounds = mapping.boundsForText(text),\n              bW = (bounds.w / ratio) * sampleAccuracy,\n              bH = (bounds.h / ratio) * sampleAccuracy,\n              bX = (bounds.x / ratio) * sampleAccuracy,\n              bY = (bounds.y / ratio) * sampleAccuracy;\n\n          // If x and y are within the fit bounds of the text space within our mapped texts texture.\n          if (y >= bY &&\n              y <= bY + bH &&\n              x >= bX &&\n              x <= bX + bW) {\n            refIndex = (ki / mapping.texts.length) + indicesOffset;\n            a = 1.0;\n            break;\n          }\n        }\n\n        var index = i - 1;\n\n        points[4*index+0] = refIndex;\n        points[4*index+1] = bg;\n        points[4*index+2] = bg;\n        points[4*index+3] = a;\n      }\n      return points;\n    }\n\n    return {\n\n      build : function (mapping, completion) {\n        // There is a negative coorelation between the sampleAccuracy value and\n        // the speed at which texture generation happens.\n        // However, the lower this value, the less sampleAccuracy you can expect\n        // for indexing into uniforms for any given text.\n        // Value must be between 0.0 and 1.0, and you are advised to keep it around 0.5.\n        var sampleAccuracy = 0.5;\n\n        setImmediate(function() {\n          var width = (mapping.width / mapping.ratio) * sampleAccuracy,\n              height = (mapping.height / mapping.ratio) * sampleAccuracy,\n              data = _indicesDataForMapping(mapping, width, height, sampleAccuracy),\n              texture = new THREE.DataTexture(data, width, height, THREE.RGBAFormat, THREE.FloatType);\n\n          texture.flipY = true;\n          texture.needsUpdate = true;\n\n          completion(texture);\n        });\n      }\n    };\n  })();\n\n})(\n  this.Blotter, this._, this.THREE, this.setImmediate\n);\n\n\n(function(Blotter, _, THREE) {\n\n  Blotter.TextTextureBuilder = (function() {\n\n    return {\n\n      build : function (mapping, completion) {\n        var loader = new THREE.TextureLoader(),\n            url;\n\n        mapping.toCanvas(_.bind(function(canvas) {\n          url = canvas.toDataURL();\n\n          loader.load(url, _.bind(function(texture) {\n            texture.minFilter = THREE.LinearFilter;\n            texture.magFilter = THREE.LinearFilter;\n            texture.generateMipmaps = true;\n            texture.needsUpdate = true;\n\n            completion(texture);\n          }, this));\n        }, this));\n      }\n    };\n  })();\n\n})(\n  this.Blotter, this._, this.THREE\n);\n\n(function(Blotter, _, THREE, GrowingPacker, setImmediate) {\n\n  Blotter.MappingBuilder = (function () {\n\n    // Sort texts based on area of space required for any given text, descending\n\n    function _sortTexts (textA, textB) {\n      var areaA = textA.w * textA.h,\n          areaB = textB.w * textB.h;\n\n      return areaB - areaA;\n    }\n\n    function _getTextSizes (texts) {\n      return _.reduce(texts, function (textSizes, text) {\n        var size = Blotter.TextUtils.sizeForText(text.value, text.properties);\n        textSizes[text.id] = size;\n        return textSizes;\n      }, []);\n    }\n\n    return {\n\n      build : function (texts, completion) {\n        setImmediate(function() {\n          var filteredTexts = Blotter.TextUtils.filterTexts(texts),\n              textSizes = _getTextSizes(filteredTexts),\n              packer = new GrowingPacker(),\n              tempTextBounds = [],\n              textBounds = {},\n              mapping;\n\n          // Build array of objects holding a Text object's id, width, and height for sorting.\n          for (var textId in textSizes) {\n            if (textSizes.hasOwnProperty(textId)) {\n              var tempSizesObject = textSizes[textId];\n              tempSizesObject.referenceId = textId;\n              tempTextBounds.push(tempSizesObject);\n            }\n          }\n\n          // Add fit object to all objects in tempTextBounds.\n          packer.fit(tempTextBounds.sort(_sortTexts));\n\n          // Add fit objects back into this._textBounds for each Text id.\n          for (var i = 0; i < tempTextBounds.length; i++) {\n            var packedSizesObject = tempTextBounds[i];\n            textBounds[packedSizesObject.referenceId] = {\n              w : packedSizesObject.w,\n              h : packedSizesObject.h,\n              x : packedSizesObject.fit.x,\n              y : packer.root.h - (packedSizesObject.fit.y + packedSizesObject.h)\n            };\n          }\n\n          completion(new Blotter.Mapping(filteredTexts, textBounds, packer.root.w, packer.root.h));\n        });\n      }\n    };\n  })();\n\n})(\n  this.Blotter, this._, this.THREE, this.GrowingPacker, this.setImmediate\n);\n\n(function(Blotter, _, THREE) {\n\n  Blotter.MappingMaterialBuilder = (function() {\n\n    function _vertexSrc () {\n      var vertexSrc = [\n\n        \"varying vec2 _vTexCoord;\",\n\n        \"void main() {\",\n\n        \"  _vTexCoord = uv;\",\n        \"  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\",\n\n        \"}\"\n\n      ];\n\n      return vertexSrc.join(\"\\n\");\n    }\n\n    function _fragmentSrc (userUniformDataTextureObjects, textsLength, mainImageSrc) {\n      var fragmentSrc,\n          userUniforms = {\n            // Strings of uniform declarations for each publicly facing version of each user defined and default uniform.\n            publicUniformDeclarations : \"\",\n            // Strings of uniform definitions for each publicly facing version of each user defined and default uniform.\n            publicUniformDefinitions : \"\"\n          },\n          halfPixel = ((1 / userUniformDataTextureObjects.data.length) / 2).toFixed(20),\n          userUniformsTextureWidth = (userUniformDataTextureObjects.texture.image.width).toFixed(1);\n\n      _.reduce(userUniformDataTextureObjects.userUniforms, function (userUniforms, uniformObject, uniformName) {\n        var glslSwizzle = Blotter.UniformUtils.fullSwizzleStringForUniformType(uniformObject.userUniform.type),\n            glslDataType = Blotter.UniformUtils.glslDataTypeForUniformType(uniformObject.userUniform.type);\n\n        // This is super convoluted. Sorry. All user uniforms are passed in a single texture, where for each uniform\n        //   there is a single rgba value per text. Within this texture data we need to be able to locate the position\n        //   of any given text's value for the given uniform. The maths here use the `textIndex` value, a value\n        //   sampled via the `indicesValueTexture`, to locate the text value for the given uniform, and then offsets that\n        //   value by half a texel in the overall _userUniformsTexture\n        var uniformSamplePosition = \"((\" + (uniformObject.position).toFixed(1) + \" + ((textIndex - ((1.0 / \" + textsLength.toFixed(1) + \") / 2.0)) * \" + textsLength.toFixed(1) + \")) / \" + userUniformsTextureWidth + \") + \" + halfPixel;\n\n        userUniforms.publicUniformDeclarations += glslDataType + \" \" + uniformName + \";\\n\";\n        userUniforms.publicUniformDefinitions += \"   \" + uniformName + \" = texture2D(_userUniformsTexture, vec2(\" + uniformSamplePosition + \", 0.5)).\" + glslSwizzle + \";\\n\";\n\n        return userUniforms;\n      }, userUniforms);\n\n      fragmentSrc = [\n\n        Blotter.Assets.Shaders.Blending,\n\n        Blotter.Assets.Shaders.TextTexture,\n\n        // Private blotter defined uniforms.\n        \"uniform sampler2D _uSampler;\",\n        \"uniform vec2 _uCanvasResolution;\",\n        \"uniform sampler2D _uTextIndicesTexture;\",\n        \"uniform sampler2D _uTextBoundsTexture;\",\n\n        // Private texCoord and bounds information.\n        \"varying vec2 _vTexCoord;\",\n        \"vec4 _textBounds;\",\n\n        // Private versions of user defined and default uniform declarations\n        \"uniform sampler2D _userUniformsTexture;\",\n\n        // Public versions of user defined and default uniform declarations\n        userUniforms.publicUniformDeclarations,\n\n        \"// Helper function used by user programs to retrieve texel color information within the bounds of\",\n        \"// any given text. This is to be used instead of `texture2D` in the fragment sources for all Blotter materials.\",\n        \"vec4 textTexture(vec2 coord) {\",\n        \"   vec2 adjustedFragCoord = _textBounds.xy + vec2((_textBounds.z * coord.x), (_textBounds.w * coord.y));\",\n        \"   vec2 uv = adjustedFragCoord.xy / _uCanvasResolution;\",\n\n        \"   //  If adjustedFragCoord falls outside the bounds of the current texel's text, return `vec4(0.0)`.\",\n        \"   if (adjustedFragCoord.x < _textBounds.x ||\",\n        \"       adjustedFragCoord.x > _textBounds.x + _textBounds.z ||\",\n        \"       adjustedFragCoord.y < _textBounds.y ||\",\n        \"       adjustedFragCoord.y > _textBounds.y + _textBounds.w) {\",\n        \"     return vec4(0.0);\",\n        \"   }\",\n\n        \"   return texture2D(_uSampler, uv);\",\n        \"}\",\n\n        \"void mainImage(out vec4 mainImage, in vec2 fragCoord);\",\n\n        mainImageSrc,\n\n        \"void main(void) {\",\n\n        //  Retrieve text index and text alpha for text bounds in which texel is contained.\n        \"   vec4 textIndexData = texture2D(_uTextIndicesTexture, _vTexCoord);\",\n        \"   float textIndex = textIndexData.r;\",\n        \"   float textAlpha = textIndexData.a;\",\n\n        //  Make bounds for the current text globally visible.\n        \"   _textBounds = texture2D(_uTextBoundsTexture, vec2(textIndex, 0.5));\",\n\n        //  Set \"uniform\" values visible to user.\n        userUniforms.publicUniformDefinitions,\n        \"   uResolution = _textBounds.zw;\",\n\n        //  Set fragment coordinate in respect to position within text bounds.\n        \"   vec2 fragCoord = gl_FragCoord.xy - _textBounds.xy;\",\n        //  Call user defined fragment function, setting outColor on return.\n        \"   vec4 outColor;\",\n        \"   mainImage(outColor, fragCoord);\",\n\n        //  Multiply alpha by original textIndexData's fourth value.\"\n        //  this will be 0 for texels not within any 'text' area.\"\n        \"   outColor.a = outColor.a * textAlpha;\",\n        \"   gl_FragColor = outColor;\",\n        \"}\"\n\n      ];\n\n      return fragmentSrc.join(\"\\n\");\n    }\n\n    function _buildMappedTextsTexture (mapping, completion) {\n      Blotter.TextTextureBuilder.build(mapping, function (texture) {\n        completion(texture);\n      });\n    }\n\n    function _buildMappingDataTextureObjects (mapping, completion) {\n      var buildIndicesTexture,\n          buildBoundsTexture,\n          mappingDataTextureObjects = [],\n          buildStages;\n\n      buildIndicesTexture = function () {\n        return function (next) {\n          Blotter.IndicesDataTextureBuilder.build(mapping, function (texture) {\n            mappingDataTextureObjects.push({\n              uniformName : \"_uTextIndicesTexture\",\n              texture : texture\n            });\n            next();\n          });\n        };\n      };\n\n      buildBoundsTexture = function () {\n        return function (next) {\n          Blotter.BoundsDataTextureBuilder.build(mapping, function (texture) {\n            mappingDataTextureObjects.push({\n              uniformName : \"_uTextBoundsTexture\",\n              texture : texture\n            });\n            next();\n          });\n        };\n      };\n\n      buildStages = [\n        buildIndicesTexture(),\n        buildBoundsTexture()\n      ];\n\n      _(buildStages).reduceRight(_.wrap, function () {\n        completion(mappingDataTextureObjects);\n      })();\n    }\n\n    function _buildUserUniformDataTextureObjects (userUniforms, textsLength, completion) {\n      Blotter.UniformUtils.ensureHasRequiredDefaultUniforms(userUniforms,\n        \"Blotter.MappingMaterialBuilder\",\n        \"_buildUserUniformDataTextureObjects\");\n\n      userUniforms = Blotter.UniformUtils.extractValidUniforms(userUniforms);\n\n      var uniformsDataLength = Object.keys(userUniforms).length * textsLength;\n      var data = new Float32Array(uniformsDataLength * 4);\n      var texture = new THREE.DataTexture(data, uniformsDataLength, 1, THREE.RGBAFormat, THREE.FloatType);\n\n      var userUniformDataTextureObjects = {\n        data : data,\n        texture : texture,\n        userUniforms : {}\n      };\n\n      _.reduce(userUniforms, function (memo, userUniform, uniformName) {\n        var uniformPosition = Object.keys(userUniforms).indexOf(uniformName) * textsLength;\n\n        memo.userUniforms[uniformName] = {\n          userUniform : userUniform,\n          position : uniformPosition\n        };\n\n        return memo;\n      }, userUniformDataTextureObjects);\n\n      completion(userUniformDataTextureObjects);\n    }\n\n    function _getUniformsForMappingDataTextureObjects (mappingDataTextureObjects) {\n      return _.reduce(mappingDataTextureObjects, function (memo, mappingDataTextureObject) {\n        memo[mappingDataTextureObject.uniformName] = {\n          type : \"t\",\n          value : mappingDataTextureObject.texture\n        };\n        return memo;\n      }, {});\n    }\n\n    function _getUniformsForUserUniformDataObjects (userUniformDataObjects) {\n      return {\n        _userUniformsTexture: {\n          type : \"t\",\n          value : userUniformDataObjects.texture\n        }\n      };\n    }\n\n    function _getUniforms (width, height, mappedTextsTexture, mappingDataTextureObjects, userUniformDataTextureObjects) {\n      var uniforms = {\n        _uSampler : { type : \"t\", value : mappedTextsTexture },\n        _uCanvasResolution : { type : \"2f\", value : [width, height] }\n      };\n\n      _.extend(uniforms, _getUniformsForMappingDataTextureObjects(mappingDataTextureObjects));\n      _.extend(uniforms, _getUniformsForUserUniformDataObjects(userUniformDataTextureObjects));\n\n      return uniforms;\n    }\n\n    function _getThreeMaterial (vertexSrc, fragmentSrc, uniforms) {\n      var threeMaterial = new THREE.ShaderMaterial({\n        vertexShader : vertexSrc,\n        fragmentShader : fragmentSrc,\n        uniforms : uniforms\n      });\n\n      threeMaterial.depthTest = false;\n      threeMaterial.depthWrite = false;\n      threeMaterial.premultipliedAlpha = false;\n\n      return threeMaterial;\n    }\n\n    return {\n\n      build : function (mapping, material, completion) {\n        var buildMappedTextsTexture,\n            buildMappingDataTextureObjects,\n            buildUserUniformDataAndDataTextureObjects,\n            mappedTextsTexture,\n            mappingDataTextureObjects,\n            userUniformDataAndDataTextureObjects,\n            buildStages;\n\n        buildMappedTextsTexture = function () {\n          return function (next) {\n            _buildMappedTextsTexture(mapping, function (texture) {\n              mappedTextsTexture = texture;\n              next();\n            });\n          };\n        };\n\n        buildMappingDataTextureObjects = function () {\n          return function (next) {\n            _buildMappingDataTextureObjects(mapping, function (objects) {\n              mappingDataTextureObjects = objects;\n              next();\n            });\n          };\n        };\n\n        buildUserUniformDataTextureObjects = function () {\n          return function (next) {\n            _buildUserUniformDataTextureObjects(material.uniforms, mapping.texts.length, function (objects) {\n              userUniformDataTextureObjects = objects;\n              next();\n            });\n          };\n        };\n\n        buildStages = [\n          buildMappedTextsTexture(),\n          buildMappingDataTextureObjects(),\n          buildUserUniformDataTextureObjects()\n        ];\n\n        _(buildStages).reduceRight(_.wrap, function () {\n          var uniforms = _getUniforms(\n                mapping.width,\n                mapping.height,\n                mappedTextsTexture,\n                mappingDataTextureObjects,\n                userUniformDataTextureObjects\n              ),\n              userUniforms = _.omit(uniforms, \"_uCanvasResolution\", \"_uSampler\", \"_uTextBoundsTexture\", \"_uTextIndicesTexture\"),\n              threeMaterial = _getThreeMaterial(_vertexSrc(), _fragmentSrc(userUniformDataTextureObjects, mapping.texts.length, material.mainImage), uniforms);\n\n          completion(new Blotter.MappingMaterial(mapping, material, threeMaterial, userUniformDataTextureObjects));\n        })();\n      }\n    };\n  })();\n\n})(\n  this.Blotter, this._, this.THREE\n);"]}]}